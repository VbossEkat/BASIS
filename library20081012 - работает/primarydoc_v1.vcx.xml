<?xml version = "1.0" encoding="UTF-8" standalone="yes"?>
<VFPData>
	<record>
		<platform>COMMENT</platform>
		<uniqueid>Class</uniqueid>
		<timestamp>0</timestamp>
		<class/>
		<classloc/>
		<baseclass/>
		<objname/>
		<parent/>
		<properties/>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1>VERSION =   3.00</reserved1>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1ON0L3DWH</uniqueid>
		<timestamp>0</timestamp>
		<class>cnt</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>cntfrmstatusinfo</objname>
		<parent/>
		<properties>Width = 512
Height = 27
Name = "cntfrmstatusinfo"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1>Class</reserved1>
		<reserved2>11</reserved2>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6>Pixels</reserved6>
		<reserved7>Ñòàòóñû ôîðìû</reserved7>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1ON0OUJQ9</uniqueid>
		<timestamp>0</timestamp>
		<class>shp</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>shape</baseclass>
		<objname>ShpFrmStatusInfo</objname>
		<parent>cntfrmstatusinfo</parent>
		<properties>Top = 0
Left = 0
Height = 27
Width = 512
SpecialEffect = 0
ZOrderSet = 0
Name = "ShpFrmStatusInfo"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18I0M4ORT</uniqueid>
		<timestamp>0</timestamp>
		<class>label</class>
		<classloc/>
		<baseclass>label</baseclass>
		<objname>lblStatusID</objname>
		<parent>cntfrmstatusinfo</parent>
		<properties>AutoSize = .T.
FontBold = .T.
Caption = "Ñòàòóñû äîêóìåíòîâ:"
Height = 17
Left = 5
Top = 5
Width = 124
ZOrderSet = 1
Name = "lblStatusID"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18I0M4ORT</uniqueid>
		<timestamp>0</timestamp>
		<class>shape</class>
		<classloc/>
		<baseclass>shape</baseclass>
		<objname>shpStatusID1</objname>
		<parent>cntfrmstatusinfo</parent>
		<properties>Top = 5
Left = 136
Height = 17
Width = 17
FillStyle = 0
FillColor = 0,255,255
ZOrderSet = 2
Name = "shpStatusID1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_R020K4VL1</uniqueid>
		<timestamp>0</timestamp>
		<class>label</class>
		<classloc/>
		<baseclass>label</baseclass>
		<objname>lblStatusID1</objname>
		<parent>cntfrmstatusinfo</parent>
		<properties>AutoSize = .T.
Caption = "Ãîòîâèòñÿ"
Height = 17
Left = 156
Top = 5
Width = 59
ZOrderSet = 3
Name = "lblStatusID1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18I0M4ORT</uniqueid>
		<timestamp>0</timestamp>
		<class>shape</class>
		<classloc/>
		<baseclass>shape</baseclass>
		<objname>shpStatusID2</objname>
		<parent>cntfrmstatusinfo</parent>
		<properties>Top = 5
Left = 221
Height = 17
Width = 17
FillStyle = 0
FillColor = 0,255,0
ZOrderSet = 4
Name = "shpStatusID2"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_R020K4VL1</uniqueid>
		<timestamp>0</timestamp>
		<class>label</class>
		<classloc/>
		<baseclass>label</baseclass>
		<objname>lblStatusID2</objname>
		<parent>cntfrmstatusinfo</parent>
		<properties>AutoSize = .T.
Caption = "Ïîäãîòîâëåí"
Height = 17
Left = 241
Top = 5
Width = 75
ZOrderSet = 5
Name = "lblStatusID2"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18I0M4ORT</uniqueid>
		<timestamp>0</timestamp>
		<class>shape</class>
		<classloc/>
		<baseclass>shape</baseclass>
		<objname>shpStatusID3</objname>
		<parent>cntfrmstatusinfo</parent>
		<properties>Top = 5
Left = 324
Height = 17
Width = 17
FillStyle = 0
FillColor = 255,255,0
ZOrderSet = 6
Name = "shpStatusID3"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_R020K4VL1</uniqueid>
		<timestamp>0</timestamp>
		<class>label</class>
		<classloc/>
		<baseclass>label</baseclass>
		<objname>lblStatusID3</objname>
		<parent>cntfrmstatusinfo</parent>
		<properties>AutoSize = .T.
Caption = "Àêöåïòîâàí"
Height = 17
Left = 344
Top = 5
Width = 68
ZOrderSet = 7
Name = "lblStatusID3"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1ON0LG79Q</uniqueid>
		<timestamp>0</timestamp>
		<class>shape</class>
		<classloc/>
		<baseclass>shape</baseclass>
		<objname>shpStatusID4</objname>
		<parent>cntfrmstatusinfo</parent>
		<properties>Top = 5
Left = 418
Height = 17
Width = 17
FillStyle = 0
FillColor = 255,0,0
ZOrderSet = 8
Name = "shpStatusID4"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1ON0LG79R</uniqueid>
		<timestamp>0</timestamp>
		<class>label</class>
		<classloc/>
		<baseclass>label</baseclass>
		<objname>lblStatusID4</objname>
		<parent>cntfrmstatusinfo</parent>
		<properties>AutoSize = .T.
Caption = "Ïðîâåäåí"
Height = 17
Left = 438
Top = 5
Width = 59
ZOrderSet = 9
Name = "lblStatusID4"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>COMMENT</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>0</timestamp>
		<class/>
		<classloc/>
		<baseclass/>
		<objname>cntfrmstatusinfo</objname>
		<parent/>
		<properties/>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1LR0RDLY7</uniqueid>
		<timestamp>0</timestamp>
		<class>cnt</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>cntprcnadb</objname>
		<parent/>
		<properties>Width = 413
Height = 33
Name = "cntprcnadb"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1>Class</reserved1>
		<reserved2>4</reserved2>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6>Pixels</reserved6>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1LR0RE56X</uniqueid>
		<timestamp>0</timestamp>
		<class>shp</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>shape</baseclass>
		<objname>shpPrcNadb</objname>
		<parent>cntprcnadb</parent>
		<properties>Top = 0
Left = 0
Height = 33
Width = 413
SpecialEffect = 0
ZOrderSet = 34
Name = "shpPrcNadb"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1LR0RE56Y</uniqueid>
		<timestamp>0</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblPrcNadb</objname>
		<parent>cntprcnadb</parent>
		<properties>FontBold = .T.
Caption = "Ïðîöåíò íàäáàâêè:"
Left = 5
Top = 8
TabIndex = 27
ZOrderSet = 35
Name = "lblPrcNadb"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1LR0RE56Z</uniqueid>
		<timestamp>0</timestamp>
		<class>txt</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>txtPrcNadb</objname>
		<parent>cntprcnadb</parent>
		<properties>Alignment = 3
Value = 0
Left = 135
TabIndex = 28
Top = 5
ZOrderSet = 36
_highlightobject = .parent.lblPrcNadb
_usedbfieldproperty = .T.
Name = "txtPrcNadb"
</properties>
		<protected/>
		<methods>PROCEDURE LostFocus
ThisForm.SetPrcSale()
DODEFAULT()
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>COMMENT</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>0</timestamp>
		<class/>
		<classloc/>
		<baseclass/>
		<objname>cntprcnadb</objname>
		<parent/>
		<properties/>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1LR0RDLY7</uniqueid>
		<timestamp>0</timestamp>
		<class>cnt</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>cntstocktvr</objname>
		<parent/>
		<properties>Width = 413
Height = 33
Name = "cntstocktvr"
</properties>
		<protected/>
		<methods>PROCEDURE Refresh
LPARAMETERS tnTvrID, tnOUID

*18.07.2006 15:46 -&gt; Âûïîëíÿåì äåéñòâèÿ åñëè ïåðåäàíû ïàðàìåòðû
IF PCOUNT() = 2

	*18.07.2006 15:29 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
	PRIVATE _PARAM_TVR, ;
			_PARAM_OU
	***
	_PARAM_TVR = tnTvrID
	_PARAM_OU = tnOUID
	*------------------------------------------------------------------------------

	*18.07.2006 15:29 -&gt; Îáíîâèì äàííûå â lvStockTvrQnt
	USE IN SELECT([lvStockTvrQnt])
	***
	USE lvStockTvrQnt IN 0
	*------------------------------------------------------------------------------

ENDIF
*------------------------------------------------------------------------------

*18.07.2006 15:28 -&gt;Âûïîëíèì ìåòîä ðîäèòåëüñêîãî êëàññà
DODEFAULT()
*------------------------------------------------------------------------------

*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1>Class</reserved1>
		<reserved2>4</reserved2>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6>Pixels</reserved6>
		<reserved7>Èíôîðìàöèÿ ïî îñòàòêàì òîâàðà íà ñêëàäå</reserved7>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1LR0RE56X</uniqueid>
		<timestamp>0</timestamp>
		<class>shp</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>shape</baseclass>
		<objname>shpStockTvrQnt</objname>
		<parent>cntstocktvr</parent>
		<properties>Top = 0
Left = 0
Height = 33
Width = 413
SpecialEffect = 0
ZOrderSet = 34
Name = "shpStockTvrQnt"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1LR0RE56Y</uniqueid>
		<timestamp>0</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblStockTvrQnt</objname>
		<parent>cntstocktvr</parent>
		<properties>FontBold = .T.
Caption = "Òîâàðà íà ñêëàäå:"
Left = 5
Top = 8
TabIndex = 27
ZOrderSet = 35
Name = "lblStockTvrQnt"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1LR0RE56Z</uniqueid>
		<timestamp>0</timestamp>
		<class>txt</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>txtStockTvrQnt</objname>
		<parent>cntstocktvr</parent>
		<properties>Alignment = 3
Value = 0
ControlSource = "lvStockTvrQnt.TvrQnt"
Enabled = .F.
Left = 135
TabIndex = 28
Top = 5
DisabledForeColor = 0,0,0
ZOrderSet = 36
_highlightobject = .parent.lblStockTvrQnt
_usedbfieldproperty = .T.
Name = "txtStockTvrQnt"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>COMMENT</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>0</timestamp>
		<class/>
		<classloc/>
		<baseclass/>
		<objname>cntstocktvr</objname>
		<parent/>
		<properties/>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1LR0RDLY7</uniqueid>
		<timestamp>0</timestamp>
		<class>cnt</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>cnttvrexpdate</objname>
		<parent/>
		<properties>Width = 413
Height = 33
Name = "cnttvrexpdate"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1>Class</reserved1>
		<reserved2>4</reserved2>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6>Pixels</reserved6>
		<reserved7>Ñðîê ãîäíîñòè äëÿ òîâàðà</reserved7>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1LR0RE56X</uniqueid>
		<timestamp>0</timestamp>
		<class>shp</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>shape</baseclass>
		<objname>shpExpDate</objname>
		<parent>cnttvrexpdate</parent>
		<properties>Top = 0
Left = 0
Height = 33
Width = 413
SpecialEffect = 0
ZOrderSet = 0
Name = "shpExpDate"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1LR0RE56Y</uniqueid>
		<timestamp>0</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblTvrExpDate</objname>
		<parent>cnttvrexpdate</parent>
		<properties>FontBold = .T.
Caption = "Ãîäåí äî:"
Left = 5
Top = 8
TabIndex = 27
ZOrderSet = 1
Name = "lblTvrExpDate"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1Q20RHSNT</uniqueid>
		<timestamp>0</timestamp>
		<class>comtxtctlcalendar</class>
		<classloc>comtxtctl_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>comTxtCtlCalendarExpDate</objname>
		<parent>cnttvrexpdate</parent>
		<properties>Top = 5
Left = 135
ZOrderSet = 2
Name = "comTxtCtlCalendarExpDate"
txtText.ControlSource = "lvFrmPartTvrEdit.TvrExpiredDate"
txtText._highlightobject = .parent.parent.lblTvrExpDate
txtText.Name = "txtText"
cmdShow.Name = "cmdShow"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>COMMENT</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>0</timestamp>
		<class/>
		<classloc/>
		<baseclass/>
		<objname>cnttvrexpdate</objname>
		<parent/>
		<properties/>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1LO0Z2G2I</uniqueid>
		<timestamp>0</timestamp>
		<class>cnt</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>cnttvrlastbuy</objname>
		<parent/>
		<properties>Width = 413
Height = 61
Name = "cnttvrlastbuy"
</properties>
		<protected/>
		<methods>PROCEDURE setprice
*------------------------------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: cntTvrLastBuy.SetPrice
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;tnTvrID&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Óñòàíîâêà öåíû ïîñëåäíåãî ïîñòóïëåíèÿ
*------------------------------------------------------------------------------
LPARAMETERS tnTvrID

*07.08.2006 10:34 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
PRIVATE ;
	_PARAM
*------------------------------------------------------------------------------

*07.08.2006 10:34 -&gt;Ïðîâåðÿåì íàëè÷èå öåíû ïîêóïêè ïî äàííîìó òîâàðó
USE IN SELECT([lvTvrLastBuy])
***
_PARAM = tnTvrID
***
USE lvTvrLastBuy IN 0
***
This.txtTvrPrcBuy.Refresh()
*------------------------------------------------------------------------------

*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1>Class</reserved1>
		<reserved2>8</reserved2>
		<reserved3>*setprice 
</reserved3>
		<reserved4/>
		<reserved5/>
		<reserved6>Pixels</reserved6>
		<reserved7>Îïðåäåëåíèå ïîñëåäíåé öåíû çàêóïà</reserved7>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1LO0Z938B</uniqueid>
		<timestamp>0</timestamp>
		<class>shp</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>shape</baseclass>
		<objname>ShpBuy</objname>
		<parent>cnttvrlastbuy</parent>
		<properties>Top = 0
Left = 0
Height = 61
Width = 413
SpecialEffect = 0
ZOrderSet = 0
Name = "ShpBuy"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1LO0Z938C</uniqueid>
		<timestamp>0</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblTvrPrcBuy</objname>
		<parent>cnttvrlastbuy</parent>
		<properties>FontBold = .T.
Caption = "Öåíà ïîñòóïëåíèÿ:"
Left = 5
Top = 8
TabIndex = 1
ZOrderSet = 1
Name = "lblTvrPrcBuy"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1P00YWXMY</uniqueid>
		<timestamp>0</timestamp>
		<class>txt</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>txtTvrPrcBuy</objname>
		<parent>cnttvrlastbuy</parent>
		<properties>ControlSource = "lvTvrLastBuy.StockTransTvrPrcBuy"
Enabled = .F.
Left = 135
TabIndex = 2
Top = 5
DisabledForeColor = 0,0,0
ZOrderSet = 2
_highlightobject = .parent.lblTvrPrcBuy
_convertcommatopoint = .T.
_usedbfieldproperty = .T.
Name = "txtTvrPrcBuy"
</properties>
		<protected/>
		<methods>PROCEDURE _handleanychange
ThisForm.CalculateSumLastBuy()
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1LO0Z938W</uniqueid>
		<timestamp>0</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblTvrPrcSumBuy</objname>
		<parent>cnttvrlastbuy</parent>
		<properties>FontBold = .T.
Caption = "Ñóììà:"
Left = 238
Top = 8
TabIndex = 3
ZOrderSet = 3
Name = "lblTvrPrcSumBuy"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1LO0Z938U</uniqueid>
		<timestamp>0</timestamp>
		<class>txt</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>txtTvrPrcSumBuy</objname>
		<parent>cnttvrlastbuy</parent>
		<properties>Alignment = 3
Value = 0
Enabled = .F.
Left = 308
TabIndex = 4
Top = 5
DisabledForeColor = 0,0,0
ZOrderSet = 4
Name = "txtTvrPrcSumBuy"
</properties>
		<protected/>
		<methods>PROCEDURE _handleanychange
ThisForm.CalculateVatSumLastBuy()
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1LO0Z938X</uniqueid>
		<timestamp>0</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblTvrVATSumBuy</objname>
		<parent>cnttvrlastbuy</parent>
		<properties>FontBold = .T.
Caption = "Ñóììà ÍÄÑ:"
Left = 238
Top = 36
TabIndex = 5
ZOrderSet = 5
Name = "lblTvrVATSumBuy"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1LO0Z938V</uniqueid>
		<timestamp>0</timestamp>
		<class>txt</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>txtTvrVATSumBuy</objname>
		<parent>cnttvrlastbuy</parent>
		<properties>Alignment = 3
Value = 0
Enabled = .F.
Left = 308
TabIndex = 6
Top = 33
DisabledForeColor = 0,0,0
ZOrderSet = 6
Name = "txtTvrVATSumBuy"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>COMMENT</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>0</timestamp>
		<class/>
		<classloc/>
		<baseclass/>
		<objname>cnttvrlastbuy</objname>
		<parent/>
		<properties/>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1LS0YFVO2</uniqueid>
		<timestamp>0</timestamp>
		<class>cnt</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>cnttvrprcbuy</objname>
		<parent/>
		<properties>Width = 150
Height = 23
BorderWidth = 0
_selectobject = frmidctlgrid;comidctl_v1.vcx
_rsaliasname = LastTvrPrcBuy
_rsfieldnameid = TvrPrcBuy
_rsfieldnametext = TvrPrcText
Name = "cnttvrprcbuy"
</properties>
		<protected/>
		<methods>PROCEDURE Destroy
*------------------------------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: cntTvrPrcBuy.Init
* Called by.......: &lt;Sys Event&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Èíèöèàëèçàöèÿ
*------------------------------------------------------------------------------

*02.09.2005 17:24 -&gt; Çàêðîåì Alias è óäàëèì âðåìåííóþ òàáëèöó
USE IN IIF(USED([LastTvrPrcBuy]),[LastTvrPrcBuy],0)
***
IF FILE([tmp\LastTvrPrcBuy.dbf])
	ERASE tmp\LastTvrPrcBuy.dbf
ENDIF
*------------------------------------------------------------------------------

*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE Init
*------------------------------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: cntTvrPrcBuy.Init
* Called by.......: &lt;Sys Event&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Èíèöèàëèçàöèÿ
*------------------------------------------------------------------------------

*02.09.2005 17:24 -&gt; Çàêðîåì Alias
USE IN IIF(USED([LastTvrPrcBuy]),[LastTvrPrcBuy],0)
*------------------------------------------------------------------------------

*02.09.2005 17:25 -&gt; Âûïîëíèì õðàíèìóþ ïðîöåäóðó è îòêðîåì ïîñëåäíèå öåíû ïîñòóïëåíèÿ
spGetLastTvrPrcBuy(0,0)
USE LastTvrPrcBuy IN 0
*------------------------------------------------------------------------------

*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE showselectobject
*------------------------------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: cntTvrPrcBuy.ShowSelectObject
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: &lt;public/nouser/runtime&gt; Îòîáðàæåíèå îáúåêòà äëÿ âûáîðà íîâîãî çíà÷åíèÿ ýëåìåíòà
*------------------------------------------------------------------------------
WITH THIS

*19.01.2004 11:23 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	luRetVal
*------------------------------------------------------------------------------

*15.01.2004 16:41 -&gt;Îòîáðàçèì îáúåêò äëÿ âûáîðà íîâîãî çíà÷åíèÿ ýëåìåíòà
IF TYPE([._SelectObject])==[C] AND !EMPTY(._SelectObject)
	luRetVal = oApp.DoModalFormRetValObj(._SelectObject,This,ThisForm)
ENDIF	
*------------------------------------------------------------------------------

*19.01.2004 11:23 -&gt;Â çàâèñèìîñòè îò òîãî, ÷òî âåðíóë îáúåêò
IF TYPE([luRetVal])==[Y]
	.txtText.Value = luRetVal
ENDIF
*------------------------------------------------------------------------------

ENDWITH
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1>Class</reserved1>
		<reserved2>4</reserved2>
		<reserved3>_selectobject
_rsaliasname
_rsfieldnameid
_rsfieldnametext
*showselectobject 
</reserved3>
		<reserved4/>
		<reserved5/>
		<reserved6>Pixels</reserved6>
		<reserved7>Öåíà ïîñòóïëåíèÿ</reserved7>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1LS0YST9D</uniqueid>
		<timestamp>0</timestamp>
		<class>cmd</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>cmdShow</objname>
		<parent>cnttvrprcbuy</parent>
		<properties>Top = 0
Left = 104
Height = 23
Width = 23
Caption = ""
Name = "cmdShow"
</properties>
		<protected/>
		<methods>PROCEDURE Click
THIS.PARENT.ShowSelectObject()
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1LS0YST9E</uniqueid>
		<timestamp>0</timestamp>
		<class>cmd</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>cmdClear</objname>
		<parent>cnttvrprcbuy</parent>
		<properties>Top = 0
Left = 127
Height = 23
Width = 23
Picture = ..\..\..\..\graphic\comidctldele.bmp
Caption = ""
Name = "cmdClear"
</properties>
		<protected/>
		<methods>PROCEDURE Click
This.Parent.txtText.Value = NTOM(0)
This.Parent.txtText.SetFocus
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1LS0YST9C</uniqueid>
		<timestamp>0</timestamp>
		<class>txt</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>txtText</objname>
		<parent>cnttvrprcbuy</parent>
		<properties>ControlSource = "lvFrmPartTvrEdit.TvrPrcBuy"
Left = 0
TabIndex = 2
Top = 0
DisabledForeColor = 0,0,0
ZOrderSet = 2
_highlightobject = .Parent.Parent.lblTvrPrcBuy
_convertcommatopoint = .T.
_usedbfieldproperty = .T.
Name = "txtText"
</properties>
		<protected/>
		<methods>PROCEDURE KeyPress
*-------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: txtText.KeyPress
* Called by.......: &lt;Sys Event&gt;
* Parameters......: &lt;tnKeyCode, tnShiftAltCtrl&gt;
* Returns.........: &lt;none&gt;
* Notes...........: &lt;sysevent&gt; Ðàçâîðà÷èâàíèå ñïèñêà ïî Alt + DownArrow
*-------------------------------------------------------
LPARAMETERS tnKeyCode, tnShiftAltCtrl

*04.05.2004 16:28 -&gt;Åñëè Alt + DownArrow - ðàçâåðíåì ñïèñîê
IF tnKeyCode = 160 AND tnShiftAltCtrl = 4
	This.Parent.ShowSelectObject()
	NODEFAULT
ENDIF
*------------------------------------------------------------------------------

************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>COMMENT</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>0</timestamp>
		<class/>
		<classloc/>
		<baseclass/>
		<objname>cnttvrprcbuy</objname>
		<parent/>
		<properties/>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1LR0RDLY7</uniqueid>
		<timestamp>0</timestamp>
		<class>cnt</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>cnttvrvat</objname>
		<parent/>
		<properties>Width = 413
Height = 33
Name = "cnttvrvat"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1>Class</reserved1>
		<reserved2>4</reserved2>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6>Pixels</reserved6>
		<reserved7>Íäñ</reserved7>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1LR0RE56X</uniqueid>
		<timestamp>0</timestamp>
		<class>shp</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>shape</baseclass>
		<objname>shpVat</objname>
		<parent>cnttvrvat</parent>
		<properties>Top = 0
Left = 0
Height = 33
Width = 413
SpecialEffect = 0
ZOrderSet = 34
Name = "shpVat"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1LR0RE56Y</uniqueid>
		<timestamp>0</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblTvrVATRate</objname>
		<parent>cnttvrvat</parent>
		<properties>FontBold = .T.
Caption = "Ñòàâêà ÍÄÑ:"
Left = 5
Top = 8
TabIndex = 27
ZOrderSet = 35
Name = "lblTvrVATRate"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1LR0RE56Z</uniqueid>
		<timestamp>0</timestamp>
		<class>txt</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>txtTvrVATRate</objname>
		<parent>cnttvrvat</parent>
		<properties>ControlSource = "lvFrmPartTvrEdit.TvrVATRate"
Left = 135
TabIndex = 28
Top = 5
ZOrderSet = 36
_highlightobject = .parent.lblTvrVATRate
_usedbfieldproperty = .T.
Name = "txtTvrVATRate"
</properties>
		<protected/>
		<methods>PROCEDURE _handleanychange
ThisForm.CalculateVatSum()
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>COMMENT</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>0</timestamp>
		<class/>
		<classloc/>
		<baseclass/>
		<objname>cnttvrvat</objname>
		<parent/>
		<properties/>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1Y70YRWRJ</uniqueid>
		<timestamp>0</timestamp>
		<class>frmview</class>
		<classloc>baseform_v1.vcx</classloc>
		<baseclass>form</baseclass>
		<objname>frmactionview</objname>
		<parent/>
		<properties>Left = 0
Height = 245
Width = 490
DoCreate = .T.
Caption = "Çàäàíèå íà àêöåïòîâàíèå äîêóìåíòîâ"
HalfHeightCaption = .T.
AlwaysOnTop = .T.
Name = "frmactionview"
cstmsghandler.Name = "cstmsghandler"
cstresizable.Name = "cstresizable"
</properties>
		<protected/>
		<methods>PROCEDURE Init
*08.12.2006 09:23 -&gt;Âûïîëíèì ìåòîä ðîäèòåëüñêîãî êëàññà
DODEFAULT()
*------------------------------------------------------------------------------

This.Top = 600-This.Height

*08.12.2006 09:23 -&gt;Ïîêàæåì çàäàíèÿ
This.UpdateFrmOperationState()
*------------------------------------------------------------------------------
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE Load
DODEFAULT()

*21.11.2006 16:20 -&gt;Îòêðîåì ÁÄ
IF !DBUSED([BASIS])
	OPEN DATABASE Basis SHARED
ENDIF
***
SET DATABASE TO BASIS
*------------------------------------------------------------------------------

USE lvFrmActionView IN 0 NODATA
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE updatefrmoperationstate
*05.12.2006 11:15 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL   lnTotalRow, ;
		lnDiff, ;
		_PARAM
***
_PARAM = oApp.nUserKod
*------------------------------------------------------------------------------

*08.12.2006 09:22 -&gt;Ïîëó÷èì äàííûå è ïîêàæåì èõ
REQUERY([lvFrmActionView])
*------------------------------------------------------------------------------

*lnTotalRow = FLOOR((This.grdFrmAction.Height - 20)/18)
*GO RECCOUNT([lvFrmActionView]) - lnTotalRow IN lvFrmActionView

*!*	This.Timer.Enabled = .F.

*!*	SET STEP ON

*!*	*08.12.2006 15:14 -&gt;Ïîçèöèîíèðóåìñÿ íà ïîñëåäíþþ çàïèñü
*!*	lnTotalRow = FLOOR((This.grdFrmAction.Height - 20)/18)

*!*	*WAIT WINDOW RECCOUNT([lvFrmActionView])-This.grdFrmAction.RelativeRow NOWAIT NOCLEAR

*!*	lnDiff = STR(RECCOUNT([lvFrmActionView]) - lnTotalRow)

*!*	SET FILTER TO RECNO([lvFrmActionView]) &gt; &amp;lnDiff  IN lvFrmActionView
*!*	GO BOTTOM IN lvFrmActionView
*!*	SET FILTER TO

*!*	IF RECCOUNT([lvFrmActionView])-This.grdFrmAction.RelativeRow &gt; lnTotalRow
*!*		This.grdFrmAction.DoScroll(1)
*!*		This.grdFrmAction.DoScroll(1)
*!*		This.grdFrmAction.DoScroll(1)
*!*		This.grdFrmAction.DoScroll(1)
*!*		GO RECCOUNT([lvFrmActionView]) - lnTotalRow IN lvFrmActionView
*!*	ENDIF
*!*	*------------------------------------------------------------------------------


*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1>Class</reserved1>
		<reserved2>3</reserved2>
		<reserved3>*updatefrmoperationstate 
</reserved3>
		<reserved4/>
		<reserved5/>
		<reserved6>Pixels</reserved6>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1Y70YSG63</uniqueid>
		<timestamp>0</timestamp>
		<class>grdfrmaction</class>
		<classloc>primarydoc_v1.vcx</classloc>
		<baseclass>grid</baseclass>
		<objname>grdFrmAction</objname>
		<parent>frmactionview</parent>
		<properties>Height = 235
Left = 5
Top = 5
Name = "grdFrmAction"
Column1.Header1.Name = "Header1"
Column1.Txtgrd1.Name = "Txtgrd1"
Column1.DynamicBackColor = (ICASE(lvFrmActionView.FrmActionOperationState = 2,RGB(120,120,120),lvFrmActionView.FrmActionOperationState = 3,RGB(120,120,120),INLIST(lvFrmActionView.FrmActionOperationState,4,5),RGB(120,120,120),RGB(120,120,120)))
Column1.Name = "Column1"
Column2.Header1.Name = "Header1"
Column2.Txtgrd1.Name = "Txtgrd1"
Column2.Name = "Column2"
Column3.Header1.Name = "Header1"
Column3.Txtgrd1.Name = "Txtgrd1"
Column3.Name = "Column3"
Column4.Header1.Name = "Header1"
Column4.Txtgrd1.Name = "Txtgrd1"
Column4.Name = "Column4"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1YL0OG49T</uniqueid>
		<timestamp>0</timestamp>
		<class>timer</class>
		<classloc/>
		<baseclass>timer</baseclass>
		<objname>Timer</objname>
		<parent>frmactionview</parent>
		<properties>Top = 5
Left = 465
Height = 23
Width = 23
Interval = 3000
Name = "Timer"
</properties>
		<protected/>
		<methods>PROCEDURE Timer
This.Parent.UpdateFrmOperationState()
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>COMMENT</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>0</timestamp>
		<class/>
		<classloc/>
		<baseclass/>
		<objname>frmactionview</objname>
		<parent/>
		<properties/>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1LI0XW2V2</uniqueid>
		<timestamp>0</timestamp>
		<class>frmedit</class>
		<classloc>baseform_v1.vcx</classloc>
		<baseclass>form</baseclass>
		<objname>frmautonumedit</objname>
		<parent/>
		<properties>Height = 119
Width = 425
DoCreate = .T.
Caption = "Ðåäàêòèðîâàíèå àâòîíóìåðàòîðà"
nscrfrmid = 0
cmode = 
Name = "frmautonumedit"
cstmsghandler.Name = "cstmsghandler"
cstresizable.Name = "cstresizable"
cstdatawork.Name = "cstdatawork"
</properties>
		<protected/>
		<methods>PROCEDURE _handlecntcancelsaveevent
*------------------------------------------------------------------------------
* Project.........: BASIS.pjx
* Library.........: Autonum.vcx
* Class.Module....: FrmStorageEdit._HandleCntCancelSaveEvent
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........:
*------------------------------------------------------------------------------
LPARAMETERS tcMessage

WITH This

*13.01.2005 14:39 -&gt; Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	llResSave
*------------------------------------------------------------------------------

*13.01.2005 14:39 -&gt; Ñîõðàíèì/îòìåíèì èçìåíåíèÿ
IF tcMessage = [OK]
	
	*13.01.2005 14:39 -&gt; Ïðè óäàëåíè óäàëèì çàïèñü
	IF .cMode = [DELE]
		
		*13.01.2005 14:40 -&gt; Óäàëèì çàïèñü
		DELETE IN lvFrmAutonumEdit
		*------------------------------------------------------------------------------
		
	ENDIF
	*------------------------------------------------------------------------------
	
	*13.01.2005 14:39 -&gt; Îòêðîåì òðàíçàêöèþ
	BEGIN TRANSACTION
	*------------------------------------------------------------------------------
	
	 *13.01.2005 14:40 -&gt; Ïðîèçâîäèì ñîõðàíåíèå òàáëèöû
	 llResSave = .cstDataWork.Save([lvFrmAutoNumEdit])
	
	 *------------------------------------------------------------------------------
	
	 *13.01.2005 14:43 -&gt; Îáðàáîòàåì ðåçóëüòàòû îïåðàöèè ñîõðàíåíèÿ
	IF llResSave
	
		*13.01.2005 14:43 -&gt; Ïîäòâåðæäàåì òðàíçàêöèþ
		END TRANSACTION
		*------------------------------------------------------------------------------
		
		*13.01.2005 14:43 -&gt; Ñîõðàíÿåì ðåçóëüòàòû âûïîëíåíèÿ îïåðàöèè â ñâîéñòâå .uRetVal
		DO CASE
			CASE INLIST(.cMode,[EDIT],[DELE])

				*13.01.2005 15:17 -&gt; Ñîõðàíÿåì ðåçóëüòàòû âûïîëíåíèÿ îïåðàöèè â ñâîéñòâå .uRetVal
				.uRetVal = .T.
				*------------------------------------------------------------------------------

			CASE .cMode == [ADD]

				*13.01.2005 15:18 -&gt; Ñîõðàíÿåì ðåçóëüòàòû âûïîëíåíèÿ îïåðàöèè â ñâîéñòâå .uRetVal
				.uRetVal = .cstDataWork.GetLastID([lvFrmAutoNumEdit])
				*------------------------------------------------------------------------------
		ENDCASE
		*------------------------------------------------------------------------------
		
	ELSE
		
		*13.01.2005 14:44 -&gt; Îòêàòûâàåì òðàíçàêöèþ
		ROLLBACK
		*------------------------------------------------------------------------------
		
		*13.01.2005 14:44 -&gt; Îáðàáàòûâàåì îøèáêó
		IF .cstDataWork.HandleSaveFail() &amp;&amp;åñëè îøèáêà îáðàáîòàíà

			*13.01.2005 14:44 -&gt; Âîçâðàùàåìñÿ ê ðåäàêòèðîâàíèþ
			RETURN .T.
			*------------------------------------------------------------------------------
		
		ELSE
			
			*13.01.2005 14:44 -&gt; Ñîîáùàåì îá îøèáêå
			MESSAGEBOX([Â ïðîöåññå ñîõðàíåíèÿ ïðîèçîøëà îøèáêà. Èçìåíåíèÿ ñîõðàíåíû íå áóäóò.],16,[Îøèáêà...])
			*------------------------------------------------------------------------------
			
			*13.01.2005 14:38 -&gt; Îòìåíÿåì èçìåíåíèÿ â Aliase
			.cstDataWork.Restore([lvFrmAutoNumEdit])
			*------------------------------------------------------------------------------
			
		ENDIF
		*------------------------------------------------------------------------------
		
		*13.01.2005 14:38 -&gt; Ñîõðàíÿåì ðåçóëüòàòû âûïîëíåíèÿ îïåðàöèè â ñâîéñòâå .uRetVal
		.uRetVal = .F.
		*------------------------------------------------------------------------------
		
	ENDIF
	*------------------------------------------------------------------------------
	
ELSE

	*13.01.2005 14:36 -&gt; Îòìåíÿåì èçìåíåíèÿ â Aliase
	.cstDataWork.Restore([lvFrmAutoNumEdit])
	*------------------------------------------------------------------------------
	
ENDIF
*------------------------------------------------------------------------------

*13.01.2005 14:37 -&gt; Ñêðûâàåì ôîðìó
.Hide()
*------------------------------------------------------------------------------

ENDWITH
************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************
ENDPROC
PROCEDURE Init
*------------------------------------------------------------------------------
* Project.........: BASIS.pjx
* Library.........: Cash_v1.vcx
* Class.Module....: FrmAutoNumEdit.Init
* Called by.......: &lt;Sys Event&gt;
* Parameters......: &lt;tcCommand, tuParam1&gt;
* Returns.........: &lt;none&gt;
* Notes...........:
*------------------------------------------------------------------------------
LPARAMETERS tcCommand,;
			tnAtonumID
			
*12.05.2004 00:34 -&gt;Âûïîëíèì ìåòîä ðîäèòåëüñêîãî êëàññà
DODEFAULT()
*----------------------------------------------------------------------------

WITH This
*12.05.2004 00:30 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL _PARAM
*------------------------------------------------------------------------------

*12.05.2004 03:12 -&gt;Ñîõðàíèì êîìàíäó (ðåæèì ðàáîòû ñ äàííûìè)
.cMode = UPPER(ALLTRIM(tcCommand))
*------------------------------------------------------------------------------

*12.05.2004 00:33 -&gt;Çàãðóçèì äàííûå â Alias äëÿ ðåäàêòèðîâàíèÿ
DO CASE

	CASE .cMode==[ADD]
		
		*12.05.2004 00:32 -&gt;Äîáàâèì ïóñòóþ çàïèñü
		APPEND BLANK IN lvFrmAutoNumEdit
		*------------------------------------------------------------------------------
		
	CASE INLIST(.cMode,[EDIT],[INFO],[DELE])
		
		*12.05.2004 00:31 -&gt;Çàãðóçèì äàííûå î ñóùåñòâóþùåì ìàãàçèíå
		_PARAM = tnAtonumID
		***
		REQUERY([lvFrmAutoNumEdit])
		*------------------------------------------------------------------------------

ENDCASE
*------------------------------------------------------------------------------

*.Icon = FULLPATH([???.ico])
DO CASE
	CASE .cMode = [ADD]
		.Caption = .Caption + [ - Äîáàâëåíèå]
	CASE .cMode = [EDIT]
		.Caption = .Caption + [ - Ðåäàêòèðîâàíèå]
	CASE .cMode = [INFO]
		.Caption = .Caption + [ - Ïðîñìîòð]
		
*13.01.2005 14:16 -&gt; Çàïðåòèì ñîõðàíåíèå ïðè ïðîñìîòðå
		ThisForm.cntCancelSaveHandled.cmdOk.Enabled = .F.
		*------------------------------------------------------------------------------
		
	CASE .cMode = [DELE]
		.Caption = .Caption + [ - Óäàëåíèå]
		ThisForm.cntCancelSaveHandled1.cmdOk.Caption = [Óäàëèòü]
ENDCASE
*------------------------------------------------------------------------------

ENDWITH
************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************
ENDPROC
PROCEDURE Load
*------------------------------------------------------------------------------
* Project.........: BASIS.pjx
* Library.........: Autonum.vcx
* Class.Module....: FRMAUTONUMEDIT.LOAD
* Called by.......: &lt;Sys Event&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Çàãðóçêà ñïðàâî÷íèêîâ
*------------------------------------------------------------------------------

*29.04.2005 11:48 -&gt;Âûïîëíèì ìåòîä ðîäèòåëüñêîãî êëàññà
DODEFAULT()
*------------------------------------------------------------------------------

*29.04.2005 11:48 -&gt;Îòêðûâàåì è óñòàíàâëèâàåì òåêóùå ÁÄ
IF !DBUSED([BASIS])
	OPEN DATABASE BASIS
ENDIF
***
SET DATABASE TO BASIS	
*------------------------------------------------------------------------------

*29.07.2005 15:38 -&gt;Îòêðûâàåì Alias äëÿ ðåäàêòèðîâàíèÿ àâòîíóìåðàòîðîâ (ïóñòîé)
USE lvFrmAutoNumEdit IN 0 NODATA
CURSORSETPROP([BUFFERING],3,[lvFrmAutoNumEdit])
*------------------------------------------------------------------------------

*29.07.2005 15:38 -&gt;Îòêðûâàåì Alias ñî ñïèñêîì îðãàíèçàöèîííûõ åäèíèö
LOCAL _PARAM
***
_PARAM = oApp.nUserKod
***
USE lvOuOperateList IN 0
*------------------------------------------------------------------------------

*29.07.2005 15:38 -&gt;Îòêðûâàåì Alias ñî ñïèñêîì òèïîâ ôîðì
USE lvFrmTypeList IN 0
*------------------------------------------------------------------------------

*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1>Class</reserved1>
		<reserved2>9</reserved2>
		<reserved3>nscrfrmid &lt;public/runtime&gt; Èäåíòèôèêàòîð ýêðàííîé ôîðìû
cmode
</reserved3>
		<reserved4/>
		<reserved5/>
		<reserved6>Pixels</reserved6>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1QI0YFG4N</uniqueid>
		<timestamp>0</timestamp>
		<class>chk</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>checkbox</baseclass>
		<objname>Chk1</objname>
		<parent>frmautonumedit</parent>
		<properties>Top = 94
Left = 5
FontBold = .T.
Alignment = 0
Caption = "Âêëþ÷åí"
ControlSource = "lvFrmAutonumEdit.AutonumIsEnabled"
Name = "Chk1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1QS0XMA4P</uniqueid>
		<timestamp>0</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>Lbl3</objname>
		<parent>frmautonumedit</parent>
		<properties>FontBold = .T.
Caption = "Ìàñêà:"
Left = 5
Top = 8
Width = 42
Name = "Lbl3"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1QS0XMA4Q</uniqueid>
		<timestamp>0</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>Lbl4</objname>
		<parent>frmautonumedit</parent>
		<properties>FontBold = .T.
Caption = "Îðãàíèçàöèîííàÿ åäèíèöà:"
Height = 17
Left = 4
Top = 36
Width = 162
Name = "Lbl4"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1QU110X7U</uniqueid>
		<timestamp>0</timestamp>
		<class>cntcancelsavehandled</class>
		<classloc>baseform_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>Cntcancelsavehandled1</objname>
		<parent>frmautonumedit</parent>
		<properties>Top = 90
Left = 213
Name = "Cntcancelsavehandled1"
cmdCancel.Name = "cmdCancel"
cmdOk.Name = "cmdOk"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1QU11UV1I</uniqueid>
		<timestamp>0</timestamp>
		<class>cntidctlgrid</class>
		<classloc>comidctl_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>Cntidctlgrid1</objname>
		<parent>frmautonumedit</parent>
		<properties>Top = 33
Left = 170
_controlsource = lvFrmAutoNumEdit.Ouid
_controlsourcetype = 1
_rsaliasname = lvOuOperateList
_rsfieldnameid = ID
_rsfieldnametext = NM
Name = "Cntidctlgrid1"
txtText.Name = "txtText"
cmdShow.Name = "cmdShow"
cmdClear.Name = "cmdClear"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1QV0LL3SW</uniqueid>
		<timestamp>0</timestamp>
		<class>txt</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>Txt1</objname>
		<parent>frmautonumedit</parent>
		<properties>ControlSource = "lvFrmAutonumEdit.AutonumMask"
Left = 170
Top = 5
Name = "Txt1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1QW11QQTM</uniqueid>
		<timestamp>0</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>Lbl1</objname>
		<parent>frmautonumedit</parent>
		<properties>FontBold = .T.
Caption = "Òèï äîêóìåíòà:"
Left = 5
Top = 64
Name = "Lbl1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1QW11SP02</uniqueid>
		<timestamp>0</timestamp>
		<class>cntidctlgrid</class>
		<classloc>comidctl_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>Cntidctlgrid2</objname>
		<parent>frmautonumedit</parent>
		<properties>Top = 61
Left = 170
_controlsource = lvFrmAutoNumEdit.FrmTypeId
_rsaliasname = lvFrmTypeList
_rsfieldnameid = FrmTypeId
_rsfieldnametext = FrmTypeNm
_controlsourcetype = 1
Name = "Cntidctlgrid2"
txtText.Name = "txtText"
cmdShow.Name = "cmdShow"
cmdClear.Name = "cmdClear"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>COMMENT</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>0</timestamp>
		<class/>
		<classloc/>
		<baseclass/>
		<objname>frmautonumedit</objname>
		<parent/>
		<properties/>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1L50OZM2G</uniqueid>
		<timestamp>0</timestamp>
		<class>frmview</class>
		<classloc>baseform_v1.vcx</classloc>
		<baseclass>form</baseclass>
		<objname>frmautonumview</objname>
		<parent/>
		<properties>Top = 0
Left = 0
Height = 275
Width = 455
DoCreate = .T.
Caption = "Àâòîíóìåðàòîðû"
nscrfrmid = 0
Name = "frmautonumview"
cstmsghandler.Name = "cstmsghandler"
cstresizable.Name = "cstresizable"
</properties>
		<protected/>
		<methods>PROCEDURE Init
*------------------------------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: Basis.vcx
* Class.Module....: SCRFRMVIEW.INIT
* Called by.......: &lt;Sys Event&gt;
* Parameters......: &lt;tnScrFrmID&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Ñîõðàíåíèå èäåíòèôèêàòîðà ýêðàííîé ôîðìû
*------------------------------------------------------------------------------
LPARAMETERS	tnScrFrmID

*10.08.2005 11:40 -&gt;Âûïîëíèì ìåòîä ðîäèòåëüñêîãî êëàññà
DODEFAULT()
*------------------------------------------------------------------------------

*10.08.2005 11:40 -&gt;Ñîõðàíèì èäåíòèôèêàòîð ýêðàííîé ôîðìû
This.nScrFrmID = tnScrFrmID
*------------------------------------------------------------------------------

*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************

ENDPROC
PROCEDURE Load
*-------------------------------------------------------
* Project.........: Basis.PJX
* Library.........: autonum.vcx
* Class.Module....: autonumview.Load
* Called by.......: &lt;Sys Event&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Çàãðóçêà ôîðìû (îòêðûòèå ñïðàâî÷íèêîâ)
*-------------------------------------------------------
DODEFAULT()

*15.02.2006 15:41 -&gt;Îòêðîåì ÁÄ
IF !DBUSED([BASIS])
	OPEN DATABASE BASIS
ENDIF
SET DATABASE TO BASIS	
*------------------------------------------------------------------------------

*15.02.2006 15:42 -&gt;Îòêðûâàåì LocalView ñ èíô. îá àâòîíóìåðàöèè
USE lvFrmAutoNumView IN 0
*------------------------------------------------------------------------------

************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************

ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1>Class</reserved1>
		<reserved2>2</reserved2>
		<reserved3>nscrfrmid &lt;public/runtime&gt; Èäåíòèôèêàòîð ýêðàííîé ôîðìû
</reserved3>
		<reserved4/>
		<reserved5/>
		<reserved6>Pixels</reserved6>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1R211QEOO</uniqueid>
		<timestamp>0</timestamp>
		<class>grdautonum</class>
		<classloc>primarydoc_v1.vcx</classloc>
		<baseclass>grid</baseclass>
		<objname>grdAutoNum</objname>
		<parent>frmautonumview</parent>
		<properties>Left = 5
Top = 5
Width = 445
Name = "grdAutoNum"
Column1.Header1.Name = "Header1"
Column1.Txtgrd1.Name = "Txtgrd1"
Column1.Name = "Column1"
Column2.Header1.Name = "Header1"
Column2.Txtgrd1.Name = "Txtgrd1"
Column2.Name = "Column2"
Column3.Header1.Name = "Header1"
Column3.Txtgrd1.Name = "Txtgrd1"
Column3.Name = "Column3"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>COMMENT</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>0</timestamp>
		<class/>
		<classloc/>
		<baseclass/>
		<objname>frmautonumview</objname>
		<parent/>
		<properties/>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_23C0QU0O3</uniqueid>
		<timestamp>0</timestamp>
		<class>frmpdedit</class>
		<classloc>primarydoc_v1.vcx</classloc>
		<baseclass>form</baseclass>
		<objname>frmpddovedit</objname>
		<parent/>
		<properties>DoCreate = .T.
Name = "frmpddovedit"
shpFrmAttribute.Name = "shpFrmAttribute"
cstmsghandler.Name = "cstmsghandler"
cstresizable.Name = "cstresizable"
cstdatawork.Name = "cstdatawork"
shpCommon.Name = "shpCommon"
lblFrmType.Name = "lblFrmType"
cntIdCtlGridFrmType.txtText.Name = "txtText"
cntIdCtlGridFrmType.cmdShow.Name = "cmdShow"
cntIdCtlGridFrmType.cmdClear.Name = "cmdClear"
cntIdCtlGridFrmType.Name = "cntIdCtlGridFrmType"
lblFrmNum.Name = "lblFrmNum"
txtFrmNum.Name = "txtFrmNum"
chkFrmAutoNum.Alignment = 0
chkFrmAutoNum.Name = "chkFrmAutoNum"
lblFrmDate.Name = "lblFrmDate"
cntTxtCtlCalendarFrmDate.txtText.Name = "txtText"
cntTxtCtlCalendarFrmDate.cmdShow.Name = "cmdShow"
cntTxtCtlCalendarFrmDate.Name = "cntTxtCtlCalendarFrmDate"
lblFrmDateAcc.Caption = "Äåéñòâèòåëüíà ïî:"
lblFrmDateAcc.Name = "lblFrmDateAcc"
cntTxtCtlCalendarFrmDateAcc.txtText.Name = "txtText"
cntTxtCtlCalendarFrmDateAcc.cmdShow.Name = "cmdShow"
cntTxtCtlCalendarFrmDateAcc.Name = "cntTxtCtlCalendarFrmDateAcc"
lblReason.Name = "lblReason"
edtReason.Name = "edtReason"
lblNote.Name = "lblNote"
edtNote.Name = "edtNote"
lblFrmPrcTypeID.Name = "lblFrmPrcTypeID"
cntIDCtlGridFrmPrcTypeID.txtText.Name = "txtText"
cntIDCtlGridFrmPrcTypeID.cmdShow.Name = "cmdShow"
cntIDCtlGridFrmPrcTypeID.cmdClear.Name = "cmdClear"
cntIDCtlGridFrmPrcTypeID.Name = "cntIDCtlGridFrmPrcTypeID"
lblFrmCurTypeID.Name = "lblFrmCurTypeID"
cntIDCtlGridFrmCurTypeID.txtText.Name = "txtText"
cntIDCtlGridFrmCurTypeID.cmdShow.Name = "cmdShow"
cntIDCtlGridFrmCurTypeID.cmdClear.Name = "cmdClear"
cntIDCtlGridFrmCurTypeID.Name = "cntIDCtlGridFrmCurTypeID"
lblFrmStatus.Name = "lblFrmStatus"
cntIdCtlGridFrmStatus.txtText.Name = "txtText"
cntIdCtlGridFrmStatus.cmdShow.Name = "cmdShow"
cntIdCtlGridFrmStatus.cmdClear.Name = "cmdClear"
cntIdCtlGridFrmStatus.Name = "cntIdCtlGridFrmStatus"
lblFrmParID.Name = "lblFrmParID"
cntIDCtlGridFrmParID.txtText.Name = "txtText"
cntIDCtlGridFrmParID.cmdShow.Name = "cmdShow"
cntIDCtlGridFrmParID.cmdClear.Name = "cmdClear"
cntIDCtlGridFrmParID.Name = "cntIDCtlGridFrmParID"
shpControl.Name = "shpControl"
lblDev.Name = "lblDev"
Lbl1.Name = "Lbl1"
CntidctlgridPbook.txtText.Name = "txtText"
CntidctlgridPbook.cmdShow.Name = "cmdShow"
CntidctlgridPbook.cmdClear.Name = "cmdClear"
CntidctlgridPbook.Name = "CntidctlgridPbook"
cntIdCtlGridDev.txtText.Name = "txtText"
cntIdCtlGridDev.cmdShow.Name = "cmdShow"
cntIdCtlGridDev.cmdClear.Name = "cmdClear"
cntIdCtlGridDev.Name = "cntIdCtlGridDev"
lblContr.Name = "lblContr"
cntIdCtlGridContr.txtText.Name = "txtText"
cntIdCtlGridContr.cmdShow.Name = "cmdShow"
cntIdCtlGridContr.cmdClear.Name = "cmdClear"
cntIdCtlGridContr.Name = "cntIdCtlGridContr"
shpQualityEmi.Name = "shpQualityEmi"
lblPointEmi.Name = "lblPointEmi"
cntIdCtlGridPointEmi.txtText.Name = "txtText"
cntIdCtlGridPointEmi.cmdShow.Name = "cmdShow"
cntIdCtlGridPointEmi.cmdClear.Name = "cmdClear"
cntIdCtlGridPointEmi.Name = "cntIdCtlGridPointEmi"
lblPointEmiAccount.Name = "lblPointEmiAccount"
cntIdCtlGridPointEmiAccount.txtText.Name = "txtText"
cntIdCtlGridPointEmiAccount.cmdShow.Name = "cmdShow"
cntIdCtlGridPointEmiAccount.cmdClear.Name = "cmdClear"
cntIdCtlGridPointEmiAccount.Name = "cntIdCtlGridPointEmiAccount"
lblExecEmi.Name = "lblExecEmi"
cntIdCtlGridExecEmi.txtText.Name = "txtText"
cntIdCtlGridExecEmi.cmdShow.Name = "cmdShow"
cntIdCtlGridExecEmi.cmdClear.Name = "cmdClear"
cntIdCtlGridExecEmi.Name = "cntIdCtlGridExecEmi"
shpQualityIsp.Name = "shpQualityIsp"
lblPointIsp.Name = "lblPointIsp"
cntIdCtlGridPointIsp.txtText.Name = "txtText"
cntIdCtlGridPointIsp.cmdShow.Name = "cmdShow"
cntIdCtlGridPointIsp.cmdClear.Name = "cmdClear"
cntIdCtlGridPointIsp.Name = "cntIdCtlGridPointIsp"
lblPointIspAccount.Name = "lblPointIspAccount"
cntIdCtlGridPointIspAccount.txtText.Name = "txtText"
cntIdCtlGridPointIspAccount.cmdShow.Name = "cmdShow"
cntIdCtlGridPointIspAccount.cmdClear.Name = "cmdClear"
cntIdCtlGridPointIspAccount.Name = "cntIdCtlGridPointIspAccount"
lblExecIsp.Name = "lblExecIsp"
cntIdCtlGridExecIsp.txtText.Name = "txtText"
cntIdCtlGridExecIsp.cmdShow.Name = "cmdShow"
cntIdCtlGridExecIsp.cmdClear.Name = "cmdClear"
cntIdCtlGridExecIsp.Name = "cntIdCtlGridExecIsp"
lblFrmAttribute.Name = "lblFrmAttribute"
grdBit.COLUMN1.Header1.Name = "Header1"
grdBit.COLUMN1.CHK1.Alignment = 0
grdBit.COLUMN1.CHK1.Name = "CHK1"
grdBit.COLUMN1.Name = "COLUMN1"
grdBit.COLUMN2.Header1.Name = "Header1"
grdBit.COLUMN2.Txtgrd1.Name = "Txtgrd1"
grdBit.COLUMN2.Name = "COLUMN2"
grdBit.Name = "grdBit"
cntcancelsavehandled.cmdCancel.Name = "cmdCancel"
cntcancelsavehandled.cmdOk.Name = "cmdOk"
cntcancelsavehandled.Name = "cntcancelsavehandled"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1>Class</reserved1>
		<reserved2>1</reserved2>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6>Pixels</reserved6>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>COMMENT</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>0</timestamp>
		<class/>
		<classloc/>
		<baseclass/>
		<objname>frmpddovedit</objname>
		<parent/>
		<properties/>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1SW11U0RV</uniqueid>
		<timestamp>0</timestamp>
		<class>frmedit</class>
		<classloc>baseform_v1.vcx</classloc>
		<baseclass>form</baseclass>
		<objname>frmprimarydocpartfrmeditjast</objname>
		<parent/>
		<properties>Height = 186
Width = 395
DoCreate = .T.
cmode = .F.
Name = "frmprimarydocpartfrmeditjast"
cstmsghandler.Name = "cstmsghandler"
cstresizable.Name = "cstresizable"
cstdatawork.Name = "cstdatawork"
</properties>
		<protected/>
		<methods>PROCEDURE _handlecntcancelsaveevent
*-------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: FRMPRIMARYDOCPARTTVREDIT._HANDLECNTCANCELSAVEEVENT
* Called by.......: &lt;.cntCancelSaveHandled.cmdOk.Click();.cntCancelSaveHandled.cmdCancel.Click()&gt;
* Parameters......: &lt;tcMessage&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Ñîõðàíåíèå/îòìåíà
*-------------------------------------------------------
LPARAMETERS	tcMessage

WITH This

*18.07.2004 22:28 -&gt;Ïðîèçâîäèì ñîõðàíåíèÿ/îòìåíÿåì èçìåíåíèÿ
IF tcMessage == [OK]
	
	*19.10.2004 12:46 -&gt;Åñëè îïåðàöèÿ óäàëåíèå  -  óäàëèì çàïèñü
	IF .cMode == [DELE]
		DELETE IN lvFrmPartFrmEdit
	ENDIF
	*------------------------------------------------------------------------------

	*18.07.2004 22:28 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
	LOCAL	llResSave
	*------------------------------------------------------------------------------
	
	*18.07.2004 22:28 -&gt;Ñîõðàíèì èçìåíåíèÿ
	llResSave = .cstDataWork.Save([lvFrmPartFrmEdit])
	*------------------------------------------------------------------------------
	
	*18.07.2004 22:28 -&gt;Îáðàáîòàåì ðåçóëüòàòû ñîõðàíåíèÿ
	IF !llResSave
		IF .cstDataWork.HandleSaveFail() &amp;&amp;åñëè îøèáêà îáðàáîòàíà
			RETURN .T. &amp;&amp;âîçâðàùàåìñÿ ê ðåäàêòèðîâàíèþ
		ELSE	
			MESSAGEBOX([Â ïðîöåññå ñîõðàíåíèÿ ïðîèçîøëà îøèáêà. Èçìåíåíèÿ ñîõðàíåíû íå áóäóò.],16,[Îøèáêà...])
			.cstDataWork.Restore([lvFrmPartFrmEdit])
		ENDIF	
	ENDIF
	*------------------------------------------------------------------------------
	
	*17.05.2004 02:05 -&gt;Ñîõðàíèì ðåçóëüòàòû
	.uRetVal = .T.
	*------------------------------------------------------------------------------
	
ELSE

	*17.05.2004 02:04 -&gt;Îòìåíèì èçìåíåíèÿ âíåñåííûå â LV
	.cstDataWork.Restore([lvFrmPartFrmEdit])
	.uRetVal = .F.
	*------------------------------------------------------------------------------
	
ENDIF
*------------------------------------------------------------------------------

*17.05.2004 02:07 -&gt;Ñêðûâàåì ôîðìó
.Hide()
*------------------------------------------------------------------------------

ENDWITH
************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************
ENDPROC
PROCEDURE Init
*-------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: FRMPRIMARYDOCPARTFRMINFO.INIT
* Called by.......: &lt;Sys Event&gt;
* Parameters......: &lt;tnFrmID&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Èíèöèàëèçàöèÿ ôîðìû
*-------------------------------------------------------
LPARAMETERS	tcRequestedOperation, tnFrmPartFrmID, tnFrmID

*17.05.2004 01:26 -&gt;Âûïîëíèì ìåòîä ðîäèòåëüñêîãî êëàññà
FRM::INIT()
*------------------------------------------------------------------------------

WITH This

*24.09.2004 16:12 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	_PARAM,_PARAM2, ;
		lcPayListDocTable
*------------------------------------------------------------------------------

*12.05.2004 03:12 -&gt;Ñîõðàíèì êîìàíäó (ðåæèì ðàáîòû ñ äàííûìè)
.cMode = UPPER(ALLTRIM(tcRequestedOperation))
*------------------------------------------------------------------------------
_PARAM  = tnFrmPartFrmID

*------------------------------------------------------------------------------

*19.10.2004 11:40 -&gt;Íàñòðîèì âíåøíèé âèä ôîðìû
DO CASE
	CASE .cMode = [ADD]
	LOCAL	lcPayListDocTable
*12.05.2004 00:32 -&gt;Äîáàâèì ïóñòóþ çàïèñü è çàïèøåì èäåíòèôèêàòîð ðîäèòåëüñêîãî äîêóìåíòà
APPEND BLANK IN lvFrmPartFrmEdit
***
REPLACE FrmID WITH tnFrmPartFrmID IN lvFrmPartFrmEdit
		.Caption = .Caption + [ - Äîáàâëåíèå]
		.Icon = FULLPATH([frmedit.ico])
	CASE .cMode = [EDIT]
REQUERY([lvFrmPartFrmEdit])
		.Caption = .Caption + [ - Ðåäàêòèðîâàíèå]
		.Icon = FULLPATH([frmedit.ico])
	CASE .cMode = [INFO]
REQUERY([lvFrmPartFrmEdit])
		.Caption = .Caption + [ - Ïðîñìîòð]
		.Icon = FULLPATH([frminfo.ico])
		ThisForm.Cntcancelsavehandled1.cmdOk.Enabled = .F.
	CASE .cMode = [DELE]
REQUERY([lvFrmPartFrmEdit])
		.Caption = .Caption + [ - Óäàëåíèå]
		.Icon = FULLPATH([frmdele.ico])
		ThisForm.Cntcancelsavehandled1.cmdOk.Caption = [Óäàëèòü]
ENDCASE
*REQUERY([lvFrmPartFrmSumView])
*12.05.2004 00:32 -&gt;Ïåðå÷èòàåì Alias äëÿ ðåäàêòèðîâàíèÿ äîêóìåíòà è Alias äëÿ ïðîñìîòðà ñóìì / ÍÄÑ
_PARAM  = lvFrmPartFrmEdit.FrmID
_PARAM2 = lvFrmPartFrmEdit.FrmPartFrmID
***
*------------------------------------------------------------------------------
lcPayListDocTable = spGetListDocForTO29(_PARAM,_PARAM2 )
USE (lcPayListDocTable) IN 0 ALIAS FrmToPartFrmList
	    IF RECCOUNT('FrmToPartFrmList')=0
	       MESSAGEBOX('Íåò äîêóìåíòîâ äëÿ äîáàâëåíèÿ. ïðîâåðòå äàòó è îòäåë.',16)
	       .cntcancelsavehandled1.cmdOk.Enabled= .F.
	       *USE IN FrmToPartFrmList
	       *ERASE (lcPayListDocTable)
	       *RETURN .f.
	    ENDIF

ENDWITH
************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************








ENDPROC
PROCEDURE Load
*-------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: FRMPRIMARYDOCPARTFRMEDIT.LOAD
* Called by.......: &lt;Sys Event&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Çàãðóçêà ôîðìû (îòêðûòèå ñïðàâî÷íèêîâ)
*-------------------------------------------------------

*17.05.2004 01:32 -&gt;Âûïîëíèì ìåòîä ðîäèòåëüñêîãî êëàññà
DODEFAULT()
*------------------------------------------------------------------------------

*17.05.2004 01:32 -&gt;Îòêðîåì ÁÄ è óñòàíîâèì å¸ â êà÷åñòâå òåêóùåé
IF !DBUSED([BASIS])
	OPEN DATABASE BASIS
ENDIF
SET DATABASE TO BASIS
*------------------------------------------------------------------------------

*15.07.2004 03:32 -&gt;Îòêðîåì ñïèñîê àëãîðèòìîâ äåëåíèÿ ñóìì âêëþ÷àåìûõ äîêóìåíòîâ
*USE lvFrmSumSplitProcList IN 0
*------------------------------------------------------------------------------

*15.07.2004 02:29 -&gt;Îòêðîåì LV äëÿ ðåäàêòèðîâàíèÿ ñîäåðæàíèÿ äîêóìåíòà (ñóììîâîé ïîçèöèè)
USE lvFrmPartFrmEdit IN 0 NODATA
*------------------------------------------------------------------------------

*24.09.2004 17:35 -&gt;Îòêðîåì LV äëÿ ïðîñìîòðà ñóìì/íäñ ñóììîâîé ïîçèöèè äîêóìåíòà
*USE  lvFrmPartFrmSumView IN 0 NODATA
*------------------------------------------------------------------------------

************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1>Class</reserved1>
		<reserved2>9</reserved2>
		<reserved3>cmode
</reserved3>
		<reserved4/>
		<reserved5/>
		<reserved6>Pixels</reserved6>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1SW1249AZ</uniqueid>
		<timestamp>0</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblDocumentSumPayVal</objname>
		<parent>frmprimarydocpartfrmeditjast</parent>
		<properties>FontBold = .T.
Caption = "íåäîñòóïíî"
Left = 137
Top = 61
ZOrderSet = 11
Name = "lblDocumentSumPayVal"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1SW1249AF</uniqueid>
		<timestamp>0</timestamp>
		<class>shp</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>shape</baseclass>
		<objname>shpFrm</objname>
		<parent>frmprimarydocpartfrmeditjast</parent>
		<properties>Top = 2
Left = 2
Height = 102
Width = 390
SpecialEffect = 0
ZOrderSet = 5
Name = "shpFrm"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1SW1249AG</uniqueid>
		<timestamp>0</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblFrm</objname>
		<parent>frmprimarydocpartfrmeditjast</parent>
		<properties>FontBold = .T.
Caption = "Äîêóìåíò:"
Left = 7
Top = 10
ZOrderSet = 6
Name = "lblFrm"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1SW1249AH</uniqueid>
		<timestamp>0</timestamp>
		<class>cntidctlgrid</class>
		<classloc>comidctl_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>cntIdCtlGridCntFrm</objname>
		<parent>frmprimarydocpartfrmeditjast</parent>
		<properties>Top = 7
Left = 137
Width = 250
Height = 23
ZOrderSet = 7
_controlsource = lvFrmPartFrmEdit.CntFrmID
_controlsourcetype = 1
_rsfieldnameid = FrmID
_rsfieldnametext = NM
_rsaliasname = FrmToPartFrmList
_showtextempty = Äîêóìåíò íå îïðåäåëåí
Name = "cntIdCtlGridCntFrm"
txtText.Height = 23
txtText.Left = 0
txtText.Top = 0
txtText.Width = 200
txtText._highlightobject = .parent.parent.lblFrm
txtText.Name = "txtText"
cmdShow.Top = 0
cmdShow.Left = 204
cmdShow.Name = "cmdShow"
cmdClear.Top = 0
cmdClear.Left = 227
cmdClear.Name = "cmdClear"
</properties>
		<protected/>
		<methods>PROCEDURE _refreshrelatedobjects
*-------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRINARYDOC_V1.VCX
* Class.Module....: CNTIDCTLGRIDFRM._HANDLEANYCHANGE
* Called by.......: &lt;ObjectEvent&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Îáðàáîòêà èçìåíåíèÿ çíà÷åíèÿ ýëåìåíòà.
*-------------------------------------------------------
RETURN
WITH ThisForm

*15.07.2004 04:50 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	_PARAM
*------------------------------------------------------------------------------

*19.10.2004 15:13 -&gt;Ïðîâåðèì îïëà÷èâàåì äîêóìåíò èëè ñóììó
IF lvFrmPartFrmEdit.CntFrmID = 0

	*19.10.2004 15:20 -&gt;Î÷èñòèì ñóììó âûáðàííîãî äîêóìåíòà
	.lblDocumentSumVal.Caption = [íåäîñòóïíî]
	.lblDocumentSumPayVal.Caption = [íåäîñòóïíî]
	.lblDocumentSumRestVal.Caption = [íåäîñòóïíî]
	*------------------------------------------------------------------------------

	*19.10.2004 15:12 -&gt;Î÷èñòèì îñíîâàíèå ïëàòåæà
	.edtFrmPartFrmNote.Value = []
	*------------------------------------------------------------------------------
	
	*19.10.2004 15:14 -&gt;Âûñòàâèì àêòèâíóþ ñòðàíèöó
	.pgfSum.ActivePage = 2
	*------------------------------------------------------------------------------
	
	*20.10.2004 12:34 -&gt;Î÷èñòèì ñóììó è ñòàâêó ÍÄÑ
	.pgfSum.pgSum.txtIncludeSum.Value = 0
	.pgfSum.pgSum.txtVatRate.Value = 18 &amp;&amp; GVFC
	*------------------------------------------------------------------------------
	
	*20.10.2004 12:39 -&gt;Î÷èñòèì êîä àëãîðèòìà äåëåíèÿ ñóììû
	.pgfSum.pgSumFrm.ñntIdCtlGridSplitProc.SetValue(0)
	*------------------------------------------------------------------------------
	
ELSE

	*15.07.2004 04:50 -&gt;Ïîëó÷èì ñóììó âûáðàííîãî äîêóìåíòà
	USE IN IIF(USED([lvFrmTvrSumFrm]),[lvFrmTvrSumFrm],0)
	USE IN IIF(USED([lvFrmTvrSumPay]),[lvFrmTvrSumPay],0)
	***
	_PARAM = This.Value
	USE lvFrmTvrSumFrm IN 0
	USE lvFrmTvrSumPay IN 0
	***
	.DocumentSum = lvFrmTvrSumFrm.FrmSum
	.DocumentSumPay = lvFrmTvrSumPay.FrmSumPay
	.DocumentSumRest = lvFrmTvrSumFrm.FrmSum - lvFrmTvrSumPay.FrmSumPay
	.DocumentSumRest = IIF(.DocumentSumRest&gt;0,.DocumentSumRest,0)
	***
	.lblDocumentSumVal.Caption = ALLTRIM(STR(.DocumentSum,13,2))
	.lblDocumentSumPayVal.Caption = ALLTRIM(STR(.DocumentSumPay,13,2))
	.lblDocumentSumRestVal.Caption = ALLTRIM(STR(.DocumentSumRest,13,2))
	***
	USE IN IIF(USED([lvFrmTvrSumFrm]),[lvFrmTvrSumFrm],0)
	USE IN IIF(USED([lvFrmTvrSumPay]),[lvFrmTvrSumPay],0)
	*------------------------------------------------------------------------------

	*15.07.2004 04:53 -&gt;Ïåðåñ÷èòàåì ñóììó
	.CalculateSum()
	*------------------------------------------------------------------------------

	*19.10.2004 15:12 -&gt;Çàïîëíèì îñíîâàíèå ïëàòåæà
	.edtFrmPartFrmNote.Value = [îïëàòà ïî ] + This.txtText.Value
	*------------------------------------------------------------------------------

	*19.10.2004 15:14 -&gt;Âûñòàâèì àêòèâíóþ ñòðàíèöó
	.pgfSum.ActivePage = 1
	*------------------------------------------------------------------------------
	
	*20.10.2004 12:42 -&gt;Âûñòàâèì êîä àëãîðèòìà äåëåíèÿ ñóììû ïî óìîë÷àíèþ
	IF 	.pgfSum.pgSumFrm.ñntIdCtlGridSplitProc.Value = 0
		.pgfSum.pgSumFrm.ñntIdCtlGridSplitProc.SetValue(1) &amp;&amp; GVFC
	ENDIF	
	*------------------------------------------------------------------------------
	
ENDIF
*------------------------------------------------------------------------------

ENDWITH
************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1SW1249AP</uniqueid>
		<timestamp>0</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblDocumentSum</objname>
		<parent>frmprimarydocpartfrmeditjast</parent>
		<properties>FontBold = .T.
Caption = "Ñóììà ïî äîêóìåíòó:"
Left = 7
Top = 38
ZOrderSet = 8
Name = "lblDocumentSum"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1SW1249AQ</uniqueid>
		<timestamp>0</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblDocumentSumVal</objname>
		<parent>frmprimarydocpartfrmeditjast</parent>
		<properties>FontBold = .T.
Caption = "íåäîñòóïíî"
Left = 137
Top = 38
ZOrderSet = 9
Name = "lblDocumentSumVal"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1SW1249B0</uniqueid>
		<timestamp>0</timestamp>
		<class>cntcancelsavehandled</class>
		<classloc>baseform_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>Cntcancelsavehandled1</objname>
		<parent>frmprimarydocpartfrmeditjast</parent>
		<properties>Top = 156
Left = 180
ZOrderSet = 16
Name = "Cntcancelsavehandled1"
cmdCancel.Name = "cmdCancel"
cmdOk.Name = "cmdOk"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1SW1249AR</uniqueid>
		<timestamp>0</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblDocumentSumPay</objname>
		<parent>frmprimarydocpartfrmeditjast</parent>
		<properties>FontBold = .T.
Caption = "Îïëà÷åíî:"
Left = 7
Top = 61
ZOrderSet = 10
Name = "lblDocumentSumPay"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>COMMENT</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>0</timestamp>
		<class/>
		<classloc/>
		<baseclass/>
		<objname>frmprimarydocpartfrmeditjast</objname>
		<parent/>
		<properties/>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1R20ZSRCM</uniqueid>
		<timestamp>0</timestamp>
		<class>grd</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>grid</baseclass>
		<objname>grdautonum</objname>
		<parent/>
		<properties>ColumnCount = 3
Anchor = 0
Height = 265
Highlight = .F.
HighlightRow = .T.
Panel = 1
RecordSource = "lvFrmAutoNumView"
ScrollBars = 2
Width = 445
HighlightForeColor = 255,255,255
HighlightStyle = 0
_handledstandartmsgpromptlist = ;;;;;Äîáàâèòü;Ðåäàêòèðîâàòü;;Óäàëèòü
_handledstandartmsglist = ;;;;;ADD;EDIT;;DELE
Name = "grdautonum"
Column1.ControlSource = "lvFrmAutoNumView.OUNM"
Column1.Width = 215
Column1.Name = "Column1"
Column2.ControlSource = "lvFrmAutoNumView.FrmTypeNM"
Column2.Width = 150
Column2.Name = "Column2"
Column3.ControlSource = "lvFrmAutoNumView.AutoNumMask"
Column3.Width = 48
Column3.Name = "Column3"
</properties>
		<protected/>
		<methods>PROCEDURE _add
*------------------------------------------------------------------------------
* Project.........: BASIS.pjx
* Library.........: Cash_v1.vcx
* Class.Module....: grdCash._Add
* Called by.......: &lt;ToolBar or Context Menu Action -&gt; .HandleMsg() -&gt; .Add()&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Äîáàâëåíèå íîâîãî àâòîíóìåðàòîðà.
*-------------------------------------------------------

*13.01.2005 10:46 -&gt; Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL lnAutoNumId, ;
	  lcOperation, ;
	  lnResAdding

lnAutoNumId = lvFrmAutoNumView.FrmTypeAutoNumID
lcOperation = [ADD]
*------------------------------------------------------------------------------

*13.01.2005 10:46 -&gt; Âûïîëíèì îïåðàöèþ äîáàâëåíèÿ íîâîãî àâòîíóìåðàòîðà
lnResAdding = oMgrPD.Operate([AUTONUM], [ADD])
*------------------------------------------------------------------------------

*17.01.2005 15:30 -&gt; Îáðàáîòàåì ðåçóëüòàòû äîáàâëåíèÿ çàïèñè
IF TYPE([lnResAdding])==[N]&amp;&amp;çàïèñü äîáàâëåíà
		
	*17.01.2005 15:30 -&gt; Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
	LOCAL 	lcOldAlias, ;
			lnId, ;
			laReplaceArray[1]
			
	PRIVATE	_PARAM
	***
	lcOldAlias = ALIAS()
	lnId = lnResAdding
	laReplaceArray = .NULL.
	*------------------------------------------------------------------------------
	
	*17.01.2005 15:31 -&gt; Ïîëó÷èì äàííûå î äîáàâëåííîì àâòîíóìåðàòîðå
	IF USED([lvFrmAutoNumViewRepl])
		USE IN lvFrmAutoNumViewRepl
	ENDIF
	_PARAM = lnId
	USE lvFrmAutoNumViewRepl IN 0
	*------------------------------------------------------------------------------
	
	*17.01.2005 15:34 -&gt; Îáíîâèì äàííûå â lvAutoNumView
	SELECT lvFrmAutoNumViewRepl
	SCATTER TO laReplaceArray
	SELECT lvFrmAutoNumView
	APPEND BLANK
	GATHER FROM laReplaceArray
	TABLEUPDATE(.T.)
	*------------------------------------------------------------------------------
		
	*17.01.2005 15:35 -&gt; Çàêðîåì Alis
	USE IN lvFrmAutoNumViewRepl
	*------------------------------------------------------------------------------
	*17.01.2005 15:33 -&gt; Ïåðåõîäèì íà îòðåäàêòèðîâàííûé ýëåìåíò
	
	SELECT lvFrmAutoNumView
	LOCATE FOR lvFrmAutoNumView.FrmTypeAutoNumID = lnID
	*------------------------------------------------------------------------------

	*17.01.2005 15:32 -&gt; Âûçîâåì ìåòîä îáíîâëåíèÿ RunTime ñâîéñòâ, ñ ïðèíóäèòåëüíûì
	*17.01.2005 15:32 -&gt; âûçîâîì îáðàáîò÷èêîâ, äàæå åñëè ñâîéñòâî íå èçìåíèëîñü
	This.Refresh(.T.)
	*------------------------------------------------------------------------------
	
	*17.01.2005 15:32 -&gt; Âîññòàíîâèì òåêóùèé Alias
	IF !EMPTY(lcOldAlias) AND USED(lcOldAlias) AND lcOldAlias#ALIAS()
		SELECT(lcOldAlias)
	ENDIF
	*------------------------------------------------------------------------------

ENDIF
*----------------------------------------------------------------------------------

************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************
ENDPROC
PROCEDURE _dele
*------------------------------------------------------------------------------
* Project.........: basis.pjx
* Library.........: autonum.vcx
* Class.Module....: GRDAUTONUM._EDIT
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Ïóíêò "Óäàëèòü" êîíòåêñòíîãî ìåíþ àâòîíóìåðàòîðà
*------------------------------------------------------------------------------

*13.01.2005 10:47 -&gt; Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	lnFrmTypeId, ;
		luResDele
***
lnAutonumId = lvFrmAutoNumView.FrmTypeAutoNumId
*------------------------------------------------------------------------------

*13.01.2005 10:46 -&gt; Âûïîëíèì îïåðàöèþ óäàëåíèÿ òèïà äîêóìåíòà
luResDele = oMgrPD.Operate([AUTONUM],[DELE],lnAutoNumId)
*------------------------------------------------------------------------------

*13.01.2005 14:55 -&gt; Îáðàáîòàåì ðåçóëüòàòû óäàëåíèÿ
IF TYPE([luResDele])==[L] AND luResDele
	
	*07.07.2004 16:57 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
	LOCAL	lcOldAlias
	***
	lcOldAlias = ALIAS()
	*------------------------------------------------------------------------------

	*07.07.2004 17:03 -&gt;Óäàëèì îáúåêò èç Grid-à
	SELECT lvFrmAutonumView
	DELETE FOR lvFrmAutoNumView.FrmTypeAutoNumID = lnAutoNumID
	TABLEUPDATE(.T.)
	*------------------------------------------------------------------------------
	
	*07.07.2004 17:05 -&gt;Âîññòàíîâèì òåêóùèé Alias
	IF !EMPTY(lcOldAlias) AND USED(lcOldAlias) AND lcOldAlias#ALIAS()
		SELECT(lcOldAlias)
	ENDIF
	*------------------------------------------------------------------------------
	
	*05.04.2004 17:52 -&gt;Âûçîâåì ìåòîä äëÿ ïðèíóäèòåëüíîãî îáíîâëåíèÿ RunTime ñâîéñòâ
	This.Refresh(.T.)
	*------------------------------------------------------------------------------
	
ENDIF
*----------------------------------------------------------------------------------

************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************
ENDPROC
PROCEDURE _edit
*------------------------------------------------------------------------------
* Project.........: BASIS.pjx
* Library.........: Autonum.vcx
* Class.Module....: GrdAutonum._Edit
* Called by.......:
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Ðåäàêòèðîâàíèå èíôîðìàöèè îá àâòîíóìåðàòîðå.
*-------------------------------------------------------

*13.01.2005 10:50 -&gt; Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	lnId, ;
		luResEditing
***
lnId = lvFrmAutoNumView.FrmTypeAutoNumID

*------------------------------------------------------------------------------

*13.01.2005 14:52 -&gt; Âûïîëíèì îïåðàöèþ ðåäàêòèðîâàíèÿ òèïà äîêóìåíòà
luResEditing = oMgrPD.Operate([AUTONUM],[EDIT],lnId)
*------------------------------------------------------------------------------

*13.01.2005 15:05 -&gt; Îáðàáîòàåì ðåçóëüòàòû ðåäàêòèðîâàíèÿ
IF TYPE([luResEditing])==[L] AND luResEditing &amp;&amp;äàííûå î òèïå äîêóìåíòà èçìåíåíû
	
	*17.01.2005 15:08 -&gt; Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
	LOCAL 	lcOldAlias
	LOCAL ARRAY laReplaceArray[1]
	PRIVATE	_PARAM
	***
	lcOldAlias = ALIAS()
	laReplaceArray = .NULL.
	*------------------------------------------------------------------------------
	
	*17.01.2005 15:09 -&gt; Ïîëó÷èì îáíîâëåííûå äàííûå î òèïå äîêóìåíòà
	IF USED([lvFrmAutonumViewRepl])
		USE IN lvFrmAutoNumViewRepl
	ENDIF
	_PARAM = lnId
	USE lvFrmAutoNumViewRepl IN 0
	*------------------------------------------------------------------------------

	*17.01.2005 15:10 -&gt; Îáíîâëÿåì îòðåäàêòèðîâàííûé ýëåìåíò
	SELECT lvFrmAutoNumViewRepl
	SCATTER TO laReplaceArray
	SELECT lvFrmAutoNumView
	LOCATE FOR lvFrmAutoNumView.FrmTypeAutoNumID = lnID
	GATHER FROM laReplaceArray
	TABLEUPDATE(.T.)
	*------------------------------------------------------------------------------

	*17.01.2005 15:11 -&gt; Çàêðîåì íåíóæíûé íàì Alias
	USE IN lvFrmAutoNumViewRepl
	*------------------------------------------------------------------------------

	*17.01.2005 15:12 -&gt; Âûçîâåì ìåòîä îáíîâëåíèÿ RunTime ñâîéñòâ, ñ ïðèíóäèòåëüíûì
	*17.01.2005 15:12 -&gt; âûçîâîì îáðàáîò÷èêîâ, äàæå åñëè ñâîéñòâî íå èçìåíèëîñü
	This.Refresh(.T.)
	*------------------------------------------------------------------------------
		
	*17.01.2005 15:11 -&gt; Âîññòàíîâèì òåêóùèé Alias
	IF !EMPTY(lcOldAlias) AND USED(lcOldAlias) AND lcOldAlias#ALIAS()
		SELECT(lcOldAlias)
	ENDIF
	*------------------------------------------------------------------------------
	
ENDIF
*------------------------------------------------------------------------------

************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************
ENDPROC
PROCEDURE Init
*14.03.2006 15:26 -&gt;Âûïîëíèì ìåòîä ðîäèòåëüñêîãî êëàññà
DODEFAULT()
*------------------------------------------------------------------------------

*14.03.2006 15:26 -&gt;Óñòàíîâèì àòðèáóòû äëÿ îòîáðàæåíèÿ íåàêòèâíûõ àâòîíóìåðàòîðîâ
This.SetAll([DynamicForeColor],[IIF(lvFrmAutoNumView.AutoNumIsEnabled,]+ALLTRIM(STR(This.Column1.TxtGrd1.ForeColor))+[,]+ALLTRIM(STR(This.Column1.TxtGrd1.DisabledForeColor))+[)],[Column])
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1>Class</reserved1>
		<reserved2>7</reserved2>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6>Pixels</reserved6>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1R211DQVG</uniqueid>
		<timestamp>0</timestamp>
		<class>header</class>
		<classloc/>
		<baseclass>header</baseclass>
		<objname>Header1</objname>
		<parent>grdautonum.Column1</parent>
		<properties>Caption = "Îðãàíèçàöèîííàÿ Åäèíèöà"
Name = "Header1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1R211DQVH</uniqueid>
		<timestamp>0</timestamp>
		<class>txtgrd</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>Txtgrd1</objname>
		<parent>grdautonum.Column1</parent>
		<properties>Left = 17
Top = 35
Name = "Txtgrd1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1R211DQVI</uniqueid>
		<timestamp>0</timestamp>
		<class>header</class>
		<classloc/>
		<baseclass>header</baseclass>
		<objname>Header1</objname>
		<parent>grdautonum.Column2</parent>
		<properties>Caption = "Òèï äîêóìåíòà"
Name = "Header1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1R211DQVJ</uniqueid>
		<timestamp>0</timestamp>
		<class>txtgrd</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>Txtgrd1</objname>
		<parent>grdautonum.Column2</parent>
		<properties>Left = 13
Top = 23
Name = "Txtgrd1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1R211DQVT</uniqueid>
		<timestamp>0</timestamp>
		<class>header</class>
		<classloc/>
		<baseclass>header</baseclass>
		<objname>Header1</objname>
		<parent>grdautonum.Column3</parent>
		<properties>Caption = "Ìàñêà"
Name = "Header1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1R211DQVU</uniqueid>
		<timestamp>0</timestamp>
		<class>txtgrd</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>Txtgrd1</objname>
		<parent>grdautonum.Column3</parent>
		<properties>Left = 33
Top = 23
Name = "Txtgrd1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>COMMENT</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>0</timestamp>
		<class/>
		<classloc/>
		<baseclass/>
		<objname>grdautonum</objname>
		<parent/>
		<properties/>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1DZ118AIP</uniqueid>
		<timestamp>0</timestamp>
		<class>tlbfrm</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>toolbar</baseclass>
		<objname>tlbcustomfunc</objname>
		<parent/>
		<properties>Height = 19
Left = 6
Top = 6
Width = 33
Name = "tlbcustomfunc"
</properties>
		<protected/>
		<methods>PROCEDURE Init
*-------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: TlbCustomFunc.Init
* Called by.......: &lt;Sys Event&gt;
* Parameters......: &lt;tnScrFrmID&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Çàãðóçêà êíîïîê
*-------------------------------------------------------
LPARAMETERS	tnScrFrmID

*12.05.2004 12:45 -&gt;Âûïîëíèì ìåòîä ðîäèòåëüñêîãî êëàññà
DODEFAULT()
*------------------------------------------------------------------------------

*12.05.2004 12:45 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	lcOldAlias, ;
		lnLastGrpID, ;
		_PARAM
***
lcOldAlias = ALIAS()
lcLastGrpID = [NONE]
*------------------------------------------------------------------------------

WITH This

*12.05.2004 12:49 -&gt;Äîáàâÿëåì ïî êíîïêå äëÿ êàæäîé ôîðìû
USE IN IIF(USED([lvCstFuncAllByScrFrm]),[lvCstFuncAllByScrFrm],0)
***
_PARAM = tnScrFrmID
USE Basis!lvCstFuncAllByScrFrm IN 0
***
SELECT lvCstFuncAllByScrFrm
***
SCAN
	IF (lcLastGrpID # [NONE]) AND lcLastGrpID # ALLTRIM(CstFuncGrp)
		.AddObject([spr] + ALLTRIM(CstFuncGrp),[separator])
	ENDIF
	***
	TRY
		.AddObject([cmdTlbFrm] + ALLTRIM(STR(CstFuncID)),[cmdTlbFrm],ALLTRIM(CstFuncMsg),ALLTRIM(BmpFileNM),ALLTRIM(CstFuncNM))
	CATCH
	ENDTRY
	***
	lcLastGrpID = ALLTRIM(CstFuncGrp)
ENDSCAN
.SetAll([VISIBLE],.T.,[cmdTlbFrm])
.SetEnabled(.lEnabled)
*------------------------------------------------------------------------------
	
*12.05.2004 12:50 -&gt;Âîññòàíîâèì òåêóùèé Alias
IF !EMPTY(lcOldAlias) AND USED(lcOldAlias) AND lcOldAlias#ALIAS()
	SELECT(lcOldAlias)
ENDIF
*------------------------------------------------------------------------------

ENDWITH
************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************

ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1>Class</reserved1>
		<reserved2>1</reserved2>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6>Pixels</reserved6>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>COMMENT</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>0</timestamp>
		<class/>
		<classloc/>
		<baseclass/>
		<objname>tlbcustomfunc</objname>
		<parent/>
		<properties/>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18A02DMUV</uniqueid>
		<timestamp>923430310</timestamp>
		<class>grd</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>grid</baseclass>
		<objname>grdpartpractical</objname>
		<parent/>
		<properties>ColumnCount = 4
Height = 215
Panel = 1
RecordSource = "FrmPrBookView"
SplitBar = .T.
Width = 340
HighlightStyle = 2
nfrmid = 0
_handledstandartmsglist = FIRST;PREV;NEXT;LAST;;ADD;EDIT;INFO;DELE
_handledstandartmsgpromptlist = ;;;;;Äîáàâèòü;Ðåäàêòèðîâàòü;Ïðîñìîòð;Óäàëèòü
Name = "grdpartpractical"
Column1.ControlSource = "FrmPrBookView.PBookSum"
Column1.Width = 106
Column1.Name = "Column1"
Column2.ControlSource = "FrmPrBookView.Debet"
Column2.Width = 60
Column2.Name = "Column2"
Column3.ControlSource = "FrmPrBookView.Credit"
Column3.Width = 61
Column3.Name = "Column3"
Column4.ControlSource = "FrmPrBookView.PBookNote"
Column4.Width = 88
Column4.Name = "Column4"
</properties>
		<protected/>
		<methods>PROCEDURE _add
*-------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: grdPartTvr._Add
* Called by.......: &lt;ToolBar or Context Menu Action -&gt; .HandleMsg() -&gt; .Add()&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Äîáàâëåíèå ñîäåðæàíèÿ òîâàðíîãî äîêóìåíòà
*-------------------------------------------------------

*15.07.2004 02:57 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	luResultAdding
*------------------------------------------------------------------------------

*15.07.2004 02:57 -&gt;Âûïîëíÿåì îïåðàöèþ äîáàâëåíèÿ
luResultAdding = oMgrPD.Operate([PARTPRBOOK],[ADD],This.nFrmID)
*------------------------------------------------------------------------------

*24.09.2004 16:17 -&gt;Åñëè çàïèñü äîáàâëåíà
IF TYPE([luResultAdding])==[N] AND !EMPTY(luResultAdding)

	*24.09.2004 16:15 -&gt;Ïåðå÷èòûâàåì Alias äëÿ ïðîñìîòðà
	This._RSRequeryOne(luResultAdding)
	*------------------------------------------------------------------------------
	
ENDIF
*------------------------------------------------------------------------------

****************************************************************************************************************
***********************************************  END OF METHOD *************************************************
****************************************************************************************************************
ENDPROC
PROCEDURE _dele
*-------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: grdPartFrm._Dele
* Called by.......: &lt;ToolBar or Context Menu Action -&gt; .HandleMsg() -&gt; .Dele()&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Óäàëåíèå ñîäåðæàíèÿ òîâàðíîãî äîêóìåíòà
*-------------------------------------------------------

*15.07.2004 02:57 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	lnFrmPartID, ;
		luDeleRes
***
lnFrmPartID = FrmPrBookView.PBookID
*------------------------------------------------------------------------------

*15.07.2004 02:57 -&gt;Âûïîëíÿåì îïåðàöèþ óäàëåíèÿ
luDeleRes = oMgrPD.Operate([PARTPRBOOK],[DELE],lnFrmPartID)
*------------------------------------------------------------------------------

*24.09.2004 16:17 -&gt;Åñëè çàïèñü óäàëåíà
IF TYPE([luDeleRes])==[L] AND luDeleRes

	*24.09.2004 16:15 -&gt;Ïåðå÷èòûâàåì Alias äëÿ ïðîñìîòðà
	This._RSRequeryOne(lnFrmPartID)
	*------------------------------------------------------------------------------

ENDIF
*------------------------------------------------------------------------------

****************************************************************************************************************
***********************************************  END OF METHOD *************************************************
****************************************************************************************************************
ENDPROC
PROCEDURE _edit
*-------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: grdPartTvr._Edit
* Called by.......: &lt;ToolBar or Context Menu Action -&gt; .HandleMsg() -&gt; .Edit()&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Ðåäàêòèðîâàíèå ñîäåðæàíèÿ òîâàðíîãî äîêóìåíòà
*-------------------------------------------------------

*19.10.2004 13:44 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	lnFrmPartID, ;
		luEditRes
***
lnFrmPartID = FrmPrBookView.PBookID
*------------------------------------------------------------------------------
luResultAdding = oMgrPD.Operate([PARTPRBOOK],[EDIT],lnFrmPartID)

*------------------------------------------------------------------------------

*19.10.2004 13:45 -&gt;Åñëè çàïèñü îòðåäàêòèðîâàëè
IF TYPE([luEditRes])==[L] AND luEditRes

	*24.09.2004 16:15 -&gt;Ïåðå÷èòûâàåì Alias äëÿ ïðîñìîòðà
	This._RSRequeryOne(lnFrmPartID)
	*------------------------------------------------------------------------------
	
ENDIF
*------------------------------------------------------------------------------

****************************************************************************************************************
***********************************************  END OF METHOD *************************************************
****************************************************************************************************************
ENDPROC
PROCEDURE _gethandledstandartmsglist
*------------------------------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: grdPartTvr._GetHandledStandartMsgList
* Called by.......: &lt;.RefreshHandledStandartMsgList();.RightClick()&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;lcHandledStandartMsgList&gt;
* Notes...........: Çàïðåòèì âñå ñòàíäàðòíûå îïåðàöèè, åñëè òåêóùèé äîêóìåíò íå îïðåäåëåí
*------------------------------------------------------------------------------

*15.09.2005 15:23 -&gt; Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	lnFrmID, ;
		lcResult
***
lnFrmID = This.nFrmID
*------------------------------------------------------------------------------

*15.09.2005 15:24 -&gt; Îïðåäåëèì ðàçðåø¸ííûå îïåðàöèè
IF lnFrmID = 0

	lcResult = []

ELSE
	
	*15.09.2005 15:27 -&gt; Ïîëó÷èì èíôîðìàöèþ î ñòàòóñå äîêóìåíòà
	LOCAL _PARAM
	_PARAM = lnFrmID
	***
	USE IN IIF(USED([lvFrmStatusInfoByFrmID]),[lvFrmStatusInfoByFrmID],0)
	USE lvFrmStatusInfoByFrmID IN 0
	*------------------------------------------------------------------------------

	*------------------------------------------------------------------------------
	*15.09.2005 15:28 -&gt; Ïðîâåðèì ó÷àñòâóåò ëè äîêóìåíò â ó÷åòå
	IF	!lvFrmStatusInfoByFrmID.FrmStatIsInvAcc AND ;
		!lvFrmStatusInfoByFrmID.FrmStatIsCostAcc

		*27.03.2006 10:50 -&gt; Ðàçðåøèì âñå îïåðàöèè
		lcResult = DODEFAULT()
		*------------------------------------------------------------------------------

	ELSE

		*27.03.2006 10:54 -&gt; Èñêëþ÷èì óäàëåíèå/äîáàâëåíèå/ðåäàêòèðîâàíèå èç ñïèñêà âîçìîæíûõ îïåðàöèé
		lcResult = [;] + DODEFAULT() + [;]
*!*			lcResult = STRTRAN(lcResult,[;ADD;],[;])
*!*			lcResult = STRTRAN(lcResult,[;DELE;],[;])
*!*			lcResult = STRTRAN(lcResult,[;EDIT;],[;])
		*------------------------------------------------------------------------------

		*27.03.2006 10:58 -&gt; Óäàëÿåì ñëåâà è ñïðàâà ; äîáàâëåííûå ðàíåå
		IF !(lcResult == [;])
			lcResult = SUBSTR(lcResult,2,LEN(lcResult)-2)
		ELSE
			lcResult = []
		ENDIF	
		*------------------------------------------------------------------------------

	ENDIF
	*------------------------------------------------------------------------------

ENDIF
*------------------------------------------------------------------------------

*15.09.2005 15:23 -&gt; Âîçâðàùàåì ðåçóëüòàò
RETURN lcResult
*------------------------------------------------------------------------------

*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE _info
*-------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: GRDPARTTVR._INFO
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Ïðîñìîòð èíôîðìàöèè î òîâàðíîé ñòðîêå
*-------------------------------------------------------

*19.05.2004 22:37 -&gt;Âûïîëíèì ñîîòâåòñòâóþùóþ îïåðàöèþ ìåíåäæåðà
luResultAdding = oMgrPD.Operate([PARTPRBOOK],[INFO],FrmPrBookView.PBookID)
*------------------------------------------------------------------------------

************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************
ENDPROC
PROCEDURE _rsrequery
*-------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: grdPartTvr._RSRequery
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;tnFrmID&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Ïåðå÷èòûâàíèå ñîäåðæèìîãî äîêóìåíòà
*-------------------------------------------------------
LPARAMETERS	tnFrmID

*21.04.2004 14:37 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	lcUniqueName, ;
		lcUniqueFilePath
*------------------------------------------------------------------------------

WITH THIS

*21.04.2004 14:33 -&gt;Ñîõðàíèì äàííûå î RecordSource
.SourceKeep()
*------------------------------------------------------------------------------

*21.04.2004 14:33 -&gt;Îòêëþ÷èì RecordSource
.SourceReset()
*------------------------------------------------------------------------------

*21.04.2004 14:34 -&gt;Çàêðîåì Alias è óäàëèì âðåìåííóþ òàáëèöó
lcUniqueFilePath = DBF([FrmPrBookView])
***
USE IN FrmPrBookView
***
IF FILE(lcUniqueFilePath)
	ERASE (lcUniqueFilePath)
ENDIF
*------------------------------------------------------------------------------

*05.05.2004 01:35 -&gt;Ïåðå÷èòàåì Alias
IF TYPE([tnFrmID])==[N] AND !EMPTY(tnFrmID)
	
	*02.12.2004 16:48 -&gt;Ñîõðàíèì èäåíòèôèêàòîð äîêóìåíòà â ñâîéñòâå Grid-à
	.nFrmID = tnFrmID
	*------------------------------------------------------------------------------

	*21.04.2004 14:05 -&gt;Âûïîëíèì õðàíèìóþ ïðîöåäóðó äëÿ ïîëó÷åíèÿ äàííûõ
	lcUniqueName = spFrmPrBookView([BYFRMID],tnFrmID)
	*------------------------------------------------------------------------------

ELSE
	
	*02.12.2004 16:48 -&gt;Ñîõðàíèì èäåíòèôèêàòîð äîêóìåíòà â ñâîéñòâå Grid-à
	.nFrmID = 0
	*------------------------------------------------------------------------------

	*21.04.2004 14:05 -&gt;Âûïîëíèì õðàíèìóþ ïðîöåäóðó äëÿ ïîëó÷åíèÿ òàáëèöû
	lcUniqueName = spFrmPrBookView([NODATA])
	*------------------------------------------------------------------------------
	
ENDIF	
*------------------------------------------------------------------------------

*21.04.2004 14:08 -&gt;Òåïåðü îòêðîåì äàííûé Alias
USE (lcUniqueName) IN 0 ALIAS FrmPrBookView
CURSORSETPROP([BUFFERING],3,[FrmPrBookView])
*------------------------------------------------------------------------------
*05.05.2004 01:36 -&gt;Âîññòàíàâëèâàåì Alias
.SourceRecall()
*------------------------------------------------------------------------------

ENDWITH
************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************
ENDPROC
PROCEDURE _rsrequeryone
*------------------------------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: grdPartTvr._RSRequeryOne
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;tnFrmPartID&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Ïåðå÷èòûâàíèå îäíîé çàïèñè (ïîçèöèè äîêóìåíòà)
*------------------------------------------------------------------------------
LPARAMETERS tnFrmPartID

*22.12.2004 15:10 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	lcOldAlias, ;
		lcUniqueFileName, ;
		laReplaceArray[1]
***
lcOldAlias = ALIAS()
*------------------------------------------------------------------------------

*12.05.2004 03:27 -&gt;Âûïîëíÿåì çàïðîñ ñòðîêè
lcUniqueFileName = spFrmPrBookView([BYFRMPARTID],This.nFrmID,tnFrmPartID)
*------------------------------------------------------------------------------

*12.05.2004 03:35 -&gt;Îòêëþ÷àåì èñòî÷íèê äàííûõ
This.SourceKeep()
This.SourceReset()
*------------------------------------------------------------------------------

*22.12.2004 15:05 -&gt;Äîáàâëÿåì/îáíîâëÿåì/óäàëÿåì çàïèñü
USE (lcUniqueFileName) IN 0 ALIAS FrmPrBookViewReq
SELECT FrmPrBookViewReq
***
IF RECCOUNT([FrmPrBookViewReq]) == 1
	*22.12.2004 15:10 -&gt;Îáíîâëÿåì çàïèñü
	SCATTER TO laReplaceArray
	SELECT FrmPrBookView
	LOCATE FOR FrmPrBookView.PBookID = tnFrmPartID
	IF !FOUND()
		APPEND BLANK IN FrmPrBookView
	ENDIF
	GATHER FROM laReplaceArray
	TABLEUPDATE(.T.)
	*------------------------------------------------------------------------------
ELSE
	SELECT FrmPrBookView
	LOCATE FOR FrmPrBookView.PBookID = tnFrmPartID
	IF FOUND()
		*22.12.2004 15:11 -&gt;Óäàëÿåì çàïèñü
		DELETE IN FrmPrBookView
		TABLEUPDATE(.T.)
		*------------------------------------------------------------------------------
	ENDIF
ENDIF
*------------------------------------------------------------------------------

*12.05.2004 03:37 -&gt;Âîññòàíàâëèâàåì èñòî÷íèê äàííûõ
This.SourceRecall()
*------------------------------------------------------------------------------

*22.12.2004 15:09 -&gt;Óäàëÿåì ðåçóëüòàò çàïðîñà
USE IN FrmPrBookViewReq
ERASE ([tmp\]+lcUniqueFileName+[.dbf])
*------------------------------------------------------------------------------

*22.12.2004 15:35 -&gt;Âîññòàíîâèì òåêóùèé Alias
IF !EMPTY(lcOldAlias) AND USED(lcOldAlias) AND lcOldAlias#ALIAS()
	SELECT(lcOldAlias)
ENDIF
*------------------------------------------------------------------------------

*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1>Class</reserved1>
		<reserved2>9</reserved2>
		<reserved3>nfrmid &lt;public/runtime&gt; Èäåíòèôèêàòîð äîêóìåíòà, äëÿ êîòîðîãî îòîáðàæàþòñÿ òîâàðíûå ñòðîêè.
</reserved3>
		<reserved4/>
		<reserved5/>
		<reserved6>Pixels</reserved6>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18A02PAKD</uniqueid>
		<timestamp>0</timestamp>
		<class>header</class>
		<classloc/>
		<baseclass>header</baseclass>
		<objname>Header1</objname>
		<parent>grdpartpractical.Column1</parent>
		<properties>Alignment = 2
Caption = "Ñóììà ïðîâîäêè"
Name = "Header1"
</properties>
		<protected/>
		<methods>PROCEDURE DblClick
This.Parent.Parent.Sort(This.Parent.Name)
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18A02PAKE</uniqueid>
		<timestamp>920543405</timestamp>
		<class>txtgrd</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>Text1</objname>
		<parent>grdpartpractical.Column1</parent>
		<properties>BorderStyle = 0
ControlSource = "FrmPrBookView.PBookSum"
Margin = 0
ForeColor = 0,0,0
BackColor = 255,255,255
Name = "Text1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18A02PAKF</uniqueid>
		<timestamp>0</timestamp>
		<class>header</class>
		<classloc/>
		<baseclass>header</baseclass>
		<objname>Header1</objname>
		<parent>grdpartpractical.Column2</parent>
		<properties>Alignment = 2
Caption = "Äåáåò"
Name = "Header1"
</properties>
		<protected/>
		<methods>PROCEDURE DblClick
This.Parent.Parent.Sort(This.Parent.Name)
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18A02PAKN</uniqueid>
		<timestamp>920543405</timestamp>
		<class>txtgrd</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>Text1</objname>
		<parent>grdpartpractical.Column2</parent>
		<properties>BorderStyle = 0
ControlSource = "FrmPrBookView.Debet"
Margin = 0
ForeColor = 0,0,0
BackColor = 255,255,255
Name = "Text1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18A02PAKO</uniqueid>
		<timestamp>0</timestamp>
		<class>header</class>
		<classloc/>
		<baseclass>header</baseclass>
		<objname>Header1</objname>
		<parent>grdpartpractical.Column3</parent>
		<properties>Alignment = 2
Caption = "Êðåäèò"
Name = "Header1"
</properties>
		<protected/>
		<methods>PROCEDURE DblClick
This.Parent.Parent.Sort(This.Parent.Name)
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18A02PAKP</uniqueid>
		<timestamp>920543405</timestamp>
		<class>txtgrd</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>Text1</objname>
		<parent>grdpartpractical.Column3</parent>
		<properties>BorderStyle = 0
ControlSource = "FrmPrBookView.Credit"
Margin = 0
ForeColor = 0,0,0
Name = "Text1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18A02PAKX</uniqueid>
		<timestamp>920542837</timestamp>
		<class>header</class>
		<classloc/>
		<baseclass>header</baseclass>
		<objname>Header1</objname>
		<parent>grdpartpractical.Column4</parent>
		<properties>Alignment = 2
Caption = "Ïðèìå÷àíèå"
Name = "Header1"
</properties>
		<protected/>
		<methods>PROCEDURE DblClick
This.Parent.Parent.Sort(This.Parent.Name)
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18A02PAKY</uniqueid>
		<timestamp>920543405</timestamp>
		<class>txtgrd</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>Text1</objname>
		<parent>grdpartpractical.Column4</parent>
		<properties>BorderStyle = 0
ControlSource = "FrmPrBookView.PBookNote"
Margin = 0
ForeColor = 0,0,0
BackColor = (iif(this.value=0,'255,0,0,255','255,255'))
Name = "Text1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>COMMENT</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>0</timestamp>
		<class/>
		<classloc/>
		<baseclass/>
		<objname>grdpartpractical</objname>
		<parent/>
		<properties>Arial, 0, 9, 5, 15, 12, 32, 3, 0
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18L1B4NYC</uniqueid>
		<timestamp>924403376</timestamp>
		<class>frmedit</class>
		<classloc>baseform_v1.vcx</classloc>
		<baseclass>form</baseclass>
		<objname>frmprimarydoctypeselect</objname>
		<parent/>
		<properties>Height = 63
Width = 398
DoCreate = .T.
Caption = "Âûáîð òèïà äîêóìåíòà"
Icon = ..\graphic\frmprimarydocselect.ico
Name = "frmprimarydoctypeselect"
cstmsghandler.Name = "cstmsghandler"
cstresizable.Name = "cstresizable"
cstdatawork.Name = "cstdatawork"
</properties>
		<protected/>
		<methods>PROCEDURE _handlecntcancelsaveevent
*-------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: FRMPRIMARYDOCTYPESELECT._HANDLECNTCANCELSAVEEVENT
* Called by.......: &lt;.cmdCancel.Click();.cmdOk.Click()&gt;
* Parameters......: &lt;tcMessage&gt;
* Returns.........: &lt;none&gt;
* Notes...........:
*-------------------------------------------------------
LPARAMETERS tcMessage

WITH This

*16.05.2004 22:19 -&gt;Ñîõðàíèì ðåçóëüòàò âûáîðà òèïà äîêóìåíòà
IF tcMessage == [OK] AND !EMPTY(.cntIdCtlGridFrmType.Value)
	.uRetVal = .cntIdCtlGridFrmType.Value
ELSE
	.uRetVal = .F.
ENDIF
***
.Hide()
*------------------------------------------------------------------------------

ENDWITH
************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************
ENDPROC
PROCEDURE Init
*-------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: FRMPRIMARYDOCTYPESELECT.INIT
* Called by.......: &lt;Sys Event&gt;
* Parameters......: &lt;tnScrFrmID, tuFrmTypeID&gt;
* Returns.........: &lt;none&gt;
* Notes...........:
*-------------------------------------------------------
LPARAMETERS tnScrFrmID, tuFrmTypeID

*16.05.2004 22:12 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	_PARAM
*------------------------------------------------------------------------------

*16.05.2004 22:12 -&gt;Ïåðå÷èòàåì ñïèñîê äîêóìåíòîâ, äîñòóïíûõ äëÿ äîáàâëåíèÿ ñ òåêóùåé ôîðìû
_PARAM = tnScrFrmID
***
REQUERY([lvFrmTypeListByScrFrm])
*------------------------------------------------------------------------------

*16.05.2004 22:13 -&gt;Åñëè ïåðåäàí òèï äîêóìåíòà ïî óìîë÷àíèþ - óñòàíîâèì òèï ïî óìîë÷àíèþ
IF TYPE([tuFrmTypeID])==[N] AND !EMPTY(tuFrmTypeID)
	ThisForm.cntIdCtlGridFrmType.SetValue(tuFrmTypeID)
ELSE
	GO TOP IN lvFrmTypeListByScrFrm
	ThisForm.cntIdCtlGridFrmType.SetValue(lvFrmTypeListByScrFrm.FrmTypeID)
ENDIF	
*------------------------------------------------------------------------------

************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************
ENDPROC
PROCEDURE Load
*-------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: FRMPRIMARYDOCTYPESELECT.LOAD
* Called by.......: &lt;Sys Event&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Çàãðóçêà äàííûõ.
*-------------------------------------------------------

*16.05.2004 22:10 -&gt;Âûïîëíèì ìåòîä ðîäèòåëüñêîãî êëàññà
DODEFAULT()
*------------------------------------------------------------------------------

*16.05.2004 22:10 -&gt;Îòêðîåì ñïèñîê òèïîâ äîêóìåíòîâ áåç äàííûõ
USE Basis!lvFrmTypeListByScrFrm IN 0 NODATA
*------------------------------------------------------------------------------

************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************


ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1>Class</reserved1>
		<reserved2>3</reserved2>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6>Pixels</reserved6>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18L1BE4FO</uniqueid>
		<timestamp>924403376</timestamp>
		<class>cntcancelsavehandled</class>
		<classloc>baseform_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>Cntcancelsavehandled1</objname>
		<parent>frmprimarydoctypeselect</parent>
		<properties>Top = 33
Left = 188
Name = "Cntcancelsavehandled1"
cmdCancel.Name = "cmdCancel"
cmdOk.Name = "cmdOk"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18L1BJ9IB</uniqueid>
		<timestamp>924403376</timestamp>
		<class>cntidctlgrid</class>
		<classloc>comidctl_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>cntIdCtlGridFrmType</objname>
		<parent>frmprimarydoctypeselect</parent>
		<properties>Top = 5
Left = 5
Width = 387
Height = 23
_rsaliasname = lvFrmTypeListByScrFrm
_rsfieldnameid = FrmTypeID
_rsfieldnametext = FrmTypeNM 
Name = "cntIdCtlGridFrmType"
txtText.Height = 23
txtText.Left = 0
txtText.Top = 0
txtText.Width = 341
txtText.Name = "txtText"
cmdShow.Top = 0
cmdShow.Left = 341
cmdShow.Name = "cmdShow"
cmdClear.Top = 0
cmdClear.Left = 364
cmdClear.Name = "cmdClear"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>COMMENT</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>0</timestamp>
		<class/>
		<classloc/>
		<baseclass/>
		<objname>frmprimarydoctypeselect</objname>
		<parent/>
		<properties>Arial, 0, 9, 5, 15, 12, 32, 3, 0
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1Y70YNHAA</uniqueid>
		<timestamp>925600568</timestamp>
		<class>grd</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>grid</baseclass>
		<objname>grdfrmaction</objname>
		<parent/>
		<properties>ColumnCount = 5
Height = 200
Panel = 1
RecordSource = "lvFrmActionView"
RowHeight = 18
ScrollBars = 2
Width = 483
nreccount = 0
Name = "grdfrmaction"
Column1.FontBold = .F.
Column1.FontSize = 9
Column1.ControlSource = "lvFrmActionView.Action"
Column1.Width = 67
Column1.Name = "Column1"
Column2.FontBold = .F.
Column2.FontSize = 9
Column2.ControlSource = "lvFrmActionView.FrmDateAcc"
Column2.Width = 65
Column2.Name = "Column2"
Column3.FontBold = .F.
Column3.FontSize = 9
Column3.ControlSource = "ICASE(ALLTRIM(lvFrmActionView.FrmActionOperationNM)==[ADD],[Àêöåïòîâàíèå],ALLTRIM(lvFrmActionView.FrmActionOperationNM)==[REMOVE],[Ñíÿòèå ñ àêöåïòà],[???])"
Column3.Width = 68
Column3.Name = "Column3"
Column4.FontBold = .F.
Column4.FontSize = 9
Column4.ControlSource = "lvFrmActionView.State"
Column4.Width = 74
Column4.Name = "Column4"
Column5.ControlSource = "lvFrmActionView.UserNM"
Column5.Name = "Column5"
</properties>
		<protected/>
		<methods>PROCEDURE _rsrequery
*-------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: GRDPARTFRM._RSREQUERY
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;tnFrmID&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Ïåðå÷èòûâàíèå ñîäåðæèìîãî äîêóìåíòà
*-------------------------------------------------------
LPARAMETERS	tnFrmID

*21.04.2004 14:37 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	_PARAM
*------------------------------------------------------------------------------

WITH THIS

*21.04.2004 14:33 -&gt;Ñîõðàíèì äàííûå î RecordSource
.SourceKeep()
*------------------------------------------------------------------------------

*21.04.2004 14:33 -&gt;Îòêëþ÷èì RecordSource
.SourceReset()
*------------------------------------------------------------------------------
_PARAM = tnFrmID
=REQUERY('lvFrmActionView')

*------------------------------------------------------------------------------

*05.05.2004 01:36 -&gt;Âîññòàíàâëèâàåì Alias
.SourceRecall()
*------------------------------------------------------------------------------

ENDWITH
************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************

ENDPROC
PROCEDURE Init
DODEFAULT()

*!*	This.SetAll( ;
*!*		[DynamicBackColor], ;
*!*		[ICASE(lvFrmActionView.FrmActionOperationState=2,RGB(255,255,0),] + ;
*!*			  [lvFrmActionView.FrmActionOperationState=3,RGB(0,255,0),] + ;
*!*			  [INLIST(lvFrmActionView.FrmActionOperationState,4,5),RGB(255,0,0))], ;
*!*		[Column])
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1>Class</reserved1>
		<reserved2>11</reserved2>
		<reserved3>nreccount êîëè÷åñòâî ñòðîê â èñòî÷íèêå äàííûõ
</reserved3>
		<reserved4/>
		<reserved5/>
		<reserved6>Pixels</reserved6>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1Y90N2HQS</uniqueid>
		<timestamp>925583689</timestamp>
		<class>header</class>
		<classloc/>
		<baseclass>header</baseclass>
		<objname>Header1</objname>
		<parent>grdfrmaction.Column1</parent>
		<properties>FontBold = .F.
FontSize = 9
Caption = "Äåéñòâèå"
Name = "Header1"
</properties>
		<protected/>
		<methods>PROCEDURE DblClick
This.Parent.Parent.Sort(This.Parent.Name)
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1Y90N578E</uniqueid>
		<timestamp>0</timestamp>
		<class>txtgrd</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>Txtgrd1</objname>
		<parent>grdfrmaction.Column1</parent>
		<properties>FontBold = .F.
FontSize = 9
ControlSource = "lvFrmActionView.Action"
Left = 37
Top = 23
Name = "Txtgrd1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1Y90N2HQU</uniqueid>
		<timestamp>925583689</timestamp>
		<class>header</class>
		<classloc/>
		<baseclass>header</baseclass>
		<objname>Header1</objname>
		<parent>grdfrmaction.Column2</parent>
		<properties>FontBold = .F.
FontSize = 9
Caption = "Äàòà"
Name = "Header1"
</properties>
		<protected/>
		<methods>PROCEDURE DblClick
This.Parent.Parent.Sort(This.Parent.Name)
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1Y90N578G</uniqueid>
		<timestamp>0</timestamp>
		<class>txtgrd</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>Txtgrd1</objname>
		<parent>grdfrmaction.Column2</parent>
		<properties>FontBold = .F.
FontSize = 9
Left = 33
Top = 35
Name = "Txtgrd1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1Y90N2HQW</uniqueid>
		<timestamp>925583689</timestamp>
		<class>header</class>
		<classloc/>
		<baseclass>header</baseclass>
		<objname>Header1</objname>
		<parent>grdfrmaction.Column3</parent>
		<properties>FontBold = .F.
FontSize = 9
Caption = "Îïåðàöèÿ"
Name = "Header1"
</properties>
		<protected/>
		<methods>PROCEDURE DblClick
This.Parent.Parent.Sort(This.Parent.Name)
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1Y90N578I</uniqueid>
		<timestamp>0</timestamp>
		<class>txtgrd</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>Txtgrd1</objname>
		<parent>grdfrmaction.Column3</parent>
		<properties>FontBold = .F.
FontSize = 9
Left = 29
Top = 35
Name = "Txtgrd1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1YL0QM1I0</uniqueid>
		<timestamp>925600568</timestamp>
		<class>header</class>
		<classloc/>
		<baseclass>header</baseclass>
		<objname>Header1</objname>
		<parent>grdfrmaction.Column4</parent>
		<properties>FontBold = .F.
FontSize = 9
Caption = "Ñîñòîÿíèå"
Name = "Header1"
</properties>
		<protected/>
		<methods>PROCEDURE DblClick
This.Parent.Parent.Sort(This.Parent.Name)
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1YL0W0SH0</uniqueid>
		<timestamp>0</timestamp>
		<class>txtgrd</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>Txtgrd1</objname>
		<parent>grdfrmaction.Column4</parent>
		<properties>FontBold = .F.
FontSize = 9
Left = 22
Top = 23
Name = "Txtgrd1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_21S104NXS</uniqueid>
		<timestamp>0</timestamp>
		<class>header</class>
		<classloc/>
		<baseclass>header</baseclass>
		<objname>Header1</objname>
		<parent>grdfrmaction.Column5</parent>
		<properties>Caption = "Ïîëüçîâàòåëü"
Name = "Header1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_21S104NXT</uniqueid>
		<timestamp>0</timestamp>
		<class>txtgrd</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>Text1</objname>
		<parent>grdfrmaction.Column5</parent>
		<properties>BorderStyle = 0
ControlSource = "lvFrmActionView.UserNM"
Margin = 0
ForeColor = 0,0,0
BackColor = 255,255,255
Name = "Text1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>COMMENT</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>0</timestamp>
		<class/>
		<classloc/>
		<baseclass/>
		<objname>grdfrmaction</objname>
		<parent/>
		<properties>Arial, 0, 9, 5, 15, 12, 32, 3, 0
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_26M0USY41</uniqueid>
		<timestamp>926067811</timestamp>
		<class>frmidctltree</class>
		<classloc>comidctl_v1.vcx</classloc>
		<baseclass>form</baseclass>
		<objname>frmidctltreetvr</objname>
		<parent/>
		<properties>Height = 518
Width = 620
DoCreate = .T.
Caption = "Âûáîð òîâàðà"
Name = "frmidctltreetvr"
cstmsghandler.Name = "cstmsghandler"
cstresizable.Name = "cstresizable"
cstdatawork.Name = "cstdatawork"
oleimagelist.Top = 329
oleimagelist.Left = 143
oleimagelist.Height = 100
oleimagelist.Width = 100
oleimagelist.Name = "oleimagelist"
oletreeview.Top = 0
oletreeview.Left = 0
oletreeview.Height = 485
oletreeview.Width = 618
oletreeview._parentonly = .F.
oletreeview._rsaliasname = TovarList 
oletreeview._rsfieldnameid = TvrId
oletreeview._rsfieldnameimageindex = BmpId
oletreeview._rsfieldnameimageselectedindex = SelBmpId
oletreeview._rsfieldnameparentflag = TvrTypeIsCnt
oletreeview._rsfieldnameparentid = TvrParId
oletreeview._rsfieldnametext = TvrNm
oletreeview._imgalias = lvtvrsetbmps
oletreeview._imgfieldnamefilename = BmpFileNM
oletreeview._imgfieldnameindex = BmpId
oletreeview.Name = "oletreeview"
cntcancelsavehandled.cmdCancel.Name = "cmdCancel"
cntcancelsavehandled.cmdOk.Name = "cmdOk"
cntcancelsavehandled.Top = 490
cntcancelsavehandled.Left = 411
cntcancelsavehandled.Name = "cntcancelsavehandled"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1>Class</reserved1>
		<reserved2>1</reserved2>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6>Pixels</reserved6>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>COMMENT</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>0</timestamp>
		<class/>
		<classloc/>
		<baseclass/>
		<objname>frmidctltreetvr</objname>
		<parent/>
		<properties>Arial, 0, 9, 5, 15, 12, 32, 3, 0
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1E316GU5I</uniqueid>
		<timestamp>927555387</timestamp>
		<class>grd</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>grid</baseclass>
		<objname>grdpartfrm</objname>
		<parent/>
		<properties>ColumnCount = 4
Height = 215
RecordSource = "FrmPartFrmView"
SplitBar = .T.
Width = 340
nfrmid = 0
_activerowhighlight = .T.
_handledstandartmsglist = FIRST;PREV;NEXT;LAST;;ADD;EDIT;INFO;DELE;;PRNDOC
_handledstandartmsgpromptlist = ;;;;;Äîáàâèòü;Ðåäàêòèðîâàòü;Ïðîñìîòð;Óäàëèòü;\-;Ïîäãîòîâèòü äîêóìåíò
Name = "grdpartfrm"
Column1.ControlSource = "FrmPartFrmView.CntFrmNM"
Column1.Width = 155
Column1.Name = "Column1"
Column2.ControlSource = "FrmPartFrmView.CntFrmSum"
Column2.Name = "Column2"
Column3.ControlSource = "FrmPartFrmView.cntFrmVAT"
Column3.Name = "Column3"
Column4.ControlSource = "FrmPartFrmView.FrmNote"
Column4.Name = "Column4"
</properties>
		<protected/>
		<methods>PROCEDURE _add
*-------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: grdPartFrm._Add
* Called by.......: &lt;ToolBar or Context Menu Action -&gt; .HandleMsg() -&gt; .Add()&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Äîáàâëåíèå ñîäåðæàíèÿ ñóììîâîãî äîêóìåíòà
*-------------------------------------------------------

*15.07.2004 02:57 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	luResultAdding
*------------------------------------------------------------------------------

*15.07.2004 02:57 -&gt;Âûïîëíÿåì îïåðàöèþ äîáàâëåíèÿ
DO CASE
CASE PrimaryDocView.FrmTypeId = 23
luResultAdding = oMgrPD.Operate([PARTFRMJAST],[ADD],This.nFrmID)
OTHERWISE
luResultAdding = oMgrPD.Operate([PARTFRM],[ADD],This.nFrmID)
ENDCASE
*------------------------------------------------------------------------------

*24.09.2004 16:17 -&gt;Åñëè çàïèñü äîáàâëåíà
IF TYPE([luResultAdding])==[N] AND !EMPTY(luResultAdding)

	*24.09.2004 16:15 -&gt;Ïåðå÷èòûâàåì Alias äëÿ ïðîñìîòðà
	This._RSRequeryOne(luResultAdding)
	*------------------------------------------------------------------------------
	
ENDIF
*------------------------------------------------------------------------------

****************************************************************************************************************
***********************************************  END OF METHOD *************************************************
****************************************************************************************************************
ENDPROC
PROCEDURE _dele
*-------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: grdPartFrm._Dele
* Called by.......: &lt;ToolBar or Context Menu Action -&gt; .HandleMsg() -&gt; .Dele()&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Óäàëåíèå ñîäåðæàíèÿ ñóììîâîãî äîêóìåíòà
*-------------------------------------------------------

*15.07.2004 02:57 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	lnFrmPartFrmID,lnFrmID , ;
		luDeleRes
***
lnFrmPartFrmID = FrmPartFrmView.PartFrmID
lnFrmID = FrmPartFrmView.CntFrmID
*------------------------------------------------------------------------------

*15.07.2004 02:57 -&gt;Âûïîëíÿåì îïåðàöèþ óäàëåíèÿ
DO CASE
CASE PrimaryDocView.FrmTypeId = 23
luDeleRes = oMgrPD.Operate([PARTFRMJAST],[DELE],lnFrmPartFrmID,lnFrmID)
OTHERWISE
luDeleRes = oMgrPD.Operate([PARTFRM],[DELE],lnFrmPartFrmID)
ENDCASE
*------------------------------------------------------------------------------

*24.09.2004 16:17 -&gt;Åñëè çàïèñü óäàëåíà
IF TYPE([luDeleRes])==[L] AND luDeleRes

	*24.09.2004 16:15 -&gt;Ïåðå÷èòûâàåì Alias äëÿ ïðîñìîòðà
	This._RSRequeryOne(lnFrmPartFrmID)
	*------------------------------------------------------------------------------

ENDIF
*------------------------------------------------------------------------------

****************************************************************************************************************
***********************************************  END OF METHOD *************************************************
****************************************************************************************************************
ENDPROC
PROCEDURE _edit
*-------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: grdPartFrm._Edit
* Called by.......: &lt;ToolBar or Context Menu Action -&gt; .HandleMsg() -&gt; .Edit()&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Ðåäàêòèðîâàíèå ñîäåðæàíèÿ ñóììîâîãî äîêóìåíòà
*-------------------------------------------------------

*19.10.2004 13:44 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	lnFrmPartFrmID,lnFrmID , ;
		luEditRes
***
lnFrmPartFrmID = FrmPartFrmView.PartFrmID
lnFrmID = FrmPartFrmView.CntFrmID
*------------------------------------------------------------------------------

*15.07.2004 02:57 -&gt;Âûïîëíÿåì îïåðàöèþ ðåàäêòèðîâàíèÿ
DO CASE
CASE PrimaryDocView.FrmTypeId = 23
luEditRes = oMgrPD.Operate([PARTFRMJAST],[EDIT],lnFrmPartFrmID,lnFrmID)
OTHERWISE
luEditRes = oMgrPD.Operate([PARTFRM],[EDIT],lnFrmPartFrmID)
ENDCASE
*------------------------------------------------------------------------------

*19.10.2004 13:45 -&gt;Åñëè çàïèñü îòðåäàêòèðîâàëè
IF TYPE([luEditRes])==[L] AND luEditRes

	*24.09.2004 16:15 -&gt;Ïåðå÷èòûâàåì Alias äëÿ ïðîñìîòðà
	This._RSRequeryOne(lnFrmPartFrmID)
	*------------------------------------------------------------------------------
	
ENDIF
*------------------------------------------------------------------------------

****************************************************************************************************************
***********************************************  END OF METHOD *************************************************
****************************************************************************************************************
ENDPROC
PROCEDURE _gethandledstandartmsglist
*-------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: GRPPARTFRM._GETHANDLEDSTANDARTMSGLIST
* Called by.......: &lt;.RefreshHandledStandartMsgList();.RightClick()&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;lcHandledStandartMsgList&gt;
* Notes...........: Çàïðåòèì âñå ñòàíäàðòíûå îïåðàöèè, åñëè òåêóùèé äîêóìåíò íå îïðåäåëåí
*-------------------------------------------------------

*15.09.2005 15:23 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	lnFrmID, ;
		lcResult
***
lnFrmID = This.nFrmID
*------------------------------------------------------------------------------

*15.09.2005 15:24 -&gt; Îïðåäåëèì ðàçðåø¸ííûå îïåðàöèè
IF lnFrmID = 0

	lcResult = []

ELSE
	
	*15.09.2005 15:27 -&gt; Ïîëó÷èì èíôîðìàöèþ î ñòàòóñå äîêóìåíòà
	LOCAL _PARAM
	_PARAM = lnFrmID
	***
	USE IN IIF(USED([lvFrmStatusInfoByFrmID]),[lvFrmStatusInfoByFrmID],0)
	USE lvFrmStatusInfoByFrmID IN 0
	*------------------------------------------------------------------------------

	*15.09.2005 15:28 -&gt; Ïðîâåðèì ó÷àñòâóåò ëè äîêóìåíò â ó÷åòå
	IF	!lvFrmStatusInfoByFrmID.FrmStatIsInvAcc AND ;
		!lvFrmStatusInfoByFrmID.FrmStatIsCostAcc

		*27.03.2006 10:50 -&gt; Ðàçðåøèì âñå îïåðàöèè
		lcResult = DODEFAULT()
		*------------------------------------------------------------------------------

	ELSE

		*27.03.2006 10:54 -&gt; Èñêëþ÷èì óäàëåíèå/äîáàâëåíèå/ðåäàêòèðîâàíèå èç ñïèñêà âîçìîæíûõ îïåðàöèé
		lcResult = [;] + DODEFAULT() + [;]
		lcResult = STRTRAN(lcResult,[;ADD;],[;])
		lcResult = STRTRAN(lcResult,[;DELE;],[;])
		lcResult = STRTRAN(lcResult,[;EDIT;],[;])
		*------------------------------------------------------------------------------

		*27.03.2006 10:58 -&gt; Óäàëÿåì ñëåâà è ñïðàâà ; äîáàâëåííûå ðàíåå
		IF !(lcResult == [;])
			lcResult = SUBSTR(lcResult,2,LEN(lcResult)-2)
		ELSE
			lcResult = []
		ENDIF	
		*------------------------------------------------------------------------------

	ENDIF
	*------------------------------------------------------------------------------

ENDIF
*------------------------------------------------------------------------------

*15.09.2005 15:23 -&gt; Âîçâðàùàåì ðåçóëüòàò
RETURN lcResult
*------------------------------------------------------------------------------

************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************
ENDPROC
PROCEDURE _info
*-------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: GRDPARTFRM._ADD
* Called by.......: &lt;ToolBar or Context Menu Action -&gt; .HandleMsg() -&gt; .Info()&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Ïðîñìîòð ñîäåðæàíèÿ ñóììîâîãî äîêóìåíòà
*-------------------------------------------------------

LOCAL	lnFrmPartFrmID , ;
		luEditRes
***
lnFrmPartFrmID = FrmPartFrmView.PartFrmID
*15.07.2004 02:57 -&gt;Âûïîëíÿåì îïåðàöèþ ïðîñìîòðà
DO CASE
CASE PrimaryDocView.FrmTypeId = 23
oMgrPD.Operate([PARTFRMJAST],[INFO],lnFrmPartFrmID)
OTHERWISE
oMgrPD.Operate([PARTFRM],[INFO],lnFrmPartFrmID)
ENDCASE
*------------------------------------------------------------------------------

****************************************************************************************************************
***********************************************  END OF METHOD *************************************************
****************************************************************************************************************
ENDPROC
PROCEDURE _rsrequery
*-------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: GRDPARTFRM._RSREQUERY
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;tnFrmID&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Ïåðå÷èòûâàíèå ñîäåðæèìîãî äîêóìåíòà
*-------------------------------------------------------
LPARAMETERS	tnFrmID

*21.04.2004 14:37 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	lcUniqueName, ;
		lcUniqueFilePath
*------------------------------------------------------------------------------

WITH THIS

*21.04.2004 14:33 -&gt;Ñîõðàíèì äàííûå î RecordSource
.SourceKeep()
*------------------------------------------------------------------------------

*21.04.2004 14:33 -&gt;Îòêëþ÷èì RecordSource
.SourceReset()
*------------------------------------------------------------------------------

*21.04.2004 14:34 -&gt;Çàêðîåì Alias è óäàëèì âðåìåííóþ òàáëèöó
lcUniqueFilePath = DBF([FrmPartFrmView])
***
USE IN FrmPartFrmView
***
IF FILE(lcUniqueFilePath)
	ERASE (lcUniqueFilePath)
ENDIF
*------------------------------------------------------------------------------

*05.05.2004 01:35 -&gt;Ïåðå÷èòàåì Alias
IF TYPE([tnFrmID])==[N] AND !EMPTY(tnFrmID)
	
	*02.12.2004 16:48 -&gt;Ñîõðàíèì èäåíòèôèêàòîð äîêóìåíòà â ñâîéñòâå Grid-à
	.nFrmID = tnFrmID
	*------------------------------------------------------------------------------

	*21.04.2004 14:05 -&gt;Âûïîëíèì õðàíèìóþ ïðîöåäóðó äëÿ ïîëó÷åíèÿ äàííûõ
	lcUniqueName = spFrmPartFrmView([BYFRMID],tnFrmID)
	*------------------------------------------------------------------------------

ELSE
	
	*02.12.2004 16:48 -&gt;Ñîõðàíèì èäåíòèôèêàòîð äîêóìåíòà â ñâîéñòâå Grid-à
	.nFrmID = 0
	*------------------------------------------------------------------------------

	*21.04.2004 14:05 -&gt;Âûïîëíèì õðàíèìóþ ïðîöåäóðó äëÿ ïîëó÷åíèÿ òàáëèöû
	lcUniqueName = spFrmPartFrmView([NODATA])
	*------------------------------------------------------------------------------
	
ENDIF	
*------------------------------------------------------------------------------

*21.04.2004 14:08 -&gt;Òåïåðü îòêðîåì äàííûé Alias
USE (lcUniqueName) IN 0 ALIAS FrmPartFrmView
CURSORSETPROP([BUFFERING],3,[FrmPartFrmView])
*------------------------------------------------------------------------------

*05.05.2004 01:36 -&gt;Âîññòàíàâëèâàåì Alias
.SourceRecall()
*------------------------------------------------------------------------------

ENDWITH
************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************
ENDPROC
PROCEDURE _rsrequeryone
*------------------------------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: grdPartFrm._RSRequeryOne
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;tnFrmPartFrmID&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Ïåðå÷èòûâàíèå îäíîé çàïèñè (ñóììîâîé ïîçèöèè äîêóìåíòà)
*------------------------------------------------------------------------------
LPARAMETERS tnFrmPartFrmID

*22.12.2004 15:10 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	lcOldAlias, ;
		lcUniqueFileName, ;
		laReplaceArray[1]
***
lcOldAlias = ALIAS()
*------------------------------------------------------------------------------

*12.05.2004 03:27 -&gt;Âûïîëíÿåì çàïðîñ ñòðîêè
lcUniqueFileName = spFrmPartFrmView([BYFRMPARTFRMID],This.nFrmID,tnFrmPartFrmID)
*------------------------------------------------------------------------------

*12.05.2004 03:35 -&gt;Îòêëþ÷àåì èñòî÷íèê äàííûõ
This.SourceKeep()
This.SourceReset()
*------------------------------------------------------------------------------

*22.12.2004 15:05 -&gt;Äîáàâëÿåì/îáíîâëÿåì/óäàëÿåì çàïèñü
USE (lcUniqueFileName) IN 0 ALIAS FrmPartFrmViewReq
SELECT FrmPartFrmViewReq
***
IF RECCOUNT([FrmPartFrmViewReq]) == 1
	*22.12.2004 15:10 -&gt;Îáíîâëÿåì çàïèñü
	SCATTER TO laReplaceArray
	SELECT FrmPartFrmView
	LOCATE FOR FrmPartFrmView.PartFrmID = tnFrmPartFrmID
	IF !FOUND()
		APPEND BLANK IN FrmPartFrmView
	ENDIF
	GATHER FROM laReplaceArray
*	TABLEUPDATE(.T.)
	*------------------------------------------------------------------------------
ELSE
	SELECT FrmPartFrmView
	LOCATE FOR FrmPartFrmView.PartFrmID = tnFrmPartFrmID
	IF FOUND()
		*22.12.2004 15:11 -&gt;Óäàëÿåì çàïèñü
		DELETE IN FrmPartFrmView
*		TABLEUPDATE(.T.)
		*------------------------------------------------------------------------------
	ENDIF
ENDIF
*------------------------------------------------------------------------------

TABLEUPDATE(.T.)


*12.05.2004 03:37 -&gt;Âîññòàíàâëèâàåì èñòî÷íèê äàííûõ
This.SourceRecall()
*------------------------------------------------------------------------------

*22.12.2004 15:09 -&gt;Óäàëÿåì ðåçóëüòàò çàïðîñà
USE IN FrmPartFrmViewReq
ERASE ([tmp\]+lcUniqueFileName+[.dbf])
*------------------------------------------------------------------------------

*22.12.2004 15:35 -&gt;Âîññòàíîâèì òåêóùèé Alias
IF !EMPTY(lcOldAlias) AND USED(lcOldAlias) AND lcOldAlias#ALIAS()
	SELECT(lcOldAlias)
ENDIF
*------------------------------------------------------------------------------

*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1>Class</reserved1>
		<reserved2>9</reserved2>
		<reserved3>nfrmid Èäåíòèôèêàòîð òåêóùåãî äîêóìåíòà
</reserved3>
		<reserved4/>
		<reserved5/>
		<reserved6>Pixels</reserved6>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1E316JGSC</uniqueid>
		<timestamp>0</timestamp>
		<class>header</class>
		<classloc/>
		<baseclass>header</baseclass>
		<objname>Header1</objname>
		<parent>grdpartfrm.Column1</parent>
		<properties>Alignment = 2
Caption = "Äîêóìåíò"
Name = "Header1"
</properties>
		<protected/>
		<methods>PROCEDURE DblClick
This.Parent.Parent.Sort(This.Parent.Name)
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1E316JGSD</uniqueid>
		<timestamp>0</timestamp>
		<class>txtgrd</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>Text1</objname>
		<parent>grdpartfrm.Column1</parent>
		<properties>BorderStyle = 0
Margin = 0
ForeColor = 0,0,0
BackColor = 255,255,255
Name = "Text1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1E316JGSF</uniqueid>
		<timestamp>0</timestamp>
		<class>header</class>
		<classloc/>
		<baseclass>header</baseclass>
		<objname>Header1</objname>
		<parent>grdpartfrm.Column2</parent>
		<properties>Alignment = 2
Caption = "Ñóììà"
Name = "Header1"
</properties>
		<protected/>
		<methods>PROCEDURE DblClick
This.Parent.Parent.Sort(This.Parent.Name)
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1E316JGSG</uniqueid>
		<timestamp>0</timestamp>
		<class>txtgrd</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>Text1</objname>
		<parent>grdpartfrm.Column2</parent>
		<properties>BorderStyle = 0
Margin = 0
ForeColor = 0,0,0
BackColor = 255,255,255
Name = "Text1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1E316JGSH</uniqueid>
		<timestamp>0</timestamp>
		<class>header</class>
		<classloc/>
		<baseclass>header</baseclass>
		<objname>Header1</objname>
		<parent>grdpartfrm.Column3</parent>
		<properties>Alignment = 2
Caption = "ÍÄÑ"
Name = "Header1"
</properties>
		<protected/>
		<methods>PROCEDURE DblClick
This.Parent.Parent.Sort(This.Parent.Name)
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1E316JGSI</uniqueid>
		<timestamp>0</timestamp>
		<class>txtgrd</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>Text1</objname>
		<parent>grdpartfrm.Column3</parent>
		<properties>BorderStyle = 0
Margin = 0
ForeColor = 0,0,0
BackColor = 255,255,255
Name = "Text1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_24L1DTKAO</uniqueid>
		<timestamp>921156053</timestamp>
		<class>header</class>
		<classloc/>
		<baseclass>header</baseclass>
		<objname>Header1</objname>
		<parent>grdpartfrm.Column4</parent>
		<properties>Caption = "Ïðèìå÷àíèå"
Name = "Header1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_24L1DTKAP</uniqueid>
		<timestamp>921156355</timestamp>
		<class>txtgrd</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>Text1</objname>
		<parent>grdpartfrm.Column4</parent>
		<properties>BorderStyle = 0
ControlSource = "FrmPartFrmView.FrmNote"
Margin = 0
ForeColor = 0,0,0
BackColor = 255,255,255
Name = "Text1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>COMMENT</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>0</timestamp>
		<class/>
		<classloc/>
		<baseclass/>
		<objname>grdpartfrm</objname>
		<parent/>
		<properties>Arial, 0, 9, 5, 15, 12, 32, 3, 0
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1LR0RDLY7</uniqueid>
		<timestamp>927556140</timestamp>
		<class>cnt</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>cntjrnusage</objname>
		<parent/>
		<properties>Width = 413
Height = 77
Name = "cntjrnusage"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1>Class</reserved1>
		<reserved2>9</reserved2>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6>Pixels</reserved6>
		<reserved7>Âðåìÿ èñïîëüçîâàíèÿ ðåñóðñîâ</reserved7>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1LR0RE56X</uniqueid>
		<timestamp>0</timestamp>
		<class>shp</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>shape</baseclass>
		<objname>shpJrnUsage</objname>
		<parent>cntjrnusage</parent>
		<properties>Top = 0
Left = 0
Height = 77
Width = 413
SpecialEffect = 0
ZOrderSet = 0
Name = "shpJrnUsage"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_25O11K286</uniqueid>
		<timestamp>0</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblFrom</objname>
		<parent>cntjrnusage</parent>
		<properties>FontBold = .T.
Caption = "ñ"
Left = 5
Top = 30
TabIndex = 4
ZOrderSet = 1
Name = "lblFrom"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_25O11K287</uniqueid>
		<timestamp>927442714</timestamp>
		<class>comtxtctlcalendar</class>
		<classloc>comtxtctl_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>cntTxtCtlCalendarStartDate</objname>
		<parent>cntjrnusage</parent>
		<properties>Top = 27
Left = 22
Width = 180
Height = 23
Enabled = .F.
TabIndex = 5
ZOrderSet = 2
Name = "cntTxtCtlCalendarStartDate"
txtText.ControlSource = "lvJrnUsageEdit.UseStart"
txtText.Height = 23
txtText.Left = 0
txtText.Top = 0
txtText.Width = 156
txtText._highlightobject = .Parent.Parent.lblTimeUsage;.Parent.Parent.lblFrom
txtText.Name = "txtText"
cmdShow.Top = 0
cmdShow.Left = 156
cmdShow.Name = "cmdShow"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_25O11K28M</uniqueid>
		<timestamp>0</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblTo</objname>
		<parent>cntjrnusage</parent>
		<properties>FontBold = .T.
Caption = "ïî"
Left = 210
Top = 30
TabIndex = 6
ZOrderSet = 3
Name = "lblTo"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_25O11K28O</uniqueid>
		<timestamp>0</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblTimeUsage</objname>
		<parent>cntjrnusage</parent>
		<properties>FontBold = .T.
Caption = "Âðåìÿ èñïîëüçîâàíèÿ:"
Height = 17
Left = 5
Top = 5
Width = 136
TabIndex = 3
ZOrderSet = 4
Name = "lblTimeUsage"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_25O11K28N</uniqueid>
		<timestamp>927556140</timestamp>
		<class>comtxtctlcalendar</class>
		<classloc>comtxtctl_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>cntTxtCtlCalendarEndDate</objname>
		<parent>cntjrnusage</parent>
		<properties>Top = 27
Left = 227
Width = 180
Enabled = .F.
TabIndex = 7
ZOrderSet = 4
Name = "cntTxtCtlCalendarEndDate"
txtText.ControlSource = "lvJrnUsageEdit.UseEnd"
txtText.Width = 156
txtText._highlightobject = .Parent.Parent.lblTimeUsage;.Parent.Parent.lblTo
txtText.Name = "txtText"
cmdShow.Left = 156
cmdShow.Name = "cmdShow"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_25O11K28Q</uniqueid>
		<timestamp>927442714</timestamp>
		<class>chk</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>checkbox</baseclass>
		<objname>chkTypeUsage</objname>
		<parent>cntjrnusage</parent>
		<properties>Top = 55
Left = 150
FontBold = .T.
Alignment = 0
Caption = "Ïëàíîâîå"
ControlSource = "lvJrnUsageEdit.UsePlan"
Enabled = .F.
TabIndex = 9
ZOrderSet = 8
_highlightobject = .Parent.lblTypeUsage
textchecked = Ïëàíîâîå
textunchecked = Ôàêòè÷åñêîå
Name = "chkTypeUsage"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_25O11K28P</uniqueid>
		<timestamp>0</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblTypeUsage</objname>
		<parent>cntjrnusage</parent>
		<properties>FontBold = .T.
Caption = "Èñïîëüçîâàíèå:"
Left = 5
Top = 55
TabIndex = 8
ZOrderSet = 7
Name = "lblTypeUsage"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>COMMENT</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>0</timestamp>
		<class/>
		<classloc/>
		<baseclass/>
		<objname>cntjrnusage</objname>
		<parent/>
		<properties>Arial, 0, 9, 5, 15, 12, 32, 3, 0
Arial, 1, 9, 6, 15, 12, 32, 3, 0
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_27R0KHJUL</uniqueid>
		<timestamp>928861240</timestamp>
		<class>frmproxcard</class>
		<classloc>pos_v1.vcx</classloc>
		<baseclass>form</baseclass>
		<objname>frmproxinstrcard</objname>
		<parent/>
		<properties>DoCreate = .T.
Name = "frmproxinstrcard"
cstmsghandler.Name = "cstmsghandler"
cstresizable.Name = "cstresizable"
cstdatawork.Name = "cstdatawork"
grdTvrInSet.Column1.Header1.Name = "Header1"
grdTvrInSet.Column1.Txtgrd1.Name = "Txtgrd1"
grdTvrInSet.Column1.Name = "Column1"
grdTvrInSet.Column2.Header1.Name = "Header1"
grdTvrInSet.Column2.Text1.Name = "Text1"
grdTvrInSet.Column2.Name = "Column2"
grdTvrInSet.Name = "grdTvrInSet"
lblCaption.Name = "lblCaption"
ImgCaption.Name = "ImgCaption"
Cmd1.Name = "Cmd1"
Olecommprox1.Top = 240
Olecommprox1.Left = 12
Olecommprox1.Height = 48
Olecommprox1.Width = 58
Olecommprox1.Name = "Olecommprox1"
Lbl1.Name = "Lbl1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1>Class</reserved1>
		<reserved2>1</reserved2>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6>Pixels</reserved6>
		<reserved7>Ïðîãðàììèðîâàíèå äîñòóïà íà ïîäüåìíèê äëÿ èíñòðóêòîðîâ</reserved7>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>COMMENT</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>0</timestamp>
		<class/>
		<classloc/>
		<baseclass/>
		<objname>frmproxinstrcard</objname>
		<parent/>
		<properties>Arial, 0, 9, 5, 15, 12, 32, 3, 0
Arial, 0, 18, 11, 28, 21, 64, 6, 1
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1LO0Z2G2I</uniqueid>
		<timestamp>929787075</timestamp>
		<class>cnt</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>cnttvrsale</objname>
		<parent/>
		<properties>Width = 413
Height = 61
frmdirection = 1
Name = "cnttvrsale"
</properties>
		<protected/>
		<methods>PROCEDURE setprice
*------------------------------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: cntTvrSale.SetPrice
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;tnTvrID, tnPrcTypeID&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Óñòàíîâêà öåíû ïðîäàæè
*------------------------------------------------------------------------------
LPARAMETERS tnTvrID, tnPrcTypeID

*07.06.2006 15:57 -&gt; Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
PRIVATE _PARAM, ;
		_PARAM1, ;
		_PARAM2
*------------------------------------------------------------------------------
IF !this.Visible
	RETURN
ENDIF
*07.06.2006 15:58 -&gt; Ïðîâåðÿåì íàëè÷èå öåíû äëÿ äàííîãî òîâàðà ïî äàííîìó ïðàéñó
USE IN SELECT([lvPriceTvr])
***
_PARAM1 = tnTvrID
_PARAM2 = tnPrcTypeID
***
USE lvPriceTvr IN 0
*------------------------------------------------------------------------------

*07.06.2006 15:58 -&gt; Åñëè öåíà íå íàéäåíà, äîáàâëÿåì
IF RECCOUNT([lvPriceTvr]) = 0
	MESSAGEBOX([Öåíà ïðîäàæè íå íàéäåíà],48,[Ïðåäóïðåæäåíèå],400)
	APPEND BLANK IN lvPriceEdit
	REPLACE ;
		PrcTypeID WITH tnPrcTypeID, ;
		TvrId WITH tnTvrID, ;
		Price WITH 0 ;
	IN lvPriceEdit
ELSE
	_PARAM = lvPriceTvr.PrcID
	REQUERY([lvPriceEdit])
ENDIF
***
USE IN SELECT([lvPriceTvr])
***
IF ThisForm.cMode == [ADD]
	This.txtTvrPrcSale.Value = lvPriceEdit.Price
ENDIF
*------------------------------------------------------------------------------

*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1>Class</reserved1>
		<reserved2>8</reserved2>
		<reserved3>frmdirection Íàïðàâëåíèå ôîðìû 
*setprice 
</reserved3>
		<reserved4/>
		<reserved5/>
		<reserved6>Pixels</reserved6>
		<reserved7>Öåíà è ñóììà ïðîäàæè</reserved7>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1LO0Z938B</uniqueid>
		<timestamp>0</timestamp>
		<class>shp</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>shape</baseclass>
		<objname>ShpSale</objname>
		<parent>cnttvrsale</parent>
		<properties>Top = 0
Left = 0
Height = 61
Width = 413
SpecialEffect = 0
ZOrderSet = 13
Name = "ShpSale"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1LO0Z938C</uniqueid>
		<timestamp>0</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblTvrPrcSale</objname>
		<parent>cnttvrsale</parent>
		<properties>FontBold = .T.
Caption = "Öåíà ïðîäàæè:"
Left = 5
Top = 8
TabIndex = 1
ZOrderSet = 14
Name = "lblTvrPrcSale"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1LO0Z938R</uniqueid>
		<timestamp>0</timestamp>
		<class>txt</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>txtTvrPrcSale</objname>
		<parent>cnttvrsale</parent>
		<properties>ControlSource = "lvFrmPartTvrEdit.TvrPrcSale"
Left = 135
TabIndex = 2
Top = 5
DisabledForeColor = 0,0,0
ZOrderSet = 15
_highlightobject = .parent.lblTvrPrcSale
_convertcommatopoint = .T.
_usedbfieldproperty = .T.
Name = "txtTvrPrcSale"
</properties>
		<protected/>
		<methods>PROCEDURE _handleanychange
IF PEMSTATUS(ThisForm,[SetPrcNadb],5)
	ThisForm.SetPrcNadb()
ENDIF
ThisForm.CalculateSumSale()
ENDPROC
PROCEDURE Init
DODEFAULT()
USE lvPriceEdit IN 0 NODATA
ENDPROC
PROCEDURE LostFocus
DODEFAULT()

*13.06.2006 17:37 -&gt; Ïðîâåðÿåì èçìåíåíèå öåíû ïðîäàæè
IF lvPriceEdit.Price # This.Value AND MESSAGEBOX('Ìåíÿòü öåíó ïðîäàæè â ïðàéñå?', 4+16+256, "Ïðåäóïðåæäåíèå")=6
	
	*13.06.2006 17:37 -&gt; Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
	LOCAL   lnNewPrice
	***
	lnNewPrice = This.Value
	*------------------------------------------------------------------------------
	
	*13.06.2006 17:38 -&gt; Ìåíÿåì öåíó ïðîäàæè
	REPLACE Price WITH lnNewPrice IN lvPriceEdit
	*------------------------------------------------------------------------------

ENDIF
*------------------------------------------------------------------------------
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1LO0Z938U</uniqueid>
		<timestamp>0</timestamp>
		<class>txt</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>txtTvrPrcSumSale</objname>
		<parent>cnttvrsale</parent>
		<properties>Alignment = 3
Value = 0
Enabled = .F.
Left = 308
TabIndex = 4
Top = 5
DisabledForeColor = 0,0,0
ZOrderSet = 19
Name = "txtTvrPrcSumSale"
</properties>
		<protected/>
		<methods>PROCEDURE _handleanychange
ThisForm.CalculateVatSumSale()
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1LO0Z938V</uniqueid>
		<timestamp>0</timestamp>
		<class>txt</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>txtTvrVATSumSale</objname>
		<parent>cnttvrsale</parent>
		<properties>Alignment = 3
Value = 0
Enabled = .F.
Left = 308
TabIndex = 8
Top = 33
DisabledForeColor = 0,0,0
ZOrderSet = 21
Name = "txtTvrVATSumSale"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1LO0Z938W</uniqueid>
		<timestamp>0</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblTvrPrcSumSale</objname>
		<parent>cnttvrsale</parent>
		<properties>FontBold = .T.
Caption = "Ñóììà:"
Left = 238
Top = 8
TabIndex = 3
ZOrderSet = 18
Name = "lblTvrPrcSumSale"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1LO0Z938X</uniqueid>
		<timestamp>0</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblTvrVATSumSale</objname>
		<parent>cnttvrsale</parent>
		<properties>FontBold = .T.
Caption = "Ñóììà ÍÄÑ:"
Left = 238
Top = 36
TabIndex = 7
ZOrderSet = 20
Name = "lblTvrVATSumSale"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>COMMENT</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>0</timestamp>
		<class/>
		<classloc/>
		<baseclass/>
		<objname>cnttvrsale</objname>
		<parent/>
		<properties>Arial, 0, 9, 5, 15, 12, 32, 3, 0
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_27R0STXRW</uniqueid>
		<timestamp>929788374</timestamp>
		<class>frmpdedit</class>
		<classloc>primarydoc_v1.vcx</classloc>
		<baseclass>form</baseclass>
		<objname>frmresuinstredit</objname>
		<parent/>
		<properties>Height = 181
Width = 700
DoCreate = .T.
Enabled = .T.
Name = "frmresuinstredit"
shpFrmAttribute.Top = 537
shpFrmAttribute.Left = 5
shpFrmAttribute.Name = "shpFrmAttribute"
cstmsghandler.Name = "cstmsghandler"
cstresizable.Name = "cstresizable"
cstdatawork.Name = "cstdatawork"
shpCommon.Top = 5
shpCommon.Left = 5
shpCommon.Height = 139
shpCommon.Width = 690
shpCommon.Name = "shpCommon"
lblFrmType.Name = "lblFrmType"
cntIdCtlGridFrmType.txtText.Name = "txtText"
cntIdCtlGridFrmType.cmdShow.Name = "cmdShow"
cntIdCtlGridFrmType.cmdClear.Name = "cmdClear"
cntIdCtlGridFrmType.CmdTree.Name = "CmdTree"
cntIdCtlGridFrmType.Olecommprox1.Top = 0
cntIdCtlGridFrmType.Olecommprox1.Left = 36
cntIdCtlGridFrmType.Olecommprox1.Height = 16
cntIdCtlGridFrmType.Olecommprox1.Width = 38
cntIdCtlGridFrmType.Olecommprox1.Name = "Olecommprox1"
cntIdCtlGridFrmType.Top = 10
cntIdCtlGridFrmType.Left = 131
cntIdCtlGridFrmType.Name = "cntIdCtlGridFrmType"
lblFrmNum.Caption = "Íîìåð äîêóìåíòà:"
lblFrmNum.Left = 362
lblFrmNum.Top = 13
lblFrmNum.Name = "lblFrmNum"
txtFrmNum.Enabled = .F.
txtFrmNum.Name = "txtFrmNum"
chkFrmAutoNum.Alignment = 0
chkFrmAutoNum.Enabled = .F.
chkFrmAutoNum.Name = "chkFrmAutoNum"
lblFrmDate.Caption = "Äàòà íà÷àëà:"
lblFrmDate.Left = 10
lblFrmDate.Name = "lblFrmDate"
cntTxtCtlCalendarFrmDate.txtText.Name = "txtText"
cntTxtCtlCalendarFrmDate.cmdShow.Enabled = .F.
cntTxtCtlCalendarFrmDate.cmdShow.Name = "cmdShow"
cntTxtCtlCalendarFrmDate.Top = 38
cntTxtCtlCalendarFrmDate.Left = 131
cntTxtCtlCalendarFrmDate.Enabled = .F.
cntTxtCtlCalendarFrmDate.Name = "cntTxtCtlCalendarFrmDate"
lblFrmDateAcc.Caption = "Äàòà îêîí÷àíèÿ:"
lblFrmDateAcc.Left = 362
lblFrmDateAcc.Top = 41
lblFrmDateAcc.Name = "lblFrmDateAcc"
cntTxtCtlCalendarFrmDateAcc.txtText.Name = "txtText"
cntTxtCtlCalendarFrmDateAcc.cmdShow.Enabled = .F.
cntTxtCtlCalendarFrmDateAcc.cmdShow.Name = "cmdShow"
cntTxtCtlCalendarFrmDateAcc.Enabled = .F.
cntTxtCtlCalendarFrmDateAcc.Name = "cntTxtCtlCalendarFrmDateAcc"
lblReason.Left = 10
lblReason.Top = 273
lblReason.Name = "lblReason"
edtReason.Left = 140
edtReason.Top = 258
edtReason.Name = "edtReason"
lblNote.Left = 10
lblNote.Top = 316
lblNote.Name = "lblNote"
edtNote.Left = 140
edtNote.Top = 301
edtNote.Name = "edtNote"
lblFrmPrcTypeID.Left = 10
lblFrmPrcTypeID.Top = 347
lblFrmPrcTypeID.Name = "lblFrmPrcTypeID"
cntIDCtlGridFrmPrcTypeID.txtText.Name = "txtText"
cntIDCtlGridFrmPrcTypeID.cmdShow.Name = "cmdShow"
cntIDCtlGridFrmPrcTypeID.cmdClear.Name = "cmdClear"
cntIDCtlGridFrmPrcTypeID.CmdTree.Name = "CmdTree"
cntIDCtlGridFrmPrcTypeID.Olecommprox1.Top = 0
cntIDCtlGridFrmPrcTypeID.Olecommprox1.Left = 36
cntIDCtlGridFrmPrcTypeID.Olecommprox1.Height = 16
cntIDCtlGridFrmPrcTypeID.Olecommprox1.Width = 38
cntIDCtlGridFrmPrcTypeID.Olecommprox1.Name = "Olecommprox1"
cntIDCtlGridFrmPrcTypeID.Top = 344
cntIDCtlGridFrmPrcTypeID.Left = 140
cntIDCtlGridFrmPrcTypeID.Name = "cntIDCtlGridFrmPrcTypeID"
lblFrmCurTypeID.Left = 360
lblFrmCurTypeID.Top = 347
lblFrmCurTypeID.Name = "lblFrmCurTypeID"
cntIDCtlGridFrmCurTypeID.txtText.Name = "txtText"
cntIDCtlGridFrmCurTypeID.cmdShow.Name = "cmdShow"
cntIDCtlGridFrmCurTypeID.cmdClear.Name = "cmdClear"
cntIDCtlGridFrmCurTypeID.CmdTree.Name = "CmdTree"
cntIDCtlGridFrmCurTypeID.Olecommprox1.Top = 0
cntIDCtlGridFrmCurTypeID.Olecommprox1.Left = 36
cntIDCtlGridFrmCurTypeID.Olecommprox1.Height = 16
cntIDCtlGridFrmCurTypeID.Olecommprox1.Width = 38
cntIDCtlGridFrmCurTypeID.Olecommprox1.Name = "Olecommprox1"
cntIDCtlGridFrmCurTypeID.Top = 344
cntIDCtlGridFrmCurTypeID.Left = 490
cntIDCtlGridFrmCurTypeID.Name = "cntIDCtlGridFrmCurTypeID"
lblFrmStatus.Left = 10
lblFrmStatus.Top = 375
lblFrmStatus.Name = "lblFrmStatus"
cntIdCtlGridFrmStatus.txtText.Name = "txtText"
cntIdCtlGridFrmStatus.cmdShow.Name = "cmdShow"
cntIdCtlGridFrmStatus.cmdClear.Name = "cmdClear"
cntIdCtlGridFrmStatus.CmdTree.Name = "CmdTree"
cntIdCtlGridFrmStatus.Olecommprox1.Top = 0
cntIdCtlGridFrmStatus.Olecommprox1.Left = 36
cntIdCtlGridFrmStatus.Olecommprox1.Height = 16
cntIdCtlGridFrmStatus.Olecommprox1.Width = 38
cntIdCtlGridFrmStatus.Olecommprox1.Name = "Olecommprox1"
cntIdCtlGridFrmStatus.Top = 372
cntIdCtlGridFrmStatus.Left = 140
cntIdCtlGridFrmStatus.Name = "cntIdCtlGridFrmStatus"
lblFrmParID.Left = 360
lblFrmParID.Top = 375
lblFrmParID.Name = "lblFrmParID"
cntIDCtlGridFrmParID.txtText.Name = "txtText"
cntIDCtlGridFrmParID.cmdShow.Name = "cmdShow"
cntIDCtlGridFrmParID.cmdClear.Name = "cmdClear"
cntIDCtlGridFrmParID.CmdTree.Name = "CmdTree"
cntIDCtlGridFrmParID.Olecommprox1.Top = 0
cntIDCtlGridFrmParID.Olecommprox1.Left = 36
cntIDCtlGridFrmParID.Olecommprox1.Height = 16
cntIDCtlGridFrmParID.Olecommprox1.Width = 38
cntIDCtlGridFrmParID.Olecommprox1.Name = "Olecommprox1"
cntIDCtlGridFrmParID.Top = 372
cntIDCtlGridFrmParID.Left = 490
cntIDCtlGridFrmParID.Name = "cntIDCtlGridFrmParID"
shpControl.Top = 405
shpControl.Left = 5
shpControl.Name = "shpControl"
lblDev.Left = 10
lblDev.Top = 413
lblDev.Name = "lblDev"
Lbl1.Left = 264
Lbl1.Top = 562
Lbl1.Name = "Lbl1"
CntidctlgridPbook.txtText.Name = "txtText"
CntidctlgridPbook.cmdShow.Name = "cmdShow"
CntidctlgridPbook.cmdClear.Name = "cmdClear"
CntidctlgridPbook.CmdTree.Name = "CmdTree"
CntidctlgridPbook.Olecommprox1.Top = 0
CntidctlgridPbook.Olecommprox1.Left = 36
CntidctlgridPbook.Olecommprox1.Height = 16
CntidctlgridPbook.Olecommprox1.Width = 38
CntidctlgridPbook.Olecommprox1.Name = "Olecommprox1"
CntidctlgridPbook.Top = 559
CntidctlgridPbook.Left = 446
CntidctlgridPbook.Name = "CntidctlgridPbook"
cntIdCtlGridDev.txtText.Name = "txtText"
cntIdCtlGridDev.cmdShow.Name = "cmdShow"
cntIdCtlGridDev.cmdClear.Name = "cmdClear"
cntIdCtlGridDev.CmdTree.Name = "CmdTree"
cntIdCtlGridDev.Olecommprox1.Top = 0
cntIdCtlGridDev.Olecommprox1.Left = 36
cntIdCtlGridDev.Olecommprox1.Height = 16
cntIdCtlGridDev.Olecommprox1.Width = 38
cntIdCtlGridDev.Olecommprox1.Name = "Olecommprox1"
cntIdCtlGridDev.Top = 410
cntIdCtlGridDev.Left = 96
cntIdCtlGridDev.Name = "cntIdCtlGridDev"
lblContr.Left = 360
lblContr.Top = 413
lblContr.Name = "lblContr"
cntIdCtlGridContr.txtText.Name = "txtText"
cntIdCtlGridContr.cmdShow.Name = "cmdShow"
cntIdCtlGridContr.cmdClear.Name = "cmdClear"
cntIdCtlGridContr.CmdTree.Name = "CmdTree"
cntIdCtlGridContr.Olecommprox1.Top = 0
cntIdCtlGridContr.Olecommprox1.Left = 36
cntIdCtlGridContr.Olecommprox1.Height = 16
cntIdCtlGridContr.Olecommprox1.Width = 38
cntIdCtlGridContr.Olecommprox1.Name = "Olecommprox1"
cntIdCtlGridContr.Top = 410
cntIdCtlGridContr.Left = 432
cntIdCtlGridContr.Name = "cntIdCtlGridContr"
shpQualityEmi.Top = 443
shpQualityEmi.Left = 5
shpQualityEmi.Name = "shpQualityEmi"
lblPointEmi.Left = 10
lblPointEmi.Top = 451
lblPointEmi.Name = "lblPointEmi"
cntIdCtlGridPointEmi.txtText.Name = "txtText"
cntIdCtlGridPointEmi.cmdShow.Name = "cmdShow"
cntIdCtlGridPointEmi.cmdClear.Name = "cmdClear"
cntIdCtlGridPointEmi.CmdTree.Name = "CmdTree"
cntIdCtlGridPointEmi.Olecommprox1.Top = 0
cntIdCtlGridPointEmi.Olecommprox1.Left = 36
cntIdCtlGridPointEmi.Olecommprox1.Height = 16
cntIdCtlGridPointEmi.Olecommprox1.Width = 38
cntIdCtlGridPointEmi.Olecommprox1.Name = "Olecommprox1"
cntIdCtlGridPointEmi.Top = 448
cntIdCtlGridPointEmi.Left = 108
cntIdCtlGridPointEmi.Name = "cntIdCtlGridPointEmi"
lblPointEmiAccount.Left = 10
lblPointEmiAccount.Top = 479
lblPointEmiAccount.Name = "lblPointEmiAccount"
cntIdCtlGridPointEmiAccount.txtText.Name = "txtText"
cntIdCtlGridPointEmiAccount.cmdShow.Name = "cmdShow"
cntIdCtlGridPointEmiAccount.cmdClear.Name = "cmdClear"
cntIdCtlGridPointEmiAccount.CmdTree.Name = "CmdTree"
cntIdCtlGridPointEmiAccount.Olecommprox1.Top = 0
cntIdCtlGridPointEmiAccount.Olecommprox1.Left = 36
cntIdCtlGridPointEmiAccount.Olecommprox1.Height = 16
cntIdCtlGridPointEmiAccount.Olecommprox1.Width = 38
cntIdCtlGridPointEmiAccount.Olecommprox1.Name = "Olecommprox1"
cntIdCtlGridPointEmiAccount.Top = 476
cntIdCtlGridPointEmiAccount.Left = 140
cntIdCtlGridPointEmiAccount.Name = "cntIdCtlGridPointEmiAccount"
lblExecEmi.Left = 10
lblExecEmi.Top = 87
lblExecEmi.Name = "lblExecEmi"
cntIdCtlGridExecEmi.txtText.Name = "txtText"
cntIdCtlGridExecEmi.cmdShow.Enabled = .F.
cntIdCtlGridExecEmi.cmdShow.Name = "cmdShow"
cntIdCtlGridExecEmi.cmdClear.Name = "cmdClear"
cntIdCtlGridExecEmi.CmdTree.Name = "CmdTree"
cntIdCtlGridExecEmi.Olecommprox1.Top = 0
cntIdCtlGridExecEmi.Olecommprox1.Left = 36
cntIdCtlGridExecEmi.Olecommprox1.Height = 16
cntIdCtlGridExecEmi.Olecommprox1.Width = 38
cntIdCtlGridExecEmi.Olecommprox1.Name = "Olecommprox1"
cntIdCtlGridExecEmi.Top = 80
cntIdCtlGridExecEmi.Left = 131
cntIdCtlGridExecEmi.Enabled = .F.
cntIdCtlGridExecEmi.Name = "cntIdCtlGridExecEmi"
shpQualityIsp.Top = 443
shpQualityIsp.Left = 355
shpQualityIsp.Name = "shpQualityIsp"
lblPointIsp.Left = 362
lblPointIsp.Top = 87
lblPointIsp.Name = "lblPointIsp"
cntIdCtlGridPointIsp.txtText.Name = "txtText"
cntIdCtlGridPointIsp.cmdShow.Name = "cmdShow"
cntIdCtlGridPointIsp.cmdClear.Name = "cmdClear"
cntIdCtlGridPointIsp.CmdTree.Name = "CmdTree"
cntIdCtlGridPointIsp.Olecommprox1.Top = 0
cntIdCtlGridPointIsp.Olecommprox1.Left = 36
cntIdCtlGridPointIsp.Olecommprox1.Height = 16
cntIdCtlGridPointIsp.Olecommprox1.Width = 38
cntIdCtlGridPointIsp.Olecommprox1.Name = "Olecommprox1"
cntIdCtlGridPointIsp.Top = 84
cntIdCtlGridPointIsp.Left = 485
cntIdCtlGridPointIsp.Name = "cntIdCtlGridPointIsp"
lblPointIspAccount.Left = 360
lblPointIspAccount.Top = 479
lblPointIspAccount.Name = "lblPointIspAccount"
cntIdCtlGridPointIspAccount.txtText.Name = "txtText"
cntIdCtlGridPointIspAccount.cmdShow.Name = "cmdShow"
cntIdCtlGridPointIspAccount.cmdClear.Name = "cmdClear"
cntIdCtlGridPointIspAccount.CmdTree.Name = "CmdTree"
cntIdCtlGridPointIspAccount.Olecommprox1.Top = 0
cntIdCtlGridPointIspAccount.Olecommprox1.Left = 36
cntIdCtlGridPointIspAccount.Olecommprox1.Height = 16
cntIdCtlGridPointIspAccount.Olecommprox1.Width = 38
cntIdCtlGridPointIspAccount.Olecommprox1.Name = "Olecommprox1"
cntIdCtlGridPointIspAccount.Top = 476
cntIdCtlGridPointIspAccount.Left = 490
cntIdCtlGridPointIspAccount.Name = "cntIdCtlGridPointIspAccount"
lblExecIsp.Left = 360
lblExecIsp.Top = 507
lblExecIsp.Name = "lblExecIsp"
cntIdCtlGridExecIsp.txtText.Name = "txtText"
cntIdCtlGridExecIsp.cmdShow.Name = "cmdShow"
cntIdCtlGridExecIsp.cmdClear.Name = "cmdClear"
cntIdCtlGridExecIsp.CmdTree.Name = "CmdTree"
cntIdCtlGridExecIsp.Olecommprox1.Top = 0
cntIdCtlGridExecIsp.Olecommprox1.Left = 36
cntIdCtlGridExecIsp.Olecommprox1.Height = 16
cntIdCtlGridExecIsp.Olecommprox1.Width = 38
cntIdCtlGridExecIsp.Olecommprox1.Name = "Olecommprox1"
cntIdCtlGridExecIsp.Top = 504
cntIdCtlGridExecIsp.Left = 490
cntIdCtlGridExecIsp.Name = "cntIdCtlGridExecIsp"
lblFrmAttribute.Left = 10
lblFrmAttribute.Top = 542
lblFrmAttribute.Name = "lblFrmAttribute"
grdBit.Column1.Header1.Name = "Header1"
grdBit.Column1.CHK1.Alignment = 0
grdBit.Column1.CHK1.Name = "CHK1"
grdBit.Column1.Name = "Column1"
grdBit.Column2.Header1.Name = "Header1"
grdBit.Column2.Txtgrd1.Name = "Txtgrd1"
grdBit.Column2.Name = "Column2"
grdBit.Left = 10
grdBit.Top = 559
grdBit.Name = "grdBit"
cntcancelsavehandled.cmdCancel.Name = "cmdCancel"
cntcancelsavehandled.cmdOk.Name = "cmdOk"
cntcancelsavehandled.Top = 149
cntcancelsavehandled.Left = 491
cntcancelsavehandled.Name = "cntcancelsavehandled"
</properties>
		<protected/>
		<methods>PROCEDURE _handlecntcancelsaveevent
LPARAMETERS tcMessage

IF tcMessage = [OK]
	typeTvr = thisform.opg1.Value
ENDIF

DODEFAULT(tcMessage)

ENDPROC
PROCEDURE Init
LPARAMETERS tcCommand, tuParam1, tuParam2, tuParam3

DODEFAULT(tcCommand, tuParam1, tuParam2, tuParam3)

IF this.cMode==[ADD]
		SELECT lvFrmEdit
		REPLACE ;
			FrmDate WITH IIF(TYPE([tuParam2])='T',tuParam2,CTOT('')), ;
			FrmDateAcc WITH IIF(TYPE([tuParam3])='T',tuParam3,CTOT('')), ;
			ExecEmiCltID WITH MakerClt ;
		IN lvFrmEdit
		this.chkFrmAutoNum.Value=.t.
	ELSE
		SELECT lvFrmEdit
		IF lvFrmEdit.FrmIsPayed
			THIS.cMode = [INFO]
			THIS.Caption = [Ïðîñìîòð ]+ STR(tuParam1)
			THIS.Icon = FULLPATH([frminfo.ico])
			THIS.cntCancelSaveHandled.cmdOk.Enabled = .F.
			MESSAGEBOX('Óæå îïëà÷åíî. Äîñòóïíî òîëüêî äëÿ ïðîñìîòðà.',0+64,'Äîêóìåíò äîñòóïåí òîëüêî äëÿ ïðîñìîòðà',2000)
		ENDIF
		this.opg1.Value = typeTvr
		this.chkFrmAutoNum.Value=.f.
		this.opg1.Enabled=.f.
ENDIF
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1>Class</reserved1>
		<reserved2>2</reserved2>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6>Pixels</reserved6>
		<reserved7>Ðåäàêòèðîâàíèå áðîíè èíñòðóêòîðà</reserved7>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_27S0V1OZE</uniqueid>
		<timestamp>929195214</timestamp>
		<class>opg</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>optiongroup</baseclass>
		<objname>Opg1</objname>
		<parent>frmresuinstredit</parent>
		<properties>AutoSize = .F.
ButtonCount = 4
BackStyle = 1
BorderStyle = 0
Value = 1
Height = 29
Left = 3
SpecialEffect = 0
Top = 111
Width = 468
ColorSource = 4
Name = "Opg1"
Option1.Caption = " Âçðîñëûé "
Option1.Value = 1
Option1.Height = 17
Option1.Left = 10
Option1.Top = 7
Option1.Width = 83
Option1.BackColor = 138,244,244
Option1.Name = "Option1"
Option2.Caption = " Äåòñêèé "
Option2.Height = 17
Option2.Left = 118
Option2.Top = 7
Option2.Width = 83
Option2.BackColor = 255,255,0
Option2.Name = "Option2"
Option3.Caption = " Ãðóïïîâîé "
Option3.Height = 17
Option3.Left = 227
Option3.Top = 7
Option3.Width = 83
Option3.BackColor = 0,128,192
Option3.Name = "Option3"
Option4.Caption = " Äåæóðñòâî "
Option4.Height = 17
Option4.Left = 352
Option4.Top = 7
Option4.Width = 83
Option4.BackColor = 0,255,64
Option4.Name = "Option4"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>COMMENT</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>0</timestamp>
		<class/>
		<classloc/>
		<baseclass/>
		<objname>frmresuinstredit</objname>
		<parent/>
		<properties>Arial, 0, 9, 5, 15, 12, 32, 3, 0
Arial, 1, 9, 6, 15, 12, 32, 3, 0
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1LO0Z2G2I</uniqueid>
		<timestamp>929855732</timestamp>
		<class>cnt</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>cnttvrbuy</objname>
		<parent/>
		<properties>Width = 413
Height = 61
Name = "cnttvrbuy"
</properties>
		<protected/>
		<methods>PROCEDURE setprice
*------------------------------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: cntTvrBuy.SetPrice
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;tnOUID,tnTvrID,tlForce)
* Returns.........: &lt;none&gt;
* Notes...........: Óñòàíîâêà öåíû ïîñòóïëåíèÿ
*------------------------------------------------------------------------------
LPARAMETERS tnOUID,tnTvrID,tlForce

*15.06.2006 14:35 -&gt; Âûïîëíÿåì äåéñòâèÿ ëèøü â ñëó÷àå äîáàâëåíèÿ òîâàðíîé ïîçèöèè
IF ThisForm.cMode == [ADD] OR tlForce

	*15.06.2006 14:38 -&gt; Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
	PRIVATE _PARAM1,_PARAM2
	*------------------------------------------------------------------------------
WAIT WINDOW 'Îïðåäåëÿåì ïîñëåäíþþ öåíó ïîñòóïëåíèÿ' NOWAIT
	*02.09.2005 17:24 -&gt; Ïðîâåðÿåì íàëè÷èå öåíû ïîêóïêè ïî äàííîìó òîâàðó
	USE IN SELECT([lvTvrLastBuyOU])
	***
	_PARAM1 = tnOUID
	_PARAM2 = tnTvrID
	***
	USE lvTvrLastBuyOU IN 0
	*------------------------------------------------------------------------------

	*19.08.2005 11:37 -&gt; Îáðàáîòàåì ðåçóëüòàò
	WAIT CLEAR
	IF RECCOUNT([lvTvrLastBuyOU]) = 0

		*15.06.2006 14:40 -&gt; Öåíà íå íàéäåíà - âûâîäèì ñîîáùåíèå ïîëüçîâàòåëþ
		MESSAGEBOX([Öåíà ïîñòóïëåíèÿ íå íàéäåíà.],0+48,[Ïðåäóïðåæäåíèå],450)
		*------------------------------------------------------------------------------

	ELSE

		*15.06.2006 14:41 -&gt; Âûñòàâèì öåíó ïîñòóïåíèÿ
		This.txtTvrPrcBuy.Value = lvTvrLastBuyOU.StockTransTvrPrcBuy
		*------------------------------------------------------------------------------

	ENDIF
	*------------------------------------------------------------------------------

ENDIF
*------------------------------------------------------------------------------

*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1>Class</reserved1>
		<reserved2>8</reserved2>
		<reserved3>*setprice 
</reserved3>
		<reserved4/>
		<reserved5/>
		<reserved6>Pixels</reserved6>
		<reserved7>Öåíà è ñóììà ïîêóïêè òîâàðà</reserved7>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1LO0Z938B</uniqueid>
		<timestamp>0</timestamp>
		<class>shp</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>shape</baseclass>
		<objname>ShpBuy</objname>
		<parent>cnttvrbuy</parent>
		<properties>Top = 0
Left = 0
Height = 61
Width = 413
SpecialEffect = 0
ZOrderSet = 0
Name = "ShpBuy"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1LO0Z938C</uniqueid>
		<timestamp>0</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblTvrPrcBuy</objname>
		<parent>cnttvrbuy</parent>
		<properties>FontBold = .T.
Caption = "Öåíà ïîñòóïëåíèÿ:"
Left = 5
Top = 8
TabIndex = 1
ZOrderSet = 1
Name = "lblTvrPrcBuy"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1P00YWXMY</uniqueid>
		<timestamp>929855671</timestamp>
		<class>txt</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>txtTvrPrcBuy</objname>
		<parent>cnttvrbuy</parent>
		<properties>ControlSource = "lvFrmPartTvrEdit.TvrPrcBuy"
InputMask = "999999.9999"
Left = 135
TabIndex = 2
Top = 5
DisabledForeColor = 0,0,0
ZOrderSet = 2
_highlightobject = .parent.lblTvrPrcBuy
_convertcommatopoint = .T.
_usedbfieldproperty = .T.
Name = "txtTvrPrcBuy"
</properties>
		<protected/>
		<methods>PROCEDURE _handleanychange
IF PEMSTATUS(ThisForm,[SetPrcNadb],5)
	ThisForm.SetPrcNadb()
ENDIF
ThisForm.CalculateSumBuy()
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1LO0Z938W</uniqueid>
		<timestamp>0</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblTvrPrcSumBuy</objname>
		<parent>cnttvrbuy</parent>
		<properties>FontBold = .T.
Caption = "Ñóììà:"
Left = 238
Top = 8
TabIndex = 3
ZOrderSet = 3
Name = "lblTvrPrcSumBuy"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1LO0Z938U</uniqueid>
		<timestamp>929855732</timestamp>
		<class>txt</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>txtTvrPrcSumBuy</objname>
		<parent>cnttvrbuy</parent>
		<properties>Alignment = 3
Value = 0
Enabled = .T.
InputMask = "99999999.9999"
Left = 308
TabIndex = 4
Top = 5
DisabledForeColor = 0,0,0
ZOrderSet = 4
Name = "txtTvrPrcSumBuy"
</properties>
		<protected/>
		<methods>PROCEDURE _handleanychange
ThisForm.CalculateVatSumBuy()
ENDPROC
PROCEDURE LostFocus
this.Parent.txtTvrPrcBuy.Value=IIF(thisform.txtQnt.Value=0,0,(this.Value / thisform.txtQnt.Value))
DODEFAULT()
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1LO0Z938X</uniqueid>
		<timestamp>0</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblTvrVATSumBuy</objname>
		<parent>cnttvrbuy</parent>
		<properties>FontBold = .T.
Caption = "Ñóììà ÍÄÑ:"
Left = 238
Top = 36
TabIndex = 5
ZOrderSet = 5
Name = "lblTvrVATSumBuy"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1LO0Z938V</uniqueid>
		<timestamp>0</timestamp>
		<class>txt</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>txtTvrVATSumBuy</objname>
		<parent>cnttvrbuy</parent>
		<properties>Alignment = 3
Value = 0
Enabled = .F.
Left = 308
TabIndex = 6
Top = 33
DisabledForeColor = 0,0,0
ZOrderSet = 6
Name = "txtTvrVATSumBuy"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>COMMENT</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>0</timestamp>
		<class/>
		<classloc/>
		<baseclass/>
		<objname>cnttvrbuy</objname>
		<parent/>
		<properties>Arial, 0, 9, 5, 15, 12, 32, 3, 0
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18I0M4ORT</uniqueid>
		<timestamp>930714387</timestamp>
		<class>frmedit</class>
		<classloc>baseform_v1.vcx</classloc>
		<baseclass>form</baseclass>
		<objname>frmprimarydocparttvrserviceedit</objname>
		<parent/>
		<properties>Top = 60
Left = 417
Height = 117
Width = 419
DoCreate = .T.
AutoCenter = .F.
WindowState = 0
cmode = 
cmeasureunitlist = 
frmprctype = 1
nouid = 0
Name = "frmprimarydocparttvrserviceedit"
cstmsghandler.Top = 25
cstmsghandler.Left = 10
cstmsghandler.Name = "cstmsghandler"
cstresizable.Top = 25
cstresizable.Left = 32
cstresizable.Name = "cstresizable"
cstdatawork.Top = 25
cstdatawork.Left = 54
cstdatawork.Name = "cstdatawork"
</properties>
		<protected/>
		<methods>PROCEDURE _handlecntcancelsaveevent
*------------------------------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: FRMPRIMARYDOCPARTTVREDIT._HANDLECNTCANCELSAVEEVENT
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;tcMessage&gt;
* Returns.........: &lt;none&gt;
* Notes...........: &lt;~&gt;
*------------------------------------------------------------------------------
LPARAMETERS	tcMessage

LOCAL	llResSave, resCnt

WITH This

	* Ïðîâåðÿåì íà íàëè÷èå òîâàðà â ýòîì çàêàçå ...
*17.05.2004 02:07 -&gt;Ïðîèçâîäèì ñîõðàíåíèÿ/îòìåíÿåì èçìåíåíèÿ
IF tcMessage == [OK]
	IF .cMode = [ADD]
		resCnt = .controlrenta()
		IF TYPE('resCnt')='N' OR !resCnt
			*12.05.2004 00:36 -&gt;Îòìåíèì èçìåíåíèÿ
			.cstDataWork.Restore([lvPriceEdit])
			.cstDataWork.Restore([lvFrmPartTvrEdit])
			.cstDataWork.Restore([lvJrnUsageEdit])
			.uRetVal = resCnt
			.Hide()
			RETURN
		ENDIF
	ENDIF

	*13.06.2006 18:01 -&gt; Ñîõðàíÿåì öåíó ïðîäàæè
	.SavePriceSale()
	*------------------------------------------------------------------------------
	
	.uRetVal = .T.
	
	IF .cMode = [DELE]
		DELETE IN lvFrmPartTvrEdit
		DELETE IN lvJrnUsageEdit
	ENDIF
	llResSave = .cstDataWork.Save([lvFrmPartTvrEdit])

	*21.01.2004 20:01 -&gt;Îáðàáàòûâàåì ðåçóëüòàòû ñîõðàíåíèÿ
	IF llResSave

		*12.05.2004 03:18 -&gt;Çàïèñûâàåì â .uRetVal èäåíòèôèêàòîð äîáàâëåííîãî äîêóìåíòà
		IF .cMode = [ADD]
			.uRetVal = .cstDataWork.GetLastID([lvFrmPartTvrEdit])
	REPLACE FrmPartTvrID WITH .uRetVal IN lvJrnUsageEdit
		ENDIF
		*------------------------------------------------------------------------------
		
	ELSE

		*01.04.2004 18:42 -&gt;Ïîïûòàåìñÿ îáðàáîòàòü îøèáêó ñîõðàíåíèÿ
		IF .cstDataWork.HandleSaveFail() &amp;&amp;åñëè îøèáêà îáðàáîòàíà
			RETURN .T.	&amp;&amp;âîçâðàùàåìñÿ ê ðåäàêòèðîâàíèþ
		ELSE

			*01.04.2004 18:40 -&gt;Ñîîáùàåì îá îøèáêå
			MESSAGEBOX([Â ïðîöåññå ñîõðàíåíèÿ ïðîèçîøëà îøèáêà. Èçìåíåíèÿ ñîõðàíåíû íå áóäóò.],16,[Îøèáêà...])
			*------------------------------------------------------------------------------

			*01.04.2004 18:40 -&gt;Îòìåíÿåì èçìåíåíèÿ
			.cstDataWork.Restore([lvFrmPartTvrEdit])
			.cstDataWork.Restore([lvJrnUsageEdit])
			.uRetVal = .F.
			.Hide()	
			*------------------------------------------------------------------------------

		ENDIF	
		*------------------------------------------------------------------------------

	ENDIF
	*------------------------------------------------------------------------------

	llResSave = .cstDataWork.Save([lvJrnUsageEdit])

	*21.01.2004 20:01 -&gt;Îáðàáàòûâàåì ðåçóëüòàòû ñîõðàíåíèÿ
	IF llResSave

		*12.05.2004 03:18 -&gt;Çàïèñûâàåì â .uRetVal èäåíòèôèêàòîð äîáàâëåííîãî äîêóìåíòà
		IF .cMode # [ADD]
			.uRetVal = .T.
		ENDIF
		***	
		.Hide()
		*------------------------------------------------------------------------------
		
	ELSE
	
		*01.04.2004 18:42 -&gt;Ïîïûòàåìñÿ îáðàáîòàòü îøèáêó ñîõðàíåíèÿ
		IF .cstDataWork.HandleSaveFail() &amp;&amp;åñëè îøèáêà îáðàáîòàíà
			RETURN .T.	&amp;&amp;âîçâðàùàåìñÿ ê ðåäàêòèðîâàíèþ
		ELSE
			
			*01.04.2004 18:40 -&gt;Ñîîáùàåì îá îøèáêå
			MESSAGEBOX([Â ïðîöåññå ñîõðàíåíèÿ ïðîèçîøëà îøèáêà. Èçìåíåíèÿ ñîõðàíåíû íå áóäóò.],16,[Îøèáêà...])
			*------------------------------------------------------------------------------
			
			*01.04.2004 18:40 -&gt;Îòìåíÿåì èçìåíåíèÿ
			.cstDataWork.Restore([lvFrmPartTvrEdit])
			.cstDataWork.Restore([lvJrnUsageEdit])
			.uRetVal = .F.
			.Hide()	
			*------------------------------------------------------------------------------
			
		ENDIF	
		*------------------------------------------------------------------------------
		
	ENDIF
	*------------------------------------------------------------------------------

ELSE

	*12.05.2004 00:36 -&gt;Îòìåíèì èçìåíåíèÿ
	.cstDataWork.Restore([lvPriceEdit])
	.cstDataWork.Restore([lvFrmPartTvrEdit])
	.cstDataWork.Restore([lvJrnUsageEdit])
	.uRetVal = .F.
	.Hide()
	*------------------------------------------------------------------------------
	
ENDIF
*------------------------------------------------------------------------------

ENDWITH
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE calculatepricemsu
WITH THIS

*15.06.2006 16:56 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL   lnOldMsuID, ;
		lnNewMsuID, ;
		lnCfMsu
***
lnOldMsuID = OLDVAL([MsuId],[lvFrmPartTvrEdit])
lnNewMsuID = EVAL([lvFrmPartTvrEdit.MsuId])
*------------------------------------------------------------------------------

*15.06.2006 16:59 -&gt; Åäèíèöà èçìåðåíèÿ íå èçìåíèëàñü
IF lnOldMsuID = lnNewMsuID
	RETURN
ENDIF
*------------------------------------------------------------------------------

*15.06.2006 16:59 -&gt; Îïðåäåëÿåì êîýôôèöèåíò äëÿ íîâîé ÅÈ ïî îòíîøåíèþ ê ñòàðîé
lnCfMsu = spGetCfMsu(lnOldMsuID, lnNewMsuID)
lnCfMsu = IIF(lnCfMsu = 0, 1, lnCfMsu)
*------------------------------------------------------------------------------

*15.06.2006 17:01 -&gt; Ïåðåñ÷èòûâàåì öåíû è êîëè÷åñòâî â ñîîòâåòñòâèè ñ êîýôôèöèåíòîì
.cntTvrBuy.txtTvrPrcBuy.Value = ROUND(.cntTvrBuy.txtTvrPrcBuy.Value * lnCfMsu, 4)
.cntTvrSale.txtTvrPrcSale.Value = ROUND(.cntTvrSale.txtTvrPrcSale.Value * lnCfMsu, 4)
.txtQnt.Value = ROUND(.txtQnt.Value / lnCfMsu, 3)
***
IF TYPE([.txtQntNetto]) == [O] AND !ISNULL(.txtQntNetto)
.txtQntNetto.Value = ROUND(.txtQntNetto.Value / lnCfMsu, 3)
ENDIF
*------------------------------------------------------------------------------

ENDWITH
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE calculatesum
*------------------------------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: frmPrimaryDocPartTvrEdit.CalculateSum
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: &lt;public&gt; Ðàññ÷åò ñóìì
*------------------------------------------------------------------------------
WITH This

*23.09.2005 12:25 -&gt; Ðàñ÷¸ò ñóììû ïîñòóïëåíèÿ
.CalculateSumBuy()
*------------------------------------------------------------------------------

*23.09.2005 12:25 -&gt; Ðàñ÷¸ò ñóììû ïðîäàæè
.CalculateSumSale()
*------------------------------------------------------------------------------

ENDWITH
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE calculatesumbuy
*------------------------------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: frmPrimaryDocPartTvrEdit.CalculateSumBuy
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: &lt;public&gt; Ðàñ÷¸ò ñóììû ïîñòóïëåíèÿ
*------------------------------------------------------------------------------
WITH This

*23.09.2005 12:25 -&gt; Ðàñ÷¸ò ñóììû ïîñòóïëåíèÿ
IF TYPE([.cntTvrBuy]) == [O] AND !ISNULL(.cntTvrBuy)
	.cntTvrBuy.txtTvrPrcSumBuy.Value = ROUND(.cntTvrBuy.txtTvrPrcBuy.Value * .txtQnt.Value,2)
ENDIF
*------------------------------------------------------------------------------

ENDWITH
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE calculatesumsale
*------------------------------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: frmPrimaryDocPartTvrEdit.CalculateSumSale
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: &lt;public&gt; Ðàñ÷¸ò ñóììû ïðîäàæè
*------------------------------------------------------------------------------
WITH This

*23.09.2005 12:25 -&gt; Ðàñ÷¸ò ñóììû ïðîäàæè
IF TYPE([.cntTvrSale]) == [O] AND !ISNULL(.cntTvrSale)
	.cntTvrSale.txtTvrPrcSumSale.Value = ROUND(.cntTvrSale.txtTvrPrcSale.Value * .txtQnt.Value,2)
ENDIF
*------------------------------------------------------------------------------

ENDWITH
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE calculatetime
*------------------------------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: FRMPRIMARYDOCPARTTVRSERVICEEDIT.CALCULATETIME
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;tuValue&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Ïåðåñ÷¸ò âðåìåíè èñïîëüçîâàíèÿ ðåñóðñà
* Last Editor.....: Âëàäèìèð Áîÿðñêèõ
* Last Edit.......: September 13, 2007
*------------------------------------------------------------------------------
LPARAMETERS tuValue

*13.09.2007 13:49 -&gt; Åñëè òèï åä.èçì. íå âðåìÿ - âûéäåì
IF lvTovarInfo.MsuType # 5
	RETURN
ENDIF
*------------------------------------------------------------------------------

*13.09.2007 13:43 -&gt; Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL   luRetVal
*------------------------------------------------------------------------------

*13.09.2007 13:43 -&gt; Õðàíèìàÿ ïðîöåäóðà, êîòîðàÿ ïîëó÷àåò ëèáî êîëè÷åñòâî ðåñóðñà, ëèáî êîíå÷íóþ äàòó
luRetVal = spGetResourceUsage(lvFrmPartTvrEdit.MsuID, lvJrnUsageEdit.UseStart, tuValue)
*------------------------------------------------------------------------------

*13.09.2007 13:45 -&gt; Èçìåíåíèå êîíå÷íîé äàòû
IF TYPE([luRetVal]) == [T]
	REPLACE UseEnd WITH luRetVal IN lvJrnUsageEdit
	ThisForm.cntJrnUsage.cntTxtCtlCalendarEndDate.txtText.Refresh()
ENDIF
*------------------------------------------------------------------------------

*13.09.2007 13:33 -&gt; Èçìåíåíèå êîëè÷åñòâà ðåñóðñà
IF TYPE([luRetVal]) == [N]
	REPLACE TvrQnt WITH luRetVal IN lvFrmPartTvrEdit
	ThisForm.txtQnt.Refresh()
ENDIF
*------------------------------------------------------------------------------

*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE calculatevatsum
*------------------------------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: frmPrimaryDocPartTvrEdit.CalculateVatSum
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: &lt;public&gt; Ðàññ÷åò ñóììû ÍÄÑ
*------------------------------------------------------------------------------
WITH This

*23.09.2005 12:18 -&gt; Ðàññ÷åò ÍÄÑ ïîñòóïëåíèÿ
.CalculateVatSumBuy()
*------------------------------------------------------------------------------

*23.09.2005 12:19 -&gt; Ðàññ÷åò ÍÄÑ ïðîäàæè
.CalculateVatSumSale()
*------------------------------------------------------------------------------

ENDWITH
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE calculatevatsumbuy
*------------------------------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: frmPrimaryDocPartTvrEdit.CalculateVatSumBuy
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: &lt;public&gt; Ðàññ÷åò ÍÄÑ ïîñòóïëåíèÿ
*------------------------------------------------------------------------------
WITH This

*23.09.2005 12:16 -&gt; Ðàññ÷åò ÍÄÑ ïîñòóïëåíèÿ
IF TYPE([.cntTvrBuy])==[O] AND !ISNULL(.cntTvrBuy)
	IF .cntTvrVat.txtTvrVATRate.Value # 0
		.cntTvrBuy.txtTvrVATSumBuy.Value = ROUND(.cntTvrBuy.txtTvrPrcSumBuy.Value * .cntTvrVat.txtTvrVATRate.Value / (100 + .cntTvrVat.txtTvrVATRate.Value),2)
	ELSE
		.cntTvrBuy.txtTvrVATSumBuy.Value = 0
	ENDIF
ENDIF
*------------------------------------------------------------------------------

ENDWITH
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE calculatevatsumsale
*------------------------------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: frmPrimaryDocPartTvrEdit.CalculateVatSumSale
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: &lt;public&gt; Ðàññ÷åò ÍÄÑ ïðîäàæè
*------------------------------------------------------------------------------
WITH This

*23.09.2005 12:17 -&gt; Ðàññ÷åò ÍÄÑ ïðîäàæè
IF TYPE([.cntTvrSale])==[O] AND !ISNULL(.cntTvrSale)
	IF .cntTvrVat.txtTvrVATRate.Value # 0
		.cntTvrSale.txtTvrVATSumSale.Value = ROUND(.cntTvrSale.txtTvrPrcSumSale.Value * .cntTvrVat.txtTvrVATRate.Value / (100 + .cntTvrVat.txtTvrVATRate.Value),2)
	ELSE
		.cntTvrSale.txtTvrVATSumSale.Value = 0
	ENDIF
ENDIF
*------------------------------------------------------------------------------

ENDWITH
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE cntenable
*------------------------------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: frmPrimaryDocPartTvrEdit.cntEnable
* Called by.......: &lt;frmPrimaryDocPartTvrEdit.Init&gt;
* Parameters......: &lt;tcObjectName - èìÿ îáúåêòà-êîíòåéíåðà,
*					 tnTop - âûñîòà îáúåêòà-êîíòåéíåðà&gt;
* Returns.........: &lt;lnNewTop&gt;
* Notes...........: Ðàçìåùåíèå íà ôîðìå êîíòåéíåðîâ ñîäåðæàùèõ öåíû, ñóììû, ÍÄÑ
*------------------------------------------------------------------------------
LPARAMETERS tcObjectName, tnTop

WITH This

*01.09.2005 12:23 -&gt; Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL lnNewTop
*------------------------------------------------------------------------------

*01.09.2005 12:00 -&gt; Íàñòðîèì âíåøíèé âèä îáúåêòà
.&amp;tcObjectName..Visible = .T.
***
.&amp;tcObjectName..Left = 5
.&amp;tcObjectName..Top = tnTop
***
lnNewTop = .&amp;tcObjectName..Top + .&amp;tcObjectName..Height + 5
*------------------------------------------------------------------------------

*01.09.2005 12:23 -&gt; Âîçâðàùàåì ðåçóëüòàò
RETURN lnNewTop
*------------------------------------------------------------------------------

ENDWITH
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE controlrenta
LOCAL lcUniqueName , lResultCnt, lResultCnt1
*21.04.2004 14:34 -&gt;Çàêðîåì Alias è óäàëèì âðåìåííóþ òàáëèöó

	*21.04.2004 14:05 -&gt;Âûïîëíèì õðàíèìóþ ïðîöåäóðó äëÿ ïîëó÷åíèÿ äàííûõ
	lcUniqueName = spFrmPartTvrJrnView([BYFRMID],lvFrmPartTvrEdit.FrmID)
	*------------------------------------------------------------------------------
*lvLocateUsedResu
*21.04.2004 14:08 -&gt;Òåïåðü îòêðîåì äàííûé Alias
USE (lcUniqueName) IN 0 ALIAS tmpPartResView
SELECT tmpPartResView
* èùåì ïîçèöèè ýòîãî òîâàðà, êîòîðûå åùå íå âåðíóëè
LOCATE ALL FOR tmpPartResView.TvrIDCalc = lvFrmPartTvrEdit.TvrIDCalc AND (ISNULL(tmpPartResView.UseEnd) OR empty(tmpPartResView.UseEnd))
lResultCnt  = FOUND()

IF lResultCnt
		* ïîçèöèÿ åñòü â ýòîì çàêàçå
		_PARAM = tmpPartResView.FrmPartTvr
		USE lvJrnUsageEdit IN 0 ALIAS lvJrnUsageEditNew
		CURSORSETPROP([BUFFERING],3,[lvJrnUsageEditNew])
		IF ISNULL(lvJrnUsageEditNew.UseEnd) OR empty(lvJrnUsageEditNew.UseEnd)
			* åñëè äàòà è âðåìÿ - ïóñòûå: âåðíóòü
			REPLACE UseEnd WITH DATETIME() IN lvJrnUsageEditNew
			lResultCnt1 = TABLEUPDATE(1,.t.,'lvJrnUsageEditNew')
			IF lResultCnt1
				lResultCnt  = _PARAM
			ENDIF
		ENDIF
		USE IN lvJrnUsageEditNew
	ELSE
		* èùåì åå â äðóãèõ çàêàçàõ
		_PARAM = lvFrmPartTvrEdit.TvrIDCalc
		USE lvLocateUsedResu  IN 0 ALIAS tmpPartResView1
		SELECT tmpPartResView1
		LOCATE ALL FOR tmpPartResView1.TvrIDCalc = lvFrmPartTvrEdit.TvrIDCalc ;
						 AND !tmpPartResView1.FrmId=lvFrmPartTvrEdit.FrmID
		lResultCnt  = .t.
		IF FOUND()
		   * åñëè íàøëè : äîáàâëÿòü íåëüçÿ
		   MESSAGEBOX('Ýòà ïîçèöèÿ óæå åñòü â îòêðûòîì çàêàçå:'+CHR(13)+'¹'+tmpPartResView1.FrmNum+;
		   			  ' îò '+ TTOC(tmpPartResView1.FrmDate),0+48,'Ïîçèöèÿ óæå èñïîëüçóåòñÿ')
			lResultCnt  = .f.
		ENDIF
		USE IN tmpPartResView1
ENDIF
USE IN tmpPartResView

IF FILE(lcUniqueName)
	ERASE (lcUniqueName)
ENDIF
*------------------------------------------------------------------------------
RETURN lResultCnt
ENDPROC
PROCEDURE Destroy
*------------------------------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: Tovar_v1.vcx
* Class.Module....: frmPrimaryDocPartTvrEdit.Destroy
* Called by.......: &lt;Sys Event&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........:
*------------------------------------------------------------------------------
WITH This

*12.01.2006 11:48 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL   lcIndependetFNM, ;
		lcDependetFNM
***
lcIndependetFNM = LEFT(.cMeasureUnitList,AT([;],.cMeasureUnitList)-1)
lcDependetFNM	= RIGHT(.cMeasureUnitList,LEN(.cMeasureUnitList)-AT([;],.cMeasureUnitList))
*------------------------------------------------------------------------------

*11.01.2006 17:05 -&gt;Çàêðîåì ñïðàâî÷íèê áàçîâûõ ÅÈ
USE IN SELECT([lvTvrMsuList])
*------------------------------------------------------------------------------

*12.01.2006 11:53 -&gt;Óäàëèì ñïðàâî÷íèêè
IF FILE([tmp\]+lcIndependetFNM+[.dbf])
ERASE ([tmp\]+lcIndependetFNM+[.dbf])
ENDIF
***
IF FILE([tmp\]+lcDependetFNM+[.dbf])
ERASE ([tmp\]+lcDependetFNM+[.dbf])
ENDIF
*------------------------------------------------------------------------------

*11.01.2006 17:05 -&gt;Âûïîëíèì ìåòîä ðîäèòåëüñêîãî êëàññà
DODEFAULT()
*------------------------------------------------------------------------------

ENDWITH
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE Init
*------------------------------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: FRMPRIMARYDOCPARTTVREDIT.INIT
* Called by.......: &lt;Sys Event&gt;
* Parameters......: &lt;tcCommand,tuParam1&gt;
* Returns.........: &lt;none&gt;
* Notes...........: &lt;~&gt;
*------------------------------------------------------------------------------
LPARAMETERS	tcCommand,tuParam1

*17.05.2004 01:26 -&gt;Âûïîëíèì ìåòîä ðîäèòåëüñêîãî êëàññà
DODEFAULT()
*------------------------------------------------------------------------------

WITH This

*12.05.2004 03:12 -&gt;Ñîõðàíèì êîìàíäó (ðåæèì ðàáîòû ñ äàííûìè)
.cMode = UPPER(ALLTRIM(tcCommand))
*------------------------------------------------------------------------------

*12.05.2004 00:33 -&gt;Çàãðóçèì äàííûå â Alias äëÿ ðåäàêòèðîâàíèÿ
DO CASE

	CASE .cMode==[ADD]
		
		*12.05.2004 00:32 -&gt;Äîáàâèì ïóñòóþ çàïèñü
		APPEND BLANK IN lvFrmPartTvrEdit
		APPEND BLANK IN lvJrnUsageEdit
		*------------------------------------------------------------------------------

		*12.05.2004 02:39 -&gt;Çàïèøåì èäåíòèôèêàòîð ðîäèòåëüñêîãî äîêóìåíòà
		REPLACE FrmID WITH tuParam1 IN lvFrmPartTvrEdit
		REPLACE TvrAttr WITH BITSET(lvFrmPartTvrEdit.TvrAttr,2) IN lvFrmPartTvrEdit
		*------------------------------------------------------------------------------
		REPLACE UseStart WITH DATETIME() IN lvJrnUsageEdit
		
	CASE INLIST(.cMode,[EDIT],[INFO],[DELE])
		
		*12.05.2004 00:31 -&gt;Çàãðóçèì äàííûå ñóùåñòâóþùåé çàïèñè
		_PARAM = tuParam1
		***
		REQUERY([lvFrmPartTvrEdit])
		REQUERY([lvJrnUsageEdit])
		*------------------------------------------------------------------------------

ENDCASE
*------------------------------------------------------------------------------

*01.09.2005 15:28 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	lnTop, ;
		lnOldTop
***
lnTop = .shpQnt.Top + .shpQnt.Height + 5
lnOldTop = lnTop
*------------------------------------------------------------------------------

*19.08.2005 12:16 -&gt; Çàêðîåì Alias
USE IN IIF(USED([lvFrmTypeInfoByFrm]),[lvFrmTypeInfoByFrm],0)
*------------------------------------------------------------------------------

*19.08.2005 12:12 -&gt; Îòêðîåì Alias ñ èíôîðìàöèåé î òèïå äîêóìåíòà
_PARAM = lvFrmPartTvrEdit.FrmID
***
USE lvFrmTypeInfoByFrm IN 0
*------------------------------------------------------------------------------

*07.08.2006 10:09 -&gt;Îïðåäåëèì OU ïî ID ôîðìû
USE lvFrmEdit IN 0
***
DO CASE
	CASE lvFrmTypeInfoByFrm.FrmTypeDirection = 2
		.nOUID = lvFrmEdit.PointIspOUID
	CASE INLIST(lvFrmTypeInfoByFrm.FrmTypeDirection,1,3)
		.nOUID = lvFrmEdit.PointEmiOUID
ENDCASE
*------------------------------------------------------------------------------

*15.06.2006 15:45 -&gt; Ñîõðàíÿåì òèï ïðàéñà äëÿ äîêóìåíòà
.FrmPrcType = IIF(ISNULL(lvFrmTypeInfoByFrm.FrmPrcTypeID),1,lvFrmTypeInfoByFrm.FrmPrcTypeID)
*------------------------------------------------------------------------------

*15.08.2007 17:40 -&gt; Ïîêàæåì êîíòåéíåð ñ èñïîëüçîâàíèåì ðåñóðñà
lnTop = .CntEnable([cntJrnUsage],lnTop)
*------------------------------------------------------------------------------
	
*01.09.2005 15:24 -&gt; Äîáàâëÿåì êîíòåéíåð ñ öåíîé ïîñòóïëåíèÿ
IF lvFrmTypeInfoByFrm.ContainPriceBuy
*	lnTop = .CntEnable([cntTvrBuy],lnTop)
*	lnTop = .CntEnable([cntTvrBuy],0)
ENDIF
*------------------------------------------------------------------------------
*01.09.2005 15:25 -&gt; Äîáàâëÿåì êîíòåéíåð ñ öåíîé ïðîäàæè
IF lvFrmTypeInfoByFrm.ContainPriceSale
*	lnTop = .CntEnable([cntTvrSale],lnTop)
ENDIF
*------------------------------------------------------------------------------

*01.09.2005 15:29 -&gt; Íà ôîðìå ïðîèçîøëè èçìåíåíèÿ
IF lnTop # lnOldTop
	*{
	*lnTop = .CntEnable([cntTvrVat],lnTop)
	***
	.cntCancelSaveHandled.Top = 88 &amp;&amp;lnTop
	.Height = .cntCancelSaveHandled.Top + .cntCancelSaveHandled.Height + 5
	*}
ENDIF
*------------------------------------------------------------------------------

*01.09.2005 16:11 -&gt; Ïðîñ÷èòàåì ñóììû è ÍÄÑ
.CalculateSum()
.CalculateVatSum()
*------------------------------------------------------------------------------

*19.08.2005 12:15 -&gt; Íàñòðîèì âíåøíèé âèä ôîðìû
DO CASE
	CASE .cMode = [ADD]
		.Caption = [Äîáàâëåíèå]
		.Icon = FULLPATH([frmprimarydocadd.ico])
	CASE .cMode = [EDIT]
		.Caption = [Ðåäàêòèðîâàíèå]
		.Icon = FULLPATH([frmprimarydocedit.ico])
	CASE .cMode = [INFO]
		.Caption = [Ïðîñìîòð]
		.Icon = FULLPATH([frmprimarydocinfo.ico])
		ThisForm.cntCancelSaveHandled.cmdOk.Enabled = .F.
	CASE .cMode = [DELE]
		.Caption = [Óäàëåíèå]
		.Icon = FULLPATH([frmprimarydocdele.ico])
		ThisForm.cntCancelSaveHandled.cmdOk.Caption = [Óäàëèòü]
ENDCASE
***
.Caption = .Caption + [ îáîðóäîâàíèÿ â ïðîêàò]
*------------------------------------------------------------------------------

ENDWITH
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE Load
*------------------------------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: FRMPRIMARYDOCPARTTVREDIT.LOAD
* Called by.......: &lt;Sys Event&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: &lt;~&gt;
*------------------------------------------------------------------------------

*17.05.2004 01:32 -&gt;Âûïîëíèì ìåòîä ðîäèòåëüñêîãî êëàññà
DODEFAULT()
*------------------------------------------------------------------------------

*17.05.2004 01:32 -&gt;Îòêðîåì ÁÄ è óñòàíîâèì å¸ â êà÷åñòâå òåêóùåé
IF !DBUSED([BASIS])
	OPEN DATABASE BASIS
ENDIF
***
SET DATABASE TO BASIS
*------------------------------------------------------------------------------

*16.08.2007 12:07 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
PRIVATE _PARAM
*------------------------------------------------------------------------------

*17.05.2004 01:32 -&gt;Îòêðîåì Alias äëÿ ðåäàêòèðîâàíèÿ áåç äàííûõ
USE lvFrmPartTvrEdit IN 0 NODATA
USE lvJrnUsageEdit IN 0 NODATA
*------------------------------------------------------------------------------

*17.05.2004 01:34 -&gt; Îòêðûâàåì ñïðàâî÷íèê óñëóã
_PARAM = 3	&amp;&amp; Óñëóãà
USE lvTovarListParam IN 0 ALIAS TovarList
*------------------------------------------------------------------------------

*16.08.2007 12:08 -&gt; Îòêðûâàåì ñïðàâî÷íèê ðåñóðñîâ
_PARAM = 8	&amp;&amp; Ðåñóðñ
USE lvTovarListParam IN 0 ALIAS ResourceList
*------------------------------------------------------------------------------
USE lvServByTvrView IN 0 NODATA
*17.05.2004 01:34 -&gt; Îòêðûâàåì îñòàëüíûå ñïðàâî÷íèêè
USE lvCurTypeList IN 0
***
This.cMeasureUnitList = spGetBaseMsuList(0)
USE (LEFT(This.cMeasureUnitList,AT([;],This.cMeasureUnitList)-1)) IN 0 ALIAS lvTvrMsuList
*------------------------------------------------------------------------------

*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE Resize
NODEFAULT
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1>Class</reserved1>
		<reserved2>21</reserved2>
		<reserved3>cmode
cmeasureunitlist
frmprctype Íîìåð ïðàéñà äëÿ ýòîãî äîêóìåíòà
nouid èäåíòèôèêàòîð ïîäðàçäåëåíèÿ, ïî êîòîðîìó áóäåò ïðîèñõîäèòü äâèæåíèå òîâàðà
*cntenable 
*calculatesum &lt;public&gt; Ðàññ÷åò ñóìì
*calculatevatsumbuy &lt;public&gt; Ðàññ÷åò ÍÄÑ ïîñòóïëåíèÿ
*calculatevatsumsale &lt;public&gt; Ðàññ÷åò ÍÄÑ ïðîäàæè
*calculatevatsum &lt;public&gt; Ðàññ÷åò ñóììû ÍÄÑ
*calculatesumbuy &lt;public&gt; Ðàññ÷åò ñóììû ïîñòóïëåíèÿ
*calculatesumsale &lt;public&gt; Ðàññ÷åò ñóììû ïðîäàæè
*calculatepricemsu ðàññ÷åò öåíû åäèíèöû èçìåðåíèÿ
*savepricesale 
*calculatetime 
*controlrenta Ïðîâåðÿåì íàëè÷èå ýòîãî òîâàðà â ýòîé íàêëàäíîé
</reserved3>
		<reserved4/>
		<reserved5/>
		<reserved6>Pixels</reserved6>
		<reserved7>ðåäàêò ïîçèöèè ïî èñïîëüç ðåñóðñà</reserved7>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1MV0RE0B8</uniqueid>
		<timestamp>930714387</timestamp>
		<class>cnttvrsale</class>
		<classloc>primarydoc_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>CntTvrSale</objname>
		<parent>frmprimarydocparttvrserviceedit</parent>
		<properties>Top = 0
Left = 5
Height = 0
Enabled = .F.
Visible = .F.
TabIndex = 16
ZOrderSet = 0
Name = "CntTvrSale"
ShpSale.Name = "ShpSale"
lblTvrPrcSale.Name = "lblTvrPrcSale"
txtTvrPrcSale.Name = "txtTvrPrcSale"
txtTvrPrcSumSale.Name = "txtTvrPrcSumSale"
txtTvrVATSumSale.Name = "txtTvrVATSumSale"
lblTvrPrcSumSale.Name = "lblTvrPrcSumSale"
lblTvrVATSumSale.Name = "lblTvrVATSumSale"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_25O11OEHM</uniqueid>
		<timestamp>930714387</timestamp>
		<class>cntjrnusage</class>
		<classloc>primarydoc_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>cntJrnUsage</objname>
		<parent>frmprimarydocparttvrserviceedit</parent>
		<properties>Top = 0
Left = 5
Height = 0
Enabled = .F.
Visible = .F.
TabIndex = 14
ZOrderSet = 1
Name = "cntJrnUsage"
shpJrnUsage.Name = "shpJrnUsage"
lblFrom.Name = "lblFrom"
cntTxtCtlCalendarStartDate.txtText.Name = "txtText"
cntTxtCtlCalendarStartDate.cmdShow.Name = "cmdShow"
cntTxtCtlCalendarStartDate.Name = "cntTxtCtlCalendarStartDate"
lblTo.Name = "lblTo"
cntTxtCtlCalendarEndDate.txtText.Name = "txtText"
cntTxtCtlCalendarEndDate.cmdShow.Name = "cmdShow"
cntTxtCtlCalendarEndDate.Name = "cntTxtCtlCalendarEndDate"
lblTimeUsage.Name = "lblTimeUsage"
chkTypeUsage.Alignment = 0
chkTypeUsage.Name = "chkTypeUsage"
lblTypeUsage.Name = "lblTypeUsage"
</properties>
		<protected/>
		<methods>PROCEDURE cntTxtCtlCalendarEndDate.cmdShow.Click
DODEFAULT()
*13.09.2007 13:14 -&gt; Ïåðåñ÷¸ò âðåìåíè èñïîëüçîâàíèÿ ðåñóðñà
ThisForm.CalculateTime(This.Parent.txtText.Value)

ENDPROC
PROCEDURE cntTxtCtlCalendarEndDate.txtText._handleanychange
*13.09.2007 13:14 -&gt; Ïåðåñ÷¸ò âðåìåíè èñïîëüçîâàíèÿ ðåñóðñà
ThisForm.CalculateTime(This.Value)
*------------------------------------------------------------------------------
ENDPROC
PROCEDURE cntTxtCtlCalendarEndDate.txtText.showcalendar
LPARAMETERS tnRow, tnCol
DODEFAULT(tnRow, tnCol)
*13.09.2007 13:14 -&gt; Ïåðåñ÷¸ò âðåìåíè èñïîëüçîâàíèÿ ðåñóðñà
ThisForm.CalculateTime(This.Value)
*------------------------------------------------------------------------------
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1MV0RE0B7</uniqueid>
		<timestamp>930714387</timestamp>
		<class>cnttvrvat</class>
		<classloc>primarydoc_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>CntTvrVat</objname>
		<parent>frmprimarydocparttvrserviceedit</parent>
		<properties>Top = 0
Left = 5
Height = 0
Enabled = .F.
Visible = .F.
TabIndex = 17
ZOrderSet = 2
Name = "CntTvrVat"
shpVat.Name = "shpVat"
lblTvrVATRate.Name = "lblTvrVATRate"
txtTvrVATRate.Name = "txtTvrVATRate"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1Q20QIAM4</uniqueid>
		<timestamp>930714387</timestamp>
		<class>cnttvrexpdate</class>
		<classloc>primarydoc_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>cntTvrExpDate</objname>
		<parent>frmprimarydocparttvrserviceedit</parent>
		<properties>Top = 52
Left = 5
Height = 33
Enabled = .F.
Visible = .F.
TabIndex = 15
ZOrderSet = 3
Name = "cntTvrExpDate"
shpExpDate.Name = "shpExpDate"
lblTvrExpDate.Name = "lblTvrExpDate"
comTxtCtlCalendarExpDate.txtText.Name = "txtText"
comTxtCtlCalendarExpDate.cmdShow.Name = "cmdShow"
comTxtCtlCalendarExpDate.Name = "comTxtCtlCalendarExpDate"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2760QT4T3</uniqueid>
		<timestamp>930714387</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblTLU</objname>
		<parent>frmprimarydocparttvrserviceedit</parent>
		<properties>FontBold = .T.
Caption = "Øòðèõ-êîä:"
Enabled = .F.
Left = 104
Top = 8
Visible = .F.
TabIndex = 12
ZOrderSet = 6
Name = "lblTLU"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18A02DMUV</uniqueid>
		<timestamp>930714387</timestamp>
		<class>shp</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>shape</baseclass>
		<objname>shpTvr</objname>
		<parent>frmprimarydocparttvrserviceedit</parent>
		<properties>Top = 40
Left = 5
Height = 45
Width = 413
SpecialEffect = 0
ZOrderSet = 7
Name = "shpTvr"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_25P0Y3LJR</uniqueid>
		<timestamp>930714387</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblResource</objname>
		<parent>frmprimarydocparttvrserviceedit</parent>
		<properties>FontBold = .T.
Caption = "Ðåñóðñ:"
Left = 10
Top = 55
TabIndex = 7
ZOrderSet = 8
Name = "lblResource"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18I0M4ORT</uniqueid>
		<timestamp>930714387</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblTvr</objname>
		<parent>frmprimarydocparttvrserviceedit</parent>
		<properties>FontBold = .T.
Caption = "Óñëóãà:"
Enabled = .F.
Left = 10
Top = 7
Visible = .F.
TabIndex = 8
ZOrderSet = 9
Name = "lblTvr"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_25P0Y3LJB</uniqueid>
		<timestamp>930714387</timestamp>
		<class>cntidctlgrid</class>
		<classloc>comidctl_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>cntIdCtlGridResource</objname>
		<parent>frmprimarydocparttvrserviceedit</parent>
		<properties>Comment = "â äàëüíåéøåì èñïîëüçîâàòü lvFrmPartTvrEdit.TvrId"
Top = 52
Left = 60
Width = 348
Height = 23
TabIndex = 2
ZOrderSet = 10
_rsaliasname = ResourceList
_rsfieldnameid = TvrID
_rsfieldnametext = TvrNM
_controlsourcetype = 1
_controlsource = lvFrmPartTvrEdit.TvrIdCalc
Name = "cntIdCtlGridResource"
txtText.Height = 23
txtText.Left = 0
txtText.Top = 0
txtText.Width = 300
txtText._highlightobject = .parent.parent.lblResource
txtText.Name = "txtText"
cmdShow.Top = 0
cmdShow.Left = 303
cmdShow.Name = "cmdShow"
cmdClear.Top = 0
cmdClear.Left = 326
cmdClear.Name = "cmdClear"
CmdTree.Name = "CmdTree"
Olecommprox1.Top = 0
Olecommprox1.Left = 36
Olecommprox1.Height = 16
Olecommprox1.Width = 38
Olecommprox1.Name = "Olecommprox1"
</properties>
		<protected/>
		<methods>PROCEDURE _handleanychange
DODEFAULT()
_PARAM= this.value
REQUERY('lvServByTvrView')
thisform.cntIdCtlGridTvr.setvalue(lvServByTvrView.TvrId)
IF NOT EMPTY(_PARAM)
thisform.cntcancelsavehandled.cmdOk.Click()
		thisform.Hide()

ENDIF

ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18A02PAKD</uniqueid>
		<timestamp>930714387</timestamp>
		<class>cntidctlgrid</class>
		<classloc>comidctl_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>cntIdCtlGridTvr</objname>
		<parent>frmprimarydocparttvrserviceedit</parent>
		<properties>Comment = "â äàëüíåéøåì èñïîëüçîâàòü lvFrmPartTvrEdit.TvrIdCalc"
Top = 4
Left = 60
Width = 348
Height = 23
Enabled = .F.
Visible = .F.
TabIndex = 3
ZOrderSet = 11
_controlsource = lvFrmPartTvrEdit.TvrId
_controlsourcetype = 1
_rsaliasname = lvServByTvrView
_rsfieldnameid = TvrID
_rsfieldnametext = TvrNM
_grdinfoparams = oMgrTovar;TVR;INFO
_grdaddparams = oMgrTovar;TVR;FASTADD;0;lvTvrInCntViewRepl
Name = "cntIdCtlGridTvr"
txtText.Enabled = .F.
txtText.Height = 23
txtText.Left = 0
txtText.Top = 0
txtText.Width = 300
txtText._highlightobject = .parent.parent.lblTvr
txtText.Name = "txtText"
cmdShow.Top = 0
cmdShow.Left = 303
cmdShow.Enabled = .F.
cmdShow.Name = "cmdShow"
cmdClear.Top = 0
cmdClear.Left = 326
cmdClear.Enabled = .F.
cmdClear.Name = "cmdClear"
CmdTree.Name = "CmdTree"
Olecommprox1.Top = 0
Olecommprox1.Left = 36
Olecommprox1.Height = 16
Olecommprox1.Width = 38
Olecommprox1.Name = "Olecommprox1"
</properties>
		<protected/>
		<methods>PROCEDURE _refreshrelatedobjects
*------------------------------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRINARYDOC_V1.VCX
* Class.Module....: CNTIDCTLGRIDTVR._RefreshRelatedObjects
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Îáðàáîòêà èçìåíåíèÿ çíà÷åíèÿ ýëåìåíòà.
*------------------------------------------------------------------------------

*19.08.2005 12:31 -&gt; Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	lnTvrID, ;
		lcMsuTNM, ;
		lcIndependetFNM, ;
		lcDependetFNM, ;
		_PARAM, ;
		_PARAM_PRCTYPE
		
***
lnTvrID = This.Value
*------------------------------------------------------------------------------

WITH ThisForm

*17.04.2004 14:52 -&gt;Ïîëó÷èì èíôîðìàöèþ î âûáðàííîì òîâàðå
USE IN IIF(USED([lvTovarInfo]),[lvTovarInfo],0)
***
_PARAM = lnTvrID
_PARAM_PRCTYPE = .FrmPrcType
USE lvTovarInfo IN 0
*------------------------------------------------------------------------------

*11.01.2006 17:05 -&gt;Çàêðîåì ñïðàâî÷íèê áàçîâûõ ÅÈ
USE IN SELECT([lvTvrMsuList])

*16.01.2006 14:38 -&gt;Îïðåäåëèì íàçâàíèÿ òàáëèö ñî ñïðàâî÷íèêàìè
lcIndependetFNM = LEFT(.cMeasureUnitList,AT([;],.cMeasureUnitList)-1)
lcDependetFNM	= RIGHT(.cMeasureUnitList,LEN(.cMeasureUnitList)-AT([;],.cMeasureUnitList))
*------------------------------------------------------------------------------

*12.01.2006 11:53 -&gt;Óäàëèì ñïðàâî÷íèêè
IF FILE([tmp\]+lcIndependetFNM+[.dbf])
ERASE ([tmp\]+lcIndependetFNM+[.dbf])
ENDIF
***
IF FILE([tmp\]+lcDependetFNM+[.dbf])
ERASE ([tmp\]+lcDependetFNM+[.dbf])
ENDIF
*------------------------------------------------------------------------------

.cMeasureUnitList = spGetBaseMsuList(lvTovarInfo.MsuID)
lcMsuTNM = RIGHT(.cMeasureUnitList,LEN(.cMeasureUnitList)-AT([;],.cMeasureUnitList))
USE (lcMsuTNM) IN 0 ALIAS [lvTvrMsuList]
*------------------------------------------------------------------------------

*17.04.2004 14:53 -&gt;Óñòàíàâëèâàåì åäèíèöó èçìåðåíèÿ ïî óìîë÷àíèþ
IF .cMode==[ADD] AND lvTovarInfo.MsuID # 0 &amp;&amp; AND .cntIdCtlGridMsu.Value = 0
	.cntIdCtlGridMsu.SetValue(lvTovarInfo.MsuID)
ENDIF	
*------------------------------------------------------------------------------

*17.04.2004 15:06 -&gt; Óñòàíîâèì âåëè÷èíó ÍÄÑ ïî óìîë÷àíèþ
IF .cntTvrVat.txtTvrVATRate.Value # lvTovarInfo.tvrVATRate
	.cntTvrVat.txtTvrVATRate.Value = lvTovarInfo.tvrVATRate
ENDIF	
*------------------------------------------------------------------------------

*01.09.2005 17:26 -&gt; Óñòàíàâëèâàåì öåíû
*!*	IF TYPE([ThisForm.cntTvrBuy]) == [O] AND !ISNULL(.cntTvrBuy)
*!*		.cntTvrBuy.SetPrice(.nOUID,lnTvrID)
*!*	ENDIF
***
IF TYPE([ThisForm.cntTvrSale]) == [O] AND !ISNULL(.cntTvrSale) AND TYPE([.FrmPrcType]) == [N]
	IF .FrmPrcType = 0 OR EMPTY(.FrmPrcType) OR ISNULL(.FrmPrcType)
		MESSAGEBOX([Ïðàéñ äëÿ äàííîãî äîêóìåíòà íå íàéäåí.],48,[Ïðåäóïðåæäåíèå])
	ELSE
		.cntTvrSale.SetPrice(lnTvrID,.FrmPrcType)
	ENDIF
ENDIF
*------------------------------------------------------------------------------

ENDWITH
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18A02DMUV</uniqueid>
		<timestamp>930714387</timestamp>
		<class>shp</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>shape</baseclass>
		<objname>shpQnt</objname>
		<parent>frmprimarydocparttvrserviceedit</parent>
		<properties>Top = -37
Left = 5
Height = 61
Width = 413
Enabled = .F.
Visible = .F.
SpecialEffect = 0
ZOrderSet = 12
Name = "shpQnt"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18I0M4ORT</uniqueid>
		<timestamp>930714387</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblQnt</objname>
		<parent>frmprimarydocparttvrserviceedit</parent>
		<properties>FontBold = .T.
Caption = "Êîëè÷åñòâî:"
Enabled = .F.
Left = 10
Top = -1
Visible = .F.
TabIndex = 10
ZOrderSet = 13
Name = "lblQnt"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_R020K4VL1</uniqueid>
		<timestamp>928953906</timestamp>
		<class>txt</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>txtQnt</objname>
		<parent>frmprimarydocparttvrserviceedit</parent>
		<properties>Comment = " â äàëüíåéøåì èñïîëüçîâàòü TvrQntNetto"
ControlSource = "lvFrmPartTvrEdit.TvrQnt"
Enabled = .F.
Left = 140
TabIndex = 5
Top = -4
Visible = .F.
ZOrderSet = 14
_highlightobject = .parent.lblQnt
_convertcommatopoint = .T.
_usedbfieldproperty = .T.
Name = "txtQnt"
</properties>
		<protected/>
		<methods>PROCEDURE _handleanychange
*17.01.2006 09:52 -&gt;Ðàññ÷èòàåì ñóììû
ThisForm.CalculateSum()
*------------------------------------------------------------------------------

*13.09.2007 13:14 -&gt; Ïåðåñ÷¸ò âðåìåíè èñïîëüçîâàíèÿ ðåñóðñà
*ThisForm.CalculateTime(This.Value)
*------------------------------------------------------------------------------
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18A02PAKD</uniqueid>
		<timestamp>930714387</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblMsu</objname>
		<parent>frmprimarydocparttvrserviceedit</parent>
		<properties>FontBold = .T.
Caption = "Åäèíèöà èçìåðåíèÿ:"
Enabled = .F.
Left = 10
Top = -29
Visible = .F.
TabIndex = 9
ZOrderSet = 15
Name = "lblMsu"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18M0216E7</uniqueid>
		<timestamp>930714387</timestamp>
		<class>cntcancelsavehandled</class>
		<classloc>baseform_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>cntCancelSaveHandled</objname>
		<parent>frmprimarydocparttvrserviceedit</parent>
		<properties>Top = 88
Left = 212
TabIndex = 11
ZOrderSet = 16
Name = "cntCancelSaveHandled"
cmdCancel.Name = "cmdCancel"
cmdOk.Name = "cmdOk"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18A02DMUV</uniqueid>
		<timestamp>930714387</timestamp>
		<class>cntidctlgrid</class>
		<classloc>comidctl_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>cntIdCtlGridMsu</objname>
		<parent>frmprimarydocparttvrserviceedit</parent>
		<properties>Top = 0
Left = 140
Enabled = .F.
Visible = .F.
TabIndex = 4
ZOrderSet = 17
_controlsource = lvFrmPartTvrEdit.MsuId
_controlsourcetype = 1
_rsaliasname = lvTvrMsuList
_rsfieldnameid = MsuID
_rsfieldnametext = MsuNM
Name = "cntIdCtlGridMsu"
txtText.Enabled = .F.
txtText._highlightobject = .parent.parent.lblMsu
txtText.Name = "txtText"
cmdShow.Enabled = .F.
cmdShow.Name = "cmdShow"
cmdClear.Enabled = .F.
cmdClear.Name = "cmdClear"
CmdTree.Name = "CmdTree"
Olecommprox1.Top = 0
Olecommprox1.Left = 36
Olecommprox1.Height = 16
Olecommprox1.Width = 38
Olecommprox1.Name = "Olecommprox1"
</properties>
		<protected/>
		<methods>PROCEDURE _refreshrelatedobjects
*30.09.2005 12:25 -&gt; Ðàñ÷¸ò öåíû åäèíèöû èçìåðåíèÿ
ThisForm.CalculatePriceMsu()
ThisForm.CalculateSum()
*------------------------------------------------------------------------------
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2760QT4T4</uniqueid>
		<timestamp>930714387</timestamp>
		<class>comtxtctlcalclentluidbytlu</class>
		<classloc>primarydoc_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>cnmbytlu</objname>
		<parent>frmprimarydocparttvrserviceedit</parent>
		<properties>Top = 5
Left = 175
Width = 233
Height = 23
TabIndex = 1
ZOrderSet = 18
Name = "cnmbytlu"
txtText.Height = 23
txtText.Left = 0
txtText.Top = 0
txtText.Width = 169
txtText.NullDisplay = "Øòðèõêîä íåîïðåäåëåííûé"
txtText.Name = "txtText"
lblLen.Left = 171
lblLen.Top = 3
lblLen.Name = "lblLen"
cmdFind.Top = 0
cmdFind.Left = 188
cmdFind.Name = "cmdFind"
cmdClear.Top = 0
cmdClear.Left = 211
cmdClear.Name = "cmdClear"
</properties>
		<protected/>
		<methods>PROCEDURE _handleanychange
*15.06.2006 16:50 -&gt; Îáíîâèì òîâàð è ïåðåéäåì â ïîëå ðåäàêòèðîâàíèÿ êîëè÷åñòâà
WITH Thisform
	**.cntIdCtlGridTvr.SetValue(This.nTvrID)
	.cntIdCtlGridResource.SetValue(This.nTvrID)
	CLEAR TYPEAHEAD
	.cntIdCtlGridTvr.SetFocus()
ENDWITH
*------------------------------------------------------------------------------
ENDPROC
PROCEDURE Refresh
PARAMETERS tnTvrID
IF PCOUNT()=1

	*15.06.2006 16:47 -&gt; Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
	PRIVATE	_PARAM
	***
	_PARAM = tnTvrID
	*------------------------------------------------------------------------------

	*19.08.2005 11:37 -&gt; Íàéä¸ì ØÊ ïî èäåíòèôèêàòîðó òîâàðà
	IF USED([lvTovarLookUpByID])
		REQUERY([lvTovarLookUpByID])
	ELSE
		USE lvTovarLookUpByID IN 0
	ENDIF
	***
	IF RECCOUNT([lvTovarLookUpByID]) &gt; 0
		This.txtText.Value = lvTovarLookUpByID.TLU
	ELSE
		This.txtText.Value = .NULL.
	ENDIF
	*------------------------------------------------------------------------------
	
ENDIF

*15.06.2006 16:49 -&gt; Âûïîëíèì ìåòîä ðîäèòåëüñêîãî êëàññà
DODEFAULT()
*------------------------------------------------------------------------------
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2760QT4T7</uniqueid>
		<timestamp>930714387</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>LblTvrId</objname>
		<parent>frmprimarydocparttvrserviceedit</parent>
		<properties>FontBold = .T.
Caption = "Êîä èëè Íîìåð"
Left = 6
Top = 8
TabIndex = 13
ZOrderSet = 19
Name = "LblTvrId"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1MV0RE0BB</uniqueid>
		<timestamp>930714387</timestamp>
		<class>cnttvrbuy</class>
		<classloc>primarydoc_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>CntTvrBuy</objname>
		<parent>frmprimarydocparttvrserviceedit</parent>
		<properties>Top = 83
Left = 5
Height = 0
Enabled = .F.
Visible = .F.
TabIndex = 6
ZOrderSet = 21
Name = "CntTvrBuy"
ShpBuy.Visible = .F.
ShpBuy.Name = "ShpBuy"
lblTvrPrcBuy.Enabled = .F.
lblTvrPrcBuy.Visible = .F.
lblTvrPrcBuy.Name = "lblTvrPrcBuy"
txtTvrPrcBuy.Enabled = .F.
txtTvrPrcBuy.Visible = .F.
txtTvrPrcBuy.Name = "txtTvrPrcBuy"
lblTvrPrcSumBuy.Enabled = .F.
lblTvrPrcSumBuy.Visible = .F.
lblTvrPrcSumBuy.Name = "lblTvrPrcSumBuy"
txtTvrPrcSumBuy.Visible = .F.
txtTvrPrcSumBuy.Name = "txtTvrPrcSumBuy"
lblTvrVATSumBuy.Enabled = .F.
lblTvrVATSumBuy.Visible = .F.
lblTvrVATSumBuy.Name = "lblTvrVATSumBuy"
txtTvrVATSumBuy.Visible = .F.
txtTvrVATSumBuy.Name = "txtTvrVATSumBuy"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_27M0VHM6V</uniqueid>
		<timestamp>930714387</timestamp>
		<class>olecommscanner</class>
		<classloc>olecomm.vcx</classloc>
		<baseclass>olecontrol</baseclass>
		<objname>Olecommscanner</objname>
		<parent>frmprimarydocparttvrserviceedit</parent>
		<properties>Top = 84
Left = 96
Height = 48
Width = 58
cbindobj = thisform.cnmbytlu
Name = "Olecommscanner"
</properties>
		<protected/>
		<methods>PROCEDURE OnComm
*** ActiveX Control Event ***

*28.04.2006 11:24 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	lcObjectNM, ;
		lcMsg
*------------------------------------------------------------------------------

WITH This

*12.05.2006 09:36 -&gt;×èòàåì êîä
lcMsg = ._Read()
*------------------------------------------------------------------------------
IF NOT EMPTY(lcMsg)
	*12.05.2006 09:40 -&gt;Ïîêàçûâàåì ïîëó÷åííûé êîä
	thisform.cnmbytlu.cBarCode   = []
	thisform.cnmbytlu.Refresh()
		
	thisform.cnmbytlu.cBarCode   = lcMsg
	thisform.cnmbytlu.Refresh()
	thisform.cnmbytlu.SetFocus()
	*------------------------------------------------------------------------------
	KEYBOARD '{ENTER}'
ENDIF
ENDWITH
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************

ENDPROC
</methods>
		<objcode/>
		<ole>0M8R4KGxGuEAAAAAAAAAAAAAAAAAAAAAPgADAP7/CQAGAAAAAAAAAAAAAAABAAAAAQAAAAAAAAAAEAAAAgAAAAEAAAD+////AAAAAAAAAAD////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////9/////v////7////+/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////1IAbwBvAHQAIABFAG4AdAByAHkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAWAAUA//////////8BAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJD7eYZmL8gBAwAAAMABAAAAAAAAAwBPAGwAZQBPAGIAagBlAGMAdABEAGEAdABhAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB4AAgEDAAAAAgAAAP////8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAAAAAADAEEAYwBjAGUAcwBzAE8AYgBqAFMAaQB0AGUARABhAHQAYQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJgACAP///////////////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAABLAAAAAAAAAAMAQwBoAGEAbgBnAGUAZABQAHIAbwBwAHMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcAAIA////////////////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAKsAAAAAAAAABAAAAAIAAAD+////BQAAAP7///8GAAAA/v////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8AVopkbiwbEIK2AAAAAAAUIUM0EggAAADtAwAA7QMAAAFWimQAAAYAAAABAAAEAAAAAgEAgCUAAAAACAAAAAAASwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABMAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAABDb3B5cmlnaHQgKGMpIDE5OTQgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAACADAAAAEhhbmRzaGFraW5nAAkAAABJCgAAAAEAAAALAAAAUlRocmVzaG9sZAAJAAAASQoAAAABAAAACgAAAQAAAD8AAAANAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABSVFNFbmFibGUABQAAAEwBAAAACQAAAFNldHRpbmdzABMAAABIAAAAAAoAAAA5NjAwLG4sOCwxCwAAAFNUaHJlc2hvbGQACQAAAEkKAAAAAAAAAAoAAABFT0ZFbmFibGUABQAAAEwBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA==</ole>
		<ole2>OLEObject = C:\WINDOWS\system32\mscomm32.ocx
</ole2>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>COMMENT</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>0</timestamp>
		<class/>
		<classloc/>
		<baseclass/>
		<objname>frmprimarydocparttvrserviceedit</objname>
		<parent/>
		<properties>Arial, 0, 9, 5, 15, 12, 32, 3, 0
Arial, 1, 9, 6, 15, 12, 32, 3, 0
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1RI0VCDKF</uniqueid>
		<timestamp>930901601</timestamp>
		<class>frmprimarydocparttvredit</class>
		<classloc>primarydoc_v1.vcx</classloc>
		<baseclass>form</baseclass>
		<objname>frmaccountingtvredit</objname>
		<parent/>
		<properties>Height = 305
Width = 426
DoCreate = .T.
nprcbuy = 0
Name = "frmaccountingtvredit"
cnttvrvat.shpVat.Name = "shpVat"
cnttvrvat.lblTvrVATRate.Name = "lblTvrVATRate"
cnttvrvat.txtTvrVATRate.Name = "txtTvrVATRate"
cnttvrvat.Top = 166
cnttvrvat.Left = 5
cnttvrvat.TabIndex = 9
cnttvrvat.ZOrderSet = 1
cnttvrvat.Name = "cnttvrvat"
cnttvrexpdate.shpExpDate.Name = "shpExpDate"
cnttvrexpdate.lblTvrExpDate.Name = "lblTvrExpDate"
cnttvrexpdate.comTxtCtlCalendarExpDate.txtText.Name = "txtText"
cnttvrexpdate.comTxtCtlCalendarExpDate.cmdShow.Name = "cmdShow"
cnttvrexpdate.comTxtCtlCalendarExpDate.Name = "comTxtCtlCalendarExpDate"
cnttvrexpdate.Top = 166
cnttvrexpdate.Left = 5
cnttvrexpdate.TabIndex = 6
cnttvrexpdate.ZOrderSet = 2
cnttvrexpdate.Name = "cnttvrexpdate"
cstmsghandler.Name = "cstmsghandler"
cstresizable.Name = "cstresizable"
cstdatawork.Name = "cstdatawork"
shpTvr.ZOrderSet = 6
shpTvr.Name = "shpTvr"
LblTvrId.ZOrderSet = 7
LblTvrId.Name = "LblTvrId"
lblTLU.TabIndex = 11
lblTLU.ZOrderSet = 8
lblTLU.Name = "lblTLU"
comtxtctlcalclentluidbytlu.txtText.Name = "txtText"
comtxtctlcalclentluidbytlu.lblLen.Name = "lblLen"
comtxtctlcalclentluidbytlu.cmdFind.Name = "cmdFind"
comtxtctlcalclentluidbytlu.cmdClear.Name = "cmdClear"
comtxtctlcalclentluidbytlu.TabIndex = 1
comtxtctlcalclentluidbytlu.ZOrderSet = 9
comtxtctlcalclentluidbytlu.Name = "comtxtctlcalclentluidbytlu"
lblTvr.TabIndex = 12
lblTvr.ZOrderSet = 10
lblTvr.Name = "lblTvr"
cntIdCtlGridTvr.txtText.Name = "txtText"
cntIdCtlGridTvr.cmdShow.Name = "cmdShow"
cntIdCtlGridTvr.cmdClear.Name = "cmdClear"
cntIdCtlGridTvr.CmdTree.Name = "CmdTree"
cntIdCtlGridTvr.Olecommprox1.Top = 0
cntIdCtlGridTvr.Olecommprox1.Left = 36
cntIdCtlGridTvr.Olecommprox1.Height = 16
cntIdCtlGridTvr.Olecommprox1.Width = 38
cntIdCtlGridTvr.Olecommprox1.Name = "Olecommprox1"
cntIdCtlGridTvr.TabIndex = 2
cntIdCtlGridTvr.ZOrderSet = 11
cntIdCtlGridTvr.Name = "cntIdCtlGridTvr"
shpQnt.Top = 71
shpQnt.Left = 5
shpQnt.Height = 90
shpQnt.Width = 413
shpQnt.ZOrderSet = 0
shpQnt.Name = "shpQnt"
lblQnt.Caption = "Êîëè÷åñòâî Áðóòòî:"
lblQnt.Left = 10
lblQnt.Top = 108
lblQnt.TabIndex = 14
lblQnt.ZOrderSet = 14
lblQnt.Name = "lblQnt"
txtQnt.Left = 172
txtQnt.TabIndex = 4
txtQnt.Top = 105
txtQnt.ZOrderSet = 15
txtQnt.Name = "txtQnt"
lblMsu.Left = 11
lblMsu.Top = 81
lblMsu.TabIndex = 13
lblMsu.ZOrderSet = 16
lblMsu.Name = "lblMsu"
cntIdCtlGridMsu.txtText.Name = "txtText"
cntIdCtlGridMsu.cmdShow.Name = "cmdShow"
cntIdCtlGridMsu.cmdClear.Name = "cmdClear"
cntIdCtlGridMsu.CmdTree.Name = "CmdTree"
cntIdCtlGridMsu.Olecommprox1.Top = 0
cntIdCtlGridMsu.Olecommprox1.Left = 36
cntIdCtlGridMsu.Olecommprox1.Height = 16
cntIdCtlGridMsu.Olecommprox1.Width = 38
cntIdCtlGridMsu.Olecommprox1.Name = "Olecommprox1"
cntIdCtlGridMsu.Top = 77
cntIdCtlGridMsu.Left = 147
cntIdCtlGridMsu.TabIndex = 3
cntIdCtlGridMsu.ZOrderSet = 17
cntIdCtlGridMsu.Name = "cntIdCtlGridMsu"
cnttvrbuy.ShpBuy.Name = "ShpBuy"
cnttvrbuy.lblTvrPrcBuy.Name = "lblTvrPrcBuy"
cnttvrbuy.txtTvrPrcBuy.Name = "txtTvrPrcBuy"
cnttvrbuy.lblTvrPrcSumBuy.Name = "lblTvrPrcSumBuy"
cnttvrbuy.txtTvrPrcSumBuy.Name = "txtTvrPrcSumBuy"
cnttvrbuy.lblTvrVATSumBuy.Name = "lblTvrVATSumBuy"
cnttvrbuy.txtTvrVATSumBuy.Name = "txtTvrVATSumBuy"
cnttvrbuy.Top = 166
cnttvrbuy.Left = 5
cnttvrbuy.TabIndex = 7
cnttvrbuy.ZOrderSet = 18
cnttvrbuy.Name = "cnttvrbuy"
cnttvrsale.ShpSale.Name = "ShpSale"
cnttvrsale.lblTvrPrcSale.Name = "lblTvrPrcSale"
cnttvrsale.txtTvrPrcSale.Name = "txtTvrPrcSale"
cnttvrsale.txtTvrPrcSumSale.Name = "txtTvrPrcSumSale"
cnttvrsale.txtTvrVATSumSale.Name = "txtTvrVATSumSale"
cnttvrsale.lblTvrPrcSumSale.Name = "lblTvrPrcSumSale"
cnttvrsale.lblTvrVATSumSale.Name = "lblTvrVATSumSale"
cnttvrsale.Top = 166
cnttvrsale.Left = 5
cnttvrsale.TabIndex = 8
cnttvrsale.ZOrderSet = 19
cnttvrsale.Name = "cnttvrsale"
cntcancelsavehandled.cmdCancel.Name = "cmdCancel"
cntcancelsavehandled.cmdOk.Name = "cmdOk"
cntcancelsavehandled.Top = 166
cntcancelsavehandled.Left = 213
cntcancelsavehandled.TabIndex = 10
cntcancelsavehandled.ZOrderSet = 20
cntcancelsavehandled.Name = "cntcancelsavehandled"
cmdPrice.Top = 166
cmdPrice.ZOrderSet = 21
cmdPrice.Name = "cmdPrice"
</properties>
		<protected/>
		<methods>PROCEDURE _handlecntcancelsaveevent
*------------------------------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: FRMPRIMARYDOCPARTTVREDIT._HANDLECNTCANCELSAVEEVENT
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;tcMessage&gt;
* Returns.........: &lt;none&gt;
* Notes...........: &lt;~&gt;
*------------------------------------------------------------------------------
LPARAMETERS	tcMessage

LOCAL	llResSave

WITH This

*17.05.2004 02:07 -&gt;Ïðîèçâîäèì ñîõðàíåíèÿ/îòìåíÿåì èçìåíåíèÿ
IF tcMessage == [OK]
	
	*13.06.2006 18:01 -&gt; Ñîõðàíÿåì öåíó ïðîäàæè
	.SavePriceSale()
	*------------------------------------------------------------------------------

	.uRetVal = .T.
	
	IF .cMode = [DELE]
		DELETE IN lvFrmPartTvrEdit
	ENDIF

	llResSave = .cstDataWork.Save([lvFrmPartTvrEdit])

	*21.01.2004 20:01 -&gt;Îáðàáàòûâàåì ðåçóëüòàòû ñîõðàíåíèÿ
	IF llResSave
	
		*15.06.2006 17:34 -&gt; Îïðåäåëèì íåòòî äëÿ áëþäà
		spGetAccNetto(lvFrmPartTvrEdit.FrmID)
		*------------------------------------------------------------------------------
		
		*19.06.2006 16:16 -&gt;Îïðåäåëèì
		IF .cMode = [EDIT] AND .nPrcBuy # lvFrmPartTvrEdit.TvrPrcBuy AND ;
		   MESSAGEBOX([Öåíà íà òîâàð èçìåíèëàñü.]+CHR(13)+[Ìåíÿòü öåíó âî âñåõ êàëüêóëÿöèÿõ?],4+32,[Èçìåíåíèå öåíû])=6
		   ***
		   spAccChangePrc(lvFrmPartTvrEdit.TvrID,lvFrmPartTvrEdit.TvrPrcBuy)
		   ***
		ENDIF
		
		*12.05.2004 03:18 -&gt;Çàïèñûâàåì â .uRetVal èäåíòèôèêàòîð äîáàâëåííîãî äîêóìåíòà
		IF .cMode = [ADD]
			.uRetVal = .cstDataWork.GetLastID([lvFrmPartTvrEdit])
		ELSE
			.uRetVal = .T.
		ENDIF
		***	
		.Hide()
		*------------------------------------------------------------------------------
		
	ELSE
	
		*01.04.2004 18:42 -&gt;Ïîïûòàåìñÿ îáðàáîòàòü îøèáêó ñîõðàíåíèÿ
		IF .cstDataWork.HandleSaveFail() &amp;&amp;åñëè îøèáêà îáðàáîòàíà
			RETURN .T.	&amp;&amp;âîçâðàùàåìñÿ ê ðåäàêòèðîâàíèþ
		ELSE
			
			*01.04.2004 18:40 -&gt;Ñîîáùàåì îá îøèáêå
			MESSAGEBOX([Â ïðîöåññå ñîõðàíåíèÿ ïðîèçîøëà îøèáêà. Èçìåíåíèÿ ñîõðàíåíû íå áóäóò.],16,[Îøèáêà...])
			*------------------------------------------------------------------------------
			
			*01.04.2004 18:40 -&gt;Îòìåíÿåì èçìåíåíèÿ
			.cstDataWork.Restore([lvFrmPartTvrEdit])
			.uRetVal = .F.
			.Hide()	
			*------------------------------------------------------------------------------
			
		ENDIF	
		*------------------------------------------------------------------------------
		
	ENDIF
	*------------------------------------------------------------------------------

ELSE

	*12.05.2004 00:36 -&gt;Îòìåíèì èçìåíåíèÿ
	.cstDataWork.Restore([lvPriceEdit])
	.cstDataWork.Restore([lvFrmPartTvrEdit])
	.uRetVal = .F.
	.Hide()
	*------------------------------------------------------------------------------
	
ENDIF
*------------------------------------------------------------------------------

ENDWITH
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE cnttvrbuy.setprice
*------------------------------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: cntTvrBuy.SetPrice
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;tnOUID,tnTvrID,tlForce&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Óñòàíîâêà öåíû ïîñòóïëåíèÿ
*------------------------------------------------------------------------------
LPARAMETERS tnOUID,tnTvrID,tlForce

*15.06.2006 14:35 -&gt; Âûïîëíÿåì äåéñòâèÿ ëèøü â ñëó÷àå äîáàâëåíèÿ òîâàðíîé ïîçèöèè
IF ThisForm.cMode == [ADD] OR tlForce

	*15.06.2006 14:38 -&gt; Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
	PRIVATE _PARAM,_PARAM1, _PARAM2
	*------------------------------------------------------------------------------

	*02.09.2005 17:24 -&gt; Ïðîâåðÿåì íàëè÷èå öåíû ïîêóïêè ïî äàííîìó òîâàðó
WAIT WINDOW 'Îïðåäåëÿåì ïîñëåäíþþ öåíó ïîñòóïëåíèÿ' NOWAIT
	USE IN SELECT([lvTvrLastBuyOU])
	***
	_PARAM1 = tnOUID
	_PARAM2 = tnTvrID
	***
	USE lvTvrLastBuyOU IN 0
	*------------------------------------------------------------------------------
WAIT CLEAR
	*19.08.2005 11:37 -&gt; Îáðàáîòàåì ðåçóëüòàò
	IF RECCOUNT([lvTvrLastBuyOU]) = 0

		*02.09.2005 17:24 -&gt; Ïðîâåðÿåì íàëè÷èå öåíû ïîêóïêè ïî äàííîìó òîâàðó
		USE IN SELECT([lvAccLastBuy])
		***
		_PARAM = tnTvrID
		***
		USE lvAccLastBuy IN 0
		*------------------------------------------------------------------------------

		*19.08.2005 11:37 -&gt; Îáðàáîòàåì ðåçóëüòàò
		IF RECCOUNT([lvAccLastBuy]) = 0

			*15.06.2006 14:40 -&gt; Öåíà íå íàéäåíà - âûâîäèì ñîîáùåíèå ïîëüçîâàòåëþ
		    MESSAGEBOX([Öåíà ïîñòóïëåíèÿ íå íàéäåíà..],0+48,[Ïðåäóïðåæäåíèå],450)
			*------------------------------------------------------------------------------

		ELSE

			*15.06.2006 14:41 -&gt; Âûñòàâèì öåíó ïîñòóïåíèÿ
			This.txtTvrPrcBuy.Value = lvAccLastBuy.StockTransTvrPrcBuy
			*------------------------------------------------------------------------------

		ENDIF
		*------------------------------------------------------------------------------

	ELSE

		*15.06.2006 14:41 -&gt; Âûñòàâèì öåíó ïîñòóïåíèÿ
		This.txtTvrPrcBuy.Value = lvTvrLastBuyOU.StockTransTvrPrcBuy
		*------------------------------------------------------------------------------

	ENDIF
	*------------------------------------------------------------------------------

ENDIF
*------------------------------------------------------------------------------

*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE Init
LPARAMETERS	tcCommand,tuParam1

This.cstResizable.LayoutRestore(This)
DODEFAULT(tcCommand,tuParam1)

This.nPrcBuy = lvFrmPartTvrEdit.TvrPrcBuy
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1>Class</reserved1>
		<reserved2>3</reserved2>
		<reserved3>nprcbuy
</reserved3>
		<reserved4/>
		<reserved5/>
		<reserved6>Pixels</reserved6>
		<reserved7>ðåäàêòèðîâàíèå ïîçèöèè ñ èíãðàäèåíòîì</reserved7>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1RL0K456P</uniqueid>
		<timestamp>930901601</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>Lbl1</objname>
		<parent>frmaccountingtvredit</parent>
		<properties>FontBold = .T.
Caption = "Êîëè÷åñòâî Íåòòî, ãðàììû:"
Left = 10
Top = 135
TabIndex = 15
ZOrderSet = 12
Name = "Lbl1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1RL0K456R</uniqueid>
		<timestamp>930901601</timestamp>
		<class>txt</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>TxtQntNetto</objname>
		<parent>frmaccountingtvredit</parent>
		<properties>ControlSource = "lvFrmPartTvrEdit.TvrQntNetto"
InputMask = "9999999.99"
Left = 172
TabIndex = 5
Top = 131
ZOrderSet = 13
_highlightobject = .parent.lblQnt
_convertcommatopoint = .T.
_usedbfieldproperty = .T.
Name = "TxtQntNetto"
</properties>
		<protected/>
		<methods>PROCEDURE _handleanychange
*17.01.2006 09:52 -&gt;Ðàññ÷èòàåì ñóììû
ThisForm.CalculateSum()
*------------------------------------------------------------------------------
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>COMMENT</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>0</timestamp>
		<class/>
		<classloc/>
		<baseclass/>
		<objname>frmaccountingtvredit</objname>
		<parent/>
		<properties>Arial, 0, 9, 5, 15, 12, 32, 3, 0
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1ST0Y1PNH</uniqueid>
		<timestamp>946186932</timestamp>
		<class>frmprimarydocparttvredit</class>
		<classloc>primarydoc_v1.vcx</classloc>
		<baseclass>form</baseclass>
		<objname>frmprimarydocpartmnuedit</objname>
		<parent/>
		<properties>Height = 169
Width = 423
DoCreate = .T.
Name = "frmprimarydocpartmnuedit"
cnttvrvat.shpVat.Name = "shpVat"
cnttvrvat.lblTvrVATRate.Enabled = .F.
cnttvrvat.lblTvrVATRate.Visible = .F.
cnttvrvat.lblTvrVATRate.Name = "lblTvrVATRate"
cnttvrvat.txtTvrVATRate.Enabled = .F.
cnttvrvat.txtTvrVATRate.Visible = .F.
cnttvrvat.txtTvrVATRate.Name = "txtTvrVATRate"
cnttvrvat.Top = 95
cnttvrvat.Left = 5
cnttvrvat.TabIndex = 15
cnttvrvat.Name = "cnttvrvat"
cnttvrexpdate.shpExpDate.Name = "shpExpDate"
cnttvrexpdate.lblTvrExpDate.Name = "lblTvrExpDate"
cnttvrexpdate.comTxtCtlCalendarExpDate.txtText.Name = "txtText"
cnttvrexpdate.comTxtCtlCalendarExpDate.cmdShow.Name = "cmdShow"
cnttvrexpdate.comTxtCtlCalendarExpDate.Name = "comTxtCtlCalendarExpDate"
cnttvrexpdate.Top = 26
cnttvrexpdate.Left = 5
cnttvrexpdate.TabIndex = 8
cnttvrexpdate.Name = "cnttvrexpdate"
cstmsghandler.Name = "cstmsghandler"
cstresizable.Name = "cstresizable"
Img1.Name = "Img1"
shpTvr.Name = "shpTvr"
LblTvrId.Name = "LblTvrId"
lblTLU.Enabled = .F.
lblTLU.Visible = .F.
lblTLU.TabIndex = 10
lblTLU.Name = "lblTLU"
comtxtctlcalclentluidbytlu.txtText.Name = "txtText"
comtxtctlcalclentluidbytlu.lblLen.Name = "lblLen"
comtxtctlcalclentluidbytlu.cmdFind.Name = "cmdFind"
comtxtctlcalclentluidbytlu.cmdClear.Name = "cmdClear"
comtxtctlcalclentluidbytlu.Enabled = .F.
comtxtctlcalclentluidbytlu.Visible = .F.
comtxtctlcalclentluidbytlu.TabIndex = 6
comtxtctlcalclentluidbytlu.Name = "comtxtctlcalclentluidbytlu"
lblTvr.Left = 14
lblTvr.Top = 13
lblTvr.TabIndex = 12
lblTvr.Name = "lblTvr"
cntIdCtlGridTvr.txtText.Name = "txtText"
cntIdCtlGridTvr.cmdShow.Name = "cmdShow"
cntIdCtlGridTvr.cmdClear.Name = "cmdClear"
cntIdCtlGridTvr.CmdTree.Name = "CmdTree"
cntIdCtlGridTvr.Olecommprox1.Top = 0
cntIdCtlGridTvr.Olecommprox1.Left = 36
cntIdCtlGridTvr.Olecommprox1.Height = 16
cntIdCtlGridTvr.Olecommprox1.Width = 38
cntIdCtlGridTvr.Olecommprox1.Name = "Olecommprox1"
cntIdCtlGridTvr.Top = 10
cntIdCtlGridTvr.Left = 64
cntIdCtlGridTvr.TabIndex = 1
cntIdCtlGridTvr.Name = "cntIdCtlGridTvr"
shpQnt.Top = 68
shpQnt.Left = 5
shpQnt.Height = 34
shpQnt.Width = 413
shpQnt.Name = "shpQnt"
lblQnt.Enabled = .F.
lblQnt.Left = 10
lblQnt.Top = 76
lblQnt.Visible = .F.
lblQnt.TabIndex = 14
lblQnt.Name = "lblQnt"
txtQnt.Alignment = 3
txtQnt.Value = 1
txtQnt.Enabled = .F.
txtQnt.Left = 140
txtQnt.TabIndex = 7
txtQnt.Top = 73
txtQnt.Visible = .F.
txtQnt.Name = "txtQnt"
lblMsu.Left = 10
lblMsu.Top = 76
lblMsu.TabIndex = 13
lblMsu.Name = "lblMsu"
cntIdCtlGridMsu.txtText.Name = "txtText"
cntIdCtlGridMsu.cmdShow.Name = "cmdShow"
cntIdCtlGridMsu.cmdClear.Name = "cmdClear"
cntIdCtlGridMsu.CmdTree.Name = "CmdTree"
cntIdCtlGridMsu.Olecommprox1.Top = 0
cntIdCtlGridMsu.Olecommprox1.Left = 36
cntIdCtlGridMsu.Olecommprox1.Height = 16
cntIdCtlGridMsu.Olecommprox1.Width = 38
cntIdCtlGridMsu.Olecommprox1.Name = "Olecommprox1"
cntIdCtlGridMsu.Top = 73
cntIdCtlGridMsu.Left = 140
cntIdCtlGridMsu.TabIndex = 3
cntIdCtlGridMsu.Name = "cntIdCtlGridMsu"
cnttvrbuy.ShpBuy.Name = "ShpBuy"
cnttvrbuy.lblTvrPrcBuy.Name = "lblTvrPrcBuy"
cnttvrbuy.txtTvrPrcBuy.Name = "txtTvrPrcBuy"
cnttvrbuy.lblTvrPrcSumBuy.Name = "lblTvrPrcSumBuy"
cnttvrbuy.txtTvrPrcSumBuy.Name = "txtTvrPrcSumBuy"
cnttvrbuy.lblTvrVATSumBuy.Name = "lblTvrVATSumBuy"
cnttvrbuy.txtTvrVATSumBuy.Name = "txtTvrVATSumBuy"
cnttvrbuy.Top = -61
cnttvrbuy.Left = 5
cnttvrbuy.TabIndex = 9
cnttvrbuy.Name = "cnttvrbuy"
cnttvrsale.ShpSale.Top = 1
cnttvrsale.ShpSale.Left = 0
cnttvrsale.ShpSale.Height = 32
cnttvrsale.ShpSale.Width = 413
cnttvrsale.ShpSale.Name = "ShpSale"
cnttvrsale.lblTvrPrcSale.Name = "lblTvrPrcSale"
cnttvrsale.txtTvrPrcSale.Name = "txtTvrPrcSale"
cnttvrsale.txtTvrPrcSumSale.Enabled = .F.
cnttvrsale.txtTvrPrcSumSale.Visible = .F.
cnttvrsale.txtTvrPrcSumSale.Name = "txtTvrPrcSumSale"
cnttvrsale.txtTvrVATSumSale.Enabled = .F.
cnttvrsale.txtTvrVATSumSale.Left = 308
cnttvrsale.txtTvrVATSumSale.Top = 5
cnttvrsale.txtTvrVATSumSale.Visible = .F.
cnttvrsale.txtTvrVATSumSale.Name = "txtTvrVATSumSale"
cnttvrsale.lblTvrPrcSumSale.Enabled = .F.
cnttvrsale.lblTvrPrcSumSale.Visible = .F.
cnttvrsale.lblTvrPrcSumSale.Name = "lblTvrPrcSumSale"
cnttvrsale.lblTvrVATSumSale.Enabled = .F.
cnttvrsale.lblTvrVATSumSale.Left = 238
cnttvrsale.lblTvrVATSumSale.Top = 8
cnttvrsale.lblTvrVATSumSale.Visible = .F.
cnttvrsale.lblTvrVATSumSale.Name = "lblTvrVATSumSale"
cnttvrsale.Top = 100
cnttvrsale.Left = 5
cnttvrsale.Width = 413
cnttvrsale.Height = 33
cnttvrsale.TabIndex = 4
cnttvrsale.Name = "cnttvrsale"
cntcancelsavehandled.cmdCancel.Name = "cmdCancel"
cntcancelsavehandled.cmdOk.Name = "cmdOk"
cntcancelsavehandled.Top = 137
cntcancelsavehandled.Left = 213
cntcancelsavehandled.TabIndex = 5
cntcancelsavehandled.Name = "cntcancelsavehandled"
cstdatawork.Name = "cstdatawork"
cmdPrice.Name = "cmdPrice"
</properties>
		<protected/>
		<methods>PROCEDURE Load
DODEFAULT()
USE LvTvrMnulist IN 0
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1>Class</reserved1>
		<reserved2>3</reserved2>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6>Pixels</reserved6>
		<reserved7>Ðåäàêòèðîâàíèå ýëåìåíòà ìåíþ</reserved7>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1ST0Y6UVY</uniqueid>
		<timestamp>946186932</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>Lbl1</objname>
		<parent>frmprimarydocpartmnuedit</parent>
		<properties>FontBold = .T.
Caption = "Ðàñïîëîæèòü â ãðóïïå ìåíþ:"
Left = 14
Top = 39
TabIndex = 11
ZOrderSet = 8
Name = "Lbl1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1ST0YESAQ</uniqueid>
		<timestamp>946186932</timestamp>
		<class>cntidctlgrid</class>
		<classloc>comidctl_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>CntidctlMnu</objname>
		<parent>frmprimarydocpartmnuedit</parent>
		<properties>Top = 36
Left = 184
Width = 228
Height = 23
TabIndex = 2
ZOrderSet = 9
_controlsource = lvFrmPartTvrEdit.TvrIdCalc
_controlsourcetype = 1
_rsaliasname = lvTvrMnuList
_rsfieldnameid = ID
_rsfieldnametext = NM
_grdaddparams = oMgrTovar;MNU;FASTADD;0;lvTvrInCntViewRepl
Name = "CntidctlMnu"
txtText.Height = 23
txtText.Left = 0
txtText.Top = 0
txtText.Width = 180
txtText._highlightobject = .parent.parent.lblTvr
txtText.Name = "txtText"
cmdShow.Top = 0
cmdShow.Left = 183
cmdShow.Name = "cmdShow"
cmdClear.Top = 0
cmdClear.Left = 206
cmdClear.Name = "cmdClear"
CmdTree.Name = "CmdTree"
Olecommprox1.Top = 0
Olecommprox1.Left = 36
Olecommprox1.Height = 16
Olecommprox1.Width = 38
Olecommprox1.Name = "Olecommprox1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>COMMENT</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>0</timestamp>
		<class/>
		<classloc/>
		<baseclass/>
		<objname>frmprimarydocpartmnuedit</objname>
		<parent/>
		<properties>Arial, 0, 9, 5, 15, 12, 32, 3, 0
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1YM12CSPA</uniqueid>
		<timestamp>946493675</timestamp>
		<class>frmedit</class>
		<classloc>baseform_v1.vcx</classloc>
		<baseclass>form</baseclass>
		<objname>frmprimarydocpartordedit</objname>
		<parent/>
		<properties>Height = 529
Width = 986
DoCreate = .T.
cmode = .F.
cmeasureunitlist = .F.
nouid = .F.
nfrmid = .F.
datachanged = .F.
nrezerv = .F.
nitog = .F.
nfsperc = 0
ndiscperc = 0
_standarttoolbar = tlbStandart;basetoolbar_v1.vcx
Name = "frmprimarydocpartordedit"
cstmsghandler.Name = "cstmsghandler"
cstresizable.Name = "cstresizable"
Img1.Name = "Img1"
cstdatawork.Name = "cstdatawork"
</properties>
		<protected/>
		<methods>PROCEDURE _cleardata
LPARAMETERS tlNoSetFocus

*--Îòìåíèì èçìåíåíèÿ
thisform.cstDataWork.Restore([lvFrmPartTvrEditOrder])

*--ïîäãîòîâèìñÿ ê ââîäó íîâîé ïîçèöèè
USE IN SELECT([lvFrmPartTvrEditOrder])

USE lvFrmPartTvrEditOrder IN 0 NODATA

*--Äîáàâèì ïóñòóþ çàïèñü
APPEND BLANK IN lvFrmPartTvrEditOrder
*------------------------------------------------------------------------------

*--Çàïèøåì èäåíòèôèêàòîð ðîäèòåëüñêîãî äîêóìåíòà
REPLACE FrmID WITH thisform.nFrmID IN lvFrmPartTvrEditOrder
*------------------------------------------------------------------------------

*--îïðåäåëèì ðåæèì
thisform.cMode = [ADD]

thisform.cntcancelsavehandled1.cmdCancel.Caption = [Íîâûé òîâàð]
thisform.cntcancelsavehandled1.cmdOK.Caption = [Äîáàâèòü â çàêàç]
thisform.cntcancelsavehandled1.cmdCancel.ForeColor = RGB(0,128,0)
thisform.cntcancelsavehandled1.cmdOK.ForeColor = RGB(0,128,0)

thisform.Comtxtctlcalclentluidbytlu.cmdClear.Click()
thisform.cntIdCtlGridMsu.cmdClear.Click()
thisform.txtQnt.Refresh()
thisform.Cnttvrsale.txtTvrPrcSale.Refresh()

*--Ïðîñ÷èòàåì ñóììû è ÍÄÑ
thisform.CalculateSumSale()
thisform.CalculateVatSumSale()

IF !tlNoSetFocus
	ThisForm.Comtxtctlcalclentluidbytlu.SetFocus()
ENDIF

ENDPROC
PROCEDURE _determ_disc
*--ïîëó÷èì ñêèäêó ïî äàííîìó òîâàðó äëÿ äàííîãî êëèåíòà
LPARAMETER tkod_t
LOCAL	_PARAM1, ;
		_PARAM2, ;
		lnDisc, ;
		lcOldAlias, ;
		lcCurrentDatabase

IF PCOUNT()&lt;1
	ASSERT .F. MESSAGE [Íåïðàâèëüíî ïåðåäàí ïàðàìåòð â ìåòîä determ_disc().]
ENDIF

lcOldAlias = ALIAS()

USE IN SELECT([lvDiscScaleViewByID])
_PARAM1 = lvFrmEdit.ExecIspCltID
_PARAM2 = tkod_t
USE lvDiscScaleViewByID IN 0

IF RECCOUNT([lvDiscScaleViewByID])&gt;0
	lnDisc = lvDiscScaleViewByID.DiscRate
ELSE
	lnDisc = 0
ENDIF

*--Âîññòàíîâèì òåêóùèé Alias
IF !EMPTY(lcOldAlias)
SELECT(lcOldAlias)
ENDIF
*------------------------------------------------------------------------------

RETURN lnDisc

ENDPROC
PROCEDURE _handlecntcancelsaveevent
*------------------------------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: FRMPRIMARYDOCPARTORDEDIT._HANDLECNTCANCELSAVEEVENT
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;tcMessage&gt;
* Returns.........: &lt;none&gt;
* Notes...........: &lt;~&gt;
*------------------------------------------------------------------------------
LPARAMETERS	tcMessage

LOCAL llResSave, ;
	  lnPartTvrID, ;
	  lpriceFS, ;
	  ldiscount
	

WITH This
	IF tcMessage == [OK]
		*--ïðè ðåäàêòèðîâàíèè çàïîìíèì ïîçèöèþ
		IF .cmode==[EDIT] OR .cmode==[DELE]
			lnPartTvrID = FrmPartTvrView.PartTvrID	
		ENDIF

		*--ïåðåñ÷èòàåì öåíó ñ ó÷åòîì ôàêòîðèíãà
		lpriceFS = (lvFrmPartTvrEditOrder.TvrPrcSale+ROUND(lvFrmPartTvrEditOrder.TvrPrcSale/100*thisform.nfsperc,2))		

		*--ïîñ÷èòàåì ñêèäêó
		ldiscount = ROUND(ROUND(lpriceFS*.ndiscperc/100, 2)*lvFrmPartTvrEditOrder.TvrQnt, 2)

		*--ïîäãîòîâèìñÿ ê ñîõðàíåíèþ äàííûõ
		SELECT lvFrmPartTvrEditOrder
		REPL lvFrmPartTvrEditOrder.TvrPrcSale WITH lpriceFS, ;
			 lvFrmPartTvrEditOrder.DiscPerc WITH .ndiscperc
		
		*--Ïðîèçâîäèì ñîõðàíåíèe
		llResSave = .cstDataWork.Save([lvFrmPartTvrEditOrder])

		*--Îáðàáàòûâàåì ðåçóëüòàòû ñîõðàíåíèÿ
		IF llResSave
			*--âûñòàâèì ôëàã èçìåíåíèÿ äàííûõ
			.Datachanged = .T.

			IF .cmode==[ADD]
				lnPartTvrID = .cstDataWork.GetLastID([lvFrmPartTvrEditOrder])
			ENDIF
			
			*--îáíîâèì äàííûå â âåðõíåé òàáëèöå (òîâàðíûå ïîçèöèè çàêàçà)
			.grdpartord._rsrequeryone(lnPartTvrID )
			.grdpartord.SetFocus()
			
		ENDIF
		*------------------------------------------------------------------------------
		
	ENDIF

	*--ïîäãîòîâèìñÿ ê ââîäó íîâîé çàïèñè
	._ClearData()
	
ENDWITH
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************

	

ENDPROC
PROCEDURE calculatesumsale
*------------------------------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: frmPrimaryDocPartOrdEdit.CalculateSumSale
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: &lt;public&gt; Ðàñ÷¸ò ñóììû ïðîäàæè
*------------------------------------------------------------------------------
WITH This

*23.09.2005 12:25 -&gt; Ðàñ÷¸ò ñóììû ïðîäàæè
IF TYPE([.cntTvrSale]) == [O] AND !ISNULL(.cntTvrSale)
	.cntTvrSale.txtTvrPrcSumSale.Value = ROUND(.cntTvrSale.txtTvrPrcSale.Value * .txtQnt.Value,2)
ENDIF
*------------------------------------------------------------------------------

ENDWITH
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE calculatevatsumsale
*------------------------------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: frmPrimaryDocPartOrdEdit.CalculateVatSumSale
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: &lt;public&gt; Ðàññ÷åò ÍÄÑ ïðîäàæè
*------------------------------------------------------------------------------
WITH This

*23.09.2005 12:17 -&gt; Ðàññ÷åò ÍÄÑ ïðîäàæè
IF TYPE([.cntTvrSale])==[O] AND !ISNULL(.cntTvrSale)
	IF .cntTvrVat.txtTvrVATRate.Value # 0
		.cntTvrSale.txtTvrVATSumSale.Value = ROUND(.cntTvrSale.txtTvrPrcSumSale.Value * .cntTvrVat.txtTvrVATRate.Value / (100 + .cntTvrVat.txtTvrVATRate.Value),2)
	ELSE
		.cntTvrSale.txtTvrVATSumSale.Value = 0
	ENDIF
ENDIF
*------------------------------------------------------------------------------

ENDWITH
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE Init
*------------------------------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: FRMPRIMARYDOCPARTORDEDIT.INIT
* Called by.......: &lt;Sys Event&gt;
* Parameters......: &lt;tcCommand,tuParam1&gt;
* Returns.........: &lt;none&gt;
* Notes...........: &lt;~&gt;
*------------------------------------------------------------------------------
LPARAMETERS	tcCommand,tuParam1

*--Âûïîëíèì ìåòîä ðîäèòåëüñêîãî êëàññà
DODEFAULT()
*------------------------------------------------------------------------------
SET STEP ON
thisform.nFrmID = tuParam1

*--îòêðîåì øàïêó çàêàçà
_PARAM = thisform.nFrmID
USE lvFrmEdit IN 0

thisform.nFSPerc = NVL(lvFrmEdit.FSPerc,0)

*--îáíîâèì äàííûå â âåðõíåé òàáëèöå (òîâàðíûå ïîçèöèè çàêàçà)
thisform.grdpartord._rsrequery(thisform.nFrmID)
*------------------------------------------------------------------------------

*--ïîäãîòîâèìñÿ ê ââîäó íîâîé òîâàðíîé ïîçèöèè
thisform._ClearData(.T.)
*------------------------------------------------------------------------------

*--Ïðîñ÷èòàåì ñóììû è ÍÄÑ
thisform.CalculateSumSale()
thisform.CalculateVatSumSale()

ENDPROC
PROCEDURE Load
*------------------------------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: FRMPRIMARYDOCPARTORDEDIT.LOAD
* Called by.......: &lt;Sys Event&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: &lt;~&gt;
*------------------------------------------------------------------------------
LOCAL lcUniqueName
	

*17.05.2004 01:32 -&gt;Âûïîëíèì ìåòîä ðîäèòåëüñêîãî êëàññà
DODEFAULT()
*------------------------------------------------------------------------------

*17.05.2004 01:32 -&gt;Îòêðîåì ÁÄ è óñòàíîâèì å¸ â êà÷åñòâå òåêóùåé
IF !DBUSED([BASIS])
	OPEN DATABASE BASIS
ENDIF
***
SET DATABASE TO BASIS
*------------------------------------------------------------------------------

*--Âûïîëíèì õðàíèìóþ ïðîöåäóðó äëÿ ïîëó÷åíèÿ ïóñòîé òàáëèöû ñ ïîçèöèÿìè çàêàçà
lcUniqueName = spFrmPartTvrView([NODATA])
*------------------------------------------------------------------------------

*--Òåïåðü îòêðîåì äàííûé Alias
USE (lcUniqueName) IN 0 ALIAS FrmPartTvrView
CURSORSETPROP([BUFFERING],3,[FrmPartTvrView])

*17.05.2004 01:32 -&gt;Îòêðîåì Alias äëÿ ðåäàêòèðîâàíèÿ áåç äàííûõ
USE lvFrmPartTvrEditOrder IN 0 NODATA
*------------------------------------------------------------------------------

*17.05.2004 01:34 -&gt; Îòêðûâàåì ñïðàâî÷íèêè
USE lvTovarList IN 0 ALIAS TovarList
USE lvCurTypeList IN 0
***
This.cMeasureUnitList = spGetBaseMsuList(0)
USE (LEFT(This.cMeasureUnitList,AT([;],This.cMeasureUnitList)-1)) IN 0 ALIAS lvTvrMsuList
*------------------------------------------------------------------------------
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3>cmode
cmeasureunitlist
nouid
nfrmid
datachanged
nrezerv îñòàòîê òîâàðà íà ðåçåðâíîì ñêëàäå
nitog
nfsperc
ndiscperc
*calculatepricemsu 
*_save 
*_cleardata 
*calculatesumsale 
*calculatevatsumsale 
*_determ_disc 
</reserved3>
		<reserved4/>
		<reserved5/>
		<reserved6>Pixels</reserved6>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1YN0WYQH9</uniqueid>
		<timestamp>0</timestamp>
		<class>grdpartord</class>
		<classloc>primarydoc_v1.vcx</classloc>
		<baseclass>grid</baseclass>
		<objname>Grdpartord</objname>
		<parent>frmprimarydocpartordedit</parent>
		<properties/>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1YM12CSPA</uniqueid>
		<timestamp>946493685</timestamp>
		<class>frmedit</class>
		<classloc>baseform_v1.vcx</classloc>
		<baseclass>form</baseclass>
		<objname>frmprimarydocpartordedit</objname>
		<parent/>
		<properties>Height = 529
Width = 986
DoCreate = .T.
cmode = .F.
cmeasureunitlist = .F.
nouid = .F.
nfrmid = .F.
datachanged = .F.
nrezerv = .F.
nitog = .F.
nfsperc = 0
ndiscperc = 0
_standarttoolbar = tlbStandart;basetoolbar_v1.vcx
Name = "frmprimarydocpartordedit"
cstmsghandler.Name = "cstmsghandler"
cstresizable.Name = "cstresizable"
Img1.Name = "Img1"
cstdatawork.Name = "cstdatawork"
</properties>
		<protected/>
		<methods>PROCEDURE _cleardata
LPARAMETERS tlNoSetFocus

*--Îòìåíèì èçìåíåíèÿ
thisform.cstDataWork.Restore([lvFrmPartTvrEditOrder])

*--ïîäãîòîâèìñÿ ê ââîäó íîâîé ïîçèöèè
USE IN SELECT([lvFrmPartTvrEditOrder])

USE lvFrmPartTvrEditOrder IN 0 NODATA

*--Äîáàâèì ïóñòóþ çàïèñü
APPEND BLANK IN lvFrmPartTvrEditOrder
*------------------------------------------------------------------------------

*--Çàïèøåì èäåíòèôèêàòîð ðîäèòåëüñêîãî äîêóìåíòà
REPLACE FrmID WITH thisform.nFrmID IN lvFrmPartTvrEditOrder
*------------------------------------------------------------------------------

*--îïðåäåëèì ðåæèì
thisform.cMode = [ADD]

thisform.cntcancelsavehandled1.cmdCancel.Caption = [Íîâûé òîâàð]
thisform.cntcancelsavehandled1.cmdOK.Caption = [Äîáàâèòü â çàêàç]
thisform.cntcancelsavehandled1.cmdCancel.ForeColor = RGB(0,128,0)
thisform.cntcancelsavehandled1.cmdOK.ForeColor = RGB(0,128,0)

thisform.Comtxtctlcalclentluidbytlu.cmdClear.Click()
thisform.cntIdCtlGridMsu.cmdClear.Click()
thisform.txtQnt.Refresh()
thisform.Cnttvrsale.txtTvrPrcSale.Refresh()

*--Ïðîñ÷èòàåì ñóììû è ÍÄÑ
thisform.CalculateSumSale()
thisform.CalculateVatSumSale()

IF !tlNoSetFocus
	ThisForm.Comtxtctlcalclentluidbytlu.SetFocus()
ENDIF

ENDPROC
PROCEDURE _determ_disc
*--ïîëó÷èì ñêèäêó ïî äàííîìó òîâàðó äëÿ äàííîãî êëèåíòà
LPARAMETER tkod_t
LOCAL	_PARAM1, ;
		_PARAM2, ;
		lnDisc, ;
		lcOldAlias, ;
		lcCurrentDatabase

IF PCOUNT()&lt;1
	ASSERT .F. MESSAGE [Íåïðàâèëüíî ïåðåäàí ïàðàìåòð â ìåòîä determ_disc().]
ENDIF

lcOldAlias = ALIAS()

USE IN SELECT([lvDiscScaleViewByID])
_PARAM1 = lvFrmEdit.ExecIspCltID
_PARAM2 = tkod_t
USE lvDiscScaleViewByID IN 0

IF RECCOUNT([lvDiscScaleViewByID])&gt;0
	lnDisc = lvDiscScaleViewByID.DiscRate
ELSE
	lnDisc = 0
ENDIF

*--Âîññòàíîâèì òåêóùèé Alias
IF !EMPTY(lcOldAlias)
SELECT(lcOldAlias)
ENDIF
*------------------------------------------------------------------------------

RETURN lnDisc

ENDPROC
PROCEDURE _handlecntcancelsaveevent
*------------------------------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: FRMPRIMARYDOCPARTORDEDIT._HANDLECNTCANCELSAVEEVENT
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;tcMessage&gt;
* Returns.........: &lt;none&gt;
* Notes...........: &lt;~&gt;
*------------------------------------------------------------------------------
LPARAMETERS	tcMessage

LOCAL llResSave, ;
	  lnPartTvrID, ;
	  lpriceFS, ;
	  ldiscount
	

WITH This
	IF tcMessage == [OK]
		*--ïðè ðåäàêòèðîâàíèè çàïîìíèì ïîçèöèþ
		IF .cmode==[EDIT] OR .cmode==[DELE]
			lnPartTvrID = FrmPartTvrView.PartTvrID	
		ENDIF

		*--ïåðåñ÷èòàåì öåíó ñ ó÷åòîì ôàêòîðèíãà
		lpriceFS = (lvFrmPartTvrEditOrder.TvrPrcSale+ROUND(lvFrmPartTvrEditOrder.TvrPrcSale/100*thisform.nfsperc,2))		

		*--ïîñ÷èòàåì ñêèäêó
		ldiscount = ROUND(ROUND(lpriceFS*.ndiscperc/100, 2)*lvFrmPartTvrEditOrder.TvrQnt, 2)

		*--ïîäãîòîâèìñÿ ê ñîõðàíåíèþ äàííûõ
		SELECT lvFrmPartTvrEditOrder
		REPL lvFrmPartTvrEditOrder.TvrPrcSale WITH lpriceFS, ;
			 lvFrmPartTvrEditOrder.DiscPerc WITH .ndiscperc
		
		*--Ïðîèçâîäèì ñîõðàíåíèe
		llResSave = .cstDataWork.Save([lvFrmPartTvrEditOrder])

		*--Îáðàáàòûâàåì ðåçóëüòàòû ñîõðàíåíèÿ
		IF llResSave
			*--âûñòàâèì ôëàã èçìåíåíèÿ äàííûõ
			.Datachanged = .T.

			IF .cmode==[ADD]
				lnPartTvrID = .cstDataWork.GetLastID([lvFrmPartTvrEditOrder])
			ENDIF
			
			*--îáíîâèì äàííûå â âåðõíåé òàáëèöå (òîâàðíûå ïîçèöèè çàêàçà)
			.grdpartord._rsrequeryone(lnPartTvrID )
			.grdpartord.SetFocus()
			
		ENDIF
		*------------------------------------------------------------------------------
		
	ENDIF

	*--ïîäãîòîâèìñÿ ê ââîäó íîâîé çàïèñè
	._ClearData()
	
ENDWITH
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************

	

ENDPROC
PROCEDURE calculatesumsale
*------------------------------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: frmPrimaryDocPartOrdEdit.CalculateSumSale
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: &lt;public&gt; Ðàñ÷¸ò ñóììû ïðîäàæè
*------------------------------------------------------------------------------
WITH This

*23.09.2005 12:25 -&gt; Ðàñ÷¸ò ñóììû ïðîäàæè
IF TYPE([.cntTvrSale]) == [O] AND !ISNULL(.cntTvrSale)
	.cntTvrSale.txtTvrPrcSumSale.Value = ROUND(.cntTvrSale.txtTvrPrcSale.Value * .txtQnt.Value,2)
ENDIF
*------------------------------------------------------------------------------

ENDWITH
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE calculatevatsumsale
*------------------------------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: frmPrimaryDocPartOrdEdit.CalculateVatSumSale
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: &lt;public&gt; Ðàññ÷åò ÍÄÑ ïðîäàæè
*------------------------------------------------------------------------------
WITH This

*23.09.2005 12:17 -&gt; Ðàññ÷åò ÍÄÑ ïðîäàæè
IF TYPE([.cntTvrSale])==[O] AND !ISNULL(.cntTvrSale)
	IF .cntTvrVat.txtTvrVATRate.Value # 0
		.cntTvrSale.txtTvrVATSumSale.Value = ROUND(.cntTvrSale.txtTvrPrcSumSale.Value * .cntTvrVat.txtTvrVATRate.Value / (100 + .cntTvrVat.txtTvrVATRate.Value),2)
	ELSE
		.cntTvrSale.txtTvrVATSumSale.Value = 0
	ENDIF
ENDIF
*------------------------------------------------------------------------------

ENDWITH
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE Init
*------------------------------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: FRMPRIMARYDOCPARTORDEDIT.INIT
* Called by.......: &lt;Sys Event&gt;
* Parameters......: &lt;tcCommand,tuParam1&gt;
* Returns.........: &lt;none&gt;
* Notes...........: &lt;~&gt;
*------------------------------------------------------------------------------
LPARAMETERS	tcCommand,tuParam1

*--Âûïîëíèì ìåòîä ðîäèòåëüñêîãî êëàññà
DODEFAULT()
*------------------------------------------------------------------------------

thisform.nFrmID = tuParam1

*--îòêðîåì øàïêó çàêàçà
_PARAM = thisform.nFrmID
USE lvFrmEdit IN 0

thisform.nFSPerc = NVL(lvFrmEdit.FSPerc,0)

*--îáíîâèì äàííûå â âåðõíåé òàáëèöå (òîâàðíûå ïîçèöèè çàêàçà)
thisform.grdpartord._rsrequery(thisform.nFrmID)
*------------------------------------------------------------------------------

*--ïîäãîòîâèìñÿ ê ââîäó íîâîé òîâàðíîé ïîçèöèè
thisform._ClearData(.T.)
*------------------------------------------------------------------------------

*--Ïðîñ÷èòàåì ñóììû è ÍÄÑ
thisform.CalculateSumSale()
thisform.CalculateVatSumSale()

ENDPROC
PROCEDURE Load
*------------------------------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: FRMPRIMARYDOCPARTORDEDIT.LOAD
* Called by.......: &lt;Sys Event&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: &lt;~&gt;
*------------------------------------------------------------------------------
LOCAL lcUniqueName
	

*17.05.2004 01:32 -&gt;Âûïîëíèì ìåòîä ðîäèòåëüñêîãî êëàññà
DODEFAULT()
*------------------------------------------------------------------------------

*17.05.2004 01:32 -&gt;Îòêðîåì ÁÄ è óñòàíîâèì å¸ â êà÷åñòâå òåêóùåé
IF !DBUSED([BASIS])
	OPEN DATABASE BASIS
ENDIF
***
SET DATABASE TO BASIS
*------------------------------------------------------------------------------

*--Âûïîëíèì õðàíèìóþ ïðîöåäóðó äëÿ ïîëó÷åíèÿ ïóñòîé òàáëèöû ñ ïîçèöèÿìè çàêàçà
lcUniqueName = spFrmPartTvrView([NODATA])
*------------------------------------------------------------------------------

*--Òåïåðü îòêðîåì äàííûé Alias
USE (lcUniqueName) IN 0 ALIAS FrmPartTvrView
CURSORSETPROP([BUFFERING],3,[FrmPartTvrView])

*17.05.2004 01:32 -&gt;Îòêðîåì Alias äëÿ ðåäàêòèðîâàíèÿ áåç äàííûõ
USE lvFrmPartTvrEditOrder IN 0 NODATA
*------------------------------------------------------------------------------

*17.05.2004 01:34 -&gt; Îòêðûâàåì ñïðàâî÷íèêè
USE lvTovarList IN 0 ALIAS TovarList
USE lvCurTypeList IN 0
***
This.cMeasureUnitList = spGetBaseMsuList(0)
USE (LEFT(This.cMeasureUnitList,AT([;],This.cMeasureUnitList)-1)) IN 0 ALIAS lvTvrMsuList
*------------------------------------------------------------------------------
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3>cmode
cmeasureunitlist
nouid
nfrmid
datachanged
nrezerv îñòàòîê òîâàðà íà ðåçåðâíîì ñêëàäå
nitog
nfsperc
ndiscperc
*calculatepricemsu 
*_save 
*_cleardata 
*calculatesumsale 
*calculatevatsumsale 
*_determ_disc 
</reserved3>
		<reserved4/>
		<reserved5/>
		<reserved6>Pixels</reserved6>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1YN0WYQH9</uniqueid>
		<timestamp>0</timestamp>
		<class>grdpartord</class>
		<classloc>primarydoc_v1.vcx</classloc>
		<baseclass>grid</baseclass>
		<objname>Grdpartord</objname>
		<parent>frmprimarydocpartordedit</parent>
		<properties/>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1YM12CSPA</uniqueid>
		<timestamp>946493976</timestamp>
		<class>frmedit</class>
		<classloc>baseform_v1.vcx</classloc>
		<baseclass>form</baseclass>
		<objname>frmprimarydocpartordedit</objname>
		<parent/>
		<properties>Height = 529
Width = 986
DoCreate = .T.
cmode = .F.
cmeasureunitlist = .F.
nouid = .F.
nfrmid = .F.
datachanged = .F.
nrezerv = .F.
nitog = .F.
nfsperc = 0
ndiscperc = 0
_standarttoolbar = tlbStandart;basetoolbar_v1.vcx
Name = "frmprimarydocpartordedit"
cstmsghandler.Name = "cstmsghandler"
cstresizable.Name = "cstresizable"
Img1.Name = "Img1"
cstdatawork.Name = "cstdatawork"
</properties>
		<protected/>
		<methods>PROCEDURE _cleardata
LPARAMETERS tlNoSetFocus

*--Îòìåíèì èçìåíåíèÿ
thisform.cstDataWork.Restore([lvFrmPartTvrEditOrder])

*--ïîäãîòîâèìñÿ ê ââîäó íîâîé ïîçèöèè
USE IN SELECT([lvFrmPartTvrEditOrder])

USE lvFrmPartTvrEditOrder IN 0 NODATA

*--Äîáàâèì ïóñòóþ çàïèñü
APPEND BLANK IN lvFrmPartTvrEditOrder
*------------------------------------------------------------------------------

*--Çàïèøåì èäåíòèôèêàòîð ðîäèòåëüñêîãî äîêóìåíòà
REPLACE FrmID WITH thisform.nFrmID IN lvFrmPartTvrEditOrder
*------------------------------------------------------------------------------

*--îïðåäåëèì ðåæèì
thisform.cMode = [ADD]

thisform.cntcancelsavehandled1.cmdCancel.Caption = [Íîâûé òîâàð]
thisform.cntcancelsavehandled1.cmdOK.Caption = [Äîáàâèòü â çàêàç]
thisform.cntcancelsavehandled1.cmdCancel.ForeColor = RGB(0,128,0)
thisform.cntcancelsavehandled1.cmdOK.ForeColor = RGB(0,128,0)

thisform.Comtxtctlcalclentluidbytlu.cmdClear.Click()
thisform.cntIdCtlGridMsu.cmdClear.Click()
thisform.txtQnt.Refresh()
thisform.Cnttvrsale.txtTvrPrcSale.Refresh()

*--Ïðîñ÷èòàåì ñóììû è ÍÄÑ
thisform.CalculateSumSale()
thisform.CalculateVatSumSale()

IF !tlNoSetFocus
	ThisForm.Comtxtctlcalclentluidbytlu.SetFocus()
ENDIF

ENDPROC
PROCEDURE _determ_disc
*--ïîëó÷èì ñêèäêó ïî äàííîìó òîâàðó äëÿ äàííîãî êëèåíòà
LPARAMETER tkod_t
LOCAL	_PARAM1, ;
		_PARAM2, ;
		lnDisc, ;
		lcOldAlias, ;
		lcCurrentDatabase

IF PCOUNT()&lt;1
	ASSERT .F. MESSAGE [Íåïðàâèëüíî ïåðåäàí ïàðàìåòð â ìåòîä determ_disc().]
ENDIF

lcOldAlias = ALIAS()

USE IN SELECT([lvDiscScaleViewByID])
_PARAM1 = lvFrmEdit.ExecIspCltID
_PARAM2 = tkod_t
USE lvDiscScaleViewByID IN 0

IF RECCOUNT([lvDiscScaleViewByID])&gt;0
	lnDisc = lvDiscScaleViewByID.DiscRate
ELSE
	lnDisc = 0
ENDIF

*--Âîññòàíîâèì òåêóùèé Alias
IF !EMPTY(lcOldAlias)
SELECT(lcOldAlias)
ENDIF
*------------------------------------------------------------------------------

RETURN lnDisc

ENDPROC
PROCEDURE _handlecntcancelsaveevent
*------------------------------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: FRMPRIMARYDOCPARTORDEDIT._HANDLECNTCANCELSAVEEVENT
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;tcMessage&gt;
* Returns.........: &lt;none&gt;
* Notes...........: &lt;~&gt;
*------------------------------------------------------------------------------
LPARAMETERS	tcMessage

LOCAL llResSave, ;
	  lnPartTvrID, ;
	  lpriceFS, ;
	  ldiscount
	

WITH This
	IF tcMessage == [OK]
		*--ïðè ðåäàêòèðîâàíèè çàïîìíèì ïîçèöèþ
		IF .cmode==[EDIT] OR .cmode==[DELE]
			lnPartTvrID = FrmPartTvrView.PartTvrID	
		ENDIF

		*--ïåðåñ÷èòàåì öåíó ñ ó÷åòîì ôàêòîðèíãà
		lpriceFS = (lvFrmPartTvrEditOrder.TvrPrcSale+ROUND(lvFrmPartTvrEditOrder.TvrPrcSale/100*thisform.nfsperc,2))		

		*--ïîñ÷èòàåì ñêèäêó
		ldiscount = ROUND(ROUND(lpriceFS*.ndiscperc/100, 2)*lvFrmPartTvrEditOrder.TvrQnt, 2)

		*--ïîäãîòîâèìñÿ ê ñîõðàíåíèþ äàííûõ
		SELECT lvFrmPartTvrEditOrder
		REPL lvFrmPartTvrEditOrder.TvrPrcSale WITH lpriceFS, ;
			 lvFrmPartTvrEditOrder.DiscPerc WITH .ndiscperc
		
		*--Ïðîèçâîäèì ñîõðàíåíèe
		llResSave = .cstDataWork.Save([lvFrmPartTvrEditOrder])

		*--Îáðàáàòûâàåì ðåçóëüòàòû ñîõðàíåíèÿ
		IF llResSave
			*--âûñòàâèì ôëàã èçìåíåíèÿ äàííûõ
			.Datachanged = .T.

			IF .cmode==[ADD]
				lnPartTvrID = .cstDataWork.GetLastID([lvFrmPartTvrEditOrder])
			ENDIF
			
			*--îáíîâèì äàííûå â âåðõíåé òàáëèöå (òîâàðíûå ïîçèöèè çàêàçà)
			.grdpartord._rsrequeryone(lnPartTvrID )
			.grdpartord.SetFocus()
			
		ENDIF
		*------------------------------------------------------------------------------
		
	ENDIF

	*--ïîäãîòîâèìñÿ ê ââîäó íîâîé çàïèñè
	._ClearData()
	
ENDWITH
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************

	

ENDPROC
PROCEDURE calculatesumsale
*------------------------------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: frmPrimaryDocPartOrdEdit.CalculateSumSale
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: &lt;public&gt; Ðàñ÷¸ò ñóììû ïðîäàæè
*------------------------------------------------------------------------------
WITH This

*23.09.2005 12:25 -&gt; Ðàñ÷¸ò ñóììû ïðîäàæè
IF TYPE([.cntTvrSale]) == [O] AND !ISNULL(.cntTvrSale)
	.cntTvrSale.txtTvrPrcSumSale.Value = ROUND(.cntTvrSale.txtTvrPrcSale.Value * .txtQnt.Value,2)
ENDIF
*------------------------------------------------------------------------------

ENDWITH
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE calculatevatsumsale
*------------------------------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: frmPrimaryDocPartOrdEdit.CalculateVatSumSale
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: &lt;public&gt; Ðàññ÷åò ÍÄÑ ïðîäàæè
*------------------------------------------------------------------------------
WITH This

*23.09.2005 12:17 -&gt; Ðàññ÷åò ÍÄÑ ïðîäàæè
IF TYPE([.cntTvrSale])==[O] AND !ISNULL(.cntTvrSale)
	IF .cntTvrVat.txtTvrVATRate.Value # 0
		.cntTvrSale.txtTvrVATSumSale.Value = ROUND(.cntTvrSale.txtTvrPrcSumSale.Value * .cntTvrVat.txtTvrVATRate.Value / (100 + .cntTvrVat.txtTvrVATRate.Value),2)
	ELSE
		.cntTvrSale.txtTvrVATSumSale.Value = 0
	ENDIF
ENDIF
*------------------------------------------------------------------------------

ENDWITH
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE Init
*------------------------------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: FRMPRIMARYDOCPARTORDEDIT.INIT
* Called by.......: &lt;Sys Event&gt;
* Parameters......: &lt;tcCommand,tuParam1&gt;
* Returns.........: &lt;none&gt;
* Notes...........: &lt;~&gt;
*------------------------------------------------------------------------------
LPARAMETERS	tcCommand,tuParam1

*--Âûïîëíèì ìåòîä ðîäèòåëüñêîãî êëàññà
DODEFAULT()
*------------------------------------------------------------------------------

thisform.nFrmID = tuParam1

*--îòêðîåì øàïêó çàêàçà
_PARAM = thisform.nFrmID
USE lvFrmEdit IN 0

thisform.nFSPerc = NVL(lvFrmEdit.FSPerc,0)

*--îáíîâèì äàííûå â âåðõíåé òàáëèöå (òîâàðíûå ïîçèöèè çàêàçà)
thisform.grdpartord._rsrequery(thisform.nFrmID)
*------------------------------------------------------------------------------

*--ïîäãîòîâèìñÿ ê ââîäó íîâîé òîâàðíîé ïîçèöèè
thisform._ClearData(.T.)
*------------------------------------------------------------------------------

*--Ïðîñ÷èòàåì ñóììû è ÍÄÑ
thisform.CalculateSumSale()
thisform.CalculateVatSumSale()

ENDPROC
PROCEDURE Load
*------------------------------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: FRMPRIMARYDOCPARTORDEDIT.LOAD
* Called by.......: &lt;Sys Event&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: &lt;~&gt;
*------------------------------------------------------------------------------
LOCAL lcUniqueName
	

*17.05.2004 01:32 -&gt;Âûïîëíèì ìåòîä ðîäèòåëüñêîãî êëàññà
DODEFAULT()
*------------------------------------------------------------------------------

*17.05.2004 01:32 -&gt;Îòêðîåì ÁÄ è óñòàíîâèì å¸ â êà÷åñòâå òåêóùåé
IF !DBUSED([BASIS])
	OPEN DATABASE BASIS
ENDIF
***
SET DATABASE TO BASIS
*------------------------------------------------------------------------------

*--Âûïîëíèì õðàíèìóþ ïðîöåäóðó äëÿ ïîëó÷åíèÿ ïóñòîé òàáëèöû ñ ïîçèöèÿìè çàêàçà
lcUniqueName = spFrmPartTvrView([NODATA])
*------------------------------------------------------------------------------

*--Òåïåðü îòêðîåì äàííûé Alias
USE (lcUniqueName) IN 0 ALIAS FrmPartTvrView
CURSORSETPROP([BUFFERING],3,[FrmPartTvrView])

*17.05.2004 01:32 -&gt;Îòêðîåì Alias äëÿ ðåäàêòèðîâàíèÿ áåç äàííûõ
USE lvFrmPartTvrEditOrder IN 0 NODATA
*------------------------------------------------------------------------------

*17.05.2004 01:34 -&gt; Îòêðûâàåì ñïðàâî÷íèêè
USE lvTovarList IN 0 ALIAS TovarList
USE lvCurTypeList IN 0
***
This.cMeasureUnitList = spGetBaseMsuList(0)
USE (LEFT(This.cMeasureUnitList,AT([;],This.cMeasureUnitList)-1)) IN 0 ALIAS lvTvrMsuList
*------------------------------------------------------------------------------
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3>cmode
cmeasureunitlist
nouid
nfrmid
datachanged
nrezerv îñòàòîê òîâàðà íà ðåçåðâíîì ñêëàäå
nitog
nfsperc
ndiscperc
*calculatepricemsu 
*_save 
*_cleardata 
*calculatesumsale 
*calculatevatsumsale 
*_determ_disc 
</reserved3>
		<reserved4/>
		<reserved5/>
		<reserved6>Pixels</reserved6>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1YN0WYQH9</uniqueid>
		<timestamp>0</timestamp>
		<class>grdpartord</class>
		<classloc>primarydoc_v1.vcx</classloc>
		<baseclass>grid</baseclass>
		<objname>Grdpartord</objname>
		<parent>frmprimarydocpartordedit___</parent>
		<properties/>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1YM12CSPA</uniqueid>
		<timestamp>946494005</timestamp>
		<class>frmedit</class>
		<classloc>baseform_v1.vcx</classloc>
		<baseclass>form</baseclass>
		<objname>frmprimarydocpartordedit</objname>
		<parent/>
		<properties>Height = 529
Width = 986
DoCreate = .T.
cmode = .F.
cmeasureunitlist = .F.
nouid = .F.
nfrmid = .F.
datachanged = .F.
nrezerv = .F.
nitog = .F.
nfsperc = 0
ndiscperc = 0
_standarttoolbar = tlbStandart;basetoolbar_v1.vcx
Name = "frmprimarydocpartordedit"
cstmsghandler.Name = "cstmsghandler"
cstresizable.Name = "cstresizable"
Img1.Name = "Img1"
cstdatawork.Name = "cstdatawork"
</properties>
		<protected/>
		<methods>PROCEDURE _cleardata
LPARAMETERS tlNoSetFocus

*--Îòìåíèì èçìåíåíèÿ
thisform.cstDataWork.Restore([lvFrmPartTvrEditOrder])

*--ïîäãîòîâèìñÿ ê ââîäó íîâîé ïîçèöèè
USE IN SELECT([lvFrmPartTvrEditOrder])

USE lvFrmPartTvrEditOrder IN 0 NODATA

*--Äîáàâèì ïóñòóþ çàïèñü
APPEND BLANK IN lvFrmPartTvrEditOrder
*------------------------------------------------------------------------------

*--Çàïèøåì èäåíòèôèêàòîð ðîäèòåëüñêîãî äîêóìåíòà
REPLACE FrmID WITH thisform.nFrmID IN lvFrmPartTvrEditOrder
*------------------------------------------------------------------------------

*--îïðåäåëèì ðåæèì
thisform.cMode = [ADD]

thisform.cntcancelsavehandled1.cmdCancel.Caption = [Íîâûé òîâàð]
thisform.cntcancelsavehandled1.cmdOK.Caption = [Äîáàâèòü â çàêàç]
thisform.cntcancelsavehandled1.cmdCancel.ForeColor = RGB(0,128,0)
thisform.cntcancelsavehandled1.cmdOK.ForeColor = RGB(0,128,0)

thisform.Comtxtctlcalclentluidbytlu.cmdClear.Click()
thisform.cntIdCtlGridMsu.cmdClear.Click()
thisform.txtQnt.Refresh()
thisform.Cnttvrsale.txtTvrPrcSale.Refresh()

*--Ïðîñ÷èòàåì ñóììû è ÍÄÑ
thisform.CalculateSumSale()
thisform.CalculateVatSumSale()

IF !tlNoSetFocus
	ThisForm.Comtxtctlcalclentluidbytlu.SetFocus()
ENDIF

ENDPROC
PROCEDURE _determ_disc
*--ïîëó÷èì ñêèäêó ïî äàííîìó òîâàðó äëÿ äàííîãî êëèåíòà
LPARAMETER tkod_t
LOCAL	_PARAM1, ;
		_PARAM2, ;
		lnDisc, ;
		lcOldAlias, ;
		lcCurrentDatabase

IF PCOUNT()&lt;1
	ASSERT .F. MESSAGE [Íåïðàâèëüíî ïåðåäàí ïàðàìåòð â ìåòîä determ_disc().]
ENDIF

lcOldAlias = ALIAS()

USE IN SELECT([lvDiscScaleViewByID])
_PARAM1 = lvFrmEdit.ExecIspCltID
_PARAM2 = tkod_t
USE lvDiscScaleViewByID IN 0

IF RECCOUNT([lvDiscScaleViewByID])&gt;0
	lnDisc = lvDiscScaleViewByID.DiscRate
ELSE
	lnDisc = 0
ENDIF

*--Âîññòàíîâèì òåêóùèé Alias
IF !EMPTY(lcOldAlias)
SELECT(lcOldAlias)
ENDIF
*------------------------------------------------------------------------------

RETURN lnDisc

ENDPROC
PROCEDURE _handlecntcancelsaveevent
*------------------------------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: FRMPRIMARYDOCPARTORDEDIT._HANDLECNTCANCELSAVEEVENT
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;tcMessage&gt;
* Returns.........: &lt;none&gt;
* Notes...........: &lt;~&gt;
*------------------------------------------------------------------------------
LPARAMETERS	tcMessage

LOCAL llResSave, ;
	  lnPartTvrID, ;
	  lpriceFS, ;
	  ldiscount
	

WITH This
	IF tcMessage == [OK]
		*--ïðè ðåäàêòèðîâàíèè çàïîìíèì ïîçèöèþ
		IF .cmode==[EDIT] OR .cmode==[DELE]
			lnPartTvrID = FrmPartTvrView.PartTvrID	
		ENDIF

		*--ïåðåñ÷èòàåì öåíó ñ ó÷åòîì ôàêòîðèíãà
		lpriceFS = (lvFrmPartTvrEditOrder.TvrPrcSale+ROUND(lvFrmPartTvrEditOrder.TvrPrcSale/100*thisform.nfsperc,2))		

		*--ïîñ÷èòàåì ñêèäêó
		ldiscount = ROUND(ROUND(lpriceFS*.ndiscperc/100, 2)*lvFrmPartTvrEditOrder.TvrQnt, 2)

		*--ïîäãîòîâèìñÿ ê ñîõðàíåíèþ äàííûõ
		SELECT lvFrmPartTvrEditOrder
		REPL lvFrmPartTvrEditOrder.TvrPrcSale WITH lpriceFS, ;
			 lvFrmPartTvrEditOrder.DiscPerc WITH .ndiscperc
		
		*--Ïðîèçâîäèì ñîõðàíåíèe
		llResSave = .cstDataWork.Save([lvFrmPartTvrEditOrder])

		*--Îáðàáàòûâàåì ðåçóëüòàòû ñîõðàíåíèÿ
		IF llResSave
			*--âûñòàâèì ôëàã èçìåíåíèÿ äàííûõ
			.Datachanged = .T.

			IF .cmode==[ADD]
				lnPartTvrID = .cstDataWork.GetLastID([lvFrmPartTvrEditOrder])
			ENDIF
			
			*--îáíîâèì äàííûå â âåðõíåé òàáëèöå (òîâàðíûå ïîçèöèè çàêàçà)
			.grdpartord._rsrequeryone(lnPartTvrID )
			.grdpartord.SetFocus()
			
		ENDIF
		*------------------------------------------------------------------------------
		
	ENDIF

	*--ïîäãîòîâèìñÿ ê ââîäó íîâîé çàïèñè
	._ClearData()
	
ENDWITH
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************

	

ENDPROC
PROCEDURE calculatesumsale
*------------------------------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: frmPrimaryDocPartOrdEdit.CalculateSumSale
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: &lt;public&gt; Ðàñ÷¸ò ñóììû ïðîäàæè
*------------------------------------------------------------------------------
WITH This

*23.09.2005 12:25 -&gt; Ðàñ÷¸ò ñóììû ïðîäàæè
IF TYPE([.cntTvrSale]) == [O] AND !ISNULL(.cntTvrSale)
	.cntTvrSale.txtTvrPrcSumSale.Value = ROUND(.cntTvrSale.txtTvrPrcSale.Value * .txtQnt.Value,2)
ENDIF
*------------------------------------------------------------------------------

ENDWITH
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE calculatevatsumsale
*------------------------------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: frmPrimaryDocPartOrdEdit.CalculateVatSumSale
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: &lt;public&gt; Ðàññ÷åò ÍÄÑ ïðîäàæè
*------------------------------------------------------------------------------
WITH This

*23.09.2005 12:17 -&gt; Ðàññ÷åò ÍÄÑ ïðîäàæè
IF TYPE([.cntTvrSale])==[O] AND !ISNULL(.cntTvrSale)
	IF .cntTvrVat.txtTvrVATRate.Value # 0
		.cntTvrSale.txtTvrVATSumSale.Value = ROUND(.cntTvrSale.txtTvrPrcSumSale.Value * .cntTvrVat.txtTvrVATRate.Value / (100 + .cntTvrVat.txtTvrVATRate.Value),2)
	ELSE
		.cntTvrSale.txtTvrVATSumSale.Value = 0
	ENDIF
ENDIF
*------------------------------------------------------------------------------

ENDWITH
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE Init
*------------------------------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: FRMPRIMARYDOCPARTORDEDIT.INIT
* Called by.......: &lt;Sys Event&gt;
* Parameters......: &lt;tcCommand,tuParam1&gt;
* Returns.........: &lt;none&gt;
* Notes...........: &lt;~&gt;
*------------------------------------------------------------------------------
LPARAMETERS	tcCommand,tuParam1

*--Âûïîëíèì ìåòîä ðîäèòåëüñêîãî êëàññà
DODEFAULT()
*------------------------------------------------------------------------------

thisform.nFrmID = tuParam1

*--îòêðîåì øàïêó çàêàçà
_PARAM = thisform.nFrmID
USE lvFrmEdit IN 0

thisform.nFSPerc = NVL(lvFrmEdit.FSPerc,0)

*--îáíîâèì äàííûå â âåðõíåé òàáëèöå (òîâàðíûå ïîçèöèè çàêàçà)
thisform.grdpartord._rsrequery(thisform.nFrmID)
*------------------------------------------------------------------------------

*--ïîäãîòîâèìñÿ ê ââîäó íîâîé òîâàðíîé ïîçèöèè
thisform._ClearData(.T.)
*------------------------------------------------------------------------------

*--Ïðîñ÷èòàåì ñóììû è ÍÄÑ
thisform.CalculateSumSale()
thisform.CalculateVatSumSale()

ENDPROC
PROCEDURE Load
*------------------------------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: FRMPRIMARYDOCPARTORDEDIT.LOAD
* Called by.......: &lt;Sys Event&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: &lt;~&gt;
*------------------------------------------------------------------------------
LOCAL lcUniqueName
	

*17.05.2004 01:32 -&gt;Âûïîëíèì ìåòîä ðîäèòåëüñêîãî êëàññà
DODEFAULT()
*------------------------------------------------------------------------------

*17.05.2004 01:32 -&gt;Îòêðîåì ÁÄ è óñòàíîâèì å¸ â êà÷åñòâå òåêóùåé
IF !DBUSED([BASIS])
	OPEN DATABASE BASIS
ENDIF
***
SET DATABASE TO BASIS
*------------------------------------------------------------------------------

*--Âûïîëíèì õðàíèìóþ ïðîöåäóðó äëÿ ïîëó÷åíèÿ ïóñòîé òàáëèöû ñ ïîçèöèÿìè çàêàçà
lcUniqueName = spFrmPartTvrView([NODATA])
*------------------------------------------------------------------------------

*--Òåïåðü îòêðîåì äàííûé Alias
USE (lcUniqueName) IN 0 ALIAS FrmPartTvrView
CURSORSETPROP([BUFFERING],3,[FrmPartTvrView])

*17.05.2004 01:32 -&gt;Îòêðîåì Alias äëÿ ðåäàêòèðîâàíèÿ áåç äàííûõ
USE lvFrmPartTvrEditOrder IN 0 NODATA
*------------------------------------------------------------------------------

*17.05.2004 01:34 -&gt; Îòêðûâàåì ñïðàâî÷íèêè
USE lvTovarList IN 0 ALIAS TovarList
USE lvCurTypeList IN 0
***
This.cMeasureUnitList = spGetBaseMsuList(0)
USE (LEFT(This.cMeasureUnitList,AT([;],This.cMeasureUnitList)-1)) IN 0 ALIAS lvTvrMsuList
*------------------------------------------------------------------------------
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3>cmode
cmeasureunitlist
nouid
nfrmid
datachanged
nrezerv îñòàòîê òîâàðà íà ðåçåðâíîì ñêëàäå
nitog
nfsperc
ndiscperc
*calculatepricemsu 
*_save 
*_cleardata 
*calculatesumsale 
*calculatevatsumsale 
*_determ_disc 
</reserved3>
		<reserved4/>
		<reserved5/>
		<reserved6>Pixels</reserved6>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1YN0WYQH9</uniqueid>
		<timestamp>0</timestamp>
		<class>grdpartord</class>
		<classloc>primarydoc_v1.vcx</classloc>
		<baseclass>grid</baseclass>
		<objname>Grdpartord</objname>
		<parent>frmprimarydocpartordedit__</parent>
		<properties/>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1YM12CSPA</uniqueid>
		<timestamp>946494168</timestamp>
		<class>frmedit</class>
		<classloc>..\..\..\work_vovk\basis_zoo\library\baseform_v1.vcx</classloc>
		<baseclass>form</baseclass>
		<objname>frmprimarydocpartordedit</objname>
		<parent/>
		<properties>Height = 529
Width = 986
DoCreate = .T.
cmode = .F.
cmeasureunitlist = .F.
nouid = .F.
nfrmid = .F.
datachanged = .F.
nrezerv = .F.
nitog = .F.
nfsperc = 0
ndiscperc = 0
_standarttoolbar = tlbStandart;basetoolbar_v1.vcx
Name = "frmprimarydocpartordedit"
cstmsghandler.Name = "cstmsghandler"
cstresizable.Name = "cstresizable"
cstdatawork.Name = "cstdatawork"
</properties>
		<protected/>
		<methods>PROCEDURE _cleardata
LPARAMETERS tlNoSetFocus

*--Îòìåíèì èçìåíåíèÿ
thisform.cstDataWork.Restore([lvFrmPartTvrEditOrder])

*--ïîäãîòîâèìñÿ ê ââîäó íîâîé ïîçèöèè
USE IN SELECT([lvFrmPartTvrEditOrder])

USE lvFrmPartTvrEditOrder IN 0 NODATA

*--Äîáàâèì ïóñòóþ çàïèñü
APPEND BLANK IN lvFrmPartTvrEditOrder
*------------------------------------------------------------------------------

*--Çàïèøåì èäåíòèôèêàòîð ðîäèòåëüñêîãî äîêóìåíòà
REPLACE FrmID WITH thisform.nFrmID IN lvFrmPartTvrEditOrder
*------------------------------------------------------------------------------

*--îïðåäåëèì ðåæèì
thisform.cMode = [ADD]

thisform.cntcancelsavehandled1.cmdCancel.Caption = [Íîâûé òîâàð]
thisform.cntcancelsavehandled1.cmdOK.Caption = [Äîáàâèòü â çàêàç]
thisform.cntcancelsavehandled1.cmdCancel.ForeColor = RGB(0,128,0)
thisform.cntcancelsavehandled1.cmdOK.ForeColor = RGB(0,128,0)

thisform.Comtxtctlcalclentluidbytlu.cmdClear.Click()
thisform.cntIdCtlGridMsu.cmdClear.Click()
thisform.txtQnt.Refresh()
thisform.Cnttvrsale.txtTvrPrcSale.Refresh()

*--Ïðîñ÷èòàåì ñóììû è ÍÄÑ
thisform.CalculateSumSale()
thisform.CalculateVatSumSale()

IF !tlNoSetFocus
	ThisForm.Comtxtctlcalclentluidbytlu.SetFocus()
ENDIF

ENDPROC
PROCEDURE _determ_disc
*--ïîëó÷èì ñêèäêó ïî äàííîìó òîâàðó äëÿ äàííîãî êëèåíòà
LPARAMETER tkod_t
LOCAL	_PARAM1, ;
		_PARAM2, ;
		lnDisc, ;
		lcOldAlias, ;
		lcCurrentDatabase

IF PCOUNT()&lt;1
	ASSERT .F. MESSAGE [Íåïðàâèëüíî ïåðåäàí ïàðàìåòð â ìåòîä determ_disc().]
ENDIF

lcOldAlias = ALIAS()

USE IN SELECT([lvDiscScaleViewByID])
_PARAM1 = lvFrmEdit.ExecIspCltID
_PARAM2 = tkod_t
USE lvDiscScaleViewByID IN 0

IF RECCOUNT([lvDiscScaleViewByID])&gt;0
	lnDisc = lvDiscScaleViewByID.DiscRate
ELSE
	lnDisc = 0
ENDIF

*--Âîññòàíîâèì òåêóùèé Alias
IF !EMPTY(lcOldAlias)
SELECT(lcOldAlias)
ENDIF
*------------------------------------------------------------------------------

RETURN lnDisc

ENDPROC
PROCEDURE _handlecntcancelsaveevent
*------------------------------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: FRMPRIMARYDOCPARTORDEDIT._HANDLECNTCANCELSAVEEVENT
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;tcMessage&gt;
* Returns.........: &lt;none&gt;
* Notes...........: &lt;~&gt;
*------------------------------------------------------------------------------
LPARAMETERS	tcMessage

LOCAL llResSave, ;
	  lnPartTvrID, ;
	  lpriceFS, ;
	  ldiscount
	

WITH This
	IF tcMessage == [OK]
		*--ïðè ðåäàêòèðîâàíèè çàïîìíèì ïîçèöèþ
		IF .cmode==[EDIT] OR .cmode==[DELE]
			lnPartTvrID = FrmPartTvrView.PartTvrID	
		ENDIF

		*--ïåðåñ÷èòàåì öåíó ñ ó÷åòîì ôàêòîðèíãà
		lpriceFS = (lvFrmPartTvrEditOrder.TvrPrcSale+ROUND(lvFrmPartTvrEditOrder.TvrPrcSale/100*thisform.nfsperc,2))		

		*--ïîñ÷èòàåì ñêèäêó
		ldiscount = ROUND(ROUND(lpriceFS*.ndiscperc/100, 2)*lvFrmPartTvrEditOrder.TvrQnt, 2)

		*--ïîäãîòîâèìñÿ ê ñîõðàíåíèþ äàííûõ
		SELECT lvFrmPartTvrEditOrder
		REPL lvFrmPartTvrEditOrder.TvrPrcSale WITH lpriceFS, ;
			 lvFrmPartTvrEditOrder.DiscPerc WITH .ndiscperc
		
		*--Ïðîèçâîäèì ñîõðàíåíèe
		llResSave = .cstDataWork.Save([lvFrmPartTvrEditOrder])

		*--Îáðàáàòûâàåì ðåçóëüòàòû ñîõðàíåíèÿ
		IF llResSave
			*--âûñòàâèì ôëàã èçìåíåíèÿ äàííûõ
			.Datachanged = .T.

			IF .cmode==[ADD]
				lnPartTvrID = .cstDataWork.GetLastID([lvFrmPartTvrEditOrder])
			ENDIF
			
			*--îáíîâèì äàííûå â âåðõíåé òàáëèöå (òîâàðíûå ïîçèöèè çàêàçà)
			.grdpartord._rsrequeryone(lnPartTvrID )
			.grdpartord.SetFocus()
			
		ENDIF
		*------------------------------------------------------------------------------
		
	ENDIF

	*--ïîäãîòîâèìñÿ ê ââîäó íîâîé çàïèñè
	._ClearData()
	
ENDWITH
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************

	

ENDPROC
PROCEDURE calculatesumsale
*------------------------------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: frmPrimaryDocPartOrdEdit.CalculateSumSale
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: &lt;public&gt; Ðàñ÷¸ò ñóììû ïðîäàæè
*------------------------------------------------------------------------------
WITH This

*23.09.2005 12:25 -&gt; Ðàñ÷¸ò ñóììû ïðîäàæè
IF TYPE([.cntTvrSale]) == [O] AND !ISNULL(.cntTvrSale)
	.cntTvrSale.txtTvrPrcSumSale.Value = ROUND(.cntTvrSale.txtTvrPrcSale.Value * .txtQnt.Value,2)
ENDIF
*------------------------------------------------------------------------------

ENDWITH
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE calculatevatsumsale
*------------------------------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: frmPrimaryDocPartOrdEdit.CalculateVatSumSale
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: &lt;public&gt; Ðàññ÷åò ÍÄÑ ïðîäàæè
*------------------------------------------------------------------------------
WITH This

*23.09.2005 12:17 -&gt; Ðàññ÷åò ÍÄÑ ïðîäàæè
IF TYPE([.cntTvrSale])==[O] AND !ISNULL(.cntTvrSale)
	IF .cntTvrVat.txtTvrVATRate.Value # 0
		.cntTvrSale.txtTvrVATSumSale.Value = ROUND(.cntTvrSale.txtTvrPrcSumSale.Value * .cntTvrVat.txtTvrVATRate.Value / (100 + .cntTvrVat.txtTvrVATRate.Value),2)
	ELSE
		.cntTvrSale.txtTvrVATSumSale.Value = 0
	ENDIF
ENDIF
*------------------------------------------------------------------------------

ENDWITH
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE Init
*------------------------------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: FRMPRIMARYDOCPARTORDEDIT.INIT
* Called by.......: &lt;Sys Event&gt;
* Parameters......: &lt;tcCommand,tuParam1&gt;
* Returns.........: &lt;none&gt;
* Notes...........: &lt;~&gt;
*------------------------------------------------------------------------------
LPARAMETERS	tcCommand,tuParam1

*--Âûïîëíèì ìåòîä ðîäèòåëüñêîãî êëàññà
DODEFAULT()
*------------------------------------------------------------------------------

thisform.nFrmID = tuParam1

*--îòêðîåì øàïêó çàêàçà
_PARAM = thisform.nFrmID
USE lvFrmEdit IN 0

thisform.nFSPerc = NVL(lvFrmEdit.FSPerc,0)

*--îáíîâèì äàííûå â âåðõíåé òàáëèöå (òîâàðíûå ïîçèöèè çàêàçà)
thisform.grdpartord._rsrequery(thisform.nFrmID)
*------------------------------------------------------------------------------

*--ïîäãîòîâèìñÿ ê ââîäó íîâîé òîâàðíîé ïîçèöèè
thisform._ClearData(.T.)
*------------------------------------------------------------------------------

*--Ïðîñ÷èòàåì ñóììû è ÍÄÑ
thisform.CalculateSumSale()
thisform.CalculateVatSumSale()

ENDPROC
PROCEDURE Load
*------------------------------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: FRMPRIMARYDOCPARTORDEDIT.LOAD
* Called by.......: &lt;Sys Event&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: &lt;~&gt;
*------------------------------------------------------------------------------
LOCAL lcUniqueName
	

*17.05.2004 01:32 -&gt;Âûïîëíèì ìåòîä ðîäèòåëüñêîãî êëàññà
DODEFAULT()
*------------------------------------------------------------------------------

*17.05.2004 01:32 -&gt;Îòêðîåì ÁÄ è óñòàíîâèì å¸ â êà÷åñòâå òåêóùåé
IF !DBUSED([BASIS])
	OPEN DATABASE BASIS
ENDIF
***
SET DATABASE TO BASIS
*------------------------------------------------------------------------------

*--Âûïîëíèì õðàíèìóþ ïðîöåäóðó äëÿ ïîëó÷åíèÿ ïóñòîé òàáëèöû ñ ïîçèöèÿìè çàêàçà
lcUniqueName = spFrmPartTvrView([NODATA])
*------------------------------------------------------------------------------

*--Òåïåðü îòêðîåì äàííûé Alias
USE (lcUniqueName) IN 0 ALIAS FrmPartTvrView
CURSORSETPROP([BUFFERING],3,[FrmPartTvrView])

*17.05.2004 01:32 -&gt;Îòêðîåì Alias äëÿ ðåäàêòèðîâàíèÿ áåç äàííûõ
USE lvFrmPartTvrEditOrder IN 0 NODATA
*------------------------------------------------------------------------------

*17.05.2004 01:34 -&gt; Îòêðûâàåì ñïðàâî÷íèêè
USE lvTovarList IN 0 ALIAS TovarList
USE lvCurTypeList IN 0
***
This.cMeasureUnitList = spGetBaseMsuList(0)
USE (LEFT(This.cMeasureUnitList,AT([;],This.cMeasureUnitList)-1)) IN 0 ALIAS lvTvrMsuList
*------------------------------------------------------------------------------
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3>cmode
cmeasureunitlist
nouid
nfrmid
datachanged
nrezerv îñòàòîê òîâàðà íà ðåçåðâíîì ñêëàäå
nitog
nfsperc
ndiscperc
*calculatepricemsu 
*_save 
*_cleardata 
*calculatesumsale 
*calculatevatsumsale 
*_determ_disc 
</reserved3>
		<reserved4/>
		<reserved5/>
		<reserved6>Pixels</reserved6>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1YN0WYQH9</uniqueid>
		<timestamp>0</timestamp>
		<class>grdpartord</class>
		<classloc>primarydoc_v1.vcx</classloc>
		<baseclass>grid</baseclass>
		<objname>Grdpartord</objname>
		<parent>frmprimarydocpartordedit</parent>
		<properties/>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1YN0WTRV5</uniqueid>
		<timestamp>946497073</timestamp>
		<class>grdparttvr</class>
		<classloc>primarydoc_v1.vcx</classloc>
		<baseclass>grid</baseclass>
		<objname>grdpartord__</objname>
		<parent/>
		<properties>Name = "grdpartord"
Column1.Header1.Name = "Header1"
Column1.Text1.Name = "Text1"
Column1.Name = "Column1"
Column2.Header1.Name = "Header1"
Column2.Text1.Name = "Text1"
Column2.Name = "Column2"
Column3.Header1.Name = "Header1"
Column3.Text1.Name = "Text1"
Column3.Name = "Column3"
Column4.Header1.Name = "Header1"
Column4.Text1.Name = "Text1"
Column4.Name = "Column4"
COLUMN5.Header1.Name = "Header1"
COLUMN5.Text1.Name = "Text1"
COLUMN5.Name = "COLUMN5"
COLUMN6.Header1.Name = "Header1"
COLUMN6.Text1.Name = "Text1"
COLUMN6.Name = "COLUMN6"
COLUMN7.Header1.Name = "Header1"
COLUMN7.Text1.Name = "Text1"
COLUMN7.Name = "COLUMN7"
COLUMN8.Header1.Name = "Header1"
COLUMN8.Text1.Name = "Text1"
COLUMN8.Name = "COLUMN8"
COLUMN9.Header1.Name = "Header1"
COLUMN9.Text1.Name = "Text1"
COLUMN9.Name = "COLUMN9"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1>Class</reserved1>
		<reserved2>1</reserved2>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6>Pixels</reserved6>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>COMMENT</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>0</timestamp>
		<class/>
		<classloc/>
		<baseclass/>
		<objname>grdpartord__</objname>
		<parent/>
		<properties>Arial, 0, 9, 5, 15, 12, 32, 3, 0
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1YM12CSPA</uniqueid>
		<timestamp>946497107</timestamp>
		<class>frmedit</class>
		<classloc>baseform_v1.vcx</classloc>
		<baseclass>form</baseclass>
		<objname>frmprimarydocpartordedit</objname>
		<parent/>
		<properties>Height = 529
Width = 986
DoCreate = .T.
cmode = .F.
cmeasureunitlist = .F.
nouid = .F.
nfrmid = .F.
datachanged = .F.
nrezerv = .F.
nitog = .F.
nfsperc = 0
ndiscperc = 0
_standarttoolbar = tlbStandart;basetoolbar_v1.vcx
Name = "frmprimarydocpartordedit"
cstmsghandler.Name = "cstmsghandler"
cstresizable.Name = "cstresizable"
Img1.Name = "Img1"
cstdatawork.Name = "cstdatawork"
</properties>
		<protected/>
		<methods>PROCEDURE _cleardata
LPARAMETERS tlNoSetFocus

*--Îòìåíèì èçìåíåíèÿ
thisform.cstDataWork.Restore([lvFrmPartTvrEditOrder])

*--ïîäãîòîâèìñÿ ê ââîäó íîâîé ïîçèöèè
USE IN SELECT([lvFrmPartTvrEditOrder])

USE lvFrmPartTvrEditOrder IN 0 NODATA

*--Äîáàâèì ïóñòóþ çàïèñü
APPEND BLANK IN lvFrmPartTvrEditOrder
*------------------------------------------------------------------------------

*--Çàïèøåì èäåíòèôèêàòîð ðîäèòåëüñêîãî äîêóìåíòà
REPLACE FrmID WITH thisform.nFrmID IN lvFrmPartTvrEditOrder
*------------------------------------------------------------------------------

*--îïðåäåëèì ðåæèì
thisform.cMode = [ADD]

thisform.cntcancelsavehandled1.cmdCancel.Caption = [Íîâûé òîâàð]
thisform.cntcancelsavehandled1.cmdOK.Caption = [Äîáàâèòü â çàêàç]
thisform.cntcancelsavehandled1.cmdCancel.ForeColor = RGB(0,128,0)
thisform.cntcancelsavehandled1.cmdOK.ForeColor = RGB(0,128,0)

thisform.Comtxtctlcalclentluidbytlu.cmdClear.Click()
thisform.cntIdCtlGridMsu.cmdClear.Click()
thisform.txtQnt.Refresh()
thisform.Cnttvrsale.txtTvrPrcSale.Refresh()

*--Ïðîñ÷èòàåì ñóììû è ÍÄÑ
thisform.CalculateSumSale()
thisform.CalculateVatSumSale()

IF !tlNoSetFocus
	ThisForm.Comtxtctlcalclentluidbytlu.SetFocus()
ENDIF

ENDPROC
PROCEDURE _determ_disc
*--ïîëó÷èì ñêèäêó ïî äàííîìó òîâàðó äëÿ äàííîãî êëèåíòà
LPARAMETER tkod_t
LOCAL	_PARAM1, ;
		_PARAM2, ;
		lnDisc, ;
		lcOldAlias, ;
		lcCurrentDatabase

IF PCOUNT()&lt;1
	ASSERT .F. MESSAGE [Íåïðàâèëüíî ïåðåäàí ïàðàìåòð â ìåòîä determ_disc().]
ENDIF

lcOldAlias = ALIAS()

USE IN SELECT([lvDiscScaleViewByID])
_PARAM1 = lvFrmEdit.ExecIspCltID
_PARAM2 = tkod_t
USE lvDiscScaleViewByID IN 0

IF RECCOUNT([lvDiscScaleViewByID])&gt;0
	lnDisc = lvDiscScaleViewByID.DiscRate
ELSE
	lnDisc = 0
ENDIF

*--Âîññòàíîâèì òåêóùèé Alias
IF !EMPTY(lcOldAlias)
SELECT(lcOldAlias)
ENDIF
*------------------------------------------------------------------------------

RETURN lnDisc

ENDPROC
PROCEDURE _handlecntcancelsaveevent
*------------------------------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: FRMPRIMARYDOCPARTORDEDIT._HANDLECNTCANCELSAVEEVENT
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;tcMessage&gt;
* Returns.........: &lt;none&gt;
* Notes...........: &lt;~&gt;
*------------------------------------------------------------------------------
LPARAMETERS	tcMessage

LOCAL llResSave, ;
	  lnPartTvrID, ;
	  lpriceFS, ;
	  ldiscount
	

WITH This
	IF tcMessage == [OK]
		*--ïðè ðåäàêòèðîâàíèè çàïîìíèì ïîçèöèþ
		IF .cmode==[EDIT] OR .cmode==[DELE]
			lnPartTvrID = FrmPartTvrView.PartTvrID	
		ENDIF

		*--ïåðåñ÷èòàåì öåíó ñ ó÷åòîì ôàêòîðèíãà
		lpriceFS = (lvFrmPartTvrEditOrder.TvrPrcSale+ROUND(lvFrmPartTvrEditOrder.TvrPrcSale/100*thisform.nfsperc,2))		

		*--ïîñ÷èòàåì ñêèäêó
		ldiscount = ROUND(ROUND(lpriceFS*.ndiscperc/100, 2)*lvFrmPartTvrEditOrder.TvrQnt, 2)

		*--ïîäãîòîâèìñÿ ê ñîõðàíåíèþ äàííûõ
		SELECT lvFrmPartTvrEditOrder
		REPL lvFrmPartTvrEditOrder.TvrPrcSale WITH lpriceFS, ;
			 lvFrmPartTvrEditOrder.DiscPerc WITH .ndiscperc
		
		*--Ïðîèçâîäèì ñîõðàíåíèe
		llResSave = .cstDataWork.Save([lvFrmPartTvrEditOrder])

		*--Îáðàáàòûâàåì ðåçóëüòàòû ñîõðàíåíèÿ
		IF llResSave
			*--âûñòàâèì ôëàã èçìåíåíèÿ äàííûõ
			.Datachanged = .T.

			IF .cmode==[ADD]
				lnPartTvrID = .cstDataWork.GetLastID([lvFrmPartTvrEditOrder])
			ENDIF
			
			*--îáíîâèì äàííûå â âåðõíåé òàáëèöå (òîâàðíûå ïîçèöèè çàêàçà)
			.grdpartord._rsrequeryone(lnPartTvrID )
			.grdpartord.SetFocus()
			
		ENDIF
		*------------------------------------------------------------------------------
		
	ENDIF

	*--ïîäãîòîâèìñÿ ê ââîäó íîâîé çàïèñè
	._ClearData()
	
ENDWITH
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************

	

ENDPROC
PROCEDURE calculatesumsale
*------------------------------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: frmPrimaryDocPartOrdEdit.CalculateSumSale
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: &lt;public&gt; Ðàñ÷¸ò ñóììû ïðîäàæè
*------------------------------------------------------------------------------
WITH This

*23.09.2005 12:25 -&gt; Ðàñ÷¸ò ñóììû ïðîäàæè
IF TYPE([.cntTvrSale]) == [O] AND !ISNULL(.cntTvrSale)
	.cntTvrSale.txtTvrPrcSumSale.Value = ROUND(.cntTvrSale.txtTvrPrcSale.Value * .txtQnt.Value,2)
ENDIF
*------------------------------------------------------------------------------

ENDWITH
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE calculatevatsumsale
*------------------------------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: frmPrimaryDocPartOrdEdit.CalculateVatSumSale
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: &lt;public&gt; Ðàññ÷åò ÍÄÑ ïðîäàæè
*------------------------------------------------------------------------------
WITH This

*23.09.2005 12:17 -&gt; Ðàññ÷åò ÍÄÑ ïðîäàæè
IF TYPE([.cntTvrSale])==[O] AND !ISNULL(.cntTvrSale)
	IF .cntTvrVat.txtTvrVATRate.Value # 0
		.cntTvrSale.txtTvrVATSumSale.Value = ROUND(.cntTvrSale.txtTvrPrcSumSale.Value * .cntTvrVat.txtTvrVATRate.Value / (100 + .cntTvrVat.txtTvrVATRate.Value),2)
	ELSE
		.cntTvrSale.txtTvrVATSumSale.Value = 0
	ENDIF
ENDIF
*------------------------------------------------------------------------------

ENDWITH
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE Init
*------------------------------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: FRMPRIMARYDOCPARTORDEDIT.INIT
* Called by.......: &lt;Sys Event&gt;
* Parameters......: &lt;tcCommand,tuParam1&gt;
* Returns.........: &lt;none&gt;
* Notes...........: &lt;~&gt;
*------------------------------------------------------------------------------
LPARAMETERS	tcCommand,tuParam1

*--Âûïîëíèì ìåòîä ðîäèòåëüñêîãî êëàññà
DODEFAULT()
*------------------------------------------------------------------------------

thisform.nFrmID = tuParam1

*--îòêðîåì øàïêó çàêàçà
_PARAM = thisform.nFrmID
USE lvFrmEdit IN 0

thisform.nFSPerc = NVL(lvFrmEdit.FSPerc,0)

*--îáíîâèì äàííûå â âåðõíåé òàáëèöå (òîâàðíûå ïîçèöèè çàêàçà)
thisform.grdpartord._rsrequery(thisform.nFrmID)
*------------------------------------------------------------------------------

*--ïîäãîòîâèìñÿ ê ââîäó íîâîé òîâàðíîé ïîçèöèè
thisform._ClearData(.T.)
*------------------------------------------------------------------------------

*--Ïðîñ÷èòàåì ñóììû è ÍÄÑ
thisform.CalculateSumSale()
thisform.CalculateVatSumSale()

ENDPROC
PROCEDURE Load
*------------------------------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: FRMPRIMARYDOCPARTORDEDIT.LOAD
* Called by.......: &lt;Sys Event&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: &lt;~&gt;
*------------------------------------------------------------------------------
LOCAL lcUniqueName
	

*17.05.2004 01:32 -&gt;Âûïîëíèì ìåòîä ðîäèòåëüñêîãî êëàññà
DODEFAULT()
*------------------------------------------------------------------------------

*17.05.2004 01:32 -&gt;Îòêðîåì ÁÄ è óñòàíîâèì å¸ â êà÷åñòâå òåêóùåé
IF !DBUSED([BASIS])
	OPEN DATABASE BASIS
ENDIF
***
SET DATABASE TO BASIS
*------------------------------------------------------------------------------

*--Âûïîëíèì õðàíèìóþ ïðîöåäóðó äëÿ ïîëó÷åíèÿ ïóñòîé òàáëèöû ñ ïîçèöèÿìè çàêàçà
lcUniqueName = spFrmPartTvrView([NODATA])
*------------------------------------------------------------------------------

*--Òåïåðü îòêðîåì äàííûé Alias
USE (lcUniqueName) IN 0 ALIAS FrmPartTvrView
CURSORSETPROP([BUFFERING],3,[FrmPartTvrView])

*17.05.2004 01:32 -&gt;Îòêðîåì Alias äëÿ ðåäàêòèðîâàíèÿ áåç äàííûõ
USE lvFrmPartTvrEditOrder IN 0 NODATA
*------------------------------------------------------------------------------

*17.05.2004 01:34 -&gt; Îòêðûâàåì ñïðàâî÷íèêè
USE lvTovarList IN 0 ALIAS TovarList
USE lvCurTypeList IN 0
***
This.cMeasureUnitList = spGetBaseMsuList(0)
USE (LEFT(This.cMeasureUnitList,AT([;],This.cMeasureUnitList)-1)) IN 0 ALIAS lvTvrMsuList
*------------------------------------------------------------------------------
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3>cmode
cmeasureunitlist
nouid
nfrmid
datachanged
nrezerv îñòàòîê òîâàðà íà ðåçåðâíîì ñêëàäå
nitog
nfsperc
ndiscperc
*calculatepricemsu 
*_save 
*_cleardata 
*calculatesumsale 
*calculatevatsumsale 
*_determ_disc 
</reserved3>
		<reserved4/>
		<reserved5/>
		<reserved6>Pixels</reserved6>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1YN0WYQH9</uniqueid>
		<timestamp>0</timestamp>
		<class>grdpartord</class>
		<classloc>primarydoc_v1.vcx</classloc>
		<baseclass>grid</baseclass>
		<objname>Grdpartord</objname>
		<parent>frmprimarydocpartordedit</parent>
		<properties/>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1YM12CSPA</uniqueid>
		<timestamp>949066825</timestamp>
		<class>frmedit</class>
		<classloc>baseform_v1.vcx</classloc>
		<baseclass>form</baseclass>
		<objname>frmprimarydocpartordedit</objname>
		<parent/>
		<properties>Height = 529
Width = 986
DoCreate = .T.
cmode = .F.
cmeasureunitlist = .F.
nouid = .F.
nfrmid = .F.
datachanged = .F.
nrezerv = .F.
nitog = .F.
nfsperc = 0
ndiscperc = 0
_standarttoolbar = tlbStandart;basetoolbar_v1.vcx
Name = "frmprimarydocpartordedit"
cstmsghandler.Name = "cstmsghandler"
cstresizable.Name = "cstresizable"
Img1.Name = "Img1"
cstdatawork.Name = "cstdatawork"
</properties>
		<protected/>
		<methods>PROCEDURE _cleardata
LPARAMETERS tlNoSetFocus

*--Îòìåíèì èçìåíåíèÿ
thisform.cstDataWork.Restore([lvFrmPartTvrEditOrder])

*--ïîäãîòîâèìñÿ ê ââîäó íîâîé ïîçèöèè
USE IN SELECT([lvFrmPartTvrEditOrder])

USE lvFrmPartTvrEditOrder IN 0 NODATA

*--Äîáàâèì ïóñòóþ çàïèñü
APPEND BLANK IN lvFrmPartTvrEditOrder
*------------------------------------------------------------------------------

*--Çàïèøåì èäåíòèôèêàòîð ðîäèòåëüñêîãî äîêóìåíòà
REPLACE FrmID WITH thisform.nFrmID IN lvFrmPartTvrEditOrder
*------------------------------------------------------------------------------

*--îïðåäåëèì ðåæèì
thisform.cMode = [ADD]

thisform.cntcancelsavehandled1.cmdCancel.Caption = [Íîâûé òîâàð]
thisform.cntcancelsavehandled1.cmdOK.Caption = [Äîáàâèòü â çàêàç]
thisform.cntcancelsavehandled1.cmdCancel.ForeColor = RGB(0,128,0)
thisform.cntcancelsavehandled1.cmdOK.ForeColor = RGB(0,128,0)

thisform.Comtxtctlcalclentluidbytlu.cmdClear.Click()
thisform.cntIdCtlGridMsu.cmdClear.Click()
thisform.txtQnt.Refresh()
thisform.Cnttvrsale.txtTvrPrcSale.Refresh()

*--Ïðîñ÷èòàåì ñóììû è ÍÄÑ
thisform.CalculateSumSale()
thisform.CalculateVatSumSale()

IF !tlNoSetFocus
	ThisForm.Comtxtctlcalclentluidbytlu.SetFocus()
ENDIF

ENDPROC
PROCEDURE _determ_disc
*--ïîëó÷èì ñêèäêó ïî äàííîìó òîâàðó äëÿ äàííîãî êëèåíòà
LPARAMETER tkod_t
LOCAL	_PARAM1, ;
		_PARAM2, ;
		lnDisc, ;
		lcOldAlias, ;
		lcCurrentDatabase

IF PCOUNT()&lt;1
	ASSERT .F. MESSAGE [Íåïðàâèëüíî ïåðåäàí ïàðàìåòð â ìåòîä determ_disc().]
ENDIF

lcOldAlias = ALIAS()

USE IN SELECT([lvDiscScaleViewByID])
_PARAM1 = lvFrmEdit.ExecIspCltID
_PARAM2 = tkod_t
USE lvDiscScaleViewByID IN 0

IF RECCOUNT([lvDiscScaleViewByID])&gt;0
	lnDisc = lvDiscScaleViewByID.DiscRate
ELSE
	lnDisc = 0
ENDIF

*--Âîññòàíîâèì òåêóùèé Alias
IF !EMPTY(lcOldAlias)
SELECT(lcOldAlias)
ENDIF
*------------------------------------------------------------------------------

RETURN lnDisc

ENDPROC
PROCEDURE _handlecntcancelsaveevent
*------------------------------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: FRMPRIMARYDOCPARTORDEDIT._HANDLECNTCANCELSAVEEVENT
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;tcMessage&gt;
* Returns.........: &lt;none&gt;
* Notes...........: &lt;~&gt;
*------------------------------------------------------------------------------
LPARAMETERS	tcMessage

LOCAL llResSave, ;
	  lnPartTvrID, ;
	  lpriceFS, ;
	  ldiscount
	

WITH This
	IF tcMessage == [OK]
		*--ïðè ðåäàêòèðîâàíèè çàïîìíèì ïîçèöèþ
		IF .cmode==[EDIT] OR .cmode==[DELE]
			lnPartTvrID = FrmPartTvrView.PartTvrID	
		ENDIF

		*--ïåðåñ÷èòàåì öåíó ñ ó÷åòîì ôàêòîðèíãà
		lpriceFS = (lvFrmPartTvrEditOrder.TvrPrcSale+ROUND(lvFrmPartTvrEditOrder.TvrPrcSale/100*thisform.nfsperc,2))		

		*--ïîñ÷èòàåì ñêèäêó
		ldiscount = ROUND(ROUND(lpriceFS*.ndiscperc/100, 2)*lvFrmPartTvrEditOrder.TvrQnt, 2)

		*--ïîäãîòîâèìñÿ ê ñîõðàíåíèþ äàííûõ
		SELECT lvFrmPartTvrEditOrder
		REPL lvFrmPartTvrEditOrder.TvrPrcSale WITH lpriceFS, ;
			 lvFrmPartTvrEditOrder.DiscPerc WITH .ndiscperc
		
		*--Ïðîèçâîäèì ñîõðàíåíèe
		llResSave = .cstDataWork.Save([lvFrmPartTvrEditOrder])

		*--Îáðàáàòûâàåì ðåçóëüòàòû ñîõðàíåíèÿ
		IF llResSave
			*--âûñòàâèì ôëàã èçìåíåíèÿ äàííûõ
			.Datachanged = .T.

			IF .cmode==[ADD]
				lnPartTvrID = .cstDataWork.GetLastID([lvFrmPartTvrEditOrder])
			ENDIF
			
			*--îáíîâèì äàííûå â âåðõíåé òàáëèöå (òîâàðíûå ïîçèöèè çàêàçà)
			.grdpartord._rsrequeryone(lnPartTvrID )
			.grdpartord.SetFocus()
			
		ENDIF
		*------------------------------------------------------------------------------
		
	ENDIF

	*--ïîäãîòîâèìñÿ ê ââîäó íîâîé çàïèñè
	._ClearData()
	
ENDWITH
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************

	

ENDPROC
PROCEDURE calculatesumsale
*------------------------------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: frmPrimaryDocPartOrdEdit.CalculateSumSale
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: &lt;public&gt; Ðàñ÷¸ò ñóììû ïðîäàæè
*------------------------------------------------------------------------------
WITH This

*23.09.2005 12:25 -&gt; Ðàñ÷¸ò ñóììû ïðîäàæè
IF TYPE([.cntTvrSale]) == [O] AND !ISNULL(.cntTvrSale)
	.cntTvrSale.txtTvrPrcSumSale.Value = ROUND(.cntTvrSale.txtTvrPrcSale.Value * .txtQnt.Value,2)
ENDIF
*------------------------------------------------------------------------------

ENDWITH
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE calculatevatsumsale
*------------------------------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: frmPrimaryDocPartOrdEdit.CalculateVatSumSale
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: &lt;public&gt; Ðàññ÷åò ÍÄÑ ïðîäàæè
*------------------------------------------------------------------------------
WITH This

*23.09.2005 12:17 -&gt; Ðàññ÷åò ÍÄÑ ïðîäàæè
IF TYPE([.cntTvrSale])==[O] AND !ISNULL(.cntTvrSale)
	IF .cntTvrVat.txtTvrVATRate.Value # 0
		.cntTvrSale.txtTvrVATSumSale.Value = ROUND(.cntTvrSale.txtTvrPrcSumSale.Value * .cntTvrVat.txtTvrVATRate.Value / (100 + .cntTvrVat.txtTvrVATRate.Value),2)
	ELSE
		.cntTvrSale.txtTvrVATSumSale.Value = 0
	ENDIF
ENDIF
*------------------------------------------------------------------------------

ENDWITH
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE Init
*------------------------------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: FRMPRIMARYDOCPARTORDEDIT.INIT
* Called by.......: &lt;Sys Event&gt;
* Parameters......: &lt;tcCommand,tuParam1&gt;
* Returns.........: &lt;none&gt;
* Notes...........: &lt;~&gt;
*------------------------------------------------------------------------------
LPARAMETERS	tcCommand,tuParam1

*--Âûïîëíèì ìåòîä ðîäèòåëüñêîãî êëàññà
DODEFAULT()
*------------------------------------------------------------------------------

thisform.nFrmID = tuParam1

*--îòêðîåì øàïêó çàêàçà
_PARAM = thisform.nFrmID
USE lvFrmEdit IN 0

thisform.nFSPerc = NVL(lvFrmEdit.FSPerc,0)

*--îáíîâèì äàííûå â âåðõíåé òàáëèöå (òîâàðíûå ïîçèöèè çàêàçà)
thisform.grdpartord._rsrequery(thisform.nFrmID)
*------------------------------------------------------------------------------

*--ïîäãîòîâèìñÿ ê ââîäó íîâîé òîâàðíîé ïîçèöèè
thisform._ClearData(.T.)
*------------------------------------------------------------------------------

*--Ïðîñ÷èòàåì ñóììû è ÍÄÑ
thisform.CalculateSumSale()
thisform.CalculateVatSumSale()

ENDPROC
PROCEDURE Load
*------------------------------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: FRMPRIMARYDOCPARTORDEDIT.LOAD
* Called by.......: &lt;Sys Event&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: &lt;~&gt;
*------------------------------------------------------------------------------
LOCAL lcUniqueName
	

*17.05.2004 01:32 -&gt;Âûïîëíèì ìåòîä ðîäèòåëüñêîãî êëàññà
DODEFAULT()
*------------------------------------------------------------------------------

*17.05.2004 01:32 -&gt;Îòêðîåì ÁÄ è óñòàíîâèì å¸ â êà÷åñòâå òåêóùåé
IF !DBUSED([BASIS])
	OPEN DATABASE BASIS
ENDIF
***
SET DATABASE TO BASIS
*------------------------------------------------------------------------------

*--Âûïîëíèì õðàíèìóþ ïðîöåäóðó äëÿ ïîëó÷åíèÿ ïóñòîé òàáëèöû ñ ïîçèöèÿìè çàêàçà
lcUniqueName = spFrmPartTvrView([NODATA])
*------------------------------------------------------------------------------

*--Òåïåðü îòêðîåì äàííûé Alias
USE (lcUniqueName) IN 0 ALIAS FrmPartTvrView
CURSORSETPROP([BUFFERING],3,[FrmPartTvrView])

*17.05.2004 01:32 -&gt;Îòêðîåì Alias äëÿ ðåäàêòèðîâàíèÿ áåç äàííûõ
USE lvFrmPartTvrEditOrder IN 0 NODATA
*------------------------------------------------------------------------------

*17.05.2004 01:34 -&gt; Îòêðûâàåì ñïðàâî÷íèêè
USE lvTovarList IN 0 ALIAS TovarList
USE lvCurTypeList IN 0
***
This.cMeasureUnitList = spGetBaseMsuList(0)
USE (LEFT(This.cMeasureUnitList,AT([;],This.cMeasureUnitList)-1)) IN 0 ALIAS lvTvrMsuList
*------------------------------------------------------------------------------
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3>cmode
cmeasureunitlist
nouid
nfrmid
datachanged
nrezerv îñòàòîê òîâàðà íà ðåçåðâíîì ñêëàäå
nitog
nfsperc
ndiscperc
*calculatepricemsu 
*_save 
*_cleardata 
*calculatesumsale 
*calculatevatsumsale 
*_determ_disc 
</reserved3>
		<reserved4/>
		<reserved5/>
		<reserved6>Pixels</reserved6>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1YN0WYQH9</uniqueid>
		<timestamp>0</timestamp>
		<class>grdpartord</class>
		<classloc>primarydoc_v1.vcx</classloc>
		<baseclass>grid</baseclass>
		<objname>Grdpartord</objname>
		<parent>frmprimarydocpartordedit</parent>
		<properties/>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1A610IJYB</uniqueid>
		<timestamp>949393008</timestamp>
		<class>frmprimarydocview</class>
		<classloc>primarydoc_v1.vcx</classloc>
		<baseclass>form</baseclass>
		<objname>frmprimarydocviewprbook</objname>
		<parent/>
		<properties>Top = 1
Left = 0
Height = 474
Width = 700
DoCreate = .T.
WindowState = 2
viewhistory = .F.
viewprbook = .F.
viewtvr = .F.
viewfrm = .F.
viewres = .F.
Name = "frmprimarydocviewprbook"
cstmsghandler.Name = "cstmsghandler"
cstresizable.Name = "cstresizable"
Img1.Name = "Img1"
CmdFlt.Name = "CmdFlt"
GrdDocsView.ColumnCount = 12
GrdDocsView.Column1.Header1.Name = "Header1"
GrdDocsView.Column1.Text1.Name = "Text1"
GrdDocsView.Column1.Name = "Column1"
GrdDocsView.Column2.Header1.Name = "Header1"
GrdDocsView.Column2.Name = "Column2"
GrdDocsView.Column3.Header1.Name = "Header1"
GrdDocsView.Column3.Text1.Name = "Text1"
GrdDocsView.Column3.Name = "Column3"
GrdDocsView.Column4.Header1.Name = "Header1"
GrdDocsView.Column4.Text1.Name = "Text1"
GrdDocsView.Column4.Name = "Column4"
GrdDocsView.Column5.Header1.Name = "Header1"
GrdDocsView.Column5.Text1.Name = "Text1"
GrdDocsView.Column5.Name = "Column5"
GrdDocsView.Column6.Header1.Caption = "Îòïðàâèòåëü"
GrdDocsView.Column6.Header1.Name = "Header1"
GrdDocsView.Column6.Text1.Name = "Text1"
GrdDocsView.Column6.Name = "Column6"
GrdDocsView.Column7.Header1.Caption = "Ïîëó÷àòåëü"
GrdDocsView.Column7.Header1.Name = "Header1"
GrdDocsView.Column7.Text1.Name = "Text1"
GrdDocsView.Column7.Name = "Column7"
GrdDocsView.Column8.Header1.Alignment = 6
GrdDocsView.Column8.Header1.Caption = "Ñóììà (ïîñòóï.)"
GrdDocsView.Column8.Header1.WordWrap = .T.
GrdDocsView.Column8.Header1.Name = "Header1"
GrdDocsView.Column8.Text1.Name = "Text1"
GrdDocsView.Column8.ControlSource = "PrimaryDocView.FrmSumBuy"
GrdDocsView.Column8.Name = "Column8"
GrdDocsView.Column9.Header1.Name = "Header1"
GrdDocsView.Column9.Text1.Name = "Text1"
GrdDocsView.Column9.ControlSource = "PrimaryDocView.FrmVatBuy"
GrdDocsView.Column9.Name = "Column9"
GrdDocsView.Column10.Header1.Alignment = 6
GrdDocsView.Column10.Header1.Caption = "Ñóììà (ïðîäàæà)"
GrdDocsView.Column10.Header1.WordWrap = .T.
GrdDocsView.Column10.Header1.Name = "Header1"
GrdDocsView.Column10.Text1.Name = "Text1"
GrdDocsView.Column10.ControlSource = "PrimaryDocView.FrmSumSale"
GrdDocsView.Column10.Name = "Column10"
GrdDocsView.Column11.ControlSource = "PrimaryDocView.FrmVatSale"
GrdDocsView.Column11.Name = "Column11"
GrdDocsView.Column12.ControlSource = "PrimaryDocView.FrmNote"
GrdDocsView.Column12.Name = "Column12"
GrdDocsView.HeaderHeight = 35
GrdDocsView.Left = 5
GrdDocsView.Width = 690
GrdDocsView.ZOrderSet = 4
GrdDocsView.Name = "GrdDocsView"
math.Name = "math"
Cntfrmstatusinfo1.ShpFrmStatusInfo.Name = "ShpFrmStatusInfo"
Cntfrmstatusinfo1.lblStatusID.Name = "lblStatusID"
Cntfrmstatusinfo1.shpStatusID1.Name = "shpStatusID1"
Cntfrmstatusinfo1.lblStatusID1.Name = "lblStatusID1"
Cntfrmstatusinfo1.shpStatusID2.Name = "shpStatusID2"
Cntfrmstatusinfo1.lblStatusID2.Name = "lblStatusID2"
Cntfrmstatusinfo1.shpStatusID3.Name = "shpStatusID3"
Cntfrmstatusinfo1.lblStatusID3.Name = "lblStatusID3"
Cntfrmstatusinfo1.shpStatusID4.Name = "shpStatusID4"
Cntfrmstatusinfo1.lblStatusID4.Name = "lblStatusID4"
Cntfrmstatusinfo1.ZOrderSet = 6
Cntfrmstatusinfo1.Name = "Cntfrmstatusinfo1"
cntSum.Shp2.Name = "Shp2"
cntSum.lblDocumentCountCaption.Name = "lblDocumentCountCaption"
cntSum.txtDocumentCount.Name = "txtDocumentCount"
cntSum.txtDocumentSum.Name = "txtDocumentSum"
cntSum.txtDocumentVatSum.Name = "txtDocumentVatSum"
cntSum.txtDocumentCountMark.Name = "txtDocumentCountMark"
cntSum.txtDocumentVatSumMark.Name = "txtDocumentVatSumMark"
cntSum.LBL1.Name = "LBL1"
cntSum.txtDocumentSumMark.Name = "txtDocumentSumMark"
cntSum.ZOrderSet = 7
cntSum.Name = "cntSum"
</properties>
		<protected/>
		<methods>PROCEDURE Cntfrmstatusinfo1.lblStatusID1.Click
DODEFAULT()
thisform.grdPartPr._rsrequery(PrimaryDocView.FrmID)

ENDPROC
PROCEDURE Cntfrmstatusinfo1.lblStatusID2.Click
DODEFAULT()
thisform.grdPartPr._rsrequery(PrimaryDocView.FrmID)

ENDPROC
PROCEDURE Cntfrmstatusinfo1.lblStatusID3.Click
DODEFAULT()
thisform.grdPartPr._rsrequery(PrimaryDocView.FrmID)

ENDPROC
PROCEDURE Cntfrmstatusinfo1.lblStatusID4.Click
DODEFAULT()
thisform.grdPartPr._rsrequery(PrimaryDocView.FrmID)

ENDPROC
PROCEDURE GrdDocsView._add
*-------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: GRDDOCSVIEW._ADD
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Äîáàâëåíèå äîêóìåíòà.
*-------------------------------------------------------

*12.05.2004 03:25 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	luResAdding
*------------------------------------------------------------------------------

*12.05.2004 03:26 -&gt;Âûïîëíÿåì îïåðàöèþ äîáàâëåíèÿ äîêóìåíòà
luResAdding = oMgrPD.Operate([FORM],[ADD],ThisForm.nScrFrmID)
*------------------------------------------------------------------------------

*12.05.2004 03:26 -&gt;Îáðàáàòûâàåì ðåçóëüòàò äîáàâëåíèÿ
IF TYPE([luResAdding])==[N] AND !EMPTY(luResAdding)
	
		LOCAL luResultAdding
		*express_add = .t.
		DO WHILE TYPE('luResAdding')=[N] AND luResAdding&lt;&gt;0
luResultAdding = oMgrPD.Operate([PARTPRBOOK],[ADD],luResAdding )
IF TYPE('luResultAdding')&lt;&gt;[N] OR luResultAdding =0
EXIT
ENDIF
		ENDDO
	*22.12.2004 15:16 -&gt;Îáíîâëÿåì çàïèñü
	This._RSRequeryOne(luResAdding)
	*------------------------------------------------------------------------------

ENDIF
*------------------------------------------------------------------------------

************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************
ENDPROC
PROCEDURE GrdDocsView._refreshrelatedobjects
LOCAL _PARAM
_PARAM = PrimaryDocView.FrmID
USE lvFrmContain IN 0
WITH ThisForm
.GrdPartPr.Visible  = .f.
.GrdPartPr.Enabled  = .f.
.GrdPartTvr.Visible = .f.
.GrdPartTvr.Enabled = .f.
.GrdPartFrm.Visible = .f.
.GrdPartFrm.Enabled = .f.
.GrdPartHs.Visible = .f.
.GrdPartHs.Enabled = .f.
.GrdPartRes.Visible = .f.
.GrdPartRes.Enabled = .f.
DO CASE
CASE .ViewHistory
.GrdPartHs.GridLayoutRestore()
.GrdPartHS._RSRequery(PrimaryDocView.FrmID)
		  .GrdPartHs.Visible  = .t.
		  .GrdPartHs.Enabled  = .t.
CASE .ViewPrBook
.GrdPartPr.GridLayoutRestore()
.GrdPartPr._RSRequery(PrimaryDocView.FrmID)
		  .GrdPartPr.Visible  = .t.
		  .GrdPartPr.Enabled  = .t.
CASE .ViewFrm
.GrdPartFrm.GridLayoutRestore()
.GrdPartFrm._RSRequery(PrimaryDocView.FrmID)
		  .GrdPartFrm.Visible = .t.
		  .GrdPartFrm.Enabled = .t.
CASE .ViewTvr
.GrdPartTvr.GridLayoutRestore()
.GrdPartTvr._RSRequery(PrimaryDocView.FrmID)
.GrdPartTvr.Visible = .t.
.GrdPartTvr.Enabled = .t.
CASE .ViewRes
.GrdPartRes.GridLayoutRestore()
.GrdPartRes._RSRequery(PrimaryDocView.FrmID)
.GrdPartRes.Visible = .t.
.GrdPartRes.Enabled = .t.
OTHERWISE
.GrdPartTvr.GridLayoutRestore()
.GrdPartTvr._RSRequery(PrimaryDocView.FrmID)
.GrdPartTvr.Visible = .t.
.GrdPartTvr.Enabled = .t.
ENDCASE
ENDWITH
ENDPROC
PROCEDURE Load
*-------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: FRMPRIMARYDOCVIEWTVR.LOAD
* Called by.......: &lt;Sys Event&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Îòêðûòèå LV äëÿ Grid-à ñ ñîäåðæàíèåì äîêóìåíòà (òîâàðíûì)
*-------------------------------------------------------

*14.07.2004 00:13 -&gt;Âûïîëíèì ìåòîä ðîäèòåëüñêîãî êëàññà
DODEFAULT()
*------------------------------------------------------------------------------

*******************************************************************************
*1. Çàãðóçèì ïóñòîé Alias äëÿ ïðîñìîòðà íîã äîêóìåíòîâ                        *
*******************************************************************************

*02.12.2004 16:59 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	lcUniqueNameBook,lcUniqueNameFrm,lcUniqueNameTvr,lcUniqueNameAct,lcUniqueNameRes
*------------------------------------------------------------------------------
*21.04.2004 14:05 -&gt;Âûïîëíèì õðàíèìóþ ïðîöåäóðó äëÿ ïîëó÷åíèÿ ïóñòîé òàáëèöû
lcUniqueNameBook = spFrmPrBookView([NODATA])
lcUniqueNameFrm  = spFrmPartFrmView([NODATA])
lcUniqueNameTvr  = spFrmPartTvrView([NODATA])
*lcUniqueNameAct  = spFrmActionView([NODATA])
lcUniqueNameRes = spFrmPartTvrJrnView([NODATA])
*------------------------------------------------------------------------------

*21.04.2004 14:08 -&gt;Òåïåðü îòêðîåì äàííûé Alias
USE (lcUniqueNameRes) IN 0 ALIAS FrmPartResView
CURSORSETPROP([BUFFERING],3,[FrmPartResView])
*------------------------------------------------------------------------------
*------------------------------------------------------------------------------
*21.04.2004 14:08 -&gt;Òåïåðü îòêðîåì äàííûé Alias
USE (lcUniqueNameBook) IN 0 ALIAS FrmPrBookView
CURSORSETPROP([BUFFERING],3,[FrmPrBookView])
USE (lcUniqueNameFrm) IN 0 ALIAS FrmPartFrmView
CURSORSETPROP([BUFFERING],3,[FrmPartFrmView])
USE (lcUniqueNameTvr) IN 0 ALIAS FrmPartTvrView
CURSORSETPROP([BUFFERING],3,[FrmPartTvrView])
USE lvFrmActionView IN 0 NODATA

************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************
ENDPROC
PROCEDURE Unload
*-------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: frmPrimaryDocViewTvr.UnLoad
* Called by.......: &lt;Sys Event&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: &lt;sysevent&gt; Âûãðóçêà ôîðìû
*-------------------------------------------------------

*21.07.2004 16:27 -&gt; Âûïîëíèì ìåòîä ðîäèòåëüñêîãî êëàññà
DODEFAULT()
*----------------------------------------------------------------------------

*****************************************************************************
* Çàêðîåì Alias äëÿ ïðîñìîòðà òîâàðíûõ ïîçèöèé äîêóìåíòîâ è óäàëèì âðåìåííóþ*
* òàáëèöó                                                                   *
*****************************************************************************

*21.07.2004 16:27 -&gt; Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	lcUniqueFilePath
*------------------------------------------------------------------------------

*21.07.2004 16:27 -&gt; Çàêðîåì Alias è óäàëèì âðåìåííóþ òàáëèöó
lcUniqueFilePath = DBF([FrmPrBookView])
***
USE IN FrmPrBookView
***
IF FILE(lcUniqueFilePath)
	ERASE (lcUniqueFilePath)
ENDIF
*------------------------------------------------------------------------------
lcUniqueFilePath = DBF([FrmPartFrmView])
***
USE IN FrmPartFrmView
***
IF FILE(lcUniqueFilePath)
	ERASE (lcUniqueFilePath)
ENDIF
*------------------------------------------------------------------------------
lcUniqueFilePath = DBF([FrmPartTvrView])
***
USE IN FrmPartTvrView
***
IF FILE(lcUniqueFilePath)
	ERASE (lcUniqueFilePath)
ENDIF
USE IN lvFrmActionView

*21.07.2004 16:27 -&gt; Çàêðîåì Alias è óäàëèì âðåìåííóþ òàáëèöó
lcUniqueFilePath = DBF([FrmPartResView])
***
USE IN FrmPartResView
***
IF FILE(lcUniqueFilePath)
	ERASE (lcUniqueFilePath)
ENDIF

*------------------------------------------------------------------------------

************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1>Class</reserved1>
		<reserved2>12</reserved2>
		<reserved3>viewhistory Ïîêàçàòü èñòîðèþ ðàáîòû ñ äîêóìåíòîì
viewprbook Ïîêàçàòü æóðíàë õîç îïåðàöèé
viewtvr ïîêàçàòü âõîäÿùèå ïðîäóêòû
viewfrm ïîêàçàòü âõîäÿùèå äîêóìåíòû
viewres Ïîêàçûâåì òàáëèöó ñ èñïîëüçîâàíèåì ðåñóðñîâ
</reserved3>
		<reserved4/>
		<reserved5/>
		<reserved6>Pixels</reserved6>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_21S0MVGOJ</uniqueid>
		<timestamp>949393008</timestamp>
		<class>grdpartfrm</class>
		<classloc>primarydoc_v1.vcx</classloc>
		<baseclass>grid</baseclass>
		<objname>Grdpartfrm</objname>
		<parent>frmprimarydocviewprbook</parent>
		<properties>Enabled = .F.
Height = 180
Left = 5
Top = 240
Visible = .F.
Width = 690
ZOrderSet = 8
Name = "Grdpartfrm"
Column1.Header1.Name = "Header1"
Column1.Text1.Enabled = .F.
Column1.Text1.Visible = .F.
Column1.Text1.Name = "Text1"
Column1.Enabled = .F.
Column1.Visible = .F.
Column1.Name = "Column1"
Column2.Header1.Name = "Header1"
Column2.Text1.Enabled = .F.
Column2.Text1.Visible = .F.
Column2.Text1.Name = "Text1"
Column2.Enabled = .F.
Column2.Visible = .F.
Column2.Name = "Column2"
Column3.Header1.Name = "Header1"
Column3.Text1.Enabled = .F.
Column3.Text1.Visible = .F.
Column3.Text1.Name = "Text1"
Column3.Enabled = .F.
Column3.Visible = .F.
Column3.Name = "Column3"
Column4.Header1.Name = "Header1"
Column4.Text1.Enabled = .F.
Column4.Text1.Visible = .F.
Column4.Text1.Name = "Text1"
Column4.Enabled = .F.
Column4.Visible = .F.
Column4.Name = "Column4"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_21S0PHGZE</uniqueid>
		<timestamp>926771206</timestamp>
		<class>optiongroup</class>
		<classloc/>
		<baseclass>optiongroup</baseclass>
		<objname>SelectSour</objname>
		<parent>frmprimarydocviewprbook</parent>
		<properties>ButtonCount = 5
Value = 1
Height = 18
Left = 5
SpecialEffect = 0
Top = 421
Width = 451
ZOrderSet = 9
Name = "SelectSour"
Option1.Caption = "Ïðîäóêòû"
Option1.Value = 1
Option1.Height = 17
Option1.Left = 9
Option1.Top = 0
Option1.Width = 100
Option1.Name = "Sour"
Option2.Caption = "Ïðîâîäêè"
Option2.Height = 17
Option2.Left = 105
Option2.Top = 0
Option2.Width = 84
Option2.Name = "PrBook"
Option3.Caption = "Èñòîðèÿ"
Option3.Height = 17
Option3.Left = 201
Option3.Top = 0
Option3.Width = 72
Option3.Name = "Hist"
Option4.Caption = "Äîêóìåíòû"
Option4.Height = 17
Option4.Left = 284
Option4.Top = 0
Option4.Width = 84
Option4.Name = "FrmIncl"
Option5.Caption = "Ðåñóðñû"
Option5.Height = 17
Option5.Left = 376
Option5.Top = 0
Option5.Width = 65
Option5.Name = "Resurs"
</properties>
		<protected/>
		<methods>PROCEDURE InteractiveChange


WITH ThisForm
.ViewHistory = (This.Hist.Value   =1)
.ViewPrBook  = (This.PrBook.Value =1)
.ViewFrm  = (This.FrmIncl.Value =1)
.ViewTvr  = (This.Sour.Value =1)
.ViewRes  = (This.Resurs.Value =1)
.grdDocsView._refreshrelatedobjects()
ENDWITH

ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_21S0QLYF4</uniqueid>
		<timestamp>949393008</timestamp>
		<class>grdfrmaction</class>
		<classloc>primarydoc_v1.vcx</classloc>
		<baseclass>grid</baseclass>
		<objname>GrdPartHs</objname>
		<parent>frmprimarydocviewprbook</parent>
		<properties>Enabled = .F.
Height = 180
Left = 5
RecordSource = "lvFrmActionView"
Top = 240
Visible = .F.
Width = 690
ZOrderSet = 10
Name = "GrdPartHs"
Column1.Header1.Name = "Header1"
Column1.Txtgrd1.Enabled = .F.
Column1.Txtgrd1.Visible = .F.
Column1.Txtgrd1.Name = "Txtgrd1"
Column1.Enabled = .F.
Column1.Visible = .F.
Column1.Name = "Column1"
Column2.Header1.Name = "Header1"
Column2.Txtgrd1.Enabled = .F.
Column2.Txtgrd1.Visible = .F.
Column2.Txtgrd1.Name = "Txtgrd1"
Column2.Enabled = .F.
Column2.Visible = .F.
Column2.Name = "Column2"
Column3.Header1.Name = "Header1"
Column3.Txtgrd1.Enabled = .F.
Column3.Txtgrd1.Visible = .F.
Column3.Txtgrd1.Name = "Txtgrd1"
Column3.Enabled = .F.
Column3.Visible = .F.
Column3.Name = "Column3"
Column4.Header1.Name = "Header1"
Column4.Txtgrd1.Enabled = .F.
Column4.Txtgrd1.Visible = .F.
Column4.Txtgrd1.Name = "Txtgrd1"
Column4.Enabled = .F.
Column4.Visible = .F.
Column4.Name = "Column4"
COLUMN5.Header1.Name = "Header1"
COLUMN5.Text1.Enabled = .F.
COLUMN5.Text1.Visible = .F.
COLUMN5.Text1.Name = "Text1"
COLUMN5.Enabled = .F.
COLUMN5.Visible = .F.
COLUMN5.Name = "COLUMN5"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_21S0MVGOL</uniqueid>
		<timestamp>949393008</timestamp>
		<class>grdparttvr</class>
		<classloc>primarydoc_v1.vcx</classloc>
		<baseclass>grid</baseclass>
		<objname>Grdparttvr</objname>
		<parent>frmprimarydocviewprbook</parent>
		<properties>Height = 180
Left = 5
Top = 240
Width = 690
ZOrderSet = 11
Name = "Grdparttvr"
Column1.Header1.Name = "Header1"
Column1.Text1.Name = "Text1"
Column1.Name = "Column1"
Column2.Header1.Name = "Header1"
Column2.Text1.Name = "Text1"
Column2.Name = "Column2"
Column3.Header1.Name = "Header1"
Column3.Text1.Name = "Text1"
Column3.Name = "Column3"
Column4.Header1.Name = "Header1"
Column4.Text1.Name = "Text1"
Column4.Name = "Column4"
COLUMN5.Header1.Name = "Header1"
COLUMN5.Text1.Name = "Text1"
COLUMN5.Name = "COLUMN5"
COLUMN6.Header1.Name = "Header1"
COLUMN6.Text1.Name = "Text1"
COLUMN6.Name = "COLUMN6"
COLUMN7.Header1.Name = "Header1"
COLUMN7.Text1.Name = "Text1"
COLUMN7.Name = "COLUMN7"
COLUMN8.Header1.Name = "Header1"
COLUMN8.Text1.Name = "Text1"
COLUMN8.Name = "COLUMN8"
COLUMN9.Header1.Name = "Header1"
COLUMN9.Text1.Name = "Text1"
COLUMN9.Name = "COLUMN9"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1V713AGB9</uniqueid>
		<timestamp>949393008</timestamp>
		<class>grdpartpractical</class>
		<classloc>primarydoc_v1.vcx</classloc>
		<baseclass>grid</baseclass>
		<objname>grdPartPr</objname>
		<parent>frmprimarydocviewprbook</parent>
		<properties>Enabled = .F.
Height = 180
Left = 5
RecordSource = "FrmPrBookView"
Top = 240
Visible = .F.
Width = 690
ZOrderSet = 12
Name = "grdPartPr"
COLUMN1.Header1.Name = "Header1"
COLUMN1.Text1.ControlSource = "FrmPrBookView.PBookSum"
COLUMN1.Text1.Enabled = .F.
COLUMN1.Text1.Visible = .F.
COLUMN1.Text1.Name = "Text1"
COLUMN1.ControlSource = "FrmPrBookView.PBookSum"
COLUMN1.Enabled = .F.
COLUMN1.Visible = .F.
COLUMN1.Name = "COLUMN1"
COLUMN2.Header1.Name = "Header1"
COLUMN2.Text1.Enabled = .F.
COLUMN2.Text1.Visible = .F.
COLUMN2.Text1.Name = "Text1"
COLUMN2.ControlSource = "FrmPrBookView.Debet"
COLUMN2.Enabled = .F.
COLUMN2.Visible = .F.
COLUMN2.Name = "COLUMN2"
COLUMN3.Header1.Name = "Header1"
COLUMN3.Text1.ControlSource = "FrmPrBookView.Credit"
COLUMN3.Text1.Enabled = .F.
COLUMN3.Text1.Visible = .F.
COLUMN3.Text1.Name = "Text1"
COLUMN3.ControlSource = "FrmPrBookView.Credit"
COLUMN3.Enabled = .F.
COLUMN3.Visible = .F.
COLUMN3.Name = "COLUMN3"
COLUMN4.Header1.Name = "Header1"
COLUMN4.Text1.Enabled = .F.
COLUMN4.Text1.Visible = .F.
COLUMN4.Text1.Name = "Text1"
COLUMN4.ControlSource = ""
COLUMN4.Enabled = .F.
COLUMN4.Visible = .F.
COLUMN4.Name = "COLUMN4"
</properties>
		<protected/>
		<methods>PROCEDURE _rsrequeryone
LPARAMETERS tnFrmPartID
DODEFAULT(tnFrmPartID)
ThisForm.GrdDocsView._RSRequeryOne(This.nFrmID,.T.)
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_26X0PMBS2</uniqueid>
		<timestamp>949393008</timestamp>
		<class>grdpartres</class>
		<classloc>primarydoc_v1.vcx</classloc>
		<baseclass>grid</baseclass>
		<objname>GrdPartRes</objname>
		<parent>frmprimarydocviewprbook</parent>
		<properties>Height = 180
Left = 5
Top = 240
Width = 690
Name = "GrdPartRes"
COLUMN1.Header1.Name = "Header1"
COLUMN1.Text1.Name = "Text1"
COLUMN1.Name = "COLUMN1"
COLUMN2.Header1.Name = "Header1"
COLUMN2.Text1.Name = "Text1"
COLUMN2.Name = "COLUMN2"
COLUMN3.Header1.Name = "Header1"
COLUMN3.Text1.Name = "Text1"
COLUMN3.Name = "COLUMN3"
COLUMN4.Header1.Name = "Header1"
COLUMN4.Text1.Name = "Text1"
COLUMN4.Name = "COLUMN4"
COLUMN5.Header1.Name = "Header1"
COLUMN5.Text1.Name = "Text1"
COLUMN5.Name = "COLUMN5"
COLUMN6.Header1.Name = "Header1"
COLUMN6.Text1.Name = "Text1"
COLUMN6.Name = "COLUMN6"
COLUMN7.Header1.Name = "Header1"
COLUMN7.Text1.Name = "Text1"
COLUMN7.Name = "COLUMN7"
COLUMN8.Header1.Name = "Header1"
COLUMN8.Text1.Name = "Text1"
COLUMN8.Name = "COLUMN8"
COLUMN9.Header1.Name = "Header1"
COLUMN9.Text1.Name = "Text1"
COLUMN9.Name = "COLUMN9"
COLUMN10.Header1.Name = "Header1"
COLUMN10.Text1.Name = "Text1"
COLUMN10.Name = "COLUMN10"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_R020K4VL1</uniqueid>
		<timestamp>0</timestamp>
		<class>txtgrd</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>Text1</objname>
		<parent>frmprimarydocviewprbook.GrdDocsView.Column1</parent>
		<properties>BorderStyle = 0
Margin = 0
ForeColor = 0,0,0
BackColor = 255,255,255
Name = "Text1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>0</timestamp>
		<class>header</class>
		<classloc/>
		<baseclass>header</baseclass>
		<objname>Header1</objname>
		<parent>frmprimarydocviewprbook.GrdDocsView.Column11</parent>
		<properties>Alignment = 2
Caption = "ÍÄÑ"
Name = "Header1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_R020K4VL1</uniqueid>
		<timestamp>0</timestamp>
		<class>txtgrd</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>Text1</objname>
		<parent>frmprimarydocviewprbook.GrdDocsView.Column11</parent>
		<properties>BorderStyle = 0
Margin = 0
ForeColor = 0,0,0
BackColor = 255,255,255
Name = "Text1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1CW12Q298</uniqueid>
		<timestamp>0</timestamp>
		<class>header</class>
		<classloc/>
		<baseclass>header</baseclass>
		<objname>Header1</objname>
		<parent>frmprimarydocviewprbook.GrdDocsView.Column12</parent>
		<properties>Caption = "Ïðèìå÷àíèå"
Name = "Header1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1CW12Q299</uniqueid>
		<timestamp>0</timestamp>
		<class>txtgrd</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>Text1</objname>
		<parent>frmprimarydocviewprbook.GrdDocsView.Column12</parent>
		<properties>BorderStyle = 0
Margin = 0
ForeColor = 0,0,0
BackColor = 255,255,255
Name = "Text1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>COMMENT</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>0</timestamp>
		<class/>
		<classloc/>
		<baseclass/>
		<objname>frmprimarydocviewprbook</objname>
		<parent/>
		<properties>Arial, 0, 9, 5, 15, 12, 32, 3, 0
Arial, 1, 8, 5, 14, 11, 29, 3, 0
Arial, 0, 8, 5, 14, 11, 29, 3, 0
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1A610IJYB</uniqueid>
		<timestamp>949393015</timestamp>
		<class>frmprimarydocview</class>
		<classloc>primarydoc_v1.vcx</classloc>
		<baseclass>form</baseclass>
		<objname>frmprimarydocviewtvr</objname>
		<parent/>
		<properties>Top = 0
Left = 0
Height = 469
Width = 698
DoCreate = .T.
WindowState = 0
Name = "frmprimarydocviewtvr"
cstmsghandler.Name = "cstmsghandler"
cstresizable.Name = "cstresizable"
Img1.Name = "Img1"
CmdFlt.Name = "CmdFlt"
GrdDocsView.ColumnCount = 12
GrdDocsView.Column1.Header1.Name = "Header1"
GrdDocsView.Column1.Text1.Name = "Text1"
GrdDocsView.Column1.Name = "Column1"
GrdDocsView.Column2.Header1.Name = "Header1"
GrdDocsView.Column2.Name = "Column2"
GrdDocsView.Column3.Header1.Name = "Header1"
GrdDocsView.Column3.Text1.Name = "Text1"
GrdDocsView.Column3.Name = "Column3"
GrdDocsView.Column4.Header1.Name = "Header1"
GrdDocsView.Column4.Text1.Name = "Text1"
GrdDocsView.Column4.Name = "Column4"
GrdDocsView.Column5.Header1.Name = "Header1"
GrdDocsView.Column5.Text1.Name = "Text1"
GrdDocsView.Column5.Name = "Column5"
GrdDocsView.Column6.Header1.Name = "Header1"
GrdDocsView.Column6.Text1.Name = "Text1"
GrdDocsView.Column6.Name = "Column6"
GrdDocsView.Column7.Header1.Name = "Header1"
GrdDocsView.Column7.Text1.Name = "Text1"
GrdDocsView.Column7.Name = "Column7"
GrdDocsView.Column8.Header1.Alignment = 6
GrdDocsView.Column8.Header1.Caption = "Ñóììà (ïîñòóï.)"
GrdDocsView.Column8.Header1.WordWrap = .T.
GrdDocsView.Column8.Header1.Name = "Header1"
GrdDocsView.Column8.Text1.Name = "Text1"
GrdDocsView.Column8.ControlSource = "PrimaryDocView.FrmSumBuy"
GrdDocsView.Column8.Name = "Column8"
GrdDocsView.Column9.Header1.Name = "Header1"
GrdDocsView.Column9.Text1.Name = "Text1"
GrdDocsView.Column9.ControlSource = "PrimaryDocView.FrmVatBuy"
GrdDocsView.Column9.Name = "Column9"
GrdDocsView.Column10.Header1.Alignment = 6
GrdDocsView.Column10.Header1.Caption = "Ñóììà (ïðîäàæà)"
GrdDocsView.Column10.Header1.WordWrap = .T.
GrdDocsView.Column10.Header1.Name = "Header1"
GrdDocsView.Column10.Text1.Name = "Text1"
GrdDocsView.Column10.ControlSource = "PrimaryDocView.FrmSumSale"
GrdDocsView.Column10.Name = "Column10"
GrdDocsView.Column11.ControlSource = "PrimaryDocView.FrmVatSale"
GrdDocsView.Column11.Name = "Column11"
GrdDocsView.Column12.ControlSource = "PrimaryDocView.FrmNote"
GrdDocsView.Column12.Name = "Column12"
GrdDocsView.HeaderHeight = 35
GrdDocsView.Left = 5
GrdDocsView.Width = 690
GrdDocsView._handledcustommsglist = PAYDOCMAKE
GrdDocsView._handledcustommsgpromptlist = Ñôîðìèðîâàòü ïëàòåæ
GrdDocsView.Name = "GrdDocsView"
math.Name = "math"
Cntfrmstatusinfo1.ShpFrmStatusInfo.Name = "ShpFrmStatusInfo"
Cntfrmstatusinfo1.lblStatusID.Name = "lblStatusID"
Cntfrmstatusinfo1.shpStatusID1.Name = "shpStatusID1"
Cntfrmstatusinfo1.lblStatusID1.Name = "lblStatusID1"
Cntfrmstatusinfo1.shpStatusID2.Name = "shpStatusID2"
Cntfrmstatusinfo1.lblStatusID2.Name = "lblStatusID2"
Cntfrmstatusinfo1.shpStatusID3.Name = "shpStatusID3"
Cntfrmstatusinfo1.lblStatusID3.Name = "lblStatusID3"
Cntfrmstatusinfo1.shpStatusID4.Name = "shpStatusID4"
Cntfrmstatusinfo1.lblStatusID4.Name = "lblStatusID4"
Cntfrmstatusinfo1.Name = "Cntfrmstatusinfo1"
cntSum.Shp2.Name = "Shp2"
cntSum.lblDocumentCountCaption.Name = "lblDocumentCountCaption"
cntSum.txtDocumentCount.Name = "txtDocumentCount"
cntSum.txtDocumentSum.Name = "txtDocumentSum"
cntSum.txtDocumentVatSum.Name = "txtDocumentVatSum"
cntSum.txtDocumentCountMark.Name = "txtDocumentCountMark"
cntSum.txtDocumentVatSumMark.Name = "txtDocumentVatSumMark"
cntSum.LBL1.Name = "LBL1"
cntSum.txtDocumentSumMark.Name = "txtDocumentSumMark"
cntSum.Name = "cntSum"
</properties>
		<protected/>
		<methods>PROCEDURE GrdDocsView._add

*-------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: GRDDOCSVIEW._ADD
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Äîáàâëåíèå äîêóìåíòà.
*-------------------------------------------------------

*12.05.2004 03:25 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	luResAdding
*------------------------------------------------------------------------------
*12.05.2004 03:26 -&gt;Âûïîëíÿåì îïåðàöèþ äîáàâëåíèÿ äîêóìåíòà
luResAdding = oMgrPD.Operate([FORM],[ADD],ThisForm.nScrFrmID)
*------------------------------------------------------------------------------

*12.05.2004 03:26 -&gt;Îáðàáàòûâàåì ðåçóëüòàò äîáàâëåíèÿ
IF TYPE([luResAdding])==[N] &amp;&amp;AND !EMPTY(luResAdding)
	IF luResAdding = 0
	   this._rsrequery()
	   SELECT PrimaryDocView
	   GO bott
	   luResAdding = PrimaryDocView.FrmId
*	   this.Refresh()
*	   retu
	ENDIF
	*22.12.2004 15:16 -&gt;Îáíîâëÿåì çàïèñü
	This._RSRequeryOne(luResAdding)
	*------------------------------------------------------------------------------
	
		LOCAL luResultAdding
		*express_add = .t.
		DO WHILE TYPE('luResAdding')=[N] AND luResAdding &lt;&gt;0
				DO CASE
				   CASE PrimaryDocView.FrmTypeId = 21
				          luResultAdding = oMgrPD.Operate([PARTMNU],[ADD],luResAdding )
				   CASE PrimaryDocView.FrmTypeId = 19
				          luResultAdding = oMgrPD.Operate([PARTCLC],[ADD],luResAdding )
				   CASE PrimaryDocView.FrmTypeId = 0
				          luResultAdding = oMgrPD.Operate([PARTTVR],[ADD],luResAdding )
				   OTHERWISE
				          luResultAdding = oMgrPD.Operate([PARTTVR],[ADD],luResAdding )
				ENDCASE
IF TYPE('luResultAdding')&lt;&gt;[N] OR luResultAdding =0
				*22.12.2004 15:16 -&gt;Îáíîâëÿåì çàïèñü
				This._RSRequeryOne(luResAdding)
EXIT
ENDIF
		ENDDO
ENDIF
*------------------------------------------------------------------------------

************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************
ENDPROC
PROCEDURE GrdDocsView._gethandledstandartmsglist
*------------------------------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: grdDocsView._GETHANDLEDSTANDARTMSGLIST
* Called by.......: &lt;.RefreshHandledStandartMsgList();.RightClick()&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;lcResult&gt;
* Notes...........: Äëÿ íàêëàäíûõ, ñôîðìèðîâàííûõ àâòîìàòè÷åñêè (ïî çàêàçó), îñòàâèì òîëüêî ïðîñìîòð
*------------------------------------------------------------------------------
LOCAL lnFrmTypeID, ;
	  lnFrmParID, ;
	  _PARAM, ;
	  lcResult

*--âûïîëíèì ìåòîä ðîäèòåëüñêîãî êëàññà
lcResult = DODEFAULT()

lnFrmTypeID = PrimaryDocView.FrmTypeID
lnFrmParID = PrimaryDocView.FrmParID

*--ïðîâåðèì, ÿâëÿåòñÿ ëè äàííûé äîêóìåíò íàêëàäíîé
IF !INLIST(lnFrmTypeID,__TYPE_NAKL_R,__TYPE_NAKL_P,__TYPE_NAKL_I)
	RETURN lcResult
ENDIF

*--ïðîâåðèì, ñôîðìèðîâàíà ëè äàííàÿ íàêëàäíàÿ àâòîìàòè÷åñêè (åñòü ëè ðîäèòåëüñêèé äîêóìåíò)
IF EMPTY(lnFrmParID) OR ISNULL(lnFrmParID)
	RETURN lcResult
ENDIF

*--ïðîâåðèì, ÿâëÿåòñÿ ëè ðîäèòåëüñêèé äîêóìåíò çàêàçîì
USE IN SELECT([lvFrmTypeInfoByFrm])
_PARAM = lnFrmParID
USE lvFrmTypeInfoByFrm IN 0

IF RECCOUNT([lvFrmTypeInfoByFrm])=0
	MESSAGEBOX([Íå íàéäåí ðîäèòåëüñêèé äîêóìåíò äëÿ äàííîé íàêëàäíîé.],48,[Îêíî ñîîáùåíèé])
ELSE
	IF lvFrmTypeInfoByFrm.FrmTypeID &lt;&gt; __TYPE_ORDER
		RETURN lcResult
	ENDIF
ENDIF

*--Äëÿ íàêëàäíûõ, ñôîðìèðîâàííûõ àâòîìàòè÷åñêè (ïî çàêàçó), èñêëþ÷èì óäàëåíèå è ðåäàêòèðîâàíèå èç ñïèñêà âîçìîæíûõ îïåðàöèé
lcResult = STRTRAN([;] + lcResult + [;],[;DELE;],[;])

*--Óäàëÿåì ñëåâà è ñïðàâà ; äîáàâëåííûå ðàíåå
IF !(lcResult == [;])
	lcResult = SUBSTR(lcResult,2,LEN(lcResult)-2)
ELSE
	lcResult = []
ENDIF	

lcResult = STRTRAN([;] + lcResult + [;],[;EDIT;],[;])

IF !(lcResult == [;])
	lcResult = SUBSTR(lcResult,2,LEN(lcResult)-2)
ELSE
	lcResult = []
ENDIF	

*--Âîçâðàùàåì ðåçóëüòàò
RETURN lcResult




ENDPROC
PROCEDURE GrdDocsView._refreshrelatedobjects
ThisForm.GrdPart._RSRequery(PrimaryDocView.FrmID)
ENDPROC
PROCEDURE Load
*-------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: FRMPRIMARYDOCVIEWTVR.LOAD
* Called by.......: &lt;Sys Event&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Îòêðûòèå LV äëÿ Grid-à ñ ñîäåðæàíèåì äîêóìåíòà (òîâàðíûì)
*-------------------------------------------------------

*14.07.2004 00:13 -&gt;Âûïîëíèì ìåòîä ðîäèòåëüñêîãî êëàññà
DODEFAULT()
*------------------------------------------------------------------------------

*******************************************************************************
*1. Çàãðóçèì ïóñòîé Alias äëÿ ïðîñìîòðà íîã äîêóìåíòîâ                        *
*******************************************************************************

*02.12.2004 16:59 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	lcUniqueName
*------------------------------------------------------------------------------

*21.04.2004 14:05 -&gt;Âûïîëíèì õðàíèìóþ ïðîöåäóðó äëÿ ïîëó÷åíèÿ ïóñòîé òàáëèöû
lcUniqueName = spFrmPartTvrView([NODATA])
*------------------------------------------------------------------------------

*21.04.2004 14:08 -&gt;Òåïåðü îòêðîåì äàííûé Alias
USE (lcUniqueName) IN 0 ALIAS FrmPartTvrView
CURSORSETPROP([BUFFERING],3,[FrmPartTvrView])
*------------------------------------------------------------------------------

************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************
ENDPROC
PROCEDURE Unload
*-------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: frmPrimaryDocViewTvr.UnLoad
* Called by.......: &lt;Sys Event&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: &lt;sysevent&gt; Âûãðóçêà ôîðìû
*-------------------------------------------------------

*21.07.2004 16:27 -&gt; Âûïîëíèì ìåòîä ðîäèòåëüñêîãî êëàññà
DODEFAULT()
*----------------------------------------------------------------------------

*****************************************************************************
* Çàêðîåì Alias äëÿ ïðîñìîòðà òîâàðíûõ ïîçèöèé äîêóìåíòîâ è óäàëèì âðåìåííóþ*
* òàáëèöó                                                                   *
*****************************************************************************

*21.07.2004 16:27 -&gt; Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	lcUniqueFilePath
*------------------------------------------------------------------------------

*21.07.2004 16:27 -&gt; Çàêðîåì Alias è óäàëèì âðåìåííóþ òàáëèöó
lcUniqueFilePath = DBF([FrmPartTvrView])
***
USE IN FrmPartTvrView
***
IF FILE(lcUniqueFilePath)
	ERASE (lcUniqueFilePath)
ENDIF
*------------------------------------------------------------------------------

************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1>Class</reserved1>
		<reserved2>7</reserved2>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6>Pixels</reserved6>
		<reserved7/>
		<reserved8>..\include\doctype.h</reserved8>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1A71EVO2R</uniqueid>
		<timestamp>949393015</timestamp>
		<class>grdparttvr</class>
		<classloc>primarydoc_v1.vcx</classloc>
		<baseclass>grid</baseclass>
		<objname>grdPart</objname>
		<parent>frmprimarydocviewtvr</parent>
		<properties>Height = 200
Left = 5
Panel = 1
Top = 239
Width = 690
Name = "grdPart"
Column1.Header1.Name = "Header1"
Column1.Text1.Name = "Text1"
Column1.Width = 120
Column1.Name = "Column1"
Column2.Header1.Name = "Header1"
Column2.Text1.Name = "Text1"
Column2.Width = 50
Column2.Name = "Column2"
Column3.Header1.Name = "Header1"
Column3.Text1.Name = "Text1"
Column3.Width = 50
Column3.Name = "Column3"
Column4.Header1.Name = "Header1"
Column4.Text1.Name = "Text1"
Column4.Name = "Column4"
Column5.Header1.Name = "Header1"
Column5.Text1.Name = "Text1"
Column5.Name = "Column5"
Column6.Header1.Name = "Header1"
Column6.Text1.Name = "Text1"
Column6.Name = "Column6"
Column7.Header1.Name = "Header1"
Column7.Text1.Name = "Text1"
Column7.Name = "Column7"
COLUMN8.Header1.Name = "Header1"
COLUMN8.Text1.Name = "Text1"
COLUMN8.Name = "COLUMN8"
COLUMN9.Header1.Name = "Header1"
COLUMN9.Text1.Name = "Text1"
COLUMN9.Name = "COLUMN9"
</properties>
		<protected/>
		<methods>PROCEDURE _gethandledstandartmsglist
*------------------------------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: grdDocsView._GETHANDLEDSTANDARTMSGLIST
* Called by.......: &lt;.RefreshHandledStandartMsgList();.RightClick()&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;lcResult&gt;
* Notes...........: Äëÿ íàêëàäíûõ, ñôîðìèðîâàííûõ àâòîìàòè÷åñêè (ïî çàêàçó), îñòàâèì òîëüêî ïðîñìîòð
*------------------------------------------------------------------------------
LOCAL lnFrmTypeID, ;
	  lnFrmParID, ;
	  _PARAM, ;
	  lcResult

*--âûïîëíèì ìåòîä ðîäèòåëüñêîãî êëàññà
lcResult = DODEFAULT()

lnFrmTypeID = PrimaryDocView.FrmTypeID
lnFrmParID = PrimaryDocView.FrmParID

*--ïðîâåðèì, ÿâëÿåòñÿ ëè äàííûé äîêóìåíò íàêëàäíîé
IF !INLIST(lnFrmTypeID,__TYPE_NAKL_R,__TYPE_NAKL_P,__TYPE_NAKL_I)
	RETURN lcResult
ENDIF

*--ïðîâåðèì, ñôîðìèðîâàíà ëè äàííàÿ íàêëàäíàÿ àâòîìàòè÷åñêè (åñòü ëè ðîäèòåëüñêèé äîêóìåíò)
IF EMPTY(lnFrmParID) OR ISNULL(lnFrmParID)
	RETURN lcResult
ENDIF

*--ïðîâåðèì, ÿâëÿåòñÿ ëè ðîäèòåëüñêèé äîêóìåíò çàêàçîì
USE IN SELECT([lvFrmTypeInfoByFrm])
_PARAM = lnFrmParID
USE lvFrmTypeInfoByFrm IN 0

IF RECCOUNT([lvFrmTypeInfoByFrm])=0
	MESSAGEBOX([Íå íàéäåí ðîäèòåëüñêèé äîêóìåíò äëÿ äàííîé íàêëàäíîé.],48,[Îêíî ñîîáùåíèé])
ELSE
	IF lvFrmTypeInfoByFrm.FrmTypeID &lt;&gt; __TYPE_ORDER
		RETURN lcResult
	ENDIF
ENDIF

*--Äëÿ íàêëàäíûõ, ñôîðìèðîâàííûõ àâòîìàòè÷åñêè (ïî çàêàçó), èñêëþ÷èì óäàëåíèå è ðåäàêòèðîâàíèå èç ñïèñêà âîçìîæíûõ îïåðàöèé
lcResult = STRTRAN([;] + lcResult + [;],[;DELE;],[;])

*--Óäàëÿåì ñëåâà è ñïðàâà ; äîáàâëåííûå ðàíåå
IF !(lcResult == [;])
	lcResult = SUBSTR(lcResult,2,LEN(lcResult)-2)
ELSE
	lcResult = []
ENDIF	

lcResult = STRTRAN([;] + lcResult + [;],[;EDIT;],[;])

IF !(lcResult == [;])
	lcResult = SUBSTR(lcResult,2,LEN(lcResult)-2)
ELSE
	lcResult = []
ENDIF	

*--Âîçâðàùàåì ðåçóëüòàò
RETURN lcResult




ENDPROC
PROCEDURE _rsrequeryone
LPARAMETERS tnFrmPartTvrID
DODEFAULT(tnFrmPartTvrID)
ThisForm.GrdDocsView._RSRequeryOne(This.nFrmID,.T.)
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_R020K4VL1</uniqueid>
		<timestamp>0</timestamp>
		<class>txtgrd</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>Text1</objname>
		<parent>frmprimarydocviewtvr.GrdDocsView.Column1</parent>
		<properties>BorderStyle = 0
Margin = 0
ForeColor = 0,0,0
BackColor = 255,255,255
Name = "Text1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>0</timestamp>
		<class>header</class>
		<classloc/>
		<baseclass>header</baseclass>
		<objname>Header1</objname>
		<parent>frmprimarydocviewtvr.GrdDocsView.Column11</parent>
		<properties>Alignment = 2
Caption = "ÍÄÑ"
Name = "Header1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_R020K4VL1</uniqueid>
		<timestamp>0</timestamp>
		<class>txtgrd</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>Text1</objname>
		<parent>frmprimarydocviewtvr.GrdDocsView.Column11</parent>
		<properties>BorderStyle = 0
Margin = 0
ForeColor = 0,0,0
BackColor = 255,255,255
Name = "Text1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1CW12Q298</uniqueid>
		<timestamp>0</timestamp>
		<class>header</class>
		<classloc/>
		<baseclass>header</baseclass>
		<objname>Header1</objname>
		<parent>frmprimarydocviewtvr.GrdDocsView.Column12</parent>
		<properties>Caption = "Ïðèìå÷àíèå"
Name = "Header1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1CW12Q299</uniqueid>
		<timestamp>0</timestamp>
		<class>txtgrd</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>Text1</objname>
		<parent>frmprimarydocviewtvr.GrdDocsView.Column12</parent>
		<properties>BorderStyle = 0
Margin = 0
ForeColor = 0,0,0
BackColor = 255,255,255
Name = "Text1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>COMMENT</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>0</timestamp>
		<class/>
		<classloc/>
		<baseclass/>
		<objname>frmprimarydocviewtvr</objname>
		<parent/>
		<properties>Arial, 0, 9, 5, 15, 12, 32, 3, 0
Arial, 1, 8, 5, 14, 11, 29, 3, 0
Arial, 0, 8, 5, 14, 11, 29, 3, 0
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1></reserved1>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1UJ0YJHRP</uniqueid>
		<timestamp>949393017</timestamp>
		<class>frmprimarydocviewtvr</class>
		<classloc>primarydoc_v1.vcx</classloc>
		<baseclass>form</baseclass>
		<objname>frmprimarydocviewtvrnds</objname>
		<parent/>
		<properties>DoCreate = .T.
Name = "frmprimarydocviewtvrnds"
cstmsghandler.Name = "cstmsghandler"
cstresizable.Name = "cstresizable"
Img1.Name = "Img1"
CmdFlt.Name = "CmdFlt"
GrdDocsView.COLUMN1.Header1.Name = "Header1"
GrdDocsView.COLUMN1.Text1.Name = "Text1"
GrdDocsView.COLUMN1.Text1.Name = "Text1"
GrdDocsView.COLUMN1.Name = "COLUMN1"
GrdDocsView.COLUMN2.Header1.Name = "Header1"
GrdDocsView.COLUMN2.Name = "COLUMN2"
GrdDocsView.COLUMN3.Header1.Name = "Header1"
GrdDocsView.COLUMN3.Text1.Name = "Text1"
GrdDocsView.COLUMN3.Name = "COLUMN3"
GrdDocsView.COLUMN4.Header1.Name = "Header1"
GrdDocsView.COLUMN4.Text1.Name = "Text1"
GrdDocsView.COLUMN4.Name = "COLUMN4"
GrdDocsView.COLUMN5.Header1.Name = "Header1"
GrdDocsView.COLUMN5.Text1.Name = "Text1"
GrdDocsView.COLUMN5.Name = "COLUMN5"
GrdDocsView.COLUMN6.Header1.Name = "Header1"
GrdDocsView.COLUMN6.Text1.Name = "Text1"
GrdDocsView.COLUMN6.Name = "COLUMN6"
GrdDocsView.COLUMN7.Header1.Name = "Header1"
GrdDocsView.COLUMN7.Text1.Name = "Text1"
GrdDocsView.COLUMN7.Name = "COLUMN7"
GrdDocsView.COLUMN8.Header1.Name = "Header1"
GrdDocsView.COLUMN8.Text1.Name = "Text1"
GrdDocsView.COLUMN8.Name = "COLUMN8"
GrdDocsView.COLUMN9.Header1.Caption = "ÍÄÑ 18"
GrdDocsView.COLUMN9.Header1.Name = "Header1"
GrdDocsView.COLUMN9.Text1.Name = "Text1"
GrdDocsView.COLUMN9.ColumnOrder = 9
GrdDocsView.COLUMN9.ControlSource = "PrimaryDocView.FrmVatB18"
GrdDocsView.COLUMN9.Name = "COLUMN9"
GrdDocsView.COLUMN10.Header1.Name = "Header1"
GrdDocsView.COLUMN10.Text1.Name = "Text1"
GrdDocsView.COLUMN10.ColumnOrder = 11
GrdDocsView.COLUMN10.Name = "COLUMN10"
GrdDocsView.COLUMN11.Header1.Caption = "ÍÄÑ 10"
GrdDocsView.COLUMN11.Header1.Name = "Header1"
GrdDocsView.COLUMN11.Text1.Name = "Text1"
GrdDocsView.COLUMN11.ColumnOrder = 10
GrdDocsView.COLUMN11.ControlSource = "PrimaryDocView.FrmVatB10"
GrdDocsView.COLUMN11.Name = "COLUMN11"
GrdDocsView.COLUMN12.Header1.Name = "Header1"
GrdDocsView.COLUMN12.Text1.Name = "Text1"
GrdDocsView.COLUMN12.Name = "COLUMN12"
GrdDocsView.Name = "GrdDocsView"
math.Name = "math"
Cntfrmstatusinfo1.ShpFrmStatusInfo.Name = "ShpFrmStatusInfo"
Cntfrmstatusinfo1.lblStatusID.Name = "lblStatusID"
Cntfrmstatusinfo1.shpStatusID1.Name = "shpStatusID1"
Cntfrmstatusinfo1.lblStatusID1.Name = "lblStatusID1"
Cntfrmstatusinfo1.shpStatusID2.Name = "shpStatusID2"
Cntfrmstatusinfo1.lblStatusID2.Name = "lblStatusID2"
Cntfrmstatusinfo1.shpStatusID3.Name = "shpStatusID3"
Cntfrmstatusinfo1.lblStatusID3.Name = "lblStatusID3"
Cntfrmstatusinfo1.shpStatusID4.Name = "shpStatusID4"
Cntfrmstatusinfo1.lblStatusID4.Name = "lblStatusID4"
Cntfrmstatusinfo1.Name = "Cntfrmstatusinfo1"
cntSum.Shp2.Name = "Shp2"
cntSum.lblDocumentCountCaption.Name = "lblDocumentCountCaption"
cntSum.txtDocumentCount.Name = "txtDocumentCount"
cntSum.txtDocumentSum.Name = "txtDocumentSum"
cntSum.txtDocumentVatSum.Name = "txtDocumentVatSum"
cntSum.txtDocumentCountMark.Name = "txtDocumentCountMark"
cntSum.txtDocumentVatSumMark.Name = "txtDocumentVatSumMark"
cntSum.Lbl1.Name = "Lbl1"
cntSum.txtDocumentSumMark.Name = "txtDocumentSumMark"
cntSum.Name = "cntSum"
grdPart.COLUMN1.Header1.Name = "Header1"
grdPart.COLUMN1.Text1.Name = "Text1"
grdPart.COLUMN1.Name = "COLUMN1"
grdPart.COLUMN2.Header1.Name = "Header1"
grdPart.COLUMN2.Text1.Name = "Text1"
grdPart.COLUMN2.Name = "COLUMN2"
grdPart.COLUMN3.Header1.Name = "Header1"
grdPart.COLUMN3.Text1.Name = "Text1"
grdPart.COLUMN3.Name = "COLUMN3"
grdPart.COLUMN4.Header1.Name = "Header1"
grdPart.COLUMN4.Text1.Name = "Text1"
grdPart.COLUMN4.Name = "COLUMN4"
grdPart.COLUMN5.Header1.Name = "Header1"
grdPart.COLUMN5.Text1.Name = "Text1"
grdPart.COLUMN5.Name = "COLUMN5"
grdPart.COLUMN6.Header1.Name = "Header1"
grdPart.COLUMN6.Text1.Name = "Text1"
grdPart.COLUMN6.Name = "COLUMN6"
grdPart.COLUMN7.Header1.Name = "Header1"
grdPart.COLUMN7.Text1.Name = "Text1"
grdPart.COLUMN7.Name = "COLUMN7"
grdPart.COLUMN8.Header1.Name = "Header1"
grdPart.COLUMN8.Text1.Name = "Text1"
grdPart.COLUMN8.Name = "COLUMN8"
grdPart.COLUMN9.Header1.Name = "Header1"
grdPart.COLUMN9.Text1.Name = "Text1"
grdPart.COLUMN9.Name = "COLUMN9"
grdPart.Name = "grdPart"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1>Class</reserved1>
		<reserved2>2</reserved2>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6>Pixels</reserved6>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1UJ0YJHS1</uniqueid>
		<timestamp>0</timestamp>
		<class>txtgrd</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>Text1</objname>
		<parent>frmprimarydocviewtvrnds.GrdDocsView.COLUMN2</parent>
		<properties>BorderStyle = 0
Margin = 0
ForeColor = 0,0,0
BackColor = 255,255,255
Name = "Text1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>COMMENT</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>0</timestamp>
		<class/>
		<classloc/>
		<baseclass/>
		<objname>frmprimarydocviewtvrnds</objname>
		<parent/>
		<properties>Arial, 0, 9, 5, 15, 12, 32, 3, 0
Arial, 1, 8, 5, 14, 11, 29, 3, 0
Arial, 0, 8, 5, 14, 11, 29, 3, 0
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1A610IJYB</uniqueid>
		<timestamp>949393027</timestamp>
		<class>frmprimarydocview</class>
		<classloc>primarydoc_v1.vcx</classloc>
		<baseclass>form</baseclass>
		<objname>frmprimarydocviewtvroneprice</objname>
		<parent/>
		<properties>Top = 0
Left = 0
Height = 469
Width = 698
DoCreate = .T.
Name = "frmprimarydocviewtvroneprice"
cstmsghandler.Name = "cstmsghandler"
cstresizable.Name = "cstresizable"
Img1.Name = "Img1"
CmdFlt.Name = "CmdFlt"
GrdDocsView.Column1.Header1.Name = "Header1"
GrdDocsView.Column1.Text1.Name = "Text1"
GrdDocsView.Column1.Name = "Column1"
GrdDocsView.Column2.Header1.Name = "Header1"
GrdDocsView.Column2.Name = "Column2"
GrdDocsView.Column3.Header1.Name = "Header1"
GrdDocsView.Column3.Text1.Name = "Text1"
GrdDocsView.Column3.Name = "Column3"
GrdDocsView.Column4.Header1.Name = "Header1"
GrdDocsView.Column4.Text1.Name = "Text1"
GrdDocsView.Column4.Name = "Column4"
GrdDocsView.Column5.Header1.Name = "Header1"
GrdDocsView.Column5.Text1.Name = "Text1"
GrdDocsView.Column5.Name = "Column5"
GrdDocsView.Column6.Header1.Name = "Header1"
GrdDocsView.Column6.Text1.Name = "Text1"
GrdDocsView.Column6.Name = "Column6"
GrdDocsView.Column7.Header1.Name = "Header1"
GrdDocsView.Column7.Text1.Name = "Text1"
GrdDocsView.Column7.Name = "Column7"
GrdDocsView.Column8.Header1.Name = "Header1"
GrdDocsView.Column8.Text1.Name = "Text1"
GrdDocsView.Column8.Name = "Column8"
GrdDocsView.Column9.Header1.Name = "Header1"
GrdDocsView.Column9.Text1.Name = "Text1"
GrdDocsView.Column9.Name = "Column9"
GrdDocsView.Column10.Header1.Name = "Header1"
GrdDocsView.Column10.Text1.Name = "Text1"
GrdDocsView.Column10.Name = "Column10"
GrdDocsView.Left = 5
GrdDocsView.Width = 690
GrdDocsView._handledcustommsglist = PAYDOCMAKE
GrdDocsView._handledcustommsgpromptlist = Ñôîðìèðîâàòü ïëàòåæ
GrdDocsView.Name = "GrdDocsView"
math.Name = "math"
Cntfrmstatusinfo1.ShpFrmStatusInfo.Name = "ShpFrmStatusInfo"
Cntfrmstatusinfo1.lblStatusID.Name = "lblStatusID"
Cntfrmstatusinfo1.shpStatusID1.Name = "shpStatusID1"
Cntfrmstatusinfo1.lblStatusID1.Name = "lblStatusID1"
Cntfrmstatusinfo1.shpStatusID2.Name = "shpStatusID2"
Cntfrmstatusinfo1.lblStatusID2.Name = "lblStatusID2"
Cntfrmstatusinfo1.shpStatusID3.Name = "shpStatusID3"
Cntfrmstatusinfo1.lblStatusID3.Name = "lblStatusID3"
Cntfrmstatusinfo1.shpStatusID4.Name = "shpStatusID4"
Cntfrmstatusinfo1.lblStatusID4.Name = "lblStatusID4"
Cntfrmstatusinfo1.Name = "Cntfrmstatusinfo1"
cntSum.Shp2.Name = "Shp2"
cntSum.lblDocumentCountCaption.Name = "lblDocumentCountCaption"
cntSum.txtDocumentCount.Name = "txtDocumentCount"
cntSum.txtDocumentSum.Name = "txtDocumentSum"
cntSum.txtDocumentVatSum.Name = "txtDocumentVatSum"
cntSum.txtDocumentCountMark.Name = "txtDocumentCountMark"
cntSum.txtDocumentVatSumMark.Name = "txtDocumentVatSumMark"
cntSum.LBL1.Name = "LBL1"
cntSum.txtDocumentSumMark.Name = "txtDocumentSumMark"
cntSum.Name = "cntSum"
</properties>
		<protected/>
		<methods>PROCEDURE GrdDocsView._refreshrelatedobjects
ThisForm.GrdPart._RSRequery(PrimaryDocView.FrmID)
ENDPROC
PROCEDURE Load
*-------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: FRMPRIMARYDOCVIEWTVR.LOAD
* Called by.......: &lt;Sys Event&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Îòêðûòèå LV äëÿ Grid-à ñ ñîäåðæàíèåì äîêóìåíòà (òîâàðíûì)
*-------------------------------------------------------

*14.07.2004 00:13 -&gt;Âûïîëíèì ìåòîä ðîäèòåëüñêîãî êëàññà
DODEFAULT()
*------------------------------------------------------------------------------

*******************************************************************************
*1. Çàãðóçèì ïóñòîé Alias äëÿ ïðîñìîòðà íîã äîêóìåíòîâ                        *
*******************************************************************************

*02.12.2004 16:59 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	lcUniqueName
*------------------------------------------------------------------------------

*21.04.2004 14:05 -&gt;Âûïîëíèì õðàíèìóþ ïðîöåäóðó äëÿ ïîëó÷åíèÿ ïóñòîé òàáëèöû
lcUniqueName = spFrmPartTvrView([NODATA])
*------------------------------------------------------------------------------

*21.04.2004 14:08 -&gt;Òåïåðü îòêðîåì äàííûé Alias
USE (lcUniqueName) IN 0 ALIAS FrmPartTvrView
CURSORSETPROP([BUFFERING],3,[FrmPartTvrView])
*------------------------------------------------------------------------------

************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************
ENDPROC
PROCEDURE Unload
*-------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: frmPrimaryDocViewTvr.UnLoad
* Called by.......: &lt;Sys Event&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: &lt;sysevent&gt; Âûãðóçêà ôîðìû
*-------------------------------------------------------

*21.07.2004 16:27 -&gt; Âûïîëíèì ìåòîä ðîäèòåëüñêîãî êëàññà
DODEFAULT()
*----------------------------------------------------------------------------

*****************************************************************************
* Çàêðîåì Alias äëÿ ïðîñìîòðà òîâàðíûõ ïîçèöèé äîêóìåíòîâ è óäàëèì âðåìåííóþ*
* òàáëèöó                                                                   *
*****************************************************************************

*21.07.2004 16:27 -&gt; Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	lcUniqueFilePath
*------------------------------------------------------------------------------

*21.07.2004 16:27 -&gt; Çàêðîåì Alias è óäàëèì âðåìåííóþ òàáëèöó
lcUniqueFilePath = DBF([FrmPartTvrView])
***
USE IN FrmPartTvrView
***
IF FILE(lcUniqueFilePath)
	ERASE (lcUniqueFilePath)
ENDIF
*------------------------------------------------------------------------------

************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1>Class</reserved1>
		<reserved2>3</reserved2>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6>Pixels</reserved6>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1A71EVO2R</uniqueid>
		<timestamp>949393027</timestamp>
		<class>grdparttvr</class>
		<classloc>primarydoc_v1.vcx</classloc>
		<baseclass>grid</baseclass>
		<objname>grdPart</objname>
		<parent>frmprimarydocviewtvroneprice</parent>
		<properties>Height = 203
Left = 5
Panel = 1
Top = 236
Width = 690
Name = "grdPart"
Column1.Header1.Name = "Header1"
Column1.Text1.Name = "Text1"
Column1.Width = 120
Column1.Name = "Column1"
Column2.Header1.Name = "Header1"
Column2.Text1.Name = "Text1"
Column2.Width = 50
Column2.Name = "Column2"
Column3.Header1.Name = "Header1"
Column3.Text1.Name = "Text1"
Column3.Width = 50
Column3.Name = "Column3"
Column4.Header1.Name = "Header1"
Column4.Text1.Name = "Text1"
Column4.Name = "Column4"
Column5.Header1.Name = "Header1"
Column5.Text1.Name = "Text1"
Column5.Name = "Column5"
Column6.Header1.Name = "Header1"
Column6.Text1.Name = "Text1"
Column6.Name = "Column6"
Column7.Header1.Name = "Header1"
Column7.Text1.Name = "Text1"
Column7.Name = "Column7"
COLUMN8.Header1.Name = "Header1"
COLUMN8.Text1.Name = "Text1"
COLUMN8.Name = "COLUMN8"
COLUMN9.Header1.Name = "Header1"
COLUMN9.Text1.Name = "Text1"
COLUMN9.Name = "COLUMN9"
</properties>
		<protected/>
		<methods>PROCEDURE _rsrequeryone
LPARAMETERS tnFrmPartTvrID
DODEFAULT(tnFrmPartTvrID)
ThisForm.GrdDocsView._RSRequeryOne(This.nFrmID,.T.)
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1A610IJYN</uniqueid>
		<timestamp>0</timestamp>
		<class>txtgrd</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>Text1</objname>
		<parent>frmprimarydocviewtvroneprice.GrdDocsView.Column1</parent>
		<properties>BorderStyle = 0
Margin = 0
ForeColor = 0,0,0
BackColor = 255,255,255
Name = "Text1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>COMMENT</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>0</timestamp>
		<class/>
		<classloc/>
		<baseclass/>
		<objname>frmprimarydocviewtvroneprice</objname>
		<parent/>
		<properties>Arial, 0, 9, 5, 15, 12, 32, 3, 0
Arial, 1, 8, 5, 14, 11, 29, 3, 0
Arial, 0, 8, 5, 14, 11, 29, 3, 0
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_25J0NW9Q5</uniqueid>
		<timestamp>949393064</timestamp>
		<class>frmprimarydocview</class>
		<classloc>primarydoc_v1.vcx</classloc>
		<baseclass>form</baseclass>
		<objname>frmresuviewgrid</objname>
		<parent/>
		<properties>DoCreate = .T.
Name = "frmresuviewgrid"
cstmsghandler.Name = "cstmsghandler"
cstresizable.Name = "cstresizable"
Img1.Name = "Img1"
CmdFlt.Name = "CmdFlt"
GrdDocsView.Column1.Header1.Name = "Header1"
GrdDocsView.Column1.Text1.Name = "Text1"
GrdDocsView.Column1.Name = "Column1"
GrdDocsView.Column2.Header1.Name = "Header1"
GrdDocsView.Column2.Name = "Column2"
GrdDocsView.Column3.Header1.Name = "Header1"
GrdDocsView.Column3.Text1.Name = "Text1"
GrdDocsView.Column3.Name = "Column3"
GrdDocsView.Column4.Header1.Name = "Header1"
GrdDocsView.Column4.Text1.Name = "Text1"
GrdDocsView.Column4.Name = "Column4"
GrdDocsView.Column5.Header1.Name = "Header1"
GrdDocsView.Column5.Text1.Name = "Text1"
GrdDocsView.Column5.Name = "Column5"
GrdDocsView.Column6.Header1.Name = "Header1"
GrdDocsView.Column6.Text1.Name = "Text1"
GrdDocsView.Column6.Name = "Column6"
GrdDocsView.Column7.Header1.Name = "Header1"
GrdDocsView.Column7.Text1.Name = "Text1"
GrdDocsView.Column7.Name = "Column7"
GrdDocsView.Column8.Header1.Name = "Header1"
GrdDocsView.Column8.Text1.Name = "Text1"
GrdDocsView.Column8.Name = "Column8"
GrdDocsView.Column9.Header1.Name = "Header1"
GrdDocsView.Column9.Text1.Name = "Text1"
GrdDocsView.Column9.Name = "Column9"
GrdDocsView.Column10.Header1.Name = "Header1"
GrdDocsView.Column10.Text1.Name = "Text1"
GrdDocsView.Column10.Name = "Column10"
GrdDocsView.Left = 5
GrdDocsView.Width = 690
GrdDocsView.Name = "GrdDocsView"
math.Name = "math"
Cntfrmstatusinfo1.ShpFrmStatusInfo.Name = "ShpFrmStatusInfo"
Cntfrmstatusinfo1.lblStatusID.Name = "lblStatusID"
Cntfrmstatusinfo1.shpStatusID1.Name = "shpStatusID1"
Cntfrmstatusinfo1.lblStatusID1.Name = "lblStatusID1"
Cntfrmstatusinfo1.shpStatusID2.Name = "shpStatusID2"
Cntfrmstatusinfo1.lblStatusID2.Name = "lblStatusID2"
Cntfrmstatusinfo1.shpStatusID3.Name = "shpStatusID3"
Cntfrmstatusinfo1.lblStatusID3.Name = "lblStatusID3"
Cntfrmstatusinfo1.shpStatusID4.Name = "shpStatusID4"
Cntfrmstatusinfo1.lblStatusID4.Name = "lblStatusID4"
Cntfrmstatusinfo1.Name = "Cntfrmstatusinfo1"
cntSum.Shp2.Name = "Shp2"
cntSum.lblDocumentCountCaption.Name = "lblDocumentCountCaption"
cntSum.txtDocumentCount.Name = "txtDocumentCount"
cntSum.txtDocumentSum.Name = "txtDocumentSum"
cntSum.txtDocumentVatSum.Name = "txtDocumentVatSum"
cntSum.txtDocumentCountMark.Name = "txtDocumentCountMark"
cntSum.txtDocumentVatSumMark.Name = "txtDocumentVatSumMark"
cntSum.Lbl1.Name = "Lbl1"
cntSum.txtDocumentSumMark.Name = "txtDocumentSumMark"
cntSum.Name = "cntSum"
</properties>
		<protected/>
		<methods>PROCEDURE GrdDocsView._refreshrelatedobjects
ThisForm.GrdPart._RSRequery(PrimaryDocView.FrmID)
ENDPROC
PROCEDURE Load
*-------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: FRMPRIMARYDOCVIEWTVR.LOAD
* Called by.......: &lt;Sys Event&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Îòêðûòèå LV äëÿ Grid-à ñ ñîäåðæàíèåì äîêóìåíòà (òîâàðíûì)
*-------------------------------------------------------

*14.07.2004 00:13 -&gt;Âûïîëíèì ìåòîä ðîäèòåëüñêîãî êëàññà
DODEFAULT()
*------------------------------------------------------------------------------

*******************************************************************************
*1. Çàãðóçèì ïóñòîé Alias äëÿ ïðîñìîòðà íîã äîêóìåíòîâ                        *
*******************************************************************************

*02.12.2004 16:59 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	lcUniqueName
*------------------------------------------------------------------------------

*21.04.2004 14:05 -&gt;Âûïîëíèì õðàíèìóþ ïðîöåäóðó äëÿ ïîëó÷åíèÿ ïóñòîé òàáëèöû
lcUniqueName = spFrmPartTvrJrnView([NODATA])
*------------------------------------------------------------------------------

*21.04.2004 14:08 -&gt;Òåïåðü îòêðîåì äàííûé Alias
USE (lcUniqueName) IN 0 ALIAS FrmPartResView
CURSORSETPROP([BUFFERING],3,[FrmPartResView])
*------------------------------------------------------------------------------

************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************
ENDPROC
PROCEDURE Unload
*-------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: frmPrimaryDocViewTvr.UnLoad
* Called by.......: &lt;Sys Event&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: &lt;sysevent&gt; Âûãðóçêà ôîðìû
*-------------------------------------------------------

*21.07.2004 16:27 -&gt; Âûïîëíèì ìåòîä ðîäèòåëüñêîãî êëàññà
DODEFAULT()
*----------------------------------------------------------------------------

*****************************************************************************
* Çàêðîåì Alias äëÿ ïðîñìîòðà òîâàðíûõ ïîçèöèé äîêóìåíòîâ è óäàëèì âðåìåííóþ*
* òàáëèöó                                                                   *
*****************************************************************************

*21.07.2004 16:27 -&gt; Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	lcUniqueFilePath
*------------------------------------------------------------------------------

*21.07.2004 16:27 -&gt; Çàêðîåì Alias è óäàëèì âðåìåííóþ òàáëèöó
lcUniqueFilePath = DBF([FrmPartResView])
***
USE IN FrmPartResView
***
IF FILE(lcUniqueFilePath)
	ERASE (lcUniqueFilePath)
ENDIF
*------------------------------------------------------------------------------

************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1>Class</reserved1>
		<reserved2>3</reserved2>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6>Pixels</reserved6>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_25J0QLFHN</uniqueid>
		<timestamp>949393064</timestamp>
		<class>grdpartres</class>
		<classloc>primarydoc_v1.vcx</classloc>
		<baseclass>grid</baseclass>
		<objname>Grdpart</objname>
		<parent>frmresuviewgrid</parent>
		<properties>Height = 203
Left = 5
Panel = 0
Top = 235
Width = 690
Partition = 160
Name = "Grdpart"
Column1.Header1.Name = "Header1"
Column1.Text1.Name = "Text1"
Column1.ColumnOrder = 1
Column1.Width = 132
Column1.Name = "Column1"
Column2.Header1.Name = "Header1"
Column2.Text1.Name = "Text1"
Column2.ColumnOrder = 3
Column2.Name = "Column2"
Column3.Header1.Name = "Header1"
Column3.Text1.Name = "Text1"
Column3.ColumnOrder = 4
Column3.Name = "Column3"
Column4.Header1.Name = "Header1"
Column4.Text1.Name = "Text1"
Column4.ColumnOrder = 10
Column4.Name = "Column4"
Column5.Header1.Name = "Header1"
Column5.Text1.Name = "Text1"
Column5.ColumnOrder = 5
Column5.Name = "Column5"
Column6.Header1.Name = "Header1"
Column6.Text1.Name = "Text1"
Column6.ColumnOrder = 9
Column6.Name = "Column6"
Column7.Header1.Name = "Header1"
Column7.Text1.Name = "Text1"
Column7.ColumnOrder = 6
Column7.Name = "Column7"
Column8.Header1.Name = "Header1"
Column8.Text1.Name = "Text1"
Column8.ColumnOrder = 2
Column8.Name = "Column8"
Column9.Header1.Name = "Header1"
Column9.Text1.Name = "Text1"
Column9.ColumnOrder = 7
Column9.Name = "Column9"
Column10.Header1.Name = "Header1"
Column10.Text1.Name = "Text1"
Column10.ColumnOrder = 8
Column10.Name = "Column10"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_25J0NW9QL</uniqueid>
		<timestamp>923425058</timestamp>
		<class>txtgrd</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>Text1</objname>
		<parent>frmresuviewgrid.GrdDocsView.Column2</parent>
		<properties>BorderStyle = 0
Margin = 0
ForeColor = 0,0,0
BackColor = 255,255,255
Name = "Text1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>COMMENT</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>0</timestamp>
		<class/>
		<classloc/>
		<baseclass/>
		<objname>frmresuviewgrid</objname>
		<parent/>
		<properties>Arial, 0, 9, 5, 15, 12, 32, 3, 0
Arial, 1, 8, 5, 14, 11, 29, 3, 0
Arial, 0, 8, 5, 14, 11, 29, 3, 0
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1E20ZVR99</uniqueid>
		<timestamp>949847121</timestamp>
		<class>frmpdedit</class>
		<classloc>primarydoc_v1.vcx</classloc>
		<baseclass>form</baseclass>
		<objname>frmpdbankpaymentedit</objname>
		<parent/>
		<properties>Height = 510
Width = 700
DoCreate = .T.
Name = "frmpdbankpaymentedit"
shpFrmAttribute.ZOrderSet = 0
shpFrmAttribute.Name = "shpFrmAttribute"
cstmsghandler.Name = "cstmsghandler"
cstresizable.Name = "cstresizable"
Img1.Name = "Img1"
shpCommon.ZOrderSet = 4
shpCommon.Name = "shpCommon"
lblFrmType.TabIndex = 1
lblFrmType.ZOrderSet = 5
lblFrmType.Name = "lblFrmType"
cntIdCtlGridFrmType.txtText.Name = "txtText"
cntIdCtlGridFrmType.cmdShow.Name = "cmdShow"
cntIdCtlGridFrmType.cmdClear.Name = "cmdClear"
cntIdCtlGridFrmType.CmdTree.Name = "CmdTree"
cntIdCtlGridFrmType.Olecommprox1.Top = 0
cntIdCtlGridFrmType.Olecommprox1.Left = 36
cntIdCtlGridFrmType.Olecommprox1.Height = 16
cntIdCtlGridFrmType.Olecommprox1.Width = 38
cntIdCtlGridFrmType.Olecommprox1.Name = "Olecommprox1"
cntIdCtlGridFrmType.TabIndex = 2
cntIdCtlGridFrmType.ZOrderSet = 6
cntIdCtlGridFrmType.Name = "cntIdCtlGridFrmType"
lblFrmNum.TabIndex = 3
lblFrmNum.ZOrderSet = 7
lblFrmNum.Name = "lblFrmNum"
txtFrmNum.TabIndex = 4
txtFrmNum.ZOrderSet = 8
txtFrmNum.Name = "txtFrmNum"
chkFrmAutoNum.Alignment = 0
chkFrmAutoNum.TabIndex = 5
chkFrmAutoNum.ZOrderSet = 9
chkFrmAutoNum.Name = "chkFrmAutoNum"
lblFrmDate.TabIndex = 6
lblFrmDate.ZOrderSet = 10
lblFrmDate.Name = "lblFrmDate"
cntTxtCtlCalendarFrmDate.txtText.Name = "txtText"
cntTxtCtlCalendarFrmDate.cmdShow.Name = "cmdShow"
cntTxtCtlCalendarFrmDate.TabIndex = 7
cntTxtCtlCalendarFrmDate.ZOrderSet = 11
cntTxtCtlCalendarFrmDate.Name = "cntTxtCtlCalendarFrmDate"
lblFrmDateAcc.TabIndex = 8
lblFrmDateAcc.ZOrderSet = 12
lblFrmDateAcc.Name = "lblFrmDateAcc"
cntTxtCtlCalendarFrmDateAcc.txtText.Name = "txtText"
cntTxtCtlCalendarFrmDateAcc.cmdShow.Name = "cmdShow"
cntTxtCtlCalendarFrmDateAcc.TabIndex = 9
cntTxtCtlCalendarFrmDateAcc.ZOrderSet = 13
cntTxtCtlCalendarFrmDateAcc.Name = "cntTxtCtlCalendarFrmDateAcc"
lblReason.TabIndex = 10
lblReason.ZOrderSet = 14
lblReason.Name = "lblReason"
edtReason.TabIndex = 11
edtReason.ZOrderSet = 15
edtReason.Name = "edtReason"
lblNote.TabIndex = 12
lblNote.ZOrderSet = 16
lblNote.Name = "lblNote"
edtNote.TabIndex = 13
edtNote.ZOrderSet = 17
edtNote.Name = "edtNote"
lblFrmPrcTypeID.TabIndex = 14
lblFrmPrcTypeID.ZOrderSet = 18
lblFrmPrcTypeID.Name = "lblFrmPrcTypeID"
cntIDCtlGridFrmPrcTypeID.txtText.Name = "txtText"
cntIDCtlGridFrmPrcTypeID.cmdShow.Name = "cmdShow"
cntIDCtlGridFrmPrcTypeID.cmdClear.Name = "cmdClear"
cntIDCtlGridFrmPrcTypeID.CmdTree.Name = "CmdTree"
cntIDCtlGridFrmPrcTypeID.Olecommprox1.Top = 0
cntIDCtlGridFrmPrcTypeID.Olecommprox1.Left = 36
cntIDCtlGridFrmPrcTypeID.Olecommprox1.Height = 16
cntIDCtlGridFrmPrcTypeID.Olecommprox1.Width = 38
cntIDCtlGridFrmPrcTypeID.Olecommprox1.Name = "Olecommprox1"
cntIDCtlGridFrmPrcTypeID.TabIndex = 15
cntIDCtlGridFrmPrcTypeID.ZOrderSet = 19
cntIDCtlGridFrmPrcTypeID.Name = "cntIDCtlGridFrmPrcTypeID"
lblFrmCurTypeID.Left = 362
lblFrmCurTypeID.Top = 155
lblFrmCurTypeID.TabIndex = 16
lblFrmCurTypeID.ZOrderSet = 20
lblFrmCurTypeID.Name = "lblFrmCurTypeID"
cntIDCtlGridFrmCurTypeID.txtText.Name = "txtText"
cntIDCtlGridFrmCurTypeID.cmdShow.Name = "cmdShow"
cntIDCtlGridFrmCurTypeID.cmdClear.Name = "cmdClear"
cntIDCtlGridFrmCurTypeID.CmdTree.Name = "CmdTree"
cntIDCtlGridFrmCurTypeID.Olecommprox1.Top = 0
cntIDCtlGridFrmCurTypeID.Olecommprox1.Left = 36
cntIDCtlGridFrmCurTypeID.Olecommprox1.Height = 16
cntIDCtlGridFrmCurTypeID.Olecommprox1.Width = 38
cntIDCtlGridFrmCurTypeID.Olecommprox1.Name = "Olecommprox1"
cntIDCtlGridFrmCurTypeID.Left = 490
cntIDCtlGridFrmCurTypeID.TabIndex = 17
cntIDCtlGridFrmCurTypeID.ZOrderSet = 21
cntIDCtlGridFrmCurTypeID.Name = "cntIDCtlGridFrmCurTypeID"
lblFrmStatus.TabIndex = 18
lblFrmStatus.ZOrderSet = 22
lblFrmStatus.Name = "lblFrmStatus"
cntIdCtlGridFrmStatus.txtText.Name = "txtText"
cntIdCtlGridFrmStatus.cmdShow.Name = "cmdShow"
cntIdCtlGridFrmStatus.cmdClear.Name = "cmdClear"
cntIdCtlGridFrmStatus.CmdTree.Name = "CmdTree"
cntIdCtlGridFrmStatus.Olecommprox1.Top = 0
cntIdCtlGridFrmStatus.Olecommprox1.Left = 36
cntIdCtlGridFrmStatus.Olecommprox1.Height = 16
cntIdCtlGridFrmStatus.Olecommprox1.Width = 38
cntIdCtlGridFrmStatus.Olecommprox1.Name = "Olecommprox1"
cntIdCtlGridFrmStatus.TabIndex = 19
cntIdCtlGridFrmStatus.ZOrderSet = 23
cntIdCtlGridFrmStatus.Name = "cntIdCtlGridFrmStatus"
lblFrmParID.TabIndex = 20
lblFrmParID.ZOrderSet = 24
lblFrmParID.Name = "lblFrmParID"
cntIDCtlGridFrmParID.txtText.Name = "txtText"
cntIDCtlGridFrmParID.cmdShow.Name = "cmdShow"
cntIDCtlGridFrmParID.cmdClear.Name = "cmdClear"
cntIDCtlGridFrmParID.CmdTree.Name = "CmdTree"
cntIDCtlGridFrmParID.Olecommprox1.Top = 0
cntIDCtlGridFrmParID.Olecommprox1.Left = 36
cntIDCtlGridFrmParID.Olecommprox1.Height = 16
cntIDCtlGridFrmParID.Olecommprox1.Width = 38
cntIDCtlGridFrmParID.Olecommprox1.Name = "Olecommprox1"
cntIDCtlGridFrmParID.TabIndex = 21
cntIDCtlGridFrmParID.ZOrderSet = 25
cntIDCtlGridFrmParID.Name = "cntIDCtlGridFrmParID"
shpControl.ZOrderSet = 26
shpControl.Name = "shpControl"
lblDev.TabIndex = 22
lblDev.ZOrderSet = 27
lblDev.Name = "lblDev"
Lbl1.ZOrderSet = 45
Lbl1.Name = "Lbl1"
CntidctlgridPbook.txtText.Name = "txtText"
CntidctlgridPbook.cmdShow.Name = "cmdShow"
CntidctlgridPbook.cmdClear.Name = "cmdClear"
CntidctlgridPbook.CmdTree.Name = "CmdTree"
CntidctlgridPbook.Olecommprox1.Top = 0
CntidctlgridPbook.Olecommprox1.Left = 36
CntidctlgridPbook.Olecommprox1.Height = 16
CntidctlgridPbook.Olecommprox1.Width = 38
CntidctlgridPbook.Olecommprox1.Name = "Olecommprox1"
CntidctlgridPbook.ZOrderSet = 67
CntidctlgridPbook.Name = "CntidctlgridPbook"
cntIdCtlGridDev.txtText.Name = "txtText"
cntIdCtlGridDev.cmdShow.Name = "cmdShow"
cntIdCtlGridDev.cmdClear.Name = "cmdClear"
cntIdCtlGridDev.CmdTree.Name = "CmdTree"
cntIdCtlGridDev.Olecommprox1.Top = 0
cntIdCtlGridDev.Olecommprox1.Left = 36
cntIdCtlGridDev.Olecommprox1.Height = 16
cntIdCtlGridDev.Olecommprox1.Width = 38
cntIdCtlGridDev.Olecommprox1.Name = "Olecommprox1"
cntIdCtlGridDev.TabIndex = 23
cntIdCtlGridDev.ZOrderSet = 28
cntIdCtlGridDev.Name = "cntIdCtlGridDev"
lblContr.TabIndex = 24
lblContr.ZOrderSet = 29
lblContr.Name = "lblContr"
cntIdCtlGridContr.txtText.Name = "txtText"
cntIdCtlGridContr.cmdShow.Name = "cmdShow"
cntIdCtlGridContr.cmdClear.Name = "cmdClear"
cntIdCtlGridContr.CmdTree.Name = "CmdTree"
cntIdCtlGridContr.Olecommprox1.Top = 0
cntIdCtlGridContr.Olecommprox1.Left = 36
cntIdCtlGridContr.Olecommprox1.Height = 16
cntIdCtlGridContr.Olecommprox1.Width = 38
cntIdCtlGridContr.Olecommprox1.Name = "Olecommprox1"
cntIdCtlGridContr.TabIndex = 25
cntIdCtlGridContr.ZOrderSet = 30
cntIdCtlGridContr.Name = "cntIdCtlGridContr"
shpQualityEmi.Left = 5
shpQualityEmi.ZOrderSet = 31
shpQualityEmi.Name = "shpQualityEmi"
lblPointEmi.TabIndex = 26
lblPointEmi.ZOrderSet = 32
lblPointEmi.Name = "lblPointEmi"
cntIdCtlGridPointEmi.txtText.Name = "txtText"
cntIdCtlGridPointEmi.cmdShow.Name = "cmdShow"
cntIdCtlGridPointEmi.cmdClear.Name = "cmdClear"
cntIdCtlGridPointEmi.CmdTree.Name = "CmdTree"
cntIdCtlGridPointEmi.Olecommprox1.Top = 0
cntIdCtlGridPointEmi.Olecommprox1.Left = 36
cntIdCtlGridPointEmi.Olecommprox1.Height = 16
cntIdCtlGridPointEmi.Olecommprox1.Width = 38
cntIdCtlGridPointEmi.Olecommprox1.Name = "Olecommprox1"
cntIdCtlGridPointEmi.TabIndex = 27
cntIdCtlGridPointEmi.ZOrderSet = 33
cntIdCtlGridPointEmi.Name = "cntIdCtlGridPointEmi"
lblPointEmiAccount.TabIndex = 28
lblPointEmiAccount.ZOrderSet = 34
lblPointEmiAccount.Name = "lblPointEmiAccount"
cntIdCtlGridPointEmiAccount.txtText.Name = "txtText"
cntIdCtlGridPointEmiAccount.cmdShow.Name = "cmdShow"
cntIdCtlGridPointEmiAccount.cmdClear.Name = "cmdClear"
cntIdCtlGridPointEmiAccount.CmdTree.Name = "CmdTree"
cntIdCtlGridPointEmiAccount.Olecommprox1.Top = 0
cntIdCtlGridPointEmiAccount.Olecommprox1.Left = 36
cntIdCtlGridPointEmiAccount.Olecommprox1.Height = 16
cntIdCtlGridPointEmiAccount.Olecommprox1.Width = 38
cntIdCtlGridPointEmiAccount.Olecommprox1.Name = "Olecommprox1"
cntIdCtlGridPointEmiAccount.TabIndex = 29
cntIdCtlGridPointEmiAccount.ZOrderSet = 35
cntIdCtlGridPointEmiAccount.Name = "cntIdCtlGridPointEmiAccount"
lblExecEmi.TabIndex = 30
lblExecEmi.ZOrderSet = 36
lblExecEmi.Name = "lblExecEmi"
cntIdCtlGridExecEmi.txtText.Name = "txtText"
cntIdCtlGridExecEmi.cmdShow.Name = "cmdShow"
cntIdCtlGridExecEmi.cmdClear.Name = "cmdClear"
cntIdCtlGridExecEmi.CmdTree.Name = "CmdTree"
cntIdCtlGridExecEmi.Olecommprox1.Top = 0
cntIdCtlGridExecEmi.Olecommprox1.Left = 36
cntIdCtlGridExecEmi.Olecommprox1.Height = 16
cntIdCtlGridExecEmi.Olecommprox1.Width = 38
cntIdCtlGridExecEmi.Olecommprox1.Name = "Olecommprox1"
cntIdCtlGridExecEmi.Width = 200
cntIdCtlGridExecEmi.TabIndex = 31
cntIdCtlGridExecEmi.ZOrderSet = 37
cntIdCtlGridExecEmi.Name = "cntIdCtlGridExecEmi"
shpQualityIsp.ZOrderSet = 38
shpQualityIsp.Name = "shpQualityIsp"
lblPointIsp.TabIndex = 32
lblPointIsp.ZOrderSet = 39
lblPointIsp.Name = "lblPointIsp"
cntIdCtlGridPointIsp.txtText.Name = "txtText"
cntIdCtlGridPointIsp.cmdShow.Name = "cmdShow"
cntIdCtlGridPointIsp.cmdClear.Name = "cmdClear"
cntIdCtlGridPointIsp.CmdTree.Name = "CmdTree"
cntIdCtlGridPointIsp.Olecommprox1.Top = 0
cntIdCtlGridPointIsp.Olecommprox1.Left = 36
cntIdCtlGridPointIsp.Olecommprox1.Height = 16
cntIdCtlGridPointIsp.Olecommprox1.Width = 38
cntIdCtlGridPointIsp.Olecommprox1.Name = "Olecommprox1"
cntIdCtlGridPointIsp.TabIndex = 33
cntIdCtlGridPointIsp.ZOrderSet = 40
cntIdCtlGridPointIsp.Name = "cntIdCtlGridPointIsp"
lblPointIspAccount.TabIndex = 34
lblPointIspAccount.ZOrderSet = 41
lblPointIspAccount.Name = "lblPointIspAccount"
cntIdCtlGridPointIspAccount.txtText.Name = "txtText"
cntIdCtlGridPointIspAccount.cmdShow.Name = "cmdShow"
cntIdCtlGridPointIspAccount.cmdClear.Name = "cmdClear"
cntIdCtlGridPointIspAccount.CmdTree.Name = "CmdTree"
cntIdCtlGridPointIspAccount.Olecommprox1.Top = 0
cntIdCtlGridPointIspAccount.Olecommprox1.Left = 36
cntIdCtlGridPointIspAccount.Olecommprox1.Height = 16
cntIdCtlGridPointIspAccount.Olecommprox1.Width = 38
cntIdCtlGridPointIspAccount.Olecommprox1.Name = "Olecommprox1"
cntIdCtlGridPointIspAccount.TabIndex = 35
cntIdCtlGridPointIspAccount.ZOrderSet = 42
cntIdCtlGridPointIspAccount.Name = "cntIdCtlGridPointIspAccount"
lblExecIsp.Left = 360
lblExecIsp.TabIndex = 36
lblExecIsp.ZOrderSet = 43
lblExecIsp.Name = "lblExecIsp"
cntIdCtlGridExecIsp.txtText.Name = "txtText"
cntIdCtlGridExecIsp.cmdShow.Name = "cmdShow"
cntIdCtlGridExecIsp.cmdClear.Name = "cmdClear"
cntIdCtlGridExecIsp.CmdTree.Name = "CmdTree"
cntIdCtlGridExecIsp.Olecommprox1.Top = 0
cntIdCtlGridExecIsp.Olecommprox1.Left = 36
cntIdCtlGridExecIsp.Olecommprox1.Height = 16
cntIdCtlGridExecIsp.Olecommprox1.Width = 38
cntIdCtlGridExecIsp.Olecommprox1.Name = "Olecommprox1"
cntIdCtlGridExecIsp.TabIndex = 37
cntIdCtlGridExecIsp.ZOrderSet = 44
cntIdCtlGridExecIsp.Name = "cntIdCtlGridExecIsp"
lblFrmAttribute.TabIndex = 38
lblFrmAttribute.ZOrderSet = 46
lblFrmAttribute.Name = "lblFrmAttribute"
grdBit.Column1.Header1.Name = "Header1"
grdBit.Column1.CHK1.Alignment = 0
grdBit.Column1.CHK1.Name = "CHK1"
grdBit.Column1.Name = "Column1"
grdBit.Column2.Header1.Name = "Header1"
grdBit.Column2.Txtgrd1.Name = "Txtgrd1"
grdBit.Column2.Name = "Column2"
grdBit.TabIndex = 39
grdBit.ZOrderSet = 47
grdBit.Name = "grdBit"
cntcancelsavehandled.cmdCancel.Name = "cmdCancel"
cntcancelsavehandled.cmdOk.Name = "cmdOk"
cntcancelsavehandled.Top = 480
cntcancelsavehandled.Left = 490
cntcancelsavehandled.TabIndex = 58
cntcancelsavehandled.ZOrderSet = 68
cntcancelsavehandled.Name = "cntcancelsavehandled"
cstdatawork.Name = "cstdatawork"
Cmd1.Name = "Cmd1"
Cmd2.Name = "Cmd2"
</properties>
		<protected/>
		<methods>PROCEDURE _handlecntcancelsaveeventchild
*-------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: FRMPDBANKPAYMENTEDIT._HANDLECNTCANCELSAVEEVENTCHILD
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;tlCancelSave, tuLastIncrementedID&gt;
* Returns.........: &lt;.T./.F. - ðåçóëüòàò ñîõðàíåíèÿ&gt;
* Notes...........: &lt;public/user/nodefault&gt; Ñîõðàíåíèå äîïîëíèòåëüíûõ äàííûõ íà äî÷åðíèõ ôîðìàõ
*-------------------------------------------------------
LPARAMETERS	tlCancelSave, tuLastIncrementedID

*30.11.2004 12:46 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	llResSave
*------------------------------------------------------------------------------

WITH This

*30.11.2004 12:42 -&gt;Ñîõðàíèì/îòìåíèì èçìåíåíèÿ â Alias-å ñ äîïîëíèòåëüíîé èíôîðìàöèåé î ïëàòåæíûõ äîêóìåíòàõ
IF tlCancelSave
	
	*30.11.2004 12:44 -&gt;Åñëè îïåðàöèÿ äîáàâëåíèå - óêàæåì èäåíòèôèêàòîð äîêóìåíòà
	IF .cMode == [ADD]
		REPLACE FrmID WITH tuLastIncrementedID IN lvFrmPayDetailEdit
	ENDIF
	*------------------------------------------------------------------------------
	
	*30.11.2004 12:45 -&gt;Ñîõðàíèì èçìåíåíèÿ
	llResSave = .cstDataWork.Save([lvFrmPayDetailEdit])
	*------------------------------------------------------------------------------
	
ELSE
	
	*30.11.2004 12:45 -&gt;Îòìåíèì èçìåíåíèÿ
	.cstDataWork.Restore([lvFrmPayDetailEdit])
	*------------------------------------------------------------------------------
	
ENDIF
*------------------------------------------------------------------------------

*30.11.2004 12:46 -&gt;Âåðíåì ðåçóëüòàò ñîõðàíåíèÿ
RETURN llResSave
*------------------------------------------------------------------------------

ENDWITH
************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************
ENDPROC
PROCEDURE Init
*-------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: FRMPDBANKPAYMENTEDIT.INIT
* Called by.......: &lt;Sys Event&gt;
* Parameters......: &lt;tcCommand, tuParam1&gt;
* Returns.........: &lt;none&gt;
* Notes...........: &lt;~&gt;
*-------------------------------------------------------
LPARAMETERS tcCommand, tuParam1

*29.11.2004 18:15 -&gt;Âûïîëíèì ìåòîä ðîäèòåëüñêîãî êëàññà
DODEFAULT(tcCommand, tuParam1)
*------------------------------------------------------------------------------

WITH This

*12.05.2004 00:33 -&gt;Çàãðóçèì äàííûå â Alias äëÿ ðåäàêòèðîâàíèÿ
DO CASE

	CASE .cMode==[ADD]
		
		*12.05.2004 00:32 -&gt;Äîáàâèì ïóñòóþ çàïèñü
		APPEND BLANK IN lvFrmPayDetailEdit
		*------------------------------------------------------------------------------
		
	CASE INLIST(.cMode,[EDIT],[INFO],[DELE])

		*12.05.2004 00:31 -&gt;Çàãðóçèì äàííûå ñóùåñòâóþùåãî äîêóìåíòà
		_PARAM = tuParam1
		***
		REQUERY([lvFrmPayDetailEdit])
		*------------------------------------------------------------------------------
		
ENDCASE
*------------------------------------------------------------------------------

ENDWITH
************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************
ENDPROC
PROCEDURE Load
*29.11.2004 18:12 -&gt;Âûïîëíèì ìåòîä ðîäèòåëüñêîãî êëàññà
DODEFAULT()
*------------------------------------------------------------------------------

*29.11.2004 18:12 -&gt;Îòêðîåì LV äëÿ ðåäàêòèðîâàíèÿ äîïîëíèòåëüíûõ ïàðàìåòðîâ ïëàòåæíûõ äîêóìåíòîâ
USE lvFrmPayDetailEdit IN 0 NODATA
*------------------------------------------------------------------------------



ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1>Class</reserved1>
		<reserved2>20</reserved2>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6>Pixels</reserved6>
		<reserved7>Ðåäàêòèðîâàíèå áàíêîâñêîãî äîêóìåíòà</reserved7>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1E20ZZXS3</uniqueid>
		<timestamp>949847121</timestamp>
		<class>shp</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>shape</baseclass>
		<objname>shpFrmPayDetailNum</objname>
		<parent>frmpdbankpaymentedit</parent>
		<properties>Top = 413
Left = 5
Height = 62
Width = 690
SpecialEffect = 0
ZOrderSet = 48
Name = "shpFrmPayDetailNum"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_R020K4VL1</uniqueid>
		<timestamp>949847121</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblFrmPayDetailOrder</objname>
		<parent>frmpdbankpaymentedit</parent>
		<properties>FontBold = .T.
Caption = "Î÷åðåäíîñòü ïëàò.:"
Left = 10
Top = 422
TabIndex = 40
ZOrderSet = 49
Name = "lblFrmPayDetailOrder"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_R020K4VL1</uniqueid>
		<timestamp>920555890</timestamp>
		<class>cmb</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>combobox</baseclass>
		<objname>cmdFrmPayDetailOrder</objname>
		<parent>frmpdbankpaymentedit</parent>
		<properties>ColumnCount = 1
ColumnWidths = "55"
RowSourceType = 1
RowSource = "  ,01,02,03,04,05,06"
ControlSource = "lvFrmPayDetailEdit.FrmPayDetailOrder"
FirstElement = 1
Left = 127
NumberOfElements = 0
Style = 2
TabIndex = 41
Top = 418
Width = 43
ZOrderSet = 50
Name = "cmdFrmPayDetailOrder"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_R020K4VL1</uniqueid>
		<timestamp>949847121</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblFrmPayDetailPayerStatus</objname>
		<parent>frmpdbankpaymentedit</parent>
		<properties>FontBold = .T.
Caption = "Ñòàòóñ:"
Left = 174
Top = 421
TabIndex = 42
ZOrderSet = 51
Name = "lblFrmPayDetailPayerStatus"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>949845871</timestamp>
		<class>cmb</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>combobox</baseclass>
		<objname>cmbFrmPayDetailPayerStatus</objname>
		<parent>frmpdbankpaymentedit</parent>
		<properties>ColumnCount = 1
ColumnWidths = "55"
RowSourceType = 1
RowSource = "  ,01,02,03,04,05,06,07,08,09,10,11,12,13,14,15,16,17,18,19,20"
ControlSource = "lvFrmPayDetailEdit.FrmPayDetailPayerStatus"
FirstElement = 1
Height = 23
Left = 218
NumberOfElements = 0
Style = 2
TabIndex = 43
Top = 418
Width = 51
ZOrderSet = 52
Name = "cmbFrmPayDetailPayerStatus"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>949847121</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblFrmPayDetailCBC</objname>
		<parent>frmpdbankpaymentedit</parent>
		<properties>FontBold = .T.
Caption = "ÊÁÊ:"
Left = 272
Top = 421
TabIndex = 44
ZOrderSet = 53
Name = "lblFrmPayDetailCBC"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_R020K4VL1</uniqueid>
		<timestamp>949847121</timestamp>
		<class>comtxtctlcalclen</class>
		<classloc>comtxtctl_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>cntTxtCtlCalcLenFrmPayDetailCBC</objname>
		<parent>frmpdbankpaymentedit</parent>
		<properties>Top = 418
Left = 300
Width = 89
Height = 23
TabIndex = 45
ZOrderSet = 54
Name = "cntTxtCtlCalcLenFrmPayDetailCBC"
txtText.ControlSource = "lvFrmPayDetailEdit.FrmPayDetailCBC"
txtText.Height = 23
txtText.Left = 0
txtText.Top = 0
txtText.Width = 58
txtText._highlightobject = .Parent.lblLen;.Parent.Parent.lblFrmPayDetailCBC
txtText._usedbfieldproperty = .T.
txtText.Name = "txtText"
lblLen.AutoSize = .F.
lblLen.Height = 17
lblLen.Left = 62
lblLen.Top = 3
lblLen.Width = 25
lblLen.Name = "lblLen"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_R020K4VL1</uniqueid>
		<timestamp>949847121</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblFrmPayDetailOCATO</objname>
		<parent>frmpdbankpaymentedit</parent>
		<properties>FontBold = .T.
Caption = "ÎÊÀÒÎ:"
Left = 414
Top = 421
TabIndex = 46
ZOrderSet = 55
Name = "lblFrmPayDetailOCATO"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>949847121</timestamp>
		<class>comtxtctlcalclen</class>
		<classloc>comtxtctl_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>cntTxtCtlCalcLenFrmPayDetailOCATO</objname>
		<parent>frmpdbankpaymentedit</parent>
		<properties>Top = 418
Left = 464
Width = 111
Height = 23
TabIndex = 47
ZOrderSet = 56
Name = "cntTxtCtlCalcLenFrmPayDetailOCATO"
txtText.ControlSource = "lvFrmPayDetailEdit.FrmPayDetailOCATO"
txtText.Height = 23
txtText.Left = 0
txtText.Top = 0
txtText.Width = 85
txtText._highlightobject = .Parent.lblLen;.Parent.Parent.lblFrmPayDetailOCATO
txtText._usedbfieldproperty = .T.
txtText.Name = "txtText"
lblLen.AutoSize = .F.
lblLen.Height = 17
lblLen.Left = 88
lblLen.Top = 3
lblLen.Width = 21
lblLen.Name = "lblLen"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_R020K4VL1</uniqueid>
		<timestamp>949847121</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblFrmPayDetailPurpose</objname>
		<parent>frmpdbankpaymentedit</parent>
		<properties>FontBold = .T.
Caption = "Îñíîâàíèå:"
Left = 576
Top = 421
TabIndex = 48
ZOrderSet = 57
Name = "lblFrmPayDetailPurpose"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>920555890</timestamp>
		<class>cmb</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>combobox</baseclass>
		<objname>cmbFrmPayDetailPurpose</objname>
		<parent>frmpdbankpaymentedit</parent>
		<properties>ColumnCount = 1
ColumnWidths = "55"
RowSourceType = 1
RowSource = "  ,ÒÏ,ÇÄ,ÒÐ,ÐÑ,ÎÒ,ÐÒ,ÂÓ,ÏÐ,ÀÏ,ÀÐ"
ControlSource = "lvFrmPayDetailEdit.FrmPayDetailPurpose"
FirstElement = 1
Left = 647
NumberOfElements = 0
Style = 2
TabIndex = 49
Top = 418
Width = 43
ZOrderSet = 58
Name = "cmbFrmPayDetailPurpose"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_R020K4VL1</uniqueid>
		<timestamp>949847121</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblFrmPayDetailTaxPeriod</objname>
		<parent>frmpdbankpaymentedit</parent>
		<properties>FontBold = .T.
Caption = "Ïåðèîä:"
Left = 10
Top = 449
TabIndex = 50
ZOrderSet = 59
Name = "lblFrmPayDetailTaxPeriod"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>920555890</timestamp>
		<class>txt</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>txtFrmPayDetailTaxPeriod</objname>
		<parent>frmpdbankpaymentedit</parent>
		<properties>ControlSource = "lvFrmPayDetailEdit.FrmPayDetailTaxPeriod"
Height = 23
InputMask = "XX.XX.XXXX"
Left = 61
TabIndex = 51
Top = 446
Width = 75
ZOrderSet = 60
_highlightobject = .Parent.lblFrmPayDetailTaxPeriod
Name = "txtFrmPayDetailTaxPeriod"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1E30WVTG6</uniqueid>
		<timestamp>949847121</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblFrmPayDetailNum</objname>
		<parent>frmpdbankpaymentedit</parent>
		<properties>FontBold = .T.
Caption = "Íîìåð äîê-òà:"
Left = 160
Top = 449
TabIndex = 52
ZOrderSet = 61
Name = "lblFrmPayDetailNum"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1E30WVTG8</uniqueid>
		<timestamp>949847121</timestamp>
		<class>comtxtctlcalclen</class>
		<classloc>comtxtctl_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>cntTxtCtlCalcLenFrmPayDetailNum</objname>
		<parent>frmpdbankpaymentedit</parent>
		<properties>Top = 446
Left = 243
Width = 155
Height = 23
TabIndex = 53
ZOrderSet = 62
Name = "cntTxtCtlCalcLenFrmPayDetailNum"
txtText.ControlSource = "lvFrmPayDetailEdit.FrmPayDetailNum"
txtText.Height = 23
txtText.Left = 0
txtText.Top = 0
txtText.Width = 115
txtText._highlightobject = .Parent.lblLen;.Parent.Parent.lblFrmPayDetailNum
txtText._usedbfieldproperty = .T.
txtText.Name = "txtText"
lblLen.AutoSize = .F.
lblLen.Height = 17
lblLen.Left = 119
lblLen.Top = 3
lblLen.Width = 23
lblLen.Name = "lblLen"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1E30WVTGA</uniqueid>
		<timestamp>949847121</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblFrmPayDetailDate</objname>
		<parent>frmpdbankpaymentedit</parent>
		<properties>FontBold = .T.
Caption = "Äàòà äîê-òà:"
Left = 414
Top = 449
TabIndex = 54
ZOrderSet = 63
Name = "lblFrmPayDetailDate"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1E30XARZ1</uniqueid>
		<timestamp>949847121</timestamp>
		<class>comtxtctlcalendar</class>
		<classloc>comtxtctl_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>cntTxtCtlCalendarFrmPayDetailDate</objname>
		<parent>frmpdbankpaymentedit</parent>
		<properties>Top = 446
Left = 488
TabIndex = 55
ZOrderSet = 64
Name = "cntTxtCtlCalendarFrmPayDetailDate"
txtText.ControlSource = "lvFrmPayDetailEdit.FrmPayDetailDate"
txtText._highlightobject = .parent.parent.lblFrmPayDetailDate
txtText.Name = "txtText"
cmdShow.Name = "cmdShow"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1E30WVTGD</uniqueid>
		<timestamp>949847121</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblFrmPayDetailType</objname>
		<parent>frmpdbankpaymentedit</parent>
		<properties>FontBold = .T.
Caption = "Òèï:"
Left = 620
Top = 449
TabIndex = 56
ZOrderSet = 65
Name = "lblFrmPayDetailType"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_R020K4VL1</uniqueid>
		<timestamp>920555890</timestamp>
		<class>cmb</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>combobox</baseclass>
		<objname>cmbFrmPayDetailType</objname>
		<parent>frmpdbankpaymentedit</parent>
		<properties>ColumnCount = 1
ColumnWidths = "55"
RowSourceType = 1
RowSource = "  ,ÍÑ,ÀÂ,ÏÅ,ÏÖ,ÑÀ,ÀØ,ÈØ"
ControlSource = "lvFrmPayDetailEdit.FrmPayDetailType"
FirstElement = 1
Left = 647
NumberOfElements = 0
Style = 2
TabIndex = 57
Top = 446
Width = 43
ZOrderSet = 66
Name = "cmbFrmPayDetailType"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>COMMENT</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>0</timestamp>
		<class/>
		<classloc/>
		<baseclass/>
		<objname>frmpdbankpaymentedit</objname>
		<parent/>
		<properties>Arial, 0, 9, 5, 15, 12, 32, 3, 0
Arial, 1, 9, 6, 15, 12, 32, 3, 0
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_25I18MQST</uniqueid>
		<timestamp>951405797</timestamp>
		<class>frmpdedit</class>
		<classloc>primarydoc_v1.vcx</classloc>
		<baseclass>form</baseclass>
		<objname>frmschedit</objname>
		<parent/>
		<properties>Height = 347
Width = 700
DoCreate = .T.
lcclientname = Íàçâàíèå êëèåíòà ïî çàäà÷å
Name = "frmschedit"
shpFrmAttribute.Top = 245
shpFrmAttribute.Left = 5
shpFrmAttribute.Enabled = .F.
shpFrmAttribute.Visible = .F.
shpFrmAttribute.Name = "shpFrmAttribute"
cstmsghandler.Name = "cstmsghandler"
cstresizable.Name = "cstresizable"
Img1.Name = "Img1"
shpCommon.Top = 5
shpCommon.Left = 5
shpCommon.Height = 176
shpCommon.Width = 690
shpCommon.Name = "shpCommon"
lblFrmType.Name = "lblFrmType"
cntIdCtlGridFrmType.txtText.Name = "txtText"
cntIdCtlGridFrmType.cmdShow.Name = "cmdShow"
cntIdCtlGridFrmType.cmdClear.Name = "cmdClear"
cntIdCtlGridFrmType.CmdTree.Name = "CmdTree"
cntIdCtlGridFrmType.Olecommprox1.Top = 0
cntIdCtlGridFrmType.Olecommprox1.Left = 36
cntIdCtlGridFrmType.Olecommprox1.Height = 16
cntIdCtlGridFrmType.Olecommprox1.Width = 38
cntIdCtlGridFrmType.Olecommprox1.Name = "Olecommprox1"
cntIdCtlGridFrmType.Name = "cntIdCtlGridFrmType"
lblFrmNum.Name = "lblFrmNum"
txtFrmNum.Name = "txtFrmNum"
chkFrmAutoNum.Alignment = 0
chkFrmAutoNum.Name = "chkFrmAutoNum"
lblFrmDate.Caption = "Äàòà îòêðûòèÿ:"
lblFrmDate.Name = "lblFrmDate"
cntTxtCtlCalendarFrmDate.txtText.Name = "txtText"
cntTxtCtlCalendarFrmDate.cmdShow.Name = "cmdShow"
cntTxtCtlCalendarFrmDate.Name = "cntTxtCtlCalendarFrmDate"
lblFrmDateAcc.Caption = "Äàòà çàêðûòèÿ:"
lblFrmDateAcc.Name = "lblFrmDateAcc"
cntTxtCtlCalendarFrmDateAcc.txtText.Name = "txtText"
cntTxtCtlCalendarFrmDateAcc.cmdShow.Name = "cmdShow"
cntTxtCtlCalendarFrmDateAcc.Name = "cntTxtCtlCalendarFrmDateAcc"
lblReason.Caption = "Ïðèìå÷àíèå 1:"
lblReason.Name = "lblReason"
edtReason.Name = "edtReason"
lblNote.Caption = "Ïðèìå÷àíèå 2:"
lblNote.Name = "lblNote"
edtNote.Name = "edtNote"
lblFrmPrcTypeID.Name = "lblFrmPrcTypeID"
cntIDCtlGridFrmPrcTypeID.txtText.Name = "txtText"
cntIDCtlGridFrmPrcTypeID.cmdShow.Name = "cmdShow"
cntIDCtlGridFrmPrcTypeID.cmdClear.Name = "cmdClear"
cntIDCtlGridFrmPrcTypeID.CmdTree.Name = "CmdTree"
cntIDCtlGridFrmPrcTypeID.Olecommprox1.Top = 0
cntIDCtlGridFrmPrcTypeID.Olecommprox1.Left = 36
cntIDCtlGridFrmPrcTypeID.Olecommprox1.Height = 16
cntIDCtlGridFrmPrcTypeID.Olecommprox1.Width = 38
cntIDCtlGridFrmPrcTypeID.Olecommprox1.Name = "Olecommprox1"
cntIDCtlGridFrmPrcTypeID.Name = "cntIDCtlGridFrmPrcTypeID"
lblFrmCurTypeID.Enabled = .F.
lblFrmCurTypeID.Left = 360
lblFrmCurTypeID.Top = 85
lblFrmCurTypeID.Visible = .F.
lblFrmCurTypeID.Name = "lblFrmCurTypeID"
cntIDCtlGridFrmCurTypeID.txtText.Name = "txtText"
cntIDCtlGridFrmCurTypeID.cmdShow.Name = "cmdShow"
cntIDCtlGridFrmCurTypeID.cmdClear.Name = "cmdClear"
cntIDCtlGridFrmCurTypeID.CmdTree.Name = "CmdTree"
cntIDCtlGridFrmCurTypeID.Olecommprox1.Top = 0
cntIDCtlGridFrmCurTypeID.Olecommprox1.Left = 36
cntIDCtlGridFrmCurTypeID.Olecommprox1.Height = 16
cntIDCtlGridFrmCurTypeID.Olecommprox1.Width = 38
cntIDCtlGridFrmCurTypeID.Olecommprox1.Name = "Olecommprox1"
cntIDCtlGridFrmCurTypeID.Top = 82
cntIDCtlGridFrmCurTypeID.Left = 490
cntIDCtlGridFrmCurTypeID.Enabled = .F.
cntIDCtlGridFrmCurTypeID.Visible = .F.
cntIDCtlGridFrmCurTypeID.Name = "cntIDCtlGridFrmCurTypeID"
lblFrmStatus.Left = 360
lblFrmStatus.Top = 154
lblFrmStatus.Name = "lblFrmStatus"
cntIdCtlGridFrmStatus.txtText.Name = "txtText"
cntIdCtlGridFrmStatus.cmdShow.Name = "cmdShow"
cntIdCtlGridFrmStatus.cmdClear.Name = "cmdClear"
cntIdCtlGridFrmStatus.CmdTree.Name = "CmdTree"
cntIdCtlGridFrmStatus.Olecommprox1.Top = 0
cntIdCtlGridFrmStatus.Olecommprox1.Left = 36
cntIdCtlGridFrmStatus.Olecommprox1.Height = 16
cntIdCtlGridFrmStatus.Olecommprox1.Width = 38
cntIdCtlGridFrmStatus.Olecommprox1.Name = "Olecommprox1"
cntIdCtlGridFrmStatus.Top = 151
cntIdCtlGridFrmStatus.Left = 490
cntIdCtlGridFrmStatus.Name = "cntIdCtlGridFrmStatus"
lblFrmParID.Enabled = .F.
lblFrmParID.Left = 360
lblFrmParID.Top = 113
lblFrmParID.Visible = .F.
lblFrmParID.Name = "lblFrmParID"
cntIDCtlGridFrmParID.txtText.Name = "txtText"
cntIDCtlGridFrmParID.cmdShow.Name = "cmdShow"
cntIDCtlGridFrmParID.cmdClear.Name = "cmdClear"
cntIDCtlGridFrmParID.CmdTree.Name = "CmdTree"
cntIDCtlGridFrmParID.Olecommprox1.Top = 0
cntIDCtlGridFrmParID.Olecommprox1.Left = 36
cntIDCtlGridFrmParID.Olecommprox1.Height = 16
cntIDCtlGridFrmParID.Olecommprox1.Width = 38
cntIDCtlGridFrmParID.Olecommprox1.Name = "Olecommprox1"
cntIDCtlGridFrmParID.Top = 110
cntIDCtlGridFrmParID.Left = 490
cntIDCtlGridFrmParID.Enabled = .F.
cntIDCtlGridFrmParID.Visible = .F.
cntIDCtlGridFrmParID.Name = "cntIDCtlGridFrmParID"
shpControl.Top = 185
shpControl.Left = 5
shpControl.Name = "shpControl"
lblDev.Left = 10
lblDev.Top = 193
lblDev.Name = "lblDev"
Lbl1.Enabled = .F.
Lbl1.Left = 264
Lbl1.Top = 270
Lbl1.Visible = .F.
Lbl1.Name = "Lbl1"
CntidctlgridPbook.txtText.Name = "txtText"
CntidctlgridPbook.cmdShow.Name = "cmdShow"
CntidctlgridPbook.cmdClear.Name = "cmdClear"
CntidctlgridPbook.CmdTree.Name = "CmdTree"
CntidctlgridPbook.Olecommprox1.Top = 0
CntidctlgridPbook.Olecommprox1.Left = 36
CntidctlgridPbook.Olecommprox1.Height = 16
CntidctlgridPbook.Olecommprox1.Width = 38
CntidctlgridPbook.Olecommprox1.Name = "Olecommprox1"
CntidctlgridPbook.Top = 267
CntidctlgridPbook.Left = 446
CntidctlgridPbook.Enabled = .F.
CntidctlgridPbook.Visible = .F.
CntidctlgridPbook.Name = "CntidctlgridPbook"
cntIdCtlGridDev.txtText.Name = "txtText"
cntIdCtlGridDev.cmdShow.Name = "cmdShow"
cntIdCtlGridDev.cmdClear.Name = "cmdClear"
cntIdCtlGridDev.CmdTree.Name = "CmdTree"
cntIdCtlGridDev.Olecommprox1.Top = 0
cntIdCtlGridDev.Olecommprox1.Left = 36
cntIdCtlGridDev.Olecommprox1.Height = 16
cntIdCtlGridDev.Olecommprox1.Width = 38
cntIdCtlGridDev.Olecommprox1.Name = "Olecommprox1"
cntIdCtlGridDev.Top = 190
cntIdCtlGridDev.Left = 96
cntIdCtlGridDev.Name = "cntIdCtlGridDev"
lblContr.Left = 360
lblContr.Top = 193
lblContr.Name = "lblContr"
cntIdCtlGridContr.txtText.Name = "txtText"
cntIdCtlGridContr.cmdShow.Name = "cmdShow"
cntIdCtlGridContr.cmdClear.Name = "cmdClear"
cntIdCtlGridContr.CmdTree.Name = "CmdTree"
cntIdCtlGridContr.Olecommprox1.Top = 0
cntIdCtlGridContr.Olecommprox1.Left = 36
cntIdCtlGridContr.Olecommprox1.Height = 16
cntIdCtlGridContr.Olecommprox1.Width = 38
cntIdCtlGridContr.Olecommprox1.Name = "Olecommprox1"
cntIdCtlGridContr.Top = 190
cntIdCtlGridContr.Left = 432
cntIdCtlGridContr.Name = "cntIdCtlGridContr"
shpQualityEmi.Top = 223
shpQualityEmi.Left = 5
shpQualityEmi.Name = "shpQualityEmi"
lblPointEmi.Left = 10
lblPointEmi.Top = 231
lblPointEmi.Name = "lblPointEmi"
cntIdCtlGridPointEmi.txtText.Name = "txtText"
cntIdCtlGridPointEmi.cmdShow.Name = "cmdShow"
cntIdCtlGridPointEmi.cmdClear.Name = "cmdClear"
cntIdCtlGridPointEmi.CmdTree.Name = "CmdTree"
cntIdCtlGridPointEmi.Olecommprox1.Top = 0
cntIdCtlGridPointEmi.Olecommprox1.Left = 36
cntIdCtlGridPointEmi.Olecommprox1.Height = 16
cntIdCtlGridPointEmi.Olecommprox1.Width = 38
cntIdCtlGridPointEmi.Olecommprox1.Name = "Olecommprox1"
cntIdCtlGridPointEmi.Top = 228
cntIdCtlGridPointEmi.Left = 108
cntIdCtlGridPointEmi.Name = "cntIdCtlGridPointEmi"
lblPointEmiAccount.Left = 10
lblPointEmiAccount.Top = 259
lblPointEmiAccount.Name = "lblPointEmiAccount"
cntIdCtlGridPointEmiAccount.txtText.Name = "txtText"
cntIdCtlGridPointEmiAccount.cmdShow.Name = "cmdShow"
cntIdCtlGridPointEmiAccount.cmdClear.Name = "cmdClear"
cntIdCtlGridPointEmiAccount.CmdTree.Name = "CmdTree"
cntIdCtlGridPointEmiAccount.Olecommprox1.Top = 0
cntIdCtlGridPointEmiAccount.Olecommprox1.Left = 36
cntIdCtlGridPointEmiAccount.Olecommprox1.Height = 16
cntIdCtlGridPointEmiAccount.Olecommprox1.Width = 38
cntIdCtlGridPointEmiAccount.Olecommprox1.Name = "Olecommprox1"
cntIdCtlGridPointEmiAccount.Top = 256
cntIdCtlGridPointEmiAccount.Left = 140
cntIdCtlGridPointEmiAccount.Name = "cntIdCtlGridPointEmiAccount"
lblExecEmi.Left = 10
lblExecEmi.Top = 287
lblExecEmi.Name = "lblExecEmi"
cntIdCtlGridExecEmi.txtText.Name = "txtText"
cntIdCtlGridExecEmi.cmdShow.Name = "cmdShow"
cntIdCtlGridExecEmi.cmdClear.Name = "cmdClear"
cntIdCtlGridExecEmi.CmdTree.Name = "CmdTree"
cntIdCtlGridExecEmi.Olecommprox1.Top = 0
cntIdCtlGridExecEmi.Olecommprox1.Left = 36
cntIdCtlGridExecEmi.Olecommprox1.Height = 16
cntIdCtlGridExecEmi.Olecommprox1.Width = 38
cntIdCtlGridExecEmi.Olecommprox1.Name = "Olecommprox1"
cntIdCtlGridExecEmi.Top = 284
cntIdCtlGridExecEmi.Left = 140
cntIdCtlGridExecEmi.Name = "cntIdCtlGridExecEmi"
shpQualityIsp.Top = 223
shpQualityIsp.Left = 355
shpQualityIsp.Name = "shpQualityIsp"
lblPointIsp.Left = 360
lblPointIsp.Top = 231
lblPointIsp.Name = "lblPointIsp"
cntIdCtlGridPointIsp.txtText.Name = "txtText"
cntIdCtlGridPointIsp.cmdShow.Name = "cmdShow"
cntIdCtlGridPointIsp.cmdClear.Name = "cmdClear"
cntIdCtlGridPointIsp.CmdTree.Name = "CmdTree"
cntIdCtlGridPointIsp.Olecommprox1.Top = 0
cntIdCtlGridPointIsp.Olecommprox1.Left = 36
cntIdCtlGridPointIsp.Olecommprox1.Height = 16
cntIdCtlGridPointIsp.Olecommprox1.Width = 38
cntIdCtlGridPointIsp.Olecommprox1.Name = "Olecommprox1"
cntIdCtlGridPointIsp.Top = 228
cntIdCtlGridPointIsp.Left = 490
cntIdCtlGridPointIsp.Name = "cntIdCtlGridPointIsp"
lblPointIspAccount.Left = 360
lblPointIspAccount.Top = 259
lblPointIspAccount.Name = "lblPointIspAccount"
cntIdCtlGridPointIspAccount.txtText.Name = "txtText"
cntIdCtlGridPointIspAccount.cmdShow.Name = "cmdShow"
cntIdCtlGridPointIspAccount.cmdClear.Name = "cmdClear"
cntIdCtlGridPointIspAccount.CmdTree.Name = "CmdTree"
cntIdCtlGridPointIspAccount.Olecommprox1.Top = 0
cntIdCtlGridPointIspAccount.Olecommprox1.Left = 36
cntIdCtlGridPointIspAccount.Olecommprox1.Height = 16
cntIdCtlGridPointIspAccount.Olecommprox1.Width = 38
cntIdCtlGridPointIspAccount.Olecommprox1.Name = "Olecommprox1"
cntIdCtlGridPointIspAccount.Top = 256
cntIdCtlGridPointIspAccount.Left = 490
cntIdCtlGridPointIspAccount.Name = "cntIdCtlGridPointIspAccount"
lblExecIsp.Left = 360
lblExecIsp.Top = 287
lblExecIsp.Name = "lblExecIsp"
cntIdCtlGridExecIsp.txtText.Name = "txtText"
cntIdCtlGridExecIsp.cmdShow.Name = "cmdShow"
cntIdCtlGridExecIsp.cmdClear.Name = "cmdClear"
cntIdCtlGridExecIsp.CmdTree.Name = "CmdTree"
cntIdCtlGridExecIsp.Olecommprox1.Top = 0
cntIdCtlGridExecIsp.Olecommprox1.Left = 36
cntIdCtlGridExecIsp.Olecommprox1.Height = 16
cntIdCtlGridExecIsp.Olecommprox1.Width = 38
cntIdCtlGridExecIsp.Olecommprox1.Name = "Olecommprox1"
cntIdCtlGridExecIsp.Top = 284
cntIdCtlGridExecIsp.Left = 490
cntIdCtlGridExecIsp.Name = "cntIdCtlGridExecIsp"
lblFrmAttribute.Enabled = .F.
lblFrmAttribute.Left = 10
lblFrmAttribute.Top = 246
lblFrmAttribute.Visible = .F.
lblFrmAttribute.Name = "lblFrmAttribute"
grdBit.Column1.Header1.Name = "Header1"
grdBit.Column1.Chk1.Alignment = 0
grdBit.Column1.Chk1.Enabled = .F.
grdBit.Column1.Chk1.Visible = .F.
grdBit.Column1.Chk1.Name = "Chk1"
grdBit.Column1.Enabled = .F.
grdBit.Column1.Visible = .F.
grdBit.Column1.Name = "Column1"
grdBit.Column2.Header1.Name = "Header1"
grdBit.Column2.Txtgrd1.Enabled = .F.
grdBit.Column2.Txtgrd1.Visible = .F.
grdBit.Column2.Txtgrd1.Name = "Txtgrd1"
grdBit.Column2.Enabled = .F.
grdBit.Column2.Visible = .F.
grdBit.Column2.Name = "Column2"
grdBit.Enabled = .F.
grdBit.Left = 10
grdBit.Top = 267
grdBit.Visible = .F.
grdBit.Name = "grdBit"
cntcancelsavehandled.cmdCancel.Name = "cmdCancel"
cntcancelsavehandled.cmdOk.Name = "cmdOk"
cntcancelsavehandled.Top = 317
cntcancelsavehandled.Left = 490
cntcancelsavehandled.Name = "cntcancelsavehandled"
cstdatawork.Name = "cstdatawork"
CMD1.Name = "CMD1"
Cmd2.Name = "Cmd2"
</properties>
		<protected/>
		<methods>PROCEDURE cntIdCtlGridFrmStatus._refreshrelatedobjects
DODEFAULT()
typeNewFrm = this.value
ENDPROC
PROCEDURE cntIdCtlGridPointIsp._refreshrelatedobjects
DODEFAULT()
IF TYPE('barCltName') ='C'
barCltName = this.txtText.Value
ENDIF
ENDPROC
PROCEDURE Init
LPARAMETERS tcCommand, tuParam1, tuParam2, tuParam3
DODEFAULT(tcCommand, tuParam1, tuParam2, tuParam3)
IF TYPE("tuParam3")&lt;&gt;'T'
tuParam3  = DATETIME()
ENDIF
DO CASE

	CASE this.cMode==[ADD]
	*!*			REPLACE ;
	*!*				FrmDate WITH tuParam2, ;
	*!*				FrmDateAcc WITH tuParam3 ;
	*!*			IN lvFrmEdit
		REPLACE ;
			FrmDate WITH DATETIME(), ;
			FrmDateAcc WITH tuParam3 ;
		IN lvFrmEdit
ENDCASE
IF TYPE("test1")='C'
REPLACE FrmReason WITH test1 IN lvFrmEdit
ENDIF
*------------------------------------------------------------------------------

ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1>Class</reserved1>
		<reserved2>1</reserved2>
		<reserved3>lcclientname
</reserved3>
		<reserved4/>
		<reserved5/>
		<reserved6>Pixels</reserved6>
		<reserved7>Ôîðìà äëÿ çàïîëíåíèÿ ñ÷åòîâ</reserved7>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>COMMENT</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>0</timestamp>
		<class/>
		<classloc/>
		<baseclass/>
		<objname>frmschedit</objname>
		<parent/>
		<properties>Arial, 0, 9, 5, 15, 12, 32, 3, 0
Arial, 1, 9, 6, 15, 12, 32, 3, 0
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_27R0KP52F</uniqueid>
		<timestamp>951616203</timestamp>
		<class>frmresuview</class>
		<classloc>primarydoc_v1.vcx</classloc>
		<baseclass>form</baseclass>
		<objname>frmresuinstrview</objname>
		<parent/>
		<properties>Top = 0
Left = 0
Height = 601
Width = 992
DoCreate = .T.
Caption = "Ïëàí - ãðàôèê çàãðóæåííîñòè èíñòðóêòîðîâ"
WindowState = 0
Name = "frmresuinstrview"
cstmsghandler.Name = "cstmsghandler"
cstresizable.Name = "cstresizable"
Img1.Name = "Img1"
G2ANTT1.Top = 12
G2ANTT1.Left = 12
G2ANTT1.Height = 540
G2ANTT1.Width = 970
G2ANTT1.Name = "G2ANTT1"
Command1.Top = 564
Command1.Left = 12
Command1.Enabled = .F.
Command1.Visible = .F.
Command1.Name = "Command1"
Command2.Top = 564
Command2.Left = 11
Command2.Name = "Command2"
Shape1.Top = 562
Shape1.Left = 671
Shape1.Name = "Shape1"
Shape2.Top = 580
Shape2.Left = 671
Shape2.Name = "Shape2"
Shape3.Top = 580
Shape3.Left = 831
Shape3.Name = "Shape3"
Shape4.Top = 562
Shape4.Left = 831
Shape4.Name = "Shape4"
Label1.Caption = "- âçðîñëûé"
Label1.Left = 760
Label1.Top = 560
Label1.Name = "Label1"
Label2.Caption = "- äåòñêèé"
Label2.Left = 760
Label2.Top = 577
Label2.Name = "Label2"
Label3.Caption = "- ãðóïïîâîé"
Label3.Left = 920
Label3.Top = 562
Label3.Name = "Label3"
Label4.Caption = "- äåæóðñòâî"
Label4.Left = 920
Label4.Top = 579
Label4.Name = "Label4"
</properties>
		<protected/>
		<methods>PROCEDURE G2ANTT1._add
LPARAMETERS item, datestart, dateend

LOCAL lPartFrmId ,lPartFrmId1 ,tnTvrID,lnMsuID,lnPrice ,_PARAM1,_PARAM2,llResult
WITH this
.Enabled = .F.
		*12.05.2004 03:26 -&gt;Âûïîëíÿåì îïåðàöèþ äîáàâëåíèÿ äîêóìåíòà
luResAdding = oMgrPD.Operate([FORM],[ADDSCHET],ThisForm.nScrFrmID, datestart, dateend)
.Enabled = .T.
SET DATABASE TO BASIS
IF TYPE('luResAdding')='L'
RETURN 0
ENDIF
		lPartFrmId1  = luResAdding
		SELECT rv_ResursLst
		LOCATE ALL FOR BarId = item
		IF !FOUND()
RETURN 0
		ENDIF

		SCATTER MEMVAR
		** ñ÷èòàåì âðåìÿ â ìèíóòàõ
		nTime = (dateend - datestart)
		IF TYPE('datestart')='T'
		   nTime = nTime /60 /60  &amp;&amp; ïðèâåëè ê ÷àñàì
		  ELSE
		   nTime  = nTime * 24  &amp;&amp; ïðèâåëè ê ÷àñàì
		ENDIF

		*--îïðåäåëÿåì ðåñóðñ
		DO CASE
			CASE typeTvr=1 &amp;&amp;--âçðîñëûé
				_PARAM1 = 22124 &amp;&amp;--tnTvrID
				
			CASE typeTvr=2 &amp;&amp;--äåòñêèé
				_PARAM1 = 22101
				
			CASE typeTvr=3 &amp;&amp;--ãðóïïîâîé
				_PARAM1 = 22107
				
			CASE typeTvr=4 &amp;&amp;--äåæóðñòâî
				_PARAM1 = 22200
		ENDCASE
		_PARAM2 = 1
		***
		USE IN SELECT('lvPriceTvr')
		USE lvPriceTvr IN 0

		USE IN SELECT('lvOrderTvrEdit')
		USE lvOrderTvrEdit IN 0 NODATA
		APPEND BLANK IN lvOrderTvrEdit
		REPLACE ;
			FrmID WITH luResAdding  , ;
			TvrId WITH _PARAM1, ;
			TvrIDCalc WITH m.TvrId, ;
			MsuId WITH m.MsuID, ;
			TvrQnt WITH nTime  , ;
			TvrPrcSale WITH lvPriceTvr.Price ;
		IN lvOrderTvrEdit
		llResult = TABLEUPDATE(1,.T.,[lvOrderTvrEdit])
		*------------------------------------------------------------------------------
		
		IF llResult
			lPartFrmId = spGetLastIncrementedID([lvOrderTvrEdit])
		ELSE
		   RETURN 0
		ENDIF
		USE IN SELECT('rv_JurnalUseEdit')
USE rv_JurnalUseEdit IN 0 NODATA
		APPEND BLANK IN rv_JurnalUseEdit
		REPLACE ;
			FrmPartTvrId WITH lPartFrmId , ;
			UseStart WITH datestart, ;
			UseEnd WITH dateend, ;
			UsePlan WITH .t. ;
		IN rv_JurnalUseEdit
		llResult = TABLEUPDATE(1,.T.,[rv_JurnalUseEdit])
		IF llResult
			lPartFrmId = spGetLastIncrementedID([rv_JurnalUseEdit])
	    	INSERT INTO rv_ResursJrn (JrnUseId,BarId, FrmId) VALUES (lPartFrmId,item,lPartFrmId1 )
		ELSE
		   RETURN 0
		ENDIF
ENDWITH 		
RETURN lPartFrmId
ENDPROC
PROCEDURE G2ANTT1._dele
PUBLIC typeTvr
SELECT rv_ResursJrn
LOCATE ALL FOR rv_ResursJrn.JrnUseId = this.lnbarid
typeTvr=1
IF FOUND()
		*--îïðåäåëÿåì ðåñóðñ
		DO CASE
			CASE rv_ResursJrn.TvrId = 22124 &amp;&amp;--âçðîñëûé
				typeTvr=1
			CASE rv_ResursJrn.TvrId = 22101 &amp;&amp;--äåòñêèé
				typeTvr=2				
			CASE rv_ResursJrn.TvrId = 22107 &amp;&amp;--ãðóïïîâîé
				typeTvr=3				
			CASE rv_ResursJrn.TvrId = 22200 &amp;&amp;--äåæóðñòâî
				typeTvr=4
				OTHERWISE
				typeTvr=1
		ENDCASE
		DODEFAULT()
ENDIF
RELEASE typeTvr

ENDPROC
PROCEDURE G2ANTT1._edit
LPARAMETERS lnJrnUseId, h
LOCAL luRes, lstr, datestart, dateend,lcNameBar ,stringWk
luResAdding  =.f.
PUBLIC barCltName, typeTvr
SELECT rv_ResursJrn
LOCATE ALL FOR rv_ResursJrn.JrnUseId = lnJrnUseId
typeTvr=1
IF FOUND()
		*--îïðåäåëÿåì ðåñóðñ
		DO CASE
			CASE rv_ResursJrn.TvrId = 22124 &amp;&amp;--âçðîñëûé
				typeTvr=1
			CASE rv_ResursJrn.TvrId = 22101 &amp;&amp;--äåòñêèé
				typeTvr=2				
			CASE rv_ResursJrn.TvrId = 22107 &amp;&amp;--ãðóïïîâîé
				typeTvr=3				
			CASE rv_ResursJrn.TvrId = 22200 &amp;&amp;--äåæóðñòâî
				typeTvr=4
				OTHERWISE
				typeTvr=1
		ENDCASE

barCltName  =''
this.Enabled = .F.
luRes = oMgrPD.Operate([FORM],[EDIT],rv_ResursJrn.FrmID)
this.Enabled = .t.
IF luRes
this.BeginUpdate()
WITH this.Items
datestart = .ItemBar(h, lnJrnUseId,1)
dateend   = .ItemBar(h, lnJrnUseId,2)
.RemoveBar(h, lnJrnUseId)
			DO CASE
			   CASE typeTvr = 1
			       lcNameBar = 'Task'
			   CASE typeTvr= 2
			       lcNameBar = 'preTask'
			   CASE typeTvr= 3
			       lcNameBar = 'garTask'
			   OTHERWISE
			       lcNameBar = 'LiveTask'
		    ENDCASE
		       .AddBar( h, this.namebar(rv_ResursJrn.TvrId,datestart, dateend ), datestart, dateend, lnJrnUseId, ALLTRIM(barCltName) )
		  ENDWITH
this.EndUpdate()
ENDIF
ENDIF
RELEASE barCltName, typeTvr
RETURN luRes


ENDPROC
PROCEDURE G2ANTT1._info
WITH this
	SELECT rv_ResursJrn
	LOCATE ALL FOR rv_ResursJrn.JrnUseId = .lnbarid
	IF FOUND()
		*--îïðåäåëÿåì ðåñóðñ
		PUBLIC typeTvr
		DO CASE
			CASE rv_ResursJrn.TvrId = 22124 &amp;&amp;--âçðîñëûé
				typeTvr=1
			CASE rv_ResursJrn.TvrId = 22101 &amp;&amp;--äåòñêèé
				typeTvr=2				
			CASE rv_ResursJrn.TvrId = 22107 &amp;&amp;--ãðóïïîâîé
				typeTvr=3				
			CASE rv_ResursJrn.TvrId = 22200 &amp;&amp;--äåæóðñòâî
				typeTvr=4
				OTHERWISE
				typeTvr=1
		ENDCASE
	   luRes = oMgrPD.Operate([FORM],[INFO],rv_ResursJrn.FrmID)
	   RELEASE typeTvr
ENDIF
ENDWITH

ENDPROC
PROCEDURE G2ANTT1.BarResize
*** ActiveX Control Event ***
LPARAMETERS item, key
IF !TYPE('key')= 'N'
RETURN .f.
ENDIF
LOCAL  lStart, lEnd, lFrmPartTvrId
with this.Items
lStart = .ItemBar(item,key,1)
lEnd = .ItemBar(item,key,2)
IF TYPE('lStart') = 'C'
RETURN
ENDIF
SET DATABASE TO BASIS
_PARAM = key
	 USE IN SELECT('rv_JurnalUseEdit')
USE rv_JurnalUseEdit IN 0
	CURSORSETPROP([BUFFERING],3,[rv_JurnalUseEdit])
IF RECCOUNT('rv_JurnalUseEdit')=1
REPLACE  UseStart WITH  lStart , ;
UseEnd   WITH  lEnd IN rv_JurnalUseEdit
			llResult = TABLEUPDATE(1,.T.,[rv_JurnalUseEdit])
			IF !llResult
			   RETURN .f.
			ENDIF		
ELSE
=MESSAGEBOX('Îøèáî÷íûé êîä îáúåêòà. '+CHR(13)+'Ñîõðàíåíèå íå ïðîèçîøëî ...',0+16, 'Ïðîáëåìà')
RETURN .f.
ENDIF
SELECT rv_ResursJrn
	 LOCATE ALL FOR rv_ResursJrn.ItemId = item AND rv_ResursJrn.BarId = key
		IF FOUND()
			_PARAM = rv_ResursJrn.FrmID
			lFrmPartTvrId = rv_ResursJrn.FrmPartTvr
			USE IN SELECT('lvFrmEdit')
		    USE lvFrmEdit IN 0
			CURSORSETPROP([BUFFERING],3,[lvFrmEdit])
	   	   REPLACE  FrmDate WITH  lStart , ;
FrmDateAcc  WITH  lEnd IN lvFrmEdit
			llResult = TABLEUPDATE(1,.T.,[lvFrmEdit])
			IF !llResult
			   RETURN .f.
			ENDIF		

			** ñ÷èòàåì âðåìÿ â ìèíóòàõ
			nTime = (lEnd - lStart)
			IF TYPE('lStart')='T'
			   nTime = nTime /60 /60  &amp;&amp; ïðèâåëè ê ÷àñàì
			  ELSE
			   nTime  = nTime * 24  &amp;&amp; ïðèâåëè ê ÷àñàì
			ENDIF

			USE IN SELECT('lvOrderTvrEdit')
			_PARAM = lFrmPartTvrId
			USE lvOrderTvrEdit IN 0
			REPLACE ;
				TvrQnt WITH nTime ;
			IN lvOrderTvrEdit
			llResult = TABLEUPDATE(1,.T.,[lvOrderTvrEdit])
			*------------------------------------------------------------------------------

			USE IN SELECT('rv_JurnalUseEdit')
			USE rv_JurnalUseEdit IN 0
			REPLACE ;
				UseStart WITH lStart, ;
				UseEnd WITH lEnd ;
			IN rv_JurnalUseEdit
			llResult = TABLEUPDATE(1,.T.,[rv_JurnalUseEdit])
		ENDIF

endwith


ENDPROC
PROCEDURE G2ANTT1.barsprop
DODEFAULT()
With this.Chart.Bars
	.Item("Task").HistogramPattern = 32
	.Item("Task").HistogramColor = RGB(138,244,244)
	.Item("preTask").HistogramPattern = 32
	.Item("preTask").HistogramColor =       RGB(255,255,0)
	.Item("garTask").HistogramPattern = 32
	.Item("garTask").HistogramColor =       RGB(0,128,192)
	.Item("LiveTask").HistogramPattern = 32
	.Item("LiveTask").HistogramColor = RGB(0,255,64)
	.Item("errTask").HistogramPattern = 32
	.Item("errTask").HistogramColor = RGB(255,128,0)
ENDWITH


ENDPROC
PROCEDURE G2ANTT1.Click
*** ActiveX Control Event ***
With thisform.g2ANTT1
	local h, c, hit, llResult
.lnitemid = .ItemFromPoint(-1, -1, c, hit)
If (.lnitemid # 0)
.lnbarid  = .Chart.BarFromPoint(-1, -1)
EndIf
EndWith
DODEFAULT()
ENDPROC
PROCEDURE G2ANTT1.CreateBar
*** ActiveX Control Event ***
LPARAMETERS item, datestart, dateend
LOCAL lPartFrmId ,newBar,llResult , lcNameBar
IF dateend-datestart&lt;150
RETURN
ENDIF
datestart = IIF(HOUR(datestart)&lt;08,CTOT(DTOC(datestart)+ ' 08:00:00'),datestart)
dateend = IIF(HOUR(dateend)&gt;22 OR HOUR(dateend)&lt;10,CTOT(DTOC(dateend)+ ' 23:00:00'),dateend)
SELECT Rv_resursLst
LOCATE ALL FOR Rv_resursLst.BarId = item
with this
PUBLIC barCltName, typeTvr,MakerClt
IF FOUND()
		MakerClt = Rv_resursLst.MakerCltId
	ELSE
		MakerClt = 0
ENDIF
barCltName =''
lcNameBar = 'Task'
lPartFrmId = ._add(item, datestart, dateend)
IF lPartFrmId &gt;0	
.BeginUpdate()
	with .Items
	DO CASE
	   CASE typeTvr = 1
	       lcNameBar = 'Task'
	   CASE typeTvr= 2
	       lcNameBar = 'preTask'
	   CASE typeTvr= 3
	       lcNameBar = 'garTask'
	   OTHERWISE
	       lcNameBar = 'LiveTask'
ENDCASE
		.AddBar( item, lcNameBar , datestart, dateend, lPartFrmId , ALLTRIM(barCltName) )
	ENDWITH
.EndUpdate
ENDIF
RELEASE barCltName, typeTvr, MakerClt
endwith
ENDPROC
PROCEDURE G2ANTT1.histogramset
**RETURN
WITH THIS.Chart
			*!*		.AllowCreateBar = .F.
		.HistogramVisible = .T.
		.HistogramBackColor = RGB(255,255,255)
		.HistogramHeight = 96
ENDWITH
ENDPROC
PROCEDURE G2ANTT1.Init
DODEFAULT()
this.drawGridLines= -1  &amp;&amp; exAllLines .DrawGridLines


ENDPROC
PROCEDURE G2ANTT1.loaddata
LOCAL lcUniqueName,lcUniqueFilePath , lcNameBar
LOCAL lnDefItem, lnDefParId, lnDefTvrId,lnDefResursId,lnBarId ,lnBarId, stringWk
* Òàáëèöà èñïîëüçîâàíèÿ ðåñóðñîâ
lcUniqueName = [_d] + SYS(2015)
lcUniqueFilePath = [tmp\] + lcUniqueName + [.DBF]
SELECT * FROM (this.dbtablename) INTO TABLE (lcUniqueFilePath)
USE IN rv_ResursJrn
SELECT (lcUniqueName)
USE
USE (lcUniqueFilePath ) IN 0 ALIAS rv_ResursJrn EXCLUSIVE

* Ñïðàâî÷íèê ðåñóðñîâ
lcUniqueName = [_d] + SYS(2015)
lcUniqueFilePath = [tmp\] + lcUniqueName + [.DBF]
SELECT * FROM BASIS!rv_ResursLst ORDER BY ParNM,TvrNm INTO TABLE (lcUniqueFilePath)
USE IN rv_ResursLst
SELECT (lcUniqueName)
USE
USE (lcUniqueFilePath ) IN 0 ALIAS rv_ResursLst EXCLUSIVE

* Ñïðàâî÷íèê óñëóã
lcUniqueName = [_d] + SYS(2015)
lcUniqueFilePath = [tmp\] + lcUniqueName + [.DBF]
SELECT * FROM BASIS!rv_UslugaLst INTO TABLE (lcUniqueFilePath)
USE IN rv_UslugaLst
SELECT (lcUniqueName)
USE
USE (lcUniqueFilePath ) IN 0 ALIAS rv_UslugaLst EXCLUSIVE

IF thisform.resuparent&lt;&gt;0
	SELECT rv_ResursLst
	DELETE ALL FOR rv_ResursLst.TvrParId&lt;&gt;thisform.resuparent
	PACK
	SELECT rv_UslugaLst
	DELETE ALL FOR rv_UslugaLst.TvrParId&lt;&gt;thisform.resuparent
	PACK
ENDIF


SET DATE GERMAN
this.BeginUpdate()

with this.Items
*** Äîáàâëÿåì ðåñóðñû
SELECT rv_ResursLst
STORE -99999 TO lnDefTvrId ,lnDefParId ,lnDefResursId ,lnBarId
SCAN
IF !lnDefParId = NVL(rv_ResursLst.TvrParId,0)
	   .DefaultItem = .AddItem(ALLTRIM(rv_ResursLst.ParNM))
	   lnDefItem = .DefaultItem
	   lnDefParId = NVL(rv_ResursLst.TvrParId,0)
	ENDIF
.DefaultItem = .InsertItem( lnDefItem , "", IIF(ISNULL(rv_ResursLst.StartDate) AND !ISNULL(rv_ResursLst.MakerCltId),[* îòñóò *],[])+ALLTRIM(rv_ResursLst.TvrNm))
lnBarId = .DefaultItem
	REPLACE ItemId WITH lnDefItem ,BarId WITH lnBarId
ENDSCAN
SELECT rv_ResursJrn
STORE -99999 TO lnDefTvrId ,lnDefParId ,lnDefResursId ,lnBarId
SCAN
	SELECT rv_ResursLst
	LOCATE ALL FOR rv_ResursLst.TvrId = rv_ResursJrn.ResursID
	IF !FOUND()
	 SELECT rv_ResursJrn
LOOP
	ENDIF
SELECT rv_ResursJrn
	lnDefItem = rv_ResursLst.BarId  &amp;&amp; ñèñòåìíûé êîä ðåñóðñà
	lnBarId = rv_ResursJrn.JrnUseId
.AddBar(lnDefItem , this.namebar(rv_ResursJrn.TvrId,TTOD(rv_ResursJrn.UseStart),TTOD(rv_ResursJrn.UseEnd)) , TTOC(rv_ResursJrn.UseStart),TTOC(rv_ResursJrn.UseEnd), rv_ResursJrn.JrnUseId, ALLTRIM(rv_ResursJrn.CltNM))
**  1                                   2                3                             4                          5                       6                          7                            8
stringWk = "Items.ItemBar("+ ALLTRIM(STR(lnDefItem ,10,0))+" , "+ ALLTRIM(STR(rv_ResursJrn.JrnUseId,10,0))+" , 12) =" + ALLTRIM(STR(this.prcworkdate(TTOD(rv_ResursJrn.UseStart),TTOD(rv_ResursJrn.UseEnd)),5,2))   &amp;&amp; exBarPercent
this.executeTemplate(stringWk)
test1 = .ItemBar(lnDefItem ,rv_ResursJrn.JrnUseId,12)
test =    this.prcworkdate(TTOD(rv_ResursJrn.UseStart),TTOD(rv_ResursJrn.UseEnd))
IF ABS(test1 - test) &lt; 0.01
**WAIT WINDOW test1
stringWk = "Items.ItemBar("+ ALLTRIM(STR(lnDefItem ,10,0))+" , "+ ALLTRIM(STR(rv_ResursJrn.JrnUseId,10,0))+" , 12) =" + ALLTRIM(STR(this.prcworkdate(TTOD(rv_ResursJrn.UseStart),TTOD(rv_ResursJrn.UseEnd)),5,2))   &amp;&amp; exBarPercent
this.executeTemplate(stringWk)
test =    this.prcworkdate(TTOD(rv_ResursJrn.UseStart),TTOD(rv_ResursJrn.UseEnd))
**SET STEP ON
ENDIF
	SELECT rv_ResursJrn
	REPLACE ItemId WITH lnDefItem ,BarId WITH lnBarId
ENDSCAN
endwith

this.EndUpdate()	



ENDPROC
PROCEDURE G2ANTT1.namebar
LPARAMETERS lcTvrID, StartDate, EndDate, ControlDate

LOCAL lcNameBar

DO CASE
CASE lcTvrID = 22124
lcNameBar = 'Task'
CASE lcTvrID = 22101
lcNameBar = 'preTask'
CASE lcTvrID = 22107
lcNameBar = 'garTask'
OTHERWISE
lcNameBar = 'LiveTask'
ENDCASE


RETURN lcNameBar



ENDPROC
PROCEDURE G2ANTT1.Refresh
*** ActiveX Control Method ***
DODEFAULT()
with thisform.G2antt1
	.BeginUpdate
	with .Items
	for each h in thisform.G2antt1.Items
		.DefaultItem = h
		.ExpandItem(0) = .t.
	next
	endwith
	.EndUpdate
endwith

ENDPROC
PROCEDURE G2ANTT1.timescale
g2antt::timescale()
*DODEFAULT()
LOCAL s
WITH this
.BeginUpdate
** Ñ êàêîãî ìîìåíòà íà÷èíàåòñÿ òàáëèöà
s = "gBJJgBAIDAAGAAEAAQhYAf8Pf4hh0QihCJo2AEZjQAjEZFEaIEaEEaAIAkcbk0olUrlktl0vmExmUzmk1m03nE5nU7nk9n0/oFBoVDolFo1HpFJpVLplNp1PqFRqVTq"
s=s+"lVq1XrFZrVbrldr1fsFhsVjslls1ntFptVrtltt1vuFxuVzul1u13vF5vV7vl9v1BAmBhOCwMKwuDw2ExWJxmIx2HyGLx+SyONyuTy2UzWZzmYz2X0Gbx1kUigUAAMwzG"
s=s+"eo1Ws1ZV2Go1IAL+1ACZMxm2+52W63Ov2Op1fC13F0un4nJ1vE2BV2XD2e/4vK4fL63V1bMTKZ5/d2pf3vh6Xj2ff3e63G683S5vF0mmAD4+Xx+bA+wAeP5/H6a/9+h8P2"
s=s+"eIAGZAiHHYZkDQQ7TuH/Ap4GUUzjPgiCJn+AD7GBAMNQJBD8wFDwAFlEUExJBaHQdCDixM+UARYABuxg/8ZQ5DUQRpEEbQKf8DxPBDiPe08KRdDEZHVIwANU1YRSWAALSdJ"
s=s+"snxpHcFO3HsrOI48Ky1IkKQpERZAA9sjHVC77ynEsqwbBE1RVNKHgAQ04yQ1skvDOJDRkZc9ABJYRT5Jk+z/P0pR49sgQHAsaUVApx0aAD+mvOclSZIkYG7MsMxNTUqyw+F"
s=s+"FwVRNQwRSwACFUwADvVNHv9IlNu5V02u5UjzVMIUQxHMYABzXdUVVRpxgBXM60DX9MQHTjWrJE0uzfGkXRdXNa0FYMjxBM8vxJM7iWXN8KSlbs31zWlT1Ja0eWxM9tNbbkL"
s=s+"UhY1mQtaU62hI9hyZUl0x5H6x3ZLVvwtekyWlYlHXNBF0R5dTszdC1vR1cELVJO9JABLODVvMF8x9deGS1fE3yJXYc4pgOKUDfGE31ZN+Srd13U/VdI1y9uCWBPRl2NE1sW"
s=s+"xbeWv9l2f6DSNSXdkTaNtd1WyrncR567mgaHGJLanMLY2laVc2FOjW1JpTuX2sV0YhmMtQpXLct1msZRBLmU421exYbN93XgAFixA9s61ztkzbc4u47LHmb6O8ExSPs0j6N"
s=s+"Otyv1hSy8BCm6bHs7eUDXMXb5DOLuJyG5v9CjzWLCkszrqZLS2+/NtbwEQdFN9sPbLPEYFU/Fxj1TV2U7WyahslSdM8O9SPGkieK+8iW33fe1JXNUjvqrnWlo1A2lUnieO+"
s=s+"/k1lGMs7RjDwvNiciedUtT6Nd3B+RlaxQJBmx8luULWLLPqxjZ769S/UQe1svPUi6M+D5DzN5a2athyHX9H6f43VIjE3yMTbqrlbB5l3OYgU+ssL7X+rtc+2Nj7AD5vwRkk"
s=s+"SCyAoFvvg6/FaiZIIuHbGv9DRxEuQeRjC2FkKH/pvRcs4+b+4MFgH+mmISDIhrHN0dqI5uIjRLGYbOJp2YnRRihAaIsQYiRXIdFVKsSImRKiegOKUYIpxZiwg2MsWokxpjF"
s=s+"Gs7UY4vxvNmWSKwAEHoRjrHRFMZkToMd3HqOcf4lRBN1IKLMg4vGzjnHeRUeY+yNj5GeIkhpJSFkpF+RKKZFoRj9I6PcZJKSElBIGUUR44ljkBJCT0gI1RclZIeN0YZLRal"
s=s+"RKqLsq5XRslhIiWUqY0S1l9HCV8YyyEWB8SuYpHiQEiJIAAkpKJmk4QoX8pJFE3zSKCQEA="
.Images(s)
s="gBJJgBAICAAGAAEAAQhYAf8Pf4hh0QihCJo2AEZjQAjEZFEaIEaEEaAIAkcbk0olUrlktl0vmExmUzmk1m03nE5nU7nk9n0/oFBoVDolFo1HpFJpVLplNp1PqFRqVTqlVq1XrF"
s=s+"ZrVbrldr1fsFhsVjslls1ntFptVrtltt1vuFxuVzul1u13vF5vV7vl9v1/wGBwWDwmFw2HxGJxWLxmNx2PyGRyWTymVy2XzGZzWbzmdz2f0Gh0WjwEWH0r08ekEikgAkso184iG"
s=s+"kicPjcU2+zjW43e6jO8jL+b79X8bfif48bfAffgP43IT8b4XE3O23vW3++2r/6vcjUB"
.Images(s)

*!*		.DrawGridLines = -1
*!*		.BackColor = RGB(255,255,255)
*!*		.MarkSearchColumn = .F.
*!*		.ShowFocusRect = .F.
*!*		.HasLines = .F.
*!*		.Indent = 24
*!*		.DefaultItemHeight = 20
*!*		.AllowChartScrollPage = .T.
*!*		.ScrollPartCaption(2,2048) = "&lt;img&gt;4&lt;/img&gt;"
*!*		.ScrollPartCaption(2,32) = "&lt;img&gt;5&lt;/img&gt;"
*!*		   WITH .VisualAppearance
*!*			.Add(1,"gBFLBCJwBAEHhEJAEGg4BOEIQAAYAQGKIYBkAKBQAGaAoDDMOILQiMQxDPBMKgBBCLIxiGK4DhiGoZQ0HKCRZDeI4DDSNcgjCLIZw8GYCIRjaL5UkPGSZJpmSRwAiWPIpSrLMrgLLMdR1HCBaQiehoaiEMg1CTTVQSCKoYSjBKqarjGbKGoqSozUxNMAggI=")
*!*			.Add(2,"XP: Header 1 1")
*!*		   ENDWITH
*!*				.HTMLPicture("excel") = "gAAAABgYAEAgBEChSohIAC0KFEKEEKIEKgkNhQAAkZjkCgkejshkUjkklk0nlEplUrlRofQSADbMhEABwl8xmYAI0KaoPawANgYYwAeIDIIARE3mU0A08n1AoVEo1IBVDYrjo7NrFQoaoqoAK5+IYAXE3N1iAB2tCcfcwQFosswpsCns/fDVmlBobQm4GHVMi0KJQBBcceE3VAscJ3XgADAAucFgWDwt1ADNVa6bgUtoAcxSxeWxuPyMfAGUjhwfkwGmdQ5kxbXAL/f+jyGByeEjhQzrwEJ1OOy2m20uC3SszpvE/A4m40+6TfLOOqmEZSBCCYAu80jLY35xjPCf/UyU1zocYECGmrxzDOxxKAmOJx2m0aGdOgl4HX7PNkDcsK8iMnQzoNmCOQ4v88rUCI9jlOYxzbv+57Cui4EBIU/jtLwjg1mBBCMjgYjsvIbgjsW20NO2ABIPYFj2RamEYgAW4PnMO4ICQxb6n+UD2DsE0IMfEJ+phFZMAeoYBIVJaOw0kQwPY2wuSK9r3iA+T6PqYD2MTFEIuLACayqzDNG49gyROO4QhkIoACsESKhxKpsTiAB4PYVgOGOjSFAYWShkKEiKkoaChipKpMhOioMUAAAbhEo6NoFP6hgiECj0qAB7Uwjk9T5TQ2A3Ph4A1PhYI+KtBgAcEqj9VdBIqjLTGJKo3BsipVzsWE6TsOEq0mABcz2AFapgAhYqGdliGhKoXUWAB6WJYc+E4HiK2MAFPz6gVroqBznNMZAJz4UwFiEABnXVdd2Xbd133heN5Xnel63oHwo3zfV935ft83gHxAYFgeCYLgxACjgGD4Xg+E3fgOBX9iV84jhWI4IKOI4phGN4Ri2EYxjWM45kePYfgd/ZJkWUY/kuQZJfmWZPi+UZXlWK5nmF9ZvneKj4H2f6DoGh6Fl2UY7hOiaVoWg5do2WZ/hmB5/iekGdoGD6VoGnZDn2A6ZrGg6pruaY9rGlkBoJAa3quoa/om06HuOuZriusbiPm8bOPm6bLhOo4FvOhanfG27tvO071wGt7Jl+PajwWl7fvvHaTvOlbXtW2X6H138huWBblwGDYhhHO6vxGpbv0mI9OZ2wdhoeY9D012cl2PU4LfHXXj0upYGH3ed73/dXt4Pj+R5PkXfHkeH8hXnoF6IAen6voev6XseolnuJW0wBoUA6FAf6IP+iH/oj+gI="
*!*				.HTMLPicture("word") = "gAAAABgYAEAgBEChSohIAC0KFEKEEKIEKgkNhQAAkZjkCgkejshkUjkklk0nlEplUrlRofQSADbMhEABwl8xmYAI0KaoPawANgYYwAeIDIIARE3mU0A08n1AoVEo1IBVDYrjo7NrFQoaoqoAK5+IYAXE3N1iAB2tCcfcwQFosswpsCns/fDVmlBobQm4GHVMi0KPwCDMceE3VAscJ3NQBCYAucFgWDwt1ADNVa6bgUtoAcxSxeWxuPyMfAGUjhwfkwGmdQ5kxa1AL/f+jyGByeEjhQzrwEJ1OOy2m20uC3SszpvE/A4m40+6TfLOOqmEZGBux93mkZbG/OMZ4T/6mSmudDjAgQ01YADDDOxxKAmOJx2m0aGdOgl4HXx/NkDcsK8aMnQzoNmCOQ4v88jUCI9blOYxzbv+57Cui4EBIU/gAO0jg1mBBCMjwYTHvGbgjsW20NQ4SD1hY9cWJhGAAFuD5zDuCAkMW+p/lA9Y7BNCDHoyOB+phDhMAeoYBIVJaOw0kQwPW2wuSK9j3DiID5Po+pgPWxMUQi4sAJrKrMM0bhkqGDQQoqEIZCKAArBEiocSqbE5gAeD1nRNKNIUBhZKGQoSIqKB7KGKkqkyE6KgxQIABuESjo2gVAKGCIQKPSwAHtTKOT4odNjwfqhn4fihgAAaBCrQgAHBKoSHxNU2TImFKAAe8+gohRaTwWE7Twb88VvXKhmJKoYVoFFZAAaEqhdRgABhZligATgeIrY6YVBPyBWwioIOc0wwWYUwFiEABnXVdd2Xbd133heN5Xnel63oHxjXzfV935ft83gHxAYFgeCYLgxAGNgGD4Xg+E3fgOGYjgWHXdiGJX7geKXbi2JYXjV2Ytf2RGNjOFY7hmP3XkOR4xieTZPhpnBbmWaZnm2amdlmSZdnGb59mWYYTmeO5nnWS6BmxAZvgegZPoRnEBmmo5tnei5Zo4W6VpGaYhpuO6fqee6hrV84nluEXVrOf6pqeCX1hGy5doet7UZ2A6ts23axqW+bnrOM7juO0Z9rW65vwOC53tGxbXr24YEH136HiXJ7NfOQ8jtOO8dfeIGNzPGdDheA8/dvG7X0fS3njmOh90F5dZiXX9h13a9t2/a3fHcdn8hXeoF34AeD4ffeL4HjeElnlJW01VIEA6FAf34P9+H/fj+gIA=="

*!*	.SelBackColor = 16777216
*!*	.SelForeColor = RGB(0,0,128)
**'Uncomment it if you are running Windows XP
** .BackColorHeader = 33554432
WITH .Chart
	.LevelCount = 2
			*!*		.AllowCreateBar = .F.
			*!*		.NonworkingDaysColor = RGB(196,196,128)
			*!*		.NonworkingDaysPattern = 6
			*!*		.BackColor = RGB(255,255,255)
					.DrawGridLines = 2
					.drawGridLines = -1
			*!*		WITH .Bars.Add("End")
			*!*			.Pattern = 2
			*!*			.Color = RGB(255,128,128)
			*!*		ENDWITH
	
	
			*!*		exYear         0  Indicates the year. Values: ..., 2001, 2002, 2003, ...
			*!*	    exHalfYear     1  A date between January 1st and June 31 indicates the first half of the year, and from July 1 to December 31, indicates the second half of the year. Values: 1 and 2
			*!*	    exQuarterYear  2  A date between January 1st and March 31 indicates the first quarter of the year, a date between April 1st and June 30 indicates the second quarter of the year, a date between July 1st and September 30 indicates the third quarter of the year, and if a date between October 1st and December 31 indicates the forth quarter of the year. Values: 1, 2, 3 and 4
			*!*	    exMonth       16  Indicates the month. Values: 1 ( January ), 2 ( February ), ..., and 12 ( December ). Use the MonthNames property to specify the name of the months.
			*!*	    exThirdMonth  17  The first ten days in a month indicates the first third of the month, the next 10 days indicates the second third of the month, and the last 10 days in the month indicates the last third of the month. Values: 1, 2 and 3.
			*!*	    exWeek        256  Indicates the week in the year. Values: 1,2,...,53. Use the WeekDays property to specify the name of the days in the week.
			*!*	    exDay         4096  Indicates the day of the date. Values: 1,2,..,31
			*!*	    exHour        65536  Indicates the hour.
			*!*	    exMinute      1048576  Indicates the minute.
			*!*	    exSecond      16777216  Indicates the second.

		.Label(0) = ""  &amp;&amp; exYear
		.Label(1) = ""  &amp;&amp; exHalfYear
		.Label(2) = ""  &amp;&amp; exQuarterYear
		.Label(16) = ""  &amp;&amp; exMonth
		.Label(17) = ""  &amp;&amp; exThirdMonth
	.Label(256) = ""  &amp;&amp; exWeek
	.Label(4096  ) = ""  &amp;&amp; exDay
	.Label(65536  ) = ""  &amp;&amp; exHour
		.Label(1048576) = ""  &amp;&amp; exMinute
		.Label(16777216) = ""  &amp;&amp; exSecond
		*!*		.OverviewBackColor = RGB(255,255,255)
		*!*		.OverviewVisible = .T.
		*!*		.AllowOverviewZoom = 1
	***.OverviewZoomCaption = "Year|  ?Year|  ?Year|&lt;img&gt;3&lt;/img&gt;|Third|&lt;img&gt;2&lt;/img&gt;|&lt;img&gt;1&lt;/img&gt;|Hour|Min|Sec"
**	.OverviewZoomCaption =    "Year|1\2Year|1\4Year|&lt;img&gt;11&lt;/img&gt;|Third|&lt;img&gt;11&lt;/img&gt;|&lt;img&gt;10&lt;/img&gt;|&lt;img&gt;9&lt;/img&gt;|Min|Sec"  &amp;&amp; çäåñü ïîêàçàíû äåí (ñ ÷àñàìè), íåäåëÿ, ìåñÿö
		.OverviewZoomCaption =    "Year|1\2Year|1\4Year|Month|Third|Week|Day|&lt;img&gt;9&lt;/img&gt;|Min|Sec"
	.OverviewZoomUnit = 24
	.LevelCount = 2
	.Level(0).Label = "&lt;%dddd%&gt;,&lt;b&gt;&lt;%dd%&gt;,&lt;b&gt;&lt;%mmmm%&gt;,&lt;%yyyy%&gt;"
	.Level(0).Unit = 4096
	.Level(0).Alignment = 1
	.Level(1).Label = "&lt;%hh%&gt;"
	.Level(1).Unit = 65536
	.Level(0).Alignment = 1
	.FirstVisibleDate = CTOT(DTOC(DATE())+ ' 08:30:00')&amp;&amp;DATETIME()
.UnitWidth = 45 &amp;&amp;.PaneWidth(1)/20
* .UnitScale  = 1048576
.NonworkingHours = 512+256+128+64+32+16+8+4+2+1+ 8388608  &amp;&amp; íåðàáî÷èå ÷àñû èíñòðóêòîðîâ
.DrawDateTicker = .t.
.SelectDate(.FirstVisibleDate)
*.Zoom(.FirstVisibleDate, .NextDate(.FirstVisibleDate,4096)) &amp;&amp;256)) - ñëåä ìåñÿö &amp;&amp; 4096 - ñëåä äåíü )) &amp;&amp; áûëî 16 - ìåñÿö
ENDWITH
.EndUpdate
ENDWITH


ENDPROC
PROCEDURE Init
LPARAMETERS	tnScrFrmID
DODEFAULT(tnScrFrmID)
this.resuparent = VAL(oRes.GetParam([SET],[PARENT_INSTR]))
*thisform.command1.click()
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1>Class</reserved1>
		<reserved2>2</reserved2>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6>Pixels</reserved6>
		<reserved7>Ïðîñìîòð ðàáîòû èíñòðóêòîðîâ</reserved7>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2820NUUK3</uniqueid>
		<timestamp>929788694</timestamp>
		<class>cmd</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd3</objname>
		<parent>frmresuinstrview</parent>
		<properties>Top = 564
Left = 156
Height = 25
Width = 108
FontBold = .T.
Caption = "Îïëàòèòü"
ForeColor = 0,0,160
Name = "Cmd3"
</properties>
		<protected/>
		<methods>PROCEDURE Click
**thisform.grdpartres.HandleMsg("PAYORD")
With thisform.g2ANTT1
IF .lnbarid =0
	MESSAGEBOX('Âûáåðèòå ñ÷åò äëÿ îïëàòû',0+48,'Íå âûáðàí ñ÷åò',3000)
ENDIF
*!*	LOCAL luRes, lstr, datestart, dateend,lcNameBar ,stringWk
*!*	luResAdding  =.f.
*!*	PUBLIC barCltName, test1, typeTvr
SELECT rv_ResursJrn
LOCATE ALL FOR rv_ResursJrn.JrnUseId = .lnbarid
IF FOUND()
LOCAL nPayVarNum , lnFrmID ,lRetVal
nPayVarNum = ALLT(oRes.GetParam([RST],[PAYTYPE]))
		*16.09.2007 18:10 -&gt;Îïëàòà ñ÷åòà êëèåíòà
		lnFrmID = rv_ResursJrn.FrmID
		lRetVal = oApp.DoModalFormRetValObj([FrmPayment;rst_v1.vcx],lnFrmID,nPayVarNum,1 ,0)
		*------------------------------------------------------------------------------
*!*		    ThisForm.grdDocsView._RSRequeryOne(lnFrmID)
ENDIF
EndWith

retu


ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>COMMENT</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>0</timestamp>
		<class/>
		<classloc/>
		<baseclass/>
		<objname>frmresuinstrview</objname>
		<parent/>
		<properties>Arial, 0, 9, 5, 15, 12, 32, 3, 0
Arial, 1, 10, 6, 16, 13, 34, 3, 0
Arial, 1, 9, 6, 15, 12, 32, 3, 0
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1RI0UZZE6</uniqueid>
		<timestamp>951750843</timestamp>
		<class>frmprimarydocview</class>
		<classloc>primarydoc_v1.vcx</classloc>
		<baseclass>form</baseclass>
		<objname>frmaccountingview</objname>
		<parent/>
		<properties>DoCreate = .T.
Name = "frmaccountingview"
cstmsghandler.Name = "cstmsghandler"
cstresizable.Name = "cstresizable"
Img1.Name = "Img1"
CmdFlt.Name = "CmdFlt"
GrdDocsView.Column1.Header1.Name = "Header1"
GrdDocsView.Column1.Text1.Name = "Text1"
GrdDocsView.Column1.Name = "Column1"
GrdDocsView.Column2.Header1.Name = "Header1"
GrdDocsView.Column2.Name = "Column2"
GrdDocsView.Column3.Header1.Name = "Header1"
GrdDocsView.Column3.Text1.Name = "Text1"
GrdDocsView.Column3.Name = "Column3"
GrdDocsView.Column4.Header1.Name = "Header1"
GrdDocsView.Column4.Text1.Name = "Text1"
GrdDocsView.Column4.Name = "Column4"
GrdDocsView.Column5.Header1.Name = "Header1"
GrdDocsView.Column5.Text1.Name = "Text1"
GrdDocsView.Column5.Name = "Column5"
GrdDocsView.Column6.Header1.Caption = "Êàëüêóëÿöèÿ"
GrdDocsView.Column6.Header1.Name = "Header1"
GrdDocsView.Column6.Text1.ControlSource = "PrimaryDocView.TvrNM"
GrdDocsView.Column6.Text1.Name = "Text1"
GrdDocsView.Column6.ControlSource = "PrimaryDocView.TvrNM"
GrdDocsView.Column6.Name = "Column6"
GrdDocsView.Column7.Header1.Name = "Header1"
GrdDocsView.Column7.Text1.Name = "Text1"
GrdDocsView.Column7.Name = "Column7"
GrdDocsView.Column8.Header1.Caption = "Ñåáåñòîèìîñòü"
GrdDocsView.Column8.Header1.Name = "Header1"
GrdDocsView.Column8.Text1.Name = "Text1"
GrdDocsView.Column8.Name = "Column8"
GrdDocsView.Column9.Header1.Name = "Header1"
GrdDocsView.Column9.Text1.Name = "Text1"
GrdDocsView.Column9.Name = "Column9"
GrdDocsView.Column10.Header1.Name = "Header1"
GrdDocsView.Column10.Text1.Name = "Text1"
GrdDocsView.Column10.Name = "Column10"
GrdDocsView.Left = 5
GrdDocsView.Width = 690
GrdDocsView._handledstandartmsglist = FIRST;PREV;NEXT;LAST;;;EDIT;INFO;DELE;;COPY;;PRNDOC;PRNREP;MARK
GrdDocsView.Name = "GrdDocsView"
math.Name = "math"
Cntfrmstatusinfo1.ShpFrmStatusInfo.Name = "ShpFrmStatusInfo"
Cntfrmstatusinfo1.lblStatusID.Name = "lblStatusID"
Cntfrmstatusinfo1.shpStatusID1.Name = "shpStatusID1"
Cntfrmstatusinfo1.lblStatusID1.Name = "lblStatusID1"
Cntfrmstatusinfo1.shpStatusID2.Name = "shpStatusID2"
Cntfrmstatusinfo1.lblStatusID2.Name = "lblStatusID2"
Cntfrmstatusinfo1.shpStatusID3.Name = "shpStatusID3"
Cntfrmstatusinfo1.lblStatusID3.Name = "lblStatusID3"
Cntfrmstatusinfo1.shpStatusID4.Name = "shpStatusID4"
Cntfrmstatusinfo1.lblStatusID4.Name = "lblStatusID4"
Cntfrmstatusinfo1.Name = "Cntfrmstatusinfo1"
cntSum.Shp2.Top = 1
cntSum.Shp2.Left = 0
cntSum.Shp2.Height = 31
cntSum.Shp2.Width = 345
cntSum.Shp2.Name = "Shp2"
cntSum.lblDocumentCountCaption.Name = "lblDocumentCountCaption"
cntSum.txtDocumentCount.Height = 21
cntSum.txtDocumentCount.Left = 2
cntSum.txtDocumentCount.Top = -3
cntSum.txtDocumentCount.Width = 682
cntSum.txtDocumentCount.Name = "txtDocumentCount"
cntSum.txtDocumentSum.Enabled = .F.
cntSum.txtDocumentSum.Left = 89
cntSum.txtDocumentSum.Top = 24
cntSum.txtDocumentSum.Visible = .F.
cntSum.txtDocumentSum.Name = "txtDocumentSum"
cntSum.txtDocumentVatSum.Enabled = .F.
cntSum.txtDocumentVatSum.Left = 89
cntSum.txtDocumentVatSum.Top = 22
cntSum.txtDocumentVatSum.Visible = .F.
cntSum.txtDocumentVatSum.Name = "txtDocumentVatSum"
cntSum.txtDocumentCountMark.Name = "txtDocumentCountMark"
cntSum.txtDocumentVatSumMark.Enabled = .F.
cntSum.txtDocumentVatSumMark.Left = 218
cntSum.txtDocumentVatSumMark.Top = 22
cntSum.txtDocumentVatSumMark.Visible = .F.
cntSum.txtDocumentVatSumMark.Name = "txtDocumentVatSumMark"
cntSum.Lbl1.Name = "Lbl1"
cntSum.txtDocumentSumMark.Enabled = .F.
cntSum.txtDocumentSumMark.Left = 218
cntSum.txtDocumentSumMark.Top = 24
cntSum.txtDocumentSumMark.Visible = .F.
cntSum.txtDocumentSumMark.Name = "txtDocumentSumMark"
cntSum.Top = 220
cntSum.Left = 12
cntSum.Width = 683
cntSum.Height = 17
cntSum.Name = "cntSum"
</properties>
		<protected/>
		<methods>PROCEDURE GrdDocsView._add
*-------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: GRDDOCSVIEW._ADD
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Äîáàâëåíèå äîêóìåíòà.
*-------------------------------------------------------

*12.05.2004 03:25 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	luResAdding
*------------------------------------------------------------------------------

*12.05.2004 03:26 -&gt;Âûïîëíÿåì îïåðàöèþ äîáàâëåíèÿ äîêóìåíòà
luResAdding = oMgrPD.Operate([FORM],[ADD],ThisForm.nScrFrmID)
*------------------------------------------------------------------------------

*12.05.2004 03:26 -&gt;Îáðàáàòûâàåì ðåçóëüòàò äîáàâëåíèÿ
IF TYPE([luResAdding])==[N] AND !EMPTY(luResAdding)
	
		LOCAL luResultAdding
		*express_add = .t.
		DO WHILE TYPE('luResAdding')=[N] AND luResAdding &lt;&gt;0
luResultAdding = oMgrPD.Operate([PARTCLC],[ADD],luResAdding )
IF TYPE('luResultAdding')&lt;&gt;[N] OR luResultAdding =0
EXIT
ENDIF
		ENDDO


	*22.12.2004 15:16 -&gt;Îáíîâëÿåì çàïèñü
	This._RSRequeryOne(luResAdding)
	*------------------------------------------------------------------------------

ENDIF
*------------------------------------------------------------------------------

************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************
ENDPROC
PROCEDURE GrdDocsView._refreshrelatedobjects
ThisForm.GrdPart._RSRequery(PrimaryDocView.FrmID)
ENDPROC
PROCEDURE GrdDocsView._rsrequery
*19.08.2005 17:16 -&gt;Âûïîëíèì ìåòîä ðîäèòåëüñêîãî êëàññà
WITH This

*21.04.2004 14:37 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	lcUniqueName, ;
		lcUniqueFilePath, ;
		lcOldAlias, ;
		lcOldTalk, ;
		lnCount, ;
		lnSum, ;
		lnVatSum
***
lcOldAlias = ALIAS()
lcOldTalk  = SET([TALK])
***
SET TALK OFF
*------------------------------------------------------------------------------

*21.04.2004 14:33 -&gt;Ñîõðàíèì äàííûå î RecordSource
.SourceKeep()
*------------------------------------------------------------------------------

*21.04.2004 14:33 -&gt;Îòêëþ÷èì RecordSource
.SourceReset()
*------------------------------------------------------------------------------

*21.04.2004 14:34 -&gt;Çàêðîåì Alias è óäàëèì âðåìåííóþ òàáëèöó
lcUniqueFilePath = DBF([PrimaryDocView])
***
USE IN PrimaryDocView
***
IF FILE(lcUniqueFilePath)
	ERASE (lcUniqueFilePath)
ENDIF
*------------------------------------------------------------------------------

*21.04.2004 14:05 -&gt;Âûïîëíèì õðàíèìóþ ïðîöåäóðó äëÿ ïîëó÷åíèÿ ïóñòîé òàáëèöû
lcUniqueName = spAccountingView([BYFILTER],ThisForm.nScrFrmID,ThisForm.cQryParSID)
*------------------------------------------------------------------------------

*21.04.2004 14:08 -&gt;Òåïåðü îòêðîåì äàííûé Alias
USE (lcUniqueName) IN 0 ALIAS PrimaryDocView
CURSORSETPROP([BUFFERING],3,[PrimaryDocView])
*------------------------------------------------------------------------------

*21.04.2004 14:33 -&gt;Âîññòàíàâëèâàåì RecordSource
.SourceRecall()
*------------------------------------------------------------------------------

ENDWITH

*19.08.2005 17:18 -&gt;Ïîäñ÷èòàåì ñóììû
ThisForm.TotalInfo()
*------------------------------------------------------------------------------

*19.08.2005 17:22 -&gt;Âîññòàíîâèì íàñòðîéêè
SET TALK &amp;lcOldTalk
*------------------------------------------------------------------------------

*19.08.2005 17:23 -&gt;Âîññòàíîâèì òåêóùèé Alias
*!*	IF !EMPTY(lcOldAlias) AND USED(lcOldAlias) AND lcOldAlias#ALIAS()
*!*		SELECT(lcOldAlias)
*!*	ENDIF
*------------------------------------------------------------------------------
SELECT PrimaryDocView
this.SetFocus()

************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************
ENDPROC
PROCEDURE GrdDocsView._rsrequeryone
LPARAMETERS tnFrmID,tlNoRefreshRelatedObjects

*19.08.2005 17:16 -&gt;Âûïîëíèì ìåòîä ðîäèòåëüñêîãî êëàññà
*22.12.2004 15:10 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	lcOldAlias, ;
		lcUniqueFileName, ;
		llOldRefreshRelatedObjectsOnRSRecNoChange
LOCAL ARRAY laReplaceArray[1]
***
lcOldAlias = ALIAS()
*------------------------------------------------------------------------------

*12.05.2004 03:27 -&gt;Âûïîëíÿåì çàïðîñ ñòðîêè
lcUniqueFileName = spAccountingView([BYFRMID],ThisForm.nScrFrmID,tnFrmID)
*------------------------------------------------------------------------------

*22.12.2004 15:47 -&gt;Åñëè óêàçàí ôëàã "Íå îáíîâëÿòü ñâÿçàííûå îáúåêòû" - çàáëîêèðóåì îáíîâëåíèå
IF tlNoRefreshRelatedObjects
	llOldRefreshRelatedObjectsOnRSRecNoChange = This._RefreshRelatedObjectsOnRSRecNoChange
	This._RefreshRelatedObjectsOnRSRecNoChange = .F.
ENDIF
*------------------------------------------------------------------------------

*12.05.2004 03:35 -&gt;Îòêëþ÷àåì èñòî÷íèê äàííûõ
This.SourceKeep()
This.SourceReset()
*------------------------------------------------------------------------------

*22.12.2004 15:05 -&gt;Äîáàâëÿåì/îáíîâëÿåì/óäàëÿåì çàïèñü
USE (lcUniqueFileName) IN 0 ALIAS PrimaryDocViewReq
SELECT PrimaryDocViewReq
***
IF RECCOUNT([PrimaryDocViewReq]) == 1

	*22.12.2004 15:10 -&gt;Îáíîâëÿåì çàïèñü
	SCATTER TO laReplaceArray
	SELECT PrimaryDocView
	LOCATE FOR PrimaryDocView.FrmID = tnFrmID
	IF !FOUND()
		APPEND BLANK IN PrimaryDocView
	ENDIF
	GATHER FROM laReplaceArray
	TABLEUPDATE(.T.)
	*------------------------------------------------------------------------------
	
ELSE

	SELECT PrimaryDocView
	LOCATE FOR PrimaryDocView.FrmID = tnFrmID
	IF FOUND()
		*22.12.2004 15:11 -&gt;Óäàëÿåì çàïèñü
		DELETE IN PrimaryDocView
		TABLEUPDATE(.T.)
		*------------------------------------------------------------------------------
	ENDIF
	
ENDIF
*------------------------------------------------------------------------------

*12.05.2004 03:37 -&gt;Âîññòàíàâëèâàåì èñòî÷íèê äàííûõ
This.SourceRecall()
*------------------------------------------------------------------------------

*22.12.2004 15:09 -&gt;Óäàëÿåì ðåçóëüòàò çàïðîñà
USE IN PrimaryDocViewReq
ERASE ([tmp\]+lcUniqueFileName+[.dbf])
*------------------------------------------------------------------------------

*22.12.2004 15:35 -&gt;Âîññòàíîâèì òåêóùèé Alias
IF !EMPTY(lcOldAlias) AND USED(lcOldAlias) AND lcOldAlias#ALIAS()
	SELECT(lcOldAlias)
ENDIF
*------------------------------------------------------------------------------

*22.12.2004 15:47 -&gt;Åñëè óêàçàí ôëàã "Íå îáíîâëÿòü ñâÿçàííûå îáúåêòû" - ðàçáëîêèðóåì îáíîâëåíèå
IF tlNoRefreshRelatedObjects
	This._RefreshRelatedObjectsOnRSRecNoChange = llOldRefreshRelatedObjectsOnRSRecNoChange
ENDIF
*------------------------------------------------------------------------------

*19.08.2005 17:17 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	lcOldAlias, ;
		lcOldTalk, ;
		lnCount, ;
		lnSum, ;
		lnVatSum
***
lcOldAlias = ALIAS()
lcOldTalk  = SET([TALK])
***
SET TALK OFF
*------------------------------------------------------------------------------

*19.08.2005 17:18 -&gt;Ïîäñ÷èòàåì ñóììû
ThisForm.TotalInfo()
*------------------------------------------------------------------------------

*19.08.2005 17:22 -&gt;Âîññòàíîâèì íàñòðîéêè
SET TALK &amp;lcOldTalk
*------------------------------------------------------------------------------

*19.08.2005 17:23 -&gt;Âîññòàíîâèì òåêóùèé Alias
IF !EMPTY(lcOldAlias) AND USED(lcOldAlias) AND lcOldAlias#ALIAS()
	SELECT(lcOldAlias)
ENDIF


************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************
ENDPROC
PROCEDURE Load
*-------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: .LOAD
* Called by.......: &lt;Sys Event&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Îòêðûòèå LV äëÿ Grid-à ñ ñîäåðæàíèåì äîêóìåíòà (òîâàðíûì)
*-------------------------------------------------------
*15.06.2006 13:49 -&gt; Âûïîëíèì ìåòîä ðîäèòåëüñêîãî êëàññà
Frm::Load()
*------------------------------------------------------------------------------

*21.04.2004 14:06 -&gt; Îòêðîåì ÁÄ
IF !DBUSED([BASIS])
	OPEN DATABASE BASIS
ENDIF
SET DATABASE TO BASIS	
*------------------------------------------------------------------------------

*******************************************************************************
* Çàãðóçèì ïóñòîé Alias äëÿ ïðîñìîòðà äîêóìåíòîâ                              *
*******************************************************************************

*02.12.2004 16:59 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	lcUniqueName
*------------------------------------------------------------------------------

*21.04.2004 14:05 -&gt;Âûïîëíèì õðàíèìóþ ïðîöåäóðó äëÿ ïîëó÷åíèÿ ïóñòîé òàáëèöû
lcUniqueName = spAccountingView([NODATA])
*------------------------------------------------------------------------------

*21.04.2004 14:08 -&gt;Òåïåðü îòêðîåì äàííûé Alias
USE (lcUniqueName) IN 0 ALIAS PrimaryDocView
CURSORSETPROP([BUFFERING],3,[PrimaryDocView])
*------------------------------------------------------------------------------

*****************************************************************************
* Çàãðóçèì ïóñòîé Alias äëÿ ïðîñìîòðà íîã äîêóìåíòîâ						*
*****************************************************************************

*21.04.2004 14:05 -&gt;Âûïîëíèì õðàíèìóþ ïðîöåäóðó äëÿ ïîëó÷åíèÿ ïóñòîé òàáëèöû
lcUniqueName = spFrmPartTvrView([NODATA])
*------------------------------------------------------------------------------

*21.04.2004 14:08 -&gt;Òåïåðü îòêðîåì äàííûé Alias
USE (lcUniqueName) IN 0 ALIAS FrmPartTvrView
CURSORSETPROP([BUFFERING],3,[FrmPartTvrView])
*------------------------------------------------------------------------------

************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************
ENDPROC
PROCEDURE Unload
*-------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: .UnLoad
* Called by.......: &lt;Sys Event&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: &lt;sysevent&gt; Âûãðóçêà ôîðìû
*-------------------------------------------------------

*21.07.2004 16:27 -&gt; Âûïîëíèì ìåòîä ðîäèòåëüñêîãî êëàññà
DODEFAULT()

*****************************************************************************
* Çàêðîåì Alias äëÿ ïðîñìîòðà òîâàðíûõ ïîçèöèé äîêóìåíòîâ è óäàëèì âðåìåííóþ*
* òàáëèöó                                                                   *
*****************************************************************************

*21.07.2004 16:27 -&gt; Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	lcUniqueFilePath
*------------------------------------------------------------------------------

*21.07.2004 16:27 -&gt; Çàêðîåì Alias è óäàëèì âðåìåííóþ òàáëèöó
lcUniqueFilePath = DBF([FrmPartTvrView])   &amp;&amp;
***
USE IN FrmPartTvrView  &amp;&amp;
***
IF FILE(lcUniqueFilePath)
	ERASE (lcUniqueFilePath)
ENDIF
*RELEASE is_calc
*------------------------------------------------------------------------------

************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1>Class</reserved1>
		<reserved2>3</reserved2>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6>Pixels</reserved6>
		<reserved7>ïðîñìîòð êàëüêóëÿöèé - íîðìàòèâîâ</reserved7>
		<reserved8>..\include\qryparparobjtypes.h</reserved8>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1RI17P3A6</uniqueid>
		<timestamp>951750843</timestamp>
		<class>grdparttvr</class>
		<classloc>primarydoc_v1.vcx</classloc>
		<baseclass>grid</baseclass>
		<objname>grdPart</objname>
		<parent>frmaccountingview</parent>
		<properties>Height = 201
Left = 5
Panel = 1
Top = 238
Width = 690
Name = "grdPart"
Column1.Header1.Caption = "Èíãðàäèåíò"
Column1.Header1.Name = "Header1"
Column1.Text1.Name = "Text1"
Column1.Width = 120
Column1.Name = "Column1"
Column2.Header1.Caption = "Áðóòòî"
Column2.Header1.Name = "Header1"
Column2.Text1.Name = "Text1"
Column2.Width = 50
Column2.Name = "Column2"
Column3.Header1.Name = "Header1"
Column3.Text1.Name = "Text1"
Column3.ColumnOrder = 4
Column3.Width = 50
Column3.Name = "Column3"
Column4.Header1.Name = "Header1"
Column4.Text1.Name = "Text1"
Column4.ColumnOrder = 5
Column4.Name = "Column4"
Column5.Header1.Caption = "Íåòòî "
Column5.Header1.Name = "Header1"
Column5.Text1.ControlSource = "FrmPartTvrView.TvrQntNett"
Column5.Text1.Name = "Text1"
Column5.ColumnOrder = 3
Column5.ControlSource = "FrmPartTvrView.TvrQntNett"
Column5.Width = 60
Column5.Name = "Column5"
Column6.Header1.Name = "Header1"
Column6.Text1.Name = "Text1"
Column6.Name = "Column6"
Column7.Header1.Name = "Header1"
Column7.Text1.Name = "Text1"
Column7.Name = "Column7"
COLUMN8.Header1.Name = "Header1"
COLUMN8.Text1.Name = "Text1"
COLUMN8.Name = "COLUMN8"
COLUMN9.Header1.Name = "Header1"
COLUMN9.Text1.Name = "Text1"
COLUMN9.Name = "COLUMN9"
</properties>
		<protected/>
		<methods>PROCEDURE _rsrequeryone
LPARAMETERS tnFrmPartTvrID
DODEFAULT(tnFrmPartTvrID)
ThisForm.GrdDocsView._RSRequeryOne(This.nFrmID,.T.)
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1RI0UZZF0</uniqueid>
		<timestamp>0</timestamp>
		<class>txtgrd</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>Text1</objname>
		<parent>frmaccountingview.GrdDocsView.Column2</parent>
		<properties>BorderStyle = 0
Margin = 0
ForeColor = 0,0,0
BackColor = 255,255,255
Name = "Text1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>COMMENT</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>0</timestamp>
		<class/>
		<classloc/>
		<baseclass/>
		<objname>frmaccountingview</objname>
		<parent/>
		<properties>Arial, 0, 9, 5, 15, 12, 32, 3, 0
Arial, 1, 8, 5, 14, 11, 29, 3, 0
Arial, 0, 8, 5, 14, 11, 29, 3, 0
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1></reserved1>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1E317DF85</uniqueid>
		<timestamp>953776315</timestamp>
		<class>frmprimarydocview</class>
		<classloc>primarydoc_v1.vcx</classloc>
		<baseclass>form</baseclass>
		<objname>frmprimarydocviewfrm</objname>
		<parent/>
		<properties>Top = 0
Left = 2
DoCreate = .T.
Name = "frmprimarydocviewfrm"
cstmsghandler.Name = "cstmsghandler"
cstresizable.Name = "cstresizable"
Img1.Name = "Img1"
CmdFlt.Name = "CmdFlt"
GrdDocsView.Column1.Header1.Name = "Header1"
GrdDocsView.Column1.Text1.Name = "Text1"
GrdDocsView.Column1.Name = "Column1"
GrdDocsView.Column2.Header1.Name = "Header1"
GrdDocsView.Column2.Name = "Column2"
GrdDocsView.Column3.Header1.Name = "Header1"
GrdDocsView.Column3.Text1.Name = "Text1"
GrdDocsView.Column3.Name = "Column3"
GrdDocsView.Column4.Header1.Name = "Header1"
GrdDocsView.Column4.Text1.Name = "Text1"
GrdDocsView.Column4.Name = "Column4"
GrdDocsView.Column5.Header1.Name = "Header1"
GrdDocsView.Column5.Text1.Name = "Text1"
GrdDocsView.Column5.Name = "Column5"
GrdDocsView.Column6.Header1.Name = "Header1"
GrdDocsView.Column6.Text1.Name = "Text1"
GrdDocsView.Column6.Name = "Column6"
GrdDocsView.Column7.Header1.Name = "Header1"
GrdDocsView.Column7.Text1.Name = "Text1"
GrdDocsView.Column7.Name = "Column7"
GrdDocsView.Column8.Header1.Name = "Header1"
GrdDocsView.Column8.Text1.Name = "Text1"
GrdDocsView.Column8.Name = "Column8"
GrdDocsView.Column9.Header1.Name = "Header1"
GrdDocsView.Column9.Text1.Name = "Text1"
GrdDocsView.Column9.Name = "Column9"
GrdDocsView.Column10.Header1.Name = "Header1"
GrdDocsView.Column10.Text1.Name = "Text1"
GrdDocsView.Column10.Name = "Column10"
GrdDocsView.COLUMN11.Header1.Name = "Header1"
GrdDocsView.COLUMN11.Text1.Name = "Text1"
GrdDocsView.COLUMN11.Name = "COLUMN11"
GrdDocsView.Left = 5
GrdDocsView.Top = 5
GrdDocsView.Width = 690
GrdDocsView.Name = "GrdDocsView"
math.Name = "math"
Cntfrmstatusinfo1.ShpFrmStatusInfo.Name = "ShpFrmStatusInfo"
Cntfrmstatusinfo1.lblStatusID.Name = "lblStatusID"
Cntfrmstatusinfo1.shpStatusID1.Name = "shpStatusID1"
Cntfrmstatusinfo1.lblStatusID1.Name = "lblStatusID1"
Cntfrmstatusinfo1.shpStatusID2.Name = "shpStatusID2"
Cntfrmstatusinfo1.lblStatusID2.Name = "lblStatusID2"
Cntfrmstatusinfo1.shpStatusID3.Name = "shpStatusID3"
Cntfrmstatusinfo1.lblStatusID3.Name = "lblStatusID3"
Cntfrmstatusinfo1.shpStatusID4.Name = "shpStatusID4"
Cntfrmstatusinfo1.lblStatusID4.Name = "lblStatusID4"
Cntfrmstatusinfo1.Name = "Cntfrmstatusinfo1"
cntSum.Shp2.Name = "Shp2"
cntSum.lblDocumentCountCaption.Name = "lblDocumentCountCaption"
cntSum.txtDocumentCount.Name = "txtDocumentCount"
cntSum.txtDocumentSum.Name = "txtDocumentSum"
cntSum.txtDocumentVatSum.Name = "txtDocumentVatSum"
cntSum.txtDocumentCountMark.Name = "txtDocumentCountMark"
cntSum.txtDocumentVatSumMark.Name = "txtDocumentVatSumMark"
cntSum.Lbl1.Name = "Lbl1"
cntSum.txtDocumentSumMark.Name = "txtDocumentSumMark"
cntSum.Name = "cntSum"
</properties>
		<protected/>
		<methods>PROCEDURE GrdDocsView._add
*-------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: GRDDOCSVIEW._ADD
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Äîáàâëåíèå äîêóìåíòà.
*-------------------------------------------------------

*12.05.2004 03:25 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	luResAdding
*------------------------------------------------------------------------------

*12.05.2004 03:26 -&gt;Âûïîëíÿåì îïåðàöèþ äîáàâëåíèÿ äîêóìåíòà
luResAdding = oMgrPD.Operate([FORM],[ADD],ThisForm.nScrFrmID)
*------------------------------------------------------------------------------

*12.05.2004 03:26 -&gt;Îáðàáàòûâàåì ðåçóëüòàò äîáàâëåíèÿ
IF TYPE([luResAdding])==[N] AND !EMPTY(luResAdding)
	
		LOCAL luResultAdding
		*express_add = .t.
		DO WHILE TYPE('luResAdding')=[N] AND luResAdding&lt;&gt;0
				DO CASE
				   CASE PrimaryDocView.FrmTypeId = 23
				     luResultAdding = oMgrPD.Operate([PARTFRMJAST],[ADD],luResAdding)
				   OTHERWISE
				     luResultAdding = oMgrPD.Operate([PARTFRM],[ADD],luResAdding)
				ENDCASE
IF TYPE('luResultAdding')&lt;&gt;[N] OR luResultAdding =0
EXIT
ENDIF
		ENDDO


	*22.12.2004 15:16 -&gt;Îáíîâëÿåì çàïèñü
	This._RSRequeryOne(luResAdding)
	*------------------------------------------------------------------------------

ENDIF
*------------------------------------------------------------------------------

************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************
ENDPROC
PROCEDURE GrdDocsView._refreshrelatedobjects
ThisForm.GrdPart._RSRequery(PrimaryDocView.FrmID)
ENDPROC
PROCEDURE Load
*-------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: FRMPRIMARYDOCVIEWFRM.LOAD
* Called by.......: &lt;Sys Event&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Îòêðûòèå LV äëÿ Grid-à ñ ñîäåðæàíèåì äîêóìåíòà (ñóììîâûì)
*-------------------------------------------------------

*14.07.2004 00:13 -&gt;Âûïîëíèì ìåòîä ðîäèòåëüñêîãî êëàññà
DODEFAULT()
*------------------------------------------------------------------------------

*******************************************************************************
*1. Çàãðóçèì ïóñòîé Alias äëÿ ïðîñìîòðà íîã äîêóìåíòîâ                        *
*******************************************************************************

*02.12.2004 16:59 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	lcUniqueName
*------------------------------------------------------------------------------

*21.04.2004 14:05 -&gt;Âûïîëíèì õðàíèìóþ ïðîöåäóðó äëÿ ïîëó÷åíèÿ ïóñòîé òàáëèöû
lcUniqueName = spFrmPartFrmView([NODATA])
*------------------------------------------------------------------------------

*21.04.2004 14:08 -&gt;Òåïåðü îòêðîåì äàííûé Alias
USE (lcUniqueName) IN 0 ALIAS FrmPartFrmView
CURSORSETPROP([BUFFERING],3,[FrmPartFrmView])
*------------------------------------------------------------------------------

************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************
ENDPROC
PROCEDURE Unload
*-------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: FRMPRIMARYDOCVIEWFRM.UNLOAD
* Called by.......: &lt;Sys Event&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: &lt;sysevent&gt; Âûãðóçêà ôîðìû
*-------------------------------------------------------

*04.05.2004 19:46 -&gt;Âûïîëíèì ìåòîä ðîäèòåëüñêîãî êëàññà
DODEFAULT()
*----------------------------------------------------------------------------

*****************************************************************************
* Çàêðîåì Alias äëÿ ïðîñìîòðà ñóììîâûõ ïîçèöèé äîêóìåíòîâ è óäàëèì âðåìåííóþ*
* òàáëèöó                                                                   *
*****************************************************************************

*27.05.2004 17:57 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	lcUniqueFilePath
*------------------------------------------------------------------------------

*27.05.2004 17:53 -&gt;Çàêðîåì Alias è óäàëèì âðåìåííóþ òàáëèöó
lcUniqueFilePath = DBF([FrmPartFrmView])
***
USE IN FrmPartFrmView
***
IF FILE(lcUniqueFilePath)
	ERASE (lcUniqueFilePath)
ENDIF
*------------------------------------------------------------------------------

************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1>Class</reserved1>
		<reserved2>3</reserved2>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6>Pixels</reserved6>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1E50Y1W81</uniqueid>
		<timestamp>949392988</timestamp>
		<class>grdpartfrm</class>
		<classloc>primarydoc_v1.vcx</classloc>
		<baseclass>grid</baseclass>
		<objname>GrdPart</objname>
		<parent>frmprimarydocviewfrm</parent>
		<properties>Height = 195
Left = 6
Top = 240
Width = 690
Name = "GrdPart"
Column1.Header1.Name = "Header1"
Column1.Text1.Name = "Text1"
Column1.Name = "Column1"
Column2.Header1.Name = "Header1"
Column2.Text1.Name = "Text1"
Column2.Name = "Column2"
Column3.Header1.Name = "Header1"
Column3.Text1.Name = "Text1"
Column3.Name = "Column3"
COLUMN4.Header1.Name = "Header1"
COLUMN4.Text1.Name = "Text1"
COLUMN4.Name = "COLUMN4"
</properties>
		<protected/>
		<methods>PROCEDURE _rsrequeryone
LPARAMETERS tnFrmPartFrmID
DODEFAULT(tnFrmPartFrmID)
ThisForm.GrdDocsView._RSRequeryOne(This.nFrmID,.T.)
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1E317DF8C</uniqueid>
		<timestamp>0</timestamp>
		<class>txtgrd</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>Text1</objname>
		<parent>frmprimarydocviewfrm.GrdDocsView.Column1</parent>
		<properties>BorderStyle = 0
Margin = 0
ForeColor = 0,0,0
BackColor = 255,255,255
Name = "Text1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>COMMENT</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>0</timestamp>
		<class/>
		<classloc/>
		<baseclass/>
		<objname>frmprimarydocviewfrm</objname>
		<parent/>
		<properties>Arial, 0, 9, 5, 15, 12, 32, 3, 0
Arial, 1, 8, 5, 14, 11, 29, 3, 0
Arial, 0, 8, 5, 14, 11, 29, 3, 0
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18I0M4ORT</uniqueid>
		<timestamp>954697015</timestamp>
		<class>frmedit</class>
		<classloc>baseform_v1.vcx</classloc>
		<baseclass>form</baseclass>
		<objname>frmpracticaldetedit</objname>
		<parent/>
		<properties>Height = 202
Width = 417
DoCreate = .T.
WindowState = 0
cmode = 
Name = "frmpracticaldetedit"
cstmsghandler.Name = "cstmsghandler"
cstresizable.Name = "cstresizable"
Img1.Name = "Img1"
cstdatawork.Name = "cstdatawork"
</properties>
		<protected/>
		<methods>PROCEDURE _handlecntcancelsaveevent
*------------------------------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: FRMPRIMARYDOCPARTTVREDIT._HANDLECNTCANCELSAVEEVENT
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;tcMessage&gt;
* Returns.........: &lt;none&gt;
* Notes...........: &lt;~&gt;
*------------------------------------------------------------------------------
LPARAMETERS	tcMessage

LOCAL	llResSave

WITH This

*17.05.2004 02:07 -&gt;Ïðîèçâîäèì ñîõðàíåíèÿ/îòìåíÿåì èçìåíåíèÿ
IF tcMessage == [OK]
	
	*13.06.2006 18:01 -&gt; Ñîõðàíÿåì öåíó ïðîäàæè
	*------------------------------------------------------------------------------

	.uRetVal = .T.
	
	IF .cMode = [DELE]
		DELETE IN lvPrBookEdit
	ENDIF

	llResSave = .cstDataWork.Save([lvPrBookEdit])

	*21.01.2004 20:01 -&gt;Îáðàáàòûâàåì ðåçóëüòàòû ñîõðàíåíèÿ
	IF llResSave
	
		*12.05.2004 03:18 -&gt;Çàïèñûâàåì â .uRetVal èäåíòèôèêàòîð äîáàâëåííîãî äîêóìåíòà
		IF .cMode = [ADD]
			.uRetVal = .cstDataWork.GetLastID([lvPrBookEdit])
		ELSE
			.uRetVal = .T.
		ENDIF
		***	
		.Hide()
		*------------------------------------------------------------------------------
		
	ELSE
	
		*01.04.2004 18:42 -&gt;Ïîïûòàåìñÿ îáðàáîòàòü îøèáêó ñîõðàíåíèÿ
		IF .cstDataWork.HandleSaveFail() &amp;&amp;åñëè îøèáêà îáðàáîòàíà
			RETURN .T.	&amp;&amp;âîçâðàùàåìñÿ ê ðåäàêòèðîâàíèþ
		ELSE
			
			*01.04.2004 18:40 -&gt;Ñîîáùàåì îá îøèáêå
			MESSAGEBOX([Â ïðîöåññå ñîõðàíåíèÿ ïðîèçîøëà îøèáêà. Èçìåíåíèÿ ñîõðàíåíû íå áóäóò.],16,[Îøèáêà...])
			*------------------------------------------------------------------------------
			
			*01.04.2004 18:40 -&gt;Îòìåíÿåì èçìåíåíèÿ
			.cstDataWork.Restore([lvPrBookEdit])
			.uRetVal = .F.
			.Hide()	
			*------------------------------------------------------------------------------
			
		ENDIF	
		*------------------------------------------------------------------------------
		
	ENDIF
	*------------------------------------------------------------------------------

ELSE

	*12.05.2004 00:36 -&gt;Îòìåíèì èçìåíåíèÿ
	.cstDataWork.Restore([lvPrBookEdit])
	.uRetVal = .F.
	.Hide()
	*------------------------------------------------------------------------------
	
ENDIF
*------------------------------------------------------------------------------

ENDWITH
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE cntenable
*------------------------------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: frmPrimaryDocPartTvrEdit.cntEnable
* Called by.......: &lt;frmPrimaryDocPartTvrEdit.Init&gt;
* Parameters......: &lt;tcObjectName - èìÿ îáúåêòà-êîíòåéíåðà,
*					 tnTop - âûñîòà îáúåêòà-êîíòåéíåðà&gt;
* Returns.........: &lt;lnNewTop&gt;
* Notes...........: Ðàçìåùåíèå íà ôîðìå êîíòåéíåðîâ ñîäåðæàùèõ öåíû, ñóììû, ÍÄÑ
*------------------------------------------------------------------------------
LPARAMETERS tcObjectName, tnTop

WITH This

*01.09.2005 12:23 -&gt; Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL lnNewTop
*------------------------------------------------------------------------------

*01.09.2005 12:00 -&gt; Íàñòðîèì âíåøíèé âèä îáúåêòà
.&amp;tcObjectName..Visible = .T.
***
.&amp;tcObjectName..Left = 5
.&amp;tcObjectName..Top = tnTop
***
lnNewTop = .&amp;tcObjectName..Top + .&amp;tcObjectName..Height + 5
*------------------------------------------------------------------------------

*01.09.2005 12:23 -&gt; Âîçâðàùàåì ðåçóëüòàò
RETURN lnNewTop
*------------------------------------------------------------------------------

ENDWITH
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE Destroy
*------------------------------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: Tovar_v1.vcx
DODEFAULT()

ENDPROC
PROCEDURE Init
*------------------------------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: FRMPRIMARYDOCPARTTVREDIT.INIT
* Called by.......: &lt;Sys Event&gt;
* Parameters......: &lt;tcCommand,tuParam1&gt;
* Returns.........: &lt;none&gt;
* Notes...........: &lt;~&gt;
*------------------------------------------------------------------------------
LPARAMETERS	tcCommand,tuParam1

*17.05.2004 01:26 -&gt;Âûïîëíèì ìåòîä ðîäèòåëüñêîãî êëàññà
DODEFAULT()
*------------------------------------------------------------------------------

WITH This

*12.05.2004 03:12 -&gt;Ñîõðàíèì êîìàíäó (ðåæèì ðàáîòû ñ äàííûìè)
.cMode = UPPER(ALLTRIM(tcCommand))
*------------------------------------------------------------------------------

*12.05.2004 00:33 -&gt;Çàãðóçèì äàííûå â Alias äëÿ ðåäàêòèðîâàíèÿ
DO CASE

	CASE .cMode==[ADD]
		
		*12.05.2004 00:32 -&gt;Äîáàâèì ïóñòóþ çàïèñü
		APPEND BLANK IN lvPrBookEdit
		*------------------------------------------------------------------------------

		*12.05.2004 02:39 -&gt;Çàïèøåì èäåíòèôèêàòîð ðîäèòåëüñêîãî äîêóìåíòà
		REPLACE PBookFrmID WITH tuParam1 IN lvPrBookEdit
		*------------------------------------------------------------------------------
		
	CASE INLIST(.cMode,[EDIT],[INFO],[DELE])
		
		*12.05.2004 00:31 -&gt;Çàãðóçèì äàííûå ñóùåñòâóþùåé çàïèñè
		_PARAM = tuParam1
		***
		REQUERY([lvprbookedit])
		*------------------------------------------------------------------------------
		
ENDCASE
*------------------------------------------------------------------------------

*01.09.2005 15:28 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	lnTop, ;
		lnOldTop
***
lnTop = .shpQnt.Top + .shpQnt.Height + 5
lnOldTop = lnTop
*------------------------------------------------------------------------------

*19.08.2005 12:16 -&gt; Çàêðîåì Alias
USE IN IIF(USED([lvFrmTypeInfoByFrm]),[lvFrmTypeInfoByFrm],0)
*------------------------------------------------------------------------------

*19.08.2005 12:12 -&gt; Îòêðîåì Alias ñ èíôîðìàöèåé î òèïå äîêóìåíòà
_PARAM = lvPrBookEdit.PBookFrmID
***
USE lvFrmTypeInfoByFrm IN 0
*------------------------------------------------------------------------------

*19.08.2005 12:15 -&gt; Íàñòðîèì âíåøíèé âèä ôîðìû
DO CASE
	CASE .cMode = [ADD]
		.Caption = [Äîáàâëåíèå]
		.Icon = FULLPATH([frmprimarydocadd.ico])
	CASE .cMode = [EDIT]
		.Caption = [Ðåäàêòèðîâàíèå]
		.Icon = FULLPATH([frmprimarydocedit.ico])
	CASE .cMode = [INFO]
		.Caption = [Ïðîñìîòð]
		.Icon = FULLPATH([frmprimarydocinfo.ico])
		ThisForm.cntCancelSaveHandled.cmdOk.Enabled = .F.
	CASE .cMode = [DELE]
		.Caption = [Óäàëåíèå]
		.Icon = FULLPATH([frmprimarydocdele.ico])
		ThisForm.cntCancelSaveHandled.cmdOk.Caption = [Óäàëèòü]
ENDCASE
***
.Caption = .Caption + [ ïðîâîäêè ïî äîêóìåíòó]
*------------------------------------------------------------------------------

ENDWITH
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE Load
*------------------------------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: FRMPRIMARYDOCPARTTVREDIT.LOAD
* Called by.......: &lt;Sys Event&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: &lt;~&gt;
*------------------------------------------------------------------------------

*17.05.2004 01:32 -&gt;Âûïîëíèì ìåòîä ðîäèòåëüñêîãî êëàññà
DODEFAULT()
*------------------------------------------------------------------------------

*17.05.2004 01:32 -&gt;Îòêðîåì ÁÄ è óñòàíîâèì å¸ â êà÷åñòâå òåêóùåé
IF !DBUSED([BASIS])
	OPEN DATABASE BASIS
ENDIF
***
SET DATABASE TO BASIS
*------------------------------------------------------------------------------

*17.05.2004 01:32 -&gt;Îòêðîåì Alias äëÿ ðåäàêòèðîâàíèÿ áåç äàííûõ
USE lvPrBookEdit IN 0 NODATA
*------------------------------------------------------------------------------

*17.05.2004 01:34 -&gt; Îòêðûâàåì ñïðàâî÷íèêè
USE lvAccBuch IN 0 ALIAS lvDebet
USE lvAccBuch IN 0 ALIAS lvCredit
***

*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE Resize
NODEFAULT
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1>Class</reserved1>
		<reserved2>10</reserved2>
		<reserved3>cmode
*cntenable 
</reserved3>
		<reserved4/>
		<reserved5/>
		<reserved6>Pixels</reserved6>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18A02DMUV</uniqueid>
		<timestamp>954697015</timestamp>
		<class>shp</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>shape</baseclass>
		<objname>shpQnt</objname>
		<parent>frmpracticaldetedit</parent>
		<properties>Top = 5
Left = 5
Height = 163
Width = 409
SpecialEffect = 0
ZOrderSet = 0
Name = "shpQnt"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18I0M4ORT</uniqueid>
		<timestamp>954697015</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblQnt</objname>
		<parent>frmpracticaldetedit</parent>
		<properties>FontBold = .T.
Caption = "Ñóììà:"
Left = 10
Top = 15
TabIndex = 1
ZOrderSet = 4
Name = "lblQnt"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_R020K4VL1</uniqueid>
		<timestamp>954697015</timestamp>
		<class>txt</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>txtSumm</objname>
		<parent>frmpracticaldetedit</parent>
		<properties>ControlSource = "lvPrBookEdit.PBookSum"
Height = 23
Left = 140
TabIndex = 2
Top = 12
Width = 268
ZOrderSet = 5
_highlightobject = .parent.lblQnt
_convertcommatopoint = .T.
_usedbfieldproperty = .T.
Name = "txtSumm"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18I0M4ORT</uniqueid>
		<timestamp>954697015</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblMsu</objname>
		<parent>frmpracticaldetedit</parent>
		<properties>FontBold = .T.
Caption = "Ñ÷åò ïî Äåáåòó:"
Left = 10
Top = 45
TabIndex = 3
ZOrderSet = 6
Name = "lblMsu"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_R020K4VL1</uniqueid>
		<timestamp>954697015</timestamp>
		<class>cntidctlgrid</class>
		<classloc>comidctl_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>cntIdDebet</objname>
		<parent>frmpracticaldetedit</parent>
		<properties>Top = 42
Left = 140
Width = 268
Height = 23
TabIndex = 4
ZOrderSet = 7
_controlsource = lvPrBookEdit.DebetId
_controlsourcetype = 1
_rsaliasname = lvDebet
_rsfieldnameid = AccID
_rsfieldnametext = AccNM
Name = "cntIdDebet"
txtText.Height = 23
txtText.Left = 0
txtText.Top = 0
txtText.Width = 223
txtText._highlightobject = .parent.parent.lblMsu
txtText.Name = "txtText"
cmdShow.Top = 0
cmdShow.Left = 223
cmdShow.Name = "cmdShow"
cmdClear.Top = 0
cmdClear.Left = 246
cmdClear.Name = "cmdClear"
CmdTree.Name = "CmdTree"
Olecommprox1.Top = 0
Olecommprox1.Left = 36
Olecommprox1.Height = 16
Olecommprox1.Width = 38
Olecommprox1.Name = "Olecommprox1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18M0216E7</uniqueid>
		<timestamp>954697015</timestamp>
		<class>cntcancelsavehandled</class>
		<classloc>baseform_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>cntCancelSaveHandled</objname>
		<parent>frmpracticaldetedit</parent>
		<properties>Top = 171
Left = 207
TabIndex = 8
ZOrderSet = 8
Name = "cntCancelSaveHandled"
cmdCancel.Name = "cmdCancel"
cmdOk.Name = "cmdOk"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1VR0ISUGT</uniqueid>
		<timestamp>954697015</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>Lbl1</objname>
		<parent>frmpracticaldetedit</parent>
		<properties>FontBold = .T.
Caption = "Ñ÷åò ïî Êðåäèòó:"
Left = 10
Top = 74
TabIndex = 5
ZOrderSet = 9
Name = "Lbl1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1VR0ISUH3</uniqueid>
		<timestamp>954697015</timestamp>
		<class>cntidctlgrid</class>
		<classloc>comidctl_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>cntIdCredit</objname>
		<parent>frmpracticaldetedit</parent>
		<properties>Top = 71
Left = 140
Width = 268
Height = 23
TabIndex = 6
ZOrderSet = 10
_controlsource = lvPrBookEdit.CreditId
_controlsourcetype = 1
_rsaliasname = lvCredit
_rsfieldnameid = AccID
_rsfieldnametext = AccNM
Name = "cntIdCredit"
txtText.Height = 23
txtText.Left = 0
txtText.Top = 0
txtText.Width = 223
txtText._highlightobject = .parent.parent.lblMsu
txtText.Name = "txtText"
cmdShow.Top = 0
cmdShow.Left = 223
cmdShow.Name = "cmdShow"
cmdClear.Top = 0
cmdClear.Left = 246
cmdClear.Name = "cmdClear"
CmdTree.Name = "CmdTree"
Olecommprox1.Top = 0
Olecommprox1.Left = 36
Olecommprox1.Height = 16
Olecommprox1.Width = 38
Olecommprox1.Name = "Olecommprox1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_24E0QHW13</uniqueid>
		<timestamp>920544065</timestamp>
		<class>edt</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>editbox</baseclass>
		<objname>edtNote</objname>
		<parent>frmpracticaldetedit</parent>
		<properties>Height = 60
Left = 10
TabIndex = 7
Top = 101
Width = 396
ZOrderSet = 17
ControlSource = "lvPrBookEdit.PBookNote"
Name = "edtNote"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>COMMENT</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>0</timestamp>
		<class/>
		<classloc/>
		<baseclass/>
		<objname>frmpracticaldetedit</objname>
		<parent/>
		<properties>Arial, 0, 9, 5, 15, 12, 32, 3, 0
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1M90PLTT9</uniqueid>
		<timestamp>955208483</timestamp>
		<class>scrfrmedit</class>
		<classloc>basis.vcx</classloc>
		<baseclass>form</baseclass>
		<objname>frmnaklout</objname>
		<parent/>
		<properties>Height = 64
Width = 356
DoCreate = .T.
Caption = "Ôîðìèðîâàíèå íàêëàäíûõ"
Name = "frmnaklout"
cstmsghandler.Top = 0
cstmsghandler.Name = "cstmsghandler"
cstresizable.Top = 0
cstresizable.Name = "cstresizable"
IMG1.ZOrderSet = 0
IMG1.Name = "IMG1"
cstdatawork.Name = "cstdatawork"
</properties>
		<protected/>
		<methods>PROCEDURE _handlecntcancelsaveevent
*-------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PrimaryDoc_v1.VCX
* Class.Module....: frmNaklOut._HandleCntCancelSaveEvent
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;tcMessage&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Âûïîëíåíèå çàäàíèÿ ôîðìèðîâàíèÿ íàêëàäíîé.
*-------------------------------------------------------
LPARAMETERS tcMessage

WITH This

*07.12.2005 10:30 -&gt;Ñîõðàíèì/îòìåíèì èçìåíåíèÿ
IF tcMessage = [OK]

	*07.12.2005 11:32 -&gt;Ñôîðìèðóåì íàêëàäíûå
	.cntQueryParam.QueryParamSet()
	.uRetVal = spNaklOutMake(.cntQueryParam.cQryParSID,VAL(oRes.GetParam([TOVAR],[STORAGEPLACE])),.chkSmena.Value)
	.Hide()
	*------------------------------------------------------------------------------
	
ELSE
	
	*07.12.2005 11:33 -&gt;Ïðîñòî âûéäåì
	.uRetVal = .F.
	.Hide()
	*------------------------------------------------------------------------------
	
ENDIF
*------------------------------------------------------------------------------

ENDWITH
************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************
ENDPROC
PROCEDURE Init
*------------------------------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: frmNaklOut.INIT
* Called by.......: &lt;Sys Event&gt;
* Parameters......: &lt;tnScrFrm&gt;
* Returns.........: &lt;none&gt;
* Notes...........:
*------------------------------------------------------------------------------
LPARAMETERS tnScrFrm

WITH This

*07.12.2005 11:23 -&gt;Âûïîëíèì ìåòîä ðîäèòåëüñêîãî êëàññà
DODEFAULT(tnScrFrm)
*------------------------------------------------------------------------------

*07.12.2005 11:23 -&gt;Çàãðóçèì ôèëüòðû äëÿ òåêóùåé ôîðìû
.cntQueryParam.ParamObjectCreate(__QPOTYPE_SCRFRM, .nScrFrmID)
*------------------------------------------------------------------------------

ENDWITH
*******************************************************************************
******************************** END PROCEDURE ********************************
*******************************************************************************
ENDPROC
PROCEDURE Load
*------------------------------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: frmNaklOut.Load
* Called by.......: &lt;Sys Event&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........:
*------------------------------------------------------------------------------

*07.12.2005 10:06 -&gt;Âûïîëíèì ìåòîä ðîäèòåëüñêîãî êëàññà
DODEFAULT()
*------------------------------------------------------------------------------

*19.09.2005 14:46 -&gt;Îòêðîåì ÁÄ
IF !USED([Basis])
	OPEN DATABASE Basis SHARED
ENDIF
***
SET DATABASE TO Basis
*------------------------------------------------------------------------------

*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1>Class</reserved1>
		<reserved2>4</reserved2>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6>Pixels</reserved6>
		<reserved7>Ôîðìèðîâàíèå íàêëàäíîé ïî ÷åêîâîé ëåíòå</reserved7>
		<reserved8>..\include\qryparparobjtypes.h</reserved8>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1M90TY53D</uniqueid>
		<timestamp>955208483</timestamp>
		<class>cntqueryparam</class>
		<classloc>queryparamio_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>cntQueryParam</objname>
		<parent>frmnaklout</parent>
		<properties>Top = 5
Left = 5
ZOrderSet = 3
Name = "cntQueryParam"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1OG0M81A0</uniqueid>
		<timestamp>955208483</timestamp>
		<class>cntcancelsavehandled</class>
		<classloc>baseform_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>cntCancelSaveHandled</objname>
		<parent>frmnaklout</parent>
		<properties>Top = 34
Left = 145
ZOrderSet = 5
Name = "cntCancelSaveHandled"
cmdCancel.Name = "cmdCancel"
cmdOk.Name = "cmdOk"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2F10MBV9R</uniqueid>
		<timestamp>955208483</timestamp>
		<class>chk</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>checkbox</baseclass>
		<objname>chkSmena</objname>
		<parent>frmnaklout</parent>
		<properties>Top = 36
Left = 15
Height = 17
Width = 69
FontBold = .T.
Alignment = 0
Caption = "çà ñìåíó"
Name = "chkSmena"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>COMMENT</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>0</timestamp>
		<class/>
		<classloc/>
		<baseclass/>
		<objname>frmnaklout</objname>
		<parent/>
		<properties>Arial, 0, 9, 5, 15, 12, 32, 3, 0
Arial, 1, 9, 6, 15, 12, 32, 3, 0
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1></reserved1>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18I0M4ORT</uniqueid>
		<timestamp>955864739</timestamp>
		<class>frmedit</class>
		<classloc>baseform_v1.vcx</classloc>
		<baseclass>form</baseclass>
		<objname>frmprimarydocpartfrmedit</objname>
		<parent/>
		<properties>Height = 298
Width = 600
DoCreate = .T.
BorderStyle = 2
Caption = "Ñóììîâàÿ ïîçèöèÿ äîêóìåíòà"
Name = "frmprimarydocpartfrmedit"
cstmsghandler.Name = "cstmsghandler"
cstresizable.Name = "cstresizable"
Img1.Name = "Img1"
cstdatawork.Name = "cstdatawork"
</properties>
		<protected/>
		<methods>PROCEDURE _handlecntcancelsaveevent
*-------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: FRMPRIMARYDOCPARTTVREDIT._HANDLECNTCANCELSAVEEVENT
* Called by.......: &lt;.cntCancelSaveHandled.cmdOk.Click();.cntCancelSaveHandled.cmdCancel.Click()&gt;
* Parameters......: &lt;tcMessage&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Ñîõðàíåíèå/îòìåíà
*-------------------------------------------------------
LPARAMETERS	tcMessage

WITH This

*18.07.2004 22:28 -&gt;Ïðîèçâîäèì ñîõðàíåíèÿ/îòìåíÿåì èçìåíåíèÿ
IF tcMessage == [OK]
	
	*19.10.2004 12:46 -&gt;Åñëè îïåðàöèÿ óäàëåíèå  -  óäàëèì çàïèñü
	IF .cMode == [DELE]
		DELETE IN lvFrmPartFrmEdit
	ENDIF
	*------------------------------------------------------------------------------

	*18.07.2004 22:28 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
	LOCAL	llResSave
	*------------------------------------------------------------------------------
	
	*18.07.2004 22:28 -&gt;Ñîõðàíèì èçìåíåíèÿ
	llResSave = .cstDataWork.Save([lvFrmPartFrmEdit])
	*------------------------------------------------------------------------------
	
	*18.07.2004 22:28 -&gt;Îáðàáîòàåì ðåçóëüòàòû ñîõðàíåíèÿ
	IF !llResSave
		IF .cstDataWork.HandleSaveFail() &amp;&amp;åñëè îøèáêà îáðàáîòàíà
			RETURN .T. &amp;&amp;âîçâðàùàåìñÿ ê ðåäàêòèðîâàíèþ
		ELSE	
			MESSAGEBOX([Â ïðîöåññå ñîõðàíåíèÿ ïðîèçîøëà îøèáêà. Èçìåíåíèÿ ñîõðàíåíû íå áóäóò.],16,[Îøèáêà...])
			.cstDataWork.Restore([lvFrmPartFrmEdit])
		ENDIF	
	ENDIF
	*------------------------------------------------------------------------------
	
	*17.05.2004 02:05 -&gt;Ñîõðàíèì ðåçóëüòàòû
	.uRetVal = .T.
	*------------------------------------------------------------------------------
	
ELSE

	*17.05.2004 02:04 -&gt;Îòìåíèì èçìåíåíèÿ âíåñåííûå â LV
	.cstDataWork.Restore([lvFrmPartFrmEdit])
	.uRetVal = .F.
	*------------------------------------------------------------------------------
	
ENDIF
*------------------------------------------------------------------------------

*17.05.2004 02:07 -&gt;Ñêðûâàåì ôîðìó
.Hide()
*------------------------------------------------------------------------------

ENDWITH
************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************
ENDPROC
PROCEDURE Init
*-------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: FRMPRIMARYDOCPARTFRMINFO.INIT
* Called by.......: &lt;Sys Event&gt;
* Parameters......: &lt;tnFrmID&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Èíèöèàëèçàöèÿ ôîðìû
*-------------------------------------------------------
LPARAMETERS	tcRequestedOperation, tnFrmPartFrmID

*17.05.2004 01:26 -&gt;Âûïîëíèì ìåòîä ðîäèòåëüñêîãî êëàññà
DODEFAULT()
*------------------------------------------------------------------------------

WITH This

*24.09.2004 16:12 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	_PARAM, ;
		lcPayListDocTable
*------------------------------------------------------------------------------

*12.05.2004 03:12 -&gt;Ñîõðàíèì êîìàíäó (ðåæèì ðàáîòû ñ äàííûìè)
.cMode = UPPER(ALLTRIM(tcRequestedOperation))
*------------------------------------------------------------------------------

*12.05.2004 00:32 -&gt;Ïåðå÷èòàåì Alias äëÿ ðåäàêòèðîâàíèÿ äîêóìåíòà è Alias äëÿ ïðîñìîòðà ñóìì / ÍÄÑ
_PARAM = tnFrmPartFrmID
***
REQUERY([lvFrmPartFrmEdit])
**REQUERY([lvFrmPartFrmSumView])
*------------------------------------------------------------------------------

*15.07.2004 02:29 -&gt;Îòêðîåì ñïèñîê äîêóìåíòîâ íà îïëàòó
lcPayListDocTable = spGetPayListDoc(lvFrmPartFrmEdit.FrmID)
USE (lcPayListDocTable) IN 0 ALIAS FrmToPartFrmList
*------------------------------------------------------------------------------

*19.10.2004 11:40 -&gt;Íàñòðîèì âíåøíèé âèä ôîðìû
DO CASE
	CASE .cMode = [EDIT]
		.Caption = .Caption + [ - Ðåäàêòèðîâàíèå]
		.Icon = FULLPATH([frmedit.ico])
	CASE .cMode = [INFO]
		.Caption = .Caption + [ - Ïðîñìîòð]
		.Icon = FULLPATH([frminfo.ico])
		ThisForm.Cntcancelsavehandled1.cmdOk.Enabled = .F.
	CASE .cMode = [DELE]
		.Caption = .Caption + [ - Óäàëåíèå]
		.Icon = FULLPATH([frmdele.ico])
		ThisForm.Cntcancelsavehandled1.cmdOk.Caption = [Óäàëèòü]
ENDCASE
*------------------------------------------------------------------------------

ENDWITH
************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************








ENDPROC
PROCEDURE Load
*-------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: FRMPRIMARYDOCPARTFRMEDIT.LOAD
* Called by.......: &lt;Sys Event&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Çàãðóçêà ôîðìû (îòêðûòèå ñïðàâî÷íèêîâ)
*-------------------------------------------------------

*17.05.2004 01:32 -&gt;Âûïîëíèì ìåòîä ðîäèòåëüñêîãî êëàññà
DODEFAULT()
*------------------------------------------------------------------------------

*17.05.2004 01:32 -&gt;Îòêðîåì ÁÄ è óñòàíîâèì å¸ â êà÷åñòâå òåêóùåé
IF !DBUSED([BASIS])
	OPEN DATABASE BASIS
ENDIF
SET DATABASE TO BASIS
*------------------------------------------------------------------------------

*15.07.2004 03:32 -&gt;Îòêðîåì ñïèñîê àëãîðèòìîâ äåëåíèÿ ñóìì âêëþ÷àåìûõ äîêóìåíòîâ
USE lvFrmSumSplitProcList IN 0
*------------------------------------------------------------------------------

*15.07.2004 02:29 -&gt;Îòêðîåì LV äëÿ ðåäàêòèðîâàíèÿ ñîäåðæàíèÿ äîêóìåíòà (ñóììîâîé ïîçèöèè)
USE lvFrmPartFrmEdit IN 0 NODATA
*------------------------------------------------------------------------------

*24.09.2004 17:35 -&gt;Îòêðîåì LV äëÿ ïðîñìîòðà ñóìì/íäñ ñóììîâîé ïîçèöèè äîêóìåíòà
**USE  lvFrmPartFrmSumView IN 0 NODATA
*------------------------------------------------------------------------------

************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1>Class</reserved1>
		<reserved2>21</reserved2>
		<reserved3>cmode Ðåæèì ðàáîòû ñ äàííûìè (ïðîñìîòð/óäàëåíèå)
</reserved3>
		<reserved4/>
		<reserved5/>
		<reserved6>Pixels</reserved6>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_R020K4VL1</uniqueid>
		<timestamp>955864739</timestamp>
		<class>shp</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>shape</baseclass>
		<objname>shpFrm</objname>
		<parent>frmprimarydocpartfrmedit</parent>
		<properties>Top = 5
Left = 5
Height = 33
Width = 593
SpecialEffect = 0
ZOrderSet = 3
Name = "shpFrm"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>955864739</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblFrm</objname>
		<parent>frmprimarydocpartfrmedit</parent>
		<properties>FontBold = .T.
Caption = "Äîêóìåíò:"
Left = 10
Top = 13
ZOrderSet = 4
Name = "lblFrm"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_R020K4VL1</uniqueid>
		<timestamp>955864739</timestamp>
		<class>cntidctlgrid</class>
		<classloc>comidctl_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>cntIdCtlGridCntFrm</objname>
		<parent>frmprimarydocpartfrmedit</parent>
		<properties>Top = 10
Left = 140
Width = 453
Height = 24
Enabled = .F.
ZOrderSet = 5
_controlsource = lvFrmPartFrmEdit.CntFrmID
_controlsourcetype = 1
_rsaliasname = FrmToPartFrmList
_rsfieldnameid = ID
_rsfieldnametext = NM
_showtextempty = Äîêóìåíò íå îïðåäåëåí
_showtextnotfound = Óäàë¸ííûé äîêóìåíò
Name = "cntIdCtlGridCntFrm"
txtText.Height = 23
txtText.Left = 0
txtText.Top = 0
txtText.Width = 380
txtText._highlightobject = .parent.parent.lblFrm
txtText.Name = "txtText"
cmdShow.Top = 0
cmdShow.Left = 407
cmdShow.Enabled = .F.
cmdShow.Name = "cmdShow"
cmdClear.Top = 0
cmdClear.Left = 430
cmdClear.Enabled = .F.
cmdClear.Name = "cmdClear"
CmdTree.Top = 0
CmdTree.Left = 383
CmdTree.Name = "CmdTree"
Olecommprox1.Top = 0
Olecommprox1.Left = 36
Olecommprox1.Height = 16
Olecommprox1.Width = 38
Olecommprox1.Name = "Olecommprox1"
</properties>
		<protected/>
		<methods>PROCEDURE _handleanychange
*-------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRINARYDOC_V1.VCX
* Class.Module....: CNTIDCTLGRIDFRM._HANDLEANYCHANGE
* Called by.......: &lt;ObjectEvent&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Îáðàáîòêà èçìåíåíèÿ çíà÷åíèÿ ýëåìåíòà.
*-------------------------------------------------------
WITH ThisForm

*15.07.2004 04:50 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	_PARAM
*------------------------------------------------------------------------------

*15.07.2004 04:50 -&gt;Ïîëó÷èì ñóììó âûáðàííîãî äîêóìåíòà
USE IN IIF(USED([lvFrmTvrSumFrm]),[lvFrmTvrSumFrm],0)
USE IN IIF(USED([lvFrmTvrSumPay]),[lvFrmTvrSumPay],0)
***
_PARAM = This.Value
USE lvFrmTvrSumFrm IN 0
USE lvFrmTvrSumPay IN 0
***
.DocumentSum = lvFrmTvrSumFrm.FrmSum
.DocumentSumPay = lvFrmTvrSumPay.FrmSumPay
.DocumentSumRest = lvFrmTvrSumFrm.FrmSum - lvFrmTvrSumPay.FrmSumPay
.DocumentSumRest = IIF(.DocumentSumRest&gt;0,.DocumentSumRest,0)

***
.DocumentVAT = lvFrmTvrSumFrm.FrmVAT
.DocumentVATPay = lvFrmTvrSumPay.FrmSumVAT
.DocumentVATRest = lvFrmTvrSumFrm.FrmVAT - lvFrmTvrSumPay.FrmSumVAT
.DocumentVATRest = IIF(.DocumentSumRest&gt;0,.DocumentSumRest,0)


***
.lblDocumentSumVal.Caption = ALLTRIM(STR(.DocumentSum,13,2))
.lblDocumentSumPayVal.Caption = ALLTRIM(STR(.DocumentSumPay,13,2))
.lblDocumentSumRestVal.Caption = ALLTRIM(STR(.DocumentSumRest,13,2))
***
USE IN IIF(USED([lvFrmTvrSumFrm]),[lvFrmTvrSumFrm],0)
USE IN IIF(USED([lvFrmTvrSumPay]),[lvFrmTvrSumPay],0)
*------------------------------------------------------------------------------

*15.07.2004 04:53 -&gt;Ïåðåñ÷èòàåì ñóììó
ThisForm.CalculateSum()
*------------------------------------------------------------------------------

ENDWITH
************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1CW12Q298</uniqueid>
		<timestamp>955864739</timestamp>
		<class>shp</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>shape</baseclass>
		<objname>shpNote</objname>
		<parent>frmprimarydocpartfrmedit</parent>
		<properties>Top = 43
Left = 5
Height = 65
Width = 593
SpecialEffect = 0
ZOrderSet = 6
Name = "shpNote"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1CW12Q299</uniqueid>
		<timestamp>955864739</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblFrmPartFrmNote</objname>
		<parent>frmprimarydocpartfrmedit</parent>
		<properties>FontBold = .T.
Caption = "Îñíîâàíèå ïëàòåæà:"
Left = 10
Top = 51
ZOrderSet = 7
Name = "lblFrmPartFrmNote"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1CW12Q29B</uniqueid>
		<timestamp>955864739</timestamp>
		<class>edt</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>editbox</baseclass>
		<objname>edtFrmPartFrmNote</objname>
		<parent>frmprimarydocpartfrmedit</parent>
		<properties>Height = 53
Left = 140
Top = 48
Width = 454
ZOrderSet = 8
ControlSource = "lvFrmPartFrmEdit.FrmPartFrmNote"
_highlightobject = ThisForm.lblFrmPartFrmNote
Name = "edtFrmPartFrmNote"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_R020K4VL1</uniqueid>
		<timestamp>955864739</timestamp>
		<class>shp</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>shape</baseclass>
		<objname>shpIncludeSum</objname>
		<parent>frmprimarydocpartfrmedit</parent>
		<properties>Top = 113
Left = 5
Height = 33
Width = 593
SpecialEffect = 0
ZOrderSet = 9
Name = "shpIncludeSum"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>955864739</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblIncludeSum</objname>
		<parent>frmprimarydocpartfrmedit</parent>
		<properties>FontBold = .T.
Caption = "Âêëþ÷àåìàÿ ñóììà:"
Left = 10
Top = 121
ZOrderSet = 10
Name = "lblIncludeSum"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1AR13CVSD</uniqueid>
		<timestamp>0</timestamp>
		<class>txt</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>txtIncludeSum</objname>
		<parent>frmprimarydocpartfrmedit</parent>
		<properties>Alignment = 3
Value = 0
ControlSource = "lvFrmPartFrmEdit.CntFrmIncludeSum"
Enabled = .F.
InputMask = "999999999.99"
Left = 140
Top = 118
DisabledForeColor = 0,0,0
ZOrderSet = 11
_highlightobject = ThisForm.opgIncludeType.Option2
Name = "txtIncludeSum"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1AC1BA1UX</uniqueid>
		<timestamp>955864739</timestamp>
		<class>shp</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>shape</baseclass>
		<objname>shpSplitProc</objname>
		<parent>frmprimarydocpartfrmedit</parent>
		<properties>Top = 151
Left = 5
Height = 33
Width = 593
SpecialEffect = 0
ZOrderSet = 12
Name = "shpSplitProc"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1AC1BA1V0</uniqueid>
		<timestamp>955864739</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblSplitProc</objname>
		<parent>frmprimarydocpartfrmedit</parent>
		<properties>FontBold = .T.
Caption = "Àëãðèòì äåëåíèÿ:"
Left = 10
Top = 159
ZOrderSet = 13
Name = "lblSplitProc"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1AC1BA1V2</uniqueid>
		<timestamp>955864739</timestamp>
		<class>cntidctlgrid</class>
		<classloc>comidctl_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>ñntIdCtlGridSplitProc</objname>
		<parent>frmprimarydocpartfrmedit</parent>
		<properties>Top = 156
Left = 140
Width = 454
Height = 24
Enabled = .F.
ZOrderSet = 14
_controlsource = lvFrmPartFrmEdit.CntFrmSumSplitProcID
_controlsourcetype = 1
_rsaliasname = lvFrmSumSplitProcList
_rsfieldnameid = ID
_rsfieldnametext = NM
Name = "ñntIdCtlGridSplitProc"
txtText.Height = 23
txtText.Left = 0
txtText.Top = 0
txtText.Width = 382
txtText._highlightobject = ThisForm.lblSplitProc
txtText.Name = "txtText"
cmdShow.Top = 0
cmdShow.Left = 408
cmdShow.Enabled = .F.
cmdShow.Name = "cmdShow"
cmdClear.Top = 0
cmdClear.Left = 431
cmdClear.Enabled = .F.
cmdClear.Name = "cmdClear"
CmdTree.Top = 0
CmdTree.Left = 384
CmdTree.Name = "CmdTree"
Olecommprox1.Top = 0
Olecommprox1.Left = 36
Olecommprox1.Height = 16
Olecommprox1.Width = 38
Olecommprox1.Name = "Olecommprox1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1C811RI5P</uniqueid>
		<timestamp>955864739</timestamp>
		<class>grd</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>grid</baseclass>
		<objname>grdFrmPartFrmSumView</objname>
		<parent>frmprimarydocpartfrmedit</parent>
		<properties>ColumnCount = 3
Height = 75
Left = 5
Panel = 1
RecordSource = "Frmpartfrm"
ScrollBars = 0
Top = 189
Width = 592
ZOrderSet = 15
Name = "grdFrmPartFrmSumView"
Column1.ControlSource = "CntFrmIncludeSumVATRate"
Column1.Width = 74
Column1.Name = "Column1"
Column2.ControlSource = "CntFrmIncludeSum"
Column2.Width = 176
Column2.Name = "Column2"
Column3.ControlSource = "CntFrmIncludeSumVAT"
Column3.Width = 126
Column3.Name = "Column3"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1C81203IS</uniqueid>
		<timestamp>0</timestamp>
		<class>header</class>
		<classloc/>
		<baseclass>header</baseclass>
		<objname>Header1</objname>
		<parent>frmprimarydocpartfrmedit.grdFrmPartFrmSumView.Column1</parent>
		<properties>Alignment = 2
Caption = "Ñòàâêà ÍÄÑ"
Name = "Header1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1C81203IT</uniqueid>
		<timestamp>948988368</timestamp>
		<class>txtgrd</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>Text1</objname>
		<parent>frmprimarydocpartfrmedit.grdFrmPartFrmSumView.Column1</parent>
		<properties>BorderStyle = 0
ControlSource = "CntFrmIncludeSumVATRate"
Margin = 0
ForeColor = 0,0,0
BackColor = 255,255,255
Name = "Text1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1C81203IU</uniqueid>
		<timestamp>0</timestamp>
		<class>header</class>
		<classloc/>
		<baseclass>header</baseclass>
		<objname>Header1</objname>
		<parent>frmprimarydocpartfrmedit.grdFrmPartFrmSumView.Column2</parent>
		<properties>Alignment = 2
Caption = "Ñóììà"
Name = "Header1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1C81203IV</uniqueid>
		<timestamp>948988368</timestamp>
		<class>txtgrd</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>Text1</objname>
		<parent>frmprimarydocpartfrmedit.grdFrmPartFrmSumView.Column2</parent>
		<properties>Alignment = 3
BorderStyle = 0
ControlSource = "CntFrmIncludeSum"
Margin = 0
ForeColor = 0,0,0
BackColor = 255,255,255
Name = "Text1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1C81203IW</uniqueid>
		<timestamp>0</timestamp>
		<class>header</class>
		<classloc/>
		<baseclass>header</baseclass>
		<objname>Header1</objname>
		<parent>frmprimarydocpartfrmedit.grdFrmPartFrmSumView.Column3</parent>
		<properties>Alignment = 2
Caption = "Ñóììà ÍÄÑ"
Name = "Header1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1C81203IX</uniqueid>
		<timestamp>948988368</timestamp>
		<class>txtgrd</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>Text1</objname>
		<parent>frmprimarydocpartfrmedit.grdFrmPartFrmSumView.Column3</parent>
		<properties>BorderStyle = 0
ControlSource = "CntFrmIncludeSumVAT"
Margin = 0
ForeColor = 0,0,0
BackColor = 255,255,255
Name = "Text1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18M0216E7</uniqueid>
		<timestamp>955864739</timestamp>
		<class>cntcancelsavehandled</class>
		<classloc>baseform_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>Cntcancelsavehandled1</objname>
		<parent>frmprimarydocpartfrmedit</parent>
		<properties>Top = 268
Left = 392
ZOrderSet = 16
Name = "Cntcancelsavehandled1"
cmdCancel.Name = "cmdCancel"
cmdOk.Name = "cmdOk"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>COMMENT</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>0</timestamp>
		<class/>
		<classloc/>
		<baseclass/>
		<objname>frmprimarydocpartfrmedit</objname>
		<parent/>
		<properties>Arial, 0, 9, 5, 15, 12, 32, 3, 0
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18I0M4ORT</uniqueid>
		<timestamp>955864848</timestamp>
		<class>frmedit</class>
		<classloc>baseform_v1.vcx</classloc>
		<baseclass>form</baseclass>
		<objname>frmprimarydocpartfrmadd</objname>
		<parent/>
		<properties>Height = 396
Width = 600
DoCreate = .T.
BorderStyle = 2
Caption = "Ñóììîâàÿ ïîçèöèÿ äîêóìåíòà"
documentsum = 0
documentsumpay = 0
documentsumrest = 0
documentvat = 0
documentvatpay = 0
documentvatrest = 0
Name = "frmprimarydocpartfrmadd"
cstmsghandler.Name = "cstmsghandler"
cstresizable.Name = "cstresizable"
Img1.Name = "Img1"
cstdatawork.Name = "cstdatawork"
</properties>
		<protected/>
		<methods>PROCEDURE _handlecntcancelsaveevent
*-------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: FRMPRIMARYDOCPARTTVREDIT._HANDLECNTCANCELSAVEEVENT
* Called by.......: &lt;.cntCancelSaveHandled.cmdOk.Click();.cntCancelSaveHandled.cmdCancel.Click()&gt;
* Parameters......: &lt;tcMessage&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Ñîõðàíåíèå/îòìåíà
*-------------------------------------------------------
LPARAMETERS	tcMessage

WITH This

*18.07.2004 22:28 -&gt;Ïðîèçâîäèì ñîõðàíåíèÿ/îòìåíÿåì èçìåíåíèÿ
IF tcMessage == [OK]
	
	*18.07.2004 22:28 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
	LOCAL	llResSave
	*------------------------------------------------------------------------------

	*18.07.2004 22:28 -&gt;Ñîõðàíèì èçìåíåíèÿ
	llResSave = .cstDataWork.Save([lvFrmPartFrmEdit])
	*------------------------------------------------------------------------------
	
	*18.07.2004 22:28 -&gt;Îáðàáîòàåì ðåçóëüòàòû ñîõðàíåíèÿ
	IF !llResSave
		IF .cstDataWork.HandleSaveFail() &amp;&amp;åñëè îøèáêà îáðàáîòàíà
			RETURN .T. &amp;&amp;âîçâðàùàåìñÿ ê ðåäàêòèðîâàíèþ
		ELSE	
			MESSAGEBOX([Â ïðîöåññå ñîõðàíåíèÿ ïðîèçîøëà îøèáêà. Èçìåíåíèÿ ñîõðàíåíû íå áóäóò.],16,[Îøèáêà...])
			.cstDataWork.Restore([lvFrmPartFrmEdit])
		ENDIF	
	ENDIF
	*------------------------------------------------------------------------------
	
	*19.10.2004 17:03 -&gt;Åñëè ñîõðàíåíèå ïðîøëî óñïåøíî
	IF llResSave
		
		*19.10.2004 16:58 -&gt;Åñëè çàïèñü ññûëàåòñÿ íà äîêóìåíò çàâåðøèì ñîõðàíåíèå, èëè çàïèøåì ñóììó âðó÷íóþ
		IF lvFrmPartFrmEdit.CntFrmID # 0 &amp;&amp;çàïèñü ññûëàåòñÿ íà äîêóìåíò
			*19.10.2004 17:00 -&gt;Âåðíåì èäåíòèôèêàòîð äîáàâëåííé çàïèñè
			.uRetVal = .cstDataWork.GetLastID([lvFrmPartFrmEdit])
			*------------------------------------------------------------------------------
		ELSE
			*19.10.2004 16:43 -&gt;Ïîëó÷èì èäåíòèôèêàòîð âíîâü äîáàâëåííîé çàïèñè
			lnFrmPartFrmID = .cstDataWork.GetLastID([lvFrmPartFrmEdit])
			*------------------------------------------------------------------------------
			
			*19.10.2004 16:44 -&gt;Åñëè çàïèñü íå ññûëàåòñÿ íà äîêóìåíò òî çàíåñåì ñóììó âðó÷íóþ
			***USE IN IIF(USED([lvFrmPartFrmSumEdit]),[lvFrmPartFrmSumEdit],0)
			***
			***USE lvFrmPartFrmSumEdit IN 0 NODATA
			***APPEND BLANK IN lvFrmPartFrmSumEdit
			***REPLACE ;
			***	FrmPartFrmID WITH lnFrmPartFrmID, ;
			***	FrmPartFrmSum WITH .pgfSum.pgSum.txtIncludeSum.Value, ;
			***	FrmPartFrmSumVATRate WITH .pgfSum.pgSum.txtVatRate.Value IN lvFrmPartFrmSumEdit
			*------------------------------------------------------------------------------

			*!*				*19.10.2004 17:05 -&gt;Ñîõðàíèì èçìåíåíèÿ
			*!*				llResSave = .cstDataWork.Save([lvFrmPartFrmSumEdit])
			*!*				*------------------------------------------------------------------------------
			*!*				
			*!*				*19.10.2004 17:05 -&gt;Îáðàáîòàåì ðåçóëüòàòû ñîõðàíåíèÿ
			*!*				IF !llResSave
			*!*					IF .cstDataWork.HandleSaveFail() &amp;&amp;åñëè îøèáêà îáðàáîòàíà
			*!*						RETURN .T. &amp;&amp;âîçâðàùàåìñÿ ê ðåäàêòèðîâàíèþ
			*!*					ELSE	
			*!*						MESSAGEBOX([Â ïðîöåññå ñîõðàíåíèÿ ïðîèçîøëà îøèáêà. Èçìåíåíèÿ ñîõðàíåíû íå áóäóò.],16,[Îøèáêà...])
			*!*						.cstDataWork.Restore([lvFrmPartFrmSumEdit])
			*!*					ENDIF	
			*!*				ENDIF
					*------------------------------------------------------------------------------
			
			*19.10.2004 17:06 -&gt;Ñîõðàíèì ðåçóëüòàòû
			IF llResSave
				*19.10.2004 17:00 -&gt;Âåðíåì èäåíòèôèêàòîð äîáàâëåííé çàïèñè
				.uRetVal = lnFrmPartFrmID
				*------------------------------------------------------------------------------
			ELSE
				*19.10.2004 17:00 -&gt;Âåðíåì .F.
				.uRetVal = .F.
				*------------------------------------------------------------------------------		
			ENDIF
			*------------------------------------------------------------------------------

		ENDIF
		*------------------------------------------------------------------------------
		
	ELSE
		
		*19.10.2004 17:00 -&gt;Âåðíåì .F.
		.uRetVal = .F.
		*------------------------------------------------------------------------------	
		
	ENDIF
	*------------------------------------------------------------------------------
	
ELSE

	*17.05.2004 02:04 -&gt;Îòìåíèì èçìåíåíèÿ âíåñåííûå â LV
	.cstDataWork.Restore([lvFrmPartFrmEdit])
	.uRetVal = .F.
	*------------------------------------------------------------------------------
	
ENDIF
*------------------------------------------------------------------------------

*17.05.2004 02:07 -&gt;Ñêðûâàåì ôîðìó
.Hide()
*------------------------------------------------------------------------------

ENDWITH
************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************
ENDPROC
PROCEDURE calculatesum
*-------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: FRMPRIMARYDOCPARTFRMADD.CALCULATESUM
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Ðàññ÷åò âêëþ÷àåìîé ñóììû
*-------------------------------------------------------
WITH ThisForm

*15.07.2004 05:03 -&gt;Ðàñ÷èòûâàåì âêëþ÷àåìóþ ñóììó
DO CASE
	CASE .pgfSum.pgSumFrm.opgIncludeType.Value = 1
		.pgfSum.pgSumFrm.txtIncludeSum.Value = .DocumentSumRest
		.pgfSum.pgSumFrm.txtIncludeVat.Value = .DocumentVatRest
	CASE .pgfSum.pgSumFrm.opgIncludeType.Value = 2
		.pgfSum.pgSumFrm.txtIncludeSum.Value  = .pgfSum.pgSumFrm.txtSum.Value
		.pgfSum.pgSumFrm.txtIncludeVat.Value  = .pgfSum.pgSumFrm.txtVat.Value
	CASE .pgfSum.pgSumFrm.opgIncludeType.Value = 3
		.pgfSum.pgSumFrm.txtIncludeSum.Value  = ROUND(IIF(.pgfSum.pgSumFrm.chkPerCentFrom.Value,.DocumentSumRest,.DocumentSum) * .pgfSum.pgSumFrm.txtPerCent.Value / 100,2)
		.pgfSum.pgSumFrm.txtIncludeVat.Value  = ROUND(IIF(.pgfSum.pgSumFrm.chkPerCentFrom.Value,.DocumentVatRest,.DocumentVat) * .pgfSum.pgSumFrm.txtPerCent.Value / 100,2)
ENDCASE
*------------------------------------------------------------------------------

ENDWITH
************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************
ENDPROC
PROCEDURE calculatevatsum
*-------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: FRMPRIMARYDOCPARTFRMADD.CALCULATEVATSUM
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Ðàñ÷åò ñóììû ÍÄÑ ïðè îïëàòå ïðîñòî ñóììû
*-------------------------------------------------------
WITH ThisForm.pgfSum.pgSum

*19.10.2004 15:38 -&gt;Ðàñ÷èòàåì ñóììó ÍÄÑ
.txtVatSum.Value = ROUND(.txtIncludeSum.Value*.txtVatRate.Value/(100+.txtVatRate.Value),2)
*------------------------------------------------------------------------------

ENDWITH
************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************
ENDPROC
PROCEDURE Init
*-------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: FRMPRIMARYDOCPARTFRMEDIT.INIT
* Called by.......: &lt;Sys Event&gt;
* Parameters......: &lt;tnFrmID&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Èíèöèàëèçàöèÿ ôîðìû
*-------------------------------------------------------
LPARAMETERS	tnFrmID

*17.05.2004 01:26 -&gt;Âûïîëíèì ìåòîä ðîäèòåëüñêîãî êëàññà
DODEFAULT()
*------------------------------------------------------------------------------
*19.10.2004 11:23 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	lcPayListDocTable
*------------------------------------------------------------------------------

*12.05.2004 00:32 -&gt;Äîáàâèì ïóñòóþ çàïèñü è çàïèøåì èäåíòèôèêàòîð ðîäèòåëüñêîãî äîêóìåíòà
APPEND BLANK IN lvFrmPartFrmEdit
***
REPLACE FrmID WITH tnFrmID IN lvFrmPartFrmEdit
*------------------------------------------------------------------------------

*15.07.2004 02:29 -&gt;Îòêðîåì ñïèñîê äîêóìåíòîâ íà îïëàòó
lcPayListDocTable = spGetPayListDoc(tnFrmID)
USE (lcPayListDocTable) IN 0 ALIAS FrmToPartFrmList
*------------------------------------------------------------------------------

*19.10.2004 11:40 -&gt;Íàñòðîèì âíåøíèé âèä ôîðìû
This.Caption = This.Caption + [ - Äîáàâëåíèå]
This.Icon = FULLPATH([frmadd.ico])
*------------------------------------------------------------------------------

************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************

ENDPROC
PROCEDURE Load
*-------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: FRMPRIMARYDOCPARTFRMEDIT.LOAD
* Called by.......: &lt;Sys Event&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Çàãðóçêà ôîðìû (îòêðûòèå ñïðàâî÷íèêîâ)
*-------------------------------------------------------
*17.05.2004 01:32 -&gt;Âûïîëíèì ìåòîä ðîäèòåëüñêîãî êëàññà
DODEFAULT()
*------------------------------------------------------------------------------

*17.05.2004 01:32 -&gt;Îòêðîåì ÁÄ è óñòàíîâèì å¸ â êà÷åñòâå òåêóùåé
IF !DBUSED([BASIS])
	OPEN DATABASE BASIS
ENDIF
SET DATABASE TO BASIS
*------------------------------------------------------------------------------

*15.07.2004 03:32 -&gt;Îòêðîåì ñïèñîê àëãîðèòìîâ äåëåíèÿ ñóìì âêëþ÷àåìûõ äîêóìåíòîâ
USE lvFrmSumSplitProcList IN 0
*------------------------------------------------------------------------------

*15.07.2004 02:29 -&gt;Îòêðîåì LV äëÿ ðåäàêòèðîâàíèÿ ñîäåðæàíèÿ äîêóìåíòà (ñóììîâîé ïîçèöèè)
USE lvFrmPartFrmEdit IN 0 NODATA
*------------------------------------------------------------------------------
************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************
ENDPROC
PROCEDURE Unload
*-------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: FRMPRIMARYDOCPARTFRMADD.UNLOAD
* Called by.......: &lt;Sys Event&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Çàêðûòèå è óäàëåíèå âðåìåííîé òàáëèöû
*-------------------------------------------------------

*24.09.2004 16:19 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	lcTmpTable
*------------------------------------------------------------------------------

*24.09.2004 16:19 -&gt; Ïîëó÷èì ìåñòîïîëîæåíèå âðåìåííîé òàáëèöû
lcTmpTable = DBF([FrmToPartFrmList])
*------------------------------------------------------------------------------

*24.09.2004 16:20 -&gt; Óäàëèì âðåìåííóþ òàáëèöó
USE IN IIF(USED([FrmToPartFrmList]),[FrmToPartFrmList],0)
IF FILE(lcTmpTable)
	ERASE (lcTmpTable)
ENDIF
*------------------------------------------------------------------------------

*19.10.2004 11:15 -&gt;Âûïîëíèì ìåòîä ðîäèòåëüñêîãî êëàññà
DODEFAULT()
*----------------------------------------------------------------------------

************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1>Class</reserved1>
		<reserved2>38</reserved2>
		<reserved3>documentsum Îáùàÿ ñóììà âêëþ÷àåìîãî äîêóìåíòà
documentsumpay Îïëà÷åííàÿ ñóììà âêëþ÷àåìîãî äîêóìåíòà
documentsumrest Îñòàòî÷íàÿ ñóììà âêëþ÷àåìîãî äîêóìåíòà
documentvat Ñóììà ÍÄÑ ïî äîêóìåíòó
documentvatpay Îïëà÷åíûé íäñ ïî ýòîìó äîêóìåíòó
documentvatrest Îñòàòîê ÍÄÑ ïî ýòîìó äîêóìåíòó
*calculatesum &lt;public&gt; Ðàññ÷åò ñóìì.
*calculatevatsum Ðàñ÷åò ñóììû ÍÄÑ ïðè îïëàòå ïðîñòî ñóììû
</reserved3>
		<reserved4/>
		<reserved5/>
		<reserved6>Pixels</reserved6>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1CX0VS9PT</uniqueid>
		<timestamp>955864849</timestamp>
		<class>pageframe</class>
		<classloc/>
		<baseclass>pageframe</baseclass>
		<objname>pgfSum</objname>
		<parent>frmprimarydocpartfrmadd</parent>
		<properties>ErasePage = .T.
PageCount = 2
TabStyle = 0
ActivePage = 2
Top = 181
Left = 5
Width = 593
Height = 178
Tabs = .F.
ZOrderSet = 0
Name = "pgfSum"
Page1.Caption = "Page1"
Page1.Name = "pgSumFrm"
Page2.Caption = "Page2"
Page2.Name = "pgSum"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1CX0VS9PV</uniqueid>
		<timestamp>920888314</timestamp>
		<class>opg</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>optiongroup</baseclass>
		<objname>opgIncludeType</objname>
		<parent>frmprimarydocpartfrmadd.pgfSum.pgSumFrm</parent>
		<properties>ButtonCount = 3
Value = 1
Height = 89
Left = 5
Top = 5
Width = 377
ZOrderSet = 17
Name = "opgIncludeType"
Option1.FontBold = .T.
Option1.Caption = "Âñþ ñóììó"
Option1.Value = 1
Option1.Height = 17
Option1.Left = 5
Option1.Top = 8
Option1.Width = 81
Option1.AutoSize = .T.
Option1.Name = "Option1"
Option2.FontBold = .T.
Option2.Caption = "Ñóììó"
Option2.Height = 17
Option2.Left = 5
Option2.Top = 36
Option2.Width = 54
Option2.AutoSize = .T.
Option2.Name = "Option2"
Option3.FontBold = .T.
Option3.Caption = "Ïðîöåíò"
Option3.Height = 17
Option3.Left = 5
Option3.Top = 64
Option3.Width = 67
Option3.AutoSize = .T.
Option3.Name = "Option3"
</properties>
		<protected/>
		<methods>PROCEDURE _handleanychange
WITH This

*19.10.2004 15:29 -&gt;Âûñòàâèì àêòèâíîñòü
This.Parent.txtSum.Enabled = (.Value = 2)
This.Parent.txtVat.Enabled = (.Value = 2)
This.Parent.txtPerCent.Enabled = (.Value = 3)
*------------------------------------------------------------------------------

*15.07.2004 04:53 -&gt;Ïåðåñ÷èòàåì ñóììó
ThisForm.CalculateSum()
*------------------------------------------------------------------------------

ENDWITH
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1ON0L3DWH</uniqueid>
		<timestamp>0</timestamp>
		<class>txt</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>txtSum</objname>
		<parent>frmprimarydocpartfrmadd.pgfSum.pgSumFrm</parent>
		<properties>Alignment = 3
Value = 0
Enabled = .F.
InputMask = "999999999.99"
Left = 133
Top = 38
DisabledForeColor = 0,0,0
ZOrderSet = 19
_highlightobject = .parent.opgIncludeType.Option2
_convertcommatopoint = .T.
Name = "txtSum"
</properties>
		<protected/>
		<methods>PROCEDURE _handleanychange
ThisForm.CalculateSum()
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1ON0OUJQ9</uniqueid>
		<timestamp>0</timestamp>
		<class>txt</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>txtPerCent</objname>
		<parent>frmprimarydocpartfrmadd.pgfSum.pgSumFrm</parent>
		<properties>Alignment = 3
Value = 0
Enabled = .F.
InputMask = "999"
Left = 133
Top = 66
DisabledForeColor = 0,0,0
ZOrderSet = 20
_highlightobject = .parent.opgIncludeType.Option3
_convertcommatopoint = .T.
Name = "txtPerCent"
</properties>
		<protected/>
		<methods>PROCEDURE _handleanychange
ThisForm.CalculateSum()
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1CX0VS9Q4</uniqueid>
		<timestamp>955864849</timestamp>
		<class>chk</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>checkbox</baseclass>
		<objname>chkPerCentFrom</objname>
		<parent>frmprimarydocpartfrmadd.pgfSum.pgSumFrm</parent>
		<properties>Top = 69
Left = 238
FontBold = .T.
Alignment = 0
Caption = "îò îñòàòêà"
Value = .F.
ZOrderSet = 21
Name = "chkPerCentFrom"
</properties>
		<protected/>
		<methods>PROCEDURE _handleanychange
ThisForm.CalculateSum()
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_R020K4VL1</uniqueid>
		<timestamp>955864849</timestamp>
		<class>shp</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>shape</baseclass>
		<objname>shpIncludeSum</objname>
		<parent>frmprimarydocpartfrmadd.pgfSum.pgSumFrm</parent>
		<properties>Top = 99
Left = 5
Height = 33
Width = 377
SpecialEffect = 0
ZOrderSet = 22
Name = "shpIncludeSum"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>955864849</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblIncludeSum</objname>
		<parent>frmprimarydocpartfrmadd.pgfSum.pgSumFrm</parent>
		<properties>FontBold = .T.
Caption = "Âêëþ÷àåìàÿ ñóììà:"
Left = 10
Top = 107
ZOrderSet = 23
Name = "lblIncludeSum"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1ON0OUJQ9</uniqueid>
		<timestamp>0</timestamp>
		<class>txt</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>txtIncludeSum</objname>
		<parent>frmprimarydocpartfrmadd.pgfSum.pgSumFrm</parent>
		<properties>Alignment = 3
Value = 0
ControlSource = "lvFrmPartFrmEdit.CntFrmIncludeSum"
Enabled = .F.
InputMask = "999999999.99"
Left = 133
Top = 104
DisabledForeColor = 0,0,0
ZOrderSet = 24
Name = "txtIncludeSum"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1CX0VS9QA</uniqueid>
		<timestamp>955864849</timestamp>
		<class>shp</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>shape</baseclass>
		<objname>shpSplitProc</objname>
		<parent>frmprimarydocpartfrmadd.pgfSum.pgSumFrm</parent>
		<properties>Top = 137
Left = 5
Height = 33
Width = 377
SpecialEffect = 0
ZOrderSet = 25
Name = "shpSplitProc"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1CX0VS9QC</uniqueid>
		<timestamp>955864849</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblSplitProc</objname>
		<parent>frmprimarydocpartfrmadd.pgfSum.pgSumFrm</parent>
		<properties>FontBold = .T.
Caption = "Àëãðèòì äåëåíèÿ:"
Left = 10
Top = 145
ZOrderSet = 26
Name = "lblSplitProc"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1CX0VS9QD</uniqueid>
		<timestamp>955864849</timestamp>
		<class>cntidctlgrid</class>
		<classloc>comidctl_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>ñntIdCtlGridSplitProc</objname>
		<parent>frmprimarydocpartfrmadd.pgfSum.pgSumFrm</parent>
		<properties>Top = 142
Left = 133
Width = 238
Height = 23
ZOrderSet = 27
_controlsource = lvFrmPartFrmEdit.CntFrmSumSplitProcID
_controlsourcetype = 1
_rsaliasname = lvFrmSumSplitProcList
_rsfieldnameid = ID
_rsfieldnametext = NM
Name = "ñntIdCtlGridSplitProc"
txtText.Height = 23
txtText.Left = 0
txtText.Top = 0
txtText.Width = 187
txtText._highlightobject = .parent.parent.lblSplitProc
txtText.Name = "txtText"
cmdShow.Top = 0
cmdShow.Left = 191
cmdShow.Name = "cmdShow"
cmdClear.Top = 0
cmdClear.Left = 214
cmdClear.Name = "cmdClear"
CmdTree.Name = "CmdTree"
Olecommprox1.Top = 0
Olecommprox1.Left = 36
Olecommprox1.Height = 16
Olecommprox1.Width = 38
Olecommprox1.Name = "Olecommprox1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1CX0VS9QG</uniqueid>
		<timestamp>955864849</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblIncludeType</objname>
		<parent>frmprimarydocpartfrmadd.pgfSum.pgSumFrm</parent>
		<properties>FontBold = .T.
BackStyle = 1
Caption = "Îïëàòèòü:"
Left = 8
Top = 0
ZOrderSet = 18
Name = "lblIncludeType"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_24H1806GH</uniqueid>
		<timestamp>920888314</timestamp>
		<class>txt</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>TxtVat</objname>
		<parent>frmprimarydocpartfrmadd.pgfSum.pgSumFrm</parent>
		<properties>Alignment = 3
Value = 0
Enabled = .F.
InputMask = "999999999.99"
Left = 275
Top = 37
DisabledForeColor = 0,0,0
ZOrderSet = 19
_highlightobject = .parent.opgIncludeType.Option2
_convertcommatopoint = .T.
Name = "TxtVat"
</properties>
		<protected/>
		<methods>PROCEDURE _handleanychange
ThisForm.CalculateSum()
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_24H1806GK</uniqueid>
		<timestamp>920888512</timestamp>
		<class>txt</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>txtIncludeVat</objname>
		<parent>frmprimarydocpartfrmadd.pgfSum.pgSumFrm</parent>
		<properties>Alignment = 3
Value = 0
ControlSource = "lvFrmPartFrmEdit.CntFrmIncludeSumVAT"
Enabled = .F.
InputMask = "999999999.99"
Left = 275
Top = 103
DisabledForeColor = 0,0,0
ZOrderSet = 24
Name = "txtIncludeVat"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1CX0WP6FK</uniqueid>
		<timestamp>955864849</timestamp>
		<class>shp</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>shape</baseclass>
		<objname>shpIncludeSum</objname>
		<parent>frmprimarydocpartfrmadd.pgfSum.pgSum</parent>
		<properties>Top = 5
Left = 5
Height = 89
Width = 580
SpecialEffect = 0
ZOrderSet = 22
Name = "shpIncludeSum"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_R020K4VL1</uniqueid>
		<timestamp>955864849</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblIncludeSum</objname>
		<parent>frmprimarydocpartfrmadd.pgfSum.pgSum</parent>
		<properties>FontBold = .T.
Caption = "Îïëà÷èâàåìàÿ ñóììà:"
Left = 10
Top = 13
ZOrderSet = 23
Name = "lblIncludeSum"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>920887739</timestamp>
		<class>txt</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>txtIncludeSum</objname>
		<parent>frmprimarydocpartfrmadd.pgfSum.pgSum</parent>
		<properties>Alignment = 3
Value = 0
ControlSource = "lvFrmPartFrmEdit.CntFrmIncludeSum"
InputMask = "999999999.99"
Left = 143
Top = 10
ZOrderSet = 24
_highlightobject = .parent.lblIncludeSum
_convertcommatopoint = .T.
Name = "txtIncludeSum"
</properties>
		<protected/>
		<methods>PROCEDURE _handleanychange
ThisForm.CalculateVatSum()
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_R020K4VL1</uniqueid>
		<timestamp>955864849</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblVatRate</objname>
		<parent>frmprimarydocpartfrmadd.pgfSum.pgSum</parent>
		<properties>FontBold = .T.
Caption = "Ñòàâêà ÍÄÑ:"
Left = 10
Top = 39
ZOrderSet = 23
Name = "lblVatRate"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>920887739</timestamp>
		<class>txt</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>txtVatRate</objname>
		<parent>frmprimarydocpartfrmadd.pgfSum.pgSum</parent>
		<properties>Alignment = 3
Value = 0
InputMask = "99"
Left = 143
Top = 38
ZOrderSet = 24
_highlightobject = .parent.lblVatRate
_convertcommatopoint = .T.
Name = "txtVatRate"
</properties>
		<protected/>
		<methods>PROCEDURE _handleanychange
ThisForm.CalculateVatSum()
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1CX0WP6FR</uniqueid>
		<timestamp>955864849</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblVatSum</objname>
		<parent>frmprimarydocpartfrmadd.pgfSum.pgSum</parent>
		<properties>FontBold = .T.
Caption = "Ñóììà ÍÄÑ:"
Left = 10
Top = 65
ZOrderSet = 23
Name = "lblVatSum"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1CX0WP6FT</uniqueid>
		<timestamp>920886826</timestamp>
		<class>txt</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>txtVatSum</objname>
		<parent>frmprimarydocpartfrmadd.pgfSum.pgSum</parent>
		<properties>Alignment = 3
Value = 0
ControlSource = "lvFrmPartFrmEdit.CntFrmIncludeSumVAT"
InputMask = "9999999.9999"
Left = 143
Top = 66
DisabledForeColor = 0,0,0
ZOrderSet = 24
_highlightobject = .parent.lblVatSum
Name = "txtVatSum"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18M0216E7</uniqueid>
		<timestamp>955864849</timestamp>
		<class>cntcancelsavehandled</class>
		<classloc>baseform_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>Cntcancelsavehandled1</objname>
		<parent>frmprimarydocpartfrmadd</parent>
		<properties>Top = 366
Left = 393
ZOrderSet = 1
Name = "Cntcancelsavehandled1"
cmdCancel.Name = "cmdCancel"
cmdOk.Name = "cmdOk"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_R020K4VL1</uniqueid>
		<timestamp>955864849</timestamp>
		<class>shp</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>shape</baseclass>
		<objname>shpFrm</objname>
		<parent>frmprimarydocpartfrmadd</parent>
		<properties>Top = 5
Left = 5
Height = 102
Width = 593
SpecialEffect = 0
ZOrderSet = 5
Name = "shpFrm"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>955864849</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblFrm</objname>
		<parent>frmprimarydocpartfrmadd</parent>
		<properties>FontBold = .T.
Caption = "Äîêóìåíò:"
Left = 10
Top = 13
ZOrderSet = 6
Name = "lblFrm"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_R020K4VL1</uniqueid>
		<timestamp>955864849</timestamp>
		<class>cntidctlgrid</class>
		<classloc>comidctl_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>cntIdCtlGridCntFrm</objname>
		<parent>frmprimarydocpartfrmadd</parent>
		<properties>Top = 10
Left = 140
Width = 452
Height = 23
ZOrderSet = 7
_controlsource = lvFrmPartFrmEdit.CntFrmID
_controlsourcetype = 1
_rsfieldnameid = ID
_rsfieldnametext = NM
_rsaliasname = FrmToPartFrmList
_showtextempty = Äîêóìåíò íå îïðåäåëåí
Name = "cntIdCtlGridCntFrm"
txtText.Height = 23
txtText.Left = 0
txtText.Top = 0
txtText.Width = 404
txtText._highlightobject = .parent.parent.lblFrm
txtText.Name = "txtText"
cmdShow.Top = 0
cmdShow.Left = 406
cmdShow.Name = "cmdShow"
cmdClear.Top = 0
cmdClear.Left = 429
cmdClear.Name = "cmdClear"
CmdTree.Name = "CmdTree"
Olecommprox1.Top = 0
Olecommprox1.Left = 36
Olecommprox1.Height = 16
Olecommprox1.Width = 38
Olecommprox1.Name = "Olecommprox1"
</properties>
		<protected/>
		<methods>PROCEDURE _refreshrelatedobjects
*-------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRINARYDOC_V1.VCX
* Class.Module....: CNTIDCTLGRIDFRM._HANDLEANYCHANGE
* Called by.......: &lt;ObjectEvent&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Îáðàáîòêà èçìåíåíèÿ çíà÷åíèÿ ýëåìåíòà.
*-------------------------------------------------------
WITH ThisForm
*15.07.2004 04:50 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	_PARAM
*------------------------------------------------------------------------------

*19.10.2004 15:13 -&gt;Ïðîâåðèì îïëà÷èâàåì äîêóìåíò èëè ñóììó
IF lvFrmPartFrmEdit.CntFrmID = 0

	*19.10.2004 15:20 -&gt;Î÷èñòèì ñóììó âûáðàííîãî äîêóìåíòà
	.lblDocumentSumVal.Caption = [íåäîñòóïíî]
	.lblDocumentSumPayVal.Caption = [íåäîñòóïíî]
	.lblDocumentSumRestVal.Caption = [íåäîñòóïíî]
	*------------------------------------------------------------------------------
	.lblDocumentVatVal.Caption = [íåäîñòóïíî]
	.lblDocumentVatPayVal.Caption = [íåäîñòóïíî]
	.lblDocumentVatRestVal.Caption = [íåäîñòóïíî]
	*------------------------------------------------------------------------------

	*19.10.2004 15:12 -&gt;Î÷èñòèì îñíîâàíèå ïëàòåæà
	.edtFrmPartFrmNote.Value = []
	*------------------------------------------------------------------------------
	
	*19.10.2004 15:14 -&gt;Âûñòàâèì àêòèâíóþ ñòðàíèöó
	.pgfSum.ActivePage = 2
	*------------------------------------------------------------------------------
	
	*20.10.2004 12:34 -&gt;Î÷èñòèì ñóììó è ñòàâêó ÍÄÑ
	.pgfSum.pgSum.txtIncludeSum.Value = 0
	.pgfSum.pgSum.txtVatRate.Value = 18 &amp;&amp; GVFC
	*------------------------------------------------------------------------------
	
	*20.10.2004 12:39 -&gt;Î÷èñòèì êîä àëãîðèòìà äåëåíèÿ ñóììû
	.pgfSum.pgSumFrm.ñntIdCtlGridSplitProc.SetValue(0)
	*------------------------------------------------------------------------------
	
ELSE

	*15.07.2004 04:50 -&gt;Ïîëó÷èì ñóììó âûáðàííîãî äîêóìåíòà
	USE IN IIF(USED([lvFrmTvrSumFrm]),[lvFrmTvrSumFrm],0)
	USE IN IIF(USED([lvFrmTvrSumPay]),[lvFrmTvrSumPay],0)
	***
	_PARAM = This.Value
	USE lvFrmTvrSumFrm IN 0
	USE lvFrmTvrSumPay IN 0
	***
	.DocumentSum = NVL(lvFrmTvrSumFrm.FrmSum,0)
	.DocumentSumPay = NVL(lvFrmTvrSumPay.FrmSumPay,0)
	.DocumentSumRest = NVL(lvFrmTvrSumFrm.FrmSum,0) - NVL(lvFrmTvrSumPay.FrmSumPay,0)
	.DocumentSumRest = IIF(.DocumentSumRest&gt;0,.DocumentSumRest,0)
	***
.DocumentVAT = lvFrmTvrSumFrm.FrmVAT
.DocumentVATPay = lvFrmTvrSumPay.FrmSumVAT
.DocumentVATRest = lvFrmTvrSumFrm.FrmVAT - lvFrmTvrSumPay.FrmSumVAT
.DocumentVATRest = IIF(.DocumentVATRest&gt;0,.DocumentVATRest,0)

***
	
	.lblDocumentSumVal.Caption = ALLTRIM(STR(.DocumentSum,13,2))
	.lblDocumentSumPayVal.Caption = ALLTRIM(STR(.DocumentSumPay,13,2))
	.lblDocumentSumRestVal.Caption = ALLTRIM(STR(.DocumentSumRest,13,2))
	***
	.lblDocumentVatVal.Caption = ALLTRIM(STR(.DocumentVAT,13,2))
	.lblDocumentVatPayVal.Caption = ALLTRIM(STR(.DocumentVATPay,13,2))
	.lblDocumentVatRestVal.Caption = ALLTRIM(STR(.DocumentVATRest,13,2))
	***
	USE IN IIF(USED([lvFrmTvrSumFrm]),[lvFrmTvrSumFrm],0)
	USE IN IIF(USED([lvFrmTvrSumPay]),[lvFrmTvrSumPay],0)
	*------------------------------------------------------------------------------

	*15.07.2004 04:53 -&gt;Ïåðåñ÷èòàåì ñóììó
	.CalculateSum()
	*------------------------------------------------------------------------------

	*19.10.2004 15:12 -&gt;Çàïîëíèì îñíîâàíèå ïëàòåæà
	.edtFrmPartFrmNote.Value = [îïëàòà ïî ] + This.txtText.Value
	*------------------------------------------------------------------------------

	*19.10.2004 15:14 -&gt;Âûñòàâèì àêòèâíóþ ñòðàíèöó
	.pgfSum.ActivePage = 1
	*------------------------------------------------------------------------------
	
	*20.10.2004 12:42 -&gt;Âûñòàâèì êîä àëãîðèòìà äåëåíèÿ ñóììû ïî óìîë÷àíèþ
	IF 	.pgfSum.pgSumFrm.ñntIdCtlGridSplitProc.Value = 0
		.pgfSum.pgSumFrm.ñntIdCtlGridSplitProc.SetValue(1) &amp;&amp; GVFC
	ENDIF	
	*------------------------------------------------------------------------------
	
ENDIF
*------------------------------------------------------------------------------

ENDWITH
************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_R020K4VL1</uniqueid>
		<timestamp>955864849</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblDocumentSum</objname>
		<parent>frmprimarydocpartfrmadd</parent>
		<properties>FontBold = .T.
Caption = "Ñóììà ïî äîêóìåíòó:"
Left = 10
Top = 41
ZOrderSet = 8
Name = "lblDocumentSum"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_24H17AUF7</uniqueid>
		<timestamp>955864849</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblDocumentVatVal</objname>
		<parent>frmprimarydocpartfrmadd</parent>
		<properties>FontBold = .T.
Caption = "íåäîñòóïíî"
Left = 319
Top = 41
ZOrderSet = 9
Name = "lblDocumentVatVal"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1ON0L3DWH</uniqueid>
		<timestamp>955864849</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblDocumentSumVal</objname>
		<parent>frmprimarydocpartfrmadd</parent>
		<properties>FontBold = .T.
Caption = "íåäîñòóïíî"
Left = 140
Top = 41
ZOrderSet = 9
Name = "lblDocumentSumVal"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_24H17AUF8</uniqueid>
		<timestamp>955864849</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblDocumentVatPayVal</objname>
		<parent>frmprimarydocpartfrmadd</parent>
		<properties>FontBold = .T.
Caption = "íåäîñòóïíî"
Left = 319
Top = 64
ZOrderSet = 11
Name = "lblDocumentVatPayVal"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_R020K4VL1</uniqueid>
		<timestamp>955864849</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblDocumentSumPay</objname>
		<parent>frmprimarydocpartfrmadd</parent>
		<properties>FontBold = .T.
Caption = "Îïëà÷åíî:"
Left = 10
Top = 64
ZOrderSet = 10
Name = "lblDocumentSumPay"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_24H17AUF9</uniqueid>
		<timestamp>955864849</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblDocumentVatRestVal</objname>
		<parent>frmprimarydocpartfrmadd</parent>
		<properties>FontBold = .T.
Caption = "íåäîñòóïíî"
Left = 319
Top = 87
ZOrderSet = 13
Name = "lblDocumentVatRestVal"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1ON0OUJQ9</uniqueid>
		<timestamp>955864849</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblDocumentSumPayVal</objname>
		<parent>frmprimarydocpartfrmadd</parent>
		<properties>FontBold = .T.
Caption = "íåäîñòóïíî"
Left = 140
Top = 64
ZOrderSet = 11
Name = "lblDocumentSumPayVal"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_R020K4VL1</uniqueid>
		<timestamp>955864849</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblDocumentSumRest</objname>
		<parent>frmprimarydocpartfrmadd</parent>
		<properties>FontBold = .T.
Caption = "Îñòàòîê:"
Left = 10
Top = 87
ZOrderSet = 12
Name = "lblDocumentSumRest"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18I0M4ORT</uniqueid>
		<timestamp>955864849</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblDocumentSumRestVal</objname>
		<parent>frmprimarydocpartfrmadd</parent>
		<properties>FontBold = .T.
Caption = "íåäîñòóïíî"
Left = 140
Top = 87
ZOrderSet = 13
Name = "lblDocumentSumRestVal"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_R020K4VL1</uniqueid>
		<timestamp>955864849</timestamp>
		<class>shp</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>shape</baseclass>
		<objname>shpNote</objname>
		<parent>frmprimarydocpartfrmadd</parent>
		<properties>Top = 112
Left = 5
Height = 65
Width = 593
SpecialEffect = 0
ZOrderSet = 14
Name = "shpNote"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>955864849</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblFrmPartFrmNote</objname>
		<parent>frmprimarydocpartfrmadd</parent>
		<properties>FontBold = .T.
Caption = "Îñíîâàíèå ïëàòåæà:"
Left = 10
Top = 120
ZOrderSet = 15
Name = "lblFrmPartFrmNote"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18L1B4NYC</uniqueid>
		<timestamp>955864849</timestamp>
		<class>edt</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>editbox</baseclass>
		<objname>edtFrmPartFrmNote</objname>
		<parent>frmprimarydocpartfrmadd</parent>
		<properties>Height = 53
Left = 150
Top = 117
Width = 442
ZOrderSet = 16
ControlSource = "lvFrmPartFrmEdit.FrmPartFrmNote"
_highlightobject = ThisForm.lblFrmPartFrmNote
Name = "edtFrmPartFrmNote"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>COMMENT</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>0</timestamp>
		<class/>
		<classloc/>
		<baseclass/>
		<objname>frmprimarydocpartfrmadd</objname>
		<parent/>
		<properties>Arial, 0, 9, 5, 15, 12, 32, 3, 0
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1LD11N1B5</uniqueid>
		<timestamp>958112298</timestamp>
		<class>comtxtctlcalclen</class>
		<classloc>comtxtctl_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>comtxtctlcalclentluidbytlu</objname>
		<parent/>
		<properties>Width = 273
ntvrid = 0
cbarcode = 
Name = "comtxtctlcalclentluidbytlu"
txtText.Name = "txtText"
lblLen.Name = "lblLen"
</properties>
		<protected/>
		<methods>PROCEDURE Refresh
IF NOT EMPTY(this.cbarcode)
this.txtText.Value=this.cbarcode
ENDIF
DODEFAULT()

ENDPROC
PROCEDURE txtText.KeyPress
LPARAMETERS nKeyCode, nShiftAltCtrl
IF nKeyCode = 13
NODEFAULT
	This.Parent.cmdFind.Click()
ENDIF
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1>Class</reserved1>
		<reserved2>3</reserved2>
		<reserved3>ntvrid Èäåíòèôèêàòîð òîâàðà
cbarcode Ïîñëåäíèé øòðèõ-êîä, ñ÷èòàíûé ñêàíåðîì
*_handleanychange Îáðàáîòêà èçìåíåíÿè ñîñòîÿíèÿ îáúåêòà
</reserved3>
		<reserved4/>
		<reserved5/>
		<reserved6>Pixels</reserved6>
		<reserved7>Ïîèñê òîâàðà ïî êîäó è øòðèõ-êîäó</reserved7>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1LD11T54C</uniqueid>
		<timestamp>958112298</timestamp>
		<class>cmd</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>cmdFind</objname>
		<parent>comtxtctlcalclentluidbytlu</parent>
		<properties>Left = 227
Height = 23
Width = 23
Picture = ..\graphic\comtxtctlcalclentvridbytlu.bmp
Caption = ""
Name = "cmdFind"
</properties>
		<protected/>
		<methods>PROCEDURE Click
*------------------------------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: ComTxtCtl_v2.vcx
* Class.Module....: cmdTLUIDByTLU.Click
* Called by.......: &lt;Sys Event&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Ïîèñê èäåíòèôèêàòîðà òîâàðà ïî ØÊ
*------------------------------------------------------------------------------

*19.08.2005 11:36 -&gt; Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	_PARAM, ;
		lcOldAlias, ;
		lnOldTvrID
***
lcOldAlias = ALIAS()
*------------------------------------------------------------------------------

*19.08.2005 11:37 -&gt; Íàéä¸ì èäåíòèôèêàòîð òîâàðà ïî ØÊ
_PARAM = ALLTRIM(This.Parent.txtText.Value)
IF NOT USED([lvTovarLookUpByTLU])
USE lvTovarLookUpByTLU IN 0
ELSE
REQUERY([lvTovarLookUpByTLU])
endif
***
*------------------------------------------------------------------------------
*19.08.2005 11:37 -&gt; 18:15 -&gt; Ïðîâåðèì íàéäåí ëè ØÊ
IF RECCOUNT([lvTovarLookUpByTLU]) &gt; 0

	*19.08.2005 11:37 -&gt; ØÊ íàéäåí - âîçâðàùàåì åãî èäåíòèôèêàòîð
	lnOldTvrID = This.parent.nTvrID
	***
	This.parent.nTvrID = lvTovarLookUpByTLU.TvrID
	***
	IF This.parent.nTvrID # lnOldTvrID
		This.parent._HandleAnyChange()
	ENDIF
	*------------------------------------------------------------------------------

ELSE

	*19.08.2005 11:37 -&gt; ØÊ íå íàéäåí - âûâîäèì ñîîòâåòñòâóþùåå ñîîáùåíèå è âîçâðàùàåì .F.
IF MESSAGEBOX("Òîâàð ñ òàêèì øòðèõêîäîì íå íàéäåí "+CHR(13)+;
			  "Äîáàâèòü ýòîò òîâàð â ñïðàâî÷íèê?",4+64,'Øòðèõêîäà íåò â ñïðàâî÷íèêå ...')=6
	 	PUBLIC pcBar
	 	pcBar = _PARAM
	 	luResAddingTov = oMgrTovar.Do([TVR],[FASTADD])
	 	IF VARTYPE(luResAddingTov)&lt;&gt;'L'
		 	This.parent.nTvrID = luResAddingTov
		 	This.parent._HandleAnyChange()
		 	RELEASE pcBar
	 	ENDIF
	 ENDIF
	*------------------------------------------------------------------------------

ENDIF
*------------------------------------------------------------------------------

*19.08.2005 11:38 -&gt; Âîññòàíîâèì òåêóùèé Alias
IF !EMPTY(lcOldAlias) AND USED(lcOldAlias) AND lcOldAlias#ALIAS()
	SELECT(lcOldAlias)
ENDIF
*------------------------------------------------------------------------------

*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1LD120Y7P</uniqueid>
		<timestamp>0</timestamp>
		<class>cmd</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>cmdClear</objname>
		<parent>comtxtctlcalclentluidbytlu</parent>
		<properties>Top = 0
Left = 250
Height = 23
Width = 23
Picture = ..\graphic\comidctldele.bmp
Caption = ""
Name = "cmdClear"
</properties>
		<protected/>
		<methods>PROCEDURE Click
This.Parent.txtText.Value = []
This.Parent.txtText.SetFocus
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>COMMENT</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>0</timestamp>
		<class/>
		<classloc/>
		<baseclass/>
		<objname>comtxtctlcalclentluidbytlu</objname>
		<parent/>
		<properties>Arial, 0, 9, 5, 15, 12, 32, 3, 0
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1YM12CSPA</uniqueid>
		<timestamp>958115367</timestamp>
		<class>frmedit</class>
		<classloc>baseform_v1.vcx</classloc>
		<baseclass>form</baseclass>
		<objname>frmprimarydocpartordedit</objname>
		<parent/>
		<properties>Height = 529
Width = 986
DoCreate = .T.
cmode = .F.
cmeasureunitlist = .F.
nouid = .F.
nfrmid = .F.
datachanged = .F.
nrezerv = .F.
nitog = .F.
nfsperc = 0
ndiscperc = 0
_standarttoolbar = tlbStandart;basetoolbar_v1.vcx
Name = "frmprimarydocpartordedit"
cstmsghandler.Name = "cstmsghandler"
cstresizable.Name = "cstresizable"
Img1.Name = "Img1"
cstdatawork.Name = "cstdatawork"
</properties>
		<protected/>
		<methods>PROCEDURE _cleardata
LPARAMETERS tlNoSetFocus

*--Îòìåíèì èçìåíåíèÿ
thisform.cstDataWork.Restore([lvFrmPartTvrEditOrder])

*--ïîäãîòîâèìñÿ ê ââîäó íîâîé ïîçèöèè
USE IN SELECT([lvFrmPartTvrEditOrder])

USE lvFrmPartTvrEditOrder IN 0 NODATA

*--Äîáàâèì ïóñòóþ çàïèñü
APPEND BLANK IN lvFrmPartTvrEditOrder
*------------------------------------------------------------------------------

*--Çàïèøåì èäåíòèôèêàòîð ðîäèòåëüñêîãî äîêóìåíòà
REPLACE FrmID WITH thisform.nFrmID IN lvFrmPartTvrEditOrder
*------------------------------------------------------------------------------

*--îïðåäåëèì ðåæèì
thisform.cMode = [ADD]

thisform.cntcancelsavehandled1.cmdCancel.Caption = [Íîâûé òîâàð]
thisform.cntcancelsavehandled1.cmdOK.Caption = [Äîáàâèòü â çàêàç]
thisform.cntcancelsavehandled1.cmdCancel.ForeColor = RGB(0,128,0)
thisform.cntcancelsavehandled1.cmdOK.ForeColor = RGB(0,128,0)

thisform.Comtxtctlcalclentluidbytlu.cmdClear.Click()
thisform.cntIdCtlGridMsu.cmdClear.Click()
thisform.txtQnt.Refresh()
thisform.Cnttvrsale.txtTvrPrcSale.Refresh()

*--Ïðîñ÷èòàåì ñóììû è ÍÄÑ
thisform.CalculateSumSale()
thisform.CalculateVatSumSale()

IF !tlNoSetFocus
	ThisForm.Comtxtctlcalclentluidbytlu.SetFocus()
ENDIF

ENDPROC
PROCEDURE _determ_disc
*--ïîëó÷èì ñêèäêó ïî äàííîìó òîâàðó äëÿ äàííîãî êëèåíòà
LPARAMETER tkod_t
LOCAL	_PARAM1, ;
		_PARAM2, ;
		lnDisc, ;
		lcOldAlias, ;
		lcCurrentDatabase

IF PCOUNT()&lt;1
	ASSERT .F. MESSAGE [Íåïðàâèëüíî ïåðåäàí ïàðàìåòð â ìåòîä determ_disc().]
ENDIF

lcOldAlias = ALIAS()

USE IN SELECT([lvDiscScaleViewByID])
_PARAM1 = lvFrmEdit.ExecIspCltID
_PARAM2 = tkod_t
USE lvDiscScaleViewByID IN 0

IF RECCOUNT([lvDiscScaleViewByID])&gt;0
	lnDisc = lvDiscScaleViewByID.DiscRate
ELSE
	lnDisc = 0
ENDIF

*--Âîññòàíîâèì òåêóùèé Alias
IF !EMPTY(lcOldAlias)
SELECT(lcOldAlias)
ENDIF
*------------------------------------------------------------------------------

RETURN lnDisc

ENDPROC
PROCEDURE _handlecntcancelsaveevent
*------------------------------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: FRMPRIMARYDOCPARTORDEDIT._HANDLECNTCANCELSAVEEVENT
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;tcMessage&gt;
* Returns.........: &lt;none&gt;
* Notes...........: &lt;~&gt;
*------------------------------------------------------------------------------
LPARAMETERS	tcMessage

LOCAL llResSave, ;
	  lnPartTvrID, ;
	  lpriceFS, ;
	  ldiscount
	

WITH This
	IF tcMessage == [OK]
		*--ïðè ðåäàêòèðîâàíèè çàïîìíèì ïîçèöèþ
		IF .cmode==[EDIT] OR .cmode==[DELE]
			lnPartTvrID = FrmPartTvrView.PartTvrID	
		ENDIF

		*--ïåðåñ÷èòàåì öåíó ñ ó÷åòîì ôàêòîðèíãà
		lpriceFS = (lvFrmPartTvrEditOrder.TvrPrcSale+ROUND(lvFrmPartTvrEditOrder.TvrPrcSale/100*thisform.nfsperc,2))		

		*--ïîñ÷èòàåì ñêèäêó
		ldiscount = ROUND(ROUND(lpriceFS*.ndiscperc/100, 2)*lvFrmPartTvrEditOrder.TvrQnt, 2)

		*--ïîäãîòîâèìñÿ ê ñîõðàíåíèþ äàííûõ
		SELECT lvFrmPartTvrEditOrder
		REPL lvFrmPartTvrEditOrder.TvrPrcSale WITH lpriceFS, ;
			 lvFrmPartTvrEditOrder.DiscPerc WITH .ndiscperc
		
		*--Ïðîèçâîäèì ñîõðàíåíèe
		llResSave = .cstDataWork.Save([lvFrmPartTvrEditOrder])

		*--Îáðàáàòûâàåì ðåçóëüòàòû ñîõðàíåíèÿ
		IF llResSave
			*--âûñòàâèì ôëàã èçìåíåíèÿ äàííûõ
			.Datachanged = .T.

			IF .cmode==[ADD]
				lnPartTvrID = .cstDataWork.GetLastID([lvFrmPartTvrEditOrder])
			ENDIF
			
			*--îáíîâèì äàííûå â âåðõíåé òàáëèöå (òîâàðíûå ïîçèöèè çàêàçà)
			.grdpartord._rsrequeryone(lnPartTvrID )
			.grdpartord.SetFocus()
			
		ENDIF
		*------------------------------------------------------------------------------
		
	ENDIF

	*--ïîäãîòîâèìñÿ ê ââîäó íîâîé çàïèñè
	._ClearData()
	
ENDWITH
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************

	

ENDPROC
PROCEDURE calculatesumsale
*------------------------------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: frmPrimaryDocPartOrdEdit.CalculateSumSale
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: &lt;public&gt; Ðàñ÷¸ò ñóììû ïðîäàæè
*------------------------------------------------------------------------------
WITH This

*23.09.2005 12:25 -&gt; Ðàñ÷¸ò ñóììû ïðîäàæè
IF TYPE([.cntTvrSale]) == [O] AND !ISNULL(.cntTvrSale)
	.cntTvrSale.txtTvrPrcSumSale.Value = ROUND(.cntTvrSale.txtTvrPrcSale.Value * .txtQnt.Value,2)
ENDIF
*------------------------------------------------------------------------------

ENDWITH
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE calculatevatsumsale
*------------------------------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: frmPrimaryDocPartOrdEdit.CalculateVatSumSale
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: &lt;public&gt; Ðàññ÷åò ÍÄÑ ïðîäàæè
*------------------------------------------------------------------------------
WITH This

*23.09.2005 12:17 -&gt; Ðàññ÷åò ÍÄÑ ïðîäàæè
IF TYPE([.cntTvrSale])==[O] AND !ISNULL(.cntTvrSale)
	IF .cntTvrVat.txtTvrVATRate.Value # 0
		.cntTvrSale.txtTvrVATSumSale.Value = ROUND(.cntTvrSale.txtTvrPrcSumSale.Value * .cntTvrVat.txtTvrVATRate.Value / (100 + .cntTvrVat.txtTvrVATRate.Value),2)
	ELSE
		.cntTvrSale.txtTvrVATSumSale.Value = 0
	ENDIF
ENDIF
*------------------------------------------------------------------------------

ENDWITH
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE Init
*------------------------------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: FRMPRIMARYDOCPARTORDEDIT.INIT
* Called by.......: &lt;Sys Event&gt;
* Parameters......: &lt;tcCommand,tuParam1&gt;
* Returns.........: &lt;none&gt;
* Notes...........: &lt;~&gt;
*------------------------------------------------------------------------------
LPARAMETERS	tcCommand,tuParam1

*--Âûïîëíèì ìåòîä ðîäèòåëüñêîãî êëàññà
DODEFAULT()
*------------------------------------------------------------------------------

thisform.nFrmID = tuParam1

*--îòêðîåì øàïêó çàêàçà
_PARAM = thisform.nFrmID
USE lvFrmEdit IN 0

thisform.nFSPerc = NVL(lvFrmEdit.FSPerc,0)

*--îáíîâèì äàííûå â âåðõíåé òàáëèöå (òîâàðíûå ïîçèöèè çàêàçà)
thisform.grdpartord._rsrequery(thisform.nFrmID)
*------------------------------------------------------------------------------

*--ïîäãîòîâèìñÿ ê ââîäó íîâîé òîâàðíîé ïîçèöèè
thisform._ClearData(.T.)
*------------------------------------------------------------------------------

*--Ïðîñ÷èòàåì ñóììû è ÍÄÑ
thisform.CalculateSumSale()
thisform.CalculateVatSumSale()

ENDPROC
PROCEDURE Load
*------------------------------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: FRMPRIMARYDOCPARTORDEDIT.LOAD
* Called by.......: &lt;Sys Event&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: &lt;~&gt;
*------------------------------------------------------------------------------
LOCAL lcUniqueName
	

*17.05.2004 01:32 -&gt;Âûïîëíèì ìåòîä ðîäèòåëüñêîãî êëàññà
DODEFAULT()
*------------------------------------------------------------------------------

*17.05.2004 01:32 -&gt;Îòêðîåì ÁÄ è óñòàíîâèì å¸ â êà÷åñòâå òåêóùåé
IF !DBUSED([BASIS])
	OPEN DATABASE BASIS
ENDIF
***
SET DATABASE TO BASIS
*------------------------------------------------------------------------------

*--Âûïîëíèì õðàíèìóþ ïðîöåäóðó äëÿ ïîëó÷åíèÿ ïóñòîé òàáëèöû ñ ïîçèöèÿìè çàêàçà
lcUniqueName = spFrmPartTvrView([NODATA])
*------------------------------------------------------------------------------

*--Òåïåðü îòêðîåì äàííûé Alias
USE (lcUniqueName) IN 0 ALIAS FrmPartTvrView
CURSORSETPROP([BUFFERING],3,[FrmPartTvrView])

*17.05.2004 01:32 -&gt;Îòêðîåì Alias äëÿ ðåäàêòèðîâàíèÿ áåç äàííûõ
USE lvFrmPartTvrEditOrder IN 0 NODATA
*------------------------------------------------------------------------------

*17.05.2004 01:34 -&gt; Îòêðûâàåì ñïðàâî÷íèêè
USE lvTovarList IN 0 ALIAS TovarList
USE lvCurTypeList IN 0
USE lvtvrsetbmps IN 0
***
This.cMeasureUnitList = spGetBaseMsuList(0)
USE (LEFT(This.cMeasureUnitList,AT([;],This.cMeasureUnitList)-1)) IN 0 ALIAS lvTvrMsuList
*------------------------------------------------------------------------------
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1>Class</reserved1>
		<reserved2>40</reserved2>
		<reserved3>cmode
cmeasureunitlist
nouid
nfrmid
datachanged
nrezerv îñòàòîê òîâàðà íà ðåçåðâíîì ñêëàäå
nitog
nfsperc
ndiscperc
*calculatepricemsu 
*_save 
*_cleardata 
*calculatesumsale 
*calculatevatsumsale 
*_determ_disc 
</reserved3>
		<reserved4/>
		<reserved5/>
		<reserved6>Pixels</reserved6>
		<reserved7>ZOO ðåäàêòèðîâàíèå ïîçèöèé çàêàçà</reserved7>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1YN0WYQH9</uniqueid>
		<timestamp>958115040</timestamp>
		<class>grdpartordz</class>
		<classloc>primarydoc_v1.vcx</classloc>
		<baseclass>grid</baseclass>
		<objname>Grdpartord</objname>
		<parent>frmprimarydocpartordedit</parent>
		<properties>ColumnCount = 14
Height = 293
Left = 5
Panel = 1
ReadOnly = .T.
TabIndex = 5
Top = 5
Width = 978
ZOrderSet = 3
_handledstandartmsgpromptlist = ;;;;;Äîáàâèòü;Ðåäàêòèðîâàòü;Óäàëèòü
_handledstandartmsglist = FIRST;PREV;NEXT;LAST;;ADD;EDIT;DELE
Name = "Grdpartord"
Column1.Header1.Name = "Header1"
Column1.Text1.ReadOnly = .T.
Column1.Text1.Name = "Text1"
Column1.ColumnOrder = 3
Column1.Width = 157
Column1.ReadOnly = .T.
Column1.Name = "Column1"
Column2.Header1.Name = "Header1"
Column2.Text1.ReadOnly = .T.
Column2.Text1.Name = "Text1"
Column2.ColumnOrder = 8
Column2.ReadOnly = .T.
Column2.Name = "Column2"
Column3.Header1.Name = "Header1"
Column3.Text1.ReadOnly = .T.
Column3.Text1.Name = "Text1"
Column3.ColumnOrder = 5
Column3.ReadOnly = .T.
Column3.Name = "Column3"
Column4.Header1.Caption = "Âñåãî ñêèäêà"
Column4.Header1.Name = "Header1"
Column4.Text1.ReadOnly = .T.
Column4.Text1.Name = "Text1"
Column4.ColumnOrder = 13
Column4.ControlSource = "FrmPartTvrView.Disc"
Column4.Width = 83
Column4.ReadOnly = .T.
Column4.Format = "R"
Column4.InputMask = "999999999.99"
Column4.Name = "Column4"
COLUMN5.Header1.Caption = "Öåíà ñ ôàêò."
COLUMN5.Header1.Name = "Header1"
COLUMN5.Text1.ReadOnly = .T.
COLUMN5.Text1.Name = "Text1"
COLUMN5.ColumnOrder = 10
COLUMN5.Width = 84
COLUMN5.ReadOnly = .T.
COLUMN5.Format = "R"
COLUMN5.InputMask = "999999999.99"
COLUMN5.Name = "COLUMN5"
COLUMN6.Header1.Caption = "%"
COLUMN6.Header1.Name = "Header1"
COLUMN6.Text1.ReadOnly = .T.
COLUMN6.Text1.Name = "Text1"
COLUMN6.ColumnOrder = 11
COLUMN6.ControlSource = "FrmPartTvrView.DiscPerc"
COLUMN6.Width = 32
COLUMN6.ReadOnly = .T.
COLUMN6.Format = "R"
COLUMN6.InputMask = "999.99"
COLUMN6.Name = "COLUMN6"
COLUMN7.Header1.Caption = "Ñóììà ñî ñêèäêîé"
COLUMN7.Header1.Name = "Header1"
COLUMN7.Text1.ReadOnly = .T.
COLUMN7.Text1.Name = "Text1"
COLUMN7.ColumnOrder = 14
COLUMN7.Width = 113
COLUMN7.ReadOnly = .T.
COLUMN7.Format = "R"
COLUMN7.InputMask = "999999999.99"
COLUMN7.Name = "COLUMN7"
Column8.ColumnOrder = 1
Column8.ControlSource = "recno()"
Column8.Width = 30
Column8.ReadOnly = .T.
Column8.Name = "Column8"
Column9.ColumnOrder = 2
Column9.ControlSource = "FrmPartTvrView.TvrID"
Column9.ReadOnly = .T.
Column9.Name = "Column9"
Column10.ColumnOrder = 4
Column10.ControlSource = "FrmPartTvrView.Ostatok"
Column10.ReadOnly = .T.
Column10.Name = "Column10"
Column11.ColumnOrder = 6
Column11.ControlSource = "FrmPartTvrView.Qnt1"
Column11.ReadOnly = .T.
Column11.Name = "Column11"
Column12.ColumnOrder = 7
Column12.ControlSource = "FrmPartTvrView.Qnt2"
Column12.ReadOnly = .T.
Column12.Name = "Column12"
Column13.ColumnOrder = 9
Column13.ControlSource = "FrmPartTvrView.TvrPrcS_Pr"
Column13.ReadOnly = .T.
Column13.Format = "R"
Column13.InputMask = "999999999.99"
Column13.Name = "Column13"
Column14.ColumnOrder = 12
Column14.ControlSource = "FrmPartTvrView.TvrPrcS_D"
Column14.ReadOnly = .T.
Column14.Format = "R"
Column14.InputMask = "999999999.99"
Column14.Name = "Column14"
</properties>
		<protected/>
		<methods>PROCEDURE _add
*-------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: grdPartOrd._add
* Called by.......: &lt;ToolBar or Context Menu Action -&gt; .HandleMsg() -&gt; .Edit()&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Äîáàâëåíèå òîâàðíîé ïîçèöèè
*-------------------------------------------------------
thisform.Cntcancelsavehandled1.cmdCancel.Click()

ENDPROC
PROCEDURE _dele
*-------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: grdPartOrd._dele
* Called by.......: &lt;ToolBar or Context Menu Action -&gt; .HandleMsg() -&gt; .Edit()&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Óäàëåíèå òîâàðíîé ïîçèöèè
*-------------------------------------------------------
LOCAL	lnFrmPartTvrID

IF !MESSAGEBOX([Óäàëèòü ïîçèöèþ?],36,[Îêíî ñîîáùåíèé])=6
	RETURN .F.
ENDIF

lnFrmPartTvrID = FrmPartTvrView.PartTvrID

WITH THISFORM
	*--Îòìåíèì íåñîõðàíåííûå èçìåíåíèÿ
	.cstDataWork.Restore([lvFrmPartTvrEditOrder])

	*--îïðåäåëèì ðåæèì óäàëåíèÿ
	.cMode = [DELE]

	*--ïîäãîòîâèìñÿ ê óäàëåíèþ ïîçèöèè
	USE IN SELECT([lvFrmPartTvrEditOrder])

	_PARAM = lnFrmPartTvrID
	USE lvFrmPartTvrEditOrder IN 0

	DELETE IN lvFrmPartTvrEditOrder
	
	*--ñîõðàíèì óäàëåíèå
	thisform.cntcancelsavehandled1.cmdOk.Click()
	
	*--ïåðåéäåì â ðåæèì äîáàâëåíèÿ
	._ClearData()
	
ENDWITH
*------------------------------------------------------------------------------

ENDPROC
PROCEDURE _edit
*-------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: grdPartOrd._Edit
* Called by.......: &lt;ToolBar or Context Menu Action -&gt; .HandleMsg() -&gt; .Edit()&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Ðåäàêòèðîâàíèå òîâàðíîé ïîçèöèè
*-------------------------------------------------------
WITH thisform
	*--Îòìåíèì èçìåíåíèÿ
	.cstDataWork.Restore([lvFrmPartTvrEditOrder])

	*--ïîäãîòîâèìñÿ ê ââîäó íîâîé ïîçèöèè
	USE IN SELECT([lvFrmPartTvrEditOrder])

	_PARAM = FrmPartTvrView.PartTvrID
	USE lvFrmPartTvrEditOrder IN 0

	*--îïðåäåëèì ðåæèì
	.cMode = [EDIT]
	
	.cntcancelsavehandled1.cmdCancel.Caption = [Îòìåíèòü]
	.cntcancelsavehandled1.cmdOK.Caption = [Ñîõðàíèòü]
	.cntcancelsavehandled1.cmdCancel.ForeColor = RGB(255,0,0)
	.cntcancelsavehandled1.cmdOK.ForeColor = RGB(255,0,0)
	
	.Comtxtctlcalclentluidbytlu.refresh(FrmPartTvrView.TvrId)
	.cntIdCtlGridTvr.SetValue(FrmPartTvrView.TvrId)
	thisform.txtQnt.Refresh()
	thisform.Cnttvrsale.txtTvrPrcSale.Refresh()

	*--Ïðîñ÷èòàåì ñóììû è ÍÄÑ
	.CalculateSumSale()
	.CalculateVatSumSale()
	
ENDWITH

*!*	****************************************************************************************************************
*!*	***********************************************  END OF METHOD *************************************************
*!*	****************************************************************************************************************
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_22K0WBJSA</uniqueid>
		<timestamp>0</timestamp>
		<class>header</class>
		<classloc/>
		<baseclass>header</baseclass>
		<objname>Header1</objname>
		<parent>frmprimarydocpartordedit.Grdpartord.Column8</parent>
		<properties>Alignment = 2
Caption = "¹"
Name = "Header1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_22K0WBJSC</uniqueid>
		<timestamp>0</timestamp>
		<class>txtgrd</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>Text1</objname>
		<parent>frmprimarydocpartordedit.Grdpartord.Column8</parent>
		<properties>BorderStyle = 0
Margin = 0
ReadOnly = .T.
ForeColor = 0,0,0
BackColor = 255,255,255
Name = "Text1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_22K0WBJSE</uniqueid>
		<timestamp>0</timestamp>
		<class>header</class>
		<classloc/>
		<baseclass>header</baseclass>
		<objname>Header1</objname>
		<parent>frmprimarydocpartordedit.Grdpartord.Column9</parent>
		<properties>Alignment = 2
Caption = "Êîä"
Name = "Header1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_22K0WBJSG</uniqueid>
		<timestamp>0</timestamp>
		<class>txtgrd</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>Text1</objname>
		<parent>frmprimarydocpartordedit.Grdpartord.Column9</parent>
		<properties>BorderStyle = 0
Margin = 0
ReadOnly = .T.
ForeColor = 0,0,0
BackColor = 255,255,255
Name = "Text1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_22K0WBJSJ</uniqueid>
		<timestamp>0</timestamp>
		<class>header</class>
		<classloc/>
		<baseclass>header</baseclass>
		<objname>Header1</objname>
		<parent>frmprimarydocpartordedit.Grdpartord.Column10</parent>
		<properties>Alignment = 2
Caption = "Îñòàòîê"
Name = "Header1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_22K0WBJSL</uniqueid>
		<timestamp>0</timestamp>
		<class>txtgrd</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>Text1</objname>
		<parent>frmprimarydocpartordedit.Grdpartord.Column10</parent>
		<properties>BorderStyle = 0
Margin = 0
ReadOnly = .T.
ForeColor = 0,0,0
BackColor = 255,255,255
Name = "Text1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_22K0WBJSN</uniqueid>
		<timestamp>0</timestamp>
		<class>header</class>
		<classloc/>
		<baseclass>header</baseclass>
		<objname>Header1</objname>
		<parent>frmprimarydocpartordedit.Grdpartord.Column11</parent>
		<properties>Alignment = 2
Caption = "Êîë-âî1"
Name = "Header1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_22K0WBJSP</uniqueid>
		<timestamp>0</timestamp>
		<class>txtgrd</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>Text1</objname>
		<parent>frmprimarydocpartordedit.Grdpartord.Column11</parent>
		<properties>BorderStyle = 0
Margin = 0
ReadOnly = .T.
ForeColor = 0,0,0
BackColor = 255,255,255
Name = "Text1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_22K0WBJSS</uniqueid>
		<timestamp>0</timestamp>
		<class>header</class>
		<classloc/>
		<baseclass>header</baseclass>
		<objname>Header1</objname>
		<parent>frmprimarydocpartordedit.Grdpartord.Column12</parent>
		<properties>Alignment = 2
Caption = "Êîë-âî2"
Name = "Header1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_22K0WBJSU</uniqueid>
		<timestamp>0</timestamp>
		<class>txtgrd</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>Text1</objname>
		<parent>frmprimarydocpartordedit.Grdpartord.Column12</parent>
		<properties>BorderStyle = 0
Margin = 0
ReadOnly = .T.
ForeColor = 0,0,0
BackColor = 255,255,255
Name = "Text1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_22K0WBJT1</uniqueid>
		<timestamp>0</timestamp>
		<class>header</class>
		<classloc/>
		<baseclass>header</baseclass>
		<objname>Header1</objname>
		<parent>frmprimarydocpartordedit.Grdpartord.Column13</parent>
		<properties>Alignment = 2
Caption = "Öåíà"
Name = "Header1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_22K0WBJT3</uniqueid>
		<timestamp>0</timestamp>
		<class>txtgrd</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>Text1</objname>
		<parent>frmprimarydocpartordedit.Grdpartord.Column13</parent>
		<properties>BorderStyle = 0
Margin = 0
ReadOnly = .T.
ForeColor = 0,0,0
BackColor = 255,255,255
Name = "Text1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_22K0WBJT5</uniqueid>
		<timestamp>0</timestamp>
		<class>header</class>
		<classloc/>
		<baseclass>header</baseclass>
		<objname>Header1</objname>
		<parent>frmprimarydocpartordedit.Grdpartord.Column14</parent>
		<properties>Alignment = 2
Caption = "Öåíà ñî ñê."
Name = "Header1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_22K0WBJT6</uniqueid>
		<timestamp>0</timestamp>
		<class>txtgrd</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>Text1</objname>
		<parent>frmprimarydocpartordedit.Grdpartord.Column14</parent>
		<properties>BorderStyle = 0
Margin = 0
ReadOnly = .T.
ForeColor = 0,0,0
BackColor = 255,255,255
Name = "Text1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1YO0QITS8</uniqueid>
		<timestamp>958115367</timestamp>
		<class>shp</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>shape</baseclass>
		<objname>shpTvr</objname>
		<parent>frmprimarydocpartordedit</parent>
		<properties>Top = 300
Left = 6
Height = 61
Width = 413
SpecialEffect = 0
ZOrderSet = 4
Name = "shpTvr"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1YO0QITS9</uniqueid>
		<timestamp>958115367</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblTLU</objname>
		<parent>frmprimarydocpartordedit</parent>
		<properties>FontBold = .T.
Caption = "Øòðèõ-êîä:"
Left = 11
Top = 308
TabIndex = 8
ZOrderSet = 5
Name = "lblTLU"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1YO0QITSB</uniqueid>
		<timestamp>958115367</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblTvr</objname>
		<parent>frmprimarydocpartordedit</parent>
		<properties>FontBold = .T.
Caption = "Òîâàð:"
Left = 11
Top = 336
TabIndex = 9
ZOrderSet = 7
Name = "lblTvr"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1YO0QITSC</uniqueid>
		<timestamp>958115367</timestamp>
		<class>cntidctlgrid</class>
		<classloc>comidctl_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>cntIdCtlGridTvr</objname>
		<parent>frmprimarydocpartordedit</parent>
		<properties>Top = 333
Left = 61
Width = 348
Height = 23
TabIndex = 2
ZOrderSet = 8
_controlsource = lvFrmPartTvrEditOrder.TvrId
_controlsourcetype = 1
_rsaliasname = TovarList
_rsfieldnameid = TvrID
_rsfieldnametext = TvrNM
_grdinfoparams = oMgrTovar;TVR;INFO
_grdaddparams = oMgrTovar;TVR;FASTADD;0;lvTvrInCntViewRepl
_selectobjectt = frmidctltreetvr;primarydoc_v1;primarydoc.app
Name = "cntIdCtlGridTvr"
txtText.Height = 23
txtText.Left = 0
txtText.Top = 0
txtText.Width = 283
txtText._highlightobject = .parent.parent.lblTvr
txtText.Name = "txtText"
cmdShow.Top = 0
cmdShow.Left = 303
cmdShow.Name = "cmdShow"
cmdClear.Top = 0
cmdClear.Left = 326
cmdClear.Name = "cmdClear"
CmdTree.Top = 0
CmdTree.Left = 282
CmdTree.Enabled = .T.
CmdTree.Visible = .T.
CmdTree.Name = "CmdTree"
Olecommprox1.Top = 0
Olecommprox1.Left = 36
Olecommprox1.Height = 16
Olecommprox1.Width = 38
Olecommprox1.Name = "Olecommprox1"
</properties>
		<protected/>
		<methods>PROCEDURE _refreshrelatedobjects
*--Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	lnTvrID, ;
		lnTvrArt, ;
		lcMsuTNM, ;
		lcIndependetFNM, ;
		lcDependetFNM, ;
		_PARAM, ;
		_PARAM1, ;
		_PARAM2, ;
		_PARAM_TVR, ;
		_PARAM_OU
		
***
	
lnTvrID = This.Value
*------------------------------------------------------------------------------

WITH ThisForm
	*--Çàïèñûâàåì èäåíòèôèêàòîð òîâàðà
	.comTxtCtlCalcLenTLUIDByTLU.nTvrID = lnTvrID
	.comTxtCtlCalcLenTLUIDByTLU.Refresh(lnTvrID)
	*------------------------------------------------------------------------------

	*--Ïîëó÷èì èíôîðìàöèþ î âûáðàííîì òîâàðå
	USE IN IIF(USED([lvTovarInfo]),[lvTovarInfo],0)
	***
	_PARAM = lnTvrID
_PARAM_PRCTYPE = 1  &amp;&amp; ïðîâåðèòü ïðàâèëüíîñòü âîçâðàòà

	USE lvTovarInfo IN 0
	
	*--ïîëó÷èì èíôîðìàöèþ î àðòèêóëå òîâàðà
	USE IN IIF(USED([lvTovarLookUpByIdAndTluType]),[lvTovarLookUpByIdAndTluType],0)
	
	_PARAM1 = lnTvrID
	_PARAM2 = 9
	USE lvTovarLookUpByIdAndTluType IN 0
	
	IF RECCOUNT([lvTovarLookUpByIDAndTluType]) &gt; 0
		lnTvrArt = ALLTRIM(lvTovarLookUpByIdAndTluType.TLU)
	ELSE
		lnTvrArt = []
	ENDIF
	
	.lblkod.caption = IIF(!EMPTY(lnTvrID),[Êîä ]+ALLTRIM(STR(lnTvrID)),[Êîä])
	.lblart.caption = [Àðòèêóë ]+lnTvrArt
	
	*--ïîëó÷èì èíôîðìàöèþ îá îñòàòêàõ òîâàðà
	USE IN SELECT([lvStockTvrQnt])
	
	_PARAM_TVR = lnTvrID
	_PARAM_OU = 0
	USE lvStockTvrQnt IN 0
	
	IF RECCOUNT([lvStockTvrQnt])&gt;0
		.nItog = lvStockTvrQnt.TvrQnt
	ELSE
		.nItog = 0
	ENDIF

	*--ïîëó÷èì èíôîðìàöèþ îá ðåçåðâå òîâàðà
	USE IN SELECT([lvStockTvrQnt])
	
	_PARAM_TVR = lnTvrID
	_PARAM_OU = 55
	USE lvStockTvrQnt IN 0
	
	IF RECCOUNT([lvStockTvrQnt])&gt;0
		.nRezerv = lvStockTvrQnt.TvrQnt
	ELSE
		.nRezerv = 0
	ENDIF
	
	.lblOst.Caption = ALLTRIM(STR((.nItog-.nRezerv),99,2))
	.lblRezerv.Caption = ALLTRIM(STR(.nRezerv,99,2))
	.lblItog.Caption = ALLTRIM(STR((.nItog-.nRezerv-.nRezerv),99,2))
	*------------------------------------------------------------------------------

	*--Çàêðîåì ñïðàâî÷íèê áàçîâûõ ÅÈ
	USE IN SELECT([lvTvrMsuList])

	*16.01.2006 14:38 -&gt;Îïðåäåëèì íàçâàíèÿ òàáëèö ñî ñïðàâî÷íèêàìè
	lcIndependetFNM = LEFT(.cMeasureUnitList,AT([;],.cMeasureUnitList)-1)
	lcDependetFNM	= RIGHT(.cMeasureUnitList,LEN(.cMeasureUnitList)-AT([;],.cMeasureUnitList))
	*------------------------------------------------------------------------------

	*12.01.2006 11:53 -&gt;Óäàëèì ñïðàâî÷íèêè
	IF FILE([tmp\]+lcIndependetFNM+[.dbf])
	   ERASE ([tmp\]+lcIndependetFNM+[.dbf])
	ENDIF
	***
	IF FILE([tmp\]+lcDependetFNM+[.dbf])
	   ERASE ([tmp\]+lcDependetFNM+[.dbf])
	ENDIF
	*------------------------------------------------------------------------------

	.cMeasureUnitList = spGetBaseMsuList(lvTovarInfo.MsuID)
	lcMsuTNM = RIGHT(.cMeasureUnitList,LEN(.cMeasureUnitList)-AT([;],.cMeasureUnitList))
	USE (lcMsuTNM) IN 0 ALIAS [lvTvrMsuList]
	*------------------------------------------------------------------------------

	*--Óñòàíàâëèâàåì åäèíèöó èçìåðåíèÿ ïî óìîë÷àíèþ
	IF lvTovarInfo.MsuID # 0
		.cntIdCtlGridMsu.SetValue(lvTovarInfo.MsuID)
	ENDIF	
	*------------------------------------------------------------------------------

	*--Óñòàíîâèì âåëè÷èíó ÍÄÑ ïî óìîë÷àíèþ
	IF .cntTvrVat.txtTvrVATRate.Value # lvTovarInfo.tvrVATRate
		.cntTvrVat.txtTvrVATRate.Value = lvTovarInfo.tvrVATRate
	ENDIF	
	*------------------------------------------------------------------------------
	
	*--Óñòàíîâèì öåíó ïðîäàæè
	IF TYPE([ThisForm.cntTvrSale]) == [O] AND !ISNULL(.cntTvrSale)
		.cntTvrSale.SetPrice(lnTvrID,1)
	ENDIF
	*------------------------------------------------------------------------------
	
	*--Óñòàíîâèì ñêèäêó
	.nDiscPerc = ._determ_disc(lnTvrID)
	.lblDisc.caption = ALLTRIM(STR(.nDiscPerc,99,2))+[%]


	*--Óñòàíîâèì êîëè÷åñòâî ïî-óìîë÷àíèþ
	IF .cMode = [ADD] AND !EMPTY(.comTxtCtlCalcLenTLUIDByTLU.nTvrID)
		.txtQnt.Value = 1
	ENDIF
	
	.txtQnt.SetFocus()
ENDWITH
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE cmdClear.Click
THIS.PARENT.SetValue(0)
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1YO0QITSN</uniqueid>
		<timestamp>958115367</timestamp>
		<class>shp</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>shape</baseclass>
		<objname>shpQnt</objname>
		<parent>frmprimarydocpartordedit</parent>
		<properties>Top = 363
Left = 6
Height = 61
Width = 413
SpecialEffect = 0
ZOrderSet = 9
Name = "shpQnt"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1YO0QITSO</uniqueid>
		<timestamp>958115367</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>Lbl3</objname>
		<parent>frmprimarydocpartordedit</parent>
		<properties>FontBold = .T.
Caption = "Êîëè÷åñòâî:"
Left = 11
Top = 399
TabIndex = 11
ZOrderSet = 10
Name = "Lbl3"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1YO0QITSP</uniqueid>
		<timestamp>0</timestamp>
		<class>txt</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>txtQnt</objname>
		<parent>frmprimarydocpartordedit</parent>
		<properties>ControlSource = "lvFrmPartTvrEditOrder.TvrQnt"
Left = 141
TabIndex = 3
Top = 396
ZOrderSet = 11
_convertcommatopoint = .T.
Name = "txtQnt"
</properties>
		<protected/>
		<methods>PROCEDURE _handleanychange
*--Ïðîñ÷èòàåì ñóììû è ÍÄÑ
thisform.CalculateSumSale()
thisform.CalculateVatSumSale()

ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1YO0QITSQ</uniqueid>
		<timestamp>958115367</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblMsu</objname>
		<parent>frmprimarydocpartordedit</parent>
		<properties>FontBold = .T.
Caption = "Åäèíèöà èçìåðåíèÿ:"
Left = 11
Top = 371
TabIndex = 10
ZOrderSet = 12
Name = "lblMsu"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1YO0QITSR</uniqueid>
		<timestamp>958115367</timestamp>
		<class>cntidctlgrid</class>
		<classloc>comidctl_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>cntIdCtlGridMsu</objname>
		<parent>frmprimarydocpartordedit</parent>
		<properties>Top = 368
Left = 141
TabIndex = 6
ZOrderSet = 13
_controlsource = lvFrmPartTvrEditOrder.MsuId
_controlsourcetype = 1
_rsaliasname = lvTvrMsuList
_rsfieldnameid = MsuID
_rsfieldnametext = MsuNM
Name = "cntIdCtlGridMsu"
txtText._highlightobject = .parent.parent.lblMsu
txtText.Name = "txtText"
cmdShow.Name = "cmdShow"
cmdClear.Name = "cmdClear"
CmdTree.Name = "CmdTree"
Olecommprox1.Top = 0
Olecommprox1.Left = 36
Olecommprox1.Height = 16
Olecommprox1.Width = 38
Olecommprox1.Name = "Olecommprox1"
</properties>
		<protected/>
		<methods>PROCEDURE cmdClear.Click
THIS.PARENT.SetValue(0)


ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1YN0XALTU</uniqueid>
		<timestamp>958115367</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>Lblart</objname>
		<parent>frmprimarydocpartordedit</parent>
		<properties>FontBold = .T.
FontName = "Arial"
FontSize = 10
BackStyle = 1
Caption = "Àðòèêóë"
Left = 616
Top = 310
TabIndex = 12
ForeColor = 0,128,64
ZOrderSet = 14
Name = "Lblart"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1YO0QITSS</uniqueid>
		<timestamp>958115367</timestamp>
		<class>cnttvrsale</class>
		<classloc>primarydoc_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>Cnttvrsale</objname>
		<parent>frmprimarydocpartordedit</parent>
		<properties>Top = 424
Left = 6
Width = 413
Height = 63
TabIndex = 7
ZOrderSet = 15
Name = "Cnttvrsale"
ShpSale.Top = 0
ShpSale.Left = 0
ShpSale.Height = 62
ShpSale.Width = 413
ShpSale.Name = "ShpSale"
lblTvrPrcSale.Name = "lblTvrPrcSale"
txtTvrPrcSale.ControlSource = "lvFrmPartTvrEditOrder.TvrPrcSale"
txtTvrPrcSale.Format = "R"
txtTvrPrcSale.InputMask = "999999999.99"
txtTvrPrcSale.Name = "txtTvrPrcSale"
txtTvrPrcSumSale.Format = "R"
txtTvrPrcSumSale.InputMask = "999999999.99"
txtTvrPrcSumSale.Name = "txtTvrPrcSumSale"
txtTvrVATSumSale.Format = "R"
txtTvrVATSumSale.InputMask = "999999999.99"
txtTvrVATSumSale.Left = 308
txtTvrVATSumSale.Top = 33
txtTvrVATSumSale.Name = "txtTvrVATSumSale"
lblTvrPrcSumSale.Left = 263
lblTvrPrcSumSale.Top = 8
lblTvrPrcSumSale.Name = "lblTvrPrcSumSale"
lblTvrVATSumSale.Caption = "ÍÄÑ:"
lblTvrVATSumSale.Left = 263
lblTvrVATSumSale.Top = 36
lblTvrVATSumSale.Name = "lblTvrVATSumSale"
</properties>
		<protected/>
		<methods>PROCEDURE setprice
*------------------------------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: cntTvrSale.SetPrice
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;tnTvrID, tnPrcTypeID&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Óñòàíîâêà öåíû ïðîäàæè
*------------------------------------------------------------------------------
LPARAMETERS tnTvrID, tnPrcTypeID

*--Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
PRIVATE _PARAM, ;
		_PARAM1, ;
		_PARAM2
*------------------------------------------------------------------------------

IF ThisForm.cMode == [ADD]
	*--Ïðîâåðÿåì íàëè÷èå öåíû äëÿ äàííîãî òîâàðà ïî äàííîìó ïðàéñó
	USE IN SELECT([lvPriceTvr])
	***
	_PARAM1 = tnTvrID
	_PARAM2 = tnPrcTypeID
	***
	USE lvPriceTvr IN 0
	*------------------------------------------------------------------------------

	*--Åñëè öåíà íàéäåíà
	IF RECCOUNT([lvPriceTvr]) &gt; 0
		USE IN SELECT([lvPriceEdit])
		_PARAM = lvPriceTvr.PrcID
		USE lvPriceEdit IN 0
		This.txtTvrPrcSale.Value = lvPriceEdit.Price
	ENDIF
	
	*--Çàêðîåì âñå, ÷òî íå íóæíî
	IF USED([lvPriceEdit])
		TABLEREVERT(.T.,[lvPriceEdit])
	ENDIF
	
	USE IN SELECT([lvPriceEdit])
	USE IN SELECT([lvPriceTvr])
	
ENDIF
*------------------------------------------------------------------------------

*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************


ENDPROC
PROCEDURE txtTvrPrcSale.LostFocus
txt::LostFocus()
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1YM12ECKZ</uniqueid>
		<timestamp>958115367</timestamp>
		<class>cntcancelsavehandled</class>
		<classloc>baseform_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>Cntcancelsavehandled1</objname>
		<parent>frmprimarydocpartordedit</parent>
		<properties>Top = 493
Left = 13
Width = 252
Height = 23
TabIndex = 4
ZOrderSet = 16
Name = "Cntcancelsavehandled1"
cmdCancel.Top = 0
cmdCancel.Left = 0
cmdCancel.Height = 22
cmdCancel.Width = 113
cmdCancel.FontBold = .T.
cmdCancel.Caption = "Íîâûé òîâàð"
cmdCancel.TabIndex = 2
cmdCancel.ForeColor = 0,128,0
cmdCancel.Name = "cmdCancel"
cmdOk.Top = 0
cmdOk.Left = 137
cmdOk.Height = 22
cmdOk.Width = 113
cmdOk.FontBold = .T.
cmdOk.Caption = "Äîáàâèòü â çàêàç"
cmdOk.TabIndex = 1
cmdOk.ForeColor = 0,128,0
cmdOk.Name = "cmdOk"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1YN0XALTW</uniqueid>
		<timestamp>958115367</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>Lblkod</objname>
		<parent>frmprimarydocpartordedit</parent>
		<properties>FontBold = .T.
FontName = "Arial"
FontSize = 10
BackStyle = 1
Caption = "Êîä"
Left = 450
Top = 310
TabIndex = 15
ForeColor = 0,128,64
ZOrderSet = 17
Name = "Lblkod"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1YN0XALTX</uniqueid>
		<timestamp>958115367</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>LblOst</objname>
		<parent>frmprimarydocpartordedit</parent>
		<properties>FontBold = .T.
FontName = "Arial"
FontSize = 11
BackStyle = 0
Caption = "0"
Left = 534
Top = 335
TabIndex = 18
ForeColor = 0,0,128
BackColor = 192,192,192
ZOrderSet = 18
Name = "LblOst"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2G81AJHDR</uniqueid>
		<timestamp>958115367</timestamp>
		<class>comtxtctlcalclentluidbytlu</class>
		<classloc>primarydoc_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>Comtxtctlcalclentluidbytlu</objname>
		<parent>frmprimarydocpartordedit</parent>
		<properties>Top = 308
Left = 176
Width = 233
Height = 23
TabIndex = 1
ZOrderSet = 7
Name = "Comtxtctlcalclentluidbytlu"
txtText.Height = 23
txtText.Left = 0
txtText.Top = 0
txtText.Width = 169
txtText.NullDisplay = "Øòðèõêîä íåîïðåäåëåííûé"
txtText.Name = "txtText"
lblLen.Left = 171
lblLen.Top = 3
lblLen.Name = "lblLen"
cmdFind.Top = 0
cmdFind.Left = 188
cmdFind.Name = "cmdFind"
cmdClear.Top = 0
cmdClear.Left = 211
cmdClear.Name = "cmdClear"
</properties>
		<protected/>
		<methods>PROCEDURE _handleanychange

*--Îáíîâèì òîâàð è ïåðåéäåì â ïîëå ðåäàêòèðîâàíèÿ êîëè÷åñòâà
WITH Thisform
	.cntIdCtlGridTvr.SetValue(This.nTvrID)
	CLEAR TYPEAHEAD
	
	IF .cMode = [ADD] AND !EMPTY(.comTxtCtlCalcLenTLUIDByTLU.nTvrID)
		.txtQnt.Value = 1
	ENDIF
	
	.txtQnt.SetFocus()
ENDWITH
*------------------------------------------------------------------------------
ENDPROC
PROCEDURE Refresh
PARAMETERS tnTvrID
LOCAL _PARAM1, ;
	  _PARAM2

IF PCOUNT()=1

	_PARAM1 = tnTvrID
	_PARAM2 = 4
	*------------------------------------------------------------------------------

	*--Íàéä¸ì ØÊ ïî èäåíòèôèêàòîðó òîâàðà è òèïó (äëÿ øòðèõ-êîäà òèï ðàâåí 4)
	IF USED([lvTovarLookUpByIDAndTluType])
		REQUERY([lvTovarLookUpByIDAndTluType])
	ELSE
		USE lvTovarLookUpByIDAndTluType IN 0
	ENDIF
	***
	IF RECCOUNT([lvTovarLookUpByIDAndTluType]) &gt; 0
		This.txtText.Value = lvTovarLookUpByIDAndTluType.TLU
	ELSE
		This.txtText.Value = .NULL.
	ENDIF
	*------------------------------------------------------------------------------
	
ENDIF

*15.06.2006 16:49 -&gt; Âûïîëíèì ìåòîä ðîäèòåëüñêîãî êëàññà
DODEFAULT()
*------------------------------------------------------------------------------
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1YN0XALUE</uniqueid>
		<timestamp>958115367</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>Lbl1</objname>
		<parent>frmprimarydocpartordedit</parent>
		<properties>FontBold = .T.
FontName = "Arial"
FontSize = 11
BackStyle = 1
Caption = "Ðåçåðâ:"
Height = 20
Left = 448
Top = 359
Width = 59
TabIndex = 16
ForeColor = 0,0,128
ZOrderSet = 20
Name = "Lbl1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1YN0XALUF</uniqueid>
		<timestamp>958115367</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>Lbl5</objname>
		<parent>frmprimarydocpartordedit</parent>
		<properties>FontBold = .T.
FontName = "Arial"
FontSize = 11
BackStyle = 1
Caption = "Âñåãî:"
Left = 448
Top = 383
TabIndex = 21
ForeColor = 0,0,128
ZOrderSet = 21
Name = "Lbl5"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1YN0XALUG</uniqueid>
		<timestamp>958115367</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>LblRezerv</objname>
		<parent>frmprimarydocpartordedit</parent>
		<properties>FontBold = .T.
FontName = "Arial"
FontSize = 11
BackStyle = 0
Caption = "0"
Left = 534
Top = 359
TabIndex = 20
ForeColor = 0,0,128
BackColor = 192,192,192
ZOrderSet = 22
Name = "LblRezerv"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1YN0XALUH</uniqueid>
		<timestamp>958115367</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>LblItog</objname>
		<parent>frmprimarydocpartordedit</parent>
		<properties>FontBold = .T.
FontName = "Arial"
FontSize = 11
BackStyle = 0
Caption = "0"
Left = 534
Top = 383
TabIndex = 17
ForeColor = 0,0,128
BackColor = 192,192,192
ZOrderSet = 23
Name = "LblItog"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18I0M4ORT</uniqueid>
		<timestamp>958115367</timestamp>
		<class>cnttvrvat</class>
		<classloc>primarydoc_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>Cnttvrvat</objname>
		<parent>frmprimarydocpartordedit</parent>
		<properties>Top = 455
Left = 6
Width = 236
Height = 28
TabIndex = 25
ZOrderSet = 30
Name = "Cnttvrvat"
shpVat.Name = "shpVat"
lblTvrVATRate.Left = 5
lblTvrVATRate.Top = 8
lblTvrVATRate.Name = "lblTvrVATRate"
txtTvrVATRate.ControlSource = "lvFrmPartTvrEditOrder.TvrVATRate"
txtTvrVATRate.Height = 22
txtTvrVATRate.Left = 134
txtTvrVATRate.Top = 4
txtTvrVATRate.Width = 100
txtTvrVATRate.Name = "txtTvrVATRate"
</properties>
		<protected/>
		<methods>PROCEDURE txtTvrVATRate._handleanychange
ThisForm.CalculateVatSumSale()
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1YN0XALU9</uniqueid>
		<timestamp>958115367</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>Lbl8</objname>
		<parent>frmprimarydocpartordedit</parent>
		<properties>FontBold = .T.
FontName = "Arial"
FontSize = 11
BackStyle = 1
Caption = "Ñêèäêà"
Left = 448
Top = 430
TabIndex = 22
ForeColor = 252,103,3
ZOrderSet = 25
Name = "Lbl8"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1YN0XALUA</uniqueid>
		<timestamp>958115367</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>LblDisc</objname>
		<parent>frmprimarydocpartordedit</parent>
		<properties>FontBold = .T.
FontName = "Arial"
FontSize = 11
BackStyle = 1
Caption = "100.00"
Left = 512
Top = 430
TabIndex = 23
ForeColor = 242,116,13
ZOrderSet = 26
Name = "LblDisc"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1YN0XALUC</uniqueid>
		<timestamp>958115367</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>Lbl11</objname>
		<parent>frmprimarydocpartordedit</parent>
		<properties>FontBold = .T.
FontName = "Arial"
FontSize = 11
BackStyle = 1
Caption = "Íà ñêëàäå:"
Left = 448
Top = 335
TabIndex = 19
ForeColor = 0,0,128
ZOrderSet = 29
Name = "Lbl11"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1YO10MT7B</uniqueid>
		<timestamp>0</timestamp>
		<class>cmd</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>CmdClose</objname>
		<parent>frmprimarydocpartordedit</parent>
		<properties>Top = 490
Left = 912
Height = 25
Width = 67
FontBold = .T.
Caption = "Âûõîä"
TabIndex = 24
ZOrderSet = 27
Name = "CmdClose"
</properties>
		<protected/>
		<methods>PROCEDURE Click
*--âûéäåì èç ôîðìû ðåäàêòèðîâàíèÿ ïîçèöèé çàêàçà
WITH thisform
	*--ôëàã èçìåíåíèÿ äàííûõ
	IF .DataChanged
		.uRetVal = .T.
	ELSE
		.uRetVal = .F.
	ENDIF
	
	.cstDataWork.Restore([lvFrmPartTvrEditOrder])
	
	.Hide()
ENDWITH
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>COMMENT</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>0</timestamp>
		<class/>
		<classloc/>
		<baseclass/>
		<objname>frmprimarydocpartordedit</objname>
		<parent/>
		<properties>Arial, 0, 9, 5, 15, 12, 32, 3, 0
Arial, 1, 9, 6, 15, 12, 32, 3, 0
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1YL0TR31G</uniqueid>
		<timestamp>958764290</timestamp>
		<class>frmpdedit</class>
		<classloc>primarydoc_v1.vcx</classloc>
		<baseclass>form</baseclass>
		<objname>frmorderedit</objname>
		<parent/>
		<properties>Height = 258
Width = 700
DoCreate = .T.
Name = "frmorderedit"
shpFrmAttribute.Top = 274
shpFrmAttribute.Left = 5
shpFrmAttribute.Enabled = .F.
shpFrmAttribute.Visible = .F.
shpFrmAttribute.Name = "shpFrmAttribute"
cstmsghandler.Name = "cstmsghandler"
cstresizable.Name = "cstresizable"
Img1.Name = "Img1"
shpCommon.Top = 5
shpCommon.Left = 5
shpCommon.Height = 137
shpCommon.Width = 690
shpCommon.Name = "shpCommon"
lblFrmType.Name = "lblFrmType"
cntIdCtlGridFrmType.txtText.Name = "txtText"
cntIdCtlGridFrmType.cmdShow.Name = "cmdShow"
cntIdCtlGridFrmType.cmdClear.Name = "cmdClear"
cntIdCtlGridFrmType.CmdTree.Name = "CmdTree"
cntIdCtlGridFrmType.Olecommprox1.Top = 0
cntIdCtlGridFrmType.Olecommprox1.Left = 36
cntIdCtlGridFrmType.Olecommprox1.Height = 16
cntIdCtlGridFrmType.Olecommprox1.Width = 38
cntIdCtlGridFrmType.Olecommprox1.Name = "Olecommprox1"
cntIdCtlGridFrmType.Name = "cntIdCtlGridFrmType"
lblFrmNum.Left = 360
lblFrmNum.Name = "lblFrmNum"
txtFrmNum.Name = "txtFrmNum"
chkFrmAutoNum.Alignment = 0
chkFrmAutoNum.Name = "chkFrmAutoNum"
lblFrmDate.Name = "lblFrmDate"
cntTxtCtlCalendarFrmDate.txtText.Name = "txtText"
cntTxtCtlCalendarFrmDate.cmdShow.Name = "cmdShow"
cntTxtCtlCalendarFrmDate.Top = 38
cntTxtCtlCalendarFrmDate.Name = "cntTxtCtlCalendarFrmDate"
lblFrmDateAcc.Enabled = .F.
lblFrmDateAcc.Left = 360
lblFrmDateAcc.Top = 343
lblFrmDateAcc.Visible = .F.
lblFrmDateAcc.Name = "lblFrmDateAcc"
cntTxtCtlCalendarFrmDateAcc.txtText.Name = "txtText"
cntTxtCtlCalendarFrmDateAcc.cmdShow.Name = "cmdShow"
cntTxtCtlCalendarFrmDateAcc.Top = 340
cntTxtCtlCalendarFrmDateAcc.Left = 490
cntTxtCtlCalendarFrmDateAcc.Enabled = .F.
cntTxtCtlCalendarFrmDateAcc.Visible = .F.
cntTxtCtlCalendarFrmDateAcc.Name = "cntTxtCtlCalendarFrmDateAcc"
lblReason.Enabled = .F.
lblReason.Left = 24
lblReason.Top = 378
lblReason.Visible = .F.
lblReason.Name = "lblReason"
edtReason.Enabled = .F.
edtReason.Left = 140
edtReason.Top = 368
edtReason.Visible = .F.
edtReason.Name = "edtReason"
lblNote.Left = 10
lblNote.Top = 82
lblNote.Name = "lblNote"
edtNote.Left = 140
edtNote.Top = 67
edtNote.Name = "edtNote"
lblFrmPrcTypeID.Enabled = .F.
lblFrmPrcTypeID.Left = 24
lblFrmPrcTypeID.Top = 421
lblFrmPrcTypeID.Visible = .F.
lblFrmPrcTypeID.Name = "lblFrmPrcTypeID"
cntIDCtlGridFrmPrcTypeID.txtText.Name = "txtText"
cntIDCtlGridFrmPrcTypeID.cmdShow.Name = "cmdShow"
cntIDCtlGridFrmPrcTypeID.cmdClear.Name = "cmdClear"
cntIDCtlGridFrmPrcTypeID.CmdTree.Name = "CmdTree"
cntIDCtlGridFrmPrcTypeID.Olecommprox1.Top = 0
cntIDCtlGridFrmPrcTypeID.Olecommprox1.Left = 36
cntIDCtlGridFrmPrcTypeID.Olecommprox1.Height = 16
cntIDCtlGridFrmPrcTypeID.Olecommprox1.Width = 38
cntIDCtlGridFrmPrcTypeID.Olecommprox1.Name = "Olecommprox1"
cntIDCtlGridFrmPrcTypeID.Top = 418
cntIDCtlGridFrmPrcTypeID.Left = 140
cntIDCtlGridFrmPrcTypeID.Enabled = .F.
cntIDCtlGridFrmPrcTypeID.Visible = .F.
cntIDCtlGridFrmPrcTypeID.Name = "cntIDCtlGridFrmPrcTypeID"
lblFrmCurTypeID.Enabled = .F.
lblFrmCurTypeID.Left = 353
lblFrmCurTypeID.Top = 421
lblFrmCurTypeID.Visible = .F.
lblFrmCurTypeID.Name = "lblFrmCurTypeID"
cntIDCtlGridFrmCurTypeID.txtText.Name = "txtText"
cntIDCtlGridFrmCurTypeID.cmdShow.Name = "cmdShow"
cntIDCtlGridFrmCurTypeID.cmdClear.Name = "cmdClear"
cntIDCtlGridFrmCurTypeID.CmdTree.Name = "CmdTree"
cntIDCtlGridFrmCurTypeID.Olecommprox1.Top = 0
cntIDCtlGridFrmCurTypeID.Olecommprox1.Left = 36
cntIDCtlGridFrmCurTypeID.Olecommprox1.Height = 16
cntIDCtlGridFrmCurTypeID.Olecommprox1.Width = 38
cntIDCtlGridFrmCurTypeID.Olecommprox1.Name = "Olecommprox1"
cntIDCtlGridFrmCurTypeID.Top = 418
cntIDCtlGridFrmCurTypeID.Left = 488
cntIDCtlGridFrmCurTypeID.Enabled = .F.
cntIDCtlGridFrmCurTypeID.Visible = .F.
cntIDCtlGridFrmCurTypeID.Name = "cntIDCtlGridFrmCurTypeID"
lblFrmStatus.Left = 10
lblFrmStatus.Top = 113
lblFrmStatus.Name = "lblFrmStatus"
cntIdCtlGridFrmStatus.txtText.Name = "txtText"
cntIdCtlGridFrmStatus.cmdShow.Name = "cmdShow"
cntIdCtlGridFrmStatus.cmdClear.Name = "cmdClear"
cntIdCtlGridFrmStatus.CmdTree.Name = "CmdTree"
cntIdCtlGridFrmStatus.Olecommprox1.Top = 0
cntIdCtlGridFrmStatus.Olecommprox1.Left = 36
cntIdCtlGridFrmStatus.Olecommprox1.Height = 16
cntIdCtlGridFrmStatus.Olecommprox1.Width = 38
cntIdCtlGridFrmStatus.Olecommprox1.Name = "Olecommprox1"
cntIdCtlGridFrmStatus.Top = 110
cntIdCtlGridFrmStatus.Left = 140
cntIdCtlGridFrmStatus.Name = "cntIdCtlGridFrmStatus"
lblFrmParID.Enabled = .F.
lblFrmParID.Left = 353
lblFrmParID.Top = 449
lblFrmParID.Visible = .F.
lblFrmParID.Name = "lblFrmParID"
cntIDCtlGridFrmParID.txtText.Name = "txtText"
cntIDCtlGridFrmParID.cmdShow.Name = "cmdShow"
cntIDCtlGridFrmParID.cmdClear.Name = "cmdClear"
cntIDCtlGridFrmParID.CmdTree.Name = "CmdTree"
cntIDCtlGridFrmParID.Olecommprox1.Top = 0
cntIDCtlGridFrmParID.Olecommprox1.Left = 36
cntIDCtlGridFrmParID.Olecommprox1.Height = 16
cntIDCtlGridFrmParID.Olecommprox1.Width = 38
cntIDCtlGridFrmParID.Olecommprox1.Name = "Olecommprox1"
cntIDCtlGridFrmParID.Top = 446
cntIDCtlGridFrmParID.Left = 488
cntIDCtlGridFrmParID.Enabled = .F.
cntIDCtlGridFrmParID.Visible = .F.
cntIDCtlGridFrmParID.Name = "cntIDCtlGridFrmParID"
shpControl.Top = 147
shpControl.Left = 5
shpControl.Width = 690
shpControl.Name = "shpControl"
lblDev.Left = 10
lblDev.Top = 155
lblDev.Name = "lblDev"
Lbl1.Enabled = .F.
Lbl1.Left = 264
Lbl1.Top = 299
Lbl1.Visible = .F.
Lbl1.Name = "Lbl1"
CntidctlgridPbook.txtText.Name = "txtText"
CntidctlgridPbook.cmdShow.Name = "cmdShow"
CntidctlgridPbook.cmdClear.Name = "cmdClear"
CntidctlgridPbook.CmdTree.Name = "CmdTree"
CntidctlgridPbook.Olecommprox1.Top = 0
CntidctlgridPbook.Olecommprox1.Left = 36
CntidctlgridPbook.Olecommprox1.Height = 16
CntidctlgridPbook.Olecommprox1.Width = 38
CntidctlgridPbook.Olecommprox1.Name = "Olecommprox1"
CntidctlgridPbook.Top = 296
CntidctlgridPbook.Left = 446
CntidctlgridPbook.Enabled = .F.
CntidctlgridPbook.Visible = .F.
CntidctlgridPbook.Name = "CntidctlgridPbook"
cntIdCtlGridDev.txtText.Name = "txtText"
cntIdCtlGridDev.cmdShow.Name = "cmdShow"
cntIdCtlGridDev.cmdClear.Name = "cmdClear"
cntIdCtlGridDev.CmdTree.Name = "CmdTree"
cntIdCtlGridDev.Olecommprox1.Top = 0
cntIdCtlGridDev.Olecommprox1.Left = 36
cntIdCtlGridDev.Olecommprox1.Height = 16
cntIdCtlGridDev.Olecommprox1.Width = 38
cntIdCtlGridDev.Olecommprox1.Name = "Olecommprox1"
cntIdCtlGridDev.Top = 152
cntIdCtlGridDev.Left = 92
cntIdCtlGridDev.Name = "cntIdCtlGridDev"
lblContr.Enabled = .F.
lblContr.Left = 360
lblContr.Top = 483
lblContr.Visible = .F.
lblContr.Name = "lblContr"
cntIdCtlGridContr.txtText.Name = "txtText"
cntIdCtlGridContr.cmdShow.Name = "cmdShow"
cntIdCtlGridContr.cmdClear.Name = "cmdClear"
cntIdCtlGridContr.CmdTree.Name = "CmdTree"
cntIdCtlGridContr.Olecommprox1.Top = 0
cntIdCtlGridContr.Olecommprox1.Left = 36
cntIdCtlGridContr.Olecommprox1.Height = 16
cntIdCtlGridContr.Olecommprox1.Width = 38
cntIdCtlGridContr.Olecommprox1.Name = "Olecommprox1"
cntIdCtlGridContr.Top = 480
cntIdCtlGridContr.Left = 432
cntIdCtlGridContr.Enabled = .F.
cntIdCtlGridContr.Visible = .F.
cntIdCtlGridContr.Name = "cntIdCtlGridContr"
shpQualityEmi.Top = 185
shpQualityEmi.Left = 5
shpQualityEmi.Height = 34
shpQualityEmi.Width = 690
shpQualityEmi.Name = "shpQualityEmi"
lblPointEmi.Left = 349
lblPointEmi.Top = 155
lblPointEmi.Name = "lblPointEmi"
cntIdCtlGridPointEmi.txtText.Name = "txtText"
cntIdCtlGridPointEmi.cmdShow.Name = "cmdShow"
cntIdCtlGridPointEmi.cmdClear.Name = "cmdClear"
cntIdCtlGridPointEmi.CmdTree.Name = "CmdTree"
cntIdCtlGridPointEmi.Olecommprox1.Top = 0
cntIdCtlGridPointEmi.Olecommprox1.Left = 36
cntIdCtlGridPointEmi.Olecommprox1.Height = 16
cntIdCtlGridPointEmi.Olecommprox1.Width = 38
cntIdCtlGridPointEmi.Olecommprox1.Name = "Olecommprox1"
cntIdCtlGridPointEmi.Top = 152
cntIdCtlGridPointEmi.Left = 456
cntIdCtlGridPointEmi.Width = 232
cntIdCtlGridPointEmi.Name = "cntIdCtlGridPointEmi"
lblPointEmiAccount.Enabled = .F.
lblPointEmiAccount.Left = 10
lblPointEmiAccount.Top = 514
lblPointEmiAccount.Visible = .F.
lblPointEmiAccount.Name = "lblPointEmiAccount"
cntIdCtlGridPointEmiAccount.txtText.Name = "txtText"
cntIdCtlGridPointEmiAccount.cmdShow.Name = "cmdShow"
cntIdCtlGridPointEmiAccount.cmdClear.Name = "cmdClear"
cntIdCtlGridPointEmiAccount.CmdTree.Name = "CmdTree"
cntIdCtlGridPointEmiAccount.Olecommprox1.Top = 0
cntIdCtlGridPointEmiAccount.Olecommprox1.Left = 36
cntIdCtlGridPointEmiAccount.Olecommprox1.Height = 16
cntIdCtlGridPointEmiAccount.Olecommprox1.Width = 38
cntIdCtlGridPointEmiAccount.Olecommprox1.Name = "Olecommprox1"
cntIdCtlGridPointEmiAccount.Top = 511
cntIdCtlGridPointEmiAccount.Left = 140
cntIdCtlGridPointEmiAccount.Enabled = .F.
cntIdCtlGridPointEmiAccount.Visible = .F.
cntIdCtlGridPointEmiAccount.Name = "cntIdCtlGridPointEmiAccount"
lblExecEmi.Enabled = .T.
lblExecEmi.Left = 10
lblExecEmi.Top = 193
lblExecEmi.Visible = .T.
lblExecEmi.Name = "lblExecEmi"
cntIdCtlGridExecEmi.txtText.Height = 23
cntIdCtlGridExecEmi.txtText.Left = 0
cntIdCtlGridExecEmi.txtText.Top = 0
cntIdCtlGridExecEmi.txtText.Width = 168
cntIdCtlGridExecEmi.txtText.Name = "txtText"
cntIdCtlGridExecEmi.cmdShow.Top = 0
cntIdCtlGridExecEmi.cmdShow.Left = 171
cntIdCtlGridExecEmi.cmdShow.Name = "cmdShow"
cntIdCtlGridExecEmi.cmdClear.Top = 0
cntIdCtlGridExecEmi.cmdClear.Left = 194
cntIdCtlGridExecEmi.cmdClear.Name = "cmdClear"
cntIdCtlGridExecEmi.CmdTree.Top = 0
cntIdCtlGridExecEmi.CmdTree.Left = 138
cntIdCtlGridExecEmi.CmdTree.Name = "CmdTree"
cntIdCtlGridExecEmi.Olecommprox1.Top = 0
cntIdCtlGridExecEmi.Olecommprox1.Left = 36
cntIdCtlGridExecEmi.Olecommprox1.Height = 16
cntIdCtlGridExecEmi.Olecommprox1.Width = 38
cntIdCtlGridExecEmi.Olecommprox1.Name = "Olecommprox1"
cntIdCtlGridExecEmi.Top = 190
cntIdCtlGridExecEmi.Left = 120
cntIdCtlGridExecEmi.Width = 216
cntIdCtlGridExecEmi.Height = 24
cntIdCtlGridExecEmi.Enabled = .T.
cntIdCtlGridExecEmi.Visible = .T.
cntIdCtlGridExecEmi.Name = "cntIdCtlGridExecEmi"
shpQualityIsp.Top = 542
shpQualityIsp.Left = 355
shpQualityIsp.Height = 34
shpQualityIsp.Width = 340
shpQualityIsp.Enabled = .F.
shpQualityIsp.Visible = .F.
shpQualityIsp.Name = "shpQualityIsp"
lblPointIsp.Enabled = .F.
lblPointIsp.Left = 360
lblPointIsp.Top = 550
lblPointIsp.Visible = .F.
lblPointIsp.Name = "lblPointIsp"
cntIdCtlGridPointIsp.txtText.Name = "txtText"
cntIdCtlGridPointIsp.cmdShow.Name = "cmdShow"
cntIdCtlGridPointIsp.cmdClear.Name = "cmdClear"
cntIdCtlGridPointIsp.CmdTree.Name = "CmdTree"
cntIdCtlGridPointIsp.Olecommprox1.Top = 0
cntIdCtlGridPointIsp.Olecommprox1.Left = 36
cntIdCtlGridPointIsp.Olecommprox1.Height = 16
cntIdCtlGridPointIsp.Olecommprox1.Width = 38
cntIdCtlGridPointIsp.Olecommprox1.Name = "Olecommprox1"
cntIdCtlGridPointIsp.Top = 547
cntIdCtlGridPointIsp.Left = 490
cntIdCtlGridPointIsp.Enabled = .F.
cntIdCtlGridPointIsp.Visible = .F.
cntIdCtlGridPointIsp.Name = "cntIdCtlGridPointIsp"
lblPointIspAccount.Enabled = .F.
lblPointIspAccount.Left = 360
lblPointIspAccount.Top = 514
lblPointIspAccount.Visible = .F.
lblPointIspAccount.Name = "lblPointIspAccount"
cntIdCtlGridPointIspAccount.txtText.Name = "txtText"
cntIdCtlGridPointIspAccount.cmdShow.Name = "cmdShow"
cntIdCtlGridPointIspAccount.cmdClear.Name = "cmdClear"
cntIdCtlGridPointIspAccount.CmdTree.Name = "CmdTree"
cntIdCtlGridPointIspAccount.Olecommprox1.Top = 0
cntIdCtlGridPointIspAccount.Olecommprox1.Left = 36
cntIdCtlGridPointIspAccount.Olecommprox1.Height = 16
cntIdCtlGridPointIspAccount.Olecommprox1.Width = 38
cntIdCtlGridPointIspAccount.Olecommprox1.Name = "Olecommprox1"
cntIdCtlGridPointIspAccount.Top = 511
cntIdCtlGridPointIspAccount.Left = 490
cntIdCtlGridPointIspAccount.Enabled = .F.
cntIdCtlGridPointIspAccount.Visible = .F.
cntIdCtlGridPointIspAccount.Name = "cntIdCtlGridPointIspAccount"
lblExecIsp.Enabled = .T.
lblExecIsp.Left = 349
lblExecIsp.Top = 193
lblExecIsp.Visible = .T.
lblExecIsp.Name = "lblExecIsp"
cntIdCtlGridExecIsp.txtText.Height = 23
cntIdCtlGridExecIsp.txtText.Left = 0
cntIdCtlGridExecIsp.txtText.Top = 0
cntIdCtlGridExecIsp.txtText.Width = 184
cntIdCtlGridExecIsp.txtText.Name = "txtText"
cntIdCtlGridExecIsp.cmdShow.Top = 0
cntIdCtlGridExecIsp.cmdShow.Left = 186
cntIdCtlGridExecIsp.cmdShow.Name = "cmdShow"
cntIdCtlGridExecIsp.cmdClear.Top = 0
cntIdCtlGridExecIsp.cmdClear.Left = 209
cntIdCtlGridExecIsp.cmdClear.Name = "cmdClear"
cntIdCtlGridExecIsp.CmdTree.Top = 0
cntIdCtlGridExecIsp.CmdTree.Left = 122
cntIdCtlGridExecIsp.CmdTree.Name = "CmdTree"
cntIdCtlGridExecIsp.Olecommprox1.Top = 0
cntIdCtlGridExecIsp.Olecommprox1.Left = 36
cntIdCtlGridExecIsp.Olecommprox1.Height = 16
cntIdCtlGridExecIsp.Olecommprox1.Width = 38
cntIdCtlGridExecIsp.Olecommprox1.Name = "Olecommprox1"
cntIdCtlGridExecIsp.Top = 190
cntIdCtlGridExecIsp.Left = 456
cntIdCtlGridExecIsp.Width = 232
cntIdCtlGridExecIsp.Enabled = .T.
cntIdCtlGridExecIsp.Visible = .T.
cntIdCtlGridExecIsp.Name = "cntIdCtlGridExecIsp"
lblFrmAttribute.Enabled = .F.
lblFrmAttribute.Left = 10
lblFrmAttribute.Top = 279
lblFrmAttribute.Visible = .F.
lblFrmAttribute.Name = "lblFrmAttribute"
grdBit.Column1.Header1.Name = "Header1"
grdBit.Column1.CHK1.Alignment = 0
grdBit.Column1.CHK1.Enabled = .F.
grdBit.Column1.CHK1.Visible = .F.
grdBit.Column1.CHK1.Name = "CHK1"
grdBit.Column1.Enabled = .F.
grdBit.Column1.Visible = .F.
grdBit.Column1.Name = "Column1"
grdBit.Column2.Header1.Name = "Header1"
grdBit.Column2.Txtgrd1.Enabled = .F.
grdBit.Column2.Txtgrd1.Visible = .F.
grdBit.Column2.Txtgrd1.Name = "Txtgrd1"
grdBit.Column2.Enabled = .F.
grdBit.Column2.Visible = .F.
grdBit.Column2.Name = "Column2"
grdBit.Enabled = .F.
grdBit.Left = 10
grdBit.Top = 296
grdBit.Visible = .F.
grdBit.Name = "grdBit"
cntcancelsavehandled.cmdCancel.Name = "cmdCancel"
cntcancelsavehandled.cmdOk.Name = "cmdOk"
cntcancelsavehandled.Top = 228
cntcancelsavehandled.Left = 490
cntcancelsavehandled.Name = "cntcancelsavehandled"
cstdatawork.Name = "cstdatawork"
Cmd1.Name = "Cmd1"
Cmd2.Name = "Cmd2"
</properties>
		<protected/>
		<methods>PROCEDURE Load
*------------------------------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: FRMORDEREDIT.LOAD
* Called by.......: &lt;Sys Event&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Çàãðóçêà äàííûõ äëÿ ôîðìû.
*------------------------------------------------------------------------------

*-Âûïîëíèì ìåòîä ðîäèòåëüñêîãî êëàññà
DODEFAULT()
*------------------------------------------------------------------------------

*-Îòêðûâàåì è óñòàíàâëèâàåì òåêóùóþ ÁÄ
IF !DBUSED([BASIS])
	OPEN DATABASE BASIS
ENDIF
***
SET DATABASE TO BASIS	
*------------------------------------------------------------------------------

*--Îòêðîåì íóæíûå ñïðàâî÷íèêè
USE lvFSView IN 0
*------------------------------------------------------------------------------

*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1>Class</reserved1>
		<reserved2>2</reserved2>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6>Pixels</reserved6>
		<reserved7>ZOO ðåäàêòèðîâàíèå øàïêè çàêàçà</reserved7>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18I0M4ORT</uniqueid>
		<timestamp>958764290</timestamp>
		<class>cntidctlgrid</class>
		<classloc>comidctl_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>CntIDFSgrid</objname>
		<parent>frmorderedit</parent>
		<properties>Top = 38
Left = 360
Width = 322
Height = 23
TabIndex = 29
ZOrderSet = 42
_allowresizecontent = .T.
_allowresize = .T.
_rsaliasname = lvFSView
_rsfieldnameid = FSID
_rsfieldnametext = FSNM
_controlsourcetype = 1
_controlsource = lvFrmEdit.FSID
Name = "CntIDFSgrid"
txtText.Height = 23
txtText.Left = 0
txtText.Top = 0
txtText.Width = 273
txtText._highlightobject = .parent.parent.lblPointIsp
txtText.Name = "txtText"
cmdShow.Top = 0
cmdShow.Left = 274
cmdShow.Name = "cmdShow"
cmdClear.Top = 0
cmdClear.Left = 297
cmdClear.Name = "cmdClear"
CmdTree.Name = "CmdTree"
Olecommprox1.Top = 0
Olecommprox1.Left = 36
Olecommprox1.Height = 16
Olecommprox1.Width = 38
Olecommprox1.Name = "Olecommprox1"
</properties>
		<protected/>
		<methods>PROCEDURE _refreshrelatedobjects
IF !EMPTY(this.value)
	SELECT lvFrmEdit
	REPLACE lvFrmEdit.FSPerc WITH lvFSView.FSPerc
ELSE
	REPLACE lvFrmEdit.FSPerc WITH 0.00
ENDIF
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>COMMENT</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>0</timestamp>
		<class/>
		<classloc/>
		<baseclass/>
		<objname>frmorderedit</objname>
		<parent/>
		<properties>Arial, 0, 9, 5, 15, 12, 32, 3, 0
Arial, 1, 9, 6, 15, 12, 32, 3, 0
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18G14BM5C</uniqueid>
		<timestamp>958764793</timestamp>
		<class>frmedit</class>
		<classloc>baseform_v1.vcx</classloc>
		<baseclass>form</baseclass>
		<objname>frmaccountingedit</objname>
		<parent/>
		<properties>Height = 589
Width = 700
DoCreate = .T.
nfrmtypeid = 0
cmode = 
cmeasureunitlist = 
Name = "frmaccountingedit"
cstmsghandler.Name = "cstmsghandler"
cstresizable.Name = "cstresizable"
Img1.Name = "Img1"
cstdatawork.Name = "cstdatawork"
</properties>
		<protected/>
		<methods>PROCEDURE _handlecntcancelsaveevent
*-------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: FRMPRIMARYDOCEDIT._HANDLECNTCANCELSAVEEVENT
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;tcMessage&gt;
* Returns.........: &lt;none&gt;
* Notes...........: &lt;~&gt;
*-------------------------------------------------------
LPARAMETERS tcMessage

WITH This

*12.05.2004 03:16 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	llDataWasChanged, ;
		llResSave
***
llResSave = .T.
*------------------------------------------------------------------------------

*12.05.2004 00:37 -&gt;Ñîõðàíèì/îòìåíèì èçìåíåíèÿ
IF tcMessage = [OK]

	*08.06.2006 10:09 -&gt; Ñîõðàíÿåì öåíó ïðîäàæè
	ThisForm.SaveSale()
	*------------------------------------------------------------------------------
	
	*07.07.2004 17:29 -&gt; Ïðè óäàëåíèè óäàëèì çàïèñü
	IF .cMode = [DELE]
		
		*07.07.2004 17:35 -&gt; Óäàëèì çàïèñü
		DELETE IN lvFrmEdit
		***
		llDataWasChanged = .T.
		*------------------------------------------------------------------------------
	
	ELSE

		*23.12.2004 13:20 -&gt; Åñëè âêëþ÷åíà àâòîíóìåðàöèÿ ïðîèçâîäèì àâòîìàòè÷åñêóþ âñòàâêó íîìåðà
		IF .chkFrmAutoNum.Value
			REPLACE FrmNum WITH spFrmAutoNum(lvFrmEdit.FrmTypeID,lvFrmEdit.FrmDate,lvFrmEdit.PointEmiOUID,lvFrmEdit.PointIspOUID) IN lvFrmEdit
		ENDIF
		*------------------------------------------------------------------------------

		*08.06.2006 10:14 -&gt; Ïîëó÷èì ôëàã áûëè âíåñåíû èçìåíåíèÿ èëè íåò
		llDataWasChanged = .cstDataWork.DataChanged([lvFrmEdit],.T.)
		*------------------------------------------------------------------------------

	ENDIF
	*------------------------------------------------------------------------------
	
	*****************************************************************************
	*1. Ñîõðàíåíèå èíôîðìàöèè î äîêóìåíòå										*
	*****************************************************************************

	*08.06.2006 10:18 -&gt; Ïðîèçâîäèì ñîõðàíåíèå Alias-à
	IF llDataWasChanged
		
		*02.04.2004 16:59 -&gt;Ïðîèçâîäèì ñîõðàíåíèå
		llResSave = .cstDataWork.Save([lvFrmEdit])
		*------------------------------------------------------------------------------
		
		*02.04.2004 17:00 -&gt;Îáðàáîòàåì ðåçóëüòàòû ñîõðàíåíèÿ
		IF !llResSave
			IF .cstDataWork.HandleSaveFail() &amp;&amp;åñëè îøèáêà îáðàáîòàíà
				RETURN .T. &amp;&amp;âîçâðàùàåìñÿ ê ðåäàêòèðîâàíèþ
			ELSE	
				MESSAGEBOX([Â ïðîöåññå ñîõðàíåíèÿ ïðîèçîøëà îøèáêà. Èçìåíåíèÿ ñîõðàíåíû íå áóäóò.],16,[Îøèáêà...])
				.cstDataWork.Restore([lvFrmEdit])
			ENDIF	
		ENDIF
		*------------------------------------------------------------------------------
		
	ELSE
		
		*19.07.2005 18:57 -&gt;Îòìåíèì èçìåíåíèÿ
		.cstDataWork.Restore([lvFrmEdit])
		*------------------------------------------------------------------------------
		
	ENDIF
	*------------------------------------------------------------------------------

	*****************************************************************************
	*2. Ñîõðàíåíèå èíôîðìàöèè î êàëüêóëÿöèè										*
	*****************************************************************************

	*08.06.2006 10:23 -&gt; Âûïîëíÿåì äàëüíåéøèå äåéñòâèÿ, òîëüêî åñëè ïðåäûäóùèå äåéñòâèÿ çàâåðøèëèñü óñïåõîì
	IF llResSave

		*08.06.2006 10:14 -&gt; Ïîëó÷èì ôëàã áûëè âíåñåíû èçìåíåíèÿ èëè íåò
		llDataWasChanged = .cstDataWork.DataChanged([lvAccountingEdit],.T.)
		*------------------------------------------------------------------------------

		*08.06.2006 10:18 -&gt; Ïðîèçâîäèì ñîõðàíåíèå Alias-à
		IF llDataWasChanged
			
			*02.04.2004 16:59 -&gt;Ïðîèçâîäèì ñîõðàíåíèå
			llResSave = .cstDataWork.Save([lvAccountingEdit])
			*------------------------------------------------------------------------------
			
			*02.04.2004 17:00 -&gt;Îáðàáîòàåì ðåçóëüòàòû ñîõðàíåíèÿ
			IF !llResSave
				IF .cstDataWork.HandleSaveFail() &amp;&amp;åñëè îøèáêà îáðàáîòàíà
					RETURN .T. &amp;&amp;âîçâðàùàåìñÿ ê ðåäàêòèðîâàíèþ
				ELSE	
					MESSAGEBOX([Â ïðîöåññå ñîõðàíåíèÿ ïðîèçîøëà îøèáêà. Èçìåíåíèÿ ñîõðàíåíû íå áóäóò.],16,[Îøèáêà...])
					.cstDataWork.Restore([lvAccountingEdit])
				ENDIF	
			ENDIF
			*------------------------------------------------------------------------------
			
		ELSE
			
			*19.07.2005 18:57 -&gt;Îòìåíèì èçìåíåíèÿ
			.cstDataWork.Restore([lvAccountingEdit])
			*------------------------------------------------------------------------------
			
		ENDIF
		*------------------------------------------------------------------------------

	ENDIF
	*------------------------------------------------------------------------------	

	*30.11.2004 12:15 -&gt; Îáðàáîòàåì ðåçóëüòàòû ÂÑÅÕ îïåðàöèé ñîõðàíåíèÿ
	IF llResSave

		*30.11.2004 12:16 -&gt;Ñîõðàíÿåì ðåçóëüòàòû âûïîëíåíèÿ îïåðàöèè â ñâîéñòâå .uRetVal
		.uRetVal = .T.
		*------------------------------------------------------------------------------

	ELSE
		
		*30.11.2004 12:19 -&gt;Îáðàáàòûâàåì îøèáêó
		IF .cstDataWork.HandleSaveFail() &amp;&amp;åñëè îøèáêà îáðàáîòàíà

			*29.11.2004 19:05 -&gt;Âîçâðàùàåìñÿ ê ðåäàêòèðîâàíèþ
			RETURN .T.
			*------------------------------------------------------------------------------
		
		ELSE
			
			*01.04.2004 18:40 -&gt;Ñîîáùàåì îá îøèáêå
			MESSAGEBOX([Â ïðîöåññå ñîõðàíåíèÿ ïðîèçîøëà îøèáêà. Èçìåíåíèÿ ñîõðàíåíû íå áóäóò.],16,[Îøèáêà...])
			*------------------------------------------------------------------------------
			
			*01.04.2004 18:40 -&gt;Îòìåíÿåì èçìåíåíèÿ â ðîäèòåëüñêîì Aliase
			.cstDataWork.Restore([lvFrmEdit])
			.cstDataWork.Restore([lvAccountingEdit])
			*------------------------------------------------------------------------------
			
		ENDIF
		*------------------------------------------------------------------------------
		
		*30.11.2004 12:16 -&gt;Ñîõðàíÿåì ðåçóëüòàòû âûïîëíåíèÿ îïåðàöèè â ñâîéñòâå .uRetVal
		.uRetVal = .F.
		*------------------------------------------------------------------------------
		
	ENDIF
	*------------------------------------------------------------------------------
	
ELSE

	*01.04.2004 18:40 -&gt;Îòìåíÿåì èçìåíåíèÿ â ðîäèòåëüñêîì Aliase
	.cstDataWork.Restore([lvFrmEdit])
	.cstDataWork.Restore([lvAccountingEdit])
	*------------------------------------------------------------------------------
	
	*30.11.2004 12:16 -&gt;Ñîõðàíÿåì ðåçóëüòàòû âûïîëíåíèÿ îïåðàöèè â ñâîéñòâå .uRetVal
	.uRetVal = .F.
	*------------------------------------------------------------------------------

ENDIF
*------------------------------------------------------------------------------

*30.11.2004 12:25 -&gt;Ñêðûâåì ôîðìó
.Hide()
*------------------------------------------------------------------------------

ENDWITH
************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************
ENDPROC
PROCEDURE calcprc
*------------------------------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: frmAccountingEdit.CalcPrc
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: &lt;public&gt; Ðàñ÷¸ò ïðîöåíòà íàöåíêè
*------------------------------------------------------------------------------
WITH This

*07.06.2006 16:07 -&gt; Ðàñ÷¸ò ïðîöåíòà íàöåíêè
DO CASE
	CASE .TxtAccPriceTotal.Value = 0
	**	MESSAGEBOX([Îïðåäåëèòå ñòîèìîñòü ñûðüåâîãî íàáîðà],4096+64,[Ïðåäóïðåæäåíèå],900)
	**	.TxtAccPriceTotal.SetFocus()
	CASE .TxtAccQnt.Value = 0
	**	MESSAGEBOX([Îïðåäåëèòå êîëè÷åñòâî áëþä â çàêëàäêå],4096+64,[Ïðåäóïðåæäåíèå],900)
	**	.TxtAccQnt.SetFocus()
	OTHERWISE
		.TxtAccPrc.Value = ROUND(.TxtAccSale.Value / .txtAccPrice.Value * 100, 2) - 100
ENDCASE
*------------------------------------------------------------------------------

ENDWITH
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE calcprice
*------------------------------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: frmAccountingEdit.CalcSale
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: &lt;public&gt; Ðàñ÷¸ò ñåáåñòîèìîñòè îäíîãî áëþäà
*------------------------------------------------------------------------------
WITH This

*07.06.2006 16:07 -&gt; Ðàñ÷¸ò ñåáåñòîèìîñòè îäíîãî áëþäà
DO CASE
	CASE .TxtAccQnt.Value = 0
		MESSAGEBOX([Îïðåäåëèòå êîëè÷åñòâî áëþä â çàêëàäêå],48,[Ïðåäóïðåæäåíèå])
		.TxtAccQnt.SetFocus()
	OTHERWISE
		.txtAccPrice.Value = .TxtAccPriceTotal.Value / .txtAccqnt.Value
ENDCASE
*------------------------------------------------------------------------------

ENDWITH
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE calcsale
*------------------------------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: frmAccountingEdit.CalcSale
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: &lt;public&gt; Ðàñ÷¸ò öåíû ïðîäàæè
*------------------------------------------------------------------------------
WITH This

*07.06.2006 16:07 -&gt; Ðàñ÷¸ò öåíû ïðîäàæè
DO CASE
	CASE .TxtAccPriceTotal.Value = 0
	**	MESSAGEBOX([Îïðåäåëèòå ñòîèìîñòü ñûðüåâîãî íàáîðà],4096+64,[Ïðåäóïðåæäåíèå],900)
	**	.TxtAccPriceTotal.SetFocus()
	CASE .TxtAccQnt.Value = 0
		MESSAGEBOX([Îïðåäåëèòå êîëè÷åñòâî áëþä â çàêëàäêå],4096+64,[Ïðåäóïðåæäåíèå],900)
	**	.TxtAccQnt.SetFocus()
	OTHERWISE
		.TxtAccSale.Value = ROUND(.txtAccPrice.Value * (1+.TxtAccPrc.Value/100),2)
ENDCASE
*------------------------------------------------------------------------------

ENDWITH
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE Init
*------------------------------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: FRMPRIMARYDOCEDIT.INIT
* Called by.......: &lt;Sys Event&gt;
* Parameters......: &lt;tcCommand, tuParam1&gt;
* Returns.........: &lt;none&gt;
* Notes...........: &lt;~&gt;
*------------------------------------------------------------------------------
LPARAMETERS tcCommand, tuParam1

*12.05.2004 00:34 -&gt;Âûïîëíèì ìåòîä ðîäèòåëüñêîãî êëàññà
DODEFAULT()
*----------------------------------------------------------------------------

WITH This

*12.05.2004 00:30 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	loControl
PRIVATE _PARAM
*------------------------------------------------------------------------------

*12.05.2004 03:12 -&gt;Ñîõðàíèì êîìàíäó (ðåæèì ðàáîòû ñ äàííûìè)
.cMode = UPPER(ALLTRIM(tcCommand))
*------------------------------------------------------------------------------

*12.05.2004 00:31 -&gt; Çàãðóçèì äàííûå ñóùåñòâóþùåãî äîêóìåíòà
_PARAM = tuParam1
***
REQUERY([lvFrmEdit])
REQUERY([lvAccountingedit])
*------------------------------------------------------------------------------

*07.06.2006 15:39 -&gt; Ïðîâåðÿåì íàëè÷èå öåíû
.SetSale(lvAccountingEdit.AccTvrID,lvFrmEdit.FrmPrcTypeID)
.CalcPrice()
.CalcPrc()
*------------------------------------------------------------------------------

*12.05.2004 01:06 -&gt; Óêàæåì òèï äîêóìåíòà
.nFrmTypeID = lvFrmEdit.FrmTypeID
*------------------------------------------------------------------------------

*12.05.2004 00:51 -&gt;Ïîëó÷èì èíôîðìàöèþ î êà÷åñòâå äîêóìåíòà è íàñòðîèì âíåøíèé âèä ôîðìû
_PARAM = .nFrmTypeID
***
USE lvFrmTypeInfo IN 0
***
DO CASE
	CASE .cMode = [ADD]
		.Caption = [Äîáàâëåíèå]
		.Icon = FULLPATH([frmadd.ico])
	CASE .cMode = [EDIT]
		.Caption = [Ðåäàêòèðîâàíèå]
		.Icon = FULLPATH([frmedit.ico])
	CASE .cMode = [INFO]
		.Caption = [Ïðîñìîòð]
		.Icon = FULLPATH([frminfo.ico])
		.cntCancelSaveHandled.cmdOk.Enabled = .F.
	CASE .cMode = [DELE]
		.Caption = [Óäàëåíèå]
		.Icon = FULLPATH([frmdele.ico])
		.cntCancelSaveHandled.cmdOk.Caption = [Óäàëèòü]
ENDCASE
*------------------------------------------------------------------------------

*30.08.2005 15:09 -&gt; Íàñòðîèì âîçìîæíîñòü âûáîðà ïðàéñ-ëèñòà äëÿ äîêóìåíòîâ ñîäåðæàùèõ òîâàðíûå ïîçèöèè
.lblFrmPrcTypeID.Visible = lvFrmTypeInfo.FrmTypeIsContainTvr
.cntIDCtlGridFrmPrcTypeID.Visible = lvFrmTypeInfo.FrmTypeIsContainTvr
*------------------------------------------------------------------------------

*******************************************************************************
* Âûïîëíÿåì íàñòðîéêó "êà÷åñòâåííûõ" õàðàêòåðèñòèê ôîðì						  *	
*******************************************************************************

*23.11.2004 12:23 -&gt;Àòðèáóòû "ðàçðàáîò÷èê" è "êîíòðîëåð"
IF	lvFrmTypeInfo.DevSprID&gt;0 AND ;
	!ISNULL(lvFrmTypeInfo.DevSprDBObjNM) AND ;
	!EMPTY(lvFrmTypeInfo.DevSprDBObjNM)
	*{
	.lblDev.Caption = ALLTRIM(lvFrmTypeInfo.DevRoleNM)+[:]
	_PARAM = oApp.nUserKod
	USE (lvFrmTypeInfo.DevSprDBObjNM) IN 0 ALIAS DevSpr
	.cntIdCtlGridDev._GrdAddParams = [oMgrClient;CLT;FASTADD;] + ALLTRIM(STR(lvFrmTypeInfo.DevSprID)) + [;lvCltInCntViewRepl]
	.cntIdCtlGridDev._GrdInfoParams = [oMgrClient;CLT;INFO]
	*}
ELSE
	.lblDev.Visible = .F.
	.cntIdCtlGridDev.Visible = .F.
ENDIF
***
IF	lvFrmTypeInfo.ContrSprID&gt;0 AND ;
	!ISNULL(lvFrmTypeInfo.ContrSprDBObjNM) AND ;
	!EMPTY(lvFrmTypeInfo.ContrSprDBObjNM)
	*{
	.lblContr.Caption = ALLTRIM(lvFrmTypeInfo.ContrRoleNM)+[:]
	_PARAM = oApp.nUserKod
	USE (lvFrmTypeInfo.ContrSprDBObjNM) IN 0 ALIAS ContrSpr
	.cntIdCtlGridContr._GrdAddParams = [oMgrClient;CLT;FASTADD;] + ALLTRIM(STR(lvFrmTypeInfo.ContrSprID)) + [;lvCltInCntViewRepl]
	.cntIdCtlGridContr._GrdInfoParams = [oMgrClient;CLT;INFO]
	*}
ELSE
	.lblContr.Visible = .F.
	.cntIdCtlGridContr.Visible = .F.
ENDIF
*------------------------------------------------------------------------------


*23.11.2004 12:10 -&gt;Àòðèáóòû, îòíîñÿùèåñÿ ê òî÷êå èñïîëíåíèÿ
IF	lvFrmTypeInfo.PointIspSprID&gt;0 AND ;
	!ISNULL(lvFrmTypeInfo.PointIspSprDBObjNM) AND ;
	!EMPTY(lvFrmTypeInfo.PointIspSprDBObjNM)
	*{
	.lblPointIsp.Caption = ALLTRIM(lvFrmTypeInfo.PointIspRoleNM)+[:]
	_PARAM = oApp.nUserKod
	USE (lvFrmTypeInfo.PointIspSprDBObjNM) IN 0 ALIAS PointIspSpr
	IF lvFrmTypeInfo.FrmTypeDirection = 3
		.cntIdCtlGridPointIsp._GrdAddParams = [oMgrClient;CLT;FASTADD;] + ALLTRIM(STR(lvFrmTypeInfo.PointIspSprID)) + [;lvCltInCntViewRepl]
		.cntIdCtlGridPointIsp._GrdInfoParams = [oMgrClient;CLT;INFO]
	ENDIF
	*}
ELSE
	.lblPointIsp.Visible = .F.
	.cntIdCtlGridPointIsp.Visible = .F.
ENDIF	
*------------------------------------------------------------------------------

*12.05.2004 01:57 -&gt;Ïðèöåïëÿåì ControlSource â çàâèñèìîñòè îò òèïà
.cntIdCtlGridPointIsp._ControlSource = [lvFrmEdit.PointIspOUID]	&amp;&amp; èñïîëíÿåò ïîäðàçäåëåíèå
*------------------------------------------------------------------------------

.makestatuslist(lvFrmTypeInfo.FrmTypeStatusList)
*15.09.2005 15:52 -&gt; Ïîëó÷èì èíôîðìàöèþ î ñòàòóñå äîêóìåíòà
_PARAM = lvFrmEdit.FrmStatusID
***
USE IN IIF(USED([lvFrmStatusInfoByID]),[lvFrmStatusInfoByID],0)
***
USE lvFrmStatusInfoByID IN 0
*------------------------------------------------------------------------------

*15.09.2005 15:28 -&gt; Åñëè äîêóìåíò ó÷àñòâóåò â ó÷¸òå çàáëîêèðóåì âñå ïîëÿ êðîìå ñòàòóñà
IF	lvFrmStatusInfoByID.FrmStatIsInvAcc OR ;
	lvFrmStatusInfoByID.FrmStatIsCostAcc
	FOR EACH loControl IN .Controls
		DO CASE
			CASE INLIST(UPPER(ALLTRIM(loControl.Class)),[CNTIDCTLGRID],[COMTXTCTLCALENDAR])
				IF UPPER(ALLTRIM(loControl.Name)) # [CNTIDCTLGRIDFRMSTATUS]
					loControl.SetEnabled(.F.)
				ENDIF
			CASE INLIST(UPPER(ALLTRIM(loControl.Class)),[EDT],[TXT],[CHK])
				loControl.Enabled = .F.
		ENDCASE
	ENDFOR
ENDIF
*------------------------------------------------------------------------------
*20.03.2008 11:51 -&gt; Åñëè ïîëüçîâàòåëþ íåäîñòóïåí òåêóùèé ñòàòóñ - áëîêèðóåì ïîëå ñòàòóñà
.cntIdCtlGridFrmStatus.SetEnabled(lvFrmStatusList.IsEnabled)
.lblFrmStatus.Enabled = lvFrmStatusList.IsEnabled
*------------------------------------------------------------------------------

ENDWITH
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE Load
*------------------------------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: FRMPRIMARYDOCEDIT.LOAD
* Called by.......: &lt;Sys Event&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Çàãðóçêà äàííûõ äëÿ ôîðìû.
*------------------------------------------------------------------------------

*12.05.2004 00:27 -&gt;Âûïîëíèì ìåòîä ðîäèòåëüñêîãî êëàññà
DODEFAULT()
*------------------------------------------------------------------------------

*12.05.2004 00:27 -&gt;Îòêðûâàåì è óñòàíàâëèâàåì òåêóùå ÁÄ
IF !DBUSED([BASIS])
	OPEN DATABASE BASIS
ENDIF
***
SET DATABASE TO BASIS	
*------------------------------------------------------------------------------

*12.05.2004 00:26 -&gt;Îòêðûâàåì Alias äëÿ ðåäàêòèðîâàíèÿ äîêóìåíòîâ (ïóñòîé)
USE lvFrmEdit IN 0 NODATA
USE lvAccountingEdit IN 0 NODATA
USE lvPriceEdit IN 0 NODATA
*------------------------------------------------------------------------------

*10.02.2008 11:44 -&gt; Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL _PARAM
***
_PARAM = oApp.nUserKod
*------------------------------------------------------------------------------

*12.05.2004 01:18 -&gt; Îòêðîåì ñïðàâî÷íèêè
USE lvBludoList IN 0 ALIAS TovarList
USE lvFrmTypeList IN 0
USE lvPrcTypeList IN 0
USE lvFrmStatusList IN 0
***
This.cMeasureUnitList = spGetBaseMsuList(0)
USE (LEFT(This.cMeasureUnitList,AT([;],This.cMeasureUnitList)-1)) IN 0 ALIAS [lvTvrMsuList]
*------------------------------------------------------------------------------

*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE makestatuslist
*** Ìåíÿåì íàçâàíèå ñòàòóñîâ äîêóìåíòîâ â ñîîòâåòñòâèè ñ òðåáîâàíèÿìè äàííîãî
LPARAMETERS lcStatusList
IF EMPTY(NVL(lcStatusList,''))
	RETURN
ENDIF
LOCAL lnHandledMsgCount ,lnCounter
lcStatusList = ';' + lcStatusList + ';'
lnHandledMsgCount = OCCURS([;],lcStatusList) - 1
FOR lnCounter = 1 TO lnHandledMsgCount STEP 1
	lcHandledStandartMsg = SUBSTR(lcStatusList,AT([;],lcStatusList,lnCounter)+1,AT([;],lcStatusList,lnCounter+1)-AT([;],lcStatusList,lnCounter)-1)
	IF !EMPTY(lcHandledStandartMsg)
		SELECT lvFrmStatusList
		GO lnCounter
		REPLACE lvFrmStatusList.FrmStatNm WITH lcHandledStandartMsg NEXT 1
	ENDIF
ENDFOR


ENDPROC
PROCEDURE savesale
*------------------------------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: frmAccountingEdit.SaveSale
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Ñîõðàíåíèå öåíû ïðîäàæè
*------------------------------------------------------------------------------
WITH This

*08.06.2006 10:06 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	llDataWasChanged, ;
		llResSave
*------------------------------------------------------------------------------

*07.06.2006 17:10 -&gt; Êîëè÷åñòâî çàïèñåé î öåíàõ îòëè÷íî îò íóëÿ
IF RECCOUNT([lvPriceEdit]) # 0

	*07.06.2006 16:26 -&gt; Ïðîèçâåäåì ñîõðàíåíèå öåíû ïðîäàæè
	IF .cMode # [DELE]

		*07.06.2006 16:27 -&gt; Ïðîâåðèì èçìåíèëèñü ëè äàííûå
		llDataWasChanged = .cstDataWork.DataChanged([lvPriceEdit],.T.)
		*------------------------------------------------------------------------------

		*07.06.2006 16:29 -&gt; Âûïîëíÿåì ñîõðàíåíèå åñëè ïîëüçîâàòåëü ðàçðåøèò ñîõðàíåíèå
		IF llDataWasChanged AND MESSAGEBOX([Ñîõðàíèòü öåíó ïðîäàæè â ïðàéñå?],4+32,[Ñîõðàíåíèå])=6

			*07.06.2006 16:47 -&gt; Ïîïûòàåìñÿ ñîõðàíèòü öåíó
			llResSave = .cstDataWork.Save([lvPriceEdit])
			*------------------------------------------------------------------------------

			*02.04.2004 17:00 -&gt;Îáðàáîòàåì ðåçóëüòàòû ñîõðàíåíèÿ
			IF !llResSave
				IF .cstDataWork.HandleSaveFail() &amp;&amp;åñëè îøèáêà îáðàáîòàíà
					RETURN .T. &amp;&amp;âîçâðàùàåìñÿ ê ðåäàêòèðîâàíèþ
				ELSE	
					MESSAGEBOX([Â ïðîöåññå ñîõðàíåíèÿ ïðîèçîøëà îøèáêà. Èçìåíåíèÿ ñîõðàíåíû íå áóäóò.],16,[Îøèáêà...])
					.cstDataWork.Restore([lvPriceEdit])
				ENDIF	
			ENDIF
			*------------------------------------------------------------------------------
		ELSE
			.cstDataWork.Restore([lvPriceEdit])
		ENDIF	
		*------------------------------------------------------------------------------
	ELSE
		.cstDataWork.Restore([lvPriceEdit])
	ENDIF
	*------------------------------------------------------------------------------
	
	*07.06.2006 16:48 -&gt; Çàêðîåì Alias äëÿ ðåäàêòèðîâàíèÿ öåí è îòêðîåì ñíîâà áåç äàííûõ
	USE IN SELECT([lvPriceEdit])
	***
	USE lvPriceEdit IN 0 NODATA
	*------------------------------------------------------------------------------

ENDIF
*------------------------------------------------------------------------------

ENDWITH
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE setsale
*------------------------------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: frmAccountingEdit.SetSale
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;tnTvrID, tnPrcTypeID&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Óñòàíîâêà öåíû ïðîäàæè
*------------------------------------------------------------------------------
LPARAMETERS tnTvrID, tnPrcTypeID

*07.06.2006 15:57 -&gt; Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
PRIVATE _PARAM, ;
		_PARAM1, ;
		_PARAM2
*------------------------------------------------------------------------------

*07.06.2006 15:58 -&gt; Ïðîâåðÿåì íàëè÷èå öåíû äëÿ äàííîãî òîâàðà ïî äàííîìó ïðàéñó
USE IN SELECT([lvPriceTvr])
***
_PARAM1 = tnTvrID
_PARAM2 = tnPrcTypeID
***
USE lvPriceTvr IN 0
*------------------------------------------------------------------------------

*07.06.2006 15:58 -&gt; Åñëè öåíà íå íàéäåíà, äîáàâëÿåì
IF RECCOUNT([lvPriceTvr]) = 0
	MESSAGEBOX([Öåíà ïðîäàæè íå íàéäåíà],48,[Ïðåäóïðåæäåíèå],450)
	APPEND BLANK IN lvPriceEdit
	REPLACE ;
		PrcTypeID WITH tnPrcTypeID, ;
		TvrId WITH tnTvrID, ;
		Price WITH 0 ;
	IN lvPriceEdit
ELSE
	_PARAM = lvPriceTvr.PrcID
	REQUERY([lvPriceEdit])
ENDIF
***
USE IN SELECT([lvPriceTvr])
***
This.txtAccSale.Refresh
*------------------------------------------------------------------------------

*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1>Class</reserved1>
		<reserved2>60</reserved2>
		<reserved3>nfrmtypeid &lt;public/runtime&gt; Èäåíòèôèêàòîð òèïà ðåäàêòèðóåìîãî/äîáàâëÿåìîãî äîêóìåíòà.
cmode &lt;public/runtime&gt; Ðåæèì ðàáîòû ôîðìû (ADD/EDIT/INFO)
cmeasureunitlist
*_handlecntcancelsaveeventchild &lt;public/user/nodefault&gt; Ñîõðàíåíèå äîïîëíèòåëüíûõ äàííûõ íà äî÷åðíèõ ôîðìàõ
*calcsale 
*setsale 
*calcprc 
*calcprice 
*savesale 
*makestatuslist Ãîòîâèì ñïèñîê ñòàòóñîâ äëÿ ýòîãî äîêóìåíòà
</reserved3>
		<reserved4/>
		<reserved5/>
		<reserved6>Pixels</reserved6>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18A02DMUV</uniqueid>
		<timestamp>958764793</timestamp>
		<class>shp</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>shape</baseclass>
		<objname>shpCommon</objname>
		<parent>frmaccountingedit</parent>
		<properties>Top = 5
Left = 5
Height = 293
Width = 690
SpecialEffect = 0
ZOrderSet = 3
Name = "shpCommon"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18A02PAKD</uniqueid>
		<timestamp>958764793</timestamp>
		<class>cntidctlgrid</class>
		<classloc>comidctl_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>cntIdCtlGridFrmType</objname>
		<parent>frmaccountingedit</parent>
		<properties>Top = 10
Left = 10
Width = 200
Enabled = .F.
TabIndex = 1
ZOrderSet = 5
_rsaliasname = lvFrmTypeList
_rsfieldnameid = FrmTypeID 
_rsfieldnametext = FrmTypeNM
_showtextempty = íå îïðåäåëåí
_controlsourcetype = 1
_controlsource = lvFrmEdit.FrmTypeID
_allowresize = .T.
_allowresizecontent = .T.
Name = "cntIdCtlGridFrmType"
txtText.Enabled = .F.
txtText.Width = 150
txtText.Name = "txtText"
cmdShow.Left = 154
cmdShow.Enabled = .F.
cmdShow.Name = "cmdShow"
cmdClear.Left = 177
cmdClear.Enabled = .F.
cmdClear.Name = "cmdClear"
CmdTree.Name = "CmdTree"
Olecommprox1.Top = 0
Olecommprox1.Left = 36
Olecommprox1.Height = 16
Olecommprox1.Width = 38
Olecommprox1.Name = "Olecommprox1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18A02DMUV</uniqueid>
		<timestamp>958764793</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblFrmNum</objname>
		<parent>frmaccountingedit</parent>
		<properties>FontBold = .T.
Caption = "Íîìåð:"
Left = 228
Top = 13
TabIndex = 34
ZOrderSet = 6
Name = "lblFrmNum"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18I0M4ORT</uniqueid>
		<timestamp>0</timestamp>
		<class>txt</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>txtFrmNum</objname>
		<parent>frmaccountingedit</parent>
		<properties>ControlSource = "lvFrmEdit.FrmNum"
Left = 271
TabIndex = 2
Top = 10
Width = 95
ZOrderSet = 7
_highlightobject = .parent.lblFrmNum
Name = "txtFrmNum"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1RI1AGBIN</uniqueid>
		<timestamp>958764793</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblTvr</objname>
		<parent>frmaccountingedit</parent>
		<properties>FontBold = .T.
Caption = "Áëþäî:"
Left = 10
Top = 39
TabIndex = 44
ZOrderSet = 8
Name = "lblTvr"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1EQ0SQRAE</uniqueid>
		<timestamp>958764793</timestamp>
		<class>chk</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>checkbox</baseclass>
		<objname>chkFrmAutoNum</objname>
		<parent>frmaccountingedit</parent>
		<properties>Top = 12
Left = 372
FontBold = .T.
Alignment = 0
Caption = "Çàïîëíèòü"
Value = .F.
TabIndex = 3
ZOrderSet = 8
Name = "chkFrmAutoNum"
</properties>
		<protected/>
		<methods>PROCEDURE _handleanychange
WITH ThisForm

*23.12.2004 18:40 -&gt;Âûñòàâèì ëîñòóïíîñòü ïîëÿ äëÿ ââîäà íîìåðà äîêóìåíòà
.txtFrmNum.Enabled = !This.Value
*------------------------------------------------------------------------------

*23.12.2004 18:40 -&gt;Î÷èñòèì ïîëå/âîññòàíîâèì çíà÷åíèå
IF !ThisForm.txtFrmNum.Enabled
	ThisForm.txtFrmNum.Value = []
ELSE
	IF EMPTY(ThisForm.txtFrmNum.Value)
		LOCAL lcOldValue
		lcOldValue = OLDVAL([FrmNum],[lvFrmEdit])
		IF !EMPTY(lcOldValue) AND !ISNULL(lcOldValue)
			ThisForm.txtFrmNum.Value = lcOldValue
		ENDIF
	ENDIF
ENDIF
*------------------------------------------------------------------------------

ENDWITH

*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1RJ1B8E5N</uniqueid>
		<timestamp>958764793</timestamp>
		<class>cntidctlgrid</class>
		<classloc>comidctl_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>cntIdCtlGridTvr</objname>
		<parent>frmaccountingedit</parent>
		<properties>Top = 36
Left = 58
Width = 446
Height = 23
Enabled = .F.
TabIndex = 5
ZOrderSet = 9
_controlsource = lvAccountingEdit.AccTvrId
_controlsourcetype = 1
_rsaliasname = TovarList
_rsfieldnameid = TvrID
_rsfieldnametext = TvrNM
_grdinfoparams = oMgrTovar;TVR;INFO
_grdaddparams = oMgrTovar;TVR;FASTADD;0;lvTvrInCntViewRepl
Name = "cntIdCtlGridTvr"
txtText.FontBold = .T.
txtText.FontItalic = .T.
txtText.FontSize = 10
txtText.Enabled = .F.
txtText.Height = 23
txtText.Left = 0
txtText.Top = 0
txtText.Width = 397
txtText._highlightobject = .parent.parent.lblTvr
txtText.Name = "txtText"
cmdShow.Top = 1
cmdShow.Left = 399
cmdShow.Enabled = .F.
cmdShow.Visible = .T.
cmdShow.Name = "cmdShow"
cmdClear.Top = 1
cmdClear.Left = 422
cmdClear.Enabled = .F.
cmdClear.Visible = .T.
cmdClear.Name = "cmdClear"
CmdTree.Name = "CmdTree"
Olecommprox1.Top = 0
Olecommprox1.Left = 36
Olecommprox1.Height = 16
Olecommprox1.Width = 38
Olecommprox1.Name = "Olecommprox1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18I0M4ORT</uniqueid>
		<timestamp>958764793</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblFrmDate</objname>
		<parent>frmaccountingedit</parent>
		<properties>FontBold = .T.
Caption = "Äàòà äîêóìåíòà:"
Left = 494
Top = 13
TabIndex = 35
ZOrderSet = 9
Name = "lblFrmDate"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18I0M4ORT</uniqueid>
		<timestamp>958764793</timestamp>
		<class>comtxtctlcalendar</class>
		<classloc>comtxtctl_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>cntTxtCtlCalendarFrmDate</objname>
		<parent>frmaccountingedit</parent>
		<properties>Top = 10
Left = 593
TabIndex = 4
ZOrderSet = 10
_allowresize = .T.
_allowresizecontent = .T.
Name = "cntTxtCtlCalendarFrmDate"
txtText.ControlSource = "lvFrmEdit.FrmDate"
txtText._highlightobject = .parent.parent.lblFrmDate
txtText.Name = "txtText"
cmdShow.Name = "cmdShow"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1J50ZQD7P</uniqueid>
		<timestamp>958764793</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblReason</objname>
		<parent>frmaccountingedit</parent>
		<properties>FontBold = .T.
Caption = "¹ òåõí. êàðòû:"
Left = 10
Top = 181
TabIndex = 37
ZOrderSet = 13
Name = "lblReason"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1RO0LXQMQ</uniqueid>
		<timestamp>958764793</timestamp>
		<class>cntidctlgrid</class>
		<classloc>comidctl_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>cntIdCtlGridMsu</objname>
		<parent>frmaccountingedit</parent>
		<properties>Top = 36
Left = 505
Width = 183
Height = 23
Enabled = .F.
TabIndex = 6
ZOrderSet = 14
_controlsource = lvaccountingedit.MsuId
_controlsourcetype = 1
_rsaliasname = lvTvrMsuList
_rsfieldnameid = MsuID
_rsfieldnametext = MsuNM
Name = "cntIdCtlGridMsu"
txtText.Enabled = .F.
txtText.Height = 23
txtText.Left = 0
txtText.Top = 0
txtText.Width = 134
txtText.Name = "txtText"
cmdShow.Top = 0
cmdShow.Left = 137
cmdShow.Enabled = .F.
cmdShow.Name = "cmdShow"
cmdClear.Top = 0
cmdClear.Left = 160
cmdClear.Enabled = .F.
cmdClear.Name = "cmdClear"
CmdTree.Name = "CmdTree"
Olecommprox1.Top = 0
Olecommprox1.Left = 36
Olecommprox1.Height = 16
Olecommprox1.Width = 38
Olecommprox1.Name = "Olecommprox1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1J50ZQD7Q</uniqueid>
		<timestamp>0</timestamp>
		<class>edt</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>editbox</baseclass>
		<objname>edtReason</objname>
		<parent>frmaccountingedit</parent>
		<properties>Height = 25
Left = 140
TabIndex = 15
Top = 177
Width = 550
ZOrderSet = 14
ControlSource = "LVACCOUNTINGEDIT.acctcard"
_highlightobject = .parent.lblReason
Name = "edtReason"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1S70TPFJ1</uniqueid>
		<timestamp>958764793</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>LblTech</objname>
		<parent>frmaccountingedit</parent>
		<properties>FontBold = .T.
Caption = "Òåõíîëîãèÿ èçãîòîâëåíèÿ:"
Left = 12
Top = 418
TabIndex = 39
ZOrderSet = 15
Name = "LblTech"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1S70TPFJ0</uniqueid>
		<timestamp>0</timestamp>
		<class>edt</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>editbox</baseclass>
		<objname>EdTech</objname>
		<parent>frmaccountingedit</parent>
		<properties>Height = 120
Left = 12
TabIndex = 30
Top = 432
Width = 676
ZOrderSet = 16
ControlSource = "LVACCOUNTINGEDIT.accTech"
_highlightobject = .parent.lblNote
Name = "EdTech"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1S10KMN0V</uniqueid>
		<timestamp>958764793</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblFrmPrcTypeID</objname>
		<parent>frmaccountingedit</parent>
		<properties>FontBold = .T.
Caption = "Ïðàéñ-ëèñò:"
Left = 411
Top = 128
TabIndex = 33
ZOrderSet = 17
Name = "lblFrmPrcTypeID"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1S10KMN0W</uniqueid>
		<timestamp>958764793</timestamp>
		<class>cntidctlgrid</class>
		<classloc>comidctl_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>cntIDCtlGridFrmPrcTypeID</objname>
		<parent>frmaccountingedit</parent>
		<properties>Top = 125
Left = 488
Width = 200
TabIndex = 13
ZOrderSet = 18
_controlsource = lvFrmEdit.FrmPrcTypeID
_controlsourcetype = 1
_rsaliasname = lvPrcTypeList
_rsfieldnameid = PrcTypeID
_rsfieldnametext = PrcTypeNM
Name = "cntIDCtlGridFrmPrcTypeID"
txtText.Height = 23
txtText.Left = 0
txtText.Top = 0
txtText.Width = 150
txtText._highlightobject = .Parent.Parent.lblFrmPrcTypeID
txtText.Name = "txtText"
cmdShow.Left = 154
cmdShow.Name = "cmdShow"
cmdClear.Left = 177
cmdClear.Name = "cmdClear"
CmdTree.Name = "CmdTree"
Olecommprox1.Top = 0
Olecommprox1.Left = 36
Olecommprox1.Height = 16
Olecommprox1.Width = 38
Olecommprox1.Name = "Olecommprox1"
</properties>
		<protected/>
		<methods>PROCEDURE _refreshrelatedobjects
*------------------------------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: cntIDCtlGridFrmPrcTypeID._RefreshRelatedObjects
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Îáíîâëåíèå ñâÿçàííûõ îáúåêòîâ
*------------------------------------------------------------------------------

*31.08.2005 18:10 -&gt; Óñòàíîâèì âàëþòó èç ïðàéñà
ThisForm.SaveSale()
ThisForm.SetSale(lvAccountingEdit.AccTvrID,lvFrmEdit.FrmPrcTypeID)
ThisForm.CalcPrc()
*------------------------------------------------------------------------------

*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1S70RURN6</uniqueid>
		<timestamp>0</timestamp>
		<class>txt</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>TxtFiber</objname>
		<parent>frmaccountingedit</parent>
		<properties>ControlSource = "LVACCOUNTINGEDIT.accFiber"
Left = 160
TabIndex = 21
Top = 303
Width = 144
DisabledForeColor = 0,0,0
ZOrderSet = 19
Name = "TxtFiber"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1S70RURN5</uniqueid>
		<timestamp>0</timestamp>
		<class>txt</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>TxtCarb</objname>
		<parent>frmaccountingedit</parent>
		<properties>ControlSource = "LVACCOUNTINGEDIT.accCarb"
Left = 160
TabIndex = 23
Top = 352
Width = 144
DisabledForeColor = 0,0,0
ZOrderSet = 19
Name = "TxtCarb"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18I0M4ORT</uniqueid>
		<timestamp>958764793</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblNote</objname>
		<parent>frmaccountingedit</parent>
		<properties>FontBold = .T.
Caption = "Ïðèìå÷àíèå:"
Left = 10
Top = 204
TabIndex = 38
ZOrderSet = 15
Name = "lblNote"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18I0M4ORT</uniqueid>
		<timestamp>0</timestamp>
		<class>edt</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>editbox</baseclass>
		<objname>edtNote</objname>
		<parent>frmaccountingedit</parent>
		<properties>Height = 38
Left = 140
TabIndex = 16
Top = 204
Width = 550
ZOrderSet = 16
ControlSource = "LVACCOUNTINGEDIT.accnote"
_highlightobject = .parent.lblNote
Name = "edtNote"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1S00LFZV8</uniqueid>
		<timestamp>0</timestamp>
		<class>txt</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>txtAccSale</objname>
		<parent>frmaccountingedit</parent>
		<properties>Alignment = 3
ControlSource = "lvPriceEdit.Price"
Left = 544
TabIndex = 14
Top = 151
Width = 144
DisabledForeColor = 0,0,0
ZOrderSet = 15
_highlightobject = .parent.LblSale
_convertcommatopoint = .T.
_usedbfieldproperty = .T.
Name = "txtAccSale"
</properties>
		<protected/>
		<methods>PROCEDURE LostFocus
DODEFAULT()
ThisForm.CalcPrc()
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18I0M4ORT</uniqueid>
		<timestamp>0</timestamp>
		<class>txt</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>txtAccPrc</objname>
		<parent>frmaccountingedit</parent>
		<properties>Alignment = 3
Left = 544
TabIndex = 12
Top = 100
Width = 144
DisabledForeColor = 0,0,0
ZOrderSet = 19
Name = "txtAccPrc"
</properties>
		<protected/>
		<methods>PROCEDURE LostFocus
DODEFAULT()
ThisForm.CalcSale()
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18G1F1UUA</uniqueid>
		<timestamp>958764793</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblFrmStatus</objname>
		<parent>frmaccountingedit</parent>
		<properties>FontBold = .T.
Caption = "Ñòàòóñ äîêóìåíòà:"
Left = 10
Top = 246
TabIndex = 40
ZOrderSet = 21
Name = "lblFrmStatus"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1S70S3A6Z</uniqueid>
		<timestamp>958764793</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>Lbl15</objname>
		<parent>frmaccountingedit</parent>
		<properties>FontBold = .T.
Caption = "Ñîñòîÿíèå:"
Left = 354
Top = 407
TabIndex = 47
ZOrderSet = 26
Name = "Lbl15"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18I0M4ORT</uniqueid>
		<timestamp>958764793</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>Lbl14</objname>
		<parent>frmaccountingedit</parent>
		<properties>FontBold = .T.
Caption = "Âíåøíèé âèä:"
Left = 354
Top = 380
TabIndex = 49
ZOrderSet = 26
Name = "Lbl14"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1S70S3A6R</uniqueid>
		<timestamp>958764793</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>Lbl13</objname>
		<parent>frmaccountingedit</parent>
		<properties>FontBold = .T.
Caption = "Çàïàõ:"
Left = 354
Top = 355
TabIndex = 50
ZOrderSet = 26
Name = "Lbl13"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1S70S3A6P</uniqueid>
		<timestamp>958764793</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>Lbl12</objname>
		<parent>frmaccountingedit</parent>
		<properties>FontBold = .T.
Caption = "Âêóñ:"
Left = 354
Top = 331
TabIndex = 51
ZOrderSet = 26
Name = "Lbl12"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18I0M4ORT</uniqueid>
		<timestamp>958764793</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>Lbl11</objname>
		<parent>frmaccountingedit</parent>
		<properties>FontBold = .T.
Caption = "Öâåò:"
Left = 354
Top = 306
TabIndex = 48
ZOrderSet = 26
Name = "Lbl11"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1S70RURNE</uniqueid>
		<timestamp>958764793</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>Lbl10</objname>
		<parent>frmaccountingedit</parent>
		<properties>FontBold = .T.
Caption = "Áåëêè:"
Left = 10
Top = 306
TabIndex = 57
ZOrderSet = 26
Name = "Lbl10"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1S70RURN9</uniqueid>
		<timestamp>958764793</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>Lbl9</objname>
		<parent>frmaccountingedit</parent>
		<properties>FontBold = .T.
Caption = "Êàëîðèéíîñòü:"
Left = 10
Top = 380
TabIndex = 53
ZOrderSet = 26
Name = "Lbl9"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1S70RURN8</uniqueid>
		<timestamp>958764793</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>Lbl8</objname>
		<parent>frmaccountingedit</parent>
		<properties>FontBold = .T.
Caption = "Æèðû:"
Left = 10
Top = 331
TabIndex = 46
ZOrderSet = 26
Name = "Lbl8"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1S70RURN7</uniqueid>
		<timestamp>958764793</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>Lbl7</objname>
		<parent>frmaccountingedit</parent>
		<properties>FontBold = .T.
Caption = "Óãëåâîäû:"
Left = 10
Top = 355
TabIndex = 58
ZOrderSet = 26
Name = "Lbl7"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18G1F1UU1</uniqueid>
		<timestamp>958764793</timestamp>
		<class>cntidctlgrid</class>
		<classloc>comidctl_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>cntIdCtlGridFrmStatus</objname>
		<parent>frmaccountingedit</parent>
		<properties>Top = 244
Left = 140
Width = 200
TabIndex = 17
ZOrderSet = 22
_allowresizecontent = .T.
_allowresize = .T.
_rsaliasname = lvFrmStatusList
_rsfieldnameid = FrmStatID
_rsfieldnametext = FrmStatNM
_controlsource = lvFrmEdit.FrmStatusID
_controlsourcetype = 1
Name = "cntIdCtlGridFrmStatus"
txtText.Width = 150
txtText._highlightobject = .parent.parent.lblFrmStatus
txtText.Name = "txtText"
cmdShow.Left = 154
cmdShow.Name = "cmdShow"
cmdClear.Left = 177
cmdClear.Name = "cmdClear"
CmdTree.Name = "CmdTree"
Olecommprox1.Top = 0
Olecommprox1.Left = 36
Olecommprox1.Height = 16
Olecommprox1.Width = 38
Olecommprox1.Name = "Olecommprox1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_R020K4VL1</uniqueid>
		<timestamp>0</timestamp>
		<class>txt</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>TxtAccPriceTotal</objname>
		<parent>frmaccountingedit</parent>
		<properties>ControlSource = "LVACCOUNTINGEDIT.accprice"
Left = 160
TabIndex = 7
Top = 75
Width = 144
DisabledForeColor = 0,0,0
ZOrderSet = 19
Name = "TxtAccPriceTotal"
</properties>
		<protected/>
		<methods>PROCEDURE LostFocus
DODEFAULT()
ThisForm.CalcPrice()
ThisForm.CalcPrc()
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18I0M4ORT</uniqueid>
		<timestamp>958764793</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblDev</objname>
		<parent>frmaccountingedit</parent>
		<properties>FontBold = .T.
Caption = "Ðàçðàáîò÷èê:"
Left = 10
Top = 273
TabIndex = 41
ZOrderSet = 26
Name = "lblDev"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1CW12Q299</uniqueid>
		<timestamp>958764793</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>Lbl1</objname>
		<parent>frmaccountingedit</parent>
		<properties>FontBold = .T.
Caption = "Ñåáåñòîèìîñòü íàáîðà:"
Left = 10
Top = 78
TabIndex = 56
ZOrderSet = 26
Name = "Lbl1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18I0M4ORT</uniqueid>
		<timestamp>958764793</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>Lbl3</objname>
		<parent>frmaccountingedit</parent>
		<properties>FontBold = .T.
Caption = "Âûõîä (òåêñò):"
Left = 411
Top = 78
TabIndex = 52
ZOrderSet = 26
Name = "Lbl3"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_R020K4VL1</uniqueid>
		<timestamp>958764793</timestamp>
		<class>cntidctlgrid</class>
		<classloc>comidctl_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>cntIdCtlGridDev</objname>
		<parent>frmaccountingedit</parent>
		<properties>Top = 270
Left = 96
Width = 244
Height = 23
TabIndex = 18
ZOrderSet = 27
_allowresize = .T.
_allowresizecontent = .T.
_controlsourcetype = 1
_controlsource = lvFrmEdit.DevCltID
_rsaliasname = DevSpr
_rsfieldnameid = ID
_rsfieldnametext = NM
Name = "cntIdCtlGridDev"
txtText.Height = 23
txtText.Left = 0
txtText.Top = 0
txtText.Width = 196
txtText._highlightobject = .parent.parent.lblDev
txtText.Name = "txtText"
cmdShow.Top = 0
cmdShow.Left = 199
cmdShow.Name = "cmdShow"
cmdClear.Top = 0
cmdClear.Left = 222
cmdClear.Name = "cmdClear"
CmdTree.Name = "CmdTree"
Olecommprox1.Top = 0
Olecommprox1.Left = 36
Olecommprox1.Height = 16
Olecommprox1.Width = 38
Olecommprox1.Name = "Olecommprox1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1CW12Q298</uniqueid>
		<timestamp>958764793</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>Lbl4</objname>
		<parent>frmaccountingedit</parent>
		<properties>FontBold = .T.
Caption = "Íåòòî íàáîðà, ãðàììû:"
Left = 10
Top = 154
TabIndex = 54
ZOrderSet = 26
Name = "Lbl4"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1DW0POPOP</uniqueid>
		<timestamp>958764793</timestamp>
		<class>cntidctlgrid</class>
		<classloc>comidctl_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>cntIdCtlGridContr</objname>
		<parent>frmaccountingedit</parent>
		<properties>Top = 270
Left = 432
Width = 258
Height = 23
TabIndex = 20
ZOrderSet = 29
_allowresize = .T.
_allowresizecontent = .T.
_controlsourcetype = 1
_controlsource = lvFrmEdit.ContrCltID
_rsaliasname = ContrSpr
_rsfieldnameid = ID
_rsfieldnametext = NM
Name = "cntIdCtlGridContr"
txtText.Height = 24
txtText.Left = 0
txtText.Top = 0
txtText.Width = 209
txtText._highlightobject = .parent.parent.lblContr
txtText.Name = "txtText"
cmdShow.Top = 0
cmdShow.Left = 212
cmdShow.Name = "cmdShow"
cmdClear.Top = 0
cmdClear.Left = 235
cmdClear.Name = "cmdClear"
CmdTree.Name = "CmdTree"
Olecommprox1.Top = 0
Olecommprox1.Left = 36
Olecommprox1.Height = 16
Olecommprox1.Width = 38
Olecommprox1.Name = "Olecommprox1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1DW0POPON</uniqueid>
		<timestamp>958764793</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblContr</objname>
		<parent>frmaccountingedit</parent>
		<properties>FontBold = .T.
Caption = "Êîíòðîëåð:"
Left = 360
Top = 273
TabIndex = 43
ZOrderSet = 28
Name = "lblContr"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1RJ1DBAE7</uniqueid>
		<timestamp>958764793</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>LblProcent</objname>
		<parent>frmaccountingedit</parent>
		<properties>FontBold = .T.
Caption = "% íàöåíêè:"
Left = 411
Top = 103
TabIndex = 55
ZOrderSet = 26
Name = "LblProcent"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18I0M4ORT</uniqueid>
		<timestamp>958764793</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>LblSale</objname>
		<parent>frmaccountingedit</parent>
		<properties>FontBold = .T.
Caption = "Öåíà ïðîäàæè:"
Left = 411
Top = 154
TabIndex = 60
ZOrderSet = 26
Name = "LblSale"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_R020K4VL1</uniqueid>
		<timestamp>958764793</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>Lbl2</objname>
		<parent>frmaccountingedit</parent>
		<properties>FontBold = .T.
Caption = "Êîë-âî áëþä â çàêëàäêå:"
Left = 10
Top = 103
TabIndex = 45
ZOrderSet = 26
Name = "Lbl2"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18I0M4ORT</uniqueid>
		<timestamp>0</timestamp>
		<class>txt</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>TxtAccPrice</objname>
		<parent>frmaccountingedit</parent>
		<properties>Enabled = .F.
Left = 160
TabIndex = 9
Top = 125
Width = 144
DisabledForeColor = 0,0,0
ZOrderSet = 19
Name = "TxtAccPrice"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>958764793</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>Lbl5</objname>
		<parent>frmaccountingedit</parent>
		<properties>FontBold = .T.
Caption = "Ñåáåñòîèìîñòü îäíîãî :"
Left = 10
Top = 128
TabIndex = 59
ZOrderSet = 26
Name = "Lbl5"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1RI197S8E</uniqueid>
		<timestamp>958764793</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblPointIsp</objname>
		<parent>frmaccountingedit</parent>
		<properties>FontBold = .T.
Caption = "Òî÷êà èñïîëíåíèÿ:"
Left = 360
Top = 246
TabIndex = 42
ZOrderSet = 38
Name = "lblPointIsp"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1RI197S8F</uniqueid>
		<timestamp>958764793</timestamp>
		<class>cntidctlgrid</class>
		<classloc>comidctl_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>cntIdCtlGridPointIsp</objname>
		<parent>frmaccountingedit</parent>
		<properties>Top = 244
Left = 490
Width = 200
TabIndex = 19
ZOrderSet = 39
_allowresizecontent = .T.
_allowresize = .T.
_rsaliasname = PointIspSpr
_rsfieldnameid = ID
_rsfieldnametext = NM
_controlsourcetype = 1
Name = "cntIdCtlGridPointIsp"
txtText.Width = 150
txtText._highlightobject = .parent.parent.lblPointIsp
txtText.Name = "txtText"
cmdShow.Left = 154
cmdShow.Name = "cmdShow"
cmdClear.Left = 177
cmdClear.Name = "cmdClear"
CmdTree.Name = "CmdTree"
Olecommprox1.Top = 0
Olecommprox1.Left = 36
Olecommprox1.Height = 16
Olecommprox1.Width = 38
Olecommprox1.Name = "Olecommprox1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18G1F1UUB</uniqueid>
		<timestamp>958764793</timestamp>
		<class>cntcancelsavehandled</class>
		<classloc>baseform_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>cntCancelSaveHandled</objname>
		<parent>frmaccountingedit</parent>
		<properties>Top = 559
Left = 480
TabIndex = 31
ZOrderSet = 47
Name = "cntCancelSaveHandled"
cmdCancel.Name = "cmdCancel"
cmdOk.Name = "cmdOk"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1CW12Q29B</uniqueid>
		<timestamp>0</timestamp>
		<class>textbox</class>
		<classloc/>
		<baseclass>textbox</baseclass>
		<objname>txtAccqnt</objname>
		<parent>frmaccountingedit</parent>
		<properties>ControlSource = "LVACCOUNTINGEDIT.accqnt"
Height = 23
Left = 160
TabIndex = 8
Top = 100
Width = 144
Name = "txtAccqnt"
</properties>
		<protected/>
		<methods>PROCEDURE LostFocus
DODEFAULT()
ThisForm.CalcPrice()
ThisForm.CalcPrc()
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_R020K4VL1</uniqueid>
		<timestamp>0</timestamp>
		<class>textbox</class>
		<classloc/>
		<baseclass>textbox</baseclass>
		<objname>txtAccexit</objname>
		<parent>frmaccountingedit</parent>
		<properties>Comment = ""
Alignment = 3
ControlSource = "LVACCOUNTINGEDIT.accexit"
Height = 23
Left = 544
TabIndex = 11
Top = 75
Width = 144
Name = "txtAccexit"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_R020K4VL1</uniqueid>
		<timestamp>0</timestamp>
		<class>textbox</class>
		<classloc/>
		<baseclass>textbox</baseclass>
		<objname>txtAccnetto</objname>
		<parent>frmaccountingedit</parent>
		<properties>Comment = ""
ControlSource = "LVACCOUNTINGEDIT.accnetto"
Height = 23
InputMask = "9999999.9"
Left = 160
TabIndex = 10
Top = 151
Width = 144
Name = "txtAccnetto"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1S70RURNF</uniqueid>
		<timestamp>0</timestamp>
		<class>textbox</class>
		<classloc/>
		<baseclass>textbox</baseclass>
		<objname>txtFat</objname>
		<parent>frmaccountingedit</parent>
		<properties>ControlSource = "LVACCOUNTINGEDIT.accFat"
Height = 23
Left = 160
TabIndex = 22
Top = 328
Width = 144
Name = "txtFat"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1S70RURNG</uniqueid>
		<timestamp>0</timestamp>
		<class>textbox</class>
		<classloc/>
		<baseclass>textbox</baseclass>
		<objname>txtCaloric</objname>
		<parent>frmaccountingedit</parent>
		<properties>Comment = ""
ControlSource = "LVACCOUNTINGEDIT.accCaloric"
Height = 23
InputMask = "9999999.9"
Left = 160
TabIndex = 24
Top = 377
Width = 144
Name = "txtCaloric"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_R020K4VL1</uniqueid>
		<timestamp>0</timestamp>
		<class>textbox</class>
		<classloc/>
		<baseclass>textbox</baseclass>
		<objname>txtColor</objname>
		<parent>frmaccountingedit</parent>
		<properties>Comment = ""
Alignment = 3
ControlSource = "LVACCOUNTINGEDIT.accColor"
Height = 23
Left = 444
TabIndex = 25
Top = 303
Width = 244
Name = "txtColor"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1S70S3A6Q</uniqueid>
		<timestamp>0</timestamp>
		<class>textbox</class>
		<classloc/>
		<baseclass>textbox</baseclass>
		<objname>txtTaste</objname>
		<parent>frmaccountingedit</parent>
		<properties>Comment = ""
Alignment = 3
ControlSource = "LVACCOUNTINGEDIT.accTaste"
Height = 23
Left = 444
TabIndex = 26
Top = 328
Width = 244
Name = "txtTaste"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1S70S3A6S</uniqueid>
		<timestamp>0</timestamp>
		<class>textbox</class>
		<classloc/>
		<baseclass>textbox</baseclass>
		<objname>txtSmell</objname>
		<parent>frmaccountingedit</parent>
		<properties>Comment = ""
Alignment = 3
ControlSource = "LVACCOUNTINGEDIT.accSmell"
Height = 23
Left = 444
TabIndex = 27
Top = 352
Width = 244
Name = "txtSmell"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_R020K4VL1</uniqueid>
		<timestamp>0</timestamp>
		<class>textbox</class>
		<classloc/>
		<baseclass>textbox</baseclass>
		<objname>txtAppr</objname>
		<parent>frmaccountingedit</parent>
		<properties>Comment = ""
Alignment = 3
ControlSource = "LVACCOUNTINGEDIT.accAppr"
Height = 23
Left = 444
TabIndex = 28
Top = 377
Width = 244
Name = "txtAppr"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1S70S3A70</uniqueid>
		<timestamp>0</timestamp>
		<class>textbox</class>
		<classloc/>
		<baseclass>textbox</baseclass>
		<objname>txtState</objname>
		<parent>frmaccountingedit</parent>
		<properties>Comment = ""
Alignment = 3
ControlSource = "LVACCOUNTINGEDIT.accState"
Height = 23
Left = 444
TabIndex = 29
Top = 404
Width = 244
Name = "txtState"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>COMMENT</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>0</timestamp>
		<class/>
		<classloc/>
		<baseclass/>
		<objname>frmaccountingedit</objname>
		<parent/>
		<properties>Arial, 0, 9, 5, 15, 12, 32, 3, 0
Arial, 1, 9, 6, 15, 12, 32, 3, 0
Arial, 3, 10, 6, 16, 13, 22, 3, 0
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2A30V6O8V</uniqueid>
		<timestamp>959019310</timestamp>
		<class>frm</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>form</baseclass>
		<objname>frmblobtype</objname>
		<parent/>
		<properties>DataSession = 1
Height = 206
Width = 205
DoCreate = .T.
BufferMode = 0
AutoCenter = .T.
BorderStyle = 1
Caption = "Ôîðìàò îðèãèíàëà"
MaxButton = .F.
AlwaysOnTop = .T.
uretval = 0
Name = "frmblobtype"
cstmsghandler.Name = "cstmsghandler"
cstresizable.Name = "cstresizable"
Img1.Name = "Img1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1>Class</reserved1>
		<reserved2>3</reserved2>
		<reserved3>uretval Âîçâðàùàåìîå çíà÷åíèå
</reserved3>
		<reserved4/>
		<reserved5/>
		<reserved6>Pixels</reserved6>
		<reserved7>Ôîðìà îïðåäåëåíèÿ òèïà îðèãèíàëà äîêóìåíòà</reserved7>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2A30VNTI7</uniqueid>
		<timestamp>959019310</timestamp>
		<class>cntcancelsavehandled</class>
		<classloc>baseform_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>Cntcancelsavehandled1</objname>
		<parent>frmblobtype</parent>
		<properties>Top = 175
Left = 1
Name = "Cntcancelsavehandled1"
cmdCancel.Name = "cmdCancel"
cmdOk.Name = "cmdOk"
</properties>
		<protected/>
		<methods>PROCEDURE cmdCancel.Click
thisform.uretval = 0
thisform.Hide
ENDPROC
PROCEDURE cmdOk.Click
thisform.uretval = thisform.opg1.Value
thisform.Hide
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2A30VNTIB</uniqueid>
		<timestamp>942897940</timestamp>
		<class>opg</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>optiongroup</baseclass>
		<objname>Opg1</objname>
		<parent>frmblobtype</parent>
		<properties>AutoSize = .F.
ButtonCount = 3
Height = 167
Left = 20
SpecialEffect = 0
Top = 2
Width = 168
Name = "Opg1"
Option1.Picture = ..\imgbmp\çàêàçû.bmp
Option1.Caption = "Äîêóìåíò WORD"
Option1.Height = 55
Option1.Left = -12
Option1.Style = 1
Option1.Top = 1
Option1.Width = 180
Option1.Name = "Option1"
Option2.Picture = ..\imgbmp\tlbexcel.bmp
Option2.Caption = "Òàáëèöà Excel"
Option2.Height = 55
Option2.Left = 0
Option2.Style = 1
Option2.Top = 56
Option2.Width = 168
Option2.Name = "Option2"
Option3.Picture = ..\imgbmp\dov.bmp
Option3.Caption = "Ñîõðàíåííîå MCI"
Option3.Height = 55
Option3.Left = 0
Option3.Style = 1
Option3.Top = 112
Option3.Width = 168
Option3.Name = "Option3"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>COMMENT</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>0</timestamp>
		<class/>
		<classloc/>
		<baseclass/>
		<objname>frmblobtype</objname>
		<parent/>
		<properties>Arial, 0, 9, 5, 15, 12, 32, 3, 0
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1A610IJYB</uniqueid>
		<timestamp>959073396</timestamp>
		<class>frmprimarydocview</class>
		<classloc>primarydoc_v1.vcx</classloc>
		<baseclass>form</baseclass>
		<objname>frmprimarydocviewtvr</objname>
		<parent/>
		<properties/>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6>Pixels</reserved6>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1A610IJYB</uniqueid>
		<timestamp>959073430</timestamp>
		<class>frmprimarydocview</class>
		<classloc>primarydoc_v1.vcx</classloc>
		<baseclass>form</baseclass>
		<objname>frmprimarydocviewprbook</objname>
		<parent/>
		<properties/>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6>Pixels</reserved6>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18G14BM5C</uniqueid>
		<timestamp>959205547</timestamp>
		<class>frmedit</class>
		<classloc>baseform_v1.vcx</classloc>
		<baseclass>form</baseclass>
		<objname>frmpdedit</objname>
		<parent/>
		<properties>Height = 443
Width = 724
DoCreate = .T.
BorderStyle = 1
nfrmtypeid = 0
cmode = 
Name = "frmpdedit"
cstmsghandler.Name = "cstmsghandler"
cstresizable.Name = "cstresizable"
Img1.Stretch = 2
Img1.Height = 120
Img1.Left = -122
Img1.Top = 0
Img1.Width = 830
Img1.Name = "Img1"
cstdatawork.Name = "cstdatawork"
</properties>
		<protected/>
		<methods>PROCEDURE _handlecntcancelsaveevent
*-------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: FRMPRIMARYDOCEDIT._HANDLECNTCANCELSAVEEVENT
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;tcMessage&gt;
* Returns.........: &lt;none&gt;
* Notes...........: &lt;~&gt;
*-------------------------------------------------------
LPARAMETERS tcMessage

WITH This

*12.05.2004 03:16 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	llResSave, ;
		lnLastIncrementedID
*------------------------------------------------------------------------------

*12.05.2004 00:37 -&gt;Ñîõðàíèì/îòìåíèì èçìåíåíèÿ
IF tcMessage = [OK]

	*21.07.2006 13:49 -&gt;Âûâåäåì ñîîáùåíèå
	WAIT WINDOW [Èäåò îáðàáîòêà äàííûõ...] NOWAIT NOCLEAR
	*------------------------------------------------------------------------------
	
	*07.07.2004 17:29 -&gt;Ïðè óäàëåíè óäàëèì çàïèñü
	IF .cMode = [DELE]
		
		*07.07.2004 17:35 -&gt;Óäàëèì çàïèñü
		DELETE IN lvFrmEdit
		*------------------------------------------------------------------------------
		
	ENDIF
	*------------------------------------------------------------------------------
	
	*30.11.2004 12:07 -&gt;Îòêðîåì òðàíçàêöèþ
	BEGIN TRANSACTION
	*------------------------------------------------------------------------------
	
	*23.12.2004 13:20 -&gt; Åñëè âêëþ÷åíà àâòîíóìåðàöèÿ è âûáðàííîå äåéñòâèå íå ÿâëÿåòñÿ óäàëåíèåì ïðîèçâîäèì àâòîìàòè÷åñêóþ âñòàâêó íîìåðà
	IF .cMode # [DELE] AND .chkFrmAutoNum.Value
		REPLACE FrmNum WITH spFrmAutoNum(lvFrmEdit.FrmTypeID,lvFrmEdit.FrmDate,lvFrmEdit.PointEmiOUID,lvFrmEdit.PointIspOUID) IN lvFrmEdit
	ENDIF
	*------------------------------------------------------------------------------

	*12.05.2004 03:15 -&gt;Ïðîèçâîäèì ñîõðàíåíèå ðîäèòåëüñêîé òàáëèöû
	llResSave = .cstDataWork.Save([lvFrmEdit])
	*------------------------------------------------------------------------------
	
	*30.11.2004 12:12 -&gt;Âûïîëíèì îïåðàöèþ ñîõðàíåíèÿ äîïîëíèòåëüíûõ äàííûõ äëÿ äî÷åðíèõ êëàññîâ
	IF llResSave
		DO CASE
			CASE INLIST(.cMode,[EDIT],[DELE])

				*30.11.2004 12:12 -&gt;Âûïîëíèì îïåðàöèþ ñîõðàíåíèÿ äîïîëíèòåëüíûõ äàííûõ äëÿ äî÷åðíèõ êëàññîâ
				llResSave = ._HandleCntCancelSaveEventChild(.T.)
				*------------------------------------------------------------------------------

			CASE .cMode == [ADD]
			
				*30.11.2004 12:12 -&gt;Ïîëó÷èì èäåíòèôèêàòîð âíîâü äîáàâëåííîé ðîäèòåëüñêîé çàïèñè
				lnLastIncrementedID = .cstDataWork.GetLastID([lvFrmEdit])
				*------------------------------------------------------------------------------
				
				*30.11.2004 12:12 -&gt;Âûïîëíèì îïåðàöèþ ñîõðàíåíèÿ äîïîëíèòåëüíûõ äàííûõ äëÿ äî÷åðíèõ êëàññîâ
				llResSave = ._HandleCntCancelSaveEventChild(.T.,lnLastIncrementedID)
				*------------------------------------------------------------------------------
				
		ENDCASE
	ENDIF
	*------------------------------------------------------------------------------
	
	*30.11.2004 12:15 -&gt;Îáðàáîòàåì ðåçóëüòàòû ÂÑÅÕ îïåðàöèé ñîõðàíåíèÿ
	IF llResSave
	
		*30.11.2004 12:17 -&gt;Ïîäòâåðæäàåì òðàíçàêöèþ
		END TRANSACTION
		*------------------------------------------------------------------------------
		
		*30.11.2004 12:16 -&gt;Ñîõðàíÿåì ðåçóëüòàòû âûïîëíåíèÿ îïåðàöèè â ñâîéñòâå .uRetVal
		DO CASE
			CASE INLIST(.cMode,[EDIT],[DELE])

				*30.11.2004 12:16 -&gt;Ñîõðàíÿåì ðåçóëüòàòû âûïîëíåíèÿ îïåðàöèè â ñâîéñòâå .uRetVal
				.uRetVal = .T.
				*------------------------------------------------------------------------------

			CASE .cMode == [ADD]
			
				*30.11.2004 12:16 -&gt;Ñîõðàíÿåì ðåçóëüòàòû âûïîëíåíèÿ îïåðàöèè â ñâîéñòâå .uRetVal
				.uRetVal = lnLastIncrementedID
				*------------------------------------------------------------------------------

		ENDCASE
		*------------------------------------------------------------------------------
		
	ELSE
		
		*30.11.2004 12:19 -&gt;Îòêàòûâàåì òðàíçàêöèþ
		ROLLBACK
		*------------------------------------------------------------------------------
		
		*30.11.2004 12:19 -&gt;Îáðàáàòûâàåì îøèáêó
		IF .cstDataWork.HandleSaveFail() &amp;&amp;åñëè îøèáêà îáðàáîòàíà

			*29.11.2004 19:05 -&gt;Âîçâðàùàåìñÿ ê ðåäàêòèðîâàíèþ
			RETURN .T.
			*------------------------------------------------------------------------------
		
		ELSE
			
			*01.04.2004 18:40 -&gt;Ñîîáùàåì îá îøèáêå
			MESSAGEBOX([Â ïðîöåññå ñîõðàíåíèÿ ïðîèçîøëà îøèáêà. Èçìåíåíèÿ ñîõðàíåíû íå áóäóò.],16,[Îøèáêà...])
			*------------------------------------------------------------------------------
			
			*01.04.2004 18:40 -&gt;Îòìåíÿåì èçìåíåíèÿ â ðîäèòåëüñêîì Aliase
			.cstDataWork.Restore([lvFrmEdit])
			*------------------------------------------------------------------------------
			
			*30.11.2004 12:12 -&gt;Âûïîëíèì îïåðàöèþ îòìåíû èçìåíåíèé äîïîëíèòåëüíûõ äàííûõ äëÿ äî÷åðíèõ êëàññîâ
			llResSave = ._HandleCntCancelSaveEventChild(.F.)
			*------------------------------------------------------------------------------
	
		ENDIF
		*------------------------------------------------------------------------------
		
		*30.11.2004 12:16 -&gt;Ñîõðàíÿåì ðåçóëüòàòû âûïîëíåíèÿ îïåðàöèè â ñâîéñòâå .uRetVal
		.uRetVal = .F.
		*------------------------------------------------------------------------------
		
	ENDIF
	*------------------------------------------------------------------------------
	
ELSE

	*01.04.2004 18:40 -&gt;Îòìåíÿåì èçìåíåíèÿ â ðîäèòåëüñêîì Aliase
	.cstDataWork.Restore([lvFrmEdit])
	*------------------------------------------------------------------------------
	
	*30.11.2004 12:12 -&gt;Âûïîëíèì îïåðàöèþ îòìåíû èçìåíåíèé äîïîëíèòåëüíûõ äàííûõ äëÿ äî÷åðíèõ êëàññîâ
	llResSave = ._HandleCntCancelSaveEventChild(.F.)
	*------------------------------------------------------------------------------
	
ENDIF
*------------------------------------------------------------------------------

*30.11.2004 12:25 -&gt;Ñêðûâåì ôîðìó
.Hide()
*------------------------------------------------------------------------------

ENDWITH
************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************
ENDPROC
PROCEDURE _handlecntcancelsaveeventchild
*-------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: FRMPDEDIT._HANDLECNTCANCELSAVEEVENTCHILD
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;tlCancelSave, tuLastIncrementedID&gt;
* Returns.........: &lt;.T./.F. - ðåçóëüòàò ñîõðàíåíèÿ&gt;
* Notes...........: &lt;public/user/nodefault&gt; Ñîõðàíåíèå äîïîëíèòåëüíûõ äàííûõ íà äî÷åðíèõ ôîðìàõ
*-------------------------------------------------------
LPARAMETERS	tlCancelSave, tuLastIncrementedID
RETURN .T.
************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************
ENDPROC
PROCEDURE Destroy
WAIT CLEAR

*21.07.2006 13:50 -&gt;Âûïîëíèì ìåòîä ðîäèòåëüñêîãî êëàññà
DODEFAULT()
*------------------------------------------------------------------------------
ENDPROC
PROCEDURE Init
*------------------------------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: FRMPRIMARYDOCEDIT.INIT
* Called by.......: &lt;Sys Event&gt;
* Parameters......: &lt;tcCommand, tuParam1&gt;
* Returns.........: &lt;none&gt;
* Notes...........: &lt;~&gt;
*------------------------------------------------------------------------------
LPARAMETERS tcCommand, tuParam1, tuParam2, tuParam3

*12.05.2004 00:34 -&gt;Âûïîëíèì ìåòîä ðîäèòåëüñêîãî êëàññà
DODEFAULT()
*----------------------------------------------------------------------------

WITH This

*12.05.2004 00:30 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	loControl
PRIVATE _PARAM
*------------------------------------------------------------------------------

*12.05.2004 03:12 -&gt;Ñîõðàíèì êîìàíäó (ðåæèì ðàáîòû ñ äàííûìè)
.cMode = UPPER(ALLTRIM(tcCommand))
*------------------------------------------------------------------------------

*12.05.2004 00:33 -&gt;Çàãðóçèì äàííûå â Alias äëÿ ðåäàêòèðîâàíèÿ
DO CASE

	CASE .cMode==[ADD]
		
		*12.05.2004 00:32 -&gt;Äîáàâèì ïóñòóþ çàïèñü
		APPEND BLANK IN lvFrmEdit
		*------------------------------------------------------------------------------

		*12.05.2004 01:06 -&gt;Óêàæåì òèï äîêóìåíòà
		_PARAM = tuParam1
		***
		.nFrmTypeID = tuParam1
		*------------------------------------------------------------------------------

		*29.12.2005 15:24 -&gt; Çàãðóçèì äàííûå î àòðèáóòàõ äîêóìåíòà
		USE IN SELECT([lvFrmAttributeList])
		***
		USE lvFrmAttributeListByFrmTypeID IN 0 ALIAS lvFrmAttributeList
		*------------------------------------------------------------------------------

		*15.06.2006 14:48 -&gt; Óêàæåì ðàçðàáîò÷èêà äîêóìåíòà
		USE IN SELECT([lvUserInfoByID])
		***
		_PARAM = oApp.nUserKod
		***
		USE lvUserInfoByID IN 0
		*------------------------------------------------------------------------------
		
		*12.05.2004 02:39 -&gt;Çàïèøåì òèï äîêóìåíòà
		REPLACE ;
			FrmTypeID WITH .nFrmTypeID, ;
			DevCltID WITH lvUserInfoByID.UserCltID, ;
			ContrCltID WITH lvUserInfoByID.UserCltID ;
		IN lvFrmEdit
		*------------------------------------------------------------------------------

		*15.06.2006 14:50 -&gt; Çàêðîåì Alias
		USE IN SELECT([lvUserInfoByID])
		*------------------------------------------------------------------------------

	CASE INLIST(.cMode,[EDIT],[INFO],[DELE])
		
		*12.05.2004 00:31 -&gt;Çàãðóçèì äàííûå ñóùåñòâóþùåãî äîêóìåíòà
		_PARAM = tuParam1
		***
		REQUERY([lvFrmEdit])
		*------------------------------------------------------------------------------
		
		*12.05.2004 01:06 -&gt;Óêàæåì òèï äîêóìåíòà
		.nFrmTypeID = lvFrmEdit.FrmTypeID
		*------------------------------------------------------------------------------

		*29.12.2005 15:24 -&gt; Çàãðóçèì äàííûå î àòðèáóòàõ äîêóìåíòà
		USE IN SELECT([lvFrmAttributeList])
		***
		USE lvFrmAttributeListByFrmID IN 0 ALIAS lvFrmAttributeList
		*------------------------------------------------------------------------------

ENDCASE
*------------------------------------------------------------------------------

*29.12.2005 14:33 -&gt; Îáíîâëÿåì LocalView äëÿ Grid-à
.GrdBit._RSRequery()
*------------------------------------------------------------------------------

*12.05.2004 00:51 -&gt;Ïîëó÷èì èíôîðìàöèþ î êà÷åñòâå äîêóìåíòà è íàñòðîèì âíåøíèé âèä ôîðìû
_PARAM = .nFrmTypeID
USE lvFrmTypeInfo IN 0
***
DO CASE
	CASE .cMode = [ADD]
		.Caption = [Äîáàâëåíèå]
		.Icon = FULLPATH([frmadd.ico])
	CASE .cMode = [EDIT]
		.Caption = [Ðåäàêòèðîâàíèå ]+ STR(tuParam1)
		.Icon = FULLPATH([frmedit.ico])
	CASE .cMode = [INFO]
		.Caption = [Ïðîñìîòð ]+ STR(tuParam1)
		.Icon = FULLPATH([frminfo.ico])
		.cntCancelSaveHandled.cmdOk.Enabled = .F.
	CASE .cMode = [DELE]
		.Caption = [Óäàëåíèå ]+ STR(tuParam1)
		.Icon = FULLPATH([frmdele.ico])
		.cntCancelSaveHandled.cmdOk.Caption = [Óäàëèòü]
ENDCASE
*------------------------------------------------------------------------------

*30.08.2005 15:09 -&gt; Íàñòðîèì âîçìîæíîñòü âûáîðà ïðàéñ-ëèñòà äëÿ äîêóìåíòîâ ñîäåðæàùèõ òîâàðíûå ïîçèöèè
.lblFrmPrcTypeID.Visible = lvFrmTypeInfo.FrmTypeIsContainTvr
.cntIDCtlGridFrmPrcTypeID.Visible = lvFrmTypeInfo.FrmTypeIsContainTvr
*------------------------------------------------------------------------------

*31.08.2005 17:16 -&gt; Çàáëîêèðóåì ïîëå ñ âàëþòîé äëÿ äîêóìåíòîâ ñîäåðæàùèõ òîâàðíûå ïîçèöèè
.cntIDCtlGridFrmCurTypeID.SetEnabled(!lvFrmTypeInfo.FrmTypeIsContainTvr)
*------------------------------------------------------------------------------

*31.08.2005 17:39 -&gt; Âûñòàâèì ïðàéñ-ëèñò/âàëþòó ïî óìîë÷àíèþ
IF lvFrmTypeInfo.FrmTypeIsContainTvr
	*{
	SELECT lvPrcTypeList
	LOCATE FOR PrcTypeIsDef
	***
	.cntIDCtlGridFrmPrcTypeID.SetValue(lvPrcTypeList.PrcTypeID)
	*}
ELSE
	*{
	SELECT lvCurTypeList
	***
	.cntIDCtlGridFrmCurTypeID.SetValue(lvCurTypeList.CurTypeID)
	*}
ENDIF
*------------------------------------------------------------------------------

*******************************************************************************
* Âûïîëíÿåì íàñòðîéêó "êà÷åñòâåííûõ" õàðàêòåðèñòèê ôîðì						  *	
*******************************************************************************

*23.11.2004 12:23 -&gt;Àòðèáóòû "ðàçðàáîò÷èê" è "êîíòðîëåð"
IF	lvFrmTypeInfo.DevSprID&gt;0 AND ;
	!ISNULL(lvFrmTypeInfo.DevSprDBObjNM) AND ;
	!EMPTY(lvFrmTypeInfo.DevSprDBObjNM)
	*{
	.lblDev.Caption = ALLTRIM(lvFrmTypeInfo.DevRoleNM)+[:]
	_PARAM = oApp.nUserKod
	USE (lvFrmTypeInfo.DevSprDBObjNM) IN 0 ALIAS DevSpr
	.cntIdCtlGridDev._GrdAddParams = [oMgrClient;CLT;FASTADD;] + ALLTRIM(STR(lvFrmTypeInfo.DevSprID)) + [;lvCltInCntViewRepl]
	.cntIdCtlGridDev._GrdInfoParams = [oMgrClient;CLT;INFO]
	*}
ELSE
	.lblDev.Visible = .F.
	.cntIdCtlGridDev.Visible = .F.
ENDIF
***
IF	lvFrmTypeInfo.ContrSprID&gt;0 AND ;
	!ISNULL(lvFrmTypeInfo.ContrSprDBObjNM) AND ;
	!EMPTY(lvFrmTypeInfo.ContrSprDBObjNM)
	*{
	.lblContr.Caption = ALLTRIM(lvFrmTypeInfo.ContrRoleNM)+[:]
	_PARAM = oApp.nUserKod
	USE (lvFrmTypeInfo.ContrSprDBObjNM) IN 0 ALIAS ContrSpr
	.cntIdCtlGridContr._GrdAddParams = [oMgrClient;CLT;FASTADD;] + ALLTRIM(STR(lvFrmTypeInfo.ContrSprID)) + [;lvCltInCntViewRepl]
	.cntIdCtlGridContr._GrdInfoParams = [oMgrClient;CLT;INFO]
	*}
ELSE
	.lblContr.Visible = .F.
	.cntIdCtlGridContr.Visible = .F.
ENDIF
*------------------------------------------------------------------------------

*23.11.2004 12:10 -&gt;Àòðèáóòû, îòíîñÿùèåñÿ ê òî÷êå ýìèññèè
IF 	lvFrmTypeInfo.PointEmiSprID&gt;0 AND ;
	!ISNULL(lvFrmTypeInfo.PointEmiSprDBObjNM) AND ;
	!EMPTY(lvFrmTypeInfo.PointEmiSprDBObjNM)
	*{
	.lblPointEmi.Caption = ALLTRIM(lvFrmTypeInfo.PointEmiRoleNM)+[:]	
	_PARAM = oApp.nUserKod
	USE (lvFrmTypeInfo.PointEmiSprDBObjNM) IN 0 ALIAS PointEmiSpr
	IF lvFrmTypeInfo.FrmTypeDirection = 2
		.cntIdCtlGridPointEmi._GrdAddParams = [oMgrClient;CLT;FASTADD;] + ALLTRIM(STR(lvFrmTypeInfo.PointEmiSprID)) + [;lvCltInCntViewRepl]
		.cntIdCtlGridPointEmi._GrdInfoParams = [oMgrClient;CLT;INFO]
	ENDIF
	*}
ELSE
	.lblPointEmi.Visible = .F.
	.cntIdCtlGridPointEmi.Visible = .F.
ENDIF
***
IF 	lvFrmTypeInfo.PointEmiAccountSprID&gt;0 AND ;
	!ISNULL(lvFrmTypeInfo.PointEmiAccountSprDBObjNM) AND ;
	!EMPTY(lvFrmTypeInfo.PointEmiAccountSprDBObjNM)
	*{
	USE (lvFrmTypeInfo.PointEmiAccountSprDBObjNM) IN 0 ALIAS PointEmiAccountSpr NODATA
	*}
ELSE
	.lblPointEmiAccount.Visible = .F.
	.cntIdCtlGridPointEmiAccount.Visible = .F.
ENDIF
***
IF	lvFrmTypeInfo.ExecEmiSprID&gt;0 AND ;
	!ISNULL(lvFrmTypeInfo.ExecEmiSprDBObjNM) AND ;
	!EMPTY(lvFrmTypeInfo.ExecEmiSprDBObjNM)
	*{
	.lblExecEmi.Caption = ALLTRIM(lvFrmTypeInfo.ExecEmiRoleNM)+[:]	
	_PARAM = oApp.nUserKod
	USE (lvFrmTypeInfo.ExecEmiSprDBObjNM) IN 0 ALIAS ExecEmiSpr
	.cntIdCtlGridExecEmi._GrdAddParams = [oMgrClient;CLT;FASTADD;] + ALLTRIM(STR(lvFrmTypeInfo.ExecEmiSprID)) + [;lvCltInCntViewRepl]
	.cntIdCtlGridExecEmi._GrdInfoParams = [oMgrClient;CLT;INFO]
	*}
ELSE
	.lblExecEmi.Visible = .F.
	.cntIdCtlGridExecEmi.Visible = .F.
ENDIF	
*------------------------------------------------------------------------------

*23.11.2004 12:10 -&gt;Àòðèáóòû, îòíîñÿùèåñÿ ê òî÷êå èñïîëíåíèÿ
IF	lvFrmTypeInfo.PointIspSprID&gt;0 AND ;
	!ISNULL(lvFrmTypeInfo.PointIspSprDBObjNM) AND ;
	!EMPTY(lvFrmTypeInfo.PointIspSprDBObjNM)
	*{
	.lblPointIsp.Caption = ALLTRIM(lvFrmTypeInfo.PointIspRoleNM)+[:]
	_PARAM = oApp.nUserKod
	USE (lvFrmTypeInfo.PointIspSprDBObjNM) IN 0 ALIAS PointIspSpr
	IF lvFrmTypeInfo.FrmTypeDirection = 3
		.cntIdCtlGridPointIsp._GrdAddParams = [oMgrClient;CLT;FASTADD;] + ALLTRIM(STR(lvFrmTypeInfo.PointIspSprID)) + [;lvCltInCntViewRepl]
		.cntIdCtlGridPointIsp._GrdInfoParams = [oMgrClient;CLT;INFO]
	ENDIF
	*}
ELSE
	.lblPointIsp.Visible = .F.
	.cntIdCtlGridPointIsp.Visible = .F.
ENDIF	
***
IF 	lvFrmTypeInfo.PointIspAccountSprID&gt;0 AND ;
	!ISNULL(lvFrmTypeInfo.PointIspAccountSprDBObjNM) AND ;
	!EMPTY(lvFrmTypeInfo.PointIspAccountSprDBObjNM)
	*{
	USE (lvFrmTypeInfo.PointIspAccountSprDBObjNM) IN 0 ALIAS PointIspAccountSpr NODATA
	*}
ELSE
	.lblPointIspAccount.Visible = .F.
	.cntIdCtlGridPointIspAccount.Visible = .F.
ENDIF
***
IF	lvFrmTypeInfo.ExecIspSprID&gt;0 AND ;
	!ISNULL(lvFrmTypeInfo.ExecIspSprDBObjNM) AND ;
	!EMPTY(lvFrmTypeInfo.ExecIspSprDBObjNM)
	*{
	.lblExecIsp.Caption = ALLTRIM(lvFrmTypeInfo.ExecIspRoleNM)+[:]
	_PARAM = oApp.nUserKod
	USE (lvFrmTypeInfo.ExecIspSprDBObjNM) IN 0 ALIAS ExecIspSpr
	.cntIdCtlGridExecIsp._GrdAddParams = [oMgrClient;CLT;FASTADD;] + ALLTRIM(STR(lvFrmTypeInfo.ExecIspSprID)) + [;lvCltInCntViewRepl]
	.cntIdCtlGridExecIsp._GrdInfoParams = [oMgrClient;CLT;INFO]
	*}
ELSE
	.lblExecIsp.Visible = .F.
	.cntIdCtlGridExecIsp.Visible = .F.
ENDIF	
*------------------------------------------------------------------------------
LOCAL newVal
*12.05.2004 01:57 -&gt;Ïðèöåïëÿåì ControlSource â çàâèñèìîñòè îò òèïà
DO CASE
	CASE lvFrmTypeInfo.FrmTypeDirection = 1 &amp;&amp; âíóòðåííèé
		.cntIdCtlGridPointEmi._ControlSource = [lvFrmEdit.PointEmiOUID]	&amp;&amp; ýìèìòèðóåò ïîäðàçäåëåíèå
		IF .cmode=[ADD]
			newVal = ALLTRIM(.cntIdCtlGridPointEmi._rsaliasname)+'.'+ALLTRIM(.cntIdCtlGridPointEmi._rsfieldnameid)
			.cntIdCtlGridPointEmi.SetValue(&amp;newVal)
		ENDIF
		.cntIdCtlGridPointIsp._ControlSource = [lvFrmEdit.PointIspOUID]	&amp;&amp; èñïîëíÿåò ïîäðàçäåëåíèå
		IF .cmode=[ADD]
			newVal = ALLTRIM(.cntIdCtlGridPointIsp._rsaliasname)+'.'+ALLTRIM(.cntIdCtlGridPointIsp._rsfieldnameid)
			.cntIdCtlGridPointIsp.SetValue(&amp;newVal)
		ENDIF
	CASE lvFrmTypeInfo.FrmTypeDirection = 2 &amp;&amp; âõîäÿùèé
		.cntIdCtlGridPointEmi._ControlSource = [lvFrmEdit.PointEmiCltID]&amp;&amp; ýìèòèðóåò êëèåíò
		IF .cmode=[ADD]
			newVal = ALLTRIM(.cntIdCtlGridPointEmi._rsaliasname)+'.'+ALLTRIM(.cntIdCtlGridPointEmi._rsfieldnameid)
			.cntIdCtlGridPointEmi.SetValue(&amp;newVal)
		ENDIF
		.cntIdCtlGridPointIsp._ControlSource = [lvFrmEdit.PointIspOUID]	&amp;&amp; èñïîëíÿåò ïîäðàçäåëåíèå
		IF .cmode=[ADD]
			newVal = ALLTRIM(.cntIdCtlGridPointIsp._rsaliasname)+'.'+ALLTRIM(.cntIdCtlGridPointIsp._rsfieldnameid)
			.cntIdCtlGridPointIsp.SetValue(&amp;newVal)
		ENDIF
	CASE lvFrmTypeInfo.FrmTypeDirection = 3 &amp;&amp; èñõîäÿùèé
		.cntIdCtlGridPointEmi._ControlSource = [lvFrmEdit.PointEmiOUID]	&amp;&amp; ýìèìòèðóåò ïîäðàçäåëåíèå
		IF .cmode=[ADD]
			newVal = ALLTRIM(.cntIdCtlGridPointEmi._rsaliasname)+'.'+ALLTRIM(.cntIdCtlGridPointEmi._rsfieldnameid)
			.cntIdCtlGridPointEmi.SetValue(&amp;newVal)
		ENDIF
		.cntIdCtlGridPointIsp._ControlSource = [lvFrmEdit.PointIspCltID]&amp;&amp; èñïîëíÿåò êëèåíò
		IF .cmode=[ADD]
			newVal = (ALLTRIM(.cntIdCtlGridPointIsp._rsaliasname)+'.'+ALLTRIM(.cntIdCtlGridPointIsp._rsfieldnameid))
			.cntIdCtlGridPointIsp.SetValue(&amp;newVal)
		ENDIF
ENDCASE
*------------------------------------------------------------------------------

.makestatuslist(lvFrmTypeInfo.FrmTypeStatusList)

*15.09.2005 15:52 -&gt; Ïîëó÷èì ñïèñîê ïîòåíöèàëüíûõ ðîäèòåëåé äîêóìåíòà
_PARAM = lvFrmEdit.FrmTypeID
***
USE IN IIF(USED([lvFrmParListByFrmType]),[lvFrmParListByFrmType],0)
***
USE lvFrmParListByFrmType IN 0
***
*.cntIDCtlGridFrmParID.SetValue(lvFrmEdit.FrmParID)
*------------------------------------------------------------------------------

*15.09.2005 15:52 -&gt; Ïîëó÷èì èíôîðìàöèþ î ñòàòóñå äîêóìåíòà
_PARAM = lvFrmEdit.FrmStatusID
***
USE IN IIF(USED([lvFrmStatusInfoByID]),[lvFrmStatusInfoByID],0)
***
USE lvFrmStatusInfoByID IN 0
*------------------------------------------------------------------------------

*03.10.2006 10:17 -&gt;Îïðåäåëèì îïåðàöèþ äëÿ äîêóìåíòà
_PARAM = lvFrmEdit.FrmTypeId
REQUERY('lvOperSpr')
.CntidctlgridPbook.Enabled= reccount('lvOperSpr')&gt;0
IF .CntidctlgridPbook.Enabled AND .cMode = [ADD]
		SELECT lvOperSpr
		LOCATE ALL FOR lvOperSpr.IsDefault
		.CntidctlgridPbook.setvalue(lvOperSpr.OperID)
ENDIF
.CntidctlgridPbook.Refresh()
*------------------------------------------------------------------------------

*15.09.2005 15:28 -&gt; Åñëè äîêóìåíò ó÷àñòâóåò â ó÷¸òå çàáëîêèðóåì âñå ïîëÿ êðîìå ñòàòóñà
IF	lvFrmStatusInfoByID.FrmStatIsInvAcc OR ;
	lvFrmStatusInfoByID.FrmStatIsCostAcc
	FOR EACH loControl IN .Controls
		DO CASE
			CASE UPPER(ALLTRIM(loControl.Name)) = [CNTIDCTLGRIDFRMSTATUS]
			CASE UPPER(ALLTRIM(loControl.Name)) = [CNTIDCTLGRIDPBOOK]
			    IF lvFrmEdit.FrmStatusID = 4
					loControl.SetEnabled(.F.)
			    ENDIF
			CASE INLIST(UPPER(ALLTRIM(loControl.Class)),[CNTIDCTLGRID],[COMTXTCTLCALENDAR])
				IF UPPER(ALLTRIM(loControl.Name)) # [CNTIDCTLGRIDFRMSTATUS]
					loControl.SetEnabled(.F.)
				ENDIF
			CASE INLIST(UPPER(ALLTRIM(loControl.Class)),[EDT],[TXT],[CHK])
				loControl.Enabled = .F.
		ENDCASE
	ENDFOR
ENDIF
*------------------------------------------------------------------------------

*20.03.2007 11:51 -&gt; Åñëè ïîëüçîâàòåëþ íåäîñòóïåí òåêóùèé ñòàòóñ - áëîêèðóåì ïîëå ñòàòóñà
.cntIdCtlGridFrmStatus.SetEnabled(lvFrmStatusList.IsEnabled)
.lblFrmStatus.Enabled = lvFrmStatusList.IsEnabled
*------------------------------------------------------------------------------
ENDWITH
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE Load
*------------------------------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: FRMPRIMARYDOCEDIT.LOAD
* Called by.......: &lt;Sys Event&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Çàãðóçêà äàííûõ äëÿ ôîðìû.
*------------------------------------------------------------------------------

*12.05.2004 00:27 -&gt;Âûïîëíèì ìåòîä ðîäèòåëüñêîãî êëàññà
DODEFAULT()
*------------------------------------------------------------------------------

*12.05.2004 00:27 -&gt;Îòêðûâàåì è óñòàíàâëèâàåì òåêóùå ÁÄ
IF !DBUSED([BASIS])
	OPEN DATABASE BASIS
ENDIF
***
SET DATABASE TO BASIS	
*------------------------------------------------------------------------------

*12.05.2004 00:26 -&gt;Îòêðûâàåì Alias äëÿ ðåäàêòèðîâàíèÿ äîêóìåíòîâ (ïóñòîé)
USE lvFrmEdit IN 0 NODATA
CURSORSETPROP([BUFFERING],3,[lvFrmEdit])
*------------------------------------------------------------------------------

*10.02.2006 11:44 -&gt; Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL _PARAM
***
_PARAM = oApp.nUserKod
*------------------------------------------------------------------------------
*12.05.2004 01:18 -&gt; Îòêðîåì ñïðàâî÷íèêè
*USE lvFrmTypeList IN 0
USESPR('lvFrmTypeList')
USE lvFrmStatusList IN 0
USE lvFrmAttributeList IN 0 NODATA
USESPR('lvCurTypeList')
*USE lvCurTypeList IN 0
USESPR('lvPrcTypeList')
*USE lvPrcTypeList IN 0
USE lvOperSpr IN 0 NODATA
*------------------------------------------------------------------------------

*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE makestatuslist
*** Ìåíÿåì íàçâàíèå ñòàòóñîâ äîêóìåíòîâ â ñîîòâåòñòâèè ñ òðåáîâàíèÿìè äàííîãî
LPARAMETERS lcStatusList
IF EMPTY(NVL(lcStatusList,''))
	RETURN
ENDIF
LOCAL lnHandledMsgCount ,lnCounter
lcStatusList = ';' + lcStatusList + ';'
lnHandledMsgCount = OCCURS([;],lcStatusList) - 1
FOR lnCounter = 1 TO lnHandledMsgCount STEP 1
	lcHandledStandartMsg = SUBSTR(lcStatusList,AT([;],lcStatusList,lnCounter)+1,AT([;],lcStatusList,lnCounter+1)-AT([;],lcStatusList,lnCounter)-1)
	IF !EMPTY(lcHandledStandartMsg)
		SELECT lvFrmStatusList
		GO lnCounter
		REPLACE lvFrmStatusList.FrmStatNm WITH lcHandledStandartMsg NEXT 1
	ENDIF
ENDFOR


ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1>Class</reserved1>
		<reserved2>50</reserved2>
		<reserved3>nfrmtypeid &lt;public/runtime&gt; Èäåíòèôèêàòîð òèïà ðåäàêòèðóåìîãî/äîáàâëÿåìîãî äîêóìåíòà.
cmode &lt;public/runtime&gt; Ðåæèì ðàáîòû ôîðìû (ADD/EDIT/INFO)
*_handlecntcancelsaveeventchild &lt;public/user/nodefault&gt; Ñîõðàíåíèå äîïîëíèòåëüíûõ äàííûõ íà äî÷åðíèõ ôîðìàõ
*makestatuslist Ãîòîâèì ñïèñîê ñòàòóñîâ äëÿ ýòîãî äîêóìåíòà
</reserved3>
		<reserved4/>
		<reserved5/>
		<reserved6>Pixels</reserved6>
		<reserved7/>
		<reserved8>..\include\primarydoc_v1_grdformview.h</reserved8>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1P20W422G</uniqueid>
		<timestamp>959205547</timestamp>
		<class>shp</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>shape</baseclass>
		<objname>shpFrmAttribute</objname>
		<parent>frmpdedit</parent>
		<properties>Top = 345
Left = 5
Height = 63
Width = 690
SpecialEffect = 0
ZOrderSet = 0
Name = "shpFrmAttribute"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18A02DMUV</uniqueid>
		<timestamp>959205547</timestamp>
		<class>shp</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>shape</baseclass>
		<objname>shpCommon</objname>
		<parent>frmpdedit</parent>
		<properties>Top = 5
Left = 5
Height = 203
Width = 690
SpecialEffect = 0
ZOrderSet = 4
Name = "shpCommon"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18A02PAKE</uniqueid>
		<timestamp>959205547</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblFrmType</objname>
		<parent>frmpdedit</parent>
		<properties>FontBold = .T.
Caption = "Òèï äîêóìåíòà:"
Left = 10
Top = 13
TabIndex = 1
ZOrderSet = 5
Name = "lblFrmType"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18A02PAKD</uniqueid>
		<timestamp>959205547</timestamp>
		<class>cntidctlgrid</class>
		<classloc>comidctl_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>cntIdCtlGridFrmType</objname>
		<parent>frmpdedit</parent>
		<properties>Top = 10
Left = 140
Width = 200
Enabled = .F.
TabIndex = 2
ZOrderSet = 6
_rsaliasname = lvFrmTypeList
_rsfieldnameid = FrmTypeID 
_rsfieldnametext = FrmTypeNM
_showtextempty = íå îïðåäåëåí
_controlsourcetype = 1
_controlsource = lvFrmEdit.FrmTypeID
_allowresize = .T.
_allowresizecontent = .T.
Name = "cntIdCtlGridFrmType"
txtText.Enabled = .F.
txtText.Width = 150
txtText._highlightobject = .parent.parent.lblFrmType
txtText.Name = "txtText"
cmdShow.Left = 154
cmdShow.Enabled = .F.
cmdShow.Name = "cmdShow"
cmdClear.Left = 177
cmdClear.Enabled = .F.
cmdClear.Name = "cmdClear"
CmdTree.Name = "CmdTree"
Olecommprox1.Top = 0
Olecommprox1.Left = 36
Olecommprox1.Height = 16
Olecommprox1.Width = 38
Olecommprox1.Name = "Olecommprox1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18A02DMUV</uniqueid>
		<timestamp>959205547</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblFrmNum</objname>
		<parent>frmpdedit</parent>
		<properties>FontBold = .T.
Caption = "Íîìåð äîêóìåíòà:"
Left = 360
Top = 13
TabIndex = 3
ZOrderSet = 7
Name = "lblFrmNum"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18A02DMUV</uniqueid>
		<timestamp>0</timestamp>
		<class>txt</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>txtFrmNum</objname>
		<parent>frmpdedit</parent>
		<properties>ControlSource = "lvFrmEdit.FrmNum"
Left = 490
TabIndex = 4
Top = 10
Width = 95
ZOrderSet = 8
_highlightobject = .parent.lblFrmNum
Name = "txtFrmNum"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1EQ0SQRAE</uniqueid>
		<timestamp>959205547</timestamp>
		<class>chk</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>checkbox</baseclass>
		<objname>chkFrmAutoNum</objname>
		<parent>frmpdedit</parent>
		<properties>Top = 12
Left = 600
FontBold = .T.
Alignment = 0
Caption = "Çàïîëíèòü"
Value = .F.
TabIndex = 5
ZOrderSet = 9
Name = "chkFrmAutoNum"
</properties>
		<protected/>
		<methods>PROCEDURE _handleanychange
WITH ThisForm

*23.12.2004 18:40 -&gt;Âûñòàâèì ëîñòóïíîñòü ïîëÿ äëÿ ââîäà íîìåðà äîêóìåíòà
.txtFrmNum.Enabled = !This.Value
*------------------------------------------------------------------------------

*23.12.2004 18:40 -&gt;Î÷èñòèì ïîëå/âîññòàíîâèì çíà÷åíèå
IF !ThisForm.txtFrmNum.Enabled
	ThisForm.txtFrmNum.Value = []
ELSE
	IF EMPTY(ThisForm.txtFrmNum.Value)
		LOCAL lcOldValue
		lcOldValue = OLDVAL([FrmNum],[lvFrmEdit])
		IF !EMPTY(lcOldValue) AND !ISNULL(lcOldValue)
			ThisForm.txtFrmNum.Value = lcOldValue
		ENDIF
	ENDIF
ENDIF
*------------------------------------------------------------------------------

ENDWITH

*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18I0M4ORT</uniqueid>
		<timestamp>959205547</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblFrmDate</objname>
		<parent>frmpdedit</parent>
		<properties>FontBold = .T.
Caption = "Äàòà äîêóìåíòà:"
Left = 10
Top = 41
TabIndex = 6
ZOrderSet = 10
Name = "lblFrmDate"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18I0M4ORT</uniqueid>
		<timestamp>959205547</timestamp>
		<class>comtxtctlcalendar</class>
		<classloc>comtxtctl_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>cntTxtCtlCalendarFrmDate</objname>
		<parent>frmpdedit</parent>
		<properties>Top = 38
Left = 140
Width = 176
Height = 23
TabIndex = 7
ZOrderSet = 11
_allowresize = .T.
_allowresizecontent = .T.
_highlightobject = .parent.lblFrmDate
controlsource = lvFrmEdit.FrmDate
Name = "cntTxtCtlCalendarFrmDate"
txtText.ControlSource = "lvFrmEdit.FrmDate"
txtText.Height = 23
txtText.Left = 0
txtText.Top = 0
txtText.Width = 149
txtText._highlightobject = .parent.parent.lblFrmDate
txtText.Name = "txtText"
cmdShow.Top = 0
cmdShow.Left = 153
cmdShow.Name = "cmdShow"
CalendCmb.Top = 0
CalendCmb.Left = 0
CalendCmb.Height = 21
CalendCmb.Width = 172
CalendCmb.ControlSource = "lvFrmEdit.FrmDate"
CalendCmb.Name = "CalendCmb"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1LD13C2V5</uniqueid>
		<timestamp>959205547</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblFrmDateAcc</objname>
		<parent>frmpdedit</parent>
		<properties>FontBold = .T.
Caption = "Ó÷¸òíàÿ äàòà:"
Left = 360
Top = 41
TabIndex = 8
ZOrderSet = 12
Name = "lblFrmDateAcc"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1LD13C2V6</uniqueid>
		<timestamp>959205547</timestamp>
		<class>comtxtctlcalendar</class>
		<classloc>comtxtctl_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>cntTxtCtlCalendarFrmDateAcc</objname>
		<parent>frmpdedit</parent>
		<properties>Top = 38
Left = 490
Width = 176
Height = 23
TabIndex = 9
ZOrderSet = 13
_allowresize = .T.
_allowresizecontent = .T.
controlsource = lvFrmEdit.FrmDateAcc
_highlightobject = .parent.lblFrmDateAcc
Name = "cntTxtCtlCalendarFrmDateAcc"
txtText.ControlSource = "lvFrmEdit.FrmDateAcc"
txtText.Height = 23
txtText.Left = 0
txtText.Top = 0
txtText.Width = 148
txtText._highlightobject = .parent.parent.lblFrmDateAcc
txtText.Name = "txtText"
cmdShow.Top = 0
cmdShow.Left = 152
cmdShow.Name = "cmdShow"
CalendCmb.Top = 0
CalendCmb.Left = 0
CalendCmb.Height = 21
CalendCmb.Width = 171
CalendCmb.ControlSource = "lvFrmEdit.FrmDateAcc"
CalendCmb.Name = "CalendCmb"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1J50ZQD7P</uniqueid>
		<timestamp>959205547</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblReason</objname>
		<parent>frmpdedit</parent>
		<properties>FontBold = .T.
Caption = "Îñíîâàíèå:"
Left = 10
Top = 81
TabIndex = 10
ZOrderSet = 14
Name = "lblReason"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1J50ZQD7Q</uniqueid>
		<timestamp>0</timestamp>
		<class>edt</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>editbox</baseclass>
		<objname>edtReason</objname>
		<parent>frmpdedit</parent>
		<properties>Height = 38
Left = 140
TabIndex = 11
Top = 66
Width = 550
ZOrderSet = 15
ControlSource = "lvFrmEdit.FrmReason"
_highlightobject = .parent.lblReason
Name = "edtReason"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18I0M4ORT</uniqueid>
		<timestamp>959205547</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblNote</objname>
		<parent>frmpdedit</parent>
		<properties>FontBold = .T.
Caption = "Ïðèìå÷àíèå:"
Left = 10
Top = 124
TabIndex = 12
ZOrderSet = 16
Name = "lblNote"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18A02DMUV</uniqueid>
		<timestamp>0</timestamp>
		<class>edt</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>editbox</baseclass>
		<objname>edtNote</objname>
		<parent>frmpdedit</parent>
		<properties>Height = 38
Left = 140
TabIndex = 13
Top = 109
Width = 550
ZOrderSet = 17
ControlSource = "lvFrmEdit.FrmNote"
_highlightobject = .parent.lblNote
Name = "edtNote"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18I0M4ORT</uniqueid>
		<timestamp>959205547</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblFrmPrcTypeID</objname>
		<parent>frmpdedit</parent>
		<properties>FontBold = .T.
Caption = "Ïðàéñ-ëèñò:"
Left = 10
Top = 155
TabIndex = 14
ZOrderSet = 18
Name = "lblFrmPrcTypeID"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_R020K4VL1</uniqueid>
		<timestamp>959205547</timestamp>
		<class>cntidctlgrid</class>
		<classloc>comidctl_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>cntIDCtlGridFrmPrcTypeID</objname>
		<parent>frmpdedit</parent>
		<properties>Top = 152
Left = 140
Width = 200
TabIndex = 15
ZOrderSet = 19
_controlsource = lvFrmEdit.FrmPrcTypeID
_controlsourcetype = 1
_rsaliasname = lvPrcTypeList
_rsfieldnameid = PrcTypeID
_rsfieldnametext = PrcTypeNM
Name = "cntIDCtlGridFrmPrcTypeID"
txtText.Height = 23
txtText.Left = 0
txtText.Top = 0
txtText.Width = 150
txtText._highlightobject = .Parent.Parent.lblFrmPrcTypeID
txtText.Name = "txtText"
cmdShow.Left = 154
cmdShow.Name = "cmdShow"
cmdClear.Left = 177
cmdClear.Name = "cmdClear"
CmdTree.Name = "CmdTree"
Olecommprox1.Top = 0
Olecommprox1.Left = 36
Olecommprox1.Height = 16
Olecommprox1.Width = 38
Olecommprox1.Name = "Olecommprox1"
</properties>
		<protected/>
		<methods>PROCEDURE _refreshrelatedobjects
*------------------------------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: cntIDCtlGridFrmPrcTypeID._RefreshRelatedObjects
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Îáíîâëåíèå ñâÿçàííûõ îáúåêòîâ
*------------------------------------------------------------------------------

*31.08.2005 18:07 -&gt; Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	_PARAM
***
_PARAM = lvFrmEdit.FrmPrcTypeID
*------------------------------------------------------------------------------

*31.08.2005 18:10 -&gt; Ïîëó÷èì èíôîðìàöèþ î ïðàéñå
USE IN IIF(USED([lvPrcTypeInfo]),[lvPrcTypeInfo],0)
USE lvPrcTypeInfo IN 0
*------------------------------------------------------------------------------

*31.08.2005 18:10 -&gt; Óñòàíîâèì âàëþòó èç ïðàéñà
ThisForm.cntIDCtlGridFrmCurTypeID.SetValue(lvPrcTypeInfo.CurTypeID)
*------------------------------------------------------------------------------

*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18I0M4ORT</uniqueid>
		<timestamp>959205547</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblFrmCurTypeID</objname>
		<parent>frmpdedit</parent>
		<properties>FontBold = .T.
Caption = "Âàëþòà:"
Enabled = .F.
Left = 360
Top = 155
Visible = .F.
TabIndex = 16
ZOrderSet = 20
Name = "lblFrmCurTypeID"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_R020K4VL1</uniqueid>
		<timestamp>959205547</timestamp>
		<class>cntidctlgrid</class>
		<classloc>comidctl_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>cntIDCtlGridFrmCurTypeID</objname>
		<parent>frmpdedit</parent>
		<properties>Top = 152
Left = 490
Width = 200
Enabled = .F.
Visible = .F.
TabIndex = 17
ZOrderSet = 21
_controlsource = lvFrmEdit.FrmCurTypeID
_controlsourcetype = 1
_rsaliasname = lvCurTypeList
_rsfieldnameid = CurTypeID
_rsfieldnametext = CurTypeNM
Name = "cntIDCtlGridFrmCurTypeID"
txtText.Height = 23
txtText.Left = 0
txtText.Top = 0
txtText.Width = 150
txtText._highlightobject = .Parent.Parent.lblFrmCurTypeID
txtText.Name = "txtText"
cmdShow.Left = 154
cmdShow.Name = "cmdShow"
cmdClear.Left = 177
cmdClear.Name = "cmdClear"
CmdTree.Name = "CmdTree"
Olecommprox1.Top = 0
Olecommprox1.Left = 36
Olecommprox1.Height = 16
Olecommprox1.Width = 38
Olecommprox1.Name = "Olecommprox1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18G1F1UUA</uniqueid>
		<timestamp>959205547</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblFrmStatus</objname>
		<parent>frmpdedit</parent>
		<properties>FontBold = .T.
Caption = "Ñòàòóñ äîêóìåíòà:"
Left = 10
Top = 183
TabIndex = 18
ZOrderSet = 22
Name = "lblFrmStatus"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18G1F1UU1</uniqueid>
		<timestamp>959205547</timestamp>
		<class>cntidctlgrid</class>
		<classloc>comidctl_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>cntIdCtlGridFrmStatus</objname>
		<parent>frmpdedit</parent>
		<properties>Top = 180
Left = 140
Width = 200
TabIndex = 19
ZOrderSet = 23
_allowresizecontent = .T.
_allowresize = .T.
_rsaliasname = lvFrmStatusList
_rsfieldnameid = FrmStatID
_rsfieldnametext = FrmStatNM
_controlsource = lvFrmEdit.FrmStatusID
_controlsourcetype = 1
_selectobject = frmidctlgridextended;comidctl_v1.vcx
_rsfieldnameenabled = IsEnabled
_disabledmsg = Ñòàòóñ íåäîñòóïåí
Name = "cntIdCtlGridFrmStatus"
txtText.Width = 150
txtText._highlightobject = .parent.parent.lblFrmStatus
txtText.Name = "txtText"
cmdShow.Left = 154
cmdShow.Name = "cmdShow"
cmdClear.Left = 177
cmdClear.Name = "cmdClear"
CmdTree.Name = "CmdTree"
Olecommprox1.Top = 0
Olecommprox1.Left = 36
Olecommprox1.Height = 16
Olecommprox1.Width = 38
Olecommprox1.Name = "Olecommprox1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1MY0QZW3Y</uniqueid>
		<timestamp>959205547</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblFrmParID</objname>
		<parent>frmpdedit</parent>
		<properties>FontBold = .T.
Caption = "Äîêóìåíò-èñòî÷íèê:"
Enabled = .F.
Left = 360
Top = 183
Visible = .F.
TabIndex = 20
ZOrderSet = 24
Name = "lblFrmParID"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1MY0QZW3Z</uniqueid>
		<timestamp>959205547</timestamp>
		<class>cntidctlgrid</class>
		<classloc>comidctl_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>cntIDCtlGridFrmParID</objname>
		<parent>frmpdedit</parent>
		<properties>Top = 180
Left = 490
Width = 200
Enabled = .F.
Visible = .F.
TabIndex = 21
ZOrderSet = 25
_controlsource = lvFrmEdit.FrmParID
_controlsourcetype = 1
_rsaliasname = lvFrmParListByFrmType
_rsfieldnameid = ID
_rsfieldnametext = NM
Name = "cntIDCtlGridFrmParID"
txtText.Height = 23
txtText.Left = 0
txtText.Top = 0
txtText.Width = 150
txtText._highlightobject = .Parent.Parent.lblFrmParID
txtText.Name = "txtText"
cmdShow.Left = 154
cmdShow.Name = "cmdShow"
cmdClear.Left = 177
cmdClear.Name = "cmdClear"
CmdTree.Name = "CmdTree"
Olecommprox1.Top = 0
Olecommprox1.Left = 36
Olecommprox1.Height = 16
Olecommprox1.Width = 38
Olecommprox1.Name = "Olecommprox1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18I0M4ORT</uniqueid>
		<timestamp>959205547</timestamp>
		<class>shp</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>shape</baseclass>
		<objname>shpControl</objname>
		<parent>frmpdedit</parent>
		<properties>Top = 213
Left = 5
Height = 33
Width = 690
SpecialEffect = 0
ZOrderSet = 26
Name = "shpControl"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_R020K4VL1</uniqueid>
		<timestamp>959205547</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblDev</objname>
		<parent>frmpdedit</parent>
		<properties>FontBold = .T.
Caption = "Ðàçðàáîò÷èê:"
Left = 10
Top = 221
TabIndex = 22
ZOrderSet = 27
Name = "lblDev"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1WU0MA55J</uniqueid>
		<timestamp>959205547</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>Lbl1</objname>
		<parent>frmpdedit</parent>
		<properties>FontBold = .T.
Caption = "Àâòîìàòè÷åñêàÿ õîç.îïåðàöèÿ:"
Left = 264
Top = 350
TabIndex = 40
ZOrderSet = 28
Name = "Lbl1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1WU0MA55K</uniqueid>
		<timestamp>959205547</timestamp>
		<class>cntidctlgrid</class>
		<classloc>comidctl_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>CntidctlgridPbook</objname>
		<parent>frmpdedit</parent>
		<properties>Top = 347
Left = 446
Width = 244
Height = 23
TabIndex = 41
ZOrderSet = 29
_allowresize = .T.
_allowresizecontent = .T.
_controlsourcetype = 1
_controlsource = lvFrmEdit.OperID
_rsaliasname = lvOperSpr
_rsfieldnameid = OperID
_rsfieldnametext = OperNM
Name = "CntidctlgridPbook"
txtText.Height = 23
txtText.Left = 0
txtText.Top = 0
txtText.Width = 196
txtText._highlightobject = .parent.parent.lblDev
txtText.Name = "txtText"
cmdShow.Top = 0
cmdShow.Left = 199
cmdShow.Name = "cmdShow"
cmdClear.Top = 0
cmdClear.Left = 222
cmdClear.Name = "cmdClear"
CmdTree.Name = "CmdTree"
Olecommprox1.Top = 0
Olecommprox1.Left = 36
Olecommprox1.Height = 16
Olecommprox1.Width = 38
Olecommprox1.Name = "Olecommprox1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_R020K4VL1</uniqueid>
		<timestamp>959205547</timestamp>
		<class>cntidctlgrid</class>
		<classloc>comidctl_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>cntIdCtlGridDev</objname>
		<parent>frmpdedit</parent>
		<properties>Top = 218
Left = 96
Width = 244
Height = 23
TabIndex = 23
ZOrderSet = 30
_allowresize = .T.
_allowresizecontent = .T.
_controlsourcetype = 1
_controlsource = lvFrmEdit.DevCltID
_rsaliasname = DevSpr
_rsfieldnameid = ID
_rsfieldnametext = NM
Name = "cntIdCtlGridDev"
txtText.Height = 23
txtText.Left = 0
txtText.Top = 0
txtText.Width = 196
txtText._highlightobject = .parent.parent.lblDev
txtText.Name = "txtText"
cmdShow.Top = 0
cmdShow.Left = 199
cmdShow.Name = "cmdShow"
cmdClear.Top = 0
cmdClear.Left = 222
cmdClear.Name = "cmdClear"
CmdTree.Name = "CmdTree"
Olecommprox1.Top = 0
Olecommprox1.Left = 36
Olecommprox1.Height = 16
Olecommprox1.Width = 38
Olecommprox1.Name = "Olecommprox1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1DW0POPON</uniqueid>
		<timestamp>959205547</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblContr</objname>
		<parent>frmpdedit</parent>
		<properties>FontBold = .T.
Caption = "Êîíòðîëåð:"
Left = 360
Top = 221
TabIndex = 24
ZOrderSet = 31
Name = "lblContr"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1DW0POPOP</uniqueid>
		<timestamp>959205547</timestamp>
		<class>cntidctlgrid</class>
		<classloc>comidctl_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>cntIdCtlGridContr</objname>
		<parent>frmpdedit</parent>
		<properties>Top = 218
Left = 432
Width = 258
Height = 23
TabIndex = 25
ZOrderSet = 32
_allowresize = .T.
_allowresizecontent = .T.
_controlsourcetype = 1
_controlsource = lvFrmEdit.ContrCltID
_rsaliasname = ContrSpr
_rsfieldnameid = ID
_rsfieldnametext = NM
Name = "cntIdCtlGridContr"
txtText.Height = 24
txtText.Left = 0
txtText.Top = 0
txtText.Width = 209
txtText._highlightobject = .parent.parent.lblContr
txtText.Name = "txtText"
cmdShow.Top = 0
cmdShow.Left = 212
cmdShow.Name = "cmdShow"
cmdClear.Top = 0
cmdClear.Left = 235
cmdClear.Name = "cmdClear"
CmdTree.Name = "CmdTree"
Olecommprox1.Top = 0
Olecommprox1.Left = 36
Olecommprox1.Height = 16
Olecommprox1.Width = 38
Olecommprox1.Name = "Olecommprox1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18A02DMUV</uniqueid>
		<timestamp>959205547</timestamp>
		<class>shp</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>shape</baseclass>
		<objname>shpQualityEmi</objname>
		<parent>frmpdedit</parent>
		<properties>Top = 251
Left = 5
Height = 89
Width = 340
SpecialEffect = 0
ZOrderSet = 33
Name = "shpQualityEmi"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18A02DMUV</uniqueid>
		<timestamp>959205547</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblPointEmi</objname>
		<parent>frmpdedit</parent>
		<properties>FontBold = .T.
Caption = "Òî÷êà ýìèññèè:"
Height = 17
Left = 10
Top = 259
Width = 92
TabIndex = 26
ZOrderSet = 34
Name = "lblPointEmi"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18A02PAKE</uniqueid>
		<timestamp>959205547</timestamp>
		<class>cntidctlgrid</class>
		<classloc>comidctl_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>cntIdCtlGridPointEmi</objname>
		<parent>frmpdedit</parent>
		<properties>Top = 256
Left = 108
Width = 232
Height = 23
TabIndex = 27
ZOrderSet = 35
_allowresize = .T.
_allowresizecontent = .T.
_rsaliasname = PointEmiSpr
_rsfieldnametext = NM
_rsfieldnameid = ID
_controlsourcetype = 1
Name = "cntIdCtlGridPointEmi"
txtText.Height = 23
txtText.Left = 0
txtText.Top = 0
txtText.Width = 184
txtText._highlightobject = .parent.parent.lblPointEmi
txtText.Name = "txtText"
cmdShow.Top = 0
cmdShow.Left = 186
cmdShow.Name = "cmdShow"
cmdClear.Top = 0
cmdClear.Left = 209
cmdClear.Name = "cmdClear"
CmdTree.Name = "CmdTree"
Olecommprox1.Top = 0
Olecommprox1.Left = 36
Olecommprox1.Height = 16
Olecommprox1.Width = 38
Olecommprox1.Name = "Olecommprox1"
</properties>
		<protected/>
		<methods>PROCEDURE _handleanychange
WITH ThisForm

*22.09.2004 17:09 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	lcOldAlias
***
lcOldAlias = ALIAS()
*------------------------------------------------------------------------------

*22.09.2004 17:26 -&gt;Óñòàíîâèì çíà÷åíèå ïî óìîë÷àíèþ
IF USED([PointEmiAccountSpr])
	SELECT PointEmiAccountSpr
	LOCATE FOR default_
	IF FOUND()
		.cntIdCtlGridPointEmiAccount.SetValue(PointEmiAccountSpr.ID)
	ELSE
		.cntIdCtlGridPointEmiAccount.SetValue(0)
	ENDIF
ENDIF
*------------------------------------------------------------------------------

ENDWITH
************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************
ENDPROC
PROCEDURE _refreshrelatedobjects
IF USED([PointEmiAccountSpr])
	LOCAL _PARAM
	_PARAM = This.Value
	REQUERY([PointEmiAccountSpr])
	*REPLACE PointEmiAccountSpr.ID WITH IIF(PointEmiAccountSpr.ID=0,lvFrmEdit.PointEmiCltSAccID,PointEmiAccountSpr.ID)
	IF thisform.cmode=[ADD]
			thisform.cntIdCtlGridPointEmiAccount.SetValue(PointEmiAccountSpr.Id)
	ENDIF
	thisform.cntIdCtlGridPointEmiAccount.Refresh()
ENDIF
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18G1F1UTQ</uniqueid>
		<timestamp>959205547</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblPointEmiAccount</objname>
		<parent>frmpdedit</parent>
		<properties>FontBold = .T.
Caption = "Ðàñ÷åòíûé ñ÷¸ò:"
Height = 17
Left = 10
Top = 287
Width = 99
TabIndex = 30
ZOrderSet = 36
Name = "lblPointEmiAccount"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18G1F1UTG</uniqueid>
		<timestamp>959205547</timestamp>
		<class>cntidctlgrid</class>
		<classloc>comidctl_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>cntIdCtlGridPointEmiAccount</objname>
		<parent>frmpdedit</parent>
		<properties>Top = 284
Left = 140
Width = 200
TabIndex = 31
ZOrderSet = 37
_allowresize = .T.
_allowresizecontent = .T.
_controlsource = lvFrmEdit.PointEmiCltSAccID
_rsaliasname = PointEmiAccountSpr
_rsfieldnameid = ID
_rsfieldnametext = NM
_controlsourcetype = 1
Name = "cntIdCtlGridPointEmiAccount"
txtText.Width = 150
txtText._highlightobject = .parent.parent.lblPointEmiAccount
txtText.Name = "txtText"
cmdShow.Left = 154
cmdShow.Name = "cmdShow"
cmdClear.Left = 177
cmdClear.Name = "cmdClear"
CmdTree.Name = "CmdTree"
Olecommprox1.Top = 0
Olecommprox1.Left = 36
Olecommprox1.Height = 16
Olecommprox1.Width = 38
Olecommprox1.Name = "Olecommprox1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18A02PAKD</uniqueid>
		<timestamp>959205547</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblExecEmi</objname>
		<parent>frmpdedit</parent>
		<properties>FontBold = .T.
Caption = "Èñïîëíèòåëü EMI:"
Height = 17
Left = 10
Top = 315
Width = 106
TabIndex = 34
ZOrderSet = 38
Name = "lblExecEmi"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18A02DMUV</uniqueid>
		<timestamp>959205547</timestamp>
		<class>cntidctlgrid</class>
		<classloc>comidctl_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>cntIdCtlGridExecEmi</objname>
		<parent>frmpdedit</parent>
		<properties>Top = 312
Left = 140
Width = 200
TabIndex = 35
ZOrderSet = 39
_allowresizecontent = .T.
_rsaliasname = ExecEmiSpr
_rsfieldnameid = ID
_rsfieldnametext = NM
_controlsourcetype = 1
_controlsource = lvFrmEdit.ExecEmiCltID
Name = "cntIdCtlGridExecEmi"
txtText.Width = 150
txtText._highlightobject = .parent.parent.lblExecEmi
txtText.Name = "txtText"
cmdShow.Left = 154
cmdShow.Name = "cmdShow"
cmdClear.Left = 177
cmdClear.Name = "cmdClear"
CmdTree.Name = "CmdTree"
Olecommprox1.Top = 0
Olecommprox1.Left = 36
Olecommprox1.Height = 16
Olecommprox1.Width = 38
Olecommprox1.Name = "Olecommprox1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18G1F1UPV</uniqueid>
		<timestamp>959205547</timestamp>
		<class>shp</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>shape</baseclass>
		<objname>shpQualityIsp</objname>
		<parent>frmpdedit</parent>
		<properties>Top = 251
Left = 355
Height = 89
Width = 340
SpecialEffect = 0
ZOrderSet = 40
Name = "shpQualityIsp"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18G1F1USM</uniqueid>
		<timestamp>959205547</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblPointIsp</objname>
		<parent>frmpdedit</parent>
		<properties>FontBold = .T.
Caption = "Òî÷êà èñïîëíåíèÿ:"
Left = 360
Top = 259
TabIndex = 28
ZOrderSet = 41
Name = "lblPointIsp"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18G1F1USW</uniqueid>
		<timestamp>959205547</timestamp>
		<class>cntidctlgrid</class>
		<classloc>comidctl_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>cntIdCtlGridPointIsp</objname>
		<parent>frmpdedit</parent>
		<properties>Top = 256
Left = 468
Width = 222
Height = 24
TabIndex = 29
ZOrderSet = 42
_allowresizecontent = .T.
_allowresize = .T.
_rsaliasname = PointIspSpr
_rsfieldnameid = ID
_rsfieldnametext = NM
_controlsourcetype = 1
Name = "cntIdCtlGridPointIsp"
txtText.Height = 23
txtText.Left = 0
txtText.Top = 0
txtText.Width = 173
txtText._highlightobject = .parent.parent.lblPointIsp
txtText.Name = "txtText"
cmdShow.Top = 0
cmdShow.Left = 173
cmdShow.Name = "cmdShow"
cmdClear.Top = 0
cmdClear.Left = 196
cmdClear.Name = "cmdClear"
CmdTree.Top = 0
CmdTree.Left = 199
CmdTree.Name = "CmdTree"
Olecommprox1.Top = 0
Olecommprox1.Left = 36
Olecommprox1.Height = 16
Olecommprox1.Width = 38
Olecommprox1.Name = "Olecommprox1"
</properties>
		<protected/>
		<methods>PROCEDURE _handleanychange
WITH ThisForm

*22.09.2004 17:09 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	lcOldAlias
***
lcOldAlias = ALIAS()
*------------------------------------------------------------------------------

*22.09.2004 17:26 -&gt;Óñòàíîâèì çíà÷åíèå ïî óìîë÷àíèþ
IF USED([PointIspAccountSpr])
	SELECT PointIspAccountSpr
	LOCATE FOR default_
	IF FOUND()
		.cntIdCtlGridPointIspAccount.SetValue(PointIspAccountSpr.ID)
	ELSE
		.cntIdCtlGridPointIspAccount.SetValue(0)
	ENDIF
ENDIF
*------------------------------------------------------------------------------

ENDWITH
************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************
ENDPROC
PROCEDURE _refreshrelatedobjects
IF USED([PointIspAccountSpr])
	LOCAL _PARAM
	_PARAM = This.Value
	REQUERY([PointIspAccountSpr])
	IF thisform.cmode=[ADD]
			thisform.cntIdCtlGridPointIspAccount.SetValue(PointIspAccountSpr.Id)
	ENDIF
	thisform.cntIdCtlGridPointIspAccount.Refresh()
ENDIF
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18G1F1UU0</uniqueid>
		<timestamp>959205547</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblPointIspAccount</objname>
		<parent>frmpdedit</parent>
		<properties>FontBold = .T.
Caption = "Ðàñ÷åòíûé ñ÷¸ò:"
Left = 360
Top = 287
TabIndex = 32
ZOrderSet = 43
Name = "lblPointIspAccount"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18G1F1UTR</uniqueid>
		<timestamp>959205547</timestamp>
		<class>cntidctlgrid</class>
		<classloc>comidctl_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>cntIdCtlGridPointIspAccount</objname>
		<parent>frmpdedit</parent>
		<properties>Top = 284
Left = 468
Width = 222
Height = 24
TabIndex = 33
ZOrderSet = 44
_allowresize = .T.
_allowresizecontent = .T.
_controlsource = lvFrmEdit.PointIspCltSAccID
_rsaliasname = PointIspAccountSpr
_rsfieldnameid = ID
_rsfieldnametext = NM
_controlsourcetype = 1
Name = "cntIdCtlGridPointIspAccount"
txtText.Height = 23
txtText.Left = 0
txtText.Top = 0
txtText.Width = 171
txtText._highlightobject = .parent.parent.lblPointIspAccount
txtText.Name = "txtText"
cmdShow.Top = 0
cmdShow.Left = 173
cmdShow.Name = "cmdShow"
cmdClear.Top = 0
cmdClear.Left = 196
cmdClear.Name = "cmdClear"
CmdTree.Top = 0
CmdTree.Left = 199
CmdTree.Name = "CmdTree"
Olecommprox1.Top = 0
Olecommprox1.Left = 36
Olecommprox1.Height = 16
Olecommprox1.Width = 38
Olecommprox1.Name = "Olecommprox1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18A02PAKF</uniqueid>
		<timestamp>959205547</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblExecIsp</objname>
		<parent>frmpdedit</parent>
		<properties>FontBold = .T.
Caption = "Èñïîëíèòåëü ISP:"
Left = 360
Top = 315
TabIndex = 36
ZOrderSet = 45
Name = "lblExecIsp"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18A02PAKE</uniqueid>
		<timestamp>959205547</timestamp>
		<class>cntidctlgrid</class>
		<classloc>comidctl_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>cntIdCtlGridExecIsp</objname>
		<parent>frmpdedit</parent>
		<properties>Top = 312
Left = 468
Width = 222
Height = 24
TabIndex = 37
ZOrderSet = 46
_allowresize = .T.
_allowresizecontent = .T.
_rsaliasname = ExecIspSpr
_rsfieldnameid = ID
_rsfieldnametext = NM
_controlsourcetype = 1
_controlsource = lvFrmEdit.ExecIspCltID
Name = "cntIdCtlGridExecIsp"
txtText.Height = 23
txtText.Left = 0
txtText.Top = 0
txtText.Width = 170
txtText._highlightobject = .parent.parent.lblExecIsp
txtText.Name = "txtText"
cmdShow.Top = 0
cmdShow.Left = 174
cmdShow.Name = "cmdShow"
cmdClear.Top = 0
cmdClear.Left = 197
cmdClear.Name = "cmdClear"
CmdTree.Top = 0
CmdTree.Left = 200
CmdTree.Name = "CmdTree"
Olecommprox1.Top = 0
Olecommprox1.Left = 36
Olecommprox1.Height = 16
Olecommprox1.Width = 38
Olecommprox1.Name = "Olecommprox1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1P20W424M</uniqueid>
		<timestamp>959205547</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblFrmAttribute</objname>
		<parent>frmpdedit</parent>
		<properties>FontBold = .T.
Caption = "Àòðèáóòû:"
Height = 17
Left = 10
Top = 350
Width = 60
TabIndex = 38
ZOrderSet = 47
Name = "lblFrmAttribute"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1P20W424N</uniqueid>
		<timestamp>0</timestamp>
		<class>bitgrd</class>
		<classloc>bits_v1.vcx</classloc>
		<baseclass>grid</baseclass>
		<objname>grdBit</objname>
		<parent>frmpdedit</parent>
		<properties>Height = 36
Left = 10
TabIndex = 39
Top = 367
Width = 249
ZOrderSet = 48
_rsaliasname = lvFrmAttributeList
_rsfieldnamebit = FrmAttrBit
_rsfieldnametext = FrmAttrNM
_controlsource = lvFrmEdit.FrmAttribute
_controlsourcetype = 1
Name = "grdBit"
Column1.Header1.FontBold = .F.
Column1.Header1.Caption = " "
Column1.Header1.Name = "Header1"
Column1.CHK1.FontBold = .F.
Column1.CHK1.Alignment = 0
Column1.CHK1.Name = "CHK1"
Column1.FontBold = .F.
Column1.Name = "Column1"
Column2.Header1.FontBold = .T.
Column2.Header1.Name = "Header1"
Column2.Txtgrd1.FontBold = .F.
Column2.Txtgrd1.Name = "Txtgrd1"
Column2.FontBold = .F.
Column2.Name = "Column2"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18G1F1UUB</uniqueid>
		<timestamp>959205547</timestamp>
		<class>cntcancelsavehandled</class>
		<classloc>baseform_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>cntCancelSaveHandled</objname>
		<parent>frmpdedit</parent>
		<properties>Top = 413
Left = 490
TabIndex = 42
ZOrderSet = 49
Name = "cntCancelSaveHandled"
cmdCancel.Name = "cmdCancel"
cmdOk.Name = "cmdOk"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1ON0L3DWH</uniqueid>
		<timestamp>959022327</timestamp>
		<class>cmd</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd1</objname>
		<parent>frmpdedit</parent>
		<properties>Top = 373
Left = 260
Height = 24
Width = 216
Caption = "Ðàáîòà ñ îðèãèíàëîì äîêóìåíòà"
Enabled = .F.
Visible = .F.
Name = "Cmd1"
</properties>
		<protected/>
		<methods>PROCEDURE Click
LOCAL cFile, luOpResult , loWord, llNewFile ,_PARAM, rez
LOCAL loExcel as Excel.Application
LOCAL loWord as Word.Application

IF ThisForm.cMode==[ADD]
	RETURN
ENDIF
llNewFile = .f.
_PARAM = lvFrmEdit.FrmID
USE FrmBlobEdit IN 0
CURSORSETPROP([BUFFERING],3,[FrmBlobEdit])

IF RECCOUNT('FrmBlobEdit')=0
		luOpResult = oApp.DoModalFormRetValObj([frmblobtype;PrimaryDoc_v1;PrimaryDoc.app]) &amp;&amp;,lcRequstedOperation,tuParam1)
		IF luOpResult &gt; 0
				SELECT FrmBlobEdit
				APPEND BLANK
				REPLACE FrmBlobEdit.BlobType WITH luOpResult
				REPLACE FrmBlobEdit.FrmID WITH lvFrmEdit.FrmID
				rez = TABLEUPDATE(1,.T.,[FrmBlobEdit])
				llNewFile = .t.
			ELSE
				RETURN
		ENDIF
ENDIF

cFile = SUBSTR(FULLPATH('primarydoc.app'),1,LEN(FULLPATH('primarydoc.app'))-15)+[\TMP\_d] + SYS(2015)
DO CASE
	CASE FrmBlobEdit.BlobType = 1
			cFile = cFile+[.DOC]
	CASE FrmBlobEdit.BlobType = 2
			cFile = cFile+[.XLS]
	CASE FrmBlobEdit.BlobType = 3
			**cFile = GETFILE("avi|mov|wav|mid|wmv","Âûáåðèòå MCI ôàéë")
			cFile = [TMP\TMP.WMV]
	OTHERWISE
			cFile = cFile+[.BMP]
ENDCASE

** Ñîõðàíÿåì ñîäåðæèìîå ñåðâåðà âî âðåìåííûé ôàéë
IF !llNewFile
	COPY MEMO FrmBlobEdit.FrmBlob TO (cFile)
ENDIF

DO CASE
	CASE FrmBlobEdit.BlobType = 1
	
			loWord = CREATEOBJECT( 'WORD.APPLICATION')
				IF FILE(cFile)
						loWord.Documents.Open(cFile)
					ELSE
						loWord.Documents.Add()
						loWord.ActiveDocument.SaveAs(cFile)
				ENDIF
			loWord.Visible = .T.	
	CASE FrmBlobEdit.BlobType = 2
			loExcel = CREATEOBJECT( 'EXCEL.APPLICATION')
				IF FILE(cFile)
						loExcel.WorkBooks.Open(cFile)
					ELSE
						loExcel.WorkBooks.Add()
						loExcel.ActiveWorkbook.SaveAs(cFile)
				ENDIF
			loExcel.Visible = .T.	
			*loExcel.ActiveWorkbook.Close()
	CASE FrmBlobEdit.BlobType = 3
			cFile = GETFILE("avi|mov|wav|mid|wmv","Âûáåðèòå MCI ôàéë")
	OTHERWISE
ENDCASE
IF !MESSAGEBOX('Ñîõðàíèòü îðèãèíàë äîêóìåíòà â áàçó?',4+64,'Ñîõðàíåíèå äîêóìåíòà ...')=6
	USE IN FrmBlobEdit
	ERASE (cFile)
	RETURN
ENDIF
loWord = null
loExcel = null
SELECT FrmBlobEdit
APPEND MEMO FrmBlobEdit.FrmBlob FROM (cFile) OVERWRITE
rez = TABLEUPDATE(1,.T.,[FrmBlobEdit])
USE IN FrmBlobEdit
ERASE (cFile)


ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2A31891Y2</uniqueid>
		<timestamp>959022327</timestamp>
		<class>cmd</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd2</objname>
		<parent>frmpdedit</parent>
		<properties>Top = 373
Left = 476
Height = 24
Width = 216
Caption = "Óäàëåíèå îðèãèíàëà äîêóìåíòà"
Enabled = .F.
Visible = .F.
Name = "Cmd2"
</properties>
		<protected/>
		<methods>PROCEDURE Click
IF ThisForm.cMode==[ADD]
	RETURN
ENDIF
IF !MESSAGEBOX('Óäàëèòü îðèãèíàë äîêóìåíòà èç áàçû?',4+64,'Óäàëåíèå äîêóìåíòà ...')=6
	RETURN
ENDIF
llNewFile = .f.
_PARAM = lvFrmEdit.FrmID
USE FrmBlobEdit IN 0
CURSORSETPROP([BUFFERING],3,[FrmBlobEdit])
SELECT FrmBlobEdit
DELETE NEXT 1
rez = TABLEUPDATE(1,.T.,[FrmBlobEdit])
USE IN FrmBlobEdit


ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>COMMENT</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>0</timestamp>
		<class/>
		<classloc/>
		<baseclass/>
		<objname>frmpdedit</objname>
		<parent/>
		<properties>Arial, 0, 9, 5, 15, 12, 32, 3, 0
Arial, 1, 9, 6, 15, 12, 32, 3, 0
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1></reserved1>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_17W0TTK68</uniqueid>
		<timestamp>959601804</timestamp>
		<class>frmview</class>
		<classloc>baseform_v1.vcx</classloc>
		<baseclass>form</baseclass>
		<objname>frmfiltr</objname>
		<parent/>
		<properties>DataSession = 1
Height = 340
Width = 480
DoCreate = .T.
AutoCenter = .T.
BorderStyle = 2
Caption = "Íàñòðîéêà ôèëüòðîâ è îãðàíè÷åíèé"
Closable = .F.
MaxButton = .F.
MinButton = .F.
uretval = 0
_allowsaveandrestorelayout = .T.
Name = "frmfiltr"
cstmsghandler.Name = "cstmsghandler"
cstresizable.Name = "cstresizable"
Img1.Name = "Img1"
</properties>
		<protected/>
		<methods>PROCEDURE _handlecntcancelsaveevent
*-------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: FRMFILTR._HANDLECNTCANCELSAVEEVENT
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;tcMessage&gt;
* Returns.........: &lt;none&gt;
* Notes...........: &lt;~&gt;
*-------------------------------------------------------
LPARAMETERS tcMessage

WITH This

*12.04.2008 00:37 -&gt;Ñîõðàíèì/îòìåíèì èçìåíåíèÿ
IF tcMessage = [OK]

*11.04.2008 13:01 -&gt;Ïîêàæåì ñîîáùåíèå
WAIT WINDOW [Èäåò îáíîâëåíèå äàííûõ. Æäèòå...] NOWAIT NOCLEAR
SET MESSAGE TO [Èäåò îáíîâëåíèå äàííûõ. Æäèòå...]
*------------------------------------------------------------------------------

			*11.08.2006 13:02 -&gt;Îáíîâèì äàííûå
			.cntQueryParam.QueryParamSet()
			.uretval= .cntQueryParam.cQryParSID
			*------------------------------------------------------------------------------

*11.04.2008 13:02 -&gt;Óáåðåì ñîîáùåíèå
WAIT CLEAR
SET MESSAGE TO []
*------------------------------------------------------------------------------

*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************	
	
ELSE
	.uretval = []
	
ENDIF
*------------------------------------------------------------------------------

*30.04.2008 12:25 -&gt;Ñêðûâåì ôîðìó
.Hide()
ENDWITH

************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************
ENDPROC
PROCEDURE Activate
DODEFAULT()
WITH This
IF .lBeforeFirstShowExecuted
	.lBeforeFirstShowExecuted = .f.
ENDIF
.cntcancelsavehandled1.cmdCancel.Enabled = .t.
.cntcancelsavehandled1.cmdOk.Enabled = .t.
.lblServer.Visible= .f.


ENDWITH
ENDPROC
PROCEDURE Init
*-------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: PRIMARYDOC_VIEW.INIT
* Called by.......: &lt;Sys Event&gt;
* Parameters......: &lt;tnScrFrmID&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Èíèöèàëèçàöèÿ ôîðìû.
*-------------------------------------------------------
LPARAMETERS	tnScrFrmID


WITH This

.nscrfrmid=tnScrFrmID
*25.05.2004 23:11 -&gt;Çàãðóçèì ôèëüòðû äëÿ òåêóùåé ôîðìû
.cntQueryParam.ParamObjectCreate(__QPOTYPE_SCRFRM,tnScrFrmID )
ENDWITH

************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1>Class</reserved1>
		<reserved2>4</reserved2>
		<reserved3>nscrfrmid &lt;prtected/runtime&gt; Èäåíòèôèêàòîð ýêðàííîé ôîðìû.
uretval
*_handlecntcancelsaveevent 
</reserved3>
		<reserved4/>
		<reserved5/>
		<reserved6>Pixels</reserved6>
		<reserved7/>
		<reserved8>..\include\qryparparobjtypes.h</reserved8>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2CP10E6AY</uniqueid>
		<timestamp>959601804</timestamp>
		<class>cntcancelsavehandled</class>
		<classloc>baseform_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>Cntcancelsavehandled1</objname>
		<parent>frmfiltr</parent>
		<properties>Top = 309
Left = 144
Width = 332
Height = 25
TabIndex = 42
ZOrderSet = 49
Name = "Cntcancelsavehandled1"
cmdCancel.Name = "cmdCancel"
cmdOk.Top = 0
cmdOk.Left = 150
cmdOk.Height = 25
cmdOk.Width = 183
cmdOk.Caption = "Ïðèìåíèò Ôèëüòð (Ctrl+Enter)"
cmdOk.Name = "cmdOk"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2CW0QF26Q</uniqueid>
		<timestamp>959601804</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblServer</objname>
		<parent>frmfiltr</parent>
		<properties>AutoSize = .F.
FontBold = .T.
FontSize = 12
Alignment = 2
Caption = "Ïîëó÷àåì äàííûå ñ ñåðâåðà ... "
Height = 17
Left = 18
Top = 289
Visible = .F.
Width = 444
ForeColor = 255,0,128
Name = "lblServer"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18U1DR4A8</uniqueid>
		<timestamp>959601804</timestamp>
		<class>cntqueryparam</class>
		<classloc>queryparamio_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>cntQueryParam</objname>
		<parent>frmfiltr</parent>
		<properties>Top = 0
Left = 2
Width = 474
Height = 72
ZOrderSet = 5
cqryparsid = 
Name = "cntQueryParam"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>COMMENT</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>0</timestamp>
		<class/>
		<classloc/>
		<baseclass/>
		<objname>frmfiltr</objname>
		<parent/>
		<properties>Arial, 0, 9, 5, 15, 12, 32, 3, 0
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1></reserved1>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_17W0TTK68</uniqueid>
		<timestamp>959601839</timestamp>
		<class>frmview</class>
		<classloc>baseform_v1.vcx</classloc>
		<baseclass>form</baseclass>
		<objname>frmprimarydocview</objname>
		<parent/>
		<properties>Top = 0
Left = 0
Height = 472
Width = 700
DoCreate = .T.
cqryparsid = 
oflt = 
_standarttoolbar = tlbstandart;basetoolbar_v1.vcx
_allowmultiple = .T.
_allowsaveandrestorelayout = .T.
Name = "frmprimarydocview"
cstmsghandler.Name = "cstmsghandler"
cstresizable.Name = "cstresizable"
Img1.Name = "Img1"
</properties>
		<protected/>
		<methods>PROCEDURE Activate
DODEFAULT()
WITH This
	IF .lBeforeFirstShowExecuted
		.GrdDocsView.SetFocus()
		.lBeforeFirstShowExecuted = .f.
	ENDIF
	IF NOT VARTYPE(.oFlt) = [O]
		.cmdFlt.Click()
	ENDIF
ENDWITH
ENDPROC
PROCEDURE Init
*-------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: PRIMARYDOC_VIEW.INIT
* Called by.......: &lt;Sys Event&gt;
* Parameters......: &lt;tnScrFrmID&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Èíèöèàëèçàöèÿ ôîðìû.
*-------------------------------------------------------
LPARAMETERS	tnScrFrmID

*05.05.2004 01:57 -&gt;Ìîäèôèöèðóåì èìÿ ôîðìû ñ ó÷åòîì åå èäåíòèôèêàòîðà
This.Name = This.Name + [_] + ALLTRIM(STR(tnScrFrmID))
*------------------------------------------------------------------------------

*04.05.2004 23:30 -&gt;Âûïîëíèì ìåòîä ðîäèòåëüñêîãî êëàññà
DODEFAULT()
*------------------------------------------------------------------------------

WITH This

*27.12.2004 17:13 -&gt;Âîññòàíîâèì ïàðàìåòðû Grid-îâ
.GrdDocsView.GridLayoutRestore()
*.GrdPart.GridLayoutRestore()
*------------------------------------------------------------------------------

*04.05.2004 23:16 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
PRIVATE	_PARAM	
*------------------------------------------------------------------------------

*04.05.2004 23:13 -&gt;Ñîõðàíèì èäåíòèôèêàòîð ôîðìû â ñâîéñòâå ôîðìû
.nScrFrmID = tnScrFrmID
*------------------------------------------------------------------------------

*******************************************************************************
*Ïîëó÷èì èíôîðìàöèþ î äîêóìåíòàõ, îòîáðàæàåìûõ íà äàííîé ôîðìå.
*******************************************************************************

*04.05.2004 23:17 -&gt;Îòêðîåì Alias ñ èíôîðìàöèåé î äîêóìåíòàõ, îòîáðàæàåìûõ íà äàííîé ôîðìå
_PARAM = .nScrFrmID
***
USE lvFrmTypeInfoByScrFrm IN 0
USE lvScrFrmInfo IN 0
*------------------------------------------------------------------------------

*07.05.2004 17:19 -&gt;Ïðèöåïèì èêîíêó è Caption
IF !ISNULL(lvScrFrmInfo.IcoFileNM) AND !EMPTY(lvScrFrmInfo.IcoFileNM) AND FILE(lvScrFrmInfo.IcoFileNM)
	.Icon = FULLPATH(lvScrFrmInfo.IcoFileNM)
ENDIF
***
.Caption = lvScrFrmInfo.ScrFrmNM
*------------------------------------------------------------------------------

*04.05.2004 23:18 -&gt;Çàïîëíèì çàãîëîâêè êîëîíîê òî÷åê èñïîëíåíèÿ
.GrdDocsView.Column6.Header1.Caption = ALLTRIM(lvFrmTypeInfoByScrFrm.PointEmiRoleNM)
.GrdDocsView.Column7.Header1.Caption = ALLTRIM(lvFrmTypeInfoByScrFrm.PointIspRoleNM)
*------------------------------------------------------------------------------

*04.05.2004 23:17 -&gt;Îòêðîåì Alias ñ èíôîðìàöèåé î äîêóìåíòàõ, îòîáðàæàåìûõ íà äàííîé ôîðìå
USE lvCstFuncAllByScrFrm IN 0
SELECT lvCstFuncAllByScrFrm

*******************************************************************************
*
*******************************************************************************

SELECT lvCstFuncAllByScrFrm
***
IF RECCOUNT([lvCstFuncAllByScrFrm])&gt;0
	*06.12.2004 16:09 -&gt;Óêàçûâàåì ïàíåëü èíñòðóìåíòîâ äëÿ CustomFunction's
	._CustomToolBar = [tlbCustomFunc;PrimaryDoc_v1;PrimaryDoc.app]
	._CustomToolBarInstanceNM = [tlbCustomFunc_] + ALLTRIM(STR(.nScrFrmID))
	._CustomToolBarParamString = ALLTRIM(STR(.nScrFrmID))
	*------------------------------------------------------------------------------
	
	*06.12.2004 16:14 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
	LOCAL	lcLastGrpID
	***
	lcLastGrpID = [NONE]
	*------------------------------------------------------------------------------
	*06.12.2004 16:13 -&gt;Äîáàâëÿåì _HandledCustomMsg
	SCAN
		IF (lcLastGrpID # [NONE]) AND lcLastGrpID # ALLTRIM(lvCstFuncAllByScrFrm.CstFuncGrp)
			.GrdDocsView._HandledCustomMsgList = .GrdDocsView._HandledCustomMsgList + [;]
			.GrdDocsView._HandledCustomMsgPromptList = .GrdDocsView._HandledCustomMsgPromptList + [;\-]
		ENDIF
		***	
		.GrdDocsView._HandledCustomMsgList = .GrdDocsView._HandledCustomMsgList + IIF(EMPTY(.GrdDocsView._HandledCustomMsgList),ALLTRIM(lvCstFuncAllByScrFrm.CstFuncMsg),[;]+ALLTRIM(lvCstFuncAllByScrFrm.CstFuncMsg))
		.GrdDocsView._HandledCustomMsgPromptList = .GrdDocsView._HandledCustomMsgPromptList + IIF(EMPTY(.GrdDocsView._HandledCustomMsgPromptList),ALLTRIM(lvCstFuncAllByScrFrm.CstFuncNM),[;]+ALLTRIM(lvCstFuncAllByScrFrm.CstFuncNM))
		***
		lcLastGrpID = ALLTRIM(CstFuncGrp)
	ENDSCAN
	*------------------------------------------------------------------------------
ENDIF
*------------------------------------------------------------------------------
ENDWITH

************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************
ENDPROC
PROCEDURE Load
*-------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: FRMPRIMARYDOCVIEW.LOAD
* Called by.......: &lt;Sys Event&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Îòêðûòèå ôîðìû (çàãðóçêà äàííûõ)
*-------------------------------------------------------
*04.05.2004 19:46 -&gt;Âûïîëíèì ìåòîä ðîäèòåëüñêîãî êëàññà
DODEFAULT()
*----------------------------------------------------------------------------

*21.04.2004 14:06 -&gt;Îòêðîåì ÁÄ
IF !DBUSED([BASIS])
	OPEN DATABASE BASIS
ENDIF
SET DATABASE TO BASIS	
*------------------------------------------------------------------------------

*******************************************************************************
* Çàãðóçèì ïóñòîé Alias äëÿ ïðîñìîòðà äîêóìåíòîâ                              *
*******************************************************************************

*02.12.2004 16:59 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	lcUniqueName
*------------------------------------------------------------------------------

*21.04.2004 14:05 -&gt;Âûïîëíèì õðàíèìóþ ïðîöåäóðó äëÿ ïîëó÷åíèÿ ïóñòîé òàáëèöû
lcUniqueName = spPrimaryDocView([NODATA])
*------------------------------------------------------------------------------

*21.04.2004 14:08 -&gt;Òåïåðü îòêðîåì äàííûé Alias
USE (lcUniqueName) IN 0 ALIAS PrimaryDocView
CURSORSETPROP([BUFFERING],3,[PrimaryDocView])
*------------------------------------------------------------------------------

************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************
ENDPROC
PROCEDURE setstatus
LPARAMETERS lSetStatus
LOCAL	llResult, oldRecNo, _PARAM
***
*------------------------------------------------------------------------------
IF RECCOUNT('PrimaryDocView')&lt;1
RETU
ENDIF
SELECT PrimaryDocView
oldRecNo = RECNO([PrimaryDocView])

*12.05.2004 01:18 -&gt; Îòêðîåì ñïðàâî÷íèêè
IF USED('lvFrmStatusList')
USE IN lvFrmStatusList
ENDIF
_PARAM = oApp.nUserKod
USE lvFrmStatusList IN 0
SELECT lvFrmStatusList
LOCATE ALL FOR lvFrmStatusList.FrmStatId = lSetStatus AND lvFrmStatusList.IsEnabled

IF !FOUND()
MESSAGEBOX([Âû íå ìîæåòå ðàáîòàòü ñ ýòèì ñòàòóñîì],0+16,[Ðàáîòà çàïðåùåíà])
USE IN lvFrmStatusList
RETU
ENDIF
USE IN lvFrmStatusList
USE lvFrmEdit IN 0 NODATA
CURSORSETPROP([BUFFERING],3,[lvFrmEdit])
SELECT PrimaryDocView
LOCATE ALL FOR PrimaryDocView._Mark

IF FOUND() AND ;
MESSAGEBOX([Ìåíÿòü ñòàòóñ ïîìå÷åíûõ äîêóìåíòîâ?],4+16+256,[Âû óâåðåíû?])=6
	GO top
	SCAN ALL FOR PrimaryDocView._Mark
		_PARAM = PrimaryDocView.FrmId
		REQUERY([lvFrmEdit])
		*20.01.2004 20:24 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
		*------------------------------------------------------------------------------
REPLACE lvFrmEdit.FrmStatusId WITH lSetStatus
		*20.01.2004 20:26 -&gt; Ñîõðàíèì ïåðåäàííûé alias
		IF _spUpdateStampAndUser([lvFrmEdit],oApp.nUserKod)
			llResult = TABLEUPDATE(1,.T.,[lvFrmEdit])
		ELSE
			llResult = .F.
		ENDIF
		SELECT PrimaryDocView
*------------------------------------------------------------------------------
	ENDSCAN
		            ThisForm.GrdDocsView._RSRequery()
ELSE

		SELECT PrimaryDocView
		GO oldRecNo IN PrimaryDocView

		IF PrimaryDocView.StatusID&lt;&gt;lSetStatus  AND  ;
		           MESSAGEBOX([Ìåíÿòü ñòàòóñ äîêóìåíòà?],4+16+256,[Âû óâåðåíû?])=6
		
				_PARAM = PrimaryDocView.FrmId
				REQUERY([lvFrmEdit])
				*20.01.2004 20:24 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
				*------------------------------------------------------------------------------
		        REPLACE lvFrmEdit.FrmStatusId WITH lSetStatus
				*20.01.2004 20:26 -&gt; Ñîõðàíèì ïåðåäàííûé alias
				IF _spUpdateStampAndUser([lvFrmEdit],oApp.nUserKod)
					llResult = TABLEUPDATE(1,.T.,[lvFrmEdit])
		            ThisForm.GrdDocsView._RSRequeryOne(_PARAM ,.T.)
				ELSE
					llResult = .F.
				ENDIF
				*------------------------------------------------------------------------------

		ENDIF

ENDIF

USE IN lvFrmEdit

SELECT PrimaryDocView
GO oldRecNo IN PrimaryDocView
ENDPROC
PROCEDURE totalinfo
*------------------------------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: FRMPRIMARYDOCVIEW.TOTALINFO
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Ðàñ÷åò ñóìì ïî äîêóìåíòàì
*------------------------------------------------------------------------------

*10.10.2005 16:16 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL   lnCount, ;
		lnSum, ;
		lnVatSum,;
		lnMCount, ;
		lnMSum, ;
		lnMVatSum,;
		lnOldRecno,;
		lcDispStr
		
lnOldRecno = RECNO('PrimaryDocView')
*------------------------------------------------------------------------------

*19.08.2005 17:18 -&gt;Ïîäñ÷èòàåì ñóììû âñåõ äîêóìåíòîâ â âûáîðêå
SELECT ;
	COUNT(FrmSum)	AS Count,;
	SUM(FrmSum*FrmSign)		AS Sum,;
	SUM(FrmVATSum*FrmSign)	AS VatSum ;
FROM PrimaryDocView ;
INTO CURSOR curTotalInfo
***
lnCount		= curTotalInfo.Count
lnSum		= curTotalInfo.Sum
lnVatSum	= curTotalInfo.VatSum
***
USE IN IIF(USED([curTotalInfo]),[curTotalInfo],0)
*------------------------------------------------------------------------------
*03.09.2005 09:17 -&gt;Îáíîâèì ñ÷¸ò÷èêè
*!*	ThisForm.cntSum.txtDocumentCount.Value  = lnCount
*!*	ThisForm.cntSum.txtDocumentSum.Value	= lnSum
*!*	ThisForm.cntSum.txtDocumentVatSum.Value	= lnVatSum
lcDispStr =   'Âûáðàíî Äîêóìåíòîâ:     '+ALLTRIM(STR(lnCount,14,0))+;
'    íà Ñóììó:     '+ ALLTRIM(STR(lnSum,14,2))+;
'    â ò.÷. ÍÄÑ:     '+ALLTRIM(STR(lnVatSum,14,2))
*------------------------------------------------------------------------------
*15.01.2006 17:18 -&gt;Ïîäñ÷èòàåì ñóììû ïîìå÷åíûõ äîêóìåíòîâ â âûáîðêå
SELECT PrimaryDocView
LOCATE FOR _mark
IF FOUND()
	SELECT ;
		COUNT(FrmSum)	AS Count,;
		SUM(FrmSum*FrmSign)		AS Sum,;
		SUM(FrmVATSum*FrmSign)	AS VatSum ;
	FROM PrimaryDocView WHERE _mark ;
	INTO CURSOR curTotalInfo
	***
	lnMCount		= curTotalInfo.Count
	lnMSum		= curTotalInfo.Sum
	lnMVatSum	= curTotalInfo.VatSum
	***
lcDispStr ='Âûáðàíî Äîêóìåíòîâ (ïîìå÷åíî):     '+ALLTRIM(STR(lnCount,14,0))+'  ('+ALLTRIM(STR(lnMCount,14,0))+;
')    íà Ñóììó:     '+ ALLTRIM(STR(lnSum,14,2))+'  ('+ALLTRIM(STR(lnMSum,14,2))+;
')    â ò.÷. ÍÄÑ:     '+ALLTRIM(STR(lnVatSum,14,2))+'  ('+ALLTRIM(STR(lnMVatSum,14,2))+')'
	USE IN IIF(USED([curTotalInfo]),[curTotalInfo],0)
	*------------------------------------------------------------------------------
*!*		ThisForm.cntSum.txtDocumentCountMark.Value  = lnMCount
*!*		ThisForm.cntSum.txtDocumentSumMark.Value	= lnMSum
*!*		ThisForm.cntSum.txtDocumentVatSumMark.Value	= lnMVatSum
*!*		*------------------------------------------------------------------------------
*!*		ThisForm.cntSum.txtDocumentCountMark.Visible  = .t.
*!*		ThisForm.cntSum.txtDocumentSumMark.Visible    = .t.
*!*		ThisForm.cntSum.txtDocumentVatSumMark.Visible = .t.
	*------------------------------------------------------------------------------
ELSE
*!*		ThisForm.cntSum.txtDocumentCountMark.Visible  = .f.
*!*		ThisForm.cntSum.txtDocumentSumMark.Visible    = .f.
*!*		ThisForm.cntSum.txtDocumentVatSumMark.Visible = .f.
	*------------------------------------------------------------------------------
ENDIF
ThisForm.cntSum.txtDocumentCount.Value  = lcDispStr
SELECT PrimaryDocView

IF lnOldRecno&gt;RECCOUNT('PrimaryDocView')
IF RECCOUNT('PrimaryDocView')=0
RETURN
ENDIF
GO RECCOUNT('PrimaryDocView')
ELSE
GO lnOldRecno
ENDIF
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE Unload
*-------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: FRMPRIMARYDOCVIEW.UNLOAD
* Called by.......: &lt;Sys Event&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: &lt;sysevent&gt; Âûãðóçêà ôîðìû
*-------------------------------------------------------

*04.05.2004 19:46 -&gt;Âûïîëíèì ìåòîä ðîäèòåëüñêîãî êëàññà
DODEFAULT()
*----------------------------------------------------------------------------

*****************************************************************************
* Çàêðîåì Alias äëÿ ïðîñìîòðà äîêóìåíòîâ è óäàëèì âðåìåííóþ òàáëèöó         *
*****************************************************************************

*27.05.2004 17:57 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	lcUniqueFilePath
*------------------------------------------------------------------------------

*27.05.2004 17:53 -&gt;Çàêðîåì Alias è óäàëèì âðåìåííóþ òàáëèöó
lcUniqueFilePath = DBF([PrimaryDocView])
***
USE IN PrimaryDocView
***
IF FILE(lcUniqueFilePath)
	ERASE (lcUniqueFilePath)
ENDIF
*------------------------------------------------------------------------------

************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************


ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1>Class</reserved1>
		<reserved2>16</reserved2>
		<reserved3>nscrfrmid &lt;prtected/runtime&gt; Èäåíòèôèêàòîð ýêðàííîé ôîðìû.
cqryparsid
oflt
*totalinfo 
*setstatus Óñòàíàâëèâàåì ñòàòóñ ó äîêóìåíòà èëè ó ïîìå÷åíûõ äîêóìåíòîâ
</reserved3>
		<reserved4/>
		<reserved5/>
		<reserved6>Pixels</reserved6>
		<reserved7/>
		<reserved8>..\include\qryparparobjtypes.h</reserved8>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_R020K4VL1</uniqueid>
		<timestamp>959601839</timestamp>
		<class>cmd</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>CmdFlt</objname>
		<parent>frmprimarydocview</parent>
		<properties>Top = 441
Left = 588
Caption = "Ôèëüòð"
ZOrderSet = 3
Name = "CmdFlt"
</properties>
		<protected/>
		<methods>PROCEDURE Click
* Ñîçäàåì îáúåêò


WITH ThisForm
IF NOT VARTYPE(.oFlt) = [O]
		.oFlt = oApp.CREATEOBJECT([frmFiltr;primarydoc_v1.vcx;primarydoc.app],.nScrFrmId)
ENDIF

.oFlt.Hide()
.oFlt.Show(1)
llOperateResult  = .oFlt.uRetVal
.oFlt.cntcancelsavehandled1.cmdCancel.Enabled = .F.
.oFlt.cntcancelsavehandled1.cmdOk.Enabled = .F.
.oFlt.lblServer.Visible= .T.
.oFlt.Show(2)
IF NOT EMPTY(llOperateResult)
	.cQryParSID = llOperateResult
	WAIT WINDOW [Èäåò îáíîâëåíèå äàííûõ. Æäèòå...] NOWAIT NOCLEAR
	SET MESSAGE TO [Èäåò îáíîâëåíèå äàííûõ. Æäèòå...]
	*------------------------------------------------------------------------------
	.GrdDocsView._RSRequery()
	*------------------------------------------------------------------------------

	*11.08.2006 13:02 -&gt;Óáåðåì ñîîáùåíèå
	WAIT CLEAR
	SET MESSAGE TO []
ENDIF
.oFlt.Hide()
ENDWITH
*------------------------------------------------------------------------------

*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1EA0UX0GM</uniqueid>
		<timestamp>953776311</timestamp>
		<class>grdformview</class>
		<classloc>primarydoc_v1.vcx</classloc>
		<baseclass>grid</baseclass>
		<objname>GrdDocsView</objname>
		<parent>frmprimarydocview</parent>
		<properties>Height = 210
Left = 5
ReadOnly = .F.
Top = 5
Width = 692
ZOrderSet = 4
Name = "GrdDocsView"
Column1.Header1.Name = "Header1"
Column1.ReadOnly = .F.
Column1.Name = "Column1"
Column2.Header1.Name = "Header1"
Column2.CurrentControl = ""
Column2.ReadOnly = .F.
Column2.Name = "Column2"
Column3.Header1.Name = "Header1"
Column3.Text1.ReadOnly = .F.
Column3.Text1.Name = "Text1"
Column3.ReadOnly = .F.
Column3.Name = "Column3"
Column4.Header1.Name = "Header1"
Column4.Text1.ReadOnly = .F.
Column4.Text1.Name = "Text1"
Column4.ReadOnly = .F.
Column4.Name = "Column4"
Column5.Header1.Name = "Header1"
Column5.Text1.ReadOnly = .F.
Column5.Text1.Name = "Text1"
Column5.ReadOnly = .F.
Column5.Name = "Column5"
Column6.Header1.Name = "Header1"
Column6.Text1.ReadOnly = .F.
Column6.Text1.Name = "Text1"
Column6.ReadOnly = .F.
Column6.Name = "Column6"
Column7.Header1.Name = "Header1"
Column7.Text1.ReadOnly = .F.
Column7.Text1.Name = "Text1"
Column7.ReadOnly = .F.
Column7.Name = "Column7"
Column8.Header1.Name = "Header1"
Column8.Text1.ReadOnly = .F.
Column8.Text1.Name = "Text1"
Column8.ReadOnly = .F.
Column8.Name = "Column8"
Column9.Header1.Name = "Header1"
Column9.Text1.ReadOnly = .F.
Column9.Text1.Name = "Text1"
Column9.ReadOnly = .F.
Column9.Name = "Column9"
Column10.Header1.Name = "Header1"
Column10.Text1.ReadOnly = .F.
Column10.Text1.Name = "Text1"
Column10.ReadOnly = .F.
Column10.Name = "Column10"
COLUMN11.Header1.Name = "Header1"
COLUMN11.Text1.ReadOnly = .F.
COLUMN11.Text1.Name = "Text1"
COLUMN11.ReadOnly = .F.
COLUMN11.Name = "COLUMN11"
</properties>
		<protected/>
		<methods>PROCEDURE _rsrequery
*19.08.2005 17:17 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	lcOldAlias, ;
		lcOldTalk, ;
		lnCount, ;
		lnSum, ;
		lnVatSum
***
lcOldAlias = ALIAS()
lcOldTalk  = SET([TALK])
***
SET TALK OFF
*------------------------------------------------------------------------------


*19.08.2005 17:16 -&gt;Âûïîëíèì ìåòîä ðîäèòåëüñêîãî êëàññà
DODEFAULT()
*------------------------------------------------------------------------------

*19.08.2005 17:18 -&gt;Ïîäñ÷èòàåì ñóììû
ThisForm.TotalInfo()
*------------------------------------------------------------------------------
*19.08.2005 17:22 -&gt;Âîññòàíîâèì íàñòðîéêè
SET TALK &amp;lcOldTalk
*------------------------------------------------------------------------------

*19.08.2005 17:23 -&gt;Âîññòàíîâèì òåêóùèé Alias
*!*	IF !EMPTY(lcOldAlias) AND USED(lcOldAlias) AND lcOldAlias#ALIAS()
*!*		SELECT(lcOldAlias)
*!*	ENDIF
*------------------------------------------------------------------------------
SELECT PrimaryDocView
*this.Refresh()
*this.refreshruntimeprops()
*this.refreshrsstate()
*this.SetFocus()
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************

ENDPROC
PROCEDURE _rsrequeryone
LPARAMETERS tnFrmID,tlNoRefreshRelatedObjects

*19.08.2005 17:16 -&gt;Âûïîëíèì ìåòîä ðîäèòåëüñêîãî êëàññà
DODEFAULT(tnFrmID,tlNoRefreshRelatedObjects)
*------------------------------------------------------------------------------

*19.08.2005 17:17 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	lcOldAlias, ;
		lcOldTalk, ;
		lnCount, ;
		lnSum, ;
		lnVatSum
***
lcOldAlias = ALIAS()
lcOldTalk  = SET([TALK])
***
SET TALK OFF
*------------------------------------------------------------------------------

*19.08.2005 17:18 -&gt;Ïîäñ÷èòàåì ñóììû
*ThisForm.TotalInfo()
*------------------------------------------------------------------------------

*19.08.2005 17:22 -&gt;Âîññòàíîâèì íàñòðîéêè
SET TALK &amp;lcOldTalk
*------------------------------------------------------------------------------

*19.08.2005 17:23 -&gt;Âîññòàíîâèì òåêóùèé Alias
IF !EMPTY(lcOldAlias) AND USED(lcOldAlias) AND lcOldAlias#ALIAS()
	SELECT(lcOldAlias)
ENDIF
*------------------------------------------------------------------------------

*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************

ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1EA0UX0GN</uniqueid>
		<timestamp>0</timestamp>
		<class>txtgrd</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>Text1</objname>
		<parent>frmprimarydocview.GrdDocsView.Column1</parent>
		<properties>BorderStyle = 0
Margin = 0
ReadOnly = .F.
ForeColor = 0,0,0
BackColor = 255,255,255
Name = "Text1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1ON0OZRBZ</uniqueid>
		<timestamp>959601839</timestamp>
		<class>cntfrmstatusinfo</class>
		<classloc>primarydoc_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>Cntfrmstatusinfo1</objname>
		<parent>frmprimarydocview</parent>
		<properties>Top = 440
Left = 5
ZOrderSet = 6
Name = "Cntfrmstatusinfo1"
ShpFrmStatusInfo.Name = "ShpFrmStatusInfo"
lblStatusID.Top = 5
lblStatusID.Name = "lblStatusID"
shpStatusID1.Top = 5
shpStatusID1.Left = 151
shpStatusID1.Height = 17
shpStatusID1.Width = 81
shpStatusID1.Name = "shpStatusID1"
lblStatusID1.AutoSize = .F.
lblStatusID1.FontBold = .T.
lblStatusID1.Alignment = 2
lblStatusID1.BackStyle = 0
lblStatusID1.Left = 151
lblStatusID1.Top = 5
lblStatusID1.Width = 81
lblStatusID1.Name = "lblStatusID1"
shpStatusID2.Top = 5
shpStatusID2.Left = 240
shpStatusID2.Width = 81
shpStatusID2.Name = "shpStatusID2"
lblStatusID2.AutoSize = .F.
lblStatusID2.FontBold = .T.
lblStatusID2.Alignment = 2
lblStatusID2.BackStyle = 0
lblStatusID2.Left = 240
lblStatusID2.Top = 5
lblStatusID2.Width = 81
lblStatusID2.Name = "lblStatusID2"
shpStatusID3.Top = 5
shpStatusID3.Left = 329
shpStatusID3.Width = 81
shpStatusID3.Name = "shpStatusID3"
lblStatusID3.AutoSize = .F.
lblStatusID3.FontBold = .T.
lblStatusID3.Alignment = 2
lblStatusID3.BackStyle = 0
lblStatusID3.Left = 329
lblStatusID3.Top = 5
lblStatusID3.Width = 81
lblStatusID3.Name = "lblStatusID3"
shpStatusID4.Left = 418
shpStatusID4.Width = 81
shpStatusID4.Name = "shpStatusID4"
lblStatusID4.AutoSize = .F.
lblStatusID4.FontBold = .T.
lblStatusID4.Alignment = 2
lblStatusID4.BackStyle = 0
lblStatusID4.Left = 418
lblStatusID4.Top = 5
lblStatusID4.Width = 81
lblStatusID4.Name = "lblStatusID4"
</properties>
		<protected/>
		<methods>PROCEDURE lblStatusID1.Click
thisform.setstatus(1)
ENDPROC
PROCEDURE lblStatusID2.Click
thisform.setstatus(2)
ENDPROC
PROCEDURE lblStatusID3.Click
thisform.setstatus(3)
ENDPROC
PROCEDURE lblStatusID4.Click
thisform.setstatus(4)
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1LH11FMQ9</uniqueid>
		<timestamp>0</timestamp>
		<class>math</class>
		<classloc>math_v1.vcx</classloc>
		<baseclass>custom</baseclass>
		<objname>math</objname>
		<parent>frmprimarydocview</parent>
		<properties>Top = 1
Left = 49
Name = "math"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18I0M4ORT</uniqueid>
		<timestamp>959601839</timestamp>
		<class>cnt</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>cntSum</objname>
		<parent>frmprimarydocview</parent>
		<properties>Top = 216
Left = 12
Width = 684
Height = 20
BorderWidth = 0
ZOrderSet = 7
Name = "cntSum"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_R020K4VL1</uniqueid>
		<timestamp>959601839</timestamp>
		<class>shp</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>shape</baseclass>
		<objname>Shp2</objname>
		<parent>frmprimarydocview.cntSum</parent>
		<properties>Top = 1
Left = 0
Height = 31
Width = 458
Enabled = .F.
Visible = .F.
SpecialEffect = 0
ZOrderSet = 0
Name = "Shp2"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>959601839</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblDocumentCountCaption</objname>
		<parent>frmprimarydocview.cntSum</parent>
		<properties>Caption = "Äîêóìåíòîâ:"
Enabled = .F.
Height = 17
Left = 4
Top = 11
Visible = .F.
ZOrderSet = 1
Name = "lblDocumentCountCaption"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18I0M4ORT</uniqueid>
		<timestamp>924450866</timestamp>
		<class>txt</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>txtDocumentCount</objname>
		<parent>frmprimarydocview.cntSum</parent>
		<properties>FontBold = .T.
FontSize = 8
Alignment = 1
Value =  
Enabled = .F.
Height = 22
InputMask = ""
Left = 2
SpecialEffect = 0
Top = -3
Width = 682
DisabledForeColor = 0,0,0
ZOrderSet = 3
NullDisplay = "â ýòîì çàïðîñå äîêóìåíòîâ íåò"
Name = "txtDocumentCount"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1PL11LKXR</uniqueid>
		<timestamp>924433896</timestamp>
		<class>txt</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>txtDocumentVatSumMark</objname>
		<parent>frmprimarydocview.cntSum</parent>
		<properties>FontSize = 8
Alignment = 1
BorderStyle = 0
Value = 0.00
Enabled = .F.
Height = 17
InputMask = "999 999 999 999.99"
Left = 375
SpecialEffect = 0
Top = 14
Visible = .F.
Width = 83
DisabledForeColor = 0,0,0
ZOrderSet = 9
NullDisplay = " "
Name = "txtDocumentVatSumMark"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_R020K4VL1</uniqueid>
		<timestamp>924433896</timestamp>
		<class>txt</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>txtDocumentSum</objname>
		<parent>frmprimarydocview.cntSum</parent>
		<properties>FontSize = 8
Alignment = 1
BorderStyle = 0
Value = 0.00
Enabled = .F.
Height = 17
InputMask = "999 999 999 999.99"
Left = 204
SpecialEffect = 0
Top = 13
Visible = .F.
Width = 122
DisabledForeColor = 0,0,0
ZOrderSet = 5
NullDisplay = " "
Name = "txtDocumentSum"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>924433896</timestamp>
		<class>txt</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>txtDocumentVatSum</objname>
		<parent>frmprimarydocview.cntSum</parent>
		<properties>FontSize = 8
Alignment = 1
BorderStyle = 0
Value = 0.00
Enabled = .F.
Height = 17
InputMask = "999 999 999 999.99"
Left = 336
SpecialEffect = 0
Top = 13
Visible = .F.
Width = 122
DisabledForeColor = 0,0,0
ZOrderSet = 6
NullDisplay = " "
Name = "txtDocumentVatSum"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1PL11LKXP</uniqueid>
		<timestamp>924433896</timestamp>
		<class>txt</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>txtDocumentCountMark</objname>
		<parent>frmprimarydocview.cntSum</parent>
		<properties>FontSize = 8
Alignment = 1
BorderStyle = 0
Value = 0
Enabled = .F.
Height = 17
InputMask = "999 999"
Left = 124
SpecialEffect = 0
Top = 14
Visible = .F.
Width = 86
DisabledForeColor = 0,0,0
ZOrderSet = 7
NullDisplay = "â ýòîì çàïðîñå äîêóìåíòîâ íåò"
Name = "txtDocumentCountMark"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1PL12I2J8</uniqueid>
		<timestamp>959601839</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>Lbl1</objname>
		<parent>frmprimarydocview.cntSum</parent>
		<properties>Caption = "ïîìå÷åíî:"
Enabled = .F.
Height = 17
Left = 14
Top = 14
Visible = .F.
Width = 62
ZOrderSet = 10
Name = "Lbl1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1PL11LKXQ</uniqueid>
		<timestamp>924433896</timestamp>
		<class>txt</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>txtDocumentSumMark</objname>
		<parent>frmprimarydocview.cntSum</parent>
		<properties>FontSize = 8
Alignment = 1
BorderStyle = 0
Value = 0.00
Enabled = .F.
Height = 17
InputMask = "999 999 999 999.99"
Left = 224
SpecialEffect = 0
Top = 14
Visible = .F.
Width = 102
DisabledForeColor = 0,0,0
ZOrderSet = 8
NullDisplay = " "
Name = "txtDocumentSumMark"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>COMMENT</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>0</timestamp>
		<class/>
		<classloc/>
		<baseclass/>
		<objname>frmprimarydocview</objname>
		<parent/>
		<properties>Arial, 0, 9, 5, 15, 12, 32, 3, 0
Arial, 1, 8, 5, 14, 11, 29, 3, 0
Arial, 0, 8, 5, 14, 11, 29, 3, 0
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1></reserved1>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_25I136UUP</uniqueid>
		<timestamp>959806037</timestamp>
		<class>frmview</class>
		<classloc>baseform_v1.vcx</classloc>
		<baseclass>form</baseclass>
		<objname>frmresuview</objname>
		<parent/>
		<properties>Top = 0
Left = 0
Height = 634
Width = 1082
DoCreate = .T.
Caption = "Ïëàí - ãðàôèê èñïîëüçîâàíèÿ è áðîíèðîâàíèÿ ðåñóðñîâ"
WindowState = 2
nscrfrmid = 0
resuparent = 0
Name = "frmresuview"
cstmsghandler.Name = "cstmsghandler"
cstresizable.Name = "cstresizable"
Img1.Name = "Img1"
</properties>
		<protected/>
		<methods>PROCEDURE Destroy
DODEFAULT()
_VFP.AutoYield = .t.

ENDPROC
PROCEDURE Init
LPARAMETERS	tnScrFrmID

*05.05.2004 01:57 -&gt;Ìîäèôèöèðóåì èìÿ ôîðìû ñ ó÷åòîì åå èäåíòèôèêàòîðà
This.Name = This.Name + [_] + ALLTRIM(STR(tnScrFrmID))
*------------------------------------------------------------------------------

*04.05.2004 23:30 -&gt;Âûïîëíèì ìåòîä ðîäèòåëüñêîãî êëàññà
DODEFAULT()
*------------------------------------------------------------------------------

WITH This

*------------------------------------------------------------------------------

*04.05.2004 23:16 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
PRIVATE	_PARAM	
*------------------------------------------------------------------------------

*04.05.2004 23:13 -&gt;Ñîõðàíèì èäåíòèôèêàòîð ôîðìû â ñâîéñòâå ôîðìû
.nScrFrmID = tnScrFrmID
*------------------------------------------------------------------------------

*******************************************************************************
*Ïîëó÷èì èíôîðìàöèþ î äîêóìåíòàõ, îòîáðàæàåìûõ íà äàííîé ôîðìå.
*******************************************************************************

*04.05.2004 23:17 -&gt;Îòêðîåì Alias ñ èíôîðìàöèåé î äîêóìåíòàõ, îòîáðàæàåìûõ íà äàííîé ôîðìå
_PARAM = .nScrFrmID
***

.resuparent = VAL(oRes.GetParam([SET],[PARENT_RES]))
.g2ANTT1.loaddata()
ENDWITH

************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1>Class</reserved1>
		<reserved2>13</reserved2>
		<reserved3>nscrfrmid
resuparent Ðîäèòåëü ðåñóðñîâ ïî äåðåâó òîâàðîâ
*addxml äîáàâëÿåì äîï íàñòðîéêè
</reserved3>
		<reserved4/>
		<reserved5/>
		<reserved6>Pixels</reserved6>
		<reserved7>Ïðîñìîòð ðåñóðñîâ ÷åðåç Ãàííòà</reserved7>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_25I139PUX</uniqueid>
		<timestamp>959806037</timestamp>
		<class>g2antt</class>
		<classloc>gannt.vcx</classloc>
		<baseclass>olecontrol</baseclass>
		<objname>G2ANTT1</objname>
		<parent>frmresuview</parent>
		<properties>Top = 0
Left = 1
Height = 600
Width = 1080
dbtablename = Basis!rv_ResursJrn
_handledcustommsglist = Insert_BAR;GUESTIN;PAYORD
_handledcustommsgpromptlist = Âñòàâèòü;Çàñåëèòü ãîñòÿ;Ïðèíÿòü îïëàòó çà ïðîæèâàíèå 
Name = "G2ANTT1"
</properties>
		<protected/>
		<methods>PROCEDURE _add
LPARAMETERS item, datestart, dateend
LOCAL lPartFrmId ,lPartFrmId1 ,tnTvrID,lnMsuID,lnPrice ,_PARAM1,_PARAM2,llResult
WITH this
.Enabled = .F.

		SELECT rv_ResursLst
		LOCATE ALL FOR BarId = item
		IF !FOUND()
RETURN 0
		ENDIF
		*21.09.2009 ïðîâåðÿåì íà çàíÿòîñòü ðåñóðñà â íóæíûé íàì ïåðèîä
			LOCAL	lnSqlExeResult, ;
					llResult
			*------------------------------------------------------------------------------
			*07.04.2008 16:13 -&gt; Êîííåêòèìñÿ ê ÁÄ ÷åðåç ñóùåñòâóþùåå ñîåäèíåíèå
			SET DATABASE TO [BASIS]
			lnConnectHandle = SQLCONNECTBAS([SQLBASISCONNECTION])
			*------------------------------------------------------------------------------
			*13.04.2008 14:01 -&gt; Óñòàíîâèì ñâîéñòâî BatchMode â False, ÷òîáû ïîëó÷àòü ðåçóëüòèðóþùèå âûáîðêè ñ ñåðâåðà ïî î÷åðåäè êîìàíäîé SQLMoreResults
			SQLSETPROP(lnConnectHandle,[BatchMode],.t.)
			*------------------------------------------------------------------------------

			*07.04.2008 16:45 -&gt;
			lnSqlExeResult = 0
			DO WHILE (lnSqlExeResult = 0) AND (lnSqlExeResult # -1)
					lnSqlExeResult = SQLEXEC(lnConnectHandle, ;
						[SET LOCK_TIMEOUT 10000 ] + ;
						[EXECUTE spResUsage ?rv_ResursLst.TvrId,?datestart,?dateend],[RptItog])
			ENDDO
			***
			IF lnSqlExeResult = -1
				spHandleODBCError()
				RETURN 0
			ENDIF
			*------------------------------------------------------------------------------

			*07.04.2006 16:12 -&gt; Äåëàåì äèñêîííåêò: îñâîáîæäàåì ñîåäèíåíèå
			SQLDISCONNECT(lnConnectHandle)
			*------------------------------------------------------------------------------
			IF RECCOUNT([RptItog]) &gt; 0
				= MESSAGEBOX('Æåëàåìûé ïåðèîä óæå çàíÿò:'+CHR(13)+ ;
							 'ñ '+ tTOC(RptItog.UseStart)+' ïî '+ tTOC(RptItog.UseEnd) + CHR(13)+ ;
							 'Äîêóìåíò '+ IIF(RptItog.FrmIsPayed,'ÎÏËÀ×ÅÍ','ÍÅÎÏËÀ×ÅÍ'),64,'Áðîíèðîâàíèå äîáàâèòü íåëüçÿ ...')
				USE IN  RptItog
				RETURN 0
			ENDIF
			USE IN RptItog
		*12.05.2004 03:26 -&gt;Âûïîëíÿåì îïåðàöèþ äîáàâëåíèÿ äîêóìåíòà
luResAdding = oMgrPD.Operate([FORM],[ADDSCHET],ThisForm.nScrFrmID, DATETIME(), DATETIME())
.Enabled = .T.
SET DATABASE TO BASIS
IF TYPE('luResAdding')='L'
RETURN 0
ENDIF
		lPartFrmId1  = luResAdding

		SELECT rv_ResursLst
		SCATTER MEMVAR
		** ñ÷èòàåì âðåìÿ â ìèíóòàõ
		nTime = (dateend - datestart)
		IF TYPE('datestart')='T'
**		   nTime = nTime /60 /60  &amp;&amp; ïðèâåëè ê ÷àñàì
		   nTime = nTime /60 /60/24  &amp;&amp; ïðèâåëè ê ñóòêàì
		  ELSE
**		   nTime  = nTime * 24  &amp;&amp; ïðèâåëè ê ÷àñàì
		   nTime  = nTime   &amp;&amp; ïðèâåëè ê ñóòêàì
		ENDIF
		** îïðåäåëÿåì êîä óñëóãè è öåíó
		_PARAM1 = m.ServID &amp;&amp;22023 &amp;&amp;tnTvrID
		_PARAM2 = 1
		***
		USE lvPriceTvr IN 0

		USE lvOrderTvrEdit IN 0 NODATA
		APPEND BLANK IN lvOrderTvrEdit
		REPLACE ;
			FrmID WITH luResAdding  , ;
			TvrId WITH m.ServID, ; &amp;&amp; (ïðîæèâàíèå â íîìåðå)
			TvrIDCalc WITH m.TvrId, ; &amp;&amp;(êîä ðåñóðñà)
			MsuId WITH m.MsuID, ;
			TvrQnt WITH nTime  , ;
			TvrPrcSale WITH lvPriceTvr.Price ;
		IN lvOrderTvrEdit
		llResult = TABLEUPDATE(1,.T.,[lvOrderTvrEdit])
		*------------------------------------------------------------------------------
		
		IF llResult
			lPartFrmId = spGetLastIncrementedID([lvOrderTvrEdit])
		ELSE
		   RETURN 0
		ENDIF
USE rv_JurnalUseEdit IN 0 NODATA
		APPEND BLANK IN rv_JurnalUseEdit
		REPLACE ;
			FrmPartTvrId WITH lPartFrmId , ;
			UseStart WITH datestart, ;
			UseEnd WITH dateend, ;
			UsePlan WITH .t. ;
		IN rv_JurnalUseEdit
		llResult = TABLEUPDATE(1,.T.,[rv_JurnalUseEdit])
		IF llResult
			lPartFrmId = spGetLastIncrementedID([rv_JurnalUseEdit])
			.lnbarid= lPartFrmId
**	    	INSERT INTO rv_ResursJrn (JrnUseId,BarId, FrmId) VALUES (lPartFrmId,item,lPartFrmId1 )
	    	INSERT INTO rv_ResursJrn (JrnUseId,ItemId, FrmId) VALUES (lPartFrmId,item,luResAdding)
		ELSE
		   RETURN 0
		ENDIF
ENDWITH 		
RETURN lPartFrmId
ENDPROC
PROCEDURE _dele
WITH this
	SELECT rv_ResursJrn
	LOCATE ALL FOR rv_ResursJrn.JrnUseId = .lnbarid
	IF FOUND() AND 	(rv_ResursJrn.FrmStatusI&lt;3 AND !rv_ResursJrn.FrmIsPayed)
	   luRes = oMgrPD.Operate([FORM],[DELE],rv_ResursJrn.FrmID)
	  IF luRes
	   .Items.RemoveBar(.lnitemid , .lnbarid)
	  ENDIF
ENDIF
ENDWITH

ENDPROC
PROCEDURE _edit
*LPARAMETERS lnJrnUseId, h
LOCAL luRes, lstr, datestart, dateend,stringWk,test1
luResAdding  =.f.
SELECT rv_ResursJrn
LOCATE ALL FOR rv_ResursJrn.JrnUseId = .lnbarid
IF FOUND() AND 	!rv_ResursJrn.FrmIsPayed
PUBLIC barCltName, typeNewFrm
barCltName  =''
this.Enabled = .F.
luRes = oMgrPD.Operate([FORM],[EDIT],rv_ResursJrn.FrmID)
this.Enabled = .t.
IF luRes
REPLACE rv_ResursJrn.FrmStatusI WITH typeNewFrm NEXT 1 IN rv_ResursJrn
this.BeginUpdate()
WITH this.Items
LOCAL h, lnJrnUseId
h = rv_ResursJrn.ItemId
lnJrnUseId = rv_ResursJrn.JrnUseId
datestart = .ItemBar(h, lnJrnUseId,1)
dateend   = .ItemBar(h, lnJrnUseId,2)
.RemoveBar(h, lnJrnUseId)
		                .AddBar( h, this.namebar(typeNewFrm,rv_ResursJrn.FrmIsPayed) , datestart, dateend, lnJrnUseId, ALLTRIM(barCltName) )
stringWk = "Items.ItemBar("+ ALLTRIM(STR(h,10,0))+" , "+ ALLTRIM(STR(lnJrnUseId,10,0))+" , 12) =`" +IIF(rv_ResursJrn.FrmIsPayed,"1","0")+"`"   &amp;&amp; exBarPercent
this.executeTemplate(stringWk)
					    stringWk = "Items.ItemBar("+ ALLTRIM(STR(h,16,0))+" , "+ ALLTRIM(STR(lnJrnUseId,10,0))+" ,  6) = `" ;
					    						   +  "Çàñåëåíèå:"+ IIF(VARTYPE(datestart)='C',datestart,TTOC(NVL(datestart,{})))+ ;
					    							  "        Âûåçä:    "+ IIF(VARTYPE(dateend)='C',dateend,TTOC(NVL(dateend,{})))+"`"    &amp;&amp; exBarToolTip
					    This.ExecuteTemplate(stringWk)
		  ENDWITH
this.EndUpdate()
ENDIF
RELEASE barCltName, typeNewFrm
ENDIF
RETURN luRes

ENDPROC
PROCEDURE _handlecustommsg
LPARAMETERS tcMsg
DODEFAULT(tcMsg)
DO CASE
	CASE tcMsg = [GUESTIN]
		*16.09.2007 18:10 -&gt;Ìåíÿåì ñòàòóñ íà 3 - ãîñòü çàñåëåí
		LOCAL lnFrmID, lRetVal, lnUserClt
		lRetVal  = .f.
		SELECT rv_ResursJrn
		LOCATE ALL FOR rv_ResursJrn.JrnUseId = this.lnbarid
		
		IF FOUND() AND rv_ResursJrn.FrmStatusI &lt; 3 AND MESSAGEBOX('Çàñåëÿòü ãîñòÿ â íîìåð?',4+64+256,'Èçìåíåíèå äàííûõ î ïðîæèâàíèè ...')=6
			lnFrmID = rv_ResursJrn.FrmID
			_PARAM = lnFrmID
			lnUserClt = spUserClt()
			USE lvFrmEdit IN 0
			CURSORSETPROP([BUFFERING],3,[lvFrmEdit])
			REPLACE FrmStatusID WITH 3, ExecEmiCltID WITH lnUserClt IN lvFrmEdit
			**oApp.nUserKod
			lRetVal = TABLEUPDATE(1,.T.,[lvFrmEdit])
			USE IN lvFrmEdit
		ENDIF
		*------------------------------------------------------------------------------
		IF lRetVal
REPLACE rv_ResursJrn.FrmStatusI  WITH 3 NEXT 1 IN rv_ResursJrn
this.BeginUpdate()
WITH this.Items
LOCAL h, lnJrnUseId
h = rv_ResursJrn.ItemId
lnJrnUseId = rv_ResursJrn.JrnUseId
datestart = .ItemBar(h, lnJrnUseId,1)
dateend   = .ItemBar(h, lnJrnUseId,2)
.RemoveBar(h, lnJrnUseId)
		                .AddBar( h, this.namebar(3,rv_ResursJrn.FrmIsPayed) , datestart, dateend, lnJrnUseId, ALLTRIM(rv_ResursJrn.CltNm) )
stringWk = "Items.ItemBar("+ ALLTRIM(STR(h,10,0))+" , "+ ALLTRIM(STR(lnJrnUseId,10,0))+" , 12) =`" ;
						   +IIF(rv_ResursJrn.FrmIsPayed,"1","0")+"`"   &amp;&amp; exBarPercent
this.executeTemplate(stringWk)
					    stringWk = "Items.ItemBar("+ ALLTRIM(STR(h,16,0))+" , "+ ALLTRIM(STR(lnJrnUseId,10,0))+" ,  6) = `" ;
					    						   +  "Çàñåëåíèå:"+ IIF(VARTYPE(datestart)='C',datestart,TTOC(NVL(datestart,{})))+ ;
													  "        Âûåçä:    "+ IIF(VARTYPE(dateend)='C',dateend,TTOC(NVL(dateend,{})))+"`"    &amp;&amp; exBarToolTip
					    This.ExecuteTemplate(stringWk)
		  ENDWITH
this.EndUpdate()
		ENDIF
	CASE tcMsg = [PAYORD]
LOCAL nPayVarNum
nPayVarNum = ALLT(oRes.GetParam([RST],[PAYTYPE]))
		*16.09.2007 18:10 -&gt;Îïëàòà ñ÷åòà êëèåíòà
		LOCAL lnFrmID
		SELECT rv_ResursJrn
		LOCATE ALL FOR rv_ResursJrn.JrnUseId = this.lnbarid
		IF FOUND()
			lnFrmID = rv_ResursJrn.FrmID
			lRetVal = oApp.DoModalFormRetValObj([FrmPayment;rst_v1.vcx],lnFrmID  ,nPayVarNum,1 ,0)
		*------------------------------------------------------------------------------
		IF lRetVal
REPLACE rv_ResursJrn.FrmIsPayed WITH lRetVal NEXT 1 IN rv_ResursJrn
this.BeginUpdate()
WITH this.Items
				        stringWk = "Items.ItemBar("+ ALLTRIM(STR(rv_ResursJrn.ItemId ,10,0))+" , "+ ALLTRIM(STR(rv_ResursJrn.JrnUseId,10,0))+" , 12) = 1" &amp;&amp; exBarPercent
				        This.ExecuteTemplate(stringWk)
		  ENDWITH
this.EndUpdate()
ENDIF
		ENDIF
ENDCASE


ENDPROC
PROCEDURE _info
WITH this
	SELECT rv_ResursJrn
	LOCATE ALL FOR rv_ResursJrn.JrnUseId = .lnbarid
	IF FOUND()
	   luRes = oMgrPD.Operate([FORM],[INFO],rv_ResursJrn.FrmID)
ENDIF
ENDWITH

ENDPROC
PROCEDURE addxml
LOCAL s
WITH this
.BeginUpdate
.SingleSel = .F.
s = "gBJJgBAIDAAGAAEAAQhYAf8Pf4hh0QihCJo2AEZjQAjEZFEaIEaEEaAIAkcbk0olUrlktl0vmExmUzmk1m03nE5nU7nk9n0/oFBoVDolFo1HpFJpVLplNp1PqFRqVTq"
s=s+"lVq1XrFZrVbrldr1fsFhsVjslls1ntFptVrtltt1vuFxuVzul1u13vF5vV7vl9v1BAmBhOCwMKwuDw2ExWJxmIx2HyGLx+SyONyuTy2UzWZzmYz2X0Gbx1kUigUAAMwzG"
s=s+"eo1Ws1ZV2Go1IAL+1ACZMxm2+52W63Ov2Op1fC13F0un4nJ1vE2BV2XD2e/4vK4fL63V1bMTKZ5/d2pf3vh6Xj2ff3e63G683S5vF0mmAD4+Xx+bA+wAeP5/H6a/9+h8P2"
s=s+"eIAGZAiHHYZkDQQ7TuH/Ap4GUUzjPgiCJn+AD7GBAMNQJBD8wFDwAFlEUExJBaHQdCDixM+UARYABuxg/8ZQ5DUQRpEEbQKf8DxPBDiPe08KRdDEZHVIwANU1YRSWAALSdJ"
s=s+"snxpHcFO3HsrOI48Ky1IkKQpERZAA9sjHVC77ynEsqwbBE1RVNKHgAQ04yQ1skvDOJDRkZc9ABJYRT5Jk+z/P0pR49sgQHAsaUVApx0aAD+mvOclSZIkYG7MsMxNTUqyw+F"
s=s+"FwVRNQwRSwACFUwADvVNHv9IlNu5V02u5UjzVMIUQxHMYABzXdUVVRpxgBXM60DX9MQHTjWrJE0uzfGkXRdXNa0FYMjxBM8vxJM7iWXN8KSlbs31zWlT1Ja0eWxM9tNbbkL"
s=s+"UhY1mQtaU62hI9hyZUl0x5H6x3ZLVvwtekyWlYlHXNBF0R5dTszdC1vR1cELVJO9JABLODVvMF8x9deGS1fE3yJXYc4pgOKUDfGE31ZN+Srd13U/VdI1y9uCWBPRl2NE1sW"
s=s+"xbeWv9l2f6DSNSXdkTaNtd1WyrncR567mgaHGJLanMLY2laVc2FOjW1JpTuX2sV0YhmMtQpXLct1msZRBLmU421exYbN93XgAFixA9s61ztkzbc4u47LHmb6O8ExSPs0j6N"
s=s+"Otyv1hSy8BCm6bHs7eUDXMXb5DOLuJyG5v9CjzWLCkszrqZLS2+/NtbwEQdFN9sPbLPEYFU/Fxj1TV2U7WyahslSdM8O9SPGkieK+8iW33fe1JXNUjvqrnWlo1A2lUnieO+"
s=s+"/k1lGMs7RjDwvNiciedUtT6Nd3B+RlaxQJBmx8luULWLLPqxjZ769S/UQe1svPUi6M+D5DzN5a2athyHX9H6f43VIjE3yMTbqrlbB5l3OYgU+ssL7X+rtc+2Nj7AD5vwRkk"
s=s+"SCyAoFvvg6/FaiZIIuHbGv9DRxEuQeRjC2FkKH/pvRcs4+b+4MFgH+mmISDIhrHN0dqI5uIjRLGYbOJp2YnRRihAaIsQYiRXIdFVKsSImRKiegOKUYIpxZiwg2MsWokxpjF"
s=s+"Gs7UY4vxvNmWSKwAEHoRjrHRFMZkToMd3HqOcf4lRBN1IKLMg4vGzjnHeRUeY+yNj5GeIkhpJSFkpF+RKKZFoRj9I6PcZJKSElBIGUUR44ljkBJCT0gI1RclZIeN0YZLRal"
s=s+"RKqLsq5XRslhIiWUqY0S1l9HCV8YyyEWB8SuYpHiQEiJIAAkpKJmk4QoX8pJFE3zSKCQEA="
.Images(s)
s="gBJJgBAICAAGAAEAAQhYAf8Pf4hh0QihCJo2AEZjQAjEZFEaIEaEEaAIAkcbk0olUrlktl0vmExmUzmk1m03nE5nU7nk9n0/oFBoVDolFo1HpFJpVLplNp1PqFRqVTqlVq1XrF"
s=s+"ZrVbrldr1fsFhsVjslls1ntFptVrtltt1vuFxuVzul1u13vF5vV7vl9v1/wGBwWDwmFw2HxGJxWLxmNx2PyGRyWTymVy2XzGZzWbzmdz2f0Gh0WjwEWH0r08ekEikgAkso184iG"
s=s+"kicPjcU2+zjW43e6jO8jL+b79X8bfif48bfAffgP43IT8b4XE3O23vW3++2r/6vcjUB"
.Images(s)

*!*		.DrawGridLines = -1
*!*		.BackColor = RGB(255,255,255)
*!*		.MarkSearchColumn = .F.
*!*		.ShowFocusRect = .F.
*!*		.HasLines = .F.
*!*		.Indent = 24
*!*		.DefaultItemHeight = 20
*!*		.AllowChartScrollPage = .T.
*!*		.ScrollPartCaption(2,2048) = "&lt;img&gt;4&lt;/img&gt;"
*!*		.ScrollPartCaption(2,32) = "&lt;img&gt;5&lt;/img&gt;"
*!*		   WITH .VisualAppearance
*!*			.Add(1,"gBFLBCJwBAEHhEJAEGg4BOEIQAAYAQGKIYBkAKBQAGaAoDDMOILQiMQxDPBMKgBBCLIxiGK4DhiGoZQ0HKCRZDeI4DDSNcgjCLIZw8GYCIRjaL5UkPGSZJpmSRwAiWPIpSrLMrgLLMdR1HCBaQiehoaiEMg1CTTVQSCKoYSjBKqarjGbKGoqSozUxNMAggI=")
*!*			.Add(2,"XP: Header 1 1")
*!*		   ENDWITH
*!*				.HTMLPicture("excel") = "gAAAABgYAEAgBEChSohIAC0KFEKEEKIEKgkNhQAAkZjkCgkejshkUjkklk0nlEplUrlRofQSADbMhEABwl8xmYAI0KaoPawANgYYwAeIDIIARE3mU0A08n1AoVEo1IBVDYrjo7NrFQoaoqoAK5+IYAXE3N1iAB2tCcfcwQFosswpsCns/fDVmlBobQm4GHVMi0KJQBBcceE3VAscJ3XgADAAucFgWDwt1ADNVa6bgUtoAcxSxeWxuPyMfAGUjhwfkwGmdQ5kxbXAL/f+jyGByeEjhQzrwEJ1OOy2m20uC3SszpvE/A4m40+6TfLOOqmEZSBCCYAu80jLY35xjPCf/UyU1zocYECGmrxzDOxxKAmOJx2m0aGdOgl4HX7PNkDcsK8iMnQzoNmCOQ4v88rUCI9jlOYxzbv+57Cui4EBIU/jtLwjg1mBBCMjgYjsvIbgjsW20NO2ABIPYFj2RamEYgAW4PnMO4ICQxb6n+UD2DsE0IMfEJ+phFZMAeoYBIVJaOw0kQwPY2wuSK9r3iA+T6PqYD2MTFEIuLACayqzDNG49gyROO4QhkIoACsESKhxKpsTiAB4PYVgOGOjSFAYWShkKEiKkoaChipKpMhOioMUAAAbhEo6NoFP6hgiECj0qAB7Uwjk9T5TQ2A3Ph4A1PhYI+KtBgAcEqj9VdBIqjLTGJKo3BsipVzsWE6TsOEq0mABcz2AFapgAhYqGdliGhKoXUWAB6WJYc+E4HiK2MAFPz6gVroqBznNMZAJz4UwFiEABnXVdd2Xbd133heN5Xnel63oHwo3zfV935ft83gHxAYFgeCYLgxACjgGD4Xg+E3fgOBX9iV84jhWI4IKOI4phGN4Ri2EYxjWM45kePYfgd/ZJkWUY/kuQZJfmWZPi+UZXlWK5nmF9ZvneKj4H2f6DoGh6Fl2UY7hOiaVoWg5do2WZ/hmB5/iekGdoGD6VoGnZDn2A6ZrGg6pruaY9rGlkBoJAa3quoa/om06HuOuZriusbiPm8bOPm6bLhOo4FvOhanfG27tvO071wGt7Jl+PajwWl7fvvHaTvOlbXtW2X6H138huWBblwGDYhhHO6vxGpbv0mI9OZ2wdhoeY9D012cl2PU4LfHXXj0upYGH3ed73/dXt4Pj+R5PkXfHkeH8hXnoF6IAen6voev6XseolnuJW0wBoUA6FAf6IP+iH/oj+gI="
*!*				.HTMLPicture("word") = "gAAAABgYAEAgBEChSohIAC0KFEKEEKIEKgkNhQAAkZjkCgkejshkUjkklk0nlEplUrlRofQSADbMhEABwl8xmYAI0KaoPawANgYYwAeIDIIARE3mU0A08n1AoVEo1IBVDYrjo7NrFQoaoqoAK5+IYAXE3N1iAB2tCcfcwQFosswpsCns/fDVmlBobQm4GHVMi0KPwCDMceE3VAscJ3NQBCYAucFgWDwt1ADNVa6bgUtoAcxSxeWxuPyMfAGUjhwfkwGmdQ5kxa1AL/f+jyGByeEjhQzrwEJ1OOy2m20uC3SszpvE/A4m40+6TfLOOqmEZGBux93mkZbG/OMZ4T/6mSmudDjAgQ01YADDDOxxKAmOJx2m0aGdOgl4HXx/NkDcsK8aMnQzoNmCOQ4v88jUCI9blOYxzbv+57Cui4EBIU/gAO0jg1mBBCMjwYTHvGbgjsW20NQ4SD1hY9cWJhGAAFuD5zDuCAkMW+p/lA9Y7BNCDHoyOB+phDhMAeoYBIVJaOw0kQwPW2wuSK9j3DiID5Po+pgPWxMUQi4sAJrKrMM0bhkqGDQQoqEIZCKAArBEiocSqbE5gAeD1nRNKNIUBhZKGQoSIqKB7KGKkqkyE6KgxQIABuESjo2gVAKGCIQKPSwAHtTKOT4odNjwfqhn4fihgAAaBCrQgAHBKoSHxNU2TImFKAAe8+gohRaTwWE7Twb88VvXKhmJKoYVoFFZAAaEqhdRgABhZligATgeIrY6YVBPyBWwioIOc0wwWYUwFiEABnXVdd2Xbd133heN5Xnel63oHxjXzfV935ft83gHxAYFgeCYLgxAGNgGD4Xg+E3fgOGYjgWHXdiGJX7geKXbi2JYXjV2Ytf2RGNjOFY7hmP3XkOR4xieTZPhpnBbmWaZnm2amdlmSZdnGb59mWYYTmeO5nnWS6BmxAZvgegZPoRnEBmmo5tnei5Zo4W6VpGaYhpuO6fqee6hrV84nluEXVrOf6pqeCX1hGy5doet7UZ2A6ts23axqW+bnrOM7juO0Z9rW65vwOC53tGxbXr24YEH136HiXJ7NfOQ8jtOO8dfeIGNzPGdDheA8/dvG7X0fS3njmOh90F5dZiXX9h13a9t2/a3fHcdn8hXeoF34AeD4ffeL4HjeElnlJW01VIEA6FAf34P9+H/fj+gIA=="

*!*	.SelBackColor = 16777216
*!*	.SelForeColor = RGB(0,0,128)
**'Uncomment it if you are running Windows XP
** .BackColorHeader = 33554432
WITH .Chart
			*!*		.AllowCreateBar = .F.
			*!*		.NonworkingDaysColor = RGB(196,196,128)
			*!*		.NonworkingDaysPattern = 6
			*!*			*!*		.FirstVisibleDate = "Feb 24 2006"
			*!*		.BackColor = RGB(255,255,255)
			*!*		.DrawGridLines = 2
			*!*		WITH .Bars.Add("End")
			*!*			.Pattern = 2
			*!*			.Color = RGB(255,128,128)
			*!*		ENDWITH
	
	
			*!*		exYear         0  Indicates the year. Values: ..., 2001, 2002, 2003, ...
			*!*	    exHalfYear     1  A date between January 1st and June 31 indicates the first half of the year, and from July 1 to December 31, indicates the second half of the year. Values: 1 and 2
			*!*	    exQuarterYear  2  A date between January 1st and March 31 indicates the first quarter of the year, a date between April 1st and June 30 indicates the second quarter of the year, a date between July 1st and September 30 indicates the third quarter of the year, and if a date between October 1st and December 31 indicates the forth quarter of the year. Values: 1, 2, 3 and 4
			*!*	    exMonth       16  Indicates the month. Values: 1 ( January ), 2 ( February ), ..., and 12 ( December ). Use the MonthNames property to specify the name of the months.
			*!*	    exThirdMonth  17  The first ten days in a month indicates the first third of the month, the next 10 days indicates the second third of the month, and the last 10 days in the month indicates the last third of the month. Values: 1, 2 and 3.
			*!*	    exWeek        256  Indicates the week in the year. Values: 1,2,...,53. Use the WeekDays property to specify the name of the days in the week.
			*!*	    exDay         4096  Indicates the day of the date. Values: 1,2,..,31
			*!*	    exHour        65536  Indicates the hour.
			*!*	    exMinute      1048576  Indicates the minute.
			*!*	    exSecond      16777216  Indicates the second.

		.Label(0) = ""  &amp;&amp; exYear
		.Label(1) = ""  &amp;&amp; exHalfYear
		.Label(2) = ""  &amp;&amp; exQuarterYear
		.Label(16) = ""  &amp;&amp; exMonth
		.Label(17) = ""  &amp;&amp; exThirdMonth
*!*		.Label(256) = ""  &amp;&amp; exWeek
*!*		.Label(4096  ) = ""  &amp;&amp; exDay
*!*		.Label(65536  ) = ""  &amp;&amp; exHour
		.Label(1048576) = ""  &amp;&amp; exMinute
		.Label(16777216) = ""  &amp;&amp; exSecond
		*!*		.OverviewBackColor = RGB(255,255,255)
		*!*		.OverviewVisible = .T.
		*!*		.AllowOverviewZoom = 1
	***.OverviewZoomCaption = "Year|  ?Year|  ?Year|&lt;img&gt;3&lt;/img&gt;|Third|&lt;img&gt;2&lt;/img&gt;|&lt;img&gt;1&lt;/img&gt;|Hour|Min|Sec"
	.OverviewZoomCaption =    "Year|1\2Year|1\4Year|&lt;img&gt;11&lt;/img&gt;|Third|&lt;img&gt;11&lt;/img&gt;|&lt;img&gt;10&lt;/img&gt;|&lt;img&gt;9&lt;/img&gt;|Min|Sec"
*!*		.OverviewZoomUnit = 24
ENDWITH
.EndUpdate
ENDWITH


ENDPROC
PROCEDURE BarResize
*** ActiveX Control Event ***
LPARAMETERS item, key
IF this.linload
RETURN .t.
ENDIF
IF !TYPE('key')= 'N'
RETURN .f.
ENDIF
LOCAL  lStart, lEnd, stringWk, lChange
with this.Items
SET DATABASE TO BASIS
_PARAM = key
USE IN SELECT('rv_JurnalUseEdit')
USE rv_JurnalUseEdit IN 0
IF !RECCOUNT('rv_JurnalUseEdit')=1
=MESSAGEBOX('Îøèáî÷íûé êîä îáúåêòà. '+CHR(13)+'Ñîõðàíåíèå íå ïðîèçîøëî ...',0+16, 'Ïðîáëåìà')
RETURN .f.
ENDIF
SELECT rv_ResursJrn
LOCATE FOR rv_ResursJrn.BarId = key
lChange = .f.
lStart = rv_JurnalUseEdit.UseStart
lEnd   = rv_JurnalUseEdit.UseEnd
IF rv_ResursJrn.FrmStatusI&gt;2 OR rv_ResursJrn.FrmIsPayed
=MESSAGEBOX('Äîêóìåíò àêöåïòîâàí èëè îïëà÷åí.'+CHR(13)+'Èçìåíÿòü íåëüçÿ.'+CHR(13)+'Îáðàòèòåñü ê àäìèíèñòðàòîðó.',0+64+4096, 'Íåäîïóñòèìîå äåéñòâèå ...',5000)
ELSE
	     IF MESSAGEBOX('Èçìåíèòü ñðîêè ïðîæèâàíèÿ?',4+64+256,'Èçìåíåíèå äàííûõ î ïðîæèâàíèè ...')=6
		     lStart = .ItemBar(item,key,1)
		     lEnd   = .ItemBar(item,key,2)
		     lChange = .t.
	     ENDIF
ENDIF
		*IF (HOUR(lStart)=14 AND HOUR(lStart)=12) OR MESSAGEBOX('Ïðèâîäèòü âðåìÿ çàñåëåíèÿ ê 14 ÷àñàì,'+CHR(13)+;
		*			  ' à âðåìÿ ñäà÷è ê 12 ÷àñàì?',4+64+256,'Êîððåêòèðîâêà âðåìåíè çàåçäà-âûåçäà')=6
					IF this.chart.UnitScale =&lt; 4096
						lStart = CTOT(DTOC(lStart)+ ' 14:00:00')
						lStart = CTOT(DTOC(lStart)+ ' 12:00:00')
						lEnd   = CTOT(DTOC(lEnd)+ ' 12:00:00')
				    ENDIF
				    this.BeginUpdate()
				    stringWk = "Items.ItemBar("+ ALLTRIM(STR(item,16,0))+" , "+ ALLTRIM(STR(key,10,0))+" , 1) = `" + TTOC(lStart)+"`"
				    this.executeTemplate(stringWk)
				    stringWk = "Items.ItemBar("+ ALLTRIM(STR(item,16,0))+" , "+ ALLTRIM(STR(key,10,0))+" , 2) = `" + TTOC(lEnd)+"`"
				    this.executeTemplate(stringWk)
				    stringWk = "Items.ItemBar("+ ALLTRIM(STR(item,16,0))+" , "+ ALLTRIM(STR(key,10,0))+" , 6) = `" +  "Çàñåëåíèå:"+ TTOC(NVL(lStart,{}))+ ;
	    																			  "        Âûåçä:    "+ TTOC(NVL(lEnd,{}))+"`"    &amp;&amp; exBarToolTip
				    this.ExecuteTemplate(stringWk)
				    this.EndUpdate
		*ENDIF
IF !(rv_ResursJrn.FrmStatusI&gt;2 OR rv_ResursJrn.FrmIsPayed) AND lChange
REPLACE  UseStart WITH  lStart , ;
	 UseEnd   WITH  lEnd IN rv_JurnalUseEdit
		llResult = TABLEUPDATE(1,.T.,[rv_JurnalUseEdit])
			IF !llResult
	            =MESSAGEBOX('Îøèáêà ïðè ñîõðàíåíèè íà ñåðâåðå [rv_JurnalUseEdit]. '+CHR(13)+'Ñîõðàíåíèå íå ïðîèçîøëî ...',0+16+4096, 'Ïðîáëåìà',900)
			   RETURN .f.
			ENDIF		
		IF MESSAGEBOX('Äîêóìåíò èçìåíåí. Ðàñïå÷àòàòü åãî?',4+32,'Ïîäãîòîâêà ê ïå÷àòè ...')=6
			this.lnbarid= key
			this._prndoc()
		ENDIF
	
ENDIF
endwith


ENDPROC
PROCEDURE barsprop
DODEFAULT()
With this.Chart.Bars
	.Item("Task").Height = 15 &amp;&amp;13
	.Item("Task").Pattern = 1 &amp;&amp;1
	.Item("Task").StartColor =  RGB(138,244,244)   &amp;&amp; - íåãàðàíòèðîâàííîå áðîíèðîâàíèå  -  îæèäàþùàÿ áðîíü
	.Item("Task").Color = RGB(138,244,244)
	.Item("Task").EndColor =  RGB(138,244,244)
*!*		.Item("Task").StartColor =  RGB(150,181,233)   &amp;&amp; - íåãàðàíòèðîâàííîå áðîíèðîâàíèå  -  îæèäàþùàÿ áðîíü
*!*		.Item("Task").Color = RGB(150,181,233)
*!*		.Item("Task").EndColor =  RGB(150,181,233)
	.Item("Task").StartShape = 7  &amp;&amp;61447  &amp;&amp; exShapeIconFrameLeft
	.Item("Task").EndShape = 8 &amp;&amp;61448  &amp;&amp; exShapeIconFrameRight
*!*		.Item("PRed").StartShape = 7  &amp;&amp;61447  &amp;&amp; exShapeIconFrameLeft
*!*		.Item("PRed").StartColor =  RGB(255,0,0)   &amp;&amp; - íåãàðàíòèðîâàííîå áðîíèðîâàíèå  -  îæèäàþùàÿ áðîíü 
*!*		.Item("PRed").EndColor =  RGB(255,0,0)
*!*		.Item("PRed").EndShape = 8 &amp;&amp;61448  &amp;&amp; exShapeIconFrameRight

.Copy("Task", "preTask")   &amp;&amp; - íåãàðàíòèðîâàííîå áðîíèðîâàíèå  (æåëòûé)
		.Item("preTask").StartColor =  RGB(0,128,192)
		.Item("preTask").Color =       RGB(0,128,192)
		.Item("preTask").EndColor =    RGB(0,128,192)
.Copy("Task", "garTask")  &amp;&amp; - ãàðàíòèðîâàííîå áðîíèðîâàíèå (ðàçìåùåííàÿ) (òåìíî-ñèíèé)
		.Item("garTask").StartColor =  RGB(255,255,0)
		.Item("garTask").Color =       RGB(255,255,0)
		.Item("garTask").EndColor =    RGB(255,255,0)
.Copy("Task", "LiveTask")  &amp;&amp;  - ïðîæèâàíèå  (LiveTask) òåìíî-çåëåíûé
		.Item("LiveTask").StartColor =  RGB(0,255,64)
		.Item("LiveTask").Color = RGB(0,255,64)
		.Item("LiveTask").EndColor =  RGB(0,255,64)
.Copy("Task", "errTask")  &amp;&amp;  - ïðîæèâàíèå  (LiveTask) îðàíüæåâûé
		.Item("errTask").StartColor =  RGB(255,128,0)
		.Item("errTask").Color = RGB(255,128,0)
		.Item("errTask").EndColor =  RGB(255,128,0)

		.Item("Task").HistogramPattern = 32
		.Item("Task").HistogramColor = RGB(138,244,244)
		.Item("preTask").HistogramPattern = 32
		.Item("preTask").HistogramColor =       RGB(255,255,0)
		.Item("garTask").HistogramPattern = 32
		.Item("garTask").HistogramColor =       RGB(0,0,255)
		.Item("LiveTask").HistogramPattern = 32
		.Item("LiveTask").HistogramColor = RGB(0,255,0)
		.Item("errTask").HistogramPattern = 32
		.Item("errTask").HistogramColor = RGB(255,0,0)


	.Add('preTask%PRed')
	.Add('garTask%PRed')
	.Add('LiveTask%PRed')
	.Add('Task%PRed')
	.Add('errTask%PRed')
ENDWITH

RETURN

WITH THIS.Chart
		.Bars("Task").HistogramPattern = 0x100
		.Bars("preTask").HistogramPattern = 6
		.Bars("errTask").HistogramColor =  255
endwith

ENDPROC
PROCEDURE CreateBar
*** ActiveX Control Event ***
LPARAMETERS item, datestart, dateend
LOCAL lPartFrmId ,newBar,llResult
IF dateend-datestart&lt;150
RETURN
ENDIF
*IF (HOUR(datestart)=14 AND HOUR(dateend)=12) OR MESSAGEBOX('Ïðèâîäèòü âðåìÿ çàñåëåíèÿ ê 14 ÷àñàì,'+CHR(13)+;
*			  ' à âðåìÿ ñäà÷è ê 12 ÷àñàì?',4+64+256,'Êîððåêòèðîâêà âðåìåíè çàåçäà-âûåçäà')=6

IF this.chart.UnitScale =&lt; 4096
			datestart = CTOT(DTOC(datestart)+ ' 14:00:00')
			datestart = CTOT(DTOC(datestart)+ ' 12:00:00')
			dateend   = CTOT(DTOC(dateend)  + ' 12:00:00')
ENDIF
*ENDIF

PUBLIC barCltName,typeNewFrm
with this
	barCltName =''
	lPartFrmId = ._add(item, datestart, dateend)
	IF lPartFrmId &gt;0	
	    .BeginUpdate()
		with .Items
			.AddBar( item, this.namebar(typeNewFrm,.f.), datestart, dateend, lPartFrmId , ALLTRIM(barCltName) )
		    stringWk = "Items.ItemBar("+ALLTRIM(STR(item,16,0))+" , "+ ALLTRIM(STR(lPartFrmId,10,0))+" , 6) = `" +  "Çàñåëåíèå:"+ TTOC(datestart)+ ;
		    																			  "        Âûåçä:    "+ TTOC(dateend)+"`"    &amp;&amp; exBarToolTip
		    This.ExecuteTemplate(stringWk)
	 	ENDWITH
	    .EndUpdate
		IF MESSAGEBOX('Äîêóìåíò äîáàâëåí. Ðàñïå÷àòàòü åãî?',4+32,'Ïîäãîòîâêà ê ïå÷àòè ...')=6
			._prndoc()
		ENDIF
	ENDIF
ENDWITH
RELEASE barCltName,typeNewFrm

ENDPROC
PROCEDURE DblClick
*** ActiveX Control Event ***
LPARAMETERS shift, x, y

this.rClick()
RETURN
SET STEP ON
WAIT WINDOW 'Îòêðûâàåì ôîðìó äëÿ ðåäàêòèðîâàíèÿ ...' NOWAIT
this.Enabled = .f.
this.BeginUpdate()
With this
	local h, c, hit, llResult
.lnitemid = .ItemFromPoint(-1, -1, c, hit)
If (.lnitemid # 0)
.lnbarid  = .Chart.BarFromPoint(-1, -1)
		this.Enabled = .f.
If !Empty(.lnbarid )
				WAIT CLEAR
				llResult = ._edit() &amp;&amp;.lnbarid, .lnitemid)
				this.EndUpdate
			    this.Enabled = .t.
RETURN llResult
ELSE
	    this.Enabled = .t.
			this.EndUpdate
RETURN .f.
EndIf
EndIf
EndWith
this.Enabled = .t.
this.EndUpdate

ENDPROC
PROCEDURE histogramset
DODEFAULT()
this.Chart.HistogramHeight = 220


ENDPROC
PROCEDURE Init
WAIT WINDOW 'Ãîòîâèì øàõìàòêó ê ðàáîòå ...' NOWAIT
DODEFAULT()

WITH this
.BeginUpdate()
.Enabled = .f.
.Chart.AllowLinkBars =0
.Chart.PaneWidth(0) = 80
.Columns.Item(0).Width  = 35
.Columns.Add("Òèï íîìåðà").Width  = 45
.histogramset()
.EndUpdate()
.Enabled = .t.
ENDWITH
WAIT CLEAR

** ñîçäàòü áàð÷èêè:
*!*		   - íåãàðàíòèðîâàííîå áðîíèðîâàíèå  -  îæèäàþùàÿ áðîíü  (Task) 28
*!*		   - íåãàðàíòèðîâàííîå áðîíèðîâàíèå (ðàçìåùåííàÿ) (preTask)     29
*!*		   - ãàðàíòèðîâàííîå áðîíèðîâàíèå (ðàçìåùåííàÿ)    (garTask)   30 (èëè 22)
*!*		   - ïðîæèâàíèå  (LiveTask) (äîêóìåíò - ñ÷åò ãîñòÿ)             22

*!*		   - îáñëóæèâàíèå â íîìåðå
*!*		   - äîáàâëåíèå ÷åðåç ðåñóðñ "Ïîèñê ñâîáîäíîãî"
ENDPROC
PROCEDURE loaddata
LOCAL lcUniqueName,lcUniqueFilePath
LOCAL ARRAY items(1,2)
LOCAL lnDefItem, lnDefParId, lnDefTvrId,lnDefResursId,lnBarId ,lnBarId, stringWk
this.linload=.t.
* Òàáëèöà èñïîëüçîâàíèÿ ðåñóðñîâ
lcUniqueName = [_d] + SYS(2015)
lcUniqueFilePath = [tmp\] + lcUniqueName + [.DBF]
USE IN SELECT('rv_ResursJrn')
SELECT * FROM (this.dbtablename) INTO TABLE (lcUniqueFilePath)
USE IN SELECT('rv_ResursJrn')
SELECT (lcUniqueName)
USE
USE (lcUniqueFilePath ) IN 0 ALIAS rv_ResursJrn EXCLUSIVE

* Ñïðàâî÷íèê ðåñóðñîâ
lcUniqueName = [_d] + SYS(2015)
lcUniqueFilePath = [tmp\] + lcUniqueName + [.DBF]
USE IN SELECT('rv_ResursLst')
SELECT * FROM BASIS!rv_ResursLst ORDER BY ParNM,TvrNm INTO TABLE (lcUniqueFilePath)
USE IN SELECT('rv_ResursLst')
SELECT (lcUniqueName)
USE
USE (lcUniqueFilePath ) IN 0 ALIAS rv_ResursLst EXCLUSIVE

* Ñïðàâî÷íèê óñëóã
lcUniqueName = [_d] + SYS(2015)
lcUniqueFilePath = [tmp\] + lcUniqueName + [.DBF]
USE IN SELECT('rv_UslugaLst')
SELECT * FROM BASIS!rv_UslugaLst INTO TABLE (lcUniqueFilePath)
USE IN SELECT('rv_UslugaLst')
SELECT (lcUniqueName)
USE
USE (lcUniqueFilePath ) IN 0 ALIAS rv_UslugaLst EXCLUSIVE

IF !ISNULL(thisform.resuparent)
	SELECT rv_ResursLst
	DELETE ALL FOR rv_ResursLst.TvrParId=NULL
	DELETE ALL FOR rv_ResursLst.TvrParId&lt;&gt;thisform.resuparent OR rv_ResursLst.TvrParId=NULL
	PACK
	SELECT rv_UslugaLst
	DELETE ALL FOR rv_UslugaLst.TvrParId=NULL
	DELETE ALL FOR rv_UslugaLst.TvrParId&lt;&gt;thisform.resuparent OR rv_UslugaLst.TvrParId=NULL
	PACK
ENDIF

SET DATE GERMAN
this.BeginUpdate()
with this.Items
*** Äîáàâëÿåì ðåñóðñû
SELECT rv_ResursLst
STORE -99999 TO lnDefTvrId ,lnDefParId ,lnDefResursId ,lnBarId
SCAN
IF !lnDefParId = NVL(rv_ResursLst.TvrParId,0)
	   .DefaultItem = .AddItem(ALLTRIM(rv_ResursLst.ParNM))
	   lnDefItem = .DefaultItem
	   *.CellValue(.DefaultItem , 1) = ALLTRIM(rv_ResursLst.TvrNote)
	   lnDefParId = NVL(rv_ResursLst.TvrParId,0)
	ENDIF
.DefaultItem = .InsertItem( lnDefItem , "", ALLTRIM(rv_ResursLst.TvrNm))
.CellValue(.DefaultItem , 1) = ALLTRIM(rv_ResursLst.TvrNote)
lnBarId = .DefaultItem
	REPLACE ItemId WITH lnDefItem ,BarId WITH lnBarId
ENDSCAN
SELECT rv_ResursJrn
STORE -99999 TO lnDefTvrId ,lnDefParId ,lnDefResursId ,lnBarId
SCAN
	SELECT rv_ResursLst
	LOCATE ALL FOR rv_ResursLst.TvrId = rv_ResursJrn.ResursID
	IF !FOUND()
	 SELECT rv_ResursJrn
LOOP
	ENDIF
SELECT rv_ResursJrn
	lnDefItem = rv_ResursLst.BarId  &amp;&amp; ñèñòåìíûé êîä ðåñóðñà
	lnBarId = rv_ResursJrn.JrnUseId
.AddBar(lnDefItem , this.namebar(rv_ResursJrn.FrmStatusI,rv_ResursJrn.FrmIsPayed) , TTOC(rv_ResursJrn.UseStart),TTOC(rv_ResursJrn.UseEnd),rv_ResursJrn.JrnUseId, ALLTRIM(rv_ResursJrn.CltNM))
**  1                                   2                                                  3                             4                     5                          6                          7                            8
	.DefaultItem = lnDefItem
stringWk = "Items.ItemBar("+ ALLTRIM(STR(lnDefItem ,10,0))+" , "+ ALLTRIM(STR(rv_ResursJrn.JrnUseId,10,0))+" , 12) =" + ALLTRIM(STR(this.prcworkdate(TTOD(rv_ResursJrn.UseStart),TTOD(rv_ResursJrn.UseEnd)),5,2))   &amp;&amp; exBarPercent
this.executeTemplate(stringWk)
*** Îïðåäåëÿåì ToolTip íà êàæäûé áàð
stringWk = "Items.ItemBar(0 , "+ ALLTRIM(STR(rv_ResursJrn.JrnUseId,10,0))+" , 6) = `" +  "Çàñåëåíèå:"+ TTOC(rv_ResursJrn.UseStart)+ ;
																				 "        Âûåçä:    "+ TTOC(rv_ResursJrn.UseEnd)+"`"    &amp;&amp; exBarToolTip
ThisForm.G2ANTT1.ExecuteTemplate(stringWk)
*!*	        stringWk = "Items.ItemBar("+ ALLTRIM(STR(lnDefItem ,10,0))+" , "+ ALLTRIM(STR(rv_ResursJrn.JrnUseId,10,0))+" , 12) =" + ALLTRIM(STR(this.prcworkdate(TTOD(rv_ResursJrn.UseStart),TTOD(rv_ResursJrn.UseEnd)),5,2))   &amp;&amp; exBarPercent
	IF rv_ResursJrn.FrmIsPayed
			stringWk = "Items.ItemBar("+ ALLTRIM(STR(lnDefItem ,10,0))+" , "+ ALLTRIM(STR(rv_ResursJrn.JrnUseId,10,0))+" , 12) = `1`" &amp;&amp; exBarPercent
	    ELSE
			stringWk = "Items.ItemBar("+ ALLTRIM(STR(lnDefItem ,10,0))+" , "+ ALLTRIM(STR(rv_ResursJrn.JrnUseId,10,0))+" , 12) = `0`" &amp;&amp; exBarPercent
	ENDIF
ThisForm.G2ANTT1.ExecuteTemplate(stringWk)
	SELECT rv_ResursJrn
	REPLACE ItemId WITH lnDefItem ,BarId WITH lnBarId
ENDSCAN

endwith
for each h in this.Items
	this.Items.DefaultItem = h
	this.Items.ExpandItem(0) = .t.
next
this.EndUpdate()	
this.linload=.f.



ENDPROC
PROCEDURE namebar
LPARAMETERS lnFrmStatusID,llFrmIsPayed
** StartDate, EndDate, ControlDate
cntPar =  PCOUNT()
IF cntPar &lt;2
llFrmIsPayed = .f.
ENDIF
LOCAL lcNameBar
	DO CASE
	   CASE lnFrmStatusID = 1	&amp;&amp; - íåãàðàíòèðîâàííîå áðîíèðîâàíèå
	       lcNameBar = 'Task'
	   CASE lnFrmStatusID = 2	&amp;&amp; - ãàðàíòèðîâàííîå áðîíèðîâàíèå
	       lcNameBar = 'preTask'
	   CASE lnFrmStatusID = 3	&amp;&amp; - ðàçìåùåííàÿ
	       lcNameBar = 'garTask'
	   OTHERWISE
	       lcNameBar = 'Task'
*	       lcNameBar = 'LiveTask'
	         ** 'PRed'   &amp;&amp;
ENDCASE
*IF llFrmIsPayed
lcNameBar= lcNameBar + '%PRed'	&amp;&amp; - ïðîèçâåäåíà îïëàòà
*ENDIF
RETURN lcNameBar
ENDPROC
PROCEDURE OversizeChanged
*** ActiveX Control Event ***
LPARAMETERS horizontal, newval

ENDPROC
PROCEDURE RClick
*** ActiveX Control Event ***
this.Enabled = .f.
DODEFAULT()
this.Enabled = .t.


ENDPROC
PROCEDURE timescale
DODEFAULT()
LOCAL s
WITH this
.BeginUpdate
.SingleSel = .F.
s = "gBJJgBAIDAAGAAEAAQhYAf8Pf4hh0QihCJo2AEZjQAjEZFEaIEaEEaAIAkcbk0olUrlktl0vmExmUzmk1m03nE5nU7nk9n0/oFBoVDolFo1HpFJpVLplNp1PqFRqVTq"
s=s+"lVq1XrFZrVbrldr1fsFhsVjslls1ntFptVrtltt1vuFxuVzul1u13vF5vV7vl9v1BAmBhOCwMKwuDw2ExWJxmIx2HyGLx+SyONyuTy2UzWZzmYz2X0Gbx1kUigUAAMwzG"
s=s+"eo1Ws1ZV2Go1IAL+1ACZMxm2+52W63Ov2Op1fC13F0un4nJ1vE2BV2XD2e/4vK4fL63V1bMTKZ5/d2pf3vh6Xj2ff3e63G683S5vF0mmAD4+Xx+bA+wAeP5/H6a/9+h8P2"
s=s+"eIAGZAiHHYZkDQQ7TuH/Ap4GUUzjPgiCJn+AD7GBAMNQJBD8wFDwAFlEUExJBaHQdCDixM+UARYABuxg/8ZQ5DUQRpEEbQKf8DxPBDiPe08KRdDEZHVIwANU1YRSWAALSdJ"
s=s+"snxpHcFO3HsrOI48Ky1IkKQpERZAA9sjHVC77ynEsqwbBE1RVNKHgAQ04yQ1skvDOJDRkZc9ABJYRT5Jk+z/P0pR49sgQHAsaUVApx0aAD+mvOclSZIkYG7MsMxNTUqyw+F"
s=s+"FwVRNQwRSwACFUwADvVNHv9IlNu5V02u5UjzVMIUQxHMYABzXdUVVRpxgBXM60DX9MQHTjWrJE0uzfGkXRdXNa0FYMjxBM8vxJM7iWXN8KSlbs31zWlT1Ja0eWxM9tNbbkL"
s=s+"UhY1mQtaU62hI9hyZUl0x5H6x3ZLVvwtekyWlYlHXNBF0R5dTszdC1vR1cELVJO9JABLODVvMF8x9deGS1fE3yJXYc4pgOKUDfGE31ZN+Srd13U/VdI1y9uCWBPRl2NE1sW"
s=s+"xbeWv9l2f6DSNSXdkTaNtd1WyrncR567mgaHGJLanMLY2laVc2FOjW1JpTuX2sV0YhmMtQpXLct1msZRBLmU421exYbN93XgAFixA9s61ztkzbc4u47LHmb6O8ExSPs0j6N"
s=s+"Otyv1hSy8BCm6bHs7eUDXMXb5DOLuJyG5v9CjzWLCkszrqZLS2+/NtbwEQdFN9sPbLPEYFU/Fxj1TV2U7WyahslSdM8O9SPGkieK+8iW33fe1JXNUjvqrnWlo1A2lUnieO+"
s=s+"/k1lGMs7RjDwvNiciedUtT6Nd3B+RlaxQJBmx8luULWLLPqxjZ769S/UQe1svPUi6M+D5DzN5a2athyHX9H6f43VIjE3yMTbqrlbB5l3OYgU+ssL7X+rtc+2Nj7AD5vwRkk"
s=s+"SCyAoFvvg6/FaiZIIuHbGv9DRxEuQeRjC2FkKH/pvRcs4+b+4MFgH+mmISDIhrHN0dqI5uIjRLGYbOJp2YnRRihAaIsQYiRXIdFVKsSImRKiegOKUYIpxZiwg2MsWokxpjF"
s=s+"Gs7UY4vxvNmWSKwAEHoRjrHRFMZkToMd3HqOcf4lRBN1IKLMg4vGzjnHeRUeY+yNj5GeIkhpJSFkpF+RKKZFoRj9I6PcZJKSElBIGUUR44ljkBJCT0gI1RclZIeN0YZLRal"
s=s+"RKqLsq5XRslhIiWUqY0S1l9HCV8YyyEWB8SuYpHiQEiJIAAkpKJmk4QoX8pJFE3zSKCQEA="
.Images(s)
s="gBJJgBAICAAGAAEAAQhYAf8Pf4hh0QihCJo2AEZjQAjEZFEaIEaEEaAIAkcbk0olUrlktl0vmExmUzmk1m03nE5nU7nk9n0/oFBoVDolFo1HpFJpVLplNp1PqFRqVTqlVq1XrF"
s=s+"ZrVbrldr1fsFhsVjslls1ntFptVrtltt1vuFxuVzul1u13vF5vV7vl9v1/wGBwWDwmFw2HxGJxWLxmNx2PyGRyWTymVy2XzGZzWbzmdz2f0Gh0WjwEWH0r08ekEikgAkso184iG"
s=s+"kicPjcU2+zjW43e6jO8jL+b79X8bfif48bfAffgP43IT8b4XE3O23vW3++2r/6vcjUB"
.Images(s)

*!*		.DrawGridLines = -1
*!*		.BackColor = RGB(255,255,255)
*!*		.MarkSearchColumn = .F.
*!*		.ShowFocusRect = .F.
*!*		.HasLines = .F.
*!*		.Indent = 24
*!*		.DefaultItemHeight = 20
*!*		.AllowChartScrollPage = .T.
*!*		.ScrollPartCaption(2,2048) = "&lt;img&gt;4&lt;/img&gt;"
*!*		.ScrollPartCaption(2,32) = "&lt;img&gt;5&lt;/img&gt;"
*!*		   WITH .VisualAppearance
*!*			.Add(1,"gBFLBCJwBAEHhEJAEGg4BOEIQAAYAQGKIYBkAKBQAGaAoDDMOILQiMQxDPBMKgBBCLIxiGK4DhiGoZQ0HKCRZDeI4DDSNcgjCLIZw8GYCIRjaL5UkPGSZJpmSRwAiWPIpSrLMrgLLMdR1HCBaQiehoaiEMg1CTTVQSCKoYSjBKqarjGbKGoqSozUxNMAggI=")
*!*			.Add(2,"XP: Header 1 1")
*!*		   ENDWITH
*!*				.HTMLPicture("excel") = "gAAAABgYAEAgBEChSohIAC0KFEKEEKIEKgkNhQAAkZjkCgkejshkUjkklk0nlEplUrlRofQSADbMhEABwl8xmYAI0KaoPawANgYYwAeIDIIARE3mU0A08n1AoVEo1IBVDYrjo7NrFQoaoqoAK5+IYAXE3N1iAB2tCcfcwQFosswpsCns/fDVmlBobQm4GHVMi0KJQBBcceE3VAscJ3XgADAAucFgWDwt1ADNVa6bgUtoAcxSxeWxuPyMfAGUjhwfkwGmdQ5kxbXAL/f+jyGByeEjhQzrwEJ1OOy2m20uC3SszpvE/A4m40+6TfLOOqmEZSBCCYAu80jLY35xjPCf/UyU1zocYECGmrxzDOxxKAmOJx2m0aGdOgl4HX7PNkDcsK8iMnQzoNmCOQ4v88rUCI9jlOYxzbv+57Cui4EBIU/jtLwjg1mBBCMjgYjsvIbgjsW20NO2ABIPYFj2RamEYgAW4PnMO4ICQxb6n+UD2DsE0IMfEJ+phFZMAeoYBIVJaOw0kQwPY2wuSK9r3iA+T6PqYD2MTFEIuLACayqzDNG49gyROO4QhkIoACsESKhxKpsTiAB4PYVgOGOjSFAYWShkKEiKkoaChipKpMhOioMUAAAbhEo6NoFP6hgiECj0qAB7Uwjk9T5TQ2A3Ph4A1PhYI+KtBgAcEqj9VdBIqjLTGJKo3BsipVzsWE6TsOEq0mABcz2AFapgAhYqGdliGhKoXUWAB6WJYc+E4HiK2MAFPz6gVroqBznNMZAJz4UwFiEABnXVdd2Xbd133heN5Xnel63oHwo3zfV935ft83gHxAYFgeCYLgxACjgGD4Xg+E3fgOBX9iV84jhWI4IKOI4phGN4Ri2EYxjWM45kePYfgd/ZJkWUY/kuQZJfmWZPi+UZXlWK5nmF9ZvneKj4H2f6DoGh6Fl2UY7hOiaVoWg5do2WZ/hmB5/iekGdoGD6VoGnZDn2A6ZrGg6pruaY9rGlkBoJAa3quoa/om06HuOuZriusbiPm8bOPm6bLhOo4FvOhanfG27tvO071wGt7Jl+PajwWl7fvvHaTvOlbXtW2X6H138huWBblwGDYhhHO6vxGpbv0mI9OZ2wdhoeY9D012cl2PU4LfHXXj0upYGH3ed73/dXt4Pj+R5PkXfHkeH8hXnoF6IAen6voev6XseolnuJW0wBoUA6FAf6IP+iH/oj+gI="
*!*				.HTMLPicture("word") = "gAAAABgYAEAgBEChSohIAC0KFEKEEKIEKgkNhQAAkZjkCgkejshkUjkklk0nlEplUrlRofQSADbMhEABwl8xmYAI0KaoPawANgYYwAeIDIIARE3mU0A08n1AoVEo1IBVDYrjo7NrFQoaoqoAK5+IYAXE3N1iAB2tCcfcwQFosswpsCns/fDVmlBobQm4GHVMi0KPwCDMceE3VAscJ3NQBCYAucFgWDwt1ADNVa6bgUtoAcxSxeWxuPyMfAGUjhwfkwGmdQ5kxa1AL/f+jyGByeEjhQzrwEJ1OOy2m20uC3SszpvE/A4m40+6TfLOOqmEZGBux93mkZbG/OMZ4T/6mSmudDjAgQ01YADDDOxxKAmOJx2m0aGdOgl4HXx/NkDcsK8aMnQzoNmCOQ4v88jUCI9blOYxzbv+57Cui4EBIU/gAO0jg1mBBCMjwYTHvGbgjsW20NQ4SD1hY9cWJhGAAFuD5zDuCAkMW+p/lA9Y7BNCDHoyOB+phDhMAeoYBIVJaOw0kQwPW2wuSK9j3DiID5Po+pgPWxMUQi4sAJrKrMM0bhkqGDQQoqEIZCKAArBEiocSqbE5gAeD1nRNKNIUBhZKGQoSIqKB7KGKkqkyE6KgxQIABuESjo2gVAKGCIQKPSwAHtTKOT4odNjwfqhn4fihgAAaBCrQgAHBKoSHxNU2TImFKAAe8+gohRaTwWE7Twb88VvXKhmJKoYVoFFZAAaEqhdRgABhZligATgeIrY6YVBPyBWwioIOc0wwWYUwFiEABnXVdd2Xbd133heN5Xnel63oHxjXzfV935ft83gHxAYFgeCYLgxAGNgGD4Xg+E3fgOGYjgWHXdiGJX7geKXbi2JYXjV2Ytf2RGNjOFY7hmP3XkOR4xieTZPhpnBbmWaZnm2amdlmSZdnGb59mWYYTmeO5nnWS6BmxAZvgegZPoRnEBmmo5tnei5Zo4W6VpGaYhpuO6fqee6hrV84nluEXVrOf6pqeCX1hGy5doet7UZ2A6ts23axqW+bnrOM7juO0Z9rW65vwOC53tGxbXr24YEH136HiXJ7NfOQ8jtOO8dfeIGNzPGdDheA8/dvG7X0fS3njmOh90F5dZiXX9h13a9t2/a3fHcdn8hXeoF34AeD4ffeL4HjeElnlJW01VIEA6FAf34P9+H/fj+gIA=="

*!*	.SelBackColor = 16777216
*!*	.SelForeColor = RGB(0,0,128)
**'Uncomment it if you are running Windows XP
** .BackColorHeader = 33554432
WITH .Chart
	.LevelCount = 2

			*!*		.AllowCreateBar = .F.
			*!*		.NonworkingDaysColor = RGB(196,196,128)
			*!*		.NonworkingDaysPattern = 6
			*!*			*!*		.FirstVisibleDate = "Feb 24 2006"
			*!*		.BackColor = RGB(255,255,255)
			*!*		.DrawGridLines = 2
			*!*		WITH .Bars.Add("End")
			*!*			.Pattern = 2
			*!*			.Color = RGB(255,128,128)
			*!*		ENDWITH
	
	
			*!*		exYear         0  Indicates the year. Values: ..., 2001, 2002, 2003, ...
			*!*	    exHalfYear     1  A date between January 1st and June 31 indicates the first half of the year, and from July 1 to December 31, indicates the second half of the year. Values: 1 and 2
			*!*	    exQuarterYear  2  A date between January 1st and March 31 indicates the first quarter of the year, a date between April 1st and June 30 indicates the second quarter of the year, a date between July 1st and September 30 indicates the third quarter of the year, and if a date between October 1st and December 31 indicates the forth quarter of the year. Values: 1, 2, 3 and 4
			*!*	    exMonth       16  Indicates the month. Values: 1 ( January ), 2 ( February ), ..., and 12 ( December ). Use the MonthNames property to specify the name of the months.
			*!*	    exThirdMonth  17  The first ten days in a month indicates the first third of the month, the next 10 days indicates the second third of the month, and the last 10 days in the month indicates the last third of the month. Values: 1, 2 and 3.
			*!*	    exWeek        256  Indicates the week in the year. Values: 1,2,...,53. Use the WeekDays property to specify the name of the days in the week.
			*!*	    exDay         4096  Indicates the day of the date. Values: 1,2,..,31
			*!*	    exHour        65536  Indicates the hour.
			*!*	    exMinute      1048576  Indicates the minute.
			*!*	    exSecond      16777216  Indicates the second.

		.Label(0) = ""  &amp;&amp; exYear
		.Label(1) = ""  &amp;&amp; exHalfYear
		.Label(2) = ""  &amp;&amp; exQuarterYear
		.Label(16) = ""  &amp;&amp; exMonth
		.Label(17) = ""  &amp;&amp; exThirdMonth
*!*		.Label(256) = ""  &amp;&amp; exWeek
*!*		.Label(4096  ) = ""  &amp;&amp; exDay
*!*		.Label(65536  ) = ""  &amp;&amp; exHour
		.Label(1048576) = ""  &amp;&amp; exMinute
		.Label(16777216) = ""  &amp;&amp; exSecond
		*!*		.OverviewBackColor = RGB(255,255,255)
		*!*		.OverviewVisible = .T.
		*!*		.AllowOverviewZoom = 1
	***.OverviewZoomCaption = "Year|  ?Year|  ?Year|&lt;img&gt;3&lt;/img&gt;|Third|&lt;img&gt;2&lt;/img&gt;|&lt;img&gt;1&lt;/img&gt;|Hour|Min|Sec"
	.OverviewZoomCaption =    "Year|1\2Year|1\4Year|&lt;img&gt;11&lt;/img&gt;|Third|&lt;img&gt;11&lt;/img&gt;|&lt;img&gt;10&lt;/img&gt;|&lt;img&gt;9&lt;/img&gt;|Min|Sec"
*!*		.OverviewZoomUnit = 24
	.UnitWidth = 70

ENDWITH
.EndUpdate
ENDWITH


ENDPROC
</methods>
		<objcode/>
		<ole>0M8R4KGxGuEAAAAAAAAAAAAAAAAAAAAAPgADAP7/CQAGAAAAAAAAAAAAAAABAAAAAQAAAAAAAAAAEAAAAgAAAAEAAAD+////AAAAAAAAAAD////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////9/////v////7////+////BQAAAAYAAAAHAAAACAAAAAkAAAAKAAAACwAAAAwAAAANAAAADgAAAP7//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////1IAbwBvAHQAIABFAG4AdAByAHkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAWAAUA//////////8BAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHC4mQnLG8kBAwAAAIAAAAAAAAAAAwBPAGwAZQBPAGIAagBlAGMAdABEAGEAdABhAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB4AAgEDAAAAAgAAAP////8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAchQAAAAAAAADAEEAYwBjAGUAcwBzAE8AYgBqAFMAaQB0AGUARABhAHQAYQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJgACAP///////////////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAMAQwBoAGEAbgBnAGUAZABQAHIAbwBwAHMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcAAIA////////////////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAQAAAAAAAAA/v////7///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////84AAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAEAAAQAAgAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAABDAGwAYQBzAE0fSM0lLVlHgD91LFaPU7dJTAEBAAAEAAQAEAAQAP////8hAP//////////Qk02AAAAAAAAADYAAAAoAAAAQAAAABAAAAABACAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAVwBTAFwAcwB5AHMAdABlAG0AMwAyAFwAQgB0AFcAaQB6AGEAcgBkAC4AZABsAGwAAABCAFQAWABQAFAAYQBuAGUAbAAgAEMAbABhAHMAcwAJAHsANgA1AEQANQA0ADAAQwAxAC0AOAA1ADkARQAtADQAOQBGADUALQBCADMANQBCAC0ANwAwADgAMgAxADgAMwAxAEYANwBBADcAfQAgAEMAOgBcAFcASQBOAEQATwBXAFMAXABzAHkAcwB0AGUAbQAzADIAXABiAHQAeABwAHAAYQBuAGUAbAAuAGQAbABsAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAE0fSM0lLVlHgD91LFaPU7dJTAEBAAAEAAQAEAAQAP////8hAP//////////Qk02AAAAAAAAADYAAAAoAAAAQAAAABAAAAABACAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEJNPgAAAAAAAAA+AAAAKAAAAEAAAAAQAAAAAQABAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAn28AAAM+AAAJAANS4wuRj84RneMAqgBLuFEBzAAAkAFEQgEABUFyaWFsCwD//wsA//8DAAAAAAATAAUAAIATAAgAAIATAAUAAIATAAgAAIALAP//AwAAAAAAAwADAAAAAwASAAAAAwD/////AwAAAAAACwD//wsA//8DAAAAAAALAAAAAwD/////AwD/////AwAAAAAAAwD/////AwAWAAAAAwAAAAAACwAAAAMAAAAAAAsA//8TAA4AAIATAA0AAIADAAAAAAADAAIAAAALAAAACwAAAAsA//8JAAAAAAAAAAAAAAAAAAAAAAADADAAAAADAAAAAAATADFl/wATAA8AAIATAAgAAIADAP////8TAA8AAIATAAgAAIAJAANS4wuRj84RneMAqgBLuFEBzAAAvAJEQgEABUFyaWFsEwAAAAAACwAAAAgABgAAAA0ACgAAAAsA//8DABIAAAALAP//CABkAAAAYQBiAGMAZABlAGYAZwBoAGkAagBrAGwAbQBuAG8AcABxAHIAcwB0AHUAdgB3AHgAeQB6AEwEOQQyBDQEMAQ1BDcEOgQ7BDgEPwQ+BDwERARGBEIESwRJBDEEPQRDBEoEQQQAAAgAZAAAAEEAQgBDAEQARQBGAEcASABJAEoASwBMAE0ATgBPAFAAUQBSAFMAVABVAFYAVwBYAFkAWgAsBBkEEgQUBBAEFQQXBBoEGwQYBB8EHgQcBCQEJgQiBCsEKQQRBB0EIwQqBCEEAAALAP//CAACAAAAAAADAPQBAAADAIgTAAADAMQAAAADAAMAAAATABAAAIALAAAABQAAAAAAAADgPwsAAAALAP//EwAPAACACQAAAAAAAAAAAAAAAAAAAAAAAwAwAAAACwD//wMAAAAAAAsAAAAIAAIAAAAAABMAEAAAgBMAEAAAgBMADwAAgAMAEgAAAAMAoP///wsA//8DAAAAAAALAAAAAwAozpd8AwAAAAAACwD//wsAAAALAAAAEwAxZf8AAwAAAAAACwAAAAMAAAAAAAgAAgAAAAAAAwD/////AwD/////AwD/////AwD/////CwAAAAkAA1LjC5GPzhGd4wCqAEu4UQHMAACQAURCAQAFQXJpYWwLAP//</ole>
		<ole2>OLEObject = C:\WINDOWS\system32\ExG2antt.dll
</ole2>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1ON0L3DWH</uniqueid>
		<timestamp>959805921</timestamp>
		<class>commandbutton</class>
		<classloc/>
		<baseclass>commandbutton</baseclass>
		<objname>Command1</objname>
		<parent>frmresuview</parent>
		<properties>Top = 603
Left = 1
Height = 25
Width = 157
Caption = "Îáíîâèò äàííûå"
Name = "Command1"
</properties>
		<protected/>
		<methods>PROCEDURE Click
with thisform.G2antt1
	.BeginUpdate
	.Items.RemoveAllItems()
	.LoadData()
	with .Items
	for each h in thisform.G2antt1.Items
		.DefaultItem = h
		.ExpandItem(0) = .t.
	next
	endwith
	.EndUpdate
endwith

ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_25L0SGZE5</uniqueid>
		<timestamp>959805921</timestamp>
		<class>commandbutton</class>
		<classloc/>
		<baseclass>commandbutton</baseclass>
		<objname>Command2</objname>
		<parent>frmresuview</parent>
		<properties>Top = 603
Left = 166
Height = 25
Width = 121
FontBold = .T.
FontSize = 10
Caption = "Ñåãîäíÿ"
Name = "Command2"
</properties>
		<protected/>
		<methods>PROCEDURE Click
with thisform.G2antt1
	.BeginUpdate
WITH .Chart
		.FirstVisibleDate = DATE()
ENDWITH
	.EndUpdate
endwith

ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1ON0L3DWH</uniqueid>
		<timestamp>959806037</timestamp>
		<class>shape</class>
		<classloc/>
		<baseclass>shape</baseclass>
		<objname>Shape1</objname>
		<parent>frmresuview</parent>
		<properties>Top = 601
Left = 302
Height = 13
Width = 85
BackColor = 138,244,244
Name = "Shape1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_25X0QUXS0</uniqueid>
		<timestamp>959806037</timestamp>
		<class>shape</class>
		<classloc/>
		<baseclass>shape</baseclass>
		<objname>Shape2</objname>
		<parent>frmresuview</parent>
		<properties>Top = 619
Left = 302
Height = 13
Width = 85
BackColor = 0,128,192
Name = "Shape2"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1ON0L3DWH</uniqueid>
		<timestamp>959806037</timestamp>
		<class>shape</class>
		<classloc/>
		<baseclass>shape</baseclass>
		<objname>Shape4</objname>
		<parent>frmresuview</parent>
		<properties>Top = 601
Left = 660
Height = 13
Width = 85
BackColor = 255,255,0
Name = "Shape4"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_25X0QUXS4</uniqueid>
		<timestamp>959806037</timestamp>
		<class>label</class>
		<classloc/>
		<baseclass>label</baseclass>
		<objname>Label2</objname>
		<parent>frmresuview</parent>
		<properties>AutoSize = .T.
FontSize = 8
Caption = "- áðîíèðîâàíèå íåãàðàíòèðîâàííîå"
Height = 16
Left = 391
Top = 601
Width = 186
Name = "Label2"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_25X0QUXS5</uniqueid>
		<timestamp>959806037</timestamp>
		<class>label</class>
		<classloc/>
		<baseclass>label</baseclass>
		<objname>Label3</objname>
		<parent>frmresuview</parent>
		<properties>AutoSize = .T.
FontSize = 8
Caption = "- áðîíèðîâàíèå ñ ðàçìåùåíèåì ãàðàíòèðîâàííîå"
Height = 16
Left = 391
Top = 618
Width = 257
Name = "Label3"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1ON0L3DWH</uniqueid>
		<timestamp>959806037</timestamp>
		<class>label</class>
		<classloc/>
		<baseclass>label</baseclass>
		<objname>Label4</objname>
		<parent>frmresuview</parent>
		<properties>AutoSize = .T.
FontSize = 8
Caption = "- çàåçä ñ íà÷èñëåíèåì íà ñ÷åò Ãîñòÿ"
Height = 16
Left = 749
Top = 601
Width = 192
Name = "Label4"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2DL11LO1J</uniqueid>
		<timestamp>959806037</timestamp>
		<class>label</class>
		<classloc/>
		<baseclass>label</baseclass>
		<objname>Label1</objname>
		<parent>frmresuview</parent>
		<properties>AutoSize = .T.
FontSize = 8
Caption = "- çàåçä, îïëàòà ïðèíÿòà"
Height = 16
Left = 749
Top = 618
Width = 124
Name = "Label1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2DL11LO1K</uniqueid>
		<timestamp>959806037</timestamp>
		<class>shape</class>
		<classloc/>
		<baseclass>shape</baseclass>
		<objname>Shape5</objname>
		<parent>frmresuview</parent>
		<properties>Top = 619
Left = 660
Height = 13
Width = 85
BackColor = 255,255,0
Name = "Shape5"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2DL11LO1L</uniqueid>
		<timestamp>959806037</timestamp>
		<class>shape</class>
		<classloc/>
		<baseclass>shape</baseclass>
		<objname>Shape3</objname>
		<parent>frmresuview</parent>
		<properties>Top = 624
Left = 660
Height = 3
Width = 85
BorderStyle = 0
BackColor = 255,0,0
Name = "Shape3"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>COMMENT</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>0</timestamp>
		<class/>
		<classloc/>
		<baseclass/>
		<objname>frmresuview</objname>
		<parent/>
		<properties>Arial, 0, 9, 5, 15, 12, 32, 3, 0
Arial, 1, 10, 6, 16, 13, 34, 3, 0
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18I0M4ORT</uniqueid>
		<timestamp>959879313</timestamp>
		<class>frmedit</class>
		<classloc>baseform_v1.vcx</classloc>
		<baseclass>form</baseclass>
		<objname>frmprimarydocparttvreditnadb</objname>
		<parent/>
		<properties>Height = 207
Width = 423
DoCreate = .T.
WindowState = 0
cmode = 
cmeasureunitlist = 
frmprctype = 1
nouid = 0
Name = "frmprimarydocparttvreditnadb"
cstmsghandler.Name = "cstmsghandler"
cstresizable.Name = "cstresizable"
Img1.Name = "Img1"
cstdatawork.Name = "cstdatawork"
</properties>
		<protected/>
		<methods>PROCEDURE _handlecntcancelsaveevent
*------------------------------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: FRMPRIMARYDOCPARTTVREDIT._HANDLECNTCANCELSAVEEVENT
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;tcMessage&gt;
* Returns.........: &lt;none&gt;
* Notes...........: &lt;~&gt;
*------------------------------------------------------------------------------
LPARAMETERS	tcMessage

LOCAL	llResSave

WITH This

*17.05.2004 02:07 -&gt;Ïðîèçâîäèì ñîõðàíåíèÿ/îòìåíÿåì èçìåíåíèÿ
IF tcMessage == [OK]
	
	*13.06.2006 18:01 -&gt; Ñîõðàíÿåì öåíó ïðîäàæè
	.SavePriceSale()
	*------------------------------------------------------------------------------

	.uRetVal = .T.
	
	IF .cMode = [DELE]
		DELETE IN lvFrmPartTvrEdit
	ENDIF

	llResSave = .cstDataWork.Save([lvFrmPartTvrEdit])

	*21.01.2004 20:01 -&gt;Îáðàáàòûâàåì ðåçóëüòàòû ñîõðàíåíèÿ
	IF llResSave
	
		*12.05.2004 03:18 -&gt;Çàïèñûâàåì â .uRetVal èäåíòèôèêàòîð äîáàâëåííîãî äîêóìåíòà
		IF .cMode = [ADD]
			.uRetVal = .cstDataWork.GetLastID([lvFrmPartTvrEdit])
		ELSE
			.uRetVal = .T.
		ENDIF
		***	
		.Hide()
		*------------------------------------------------------------------------------
		
	ELSE
	
		*01.04.2004 18:42 -&gt;Ïîïûòàåìñÿ îáðàáîòàòü îøèáêó ñîõðàíåíèÿ
		IF .cstDataWork.HandleSaveFail() &amp;&amp;åñëè îøèáêà îáðàáîòàíà
			RETURN .T.	&amp;&amp;âîçâðàùàåìñÿ ê ðåäàêòèðîâàíèþ
		ELSE
			
			*01.04.2004 18:40 -&gt;Ñîîáùàåì îá îøèáêå
			MESSAGEBOX([Â ïðîöåññå ñîõðàíåíèÿ ïðîèçîøëà îøèáêà. Èçìåíåíèÿ ñîõðàíåíû íå áóäóò.],16,[Îøèáêà...])
			*------------------------------------------------------------------------------
			
			*01.04.2004 18:40 -&gt;Îòìåíÿåì èçìåíåíèÿ
			.cstDataWork.Restore([lvFrmPartTvrEdit])
			.uRetVal = .F.
			.Hide()	
			*------------------------------------------------------------------------------
			
		ENDIF	
		*------------------------------------------------------------------------------
		
	ENDIF
	*------------------------------------------------------------------------------

ELSE

	*12.05.2004 00:36 -&gt;Îòìåíèì èçìåíåíèÿ
	.cstDataWork.Restore([lvPriceEdit])
	.cstDataWork.Restore([lvFrmPartTvrEdit])
	.uRetVal = .F.
	.Hide()
	*------------------------------------------------------------------------------
	
ENDIF
*------------------------------------------------------------------------------

ENDWITH
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE calculatepricemsu
WITH THIS

*15.06.2006 16:56 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL   lnOldMsuID, ;
		lnNewMsuID, ;
		lnCfMsu
***
lnOldMsuID = OLDVAL([MsuId],[lvFrmPartTvrEdit])
lnNewMsuID = EVAL([lvFrmPartTvrEdit.MsuId])
*------------------------------------------------------------------------------

*15.06.2006 16:59 -&gt; Åäèíèöà èçìåðåíèÿ íå èçìåíèëàñü
IF lnOldMsuID = lnNewMsuID
	RETURN
ENDIF
*------------------------------------------------------------------------------

*15.06.2006 16:59 -&gt; Îïðåäåëÿåì êîýôôèöèåíò äëÿ íîâîé ÅÈ ïî îòíîøåíèþ ê ñòàðîé
lnCfMsu = spGetCfMsu(lnOldMsuID, lnNewMsuID)
lnCfMsu = IIF(lnCfMsu = 0, 1, lnCfMsu)
*------------------------------------------------------------------------------

*15.06.2006 17:01 -&gt; Ïåðåñ÷èòûâàåì öåíû è êîëè÷åñòâî â ñîîòâåòñòâèè ñ êîýôôèöèåíòîì
.cntTvrBuy.txtTvrPrcBuy.Value = ROUND(.cntTvrBuy.txtTvrPrcBuy.Value * lnCfMsu, 4)
.cntTvrSale.txtTvrPrcSale.Value = ROUND(.cntTvrSale.txtTvrPrcSale.Value * lnCfMsu, 4)
.txtQnt.Value = ROUND(.txtQnt.Value / lnCfMsu, 3)
***
IF TYPE([.txtQntNetto]) == [O] AND !ISNULL(.txtQntNetto)
.txtQntNetto.Value = ROUND(.txtQntNetto.Value / lnCfMsu, 3)
ENDIF
*------------------------------------------------------------------------------

ENDWITH
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE calculatesum
*------------------------------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: frmPrimaryDocPartTvrEdit.CalculateSum
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: &lt;public&gt; Ðàññ÷åò ñóìì
*------------------------------------------------------------------------------
WITH This

*23.09.2005 12:25 -&gt; Ðàñ÷¸ò ñóììû ïîñëåäíåãî ïîñòóïëåíèÿ
.CalculateSumLastBuy()
*------------------------------------------------------------------------------

*23.09.2005 12:25 -&gt; Ðàñ÷¸ò ñóììû ïîñòóïëåíèÿ
.CalculateSumBuy()
*------------------------------------------------------------------------------

*23.09.2005 12:25 -&gt; Ðàñ÷¸ò ñóììû ïðîäàæè
.CalculateSumSale()
*------------------------------------------------------------------------------

ENDWITH
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE calculatesumbuy
*------------------------------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: frmPrimaryDocPartTvrEdit.CalculateSumBuy
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: &lt;public&gt; Ðàñ÷¸ò ñóììû ïîñòóïëåíèÿ
*------------------------------------------------------------------------------
WITH This

*23.09.2005 12:25 -&gt; Ðàñ÷¸ò ñóììû ïîñòóïëåíèÿ
IF TYPE([.cntTvrBuy]) == [O] AND !ISNULL(.cntTvrBuy)
	.cntTvrBuy.txtTvrPrcSumBuy.Value = ROUND(.cntTvrBuy.txtTvrPrcBuy.Value * .txtQnt.Value,2)
ENDIF
*------------------------------------------------------------------------------

ENDWITH
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE calculatesumlastbuy
*------------------------------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: frmPrimaryDocPartTvrEdit.CalculateSumLastBuy
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: &lt;public&gt; Ðàñ÷¸ò ñóììû ïîñëåäíåãî ïîñòóïëåíèÿ
*------------------------------------------------------------------------------
WITH This

*23.09.2005 12:25 -&gt; Ðàñ÷¸ò ñóììû ïîñëåäíåãî ïîñòóïëåíèÿ
IF TYPE([.cntTvrLastBuy]) == [O] AND !ISNULL(.cntTvrLastBuy)
	.cntTvrLastBuy.txtTvrPrcSumBuy.Value = ROUND(.cntTvrLastBuy.txtTvrPrcBuy.Value * .txtQnt.Value,2)
ENDIF
*------------------------------------------------------------------------------

ENDWITH
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE calculatesumsale
*------------------------------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: frmPrimaryDocPartTvrEdit.CalculateSumSale
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: &lt;public&gt; Ðàñ÷¸ò ñóììû ïðîäàæè
*------------------------------------------------------------------------------
WITH This

*23.09.2005 12:25 -&gt; Ðàñ÷¸ò ñóììû ïðîäàæè
IF TYPE([.cntTvrSale]) == [O] AND !ISNULL(.cntTvrSale)
	.cntTvrSale.txtTvrPrcSumSale.Value = ROUND(.cntTvrSale.txtTvrPrcSale.Value * .txtQnt.Value,2)
ENDIF
*------------------------------------------------------------------------------

ENDWITH
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE calculatevatsum
*------------------------------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: frmPrimaryDocPartTvrEdit.CalculateVatSum
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: &lt;public&gt; Ðàññ÷åò ñóììû ÍÄÑ
*------------------------------------------------------------------------------
WITH This

*23.09.2005 12:18 -&gt; Ðàññ÷åò ÍÄÑ ïîñëåäíåãî ïîñòóïëåíèÿ
.CalculateVatSumLastBuy()
*------------------------------------------------------------------------------

*23.09.2005 12:18 -&gt; Ðàññ÷åò ÍÄÑ ïîñòóïëåíèÿ
.CalculateVatSumBuy()
*------------------------------------------------------------------------------

*23.09.2005 12:19 -&gt; Ðàññ÷åò ÍÄÑ ïðîäàæè
.CalculateVatSumSale()
*------------------------------------------------------------------------------

ENDWITH
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE calculatevatsumbuy
*------------------------------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: frmPrimaryDocPartTvrEdit.CalculateVatSumBuy
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: &lt;public&gt; Ðàññ÷åò ÍÄÑ ïîñòóïëåíèÿ
*------------------------------------------------------------------------------
WITH This

*23.09.2005 12:16 -&gt; Ðàññ÷åò ÍÄÑ ïîñòóïëåíèÿ
IF TYPE([.cntTvrBuy])==[O] AND !ISNULL(.cntTvrBuy)
	IF .cntTvrVat.txtTvrVATRate.Value # 0
		.cntTvrBuy.txtTvrVATSumBuy.Value = ROUND(.cntTvrBuy.txtTvrPrcSumBuy.Value * .cntTvrVat.txtTvrVATRate.Value / (100 + .cntTvrVat.txtTvrVATRate.Value),2)
	ELSE
		.cntTvrBuy.txtTvrVATSumBuy.Value = 0
	ENDIF
ENDIF
*------------------------------------------------------------------------------

ENDWITH
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE calculatevatsumlastbuy
*------------------------------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: frmPrimaryDocPartTvrEdit.CalculateVatSumLastBuy
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: &lt;public&gt; Ðàññ÷åò ÍÄÑ ïîñëåäíåãî ïîñòóïëåíèÿ
*------------------------------------------------------------------------------
WITH This

*23.09.2005 12:16 -&gt; Ðàññ÷åò ÍÄÑ ïîñëåäíåãî ïîñòóïëåíèÿ
IF TYPE([.cntTvrLastBuy])==[O] AND !ISNULL(.cntTvrLastBuy)
	IF .cntTvrVat.txtTvrVATRate.Value # 0
		.cntTvrLastBuy.txtTvrVATSumBuy.Value = ROUND(.cntTvrLastBuy.txtTvrPrcSumBuy.Value * .cntTvrVat.txtTvrVATRate.Value / (100 + .cntTvrVat.txtTvrVATRate.Value),2)
	ELSE
		.cntTvrLastBuy.txtTvrVATSumBuy.Value = 0
	ENDIF
ENDIF
*------------------------------------------------------------------------------

ENDWITH
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE calculatevatsumsale
*------------------------------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: frmPrimaryDocPartTvrEdit.CalculateVatSumSale
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: &lt;public&gt; Ðàññ÷åò ÍÄÑ ïðîäàæè
*------------------------------------------------------------------------------
WITH This

*23.09.2005 12:17 -&gt; Ðàññ÷åò ÍÄÑ ïðîäàæè
IF TYPE([.cntTvrSale])==[O] AND !ISNULL(.cntTvrSale)
	IF .cntTvrVat.txtTvrVATRate.Value # 0
		.cntTvrSale.txtTvrVATSumSale.Value = ROUND(.cntTvrSale.txtTvrPrcSumSale.Value * .cntTvrVat.txtTvrVATRate.Value / (100 + .cntTvrVat.txtTvrVATRate.Value),2)
	ELSE
		.cntTvrSale.txtTvrVATSumSale.Value = 0
	ENDIF
ENDIF
*------------------------------------------------------------------------------

ENDWITH
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE cntenable
*------------------------------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: frmPrimaryDocPartTvrEdit.cntEnable
* Called by.......: &lt;frmPrimaryDocPartTvrEdit.Init&gt;
* Parameters......: &lt;tcObjectName - èìÿ îáúåêòà-êîíòåéíåðà,
*					 tnTop - âûñîòà îáúåêòà-êîíòåéíåðà&gt;
* Returns.........: &lt;lnNewTop&gt;
* Notes...........: Ðàçìåùåíèå íà ôîðìå êîíòåéíåðîâ ñîäåðæàùèõ öåíû, ñóììû, ÍÄÑ
*------------------------------------------------------------------------------
LPARAMETERS tcObjectName, tnTop

WITH This

*01.09.2005 12:23 -&gt; Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL lnNewTop
*------------------------------------------------------------------------------

*01.09.2005 12:00 -&gt; Íàñòðîèì âíåøíèé âèä îáúåêòà
.&amp;tcObjectName..Visible = .T.
***
.&amp;tcObjectName..Left = 5
.&amp;tcObjectName..Top = tnTop
***
lnNewTop = .&amp;tcObjectName..Top + .&amp;tcObjectName..Height + 5
*------------------------------------------------------------------------------

*01.09.2005 12:23 -&gt; Âîçâðàùàåì ðåçóëüòàò
RETURN lnNewTop
*------------------------------------------------------------------------------

ENDWITH
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE Destroy
*------------------------------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: Tovar_v1.vcx
* Class.Module....: frmPrimaryDocPartTvrEdit.Destroy
* Called by.......: &lt;Sys Event&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........:
*------------------------------------------------------------------------------
WITH This

*12.01.2006 11:48 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL   lcIndependetFNM, ;
		lcDependetFNM
***
lcIndependetFNM = LEFT(.cMeasureUnitList,AT([;],.cMeasureUnitList)-1)
lcDependetFNM	= RIGHT(.cMeasureUnitList,LEN(.cMeasureUnitList)-AT([;],.cMeasureUnitList))
*------------------------------------------------------------------------------

*11.01.2006 17:05 -&gt;Çàêðîåì ñïðàâî÷íèê áàçîâûõ ÅÈ
USE IN SELECT([lvTvrMsuList])
*------------------------------------------------------------------------------

*12.01.2006 11:53 -&gt;Óäàëèì ñïðàâî÷íèêè
IF FILE([tmp\]+lcIndependetFNM+[.dbf])
ERASE ([tmp\]+lcIndependetFNM+[.dbf])
ENDIF
***
IF FILE([tmp\]+lcDependetFNM+[.dbf])
ERASE ([tmp\]+lcDependetFNM+[.dbf])
ENDIF
*------------------------------------------------------------------------------

*11.01.2006 17:05 -&gt;Âûïîëíèì ìåòîä ðîäèòåëüñêîãî êëàññà
DODEFAULT()
*------------------------------------------------------------------------------

ENDWITH
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE Init
*------------------------------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: FRMPRIMARYDOCPARTTVREDIT.INIT
* Called by.......: &lt;Sys Event&gt;
* Parameters......: &lt;tcCommand,tuParam1&gt;
* Returns.........: &lt;none&gt;
* Notes...........: &lt;~&gt;
*------------------------------------------------------------------------------
LPARAMETERS	tcCommand,tuParam1
*17.05.2004 01:26 -&gt;Âûïîëíèì ìåòîä ðîäèòåëüñêîãî êëàññà
DODEFAULT()
*------------------------------------------------------------------------------

WITH This

*12.05.2004 03:12 -&gt;Ñîõðàíèì êîìàíäó (ðåæèì ðàáîòû ñ äàííûìè)
.cMode = UPPER(ALLTRIM(tcCommand))
*------------------------------------------------------------------------------

*12.05.2004 00:33 -&gt;Çàãðóçèì äàííûå â Alias äëÿ ðåäàêòèðîâàíèÿ
DO CASE

	CASE .cMode==[ADD]
		
		*12.05.2004 00:32 -&gt;Äîáàâèì ïóñòóþ çàïèñü
		APPEND BLANK IN lvFrmPartTvrEdit
		*------------------------------------------------------------------------------

		*12.05.2004 02:39 -&gt;Çàïèøåì èäåíòèôèêàòîð ðîäèòåëüñêîãî äîêóìåíòà
		REPLACE FrmID WITH tuParam1 IN lvFrmPartTvrEdit
		*------------------------------------------------------------------------------
		
	CASE INLIST(.cMode,[EDIT],[INFO],[DELE])
		
		*12.05.2004 00:31 -&gt;Çàãðóçèì äàííûå ñóùåñòâóþùåé çàïèñè
		_PARAM = tuParam1
		***
		REQUERY([lvFrmPartTvrEdit])
		*------------------------------------------------------------------------------
		
ENDCASE
*------------------------------------------------------------------------------

*01.09.2005 15:28 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	lnTop, ;
		lnOldTop
***
lnTop = .shpQnt.Top + .shpQnt.Height + 5
lnOldTop = lnTop
*------------------------------------------------------------------------------

*19.08.2005 12:16 -&gt; Çàêðîåì Alias
USE IN IIF(USED([lvFrmTypeInfoByFrm]),[lvFrmTypeInfoByFrm],0)
*------------------------------------------------------------------------------

*19.08.2005 12:12 -&gt; Îòêðîåì Alias ñ èíôîðìàöèåé î òèïå äîêóìåíòà
_PARAM = lvFrmPartTvrEdit.FrmID
***
USE lvFrmTypeInfoByFrm IN 0
*------------------------------------------------------------------------------

*15.06.2006 15:45 -&gt; Ñîõðàíÿåì òèï ïðàéñà äëÿ äîêóìåíòà
.FrmPrcType = lvFrmTypeInfoByFrm.FrmPrcTypeID
*------------------------------------------------------------------------------

*18.07.2006 15:53 -&gt; Ñîõðàíÿåì ïîäðàçäåëåíèå äëÿ äîêóìåíòà
.nOUID = lvFrmTypeInfoByFrm.OUID
*------------------------------------------------------------------------------

*01.02.2006 12:25 -&gt;Ïîêàæåì êîíòåéíåð ñî ñðîêîì ãîäíîñòè
IF lvFrmTypeInfoByFrm.FrmTypeID = 1
	lnTop = .CntEnable([cntTvrExpDate],lnTop)
ENDIF
*------------------------------------------------------------------------------
*01.09.2005 15:24 -&gt; Äîáàâëÿåì êîíòåéíåð ñ öåíîé ïîñòóïëåíèÿ (ïîñëåäíåé è òåêóùåé)
IF lvFrmTypeInfoByFrm.ContainPriceBuy
	*lnTop = .CntEnable([cntTvrLastBuy],lnTop)
	lnTop = .CntEnable([cntTvrBuy],lnTop)
ENDIF
*------------------------------------------------------------------------------

*01.09.2005 15:25 -&gt; Äîáàâëÿåì êîíòåéíåð ñ öåíîé ïðîäàæè è íàäáàâêîé
IF lvFrmTypeInfoByFrm.ContainPriceSale
	lnTop = .CntEnable([cntPrcNadb],lnTop)
	lnTop = .CntEnable([cntTvrSale],lnTop)
	.cntPrcNadb.TabIndex =  .cnttvrbuy.TabIndex + 1
	.cntTvrSale.TabIndex =  .cntPrcNadb.TabIndex + 1
ENDIF
*------------------------------------------------------------------------------
*01.09.2005 15:29 -&gt; Äîáàâëÿåì êîíòåéíåð ñ îñòàòêàìè òîâàðà
*lnTop = .CntEnable([cntStockTvr],lnTop)
*------------------------------------------------------------------------------

*01.09.2005 15:29 -&gt; Äîáàâëÿåì êîíòåéíåð ñ ÍÄÑ
lnTop = .CntEnable([cntTvrVat],lnTop)
.cntTvrVat.TabIndex =  .cntTvrSale.TabIndex + 1

*------------------------------------------------------------------------------

*18.07.2006 15:44 -&gt; Èçìåíÿåì ïîëîæåíèå êíîïîê ÎÊ/Îòìåíà è ðàçìåðû ôîðìû
.cntCancelSaveHandled.Top = lnTop
.cntCancelSaveHandled.TabIndex =  .cntTvrVat.TabIndex + 1
***
.Height = .cntCancelSaveHandled.Top + .cntCancelSaveHandled.Height + 5
*------------------------------------------------------------------------------

*01.09.2005 16:11 -&gt; Ïðîñ÷èòàåì ñóììû è ÍÄÑ
.CalculateSum()
.CalculateVatSum()
*------------------------------------------------------------------------------

*18.07.2006 16:50 -&gt; Âû÷èñëèì ïðîöåíò íàäáàâêè
.SetPrcNadb()
*------------------------------------------------------------------------------
USE lvtvrsetbmps IN 0

*19.08.2005 12:15 -&gt; Íàñòðîèì âíåøíèé âèä ôîðìû
DO CASE
	CASE .cMode = [ADD]
		.Caption = [Äîáàâëåíèå]
		.Icon = FULLPATH([frmprimarydocadd.ico])
	CASE .cMode = [EDIT]
		.Caption = [Ðåäàêòèðîâàíèå]
		.Icon = FULLPATH([frmprimarydocedit.ico])
	CASE .cMode = [INFO]
		.Caption = [Ïðîñìîòð]
		.Icon = FULLPATH([frmprimarydocinfo.ico])
		ThisForm.cntCancelSaveHandled.cmdOk.Enabled = .F.
	CASE .cMode = [DELE]
		.Caption = [Óäàëåíèå]
		.Icon = FULLPATH([frmprimarydocdele.ico])
		ThisForm.cntCancelSaveHandled.cmdOk.Caption = [Óäàëèòü]
ENDCASE
***
.Caption = .Caption + [ òîâàðíîé ïîçèöèè äîêóìåíòà]
.Top = .Top - 100
*------------------------------------------------------------------------------

ENDWITH
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE Load
*------------------------------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: FRMPRIMARYDOCPARTTVREDIT.LOAD
* Called by.......: &lt;Sys Event&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: &lt;~&gt;
*------------------------------------------------------------------------------

*17.05.2004 01:32 -&gt;Âûïîëíèì ìåòîä ðîäèòåëüñêîãî êëàññà
DODEFAULT()
*------------------------------------------------------------------------------
*17.05.2004 01:32 -&gt;Îòêðîåì ÁÄ è óñòàíîâèì å¸ â êà÷åñòâå òåêóùåé
IF !DBUSED([BASIS])
	OPEN DATABASE BASIS
ENDIF
***
SET DATABASE TO BASIS
*------------------------------------------------------------------------------

*17.05.2004 01:32 -&gt;Îòêðîåì Alias äëÿ ðåäàêòèðîâàíèÿ áåç äàííûõ
USE lvFrmPartTvrEdit IN 0 NODATA
*------------------------------------------------------------------------------

*17.05.2004 01:34 -&gt; Îòêðûâàåì ñïðàâî÷íèêè
USESPR('lvTovarList','TovarList')
*USE lvTovarList IN 0 ALIAS TovarList
*USE lvCurTypeList IN 0
USESPR('lvCurTypeList')
USE lvTvrLastBuy IN 0 NODATA
USE lvStockTvrQnt IN 0 NODATA
***
This.cMeasureUnitList = spGetBaseMsuList(0)
USE (LEFT(This.cMeasureUnitList,AT([;],This.cMeasureUnitList)-1)) IN 0 ALIAS lvTvrMsuList
*------------------------------------------------------------------------------

*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE Resize
NODEFAULT
ENDPROC
PROCEDURE savepricesale
*------------------------------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: frmPrimaryDocPartTvrEditNadb.SavePriceSale
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Ñîõðàíåíèå öåíû ïðîäàæè
*------------------------------------------------------------------------------
WITH This

*08.06.2006 10:06 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	llDataWasChanged, ;
		llResSave
***
llResSave = .F.
*------------------------------------------------------------------------------

*07.06.2006 17:10 -&gt; Êîëè÷åñòâî çàïèñåé î öåíàõ îòëè÷íî îò íóëÿ
IF .cntTvrSale.Visible AND RECCOUNT([lvPriceEdit]) # 0

	*07.06.2006 16:26 -&gt; Ïðîèçâåäåì ñîõðàíåíèå öåíû ïðîäàæè
	IF .cMode # [DELE]

		*07.06.2006 16:27 -&gt; Ïðîâåðèì èçìåíèëèñü ëè äàííûå
		llDataWasChanged = .cstDataWork.DataChanged([lvPriceEdit],.T.)
		*------------------------------------------------------------------------------

		*07.06.2006 16:29 -&gt; Âûïîëíÿåì ñîõðàíåíèå åñëè ïîëüçîâàòåëü ðàçðåøèò ñîõðàíåíèå
		IF llDataWasChanged AND MESSAGEBOX([Ñîõðàíèòü öåíó ïðîäàæè â ïðàéñå?],4+32,[Ñîõðàíåíèå])=6

			*07.06.2006 16:47 -&gt; Ïîïûòàåìñÿ ñîõðàíèòü öåíó
			llResSave = .cstDataWork.Save([lvPriceEdit])
			*------------------------------------------------------------------------------

		ENDIF	
		*------------------------------------------------------------------------------

	ENDIF
	*------------------------------------------------------------------------------
	
	*02.04.2004 17:00 -&gt; Îêàòèì èçìåíåíèÿ
	IF !llResSave
		.cstDataWork.Restore([lvPriceEdit])
	ENDIF
	*------------------------------------------------------------------------------

	*07.06.2006 16:48 -&gt; Çàêðîåì Alias äëÿ ðåäàêòèðîâàíèÿ öåí è îòêðîåì ñíîâà áåç äàííûõ
	USE IN SELECT([lvPriceEdit])
	***
	USE lvPriceEdit IN 0 NODATA
	*------------------------------------------------------------------------------

ENDIF
*------------------------------------------------------------------------------

ENDWITH
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE setprcnadb
WITH This

*18.07.2006 16:36 -&gt; Âû÷èñëÿåì ïðîöåíò íàäáàâêè
IF .cntTvrBuy.txtTvrPrcBuy.Value = 0
	.cntPrcNadb.txtPrcNadb.Value = 0
ELSE
	.cntPrcNadb.txtPrcNadb.Value = ROUND(100*.cntTvrSale.txtTvrPrcSale.Value/.cntTvrBuy.txtTvrPrcBuy.Value - 100, 2)
ENDIF
*------------------------------------------------------------------------------

ENDWITH
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE setprcsale
WITH This

*18.07.2006 16:36 -&gt; Âû÷èñëÿåì öåíó ïðîäàæè
.cntTvrSale.txtTvrPrcSale.Value = ROUND(.cntTvrBuy.txtTvrPrcBuy.Value * (100 + .cntPrcNadb.txtPrcNadb.Value) / 100, 2)
*------------------------------------------------------------------------------

ENDWITH
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1>Class</reserved1>
		<reserved2>19</reserved2>
		<reserved3>cmode
cmeasureunitlist
frmprctype Íîìåð ïðàéñà äëÿ ýòîãî äîêóìåíòà
nouid Ïîäðàçäåëåíèå äëÿ äàííîãî äîêóìåíòà
*cntenable 
*calculatesum &lt;public&gt; Ðàññ÷åò ñóìì
*calculatevatsumbuy &lt;public&gt; Ðàññ÷åò ÍÄÑ ïîñòóïëåíèÿ
*calculatevatsumsale &lt;public&gt; Ðàññ÷åò ÍÄÑ ïðîäàæè
*calculatevatsum &lt;public&gt; Ðàññ÷åò ñóììû ÍÄÑ
*calculatesumbuy &lt;public&gt; Ðàññ÷åò ñóììû ïîñòóïëåíèÿ
*calculatesumsale &lt;public&gt; Ðàññ÷åò ñóììû ïðîäàæè
*calculatepricemsu ðàññ÷åò öåíû åäèíèöû èçìåðåíèÿ
*savepricesale 
*calculatevatsumlastbuy &lt;public&gt; Ðàññ÷åò ÍÄÑ ïîñëåäíåãî ïîñòóïëåíèÿ
*calculatesumlastbuy &lt;public&gt; Ðàññ÷åò ñóììû ïîñëåäíåãî ïîñòóïëåíèÿ
*setprcnadb Âû÷èñëÿåì ïðîöåíò íàäáàâêè
*setprcsale Âû÷èñëÿåì öåíó ïðîäàæè ïî ïðîöåíòó íàäáàâêè
</reserved3>
		<reserved4/>
		<reserved5/>
		<reserved6>Pixels</reserved6>
		<reserved7>ðåäàêò òîâàðíîé ïîçèöèè ñ ïðîöåíòîì íàäáàâêè</reserved7>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1UP0WNIRG</uniqueid>
		<timestamp>959879313</timestamp>
		<class>cntstocktvr</class>
		<classloc>primarydoc_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>Cntstocktvr</objname>
		<parent>frmprimarydocparttvreditnadb</parent>
		<properties>Top = 137
Left = 5
Visible = .F.
ZOrderSet = 0
Name = "Cntstocktvr"
shpStockTvrQnt.Name = "shpStockTvrQnt"
lblStockTvrQnt.Name = "lblStockTvrQnt"
txtStockTvrQnt.Name = "txtStockTvrQnt"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1UP0WFAZ4</uniqueid>
		<timestamp>959879313</timestamp>
		<class>cntprcnadb</class>
		<classloc>primarydoc_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>Cntprcnadb</objname>
		<parent>frmprimarydocparttvreditnadb</parent>
		<properties>Top = 137
Left = 5
Visible = .F.
ZOrderSet = 1
Name = "Cntprcnadb"
shpPrcNadb.Name = "shpPrcNadb"
lblPrcNadb.Name = "lblPrcNadb"
txtPrcNadb.Name = "txtPrcNadb"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1UP0NDWZJ</uniqueid>
		<timestamp>959879313</timestamp>
		<class>cnttvrlastbuy</class>
		<classloc>primarydoc_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>cntTvrLastBuy</objname>
		<parent>frmprimarydocparttvreditnadb</parent>
		<properties>Top = 137
Left = 5
Visible = .F.
ZOrderSet = 2
Name = "cntTvrLastBuy"
ShpBuy.Name = "ShpBuy"
lblTvrPrcBuy.Name = "lblTvrPrcBuy"
txtTvrPrcBuy.Name = "txtTvrPrcBuy"
lblTvrPrcSumBuy.Name = "lblTvrPrcSumBuy"
txtTvrPrcSumBuy.Name = "txtTvrPrcSumBuy"
lblTvrVATSumBuy.Name = "lblTvrVATSumBuy"
txtTvrVATSumBuy.Name = "txtTvrVATSumBuy"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1MV0RE0B7</uniqueid>
		<timestamp>959879313</timestamp>
		<class>cnttvrvat</class>
		<classloc>primarydoc_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>CntTvrVat</objname>
		<parent>frmprimarydocparttvreditnadb</parent>
		<properties>Top = 137
Left = 5
Visible = .F.
TabIndex = 13
ZOrderSet = 3
Name = "CntTvrVat"
shpVat.Name = "shpVat"
lblTvrVATRate.Name = "lblTvrVATRate"
txtTvrVATRate.Name = "txtTvrVATRate"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1Q20QIAM4</uniqueid>
		<timestamp>959879313</timestamp>
		<class>cnttvrexpdate</class>
		<classloc>primarydoc_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>cntTvrExpDate</objname>
		<parent>frmprimarydocparttvreditnadb</parent>
		<properties>Top = 137
Left = 5
Height = 33
Visible = .F.
TabIndex = 5
ZOrderSet = 4
Name = "cntTvrExpDate"
shpExpDate.Name = "shpExpDate"
lblTvrExpDate.Name = "lblTvrExpDate"
comTxtCtlCalendarExpDate.txtText.Name = "txtText"
comTxtCtlCalendarExpDate.cmdShow.Name = "cmdShow"
comTxtCtlCalendarExpDate.Name = "comTxtCtlCalendarExpDate"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18A02DMUV</uniqueid>
		<timestamp>959879313</timestamp>
		<class>shp</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>shape</baseclass>
		<objname>shpTvr</objname>
		<parent>frmprimarydocparttvreditnadb</parent>
		<properties>Top = 5
Left = 5
Height = 61
Width = 413
SpecialEffect = 0
ZOrderSet = 8
Name = "shpTvr"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1LD12MOZD</uniqueid>
		<timestamp>959879313</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblTLU</objname>
		<parent>frmprimarydocparttvreditnadb</parent>
		<properties>FontBold = .T.
Caption = "Øòðèõ-êîä:"
Left = 10
Top = 13
TabIndex = 9
ZOrderSet = 9
Name = "lblTLU"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1LE0P5JD7</uniqueid>
		<timestamp>959879313</timestamp>
		<class>comtxtctlcalclentluidbytlu</class>
		<classloc>primarydoc_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>comTxtCtlCalcLenTLUIDByTLU</objname>
		<parent>frmprimarydocparttvreditnadb</parent>
		<properties>Top = 10
Left = 140
TabIndex = 1
ZOrderSet = 10
Name = "comTxtCtlCalcLenTLUIDByTLU"
txtText.NullDisplay = "Øòðèõêîä íåîïðåäåëåííûé"
txtText.Name = "txtText"
lblLen.Name = "lblLen"
cmdFind.Name = "cmdFind"
cmdClear.Name = "cmdClear"
</properties>
		<protected/>
		<methods>PROCEDURE _handleanychange
*15.06.2006 16:50 -&gt; Îáíîâèì òîâàð è ïåðåéäåì â ïîëå ðåäàêòèðîâàíèÿ êîëè÷åñòâà
WITH Thisform
	.cntIdCtlGridTvr.SetValue(This.nTvrID)
	CLEAR TYPEAHEAD
	.txtQnt.SetFocus()
ENDWITH
*------------------------------------------------------------------------------
ENDPROC
PROCEDURE Refresh
PARAMETERS tnTvrID

IF PCOUNT()=1

	*15.06.2006 16:47 -&gt; Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
	PRIVATE	_PARAM
	***
	_PARAM = tnTvrID
	*------------------------------------------------------------------------------

	*19.08.2005 11:37 -&gt; Íàéä¸ì ØÊ ïî èäåíòèôèêàòîðó òîâàðà
	IF USED([lvTovarLookUpByID])
		REQUERY([lvTovarLookUpByID])
	ELSE
		USE lvTovarLookUpByID IN 0
	ENDIF
	***
	IF RECCOUNT([lvTovarLookUpByID]) &gt; 0
		This.txtText.Value = lvTovarLookUpByID.TLU
	ELSE
		This.txtText.Value = .NULL.
	ENDIF
	*------------------------------------------------------------------------------
	
ENDIF

*15.06.2006 16:49 -&gt; Âûïîëíèì ìåòîä ðîäèòåëüñêîãî êëàññà
DODEFAULT()
*------------------------------------------------------------------------------
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18I0M4ORT</uniqueid>
		<timestamp>959879313</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblTvr</objname>
		<parent>frmprimarydocparttvreditnadb</parent>
		<properties>FontBold = .T.
Caption = "Òîâàð:"
Left = 10
Top = 41
TabIndex = 10
ZOrderSet = 11
Name = "lblTvr"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18A02PAKD</uniqueid>
		<timestamp>959879313</timestamp>
		<class>cntidctlgrid</class>
		<classloc>comidctl_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>cntIdCtlGridTvr</objname>
		<parent>frmprimarydocparttvreditnadb</parent>
		<properties>Top = 38
Left = 60
Width = 348
Height = 23
TabIndex = 2
ZOrderSet = 12
_controlsource = lvFrmPartTvrEdit.TvrId
_controlsourcetype = 1
_rsaliasname = TovarList
_rsfieldnameid = TvrID
_rsfieldnametext = TvrNM
_grdinfoparams = oMgrTovar;TVR;INFO
_grdaddparams = oMgrTovar;TVR;FASTADD;0;lvTvrInCntViewRepl
_selectobjectt = frmidctltreetvr;primarydoc_v1;primarydoc.app
Name = "cntIdCtlGridTvr"
txtText.Height = 23
txtText.Left = 0
txtText.Top = 0
txtText.Width = 278
txtText._highlightobject = .parent.parent.lblTvr
txtText.Name = "txtText"
cmdShow.Top = 0
cmdShow.Left = 303
cmdShow.Name = "cmdShow"
cmdClear.Top = 0
cmdClear.Left = 326
cmdClear.Name = "cmdClear"
CmdTree.Top = 0
CmdTree.Left = 280
CmdTree.Enabled = .T.
CmdTree.Visible = .T.
CmdTree.Name = "CmdTree"
Olecommprox1.Top = 0
Olecommprox1.Left = 36
Olecommprox1.Height = 16
Olecommprox1.Width = 38
Olecommprox1.Name = "Olecommprox1"
</properties>
		<protected/>
		<methods>PROCEDURE _refreshrelatedobjects
*------------------------------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRINARYDOC_V1.VCX
* Class.Module....: CNTIDCTLGRIDTVR._RefreshRelatedObjects
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Îáðàáîòêà èçìåíåíèÿ çíà÷åíèÿ ýëåìåíòà.
*------------------------------------------------------------------------------

*19.08.2005 12:31 -&gt; Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	lnTvrID, ;
		lcMsuTNM, ;
		lcIndependetFNM, ;
		lcDependetFNM, ;
		_PARAM
		
***
lnTvrID = This.Value
*------------------------------------------------------------------------------

WITH ThisForm

*06.09.2005 17:18 -&gt; Çàïèñûâàåì èäåíòèôèêàòîð òîâàðà
.comTxtCtlCalcLenTLUIDByTLU.nTvrID = lnTvrID
.comTxtCtlCalcLenTLUIDByTLU.Refresh(lnTvrID)
*------------------------------------------------------------------------------

*17.04.2004 14:52 -&gt;Ïîëó÷èì èíôîðìàöèþ î âûáðàííîì òîâàðå
USE IN IIF(USED([lvTovarInfo]),[lvTovarInfo],0)
***
_PARAM = lnTvrID
_PARAM_PRCTYPE = .FrmPrcType
USE lvTovarInfo IN 0
*------------------------------------------------------------------------------

*11.01.2006 17:05 -&gt;Çàêðîåì ñïðàâî÷íèê áàçîâûõ ÅÈ
USE IN SELECT([lvTvrMsuList])

*16.01.2006 14:38 -&gt;Îïðåäåëèì íàçâàíèÿ òàáëèö ñî ñïðàâî÷íèêàìè
lcIndependetFNM = LEFT(.cMeasureUnitList,AT([;],.cMeasureUnitList)-1)
lcDependetFNM	= RIGHT(.cMeasureUnitList,LEN(.cMeasureUnitList)-AT([;],.cMeasureUnitList))
*------------------------------------------------------------------------------

*12.01.2006 11:53 -&gt;Óäàëèì ñïðàâî÷íèêè
IF FILE([tmp\]+lcIndependetFNM+[.dbf])
ERASE ([tmp\]+lcIndependetFNM+[.dbf])
ENDIF
***
IF FILE([tmp\]+lcDependetFNM+[.dbf])
ERASE ([tmp\]+lcDependetFNM+[.dbf])
ENDIF
*------------------------------------------------------------------------------

.cMeasureUnitList = spGetBaseMsuList(lvTovarInfo.MsuID)
lcMsuTNM = RIGHT(.cMeasureUnitList,LEN(.cMeasureUnitList)-AT([;],.cMeasureUnitList))
USE (lcMsuTNM) IN 0 ALIAS [lvTvrMsuList]
*------------------------------------------------------------------------------

*17.04.2004 14:53 -&gt;Óñòàíàâëèâàåì åäèíèöó èçìåðåíèÿ ïî óìîë÷àíèþ
IF .cMode==[ADD] AND lvTovarInfo.MsuID # 0 &amp;&amp; AND .cntIdCtlGridMsu.Value = 0
	.cntIdCtlGridMsu.SetValue(lvTovarInfo.MsuID)
ENDIF	
*------------------------------------------------------------------------------

*17.04.2004 15:06 -&gt; Óñòàíîâèì âåëè÷èíó ÍÄÑ ïî óìîë÷àíèþ
IF .cntTvrVat.txtTvrVATRate.Value # lvTovarInfo.tvrVATRate
	.cntTvrVat.txtTvrVATRate.Value = lvTovarInfo.tvrVATRate
ENDIF	
*------------------------------------------------------------------------------

*01.09.2005 17:26 -&gt; Óñòàíàâëèâàåì öåíû
IF TYPE([ThisForm.cntTvrLastBuy]) == [O] AND !ISNULL(.cntTvrLastBuy)
	.cntTvrLastBuy.SetPrice(lnTvrID)
ENDIF
***
IF TYPE([ThisForm.cntTvrBuy]) == [O] AND !ISNULL(.cntTvrBuy)
	.cntTvrBuy.SetPrice(lnTvrID)
ENDIF
***
IF TYPE([ThisForm.cntTvrSale]) == [O] AND !ISNULL(.cntTvrSale) AND TYPE([.FrmPrcType]) == [N]
	IF .FrmPrcType = 0 OR EMPTY(.FrmPrcType) OR ISNULL(.FrmPrcType)
		MESSAGEBOX([Ïðàéñ äëÿ äàííîãî äîêóìåíòà íå íàéäåí.],48,[Ïðåäóïðåæäåíèå])
	ELSE
		.cntTvrSale.SetPrice(lnTvrID,.FrmPrcType)
	ENDIF
ENDIF
*------------------------------------------------------------------------------

*18.07.2006 15:50 -&gt; Îïðåäåëÿåì îñòàòêè òîâàðà íà ñêëàäå
.cntStockTvr.Refresh(lnTvrID,.nOUID)
*------------------------------------------------------------------------------

ENDWITH
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18A02DMUV</uniqueid>
		<timestamp>959879313</timestamp>
		<class>shp</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>shape</baseclass>
		<objname>shpQnt</objname>
		<parent>frmprimarydocparttvreditnadb</parent>
		<properties>Top = 71
Left = 5
Height = 61
Width = 413
SpecialEffect = 0
ZOrderSet = 13
Name = "shpQnt"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18I0M4ORT</uniqueid>
		<timestamp>959879313</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblQnt</objname>
		<parent>frmprimarydocparttvreditnadb</parent>
		<properties>FontBold = .T.
Caption = "Êîëè÷åñòâî:"
Left = 10
Top = 107
TabIndex = 12
ZOrderSet = 14
Name = "lblQnt"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_R020K4VL1</uniqueid>
		<timestamp>0</timestamp>
		<class>txt</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>txtQnt</objname>
		<parent>frmprimarydocparttvreditnadb</parent>
		<properties>ControlSource = "lvFrmPartTvrEdit.TvrQnt"
Left = 140
TabIndex = 4
Top = 104
ZOrderSet = 15
_highlightobject = .parent.lblQnt
_convertcommatopoint = .T.
_usedbfieldproperty = .T.
Name = "txtQnt"
</properties>
		<protected/>
		<methods>PROCEDURE _handleanychange
*17.01.2006 09:52 -&gt;Ðàññ÷èòàåì ñóììû
ThisForm.CalculateSum()
*------------------------------------------------------------------------------
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18A02PAKD</uniqueid>
		<timestamp>959879313</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblMsu</objname>
		<parent>frmprimarydocparttvreditnadb</parent>
		<properties>FontBold = .T.
Caption = "Åäèíèöà èçìåðåíèÿ:"
Left = 10
Top = 79
TabIndex = 11
ZOrderSet = 16
Name = "lblMsu"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18A02DMUV</uniqueid>
		<timestamp>959879313</timestamp>
		<class>cntidctlgrid</class>
		<classloc>comidctl_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>cntIdCtlGridMsu</objname>
		<parent>frmprimarydocparttvreditnadb</parent>
		<properties>Top = 76
Left = 140
TabIndex = 3
ZOrderSet = 17
_controlsource = lvFrmPartTvrEdit.MsuId
_controlsourcetype = 1
_rsaliasname = lvTvrMsuList
_rsfieldnameid = MsuID
_rsfieldnametext = MsuNM
Name = "cntIdCtlGridMsu"
txtText._highlightobject = .parent.parent.lblMsu
txtText.Name = "txtText"
cmdShow.Name = "cmdShow"
cmdClear.Name = "cmdClear"
CmdTree.Name = "CmdTree"
Olecommprox1.Top = 0
Olecommprox1.Left = 36
Olecommprox1.Height = 16
Olecommprox1.Width = 38
Olecommprox1.Name = "Olecommprox1"
</properties>
		<protected/>
		<methods>PROCEDURE _refreshrelatedobjects
*30.09.2005 12:25 -&gt; Ðàñ÷¸ò öåíû åäèíèöû èçìåðåíèÿ
ThisForm.CalculatePriceMsu()
ThisForm.CalculateSum()
*------------------------------------------------------------------------------
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1MV0RE0BB</uniqueid>
		<timestamp>959879313</timestamp>
		<class>cnttvrbuy</class>
		<classloc>primarydoc_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>CntTvrBuy</objname>
		<parent>frmprimarydocparttvreditnadb</parent>
		<properties>Top = 137
Left = 5
Visible = .F.
TabIndex = 6
ZOrderSet = 18
Name = "CntTvrBuy"
ShpBuy.Name = "ShpBuy"
lblTvrPrcBuy.Name = "lblTvrPrcBuy"
txtTvrPrcBuy.Name = "txtTvrPrcBuy"
lblTvrPrcSumBuy.Name = "lblTvrPrcSumBuy"
txtTvrPrcSumBuy.Name = "txtTvrPrcSumBuy"
lblTvrVATSumBuy.Name = "lblTvrVATSumBuy"
txtTvrVATSumBuy.Name = "txtTvrVATSumBuy"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1MV0RE0B8</uniqueid>
		<timestamp>959879313</timestamp>
		<class>cnttvrsale</class>
		<classloc>primarydoc_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>CntTvrSale</objname>
		<parent>frmprimarydocparttvreditnadb</parent>
		<properties>Top = 137
Left = 5
Visible = .F.
TabIndex = 7
ZOrderSet = 19
Name = "CntTvrSale"
ShpSale.Name = "ShpSale"
lblTvrPrcSale.Name = "lblTvrPrcSale"
txtTvrPrcSale.Name = "txtTvrPrcSale"
txtTvrPrcSumSale.Name = "txtTvrPrcSumSale"
txtTvrVATSumSale.Name = "txtTvrVATSumSale"
lblTvrPrcSumSale.Name = "lblTvrPrcSumSale"
lblTvrVATSumSale.Name = "lblTvrVATSumSale"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18M0216E7</uniqueid>
		<timestamp>959879313</timestamp>
		<class>cntcancelsavehandled</class>
		<classloc>baseform_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>cntCancelSaveHandled</objname>
		<parent>frmprimarydocparttvreditnadb</parent>
		<properties>Top = 137
Left = 212
TabIndex = 8
ZOrderSet = 20
Name = "cntCancelSaveHandled"
cmdCancel.Name = "cmdCancel"
cmdOk.Name = "cmdOk"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>COMMENT</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>0</timestamp>
		<class/>
		<classloc/>
		<baseclass/>
		<objname>frmprimarydocparttvreditnadb</objname>
		<parent/>
		<properties>Arial, 0, 9, 5, 15, 12, 32, 3, 0
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18I0M4ORT</uniqueid>
		<timestamp>959882263</timestamp>
		<class>frmedit</class>
		<classloc>baseform_v1.vcx</classloc>
		<baseclass>form</baseclass>
		<objname>frmprimarydocparttvredit</objname>
		<parent/>
		<properties>Height = 161
Width = 423
DoCreate = .T.
WindowState = 0
cmode = 
cmeasureunitlist = 
frmprctype = 1
nouid = 0
frmdirection = 1
withbarcode = 0
Name = "frmprimarydocparttvredit"
cstmsghandler.Name = "cstmsghandler"
cstresizable.Name = "cstresizable"
Img1.Name = "Img1"
cstdatawork.Name = "cstdatawork"
</properties>
		<protected/>
		<methods>PROCEDURE _handlecntcancelsaveevent
*------------------------------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: FRMPRIMARYDOCPARTTVREDIT._HANDLECNTCANCELSAVEEVENT
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;tcMessage&gt;
* Returns.........: &lt;none&gt;
* Notes...........: &lt;~&gt;
*------------------------------------------------------------------------------
LPARAMETERS	tcMessage

LOCAL	llResSave

WITH This

*17.05.2004 02:07 -&gt;Ïðîèçâîäèì ñîõðàíåíèÿ/îòìåíÿåì èçìåíåíèÿ
IF tcMessage == [OK]
	
	*13.06.2006 18:01 -&gt; Ñîõðàíÿåì öåíó ïðîäàæè
	.SavePriceSale()
	*------------------------------------------------------------------------------
	.uRetVal = .T.
	
	IF .cMode = [DELE]
		DELETE IN lvFrmPartTvrEdit
	ENDIF

	llResSave = .cstDataWork.Save([lvFrmPartTvrEdit])

	*21.01.2004 20:01 -&gt;Îáðàáàòûâàåì ðåçóëüòàòû ñîõðàíåíèÿ
	IF llResSave
	
		*12.05.2004 03:18 -&gt;Çàïèñûâàåì â .uRetVal èäåíòèôèêàòîð äîáàâëåííîãî äîêóìåíòà
		IF .cMode = [ADD]
			.uRetVal = .cstDataWork.GetLastID([lvFrmPartTvrEdit])
		ELSE
			.uRetVal = .T.
		ENDIF
		***	
		.Hide()
		*------------------------------------------------------------------------------
		
	ELSE
	
		*01.04.2004 18:42 -&gt;Ïîïûòàåìñÿ îáðàáîòàòü îøèáêó ñîõðàíåíèÿ
		IF .cstDataWork.HandleSaveFail() &amp;&amp;åñëè îøèáêà îáðàáîòàíà
			RETURN .T.	&amp;&amp;âîçâðàùàåìñÿ ê ðåäàêòèðîâàíèþ
		ELSE
			
			*01.04.2004 18:40 -&gt;Ñîîáùàåì îá îøèáêå
			MESSAGEBOX([Â ïðîöåññå ñîõðàíåíèÿ ïðîèçîøëà îøèáêà. Èçìåíåíèÿ ñîõðàíåíû íå áóäóò.],16,[Îøèáêà...])
			*------------------------------------------------------------------------------
			
			*01.04.2004 18:40 -&gt;Îòìåíÿåì èçìåíåíèÿ
			.cstDataWork.Restore([lvFrmPartTvrEdit])
			.uRetVal = .F.
			.Hide()	
			*------------------------------------------------------------------------------
			
		ENDIF	
		*------------------------------------------------------------------------------
		
	ENDIF
	*------------------------------------------------------------------------------

ELSE

	*12.05.2004 00:36 -&gt;Îòìåíèì èçìåíåíèÿ
	.cstDataWork.Restore([lvPriceEdit])
	.cstDataWork.Restore([lvFrmPartTvrEdit])
	.uRetVal = .F.
	.Hide()
	*------------------------------------------------------------------------------
	
ENDIF
*------------------------------------------------------------------------------

ENDWITH
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE calculatepricemsu
WITH THIS

*15.06.2006 16:56 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL   lnOldMsuID, ;
		lnNewMsuID, ;
		lnCfMsu
*** lnOldMsuID = OLDVAL([MsuId],[lvFrmPartTvrEdit])
lnOldMsuID  = pnOldMsuID
lnNewMsuID = EVAL([lvFrmPartTvrEdit.MsuId])
*------------------------------------------------------------------------------

*15.06.2006 16:59 -&gt; Åäèíèöà èçìåðåíèÿ íå èçìåíèëàñü
IF lnOldMsuID = lnNewMsuID
	RETURN
ENDIF
*------------------------------------------------------------------------------

*15.06.2006 16:59 -&gt; Îïðåäåëÿåì êîýôôèöèåíò äëÿ íîâîé ÅÈ ïî îòíîøåíèþ ê ñòàðîé
lnCfMsu = spGetCfMsu(lnOldMsuID, lnNewMsuID)
lnCfMsu = IIF(lnCfMsu = 0, 1, lnCfMsu)
*------------------------------------------------------------------------------

*15.06.2006 17:01 -&gt; Ïåðåñ÷èòûâàåì öåíû è êîëè÷åñòâî â ñîîòâåòñòâèè ñ êîýôôèöèåíòîì
.cntTvrBuy.txtTvrPrcBuy.Value = ROUND(.cntTvrBuy.txtTvrPrcBuy.Value * lnCfMsu, 4)
.cntTvrSale.txtTvrPrcSale.Value = ROUND(.cntTvrSale.txtTvrPrcSale.Value * lnCfMsu, 4)
.txtQnt.Value = ROUND(.txtQnt.Value / lnCfMsu, 3)
***
IF TYPE([.txtQntNetto]) == [O] AND !ISNULL(.txtQntNetto)
.txtQntNetto.Value = ROUND(.txtQntNetto.Value / lnCfMsu, 3)
ENDIF
*------------------------------------------------------------------------------
pnOldMsuID = lnNewMsuID
ENDWITH
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE calculatesum
*------------------------------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: frmPrimaryDocPartTvrEdit.CalculateSum
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: &lt;public&gt; Ðàññ÷åò ñóìì
*------------------------------------------------------------------------------
WITH This

*23.09.2005 12:25 -&gt; Ðàñ÷¸ò ñóììû ïîñòóïëåíèÿ
.CalculateSumBuy()
*------------------------------------------------------------------------------

*23.09.2005 12:25 -&gt; Ðàñ÷¸ò ñóììû ïðîäàæè
.CalculateSumSale()
*------------------------------------------------------------------------------

ENDWITH
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE calculatesumbuy
*------------------------------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: frmPrimaryDocPartTvrEdit.CalculateSumBuy
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: &lt;public&gt; Ðàñ÷¸ò ñóììû ïîñòóïëåíèÿ
*------------------------------------------------------------------------------
WITH This

*23.09.2005 12:25 -&gt; Ðàñ÷¸ò ñóììû ïîñòóïëåíèÿ
IF TYPE([.cntTvrBuy]) == [O] AND !ISNULL(.cntTvrBuy)
	.cntTvrBuy.txtTvrPrcSumBuy.Value = ROUND(.cntTvrBuy.txtTvrPrcBuy.Value * .txtQnt.Value,2)
ENDIF
*------------------------------------------------------------------------------

ENDWITH
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE calculatesumsale
*------------------------------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: frmPrimaryDocPartTvrEdit.CalculateSumSale
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: &lt;public&gt; Ðàñ÷¸ò ñóììû ïðîäàæè
*------------------------------------------------------------------------------
WITH This

*23.09.2005 12:25 -&gt; Ðàñ÷¸ò ñóììû ïðîäàæè
IF TYPE([.cntTvrSale]) == [O] AND !ISNULL(.cntTvrSale)
	.cntTvrSale.txtTvrPrcSumSale.Value = ROUND(.cntTvrSale.txtTvrPrcSale.Value * .txtQnt.Value,2)
ENDIF
*------------------------------------------------------------------------------

ENDWITH
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE calculatevatsum
*------------------------------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: frmPrimaryDocPartTvrEdit.CalculateVatSum
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: &lt;public&gt; Ðàññ÷åò ñóììû ÍÄÑ
*------------------------------------------------------------------------------
WITH This

*23.09.2005 12:18 -&gt; Ðàññ÷åò ÍÄÑ ïîñòóïëåíèÿ
.CalculateVatSumBuy()
*------------------------------------------------------------------------------

*23.09.2005 12:19 -&gt; Ðàññ÷åò ÍÄÑ ïðîäàæè
.CalculateVatSumSale()
*------------------------------------------------------------------------------

ENDWITH
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE calculatevatsumbuy
*------------------------------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: frmPrimaryDocPartTvrEdit.CalculateVatSumBuy
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: &lt;public&gt; Ðàññ÷åò ÍÄÑ ïîñòóïëåíèÿ
*------------------------------------------------------------------------------
WITH This

*23.09.2005 12:16 -&gt; Ðàññ÷åò ÍÄÑ ïîñòóïëåíèÿ
IF TYPE([.cntTvrBuy])==[O] AND !ISNULL(.cntTvrBuy)
	IF .cntTvrVat.txtTvrVATRate.Value # 0
		.cntTvrBuy.txtTvrVATSumBuy.Value = ROUND(.cntTvrBuy.txtTvrPrcSumBuy.Value * .cntTvrVat.txtTvrVATRate.Value / (100 + .cntTvrVat.txtTvrVATRate.Value),2)
	ELSE
		.cntTvrBuy.txtTvrVATSumBuy.Value = 0
	ENDIF
ENDIF
*------------------------------------------------------------------------------

ENDWITH
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE calculatevatsumsale
*------------------------------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: frmPrimaryDocPartTvrEdit.CalculateVatSumSale
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: &lt;public&gt; Ðàññ÷åò ÍÄÑ ïðîäàæè
*------------------------------------------------------------------------------
WITH This

*23.09.2005 12:17 -&gt; Ðàññ÷åò ÍÄÑ ïðîäàæè
IF TYPE([.cntTvrSale])==[O] AND !ISNULL(.cntTvrSale)
	IF .cntTvrVat.txtTvrVATRate.Value # 0
		.cntTvrSale.txtTvrVATSumSale.Value = ROUND(.cntTvrSale.txtTvrPrcSumSale.Value * .cntTvrVat.txtTvrVATRate.Value / (100 + .cntTvrVat.txtTvrVATRate.Value),2)
	ELSE
		.cntTvrSale.txtTvrVATSumSale.Value = 0
	ENDIF
ENDIF
*------------------------------------------------------------------------------

ENDWITH
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE cntenable
*------------------------------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: frmPrimaryDocPartTvrEdit.cntEnable
* Called by.......: &lt;frmPrimaryDocPartTvrEdit.Init&gt;
* Parameters......: &lt;tcObjectName - èìÿ îáúåêòà-êîíòåéíåðà,
*					 tnTop - âûñîòà îáúåêòà-êîíòåéíåðà&gt;
* Returns.........: &lt;lnNewTop&gt;
* Notes...........: Ðàçìåùåíèå íà ôîðìå êîíòåéíåðîâ ñîäåðæàùèõ öåíû, ñóììû, ÍÄÑ
*------------------------------------------------------------------------------
LPARAMETERS tcObjectName, tnTop

WITH This

*01.09.2005 12:23 -&gt; Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL lnNewTop
*------------------------------------------------------------------------------

*01.09.2005 12:00 -&gt; Íàñòðîèì âíåøíèé âèä îáúåêòà
.&amp;tcObjectName..Visible = .T.
***
.&amp;tcObjectName..Left = 5
.&amp;tcObjectName..Top = tnTop
***
lnNewTop = .&amp;tcObjectName..Top + .&amp;tcObjectName..Height + 5
*------------------------------------------------------------------------------

*01.09.2005 12:23 -&gt; Âîçâðàùàåì ðåçóëüòàò
RETURN lnNewTop
*------------------------------------------------------------------------------

ENDWITH
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE Destroy
*------------------------------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: Tovar_v1.vcx
* Class.Module....: frmPrimaryDocPartTvrEdit.Destroy
* Called by.......: &lt;Sys Event&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........:
*------------------------------------------------------------------------------
WITH This

*12.01.2006 11:48 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL   lcIndependetFNM, ;
		lcDependetFNM
***
lcIndependetFNM = LEFT(.cMeasureUnitList,AT([;],.cMeasureUnitList)-1)
lcDependetFNM	= RIGHT(.cMeasureUnitList,LEN(.cMeasureUnitList)-AT([;],.cMeasureUnitList))
*------------------------------------------------------------------------------

*11.01.2006 17:05 -&gt;Çàêðîåì ñïðàâî÷íèê áàçîâûõ ÅÈ
USE IN SELECT([lvTvrMsuList])
*------------------------------------------------------------------------------

*12.01.2006 11:53 -&gt;Óäàëèì ñïðàâî÷íèêè
IF FILE([tmp\]+lcIndependetFNM+[.dbf])
ERASE ([tmp\]+lcIndependetFNM+[.dbf])
ENDIF
***
IF FILE([tmp\]+lcDependetFNM+[.dbf])
ERASE ([tmp\]+lcDependetFNM+[.dbf])
ENDIF
*------------------------------------------------------------------------------

*11.01.2006 17:05 -&gt;Âûïîëíèì ìåòîä ðîäèòåëüñêîãî êëàññà
DODEFAULT()
*------------------------------------------------------------------------------
RELEASE pnOldMsuID
ENDWITH
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE Init
*------------------------------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: FRMPRIMARYDOCPARTTVREDIT.INIT
* Called by.......: &lt;Sys Event&gt;
* Parameters......: &lt;tcCommand,tuParam1&gt;
* Returns.........: &lt;none&gt;
* Notes...........: &lt;~&gt;
*------------------------------------------------------------------------------
LPARAMETERS	tcCommand,tuParam1

*17.05.2004 01:26 -&gt;Âûïîëíèì ìåòîä ðîäèòåëüñêîãî êëàññà
DODEFAULT()
*------------------------------------------------------------------------------

WITH This

*12.05.2004 03:12 -&gt;Ñîõðàíèì êîìàíäó (ðåæèì ðàáîòû ñ äàííûìè)
.cMode = UPPER(ALLTRIM(tcCommand))
*------------------------------------------------------------------------------

*12.05.2004 00:33 -&gt;Çàãðóçèì äàííûå â Alias äëÿ ðåäàêòèðîâàíèÿ
DO CASE

	CASE .cMode==[ADD]
		
		*12.05.2004 00:32 -&gt;Äîáàâèì ïóñòóþ çàïèñü
		APPEND BLANK IN lvFrmPartTvrEdit
		*------------------------------------------------------------------------------

		*12.05.2004 02:39 -&gt;Çàïèøåì èäåíòèôèêàòîð ðîäèòåëüñêîãî äîêóìåíòà
		REPLACE FrmID WITH tuParam1 IN lvFrmPartTvrEdit
		*------------------------------------------------------------------------------
		
	CASE INLIST(.cMode,[EDIT],[INFO],[DELE])
		
		*12.05.2004 00:31 -&gt;Çàãðóçèì äàííûå ñóùåñòâóþùåé çàïèñè
		_PARAM = tuParam1
		***
		REQUERY([lvFrmPartTvrEdit])
		*------------------------------------------------------------------------------
		
ENDCASE
*------------------------------------------------------------------------------
PUBLIC pnOldMsuID
pnOldMsuID  = lvFrmPartTvrEdit.MsuId
*01.09.2005 15:28 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	lnTop, ;
		lnOldTop
***
lnTop = .shpQnt.Top + .shpQnt.Height + 5
lnOldTop = lnTop
*------------------------------------------------------------------------------

*19.08.2005 12:16 -&gt; Çàêðîåì Alias
USE IN IIF(USED([lvFrmTypeInfoByFrm]),[lvFrmTypeInfoByFrm],0)
*------------------------------------------------------------------------------

*19.08.2005 12:12 -&gt; Îòêðîåì Alias ñ èíôîðìàöèåé î òèïå äîêóìåíòà
_PARAM = lvFrmPartTvrEdit.FrmID
***
USE lvFrmTypeInfoByFrm IN 0
*------------------------------------------------------------------------------

*07.08.2006 10:09 -&gt;Îïðåäåëèì OU ïî ID ôîðìû
USE lvFrmEdit IN 0
***
DO CASE
	CASE lvFrmTypeInfoByFrm.FrmTypeDirection = 2
		.nOUID = lvFrmEdit.PointIspOUID
	CASE INLIST(lvFrmTypeInfoByFrm.FrmTypeDirection,1,3)
		.nOUID = lvFrmEdit.PointEmiOUID
ENDCASE
.frmdirection = lvFrmTypeInfoByFrm.FrmTypeDirection
*------------------------------------------------------------------------------

*15.06.2006 15:45 -&gt; Ñîõðàíÿåì òèï ïðàéñà äëÿ äîêóìåíòà
.FrmPrcType = IIF(ISNULL(lvFrmTypeInfoByFrm.FrmPrcTypeID),1,lvFrmTypeInfoByFrm.FrmPrcTypeID)
*------------------------------------------------------------------------------

*01.02.2006 12:25 -&gt;Ïîêàæåì êîíòåéíåð ñî ñðîêîì ãîäíîñòè
IF lvFrmTypeInfoByFrm.FrmTypeID = 1
	lnTop = .CntEnable([cntTvrExpDate],lnTop)
ENDIF
*------------------------------------------------------------------------------

*01.09.2005 15:24 -&gt; Äîáàâëÿåì êîíòåéíåð ñ öåíîé ïîñòóïëåíèÿ
IF lvFrmTypeInfoByFrm.ContainPriceBuy
	lnTop = .CntEnable([cntTvrBuy],lnTop)
ENDIF
*------------------------------------------------------------------------------
*01.09.2005 15:25 -&gt; Äîáàâëÿåì êîíòåéíåð ñ öåíîé ïðîäàæè
IF lvFrmTypeInfoByFrm.ContainPriceSale
	lnTop = .CntEnable([cntTvrSale],lnTop)
ENDIF
*------------------------------------------------------------------------------

*01.09.2005 15:29 -&gt; Íà ôîðìå ïðîèçîøëè èçìåíåíèÿ
IF lnTop # lnOldTop
	*{
	lnTop = .CntEnable([cntTvrVat],lnTop)
	***
	.cntCancelSaveHandled.Top = lnTop
	.cmdPrice.Top = lnTop
	.Height = .cntCancelSaveHandled.Top + .cntCancelSaveHandled.Height + 5
	*}
ENDIF
*------------------------------------------------------------------------------

*01.09.2005 16:11 -&gt; Ïðîñ÷èòàåì ñóììû è ÍÄÑ
.CalculateSum()
.CalculateVatSum()
*------------------------------------------------------------------------------

*19.08.2005 12:15 -&gt; Íàñòðîèì âíåøíèé âèä ôîðìû
DO CASE
	CASE .cMode = [ADD]
		.Caption = [Äîáàâëåíèå]
		.Icon = FULLPATH([frmprimarydocadd.ico])
		** ïðîâåðêà íà ïðåäïî÷òåíèå ðàáîòàòü ñî øòðèõ-êîäîì
		.withBarCode = VAL(oRes.GetParam([SET],[WITHBAR]))
		IF  .withBarCode = 0
			.cntIdCtlGridTvr.SetFocus()
			KEYBOARD '{ALT+DNARROW}'
		ENDIF
		*.cntcdCtlGridTvr.cmdShow.Click()
	CASE .cMode = [EDIT]
		.Caption = [Ðåäàêòèðîâàíèå]
		.Icon = FULLPATH([frmprimarydocedit.ico])
	CASE .cMode = [INFO]
		.Caption = [Ïðîñìîòð]
		.Icon = FULLPATH([frmprimarydocinfo.ico])
		ThisForm.cntCancelSaveHandled.cmdOk.Enabled = .F.
	CASE .cMode = [DELE]
		.Caption = [Óäàëåíèå]
		.Icon = FULLPATH([frmprimarydocdele.ico])
		ThisForm.cntCancelSaveHandled.cmdOk.Caption = [Óäàëèòü]
ENDCASE
***
.Caption = .Caption + [ òîâàðíîé ïîçèöèè äîêóìåíòà]
*------------------------------------------------------------------------------
LOCAL lnTreeTvr
*-- îïðåäåëèì âèä ñïðàâî÷íèêà òîâàðîâ: ïëîñêèé 0 èëè äåðåâî 1
*!*	lnTreeTvr = VAL(oRes.GetParam([BASIS],[TREESHOW]))
*!*	IF lnTreeTvr &gt;0
*!*	     this.cntIdCtlGridTvr.Enabled= .F.
*!*	     this.cntIdCtlGridTvr.Visible= .F.
*!*	     this.cntIdCtlGridTvrT.Enabled= .T.
*!*	     this.cntIdCtlGridTvrT.Visible= .T.
*!*	      SELECT  * FROM TovarListTMP INTO CURSOR TovarList
*!*	   ELSE
*!*	      SELECT  * FROM TovarListTMP INTO CURSOR TovarList WHERE NOT TvrTypeIsCnt
*!*	ENDIF
ENDWITH
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE Load
*------------------------------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: FRMPRIMARYDOCPARTTVREDIT.LOAD
* Called by.......: &lt;Sys Event&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: &lt;~&gt;
*------------------------------------------------------------------------------

*17.05.2004 01:32 -&gt;Âûïîëíèì ìåòîä ðîäèòåëüñêîãî êëàññà
DODEFAULT()
*------------------------------------------------------------------------------

*17.05.2004 01:32 -&gt;Îòêðîåì ÁÄ è óñòàíîâèì å¸ â êà÷åñòâå òåêóùåé
IF !DBUSED([BASIS])
	OPEN DATABASE BASIS
ENDIF
***
SET DATABASE TO BASIS
*------------------------------------------------------------------------------

*17.05.2004 01:32 -&gt;Îòêðîåì Alias äëÿ ðåäàêòèðîâàíèÿ áåç äàííûõ
USE lvFrmPartTvrEdit IN 0 NODATA
*------------------------------------------------------------------------------

*17.05.2004 01:34 -&gt; Îòêðûâàåì ñïðàâî÷íèêè
USE lvTovarList IN 0 ALIAS TovarList
USE lvTovarList IN 0 ALIAS TovarListOnly
SELECT TovarListOnly
SET FILTER TO INLIST(TovarListOnly.TvrTypeId,1,7)

*SELECT * FROM TovarList WHERE TovarList.TvrTypeId NOT IN (1,7) INTO CURSOR TovarListOnly

USE lvCurTypeList IN 0
USE lvtvrsetbmps IN 0
***
This.cMeasureUnitList = spGetBaseMsuList(0)
USE (LEFT(This.cMeasureUnitList,AT([;],This.cMeasureUnitList)-1)) IN 0 ALIAS lvTvrMsuList
*------------------------------------------------------------------------------

*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE Refresh
DODEFAULT()
*!*		IF this.cMode = [ADD]
*!*			this.cntIdCtlGridTvr.SetFocus()
*!*			this.cntcdCtlGridTvr.cmdShow.Click()
*!*		ENDIF

ENDPROC
PROCEDURE Resize
NODEFAULT
ENDPROC
PROCEDURE savepricesale
*------------------------------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: frmPrimaryDocPartTvrEdit.SavePriceSale
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Ñîõðàíåíèå öåíû ïðîäàæè
*------------------------------------------------------------------------------
WITH This
*08.06.2006 10:06 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	llDataWasChanged, ;
		llResSave
***
llResSave = .F.
*------------------------------------------------------------------------------

*07.06.2006 17:10 -&gt; Êîëè÷åñòâî çàïèñåé î öåíàõ îòëè÷íî îò íóëÿ
IF .cntTvrSale.Visible AND RECCOUNT([lvPriceEdit]) # 0

	*07.06.2006 16:26 -&gt; Ïðîèçâåäåì ñîõðàíåíèå öåíû ïðîäàæè
	IF .cMode # [DELE]

		*07.06.2006 16:27 -&gt; Ïðîâåðèì èçìåíèëèñü ëè äàííûå
		llDataWasChanged = .cstDataWork.DataChanged([lvPriceEdit],.T.)
		*------------------------------------------------------------------------------

		*07.06.2006 16:29 -&gt; Âûïîëíÿåì ñîõðàíåíèå åñëè ïîëüçîâàòåëü ðàçðåøèò ñîõðàíåíèå
		IF llDataWasChanged AND MESSAGEBOX([Ñîõðàíèòü öåíó ïðîäàæè â ïðàéñå?],4+32,[Ñîõðàíåíèå])=6

			*07.06.2006 16:47 -&gt; Ïîïûòàåìñÿ ñîõðàíèòü öåíó
			llResSave = .cstDataWork.Save([lvPriceEdit])
			*------------------------------------------------------------------------------

		ENDIF	
		*------------------------------------------------------------------------------

	ENDIF
	*------------------------------------------------------------------------------
	
	*02.04.2004 17:00 -&gt; Îêàòèì èçìåíåíèÿ
	IF !llResSave
		.cstDataWork.Restore([lvPriceEdit])
	ENDIF
	*------------------------------------------------------------------------------

	*07.06.2006 16:48 -&gt; Çàêðîåì Alias äëÿ ðåäàêòèðîâàíèÿ öåí è îòêðîåì ñíîâà áåç äàííûõ
	USE IN SELECT([lvPriceEdit])
	***
	USE lvPriceEdit IN 0 NODATA
	*------------------------------------------------------------------------------

ENDIF
*------------------------------------------------------------------------------

ENDWITH
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1>Class</reserved1>
		<reserved2>18</reserved2>
		<reserved3>cmode
cmeasureunitlist
frmprctype Íîìåð ïðàéñà äëÿ ýòîãî äîêóìåíòà
nouid èäåíòèôèêàòîð ïîäðàçäåëåíèÿ, ïî êîòîðîìó áóäåò ïðîèñõîäèòü äâèæåíèå òîâàðà
frmdirection Íàïðàâëåíèå äîêóìåíòà
withbarcode Ïðåäïî÷òåíèå â ðàáîòå ñî øòðèõ-êîäîì
*cntenable 
*calculatesum &lt;public&gt; Ðàññ÷åò ñóìì
*calculatevatsumbuy &lt;public&gt; Ðàññ÷åò ÍÄÑ ïîñòóïëåíèÿ
*calculatevatsumsale &lt;public&gt; Ðàññ÷åò ÍÄÑ ïðîäàæè
*calculatevatsum &lt;public&gt; Ðàññ÷åò ñóììû ÍÄÑ
*calculatesumbuy &lt;public&gt; Ðàññ÷åò ñóììû ïîñòóïëåíèÿ
*calculatesumsale &lt;public&gt; Ðàññ÷åò ñóììû ïðîäàæè
*calculatepricemsu ðàññ÷åò öåíû åäèíèöû èçìåðåíèÿ
*savepricesale 
</reserved3>
		<reserved4/>
		<reserved5/>
		<reserved6>Pixels</reserved6>
		<reserved7>Ðåäàêòèðîóåì ÷àñòü ôîðìû - òîâàð</reserved7>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1MV0RE0B7</uniqueid>
		<timestamp>959882263</timestamp>
		<class>cnttvrvat</class>
		<classloc>primarydoc_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>CntTvrVat</objname>
		<parent>frmprimarydocparttvredit</parent>
		<properties>Top = 72
Left = 5
Visible = .F.
TabIndex = 7
ZOrderSet = 0
Name = "CntTvrVat"
shpVat.Name = "shpVat"
lblTvrVATRate.Name = "lblTvrVATRate"
txtTvrVATRate.Name = "txtTvrVATRate"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1Q20QIAM4</uniqueid>
		<timestamp>959882263</timestamp>
		<class>cnttvrexpdate</class>
		<classloc>primarydoc_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>cntTvrExpDate</objname>
		<parent>frmprimarydocparttvredit</parent>
		<properties>Top = 71
Left = 5
Height = 33
Visible = .F.
TabIndex = 8
ZOrderSet = 1
Name = "cntTvrExpDate"
shpExpDate.Name = "shpExpDate"
lblTvrExpDate.Name = "lblTvrExpDate"
comTxtCtlCalendarExpDate.txtText.Name = "txtText"
comTxtCtlCalendarExpDate.cmdShow.Name = "cmdShow"
comTxtCtlCalendarExpDate.Name = "comTxtCtlCalendarExpDate"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18A02DMUV</uniqueid>
		<timestamp>959882263</timestamp>
		<class>shp</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>shape</baseclass>
		<objname>shpTvr</objname>
		<parent>frmprimarydocparttvredit</parent>
		<properties>Top = 5
Left = 5
Height = 61
Width = 413
SpecialEffect = 0
ZOrderSet = 5
Name = "shpTvr"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1ON0L3DWH</uniqueid>
		<timestamp>959882263</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblTLU</objname>
		<parent>frmprimarydocparttvredit</parent>
		<properties>FontBold = .T.
Caption = "Øòðèõ-êîä:"
Left = 108
Top = 13
TabIndex = 12
ZOrderSet = 6
Name = "lblTLU"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1LE0P5JD7</uniqueid>
		<timestamp>959882263</timestamp>
		<class>comtxtctlcalclentluidbytlu</class>
		<classloc>primarydoc_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>comTxtCtlCalcLenTLUIDByTLU</objname>
		<parent>frmprimarydocparttvredit</parent>
		<properties>Top = 10
Left = 179
Width = 233
Height = 23
TabIndex = 1
ZOrderSet = 7
Name = "comTxtCtlCalcLenTLUIDByTLU"
txtText.Height = 23
txtText.Left = 0
txtText.Top = 0
txtText.Width = 169
txtText.NullDisplay = "Øòðèõêîä íåîïðåäåëåííûé"
txtText.Name = "txtText"
lblLen.Left = 171
lblLen.Top = 3
lblLen.Name = "lblLen"
cmdFind.Top = 0
cmdFind.Left = 188
cmdFind.Name = "cmdFind"
cmdClear.Top = 0
cmdClear.Left = 211
cmdClear.Name = "cmdClear"
</properties>
		<protected/>
		<methods>PROCEDURE _handleanychange
*15.06.2006 16:50 -&gt; Îáíîâèì òîâàð è ïåðåéäåì â ïîëå ðåäàêòèðîâàíèÿ êîëè÷åñòâà
WITH Thisform
	.cntIdCtlGridTvr.SetValue(This.nTvrID)
	CLEAR TYPEAHEAD
	.txtQnt.SetFocus()
ENDWITH
*------------------------------------------------------------------------------
ENDPROC
PROCEDURE Refresh
PARAMETERS tnTvrID
IF this.ntvrid=0 AND (PCOUNT()=0 OR tnTvrID = -3 )
		This.txtText.Value = lvFrmPartTvrEdit.FrmPartTvrNote
ENDIF

IF PCOUNT()&gt;0 &amp;&amp; AND tnTvrID &lt;&gt; -3

	*15.06.2006 16:47 -&gt; Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
	PRIVATE	_PARAM
	***
	_PARAM = IIF(this.ntvrid=0,tnTvrID,this.ntvrid)
	*------------------------------------------------------------------------------

	*19.08.2005 11:37 -&gt; Íàéä¸ì ØÊ ïî èäåíòèôèêàòîðó òîâàðà
	IF USED([lvTovarLookUpByID])
		REQUERY([lvTovarLookUpByID])
	ELSE
		USE lvTovarLookUpByID IN 0
	ENDIF
	***
	IF RECCOUNT([lvTovarLookUpByID]) &gt; 0
		This.txtText.Value = lvTovarLookUpByID.TLU
	ELSE
		This.txtText.Value = .NULL.
	ENDIF
	*------------------------------------------------------------------------------
	
ENDIF

*15.06.2006 16:49 -&gt; Âûïîëíèì ìåòîä ðîäèòåëüñêîãî êëàññà
DODEFAULT()
*------------------------------------------------------------------------------
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18I0M4ORT</uniqueid>
		<timestamp>959882263</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblTvr</objname>
		<parent>frmprimarydocparttvredit</parent>
		<properties>FontBold = .T.
Caption = "Òîâàð:"
Left = 10
Top = 41
TabIndex = 13
ZOrderSet = 8
Name = "lblTvr"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1ON0L3DWH</uniqueid>
		<timestamp>959882263</timestamp>
		<class>cntidctlgrid</class>
		<classloc>comidctl_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>cntIdCtlGridTvr</objname>
		<parent>frmprimarydocparttvredit</parent>
		<properties>Top = 38
Left = 60
Width = 352
Height = 23
TabIndex = 2
ZOrderSet = 9
_controlsource = lvFrmPartTvrEdit.TvrId
_controlsourcetype = 1
_rsaliasname = TovarList
_rsfieldnameid = TvrID
_rsfieldnametext = TvrNM
_grdinfoparams = oMgrTovar;TVR;INFO
_grdaddparams = oMgrTovar;TVR;FASTADD;0;lvTvrInCntViewRepl
_selectobjectt = frmidctltreetvr;primarydoc_v1;primarydoc.app
Name = "cntIdCtlGridTvr"
txtText.Height = 22
txtText.Left = 0
txtText.Top = 0
txtText.Width = 281
txtText._highlightobject = .parent.parent.lblTvr
txtText.Name = "txtText"
cmdShow.Top = 0
cmdShow.Left = 307
cmdShow.Name = "cmdShow"
cmdClear.Top = 0
cmdClear.Left = 330
cmdClear.Name = "cmdClear"
CmdTree.Top = 0
CmdTree.Left = 283
CmdTree.Enabled = .T.
CmdTree.Visible = .T.
CmdTree.Name = "CmdTree"
Olecommprox1.Top = 0
Olecommprox1.Left = 36
Olecommprox1.Height = 16
Olecommprox1.Width = 38
Olecommprox1.Name = "Olecommprox1"
</properties>
		<protected/>
		<methods>PROCEDURE _refreshrelatedobjects
*------------------------------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRINARYDOC_V1.VCX
* Class.Module....: CNTIDCTLGRIDTVR._RefreshRelatedObjects
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Îáðàáîòêà èçìåíåíèÿ çíà÷åíèÿ ýëåìåíòà.
*------------------------------------------------------------------------------

*19.08.2005 12:31 -&gt; Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	lnTvrID, ;
		lcMsuTNM, ;
		lcIndependetFNM, ;
		lcDependetFNM, ;
		_PARAM, ;
		_PARAM_PRCTYPE
		
***
lnTvrID = This.Value
*------------------------------------------------------------------------------

WITH ThisForm

*06.09.2005 17:18 -&gt; Çàïèñûâàåì èäåíòèôèêàòîð òîâàðà
.comTxtCtlCalcLenTLUIDByTLU.nTvrID = lnTvrID
.comTxtCtlCalcLenTLUIDByTLU.Refresh(lnTvrID)
.LblTvrId.Caption = ALLTRIM(STR(lnTvrID,10,0))
*------------------------------------------------------------------------------

*17.04.2004 14:52 -&gt;Ïîëó÷èì èíôîðìàöèþ î âûáðàííîì òîâàðå
USE IN IIF(USED([lvTovarInfo]),[lvTovarInfo],0)
***
_PARAM = lnTvrID
_PARAM_PRCTYPE = .FrmPrcType
USE lvTovarInfo IN 0
*------------------------------------------------------------------------------

*11.01.2006 17:05 -&gt;Çàêðîåì ñïðàâî÷íèê áàçîâûõ ÅÈ
USE IN SELECT([lvTvrMsuList])

*16.01.2006 14:38 -&gt;Îïðåäåëèì íàçâàíèÿ òàáëèö ñî ñïðàâî÷íèêàìè
lcIndependetFNM = LEFT(.cMeasureUnitList,AT([;],.cMeasureUnitList)-1)
lcDependetFNM	= RIGHT(.cMeasureUnitList,LEN(.cMeasureUnitList)-AT([;],.cMeasureUnitList))
*------------------------------------------------------------------------------

*12.01.2006 11:53 -&gt;Óäàëèì ñïðàâî÷íèêè
IF FILE([tmp\]+lcIndependetFNM+[.dbf])
ERASE ([tmp\]+lcIndependetFNM+[.dbf])
ENDIF
***
IF FILE([tmp\]+lcDependetFNM+[.dbf])
ERASE ([tmp\]+lcDependetFNM+[.dbf])
ENDIF
*------------------------------------------------------------------------------

.cMeasureUnitList = spGetBaseMsuList(lvTovarInfo.MsuID)
lcMsuTNM = RIGHT(.cMeasureUnitList,LEN(.cMeasureUnitList)-AT([;],.cMeasureUnitList))
USE (lcMsuTNM) IN 0 ALIAS [lvTvrMsuList]
*------------------------------------------------------------------------------

*17.04.2004 14:53 -&gt;Óñòàíàâëèâàåì åäèíèöó èçìåðåíèÿ ïî óìîë÷àíèþ
IF .cMode==[ADD] AND lvTovarInfo.MsuID # 0 &amp;&amp; AND .cntIdCtlGridMsu.Value = 0
	.cntIdCtlGridMsu.SetValue(lvTovarInfo.MsuID)
ENDIF	
*------------------------------------------------------------------------------

*17.04.2004 15:06 -&gt; Óñòàíîâèì âåëè÷èíó ÍÄÑ ïî óìîë÷àíèþ
IF .cMode==[ADD] OR .cntTvrVat.txtTvrVATRate.Value =0
		***IF .cntTvrVat.txtTvrVATRate.Value # lvTovarInfo.tvrVATRate
	.cntTvrVat.txtTvrVATRate.Value = lvTovarInfo.tvrVATRate
ENDIF	
*------------------------------------------------------------------------------

*01.09.2005 17:26 -&gt; Óñòàíàâëèâàåì öåíû
IF TYPE([ThisForm.cntTvrBuy]) == [O] AND !ISNULL(.cntTvrBuy)
	.cntTvrBuy.SetPrice(.nOUID,lnTvrID)
ENDIF
***
IF TYPE([ThisForm.cntTvrSale]) == [O] AND !ISNULL(.cntTvrSale) AND TYPE([.FrmPrcType]) == [N]
	IF .FrmPrcType = 0 OR EMPTY(.FrmPrcType) OR ISNULL(.FrmPrcType)
		MESSAGEBOX([Ïðàéñ äëÿ äàííîãî äîêóìåíòà íå íàéäåí.],48,[Ïðåäóïðåæäåíèå])
	ELSE
		.cntTvrSale.SetPrice(lnTvrID,.FrmPrcType)
	ENDIF
ENDIF
*------------------------------------------------------------------------------

ENDWITH
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE cmdShow.Click
this.Parent._rsaliasname = 'TovarListOnly'
SELECT TovarListOnly
LOCATE ALL FOR TovarListOnly.TvrId = lvFrmPartTvrEdit.TvrId
DODEFAULT()
this.Parent._rsaliasname = 'TovarList'

ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18A02DMUV</uniqueid>
		<timestamp>959882263</timestamp>
		<class>shp</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>shape</baseclass>
		<objname>shpQnt</objname>
		<parent>frmprimarydocparttvredit</parent>
		<properties>Top = 71
Left = 5
Height = 61
Width = 413
SpecialEffect = 0
ZOrderSet = 10
Name = "shpQnt"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18I0M4ORT</uniqueid>
		<timestamp>959882263</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblQnt</objname>
		<parent>frmprimarydocparttvredit</parent>
		<properties>FontBold = .T.
Caption = "Êîëè÷åñòâî:"
Left = 10
Top = 107
TabIndex = 15
ZOrderSet = 11
Name = "lblQnt"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_R020K4VL1</uniqueid>
		<timestamp>929647805</timestamp>
		<class>txt</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>txtQnt</objname>
		<parent>frmprimarydocparttvredit</parent>
		<properties>ControlSource = "lvFrmPartTvrEdit.TvrQnt"
Left = 140
TabIndex = 4
Top = 104
ZOrderSet = 12
_highlightobject = .parent.lblQnt
_convertcommatopoint = .T.
_usedbfieldproperty = .T.
Name = "txtQnt"
</properties>
		<protected/>
		<methods>PROCEDURE _handleanychange
*17.01.2006 09:52 -&gt;Ðàññ÷èòàåì ñóììû
ThisForm.CalculateSum()
*------------------------------------------------------------------------------
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18A02PAKD</uniqueid>
		<timestamp>959882263</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblMsu</objname>
		<parent>frmprimarydocparttvredit</parent>
		<properties>FontBold = .T.
Caption = "Åäèíèöà èçìåðåíèÿ:"
Left = 10
Top = 79
TabIndex = 14
ZOrderSet = 13
Name = "lblMsu"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18A02DMUV</uniqueid>
		<timestamp>959882263</timestamp>
		<class>cntidctlgrid</class>
		<classloc>comidctl_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>cntIdCtlGridMsu</objname>
		<parent>frmprimarydocparttvredit</parent>
		<properties>Top = 76
Left = 140
TabIndex = 3
ZOrderSet = 14
_controlsource = lvFrmPartTvrEdit.MsuId
_controlsourcetype = 1
_rsaliasname = lvTvrMsuList
_rsfieldnameid = MsuID
_rsfieldnametext = MsuNM
Name = "cntIdCtlGridMsu"
txtText._highlightobject = .parent.parent.lblMsu
txtText.Name = "txtText"
cmdShow.Name = "cmdShow"
cmdClear.Name = "cmdClear"
CmdTree.Name = "CmdTree"
Olecommprox1.Top = 0
Olecommprox1.Left = 36
Olecommprox1.Height = 16
Olecommprox1.Width = 38
Olecommprox1.Name = "Olecommprox1"
</properties>
		<protected/>
		<methods>PROCEDURE _refreshrelatedobjects
*30.09.2005 12:25 -&gt; Ðàñ÷¸ò öåíû åäèíèöû èçìåðåíèÿ
ThisForm.CalculatePriceMsu()
ThisForm.CalculateSum()
*------------------------------------------------------------------------------
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1MV0RE0BB</uniqueid>
		<timestamp>959882263</timestamp>
		<class>cnttvrbuy</class>
		<classloc>primarydoc_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>CntTvrBuy</objname>
		<parent>frmprimarydocparttvredit</parent>
		<properties>Top = 71
Left = 5
Visible = .F.
TabIndex = 5
ZOrderSet = 15
Name = "CntTvrBuy"
ShpBuy.Name = "ShpBuy"
lblTvrPrcBuy.Name = "lblTvrPrcBuy"
txtTvrPrcBuy.Name = "txtTvrPrcBuy"
lblTvrPrcSumBuy.Name = "lblTvrPrcSumBuy"
txtTvrPrcSumBuy.Name = "txtTvrPrcSumBuy"
lblTvrVATSumBuy.Name = "lblTvrVATSumBuy"
txtTvrVATSumBuy.Name = "txtTvrVATSumBuy"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1MV0RE0B8</uniqueid>
		<timestamp>959882263</timestamp>
		<class>cnttvrsale</class>
		<classloc>primarydoc_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>CntTvrSale</objname>
		<parent>frmprimarydocparttvredit</parent>
		<properties>Top = 71
Left = 5
Visible = .F.
TabIndex = 6
ZOrderSet = 16
Name = "CntTvrSale"
ShpSale.Name = "ShpSale"
lblTvrPrcSale.Name = "lblTvrPrcSale"
txtTvrPrcSale.Name = "txtTvrPrcSale"
txtTvrPrcSumSale.Name = "txtTvrPrcSumSale"
txtTvrVATSumSale.Name = "txtTvrVATSumSale"
lblTvrPrcSumSale.Name = "lblTvrPrcSumSale"
lblTvrVATSumSale.Name = "lblTvrVATSumSale"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18M0216E7</uniqueid>
		<timestamp>959882263</timestamp>
		<class>cntcancelsavehandled</class>
		<classloc>baseform_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>cntCancelSaveHandled</objname>
		<parent>frmprimarydocparttvredit</parent>
		<properties>Top = 132
Left = 213
TabIndex = 10
ZOrderSet = 17
Name = "cntCancelSaveHandled"
cmdCancel.Name = "cmdCancel"
cmdOk.Name = "cmdOk"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_26Q0OOOIP</uniqueid>
		<timestamp>959882263</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>LblTvrId</objname>
		<parent>frmprimarydocparttvredit</parent>
		<properties>FontBold = .T.
Caption = "Êîä òîâàðà"
Left = 10
Top = 13
TabIndex = 11
ZOrderSet = 6
Name = "LblTvrId"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1VG0YR07S</uniqueid>
		<timestamp>929647872</timestamp>
		<class>cmd</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>cmdPrice</objname>
		<parent>frmprimarydocparttvredit</parent>
		<properties>Top = 132
Left = 109
Caption = "Ïîëó÷èòü öåíó"
TabIndex = 9
ToolTipText = "Îïðåäåëÿåì ïîñëåäíþþ öåíó ïîñòóïëåíèÿ"
Name = "cmdPrice"
</properties>
		<protected/>
		<methods>PROCEDURE Click
WITH This.Parent
	.cntTvrBuy.SetPrice(.nOUID,.comTxtCtlCalcLenTLUIDByTLU.nTvrID,.T.)
ENDWITH

ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>COMMENT</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>0</timestamp>
		<class/>
		<classloc/>
		<baseclass/>
		<objname>frmprimarydocparttvredit</objname>
		<parent/>
		<properties>Arial, 0, 9, 5, 15, 12, 32, 3, 0
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_0VL0XXSOC</uniqueid>
		<timestamp>960910408</timestamp>
		<class>custom</class>
		<classloc/>
		<baseclass>custom</baseclass>
		<objname>interface</objname>
		<parent/>
		<properties>Height = 17
Width = 98
Name = "interface"
</properties>
		<protected>form_view
form_add
form_edit
form_prndoc
partfrm_add
partfrm_edit
paydoc_exchange
</protected>
		<methods>PROCEDURE form_add
*-------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: MGRPRIMARYDOC.FORM_ADD
* Called by.......: &lt;.Operate()&gt;
* Parameters......: &lt;tuScrFrmID (optional) - èäåíòèôèêàòîð ôîðìû äëÿ ïðîñìîòðà ïåðâè÷íûõ äîêóìåíòîâ
*					 tuFrmTypeID (optional) - òèï ïåðâè÷íîãî äîêóìåíòà ïî óìîë÷àíèþ
* Returns.........: &lt;luResultAdding&gt;
* Notes...........: Äîáàâëåíèå íîâîãî äîêóìåíòà.
*-------------------------------------------------------
LPARAMETERS	tuScrFrmID, tuFrmTypeID ,;			
			tuParam2, ;
			tuParam3
*19.05.2004 20:59 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	_PARAM, ;
		lnAddFormType, ;
		luResultSelectType, ;
		luResultAdding
*------------------------------------------------------------------------------
*19.05.2004 21:00 -&gt;Åñëè ïåðåäàí èäåíòèôèêàòîð ôîðìû äëÿ ïðîñìîòðà ïåðâè÷íûõ äîêóìåíòîâ
IF TYPE([tuScrFrmID])==[N] AND !EMPTY(tuScrFrmID)
	
	*19.05.2004 20:59 -&gt;Ïðîâåðèì íåîáõîäèìîñòü îòîáðàæåíèÿ ôîðìû äëÿ âûáðà òèïà äîáàâëÿåìîãî äîêóìåíòà
	USE IN IIF(USED([lvFrmTypeListByScrFrm]),[lvFrmTypeListByScrFrm],0)
	***
	_PARAM = tuScrFrmID
	USE Basis!lvFrmTypeListByScrFrm IN 0
	***
	IF RECCOUNT([lvFrmTypeListByScrFrm]) = 1
		lnAddFormType = lvFrmTypeListByScrFrm.FrmTypeID
	ENDIF
	*------------------------------------------------------------------------------
	
ENDIF
*------------------------------------------------------------------------------

*19.05.2004 21:08 -&gt;Åñëè òèï ôîðìû íåèçâåñòåí
*					1. Èäåíòèôèêàòîð ôîðìû äëÿ ïðîñìîòðà ïåðâè÷íûõ äîêóìåíòîâ íå ïåðåäàí
*					2. Ôîðìà äëÿ ïðîñìîòðà îòîáðàæàåò íåñêîëüêî äîêóìåíòîâ
IF TYPE([lnAddFormType])#[N] OR EMPTY(lnAddFormType)
	
	*19.05.2004 21:12 -&gt;Çàïóñòèì ôîðìó äëÿ âûáîðà òèïà äîáàâëÿåìîãî äîêóìåíòà
	luResultSelectType = oApp.DoModalFormRetValObj([frmprimarydoctypeselect;primarydoc_v1.vcx;primarydoc.app],tuScrFrmID,tuFrmTypeID)
	***
	IF TYPE([luResultSelectType]) == [N] AND !EMPTY(luResultSelectType)
		lnAddFormType = luResultSelectType
	ENDIF
	*------------------------------------------------------------------------------
	
ENDIF
*------------------------------------------------------------------------------

*19.05.2004 21:45 -&gt;Åñëè óäàëîñü îïðåäåëèòü òèï ôîðìû äëÿ äîáàâëåíèÿ - çàïóñòèì ôîðìó äëÿ äîáàâëåíèÿ
IF TYPE([lnAddFormType])==[N] AND !EMPTY(lnAddFormType)

	*29.11.2004 17:11 -&gt;Óçíàåì èìÿ îáúåêòà äëÿ ðåäàêòèðîâàíèÿ äàííîãî òèïà ôîðìû
	USE IN IIF(USED([lvFrmTypeObjDescInfo]),[lvFrmTypeObjDescInfo],0)
	***
	_PARAM = lnAddFormType
	USE Basis!lvFrmTypeObjDescInfo IN 0
	***
	IF RECCOUNT([lvFrmTypeObjDescInfo]) # 1
		ASSERT .F. MESSAGE [MGRPRIMARYDOC.FORM_ADD: íåâîçìîæíî îïðåäåëèòü èìÿ îáúåêòà, èñïîëüçóåìîãî äëÿ ðåäàêòèðîâàíèÿ]
		RETURN .F.
	ENDIF	
	*------------------------------------------------------------------------------
	
	*29.11.2004 17:36 -&gt;Âûïîëíèì îïðåöèþ ñîçäàíèÿ íîâîé ôîðìû
	DO CASE
		CASE PCOUNT()=2
			luResultAdding = oApp.DoModalFormRetValObj(lvFrmTypeObjDescInfo.FrmTypeEditObjDesc,[ADD],lnAddFormType)
		CASE PCOUNT()=3
			luResultAdding = oApp.DoModalFormRetValObj(lvFrmTypeObjDescInfo.FrmTypeEditObjDesc,[ADD],lnAddFormType,tuParam2)
		CASE PCOUNT()=4
			luResultAdding = oApp.DoModalFormRetValObj(lvFrmTypeObjDescInfo.FrmTypeEditObjDesc,[ADD],lnAddFormType,tuParam2,tuParam3)
	ENDCASE
	*------------------------------------------------------------------------------
ELSE
	luResultAdding = .F.
ENDIF	
*------------------------------------------------------------------------------
		
*05.04.2004 20:05 -&gt;Âåðíåì ðåçóëüòàò îïåðàöèè
RETURN luResultAdding
*------------------------------------------------------------------------------

************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************
ENDPROC
PROCEDURE form_edit
*-------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: MGRPRIMARYDOC.FORM_EDIT
* Called by.......: &lt;.Operate()&gt;
* Parameters......: &lt;tcRequestedOperation,tnFrmID&gt;
* Returns.........: &lt;llResultEditing&gt;
* Notes...........: Ðåäàêòèðîâàíèå/ïðîñìîòð äîêóìåíòà.
*-------------------------------------------------------
LPARAMETERS	tcRequestedOperation,tnFrmID

*19.05.2004 22:03 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	_PARAM, ;
		llResultEditing
*------------------------------------------------------------------------------

*29.11.2004 17:11 -&gt;Óçíàåì èìÿ îáúåêòà äëÿ ðåäàêòèðîâàíèÿ äàííîé ôîðìû
USE IN IIF(USED([lvFrmTypeObjDescInfoByFrm]),[lvFrmTypeObjDescInfoByFrm],0)
***
_PARAM = tnFrmID
USE Basis!lvFrmTypeObjDescInfoByFrm IN 0
***
IF RECCOUNT([lvFrmTypeObjDescInfoByFrm]) # 1
	ASSERT .F. MESSAGE [MGRPRIMARYDOC.FORM_EDIT: íåâîçìîæíî îïðåäåëèòü èìÿ îáúåêòà, èñïîëüçóåìîãî äëÿ ðåäàêòèðîâàíèÿ]
	RETURN .F.
ENDIF	
*------------------------------------------------------------------------------

*06.04.2004 12:16 -&gt;Çàïóñêàåì ôîðìó äëÿ ðåäàêòèðîâàíèÿ/ïðîñìîòðà äîêóìåíòà
llResultEditing = oApp.DoModalFormRetValObj(lvFrmTypeObjDescInfoByFrm.FrmTypeEditObjDesc,tcRequestedOperation,tnFrmID)
*------------------------------------------------------------------------------
		
*05.04.2004 20:05 -&gt;Âåðíåì ðåçóëüòàò îïåðàöèè
RETURN llResultEditing
*------------------------------------------------------------------------------

************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************

ENDPROC
PROCEDURE form_prndoc
*-------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: MGRPRIMARYDOC.FORM_PRNDOC
* Called by.......: &lt;.Operate()&gt;
* Parameters......: &lt;tnFrmID&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Ïå÷àòü äîêóìåíòà.
*-------------------------------------------------------
LPARAMETERS	tnFrmID

*06.05.2005 15:41 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	laParams[1,3]
***
laParams[1,1] = [FrmID]
laParams[1,2] = tnFrmID
laParams[1,3] = .T.
*------------------------------------------------------------------------------

*21.05.2004 22:43 -&gt;Âûïîëíÿåì ïå÷àòü äîêóìåíòà
oApp.ExecuteScrFormByObjDescRetVal([frmsmartprint;print_v1.vcx],@laParams)
*------------------------------------------------------------------------------

************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************

ENDPROC
PROCEDURE form_view
*-------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYOC_V1.VCX
* Class.Module....: MGRPRIMARYDOC.FORM_VIEW
* Called by.......: &lt;.Operate()&gt;
* Parameters......: &lt;tnScrFrmID&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Çàïóñê ôîðìû äëÿ ïðîñìîòðà äîêóìåíòîâ.
*-------------------------------------------------------
LPARAMETERS	tnScrFrmID

*12.05.2004 14:01 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	_PARAM
*------------------------------------------------------------------------------

*12.05.2004 14:05 -&gt;Ïîëó÷àåì äåñêðèïòîð îáúåêòà ôîðìû äëÿ ïðîñìîòðà
USE IN IIF(USED([lvScrFrmInfo]),[lvScrFrmInfo],0)
***
_PARAM = tnScrFrmID
USE Basis!lvScrFrmInfo IN 0
*------------------------------------------------------------------------------
		
*12.05.2004 14:07 -&gt;Çàïóñêàåì ôîðìó äëÿ ïðîñìîòðà äîêóìåíòîâ
oApp.DoFormObj(lvScrFrmInfo.ScrFrmObjDesc,tnScrFrmID)
*------------------------------------------------------------------------------

************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************

ENDPROC
PROCEDURE operate
*-------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: MGRPRIMARYDOC.OPERATE
* Called by.......: &lt;Misc External Calls&gt;
* Parameters......: &lt;see below&gt;
* Returns.........: &lt;see below&gt;
* Notes...........: Îñíîâíîé ìåòîä ìåíåäæåðà áèáëèîòåêè ïåðâè÷íûõ äîêóìåíòîâ.
*-------------------------------------------------------
LPARAMETERS	tcEntityName, ;
			tcRequestedOperation, ;
			tuParam1, ;
			tuParam2, ;
			tuParam3, ;
			tuParam4, ;			
			tuParam5, ;
			tuParam6, ;
			tuParam7, ;
			tuParam8, ;
			tuParam9, ;
			tuParam10

*19.05.2004 19:23 -&gt;Ïðîâåðÿåì ïåðâûå äâà îáÿçàòåëüíûõ ïàðàìåòðà
IF 	TYPE([tcEntityName])#[C] OR EMPTY([tcEntityName]) OR ;
	TYPE([tcRequestedOperation])#[C] OR EMPTY([tcRequestedOperation])
	*{
	ASSERT .F. MESSAGE [MGRPRIMARYDOC.DOCOMMAND: îøèáêà âûçîâà - íåïðàâèëüíûé òèï èëè çíà÷åíèå ïàðàìåòðà.]
	*}
ENDIF	
*------------------------------------------------------------------------------

*19.05.2004 19:24 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	lcEntityName, ;
		lcRequstedOperation, ;
		llOperateResult
***
lcEntityName = UPPER(ALLTRIM(tcEntityName))
lcRequstedOperation = UPPER(ALLTRIM(tcRequestedOperation))
*------------------------------------------------------------------------------

*05.04.2004 19:59 -&gt;Âûïîëíÿåì îïðåàöèþ íàä ñóùíîñòüþ
*CASE lcEntityName == [] AND lcRequstedOperation == []
DO CASE

	*******************************************************************************
	*[FORM] &amp;&amp; [VIEW] - çàïóñê ôîðìû äëÿ ïðîñìîòðà äîêóìåíòîâ					  *
	*******************************************************************************
	CASE lcEntityName == [FORM] AND lcRequstedOperation == [VIEW]
	
		*05.04.2004 20:01 -&gt;Ñïèñîê äîïîëíèòåëüíûõ ïàðàìåòðîâ
		* tuParam1 - èäåíòèôèêàòîð ôîðìû äëÿ ïðîñìîòðà ïåðâè÷íûõ äîêóìåíòîâ
		*------------------------------------------------------------------------------
		
		*19.05.2004 19:27 -&gt;Âûïîëíÿåì îïåðàöèþ
		This.Form_View(tuParam1)
		*------------------------------------------------------------------------------		

	*******************************************************************************
	*[FORM] &amp;&amp; [ADD] - äîáàâëåíèå äîêóìåíòà										  *
	*******************************************************************************
	CASE lcEntityName == [FORM] AND lcRequstedOperation == [ADD]
		
		*05.04.2004 20:01 -&gt;Ñïèñîê äîïîëíèòåëüíûõ ïàðàìåòðîâ
		* tuParam1 (optional) - èäåíòèôèêàòîð ôîðìû äëÿ ïðîñìîòðà ïåðâè÷íûõ äîêóìåíòîâ
		* tuParam2 (optional) - òèï ïåðâè÷íîãî äîêóìåíòà ïî óìîë÷àíèþ
		*------------------------------------------------------------------------------
		*19.05.2004 19:44 -&gt;Âûïîëíèì îïåðàöèþ
		llOperateResult = This.Form_Add(tuParam1,tuParam2)
	
		RETURN llOperateResult
		*------------------------------------------------------------------------------

	*******************************************************************************
	*[FORM] &amp;&amp; [ADDSCHET] - äîáàâëåíèå ñ÷åòà ãîñòÿ 								  *
	*******************************************************************************
	CASE lcEntityName == [FORM] AND lcRequstedOperation == [ADDSCHET]
		*05.04.2004 20:01 -&gt;Ñïèñîê äîïîëíèòåëüíûõ ïàðàìåòðîâ
		* tuParam1 (optional) - èäåíòèôèêàòîð ôîðìû äëÿ ïðîñìîòðà ïåðâè÷íûõ äîêóìåíòîâ
		* tuParam2 (optional) - òèï ïåðâè÷íîãî äîêóìåíòà ïî óìîë÷àíèþ
		*------------------------------------------------------------------------------
		
		*19.05.2004 19:44 -&gt;Âûïîëíèì îïåðàöèþ
		llOperateResult = This.Form_Add(tuParam1,tuParam2,tuParam2,tuParam3)
		RETURN llOperateResult
		*------------------------------------------------------------------------------

	*******************************************************************************
	*[FORM] &amp;&amp; [ADDSCHET] - äîáàâëåíèå ñ÷åòà ãîñòÿ 								  *
	*******************************************************************************
	CASE lcEntityName == [FORM] AND ( ;
			lcRequstedOperation == [EDITSCHET] OR ;
			lcRequstedOperation == [INFOSCHET] OR ;
			lcRequstedOperation == [DELESCHET])
		*05.04.2004 20:01 -&gt;Ñïèñîê äîïîëíèòåëüíûõ ïàðàìåòðîâ
		* tuParam1 - èäåíòèôèêàòîð äîêóìåíòà äëÿ ðåäàêòèðîâàíèÿ/ïðîñìîòðà
		*------------------------------------------------------------------------------
		
		*19.05.2004 19:44 -&gt;Âûïîëíèì îïåðàöèþ
		llOperateResult = This.Form_Edit(lcRequstedOperation,tuParam1)
		RETURN llOperateResult
		*------------------------------------------------------------------------------

	*******************************************************************************
	*[FORM] &amp;&amp; ([EDIT] || [INFO] || [DELE]) - ðåäàêòèðîâàíèå/ïðîñìîòð äîêóìåíòà	  *
	*******************************************************************************
	CASE lcEntityName == [FORM] AND ( ;
			lcRequstedOperation == [EDIT] OR ;
			lcRequstedOperation == [INFO] OR ;
			lcRequstedOperation == [DELE])

		*05.04.2004 20:01 -&gt;Ñïèñîê äîïîëíèòåëüíûõ ïàðàìåòðîâ
		* tuParam1 - èäåíòèôèêàòîð äîêóìåíòà äëÿ ðåäàêòèðîâàíèÿ/ïðîñìîòðà
		*------------------------------------------------------------------------------
		
		*19.05.2004 19:44 -&gt;Âûïîëíèì îïåðàöèþ
		llOperateResult = This.Form_Edit(lcRequstedOperation,tuParam1)
		RETURN llOperateResult
		*------------------------------------------------------------------------------
	
	*******************************************************************************
	*[FORM] &amp;&amp; ([COPY] OR [INHERIT]) - êîïèðîâàíèå/íàñëåäîâàíèå äîêóìåíòà		  *
	*******************************************************************************
	CASE lcEntityName == [FORM] AND ( ;
			lcRequstedOperation == [COPY] OR ;
			lcRequstedOperation == [INHERIT]OR ;
			lcRequstedOperation == [TOPAY])

		*05.04.2004 20:01 -&gt; Ñïèñîê äîïîëíèòåëüíûõ ïàðàìåòðîâ
		* tuParam1 - èäåíòèôèêàòîð äîêóìåíòà äëÿ êîïèðîâàíèÿ/íàñëåäîâàíèÿ
		*------------------------------------------------------------------------------
		
		*19.05.2004 19:44 -&gt; Âûïîëíèì îïåðàöèþ
		llOperateResult = oApp.DoModalFormRetValObj([frmPDCopyAs;PrimaryDoc_v1;PrimaryDoc.app],lcRequstedOperation,tuParam1)
		RETURN llOperateResult
		*------------------------------------------------------------------------------

	*******************************************************************************
	*[FORM] &amp;&amp; [PRNDOC] - ïå÷àòü äîêóìåíòà							  			  *
	*******************************************************************************
	CASE lcEntityName == [FORM] AND lcRequstedOperation == [PRNDOC]

		*05.04.2004 20:01 -&gt;Ñïèñîê äîïîëíèòåëüíûõ ïàðàìåòðîâ
		* tuParam1 - èäåíòèôèêàòîð äîêóìåíòà äëÿ ïå÷àòè
		*------------------------------------------------------------------------------
		
		*19.05.2004 19:44 -&gt;Âûïîëíèì îïåðàöèþ
		llOperateResult = This.Form_PrnDoc(tuParam1)
		RETURN llOperateResult
		*------------------------------------------------------------------------------

	*******************************************************************************
	*[FORM] &amp;&amp; [NAKLOUT] - Ôîðìèðîâàíèå ðàñõîäíîé íàêëàäíîé ïî ðåçóëüòàòàì ïðîäàæ  *
	*******************************************************************************
	CASE lcEntityName == [FORM] AND lcRequstedOperation == [NAKLOUT]

		*16.03.2006 16:07 -&gt; Âûïîëíèì îïåðàöèþ
		llOperateResult = oApp.ExecuteScrFormByObjDescRetVal([frmNaklOut;PrimaryDoc_v1.vcx;PrimaryDoc.app])
		***
		IF TYPE([llOperateResult])=[N]
			RETURN llOperateResult
		ENDIF
		***
		RETURN .T.
		*------------------------------------------------------------------------------

	*****************************************************************************
	*[FORM] &amp;&amp; [PAYDOCMAKE]														*
	*****************************************************************************
	CASE lcEntityName == [FORM] AND lcRequstedOperation == [PAYDOCMAKE]

		*16.03.2006 16:09 -&gt; Âûïîëíèì îïåðàöèþ		
		llOperateResult = This._PayDocMake()
		***
		IF TYPE([llOperateResult])=[N]
			RETURN llOperateResult
		ENDIF
		***
		RETURN .T.
		*------------------------------------------------------------------------------

	*******************************************************************************
	*[FORM] &amp;&amp; [FILLCORR] - Ôîðìèðîâàíèå äîêóìåíòà êîðð. îòðèöàòåëüíûõ îñòàòêîâ   *
	*******************************************************************************
	CASE lcEntityName == [FORM] AND lcRequstedOperation == [FILLCORR]
		
		IF !DBUSED([BASIS])
			OPEN DATABASE Basis SHARED
		ENDIF
		SET DATABASE TO Basis

		*08.09.2006 10:33 -&gt;Âûïîëíèì îïåðàöèþ
		llOperateResult = spFillCorr(tuParam1)
		***
		IF TYPE([llOperateResult])=[N]
			RETURN llOperateResult
		ENDIF
		***
		RETURN .T.
		*------------------------------------------------------------------------------

	*******************************************************************************
	*[FORM] &amp;&amp; [TRANCORR] - Ôîðìèðîâàíèå äîêóìåíòà êîðð. òðàíçàêöèé   *
	*******************************************************************************
	CASE lcEntityName == [FORM] AND lcRequstedOperation == [TRANCORR]
		
		IF !DBUSED([BASIS])
			OPEN DATABASE Basis SHARED
		ENDIF
		SET DATABASE TO Basis
WAIT WINDOW 'Íåîáõîäèìîñòü â îïåðàöèè ïðîïàëà ...'
		*08.09.2006 10:33 -&gt;Âûïîëíèì îïåðàöèþ
		*llOperateResult = spFillCorrQnt(tuParam1)
		***
		IF TYPE([llOperateResult])=[N]
			RETURN llOperateResult
		ENDIF
		***
		RETURN .T.
		*------------------------------------------------------------------------------

	*****************************************************************************
	*[PARTTVR] &amp;&amp; ([ADD] || [EDIT] || [INFO] ||[DELE])							*
	*	Äîáàâëåíèå/Ðåäàêòèðîâàíèå/Ïðîñìîòð/óäàëåíèå òîâàðíîé ïîçèöèè äîêóìåíòà	*
	*****************************************************************************
	CASE lcEntityName == [PARTTVR] AND ( ;
			lcRequstedOperation == [ADD] OR ;
			lcRequstedOperation == [EDIT] OR ;
			lcRequstedOperation == [INFO] OR ;
			lcRequstedOperation == [DELE])

		*05.04.2004 20:01 -&gt; Ñïèñîê äîïîëíèòåëüíûõ ïàðàìåòðîâ
		* tuParam1 - èäåíòèôèêàòîð òîâàðíîé ïîçèöèè èëè äîêóìåíòà (add)
		*------------------------------------------------------------------------------

		*19.05.2004 19:44 -&gt; Âûïîëíèì îïåðàöèþ
		* Ôîðìà ñ ïðîöåíòîì íàäáàêè è ïðî÷èìè ÷óäåñàìè
*llOperateResult = oApp.DoModalFormRetValObj([frmprimarydocparttvreditnadb;primarydoc_v1.vcx;primarydoc.app],lcRequstedOperation,tuParam1)
* Ôîðìà ïî-ïðîùå
		USE IN IIF(USED([lvFrmTypeObjDescInfoByFrm]),[lvFrmTypeObjDescInfoByFrm],0)
		***
		_PARAM = tuParam1
		USE Basis!lvFrmTypeObjDescInfoByFrm IN 0
		***
		*!*	IF RECCOUNT([lvFrmTypeObjDescInfoByFrm]) # 1
		*!*		ASSERT .F. MESSAGE [MGRPRIMARYDOC.FORM_EDIT: íåâîçìîæíî îïðåäåëèòü èìÿ îáúåêòà, èñïîëüçóåìîãî äëÿ ðåäàêòèðîâàíèÿ]
		*!*		RETURN .F.
		*!*	ENDIF	

		*15.07.2004 02:57 -&gt;Âûïîëíÿåì îïåðàöèþ äîáàâëåíèÿ
		DO CASE
		   CASE !ISNULL(lvFrmTypeObjDescInfoByFrm.FrmTypeEditObjDescDet) AND ALLTRIM(lvFrmTypeObjDescInfoByFrm.FrmTypeEditObjDescDet) &lt;&gt; []
				*09.03.2008 08:57 -&gt;Âûïîëíÿåì îïåðàöèþ äîáàâëåíèÿ ïî ïîëþ - äåñêðèïòîðó
		     	  llOperateResult = oApp.DoModalFormRetValObj(lvFrmTypeObjDescInfoByFrm.FrmTypeEditObjDescDet,[ADD],tuParam1)
		   OTHERWISE
		          llOperateResult = oApp.DoModalFormRetValObj([frmprimarydocparttvredit;primarydoc_v1.vcx;primarydoc.app],lcRequstedOperation,tuParam1)
		ENDCASE
		*------------------------------------------------------------------------------
USE IN IIF(USED([lvFrmTypeObjDescInfoByFrm]),[lvFrmTypeObjDescInfoByFrm],0)
***
		RETURN llOperateResult
		*------------------------------------------------------------------------------


	*****************************************************************************
	*[PARTTVRRES] &amp;&amp; ([ADD] || [EDIT] || [INFO] ||[DELE])							*
	*	Äîáàâëåíèå/Ðåäàêòèðîâàíèå/Ïðîñìîòð/óäàëåíèå òîâàðíîé ïîçèöèè äîêóìåíòà	*
	*****************************************************************************
	CASE lcEntityName == [PARTTVRRES] AND ( ;
			lcRequstedOperation == [ADD] OR ;
			lcRequstedOperation == [EDIT] OR ;
			lcRequstedOperation == [INFO] OR ;
			lcRequstedOperation == [DELE])

		*05.04.2004 20:01 -&gt; Ñïèñîê äîïîëíèòåëüíûõ ïàðàìåòðîâ
		* tuParam1 - èäåíòèôèêàòîð òîâàðíîé ïîçèöèè èëè äîêóìåíòà (add)
		*------------------------------------------------------------------------------

		*19.05.2004 19:44 -&gt; Âûïîëíèì îïåðàöèþ
		* Ôîðìà ñ ïðîöåíòîì íàäáàêè è ïðî÷èìè ÷óäåñàìè
*llOperateResult = oApp.DoModalFormRetValObj([frmprimarydocparttvreditnadb;primarydoc_v1.vcx;primarydoc.app],lcRequstedOperation,tuParam1)
* Ôîðìà ïî-ïðîùå
llOperateResult = oApp.DoModalFormRetValObj([frmprimarydocparttvrserviceedit;primarydoc_v1.vcx;primarydoc.app],lcRequstedOperation,tuParam1)
***
		RETURN llOperateResult
		*------------------------------------------------------------------------------


	*****************************************************************************
	*[PARTTVRCHILD] &amp;&amp; ([ADD] || [EDIT] || [INFO] ||[DELE])							*
	*	Äîáàâëåíèå/Ðåäàêòèðîâàíèå/Ïðîñìîòð/óäàëåíèå òîâàðíîé ïîçèöèè äîêóìåíòà	*
	*****************************************************************************
	CASE lcEntityName == [PARTTVRCHILD] AND ( ;
			lcRequstedOperation == [ADD] OR ;
			lcRequstedOperation == [EDIT] OR ;
			lcRequstedOperation == [INFO] OR ;
			lcRequstedOperation == [DELE])

		*05.04.2004 20:01 -&gt; Ñïèñîê äîïîëíèòåëüíûõ ïàðàìåòðîâ
		* tuParam1 - èäåíòèôèêàòîð òîâàðíîé ïîçèöèè èëè äîêóìåíòà (add)
		*------------------------------------------------------------------------------

		*19.05.2004 19:44 -&gt; Âûïîëíèì îïåðàöèþ
		* Ôîðìà ñ èìåíåì ðåáåíêà
*llOperateResult = oApp.DoModalFormRetValObj([frmprimarydocparttvreditnadb;primarydoc_v1.vcx;primarydoc.app],lcRequstedOperation,tuParam1)
* Ôîðìà ïî-ïðîùå
llOperateResult = oApp.DoModalFormRetValObj([frmparttvrchildedit;hh_v1.vcx;primarydoc.app],lcRequstedOperation,tuParam1)
***
		RETURN llOperateResult
		*------------------------------------------------------------------------------

	*****************************************************************************
	*[PARTORD] &amp;&amp; ([ADD] || [EDIT] || [INFO] ||[DELE])							*
	*	Ðåäàêòèðîâàíèå ïîçèöèé çàêàçà                                           *
	*****************************************************************************
	CASE lcEntityName == [PARTORD] AND ( ;
			lcRequstedOperation == [ADD] OR ;
			lcRequstedOperation == [EDIT] OR ;
			lcRequstedOperation == [INFO] OR ;
			lcRequstedOperation == [DELE])

		*05.04.2004 20:01 -&gt; Ñïèñîê äîïîëíèòåëüíûõ ïàðàìåòðîâ
		* tuParam1 - èäåíòèôèêàòîð äîêóìåíòà (çàêàçà)
		*------------------------------------------------------------------------------

		*19.05.2004 19:44 -&gt; Âûïîëíèì îïåðàöèþ
llOperateResult = oApp.DoModalFormRetValObj([frmprimarydocpartordedit;primarydoc_v1.vcx;primarydoc.app],lcRequstedOperation,tuParam1)
***
		RETURN llOperateResult
		*------------------------------------------------------------------------------


	*****************************************************************************
	*[PARTMNU] &amp;&amp; ([ADD] || [EDIT] || [INFO] ||[DELE])							*
	*	Äîáàâëåíèå/Ðåäàêòèðîâàíèå/Ïðîñìîòð/óäàëåíèå òîâàðíîé ïîçèöèè ìåíþ		*
	*****************************************************************************
	CASE lcEntityName == [PARTMNU] AND ( ;
			lcRequstedOperation == [ADD] OR ;
			lcRequstedOperation == [EDIT] OR ;
			lcRequstedOperation == [INFO] OR ;
			lcRequstedOperation == [DELE])

		*05.04.2004 20:01 -&gt; Ñïèñîê äîïîëíèòåëüíûõ ïàðàìåòðîâ
		* tuParam1 - èäåíòèôèêàòîð òîâàðíîé ïîçèöèè èëè äîêóìåíòà (add)
		*------------------------------------------------------------------------------

		*19.05.2004 19:44 -&gt; Âûïîëíèì îïåðàöèþ
llOperateResult = oApp.DoModalFormRetValObj([frmprimarydocpartmnuedit;primarydoc_v1.vcx;primarydoc.app],lcRequstedOperation,tuParam1)
		RETURN llOperateResult
		*------------------------------------------------------------------------------

	*********************************************************************************
	*[PARTPRBOOK] &amp;&amp; ([ADD] || [EDIT] || [INFO] ||[DELE])							*
	*	Äîáàâëåíèå/Ðåäàêòèðîâàíèå/Ïðîñìîòð/óäàëåíèå ïðîâîäîê						*
	*********************************************************************************
	CASE lcEntityName == [PARTPRBOOK] AND ( ;
			lcRequstedOperation == [ADD] OR ;
			lcRequstedOperation == [EDIT] OR ;
			lcRequstedOperation == [INFO] OR ;
			lcRequstedOperation == [DELE])

		*05.04.2004 20:01 -&gt; Ñïèñîê äîïîëíèòåëüíûõ ïàðàìåòðîâ
		* tuParam1 - èäåíòèôèêàòîð òîâàðíîé ïîçèöèè èëè äîêóìåíòà (add)
		*------------------------------------------------------------------------------

		*19.05.2004 19:44 -&gt;Âûïîëíèì îïåðàöèþ
llOperateResult = oApp.DoModalFormRetValObj([frmpracticaldetedit;primarydoc_v1.vcx;primarydoc.app],lcRequstedOperation,tuParam1)
		RETURN llOperateResult
		*------------------------------------------------------------------------------


	*********************************************************************************
	*[PARTCLC] &amp;&amp; ([ADD] || [EDIT] || [INFO] ||[DELE])								*
	*	Äîáàâëåíèå/Ðåäàêòèðîâàíèå/Ïðîñìîòð/óäàëåíèå òîâàðíîé ïîçèöèè êàëüêóëÿöèè	*
	*********************************************************************************
	CASE lcEntityName == [PARTCLC] AND ( ;
			lcRequstedOperation == [ADD] OR ;
			lcRequstedOperation == [EDIT] OR ;
			lcRequstedOperation == [INFO] OR ;
			lcRequstedOperation == [DELE])

		*05.04.2004 20:01 -&gt; Ñïèñîê äîïîëíèòåëüíûõ ïàðàìåòðîâ
		* tuParam1 - èäåíòèôèêàòîð òîâàðíîé ïîçèöèè èëè äîêóìåíòà (add)
		*------------------------------------------------------------------------------

		*19.05.2004 19:44 -&gt;Âûïîëíèì îïåðàöèþ
llOperateResult = oApp.DoModalFormRetValObj([frmaccountingtvredit;primarydoc_v1.vcx;primarydoc.app],lcRequstedOperation,tuParam1)
		RETURN llOperateResult
		*------------------------------------------------------------------------------

	*******************************************************************************
	*[PARTFRM] &amp;&amp; [ADD] - äîáàâëåíèå ñóììîâîé ïîçèöèè ëîêóìåíòà					  *
	*******************************************************************************
	CASE lcEntityName == [PARTFRM] AND lcRequstedOperation == [ADD]

		*05.04.2004 20:01 -&gt;Ñïèñîê äîïîëíèòåëüíûõ ïàðàìåòðîâ
		* tuParam1 - èäåíòèôèêàòîð äîêóìåíòà äëÿ äîáàâëåíèÿ ñóììîâîé ïîçèöèè
		*------------------------------------------------------------------------------
	
		*19.05.2004 19:44 -&gt;Âûïîëíèì îïåðàöèþ
		llOperateResult = This.PartFrm_Add(tuParam1)
		RETURN llOperateResult
		*------------------------------------------------------------------------------

	*************************************************************************************************************
	*[PARTFRM] &amp;&amp; ([EDIT] || [INFO] || [DELE]) - ðåäàêòèðîâàíèå/ïðîñìîòð/óäàëåíèå ñóììîâîé ïîçèöèè äîêóìåíòà	*
	*************************************************************************************************************
	CASE lcEntityName == [PARTFRM] AND (lcRequstedOperation == [EDIT] OR lcRequstedOperation == [INFO] OR lcRequstedOperation == [DELE])

		*05.04.2004 20:01 -&gt;Ñïèñîê äîïîëíèòåëüíûõ ïàðàìåòðîâ
		* tuParam1 - èäåíòèôèêàòîð ñóììîâîé ïîçèöèè äîêóìåíòà
		*------------------------------------------------------------------------------
	
		*19.05.2004 19:44 -&gt;Âûïîëíèì îïåðàöèþ
		llOperateResult = This.PartFrm_Edit(lcRequstedOperation,tuParam1)
		RETURN llOperateResult
		*------------------------------------------------------------------------------

	*****************************************************************************
	*[PARTFRMJAST] &amp;&amp; ([ADD] || [EDIT] || [INFO] || [DELE])						*
	*	Äîáàâëåíèå/ðåäàêòèðîâàíèå/ïðîñìîòð/óäàëåíèå ñóììîâîé ïîçèöèè äîêóìåíòà	*
	*****************************************************************************
	CASE lcEntityName == [PARTFRMJAST] AND ( ;
			lcRequstedOperation == [ADD] OR ;
			lcRequstedOperation == [EDIT] OR ;
			lcRequstedOperation == [INFO] OR ;
			lcRequstedOperation == [DELE])

		*05.04.2004 20:01 -&gt;Ñïèñîê äîïîëíèòåëüíûõ ïàðàìåòðîâ
		* tuParam1 - èäåíòèôèêàòîð äîêóìåíòà äëÿ äîáàâëåíèÿ ñóììîâîé ïîçèöèè
		*------------------------------------------------------------------------------
	
		*19.05.2004 19:44 -&gt;Âûïîëíèì îïåðàöèþ
		 IF tcRequestedOperation=[ADD]
	    llOperateResult = oApp.DoModalFormRetValObj([frmprimarydocpartfrmeditjast;primarydoc_v1.vcx;primarydoc.app],tcRequestedOperation,tuParam1)
	   ELSE
	    llOperateResult = oApp.DoModalFormRetValObj([frmprimarydocpartfrmeditjast;primarydoc_v1.vcx;primarydoc.app],tcRequestedOperation,tuParam1,tuParam2)
ENDIF
		RETURN llOperateResult
		*------------------------------------------------------------------------------


	*************************************************************************************************************
	*[PAYDOC] &amp;&amp; [EXPORT] - ýêñïîðò ïëàòåæíîãî ïîðó÷åíèÿ ê êëèåíò-áàíê                                          *
	*************************************************************************************************************
	CASE lcEntityName == [PAYDOC] AND lcRequstedOperation == [EXPORT]

		*05.04.2004 20:01 -&gt;Ñïèñîê äîïîëíèòåëüíûõ ïàðàìåòðîâ
		* tuParam1 - èäåíòèôèêàòîð äîêóìåíòà
		*------------------------------------------------------------------------------
		*19.05.2004 19:44 -&gt;Âûïîëíèì îïåðàöèþ
		llOperateResult = This.Paydoc_Exchange(lcRequstedOperation,tuParam1)
		RETURN llOperateResult
		*------------------------------------------------------------------------------
	
	*******************************************************************************
	*[AUTONUM] &amp;&amp; [VIEW] - çàïóñê ôîðìû äëÿ ðàáîòû c àâòîíóìåðàòîðàìè			  *
	*******************************************************************************
	CASE lcEntityName == [AUTONUM] AND lcRequstedOperation == [VIEW]

		*16.03.2006 16:22 -&gt; Âûïîëíèì îïåðàöèþ
		oApp.ExecuteScrFormByObjDesc([frmAutoNumView;PrimaryDoc_v1.vcx;PrimaryDoc.app])
		***
		RETURN .T.
		*------------------------------------------------------------------------------

	*******************************************************************************
	*[AUTONUM] &amp;&amp; ([ADD] || [EDIT] || [INFO] || [DELE])							  *
	*Äîáàâëåíèå/ðåäàêòèðîâàíèå/ïðîñìîòð/óäàëåíèå èíôîðìàöèè îá àâòîíóìåðàòîðå	  *
	*******************************************************************************
	CASE lcEntityName == [AUTONUM] AND ;
		 (lcRequstedOperation == [ADD] OR ;
		  lcRequstedOperation == [EDIT] OR ;
		  lcRequstedOperation == [DELE])

		*15.06.2006 13:54 -&gt; Ñïèñîê äîïîëíèòåëüíûõ ïàðàìåòðîâ
		* tuParam1 - èäåíòèôèêàòîð àâòîíóìåðàòîðà äëÿ ðåäàêòèðîâàíèÿ/ïðîñìîòðà/óäàëåíèÿ
		*------------------------------------------------------------------------------

		*06.02.2006 12:39 -&gt; Âûïîëíèì îïåðàöèþ
		luOperateResult = oApp.DoModalFormRetValObj([frmAutoNumEdit;PrimaryDoc_v1;PrimaryDoc.app],lcRequstedOperation,tuParam1)
		*------------------------------------------------------------------------------

		*06.02.2006 12:39 -&gt; Âåðíåì ôëàã ðåçóëüòàòà îïåðàöèè
		RETURN luOperateResult
		*------------------------------------------------------------------------------

	*******************************************************************************
	*[FRMACT] &amp;&amp; ([VIEW])							  							  *
	*Ïðîñìîòð çàäàíèé íà àêöåïò												 	  *
	*******************************************************************************
	CASE lcEntityName == [FRMACT] AND lcRequstedOperation == [VIEW]

		*21.11.2006 16:19 -&gt;Çàïóñêàåì ôîðìó äëÿ ïðîñìîòðà äîêóìåíòîâ
		oApp.DoFormObj([frmActionView;PrimaryDoc_v1;PrimaryDoc.app])
		*------------------------------------------------------------------------------
	
	OTHERWISE
	
		*19.05.2004 21:59 -&gt;Âûâåäåì ñîîáùåíèå îá îøèáêå
		MESSAGEBOX( ;
			[Ê ñîæàëåíèþ çàïðîøåííàÿ Âàìè îïåðàöèÿ íå ìîæåò áûòü âûïîëíåíà.]+CHR(13)+ ;
			[Äàííîå ñîîáùåíèå ìîæåò áûòü âûçâàíî ñëåäóþùèìè ïðè÷èíàìè:]+CHR(13)+ ;
			[1. Â äàííîé âåðñèè ïðîãðàìíîãî ïðîäóêòà äàííàÿ ôóíêöèîíàëüíîñòü íå ðåàëèçîâàíà;]+CHR(13)+ ;
			[2. Ïðîèçîøåë ïðîãðàììíûé ñáîé.],64,[Íå âûïîëíåíî...])
		*------------------------------------------------------------------------------
	
ENDCASE
*------------------------------------------------------------------------------
** PAYORD
************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************
ENDPROC
PROCEDURE partfrm_add
*-------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: MGRPRIMARYDOC.PARTFRM_ADD
* Called by.......: &lt;.Operate()&gt;
* Parameters......: &lt;tnFrmId&gt;
* Returns.........: &lt;llAddRes&gt;
* Notes...........: Äîáàâëåíèå ñîäåðæàíèÿ ñóììîâûõ äîêóìåíòîâ.
*-------------------------------------------------------
LPARAMETERS	tnFrmId

*15.07.2004 02:47 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	llAddRes
*------------------------------------------------------------------------------

*15.07.2004 02:52 -&gt;Çàïóñòèì íà âûïîëíåíèå ôîðìó äîáàâëåíèÿ ñóììîâîé ïîçèöèè
	llAddRes = oApp.DoModalFormRetValObj([frmprimarydocpartfrmadd;primarydoc_v1.vcx;primarydoc.app],tnFrmID)
*------------------------------------------------------------------------------
		
*15.07.2004 02:52 -&gt;Âåðíåì ðåçóëüòàò îïåðàöèè
RETURN llAddRes
*------------------------------------------------------------------------------

************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************

ENDPROC
PROCEDURE partfrm_edit
*-------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: MGRPRIMARYDOC.PARTFRM_EDIT
* Called by.......: &lt;.Operate()&gt;
* Parameters......: &lt;tcRequestedOperation,tnFrmPartFrmID&gt;
* Returns.........: &lt;luOperateResult&gt;
* Notes...........: Ðåäàêòèðîâàíèå/ïðîñìîòð/óäàëåíèå ñóììîâîé ïîçèöèè äîêóìåíòà
*-------------------------------------------------------
LPARAMETERS tcRequestedOperation,tnFrmPartFrmID

*24.09.2004 17:11 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	luOperateResult
*------------------------------------------------------------------------------

*19.05.2004 22:22 -&gt;Çàïóñêàåì ôîðìó äëÿ ðåäàêòèðîâàíèÿ/ïðîñìîòðà/óäàëåíèÿ ñóììîâîé ïîçèöèè äîêóìåíòà
	llResultEditing = oApp.DoModalFormRetValObj([frmprimarydocpartfrmedit;primarydoc_v1.vcx;primarydoc.app],tcRequestedOperation,tnFrmPartFrmID)
*------------------------------------------------------------------------------		

*19.05.2004 22:22 -&gt;Âåðíåì ðåçóëüòàò îïåðàöèè		
RETURN llResultEditing
*------------------------------------------------------------------------------

************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************
ENDPROC
PROCEDURE paydoc_exchange
*-------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: MGRPRIMARYDOC.Paydoc_exchange
* Called by.......: &lt;.Operate()&gt;
* Parameters......: &lt;tcRequestedOperation,tnFrmID&gt;
* Returns.........: &lt;llResultEditing&gt;
* Notes...........: (public/nouser/default) Îáìåí ñ ñèñòåìàìè êëèåíò-áàíê
*-------------------------------------------------------
LPARAMETERS	tcRequestedOperation,tnFrmID

*19.05.2004 22:03 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	_PARAM, ;
		lcOwnSAccID, ;
		lcObjDesc, ;
		llExchangeResult
*------------------------------------------------------------------------------

*29.11.2004 17:11 -&gt;Ïîëó÷èì èäåíòèôèêàòîð íàøåãî ðàññ÷¸òíîãî ñ÷¸òà
USE IN IIF(USED([lvOwnSAccountByFrm]),[lvOwnSAccountByFrm],0)
_PARAM = tnFrmID
USE BASIS!lvOwnSAccountByFrm IN 0
*------------------------------------------------------------------------------

*09.12.2004 19:11 -&gt;Ïðîâåðÿåì, ÷òîáû ðàññ÷¸òíûé ñ÷¸ò áûë íåïóñòûì
IF ISNULL(lvOwnSAccountByFrm.OwnSAcc) OR EMPTY(lvOwnSAccountByFrm.OwnSAcc)
	RETURN .F.
ENDIF
*------------------------------------------------------------------------------

*09.12.2004 19:11 -&gt;×èòàåì íàñòðîéêè êëèåíò-áàíêà äëÿ äàííîãî ðàññ÷¸òíîãî ñ÷¸òà
lcOwnSAccID = ALLTRIM(lvOwnSAccountByFrm.OwnSAcc)
IF TYPE([oRes])==[O] AND !ISNULL(oRes)
	lcObjDesc = oRes.GetParam(lcOwnSAccID,[EXCHANGE_OBJ_DESC],FULLPATH([paydocexchange.ini]))
	lcExchangeDir = oRes.GetParam(lcOwnSAccID,[EXCHANGE_DIR],FULLPATH([paydocexchange.ini]))
	IF EMPTY(lcObjDesc)
		oRes.WriteParam(lcOwnSAccID,[EXCHANGE_OBJ_DESC],[Âïèøèòå äåñêðèïòîð îáúåêòà, èñïîëüçóåìîãî äëÿ îáìåíà äàííûìè],FULLPATH([paydocexchange.ini]))
	ENDIF
	IF EMPTY(lcExchangeDir)
		oRes.WriteParam(lcOwnSAccID,[EXCHANGE_DIR],FULLPATH(CURDIR()),FULLPATH([paydocexchange.ini]))
	ENDIF
	IF EMPTY(lcObjDesc) OR EMPTY(lcExchangeDir)
		RETURN .F.
	ENDIF
ENDIF
*------------------------------------------------------------------------------

*09.12.2004 19:20 -&gt;Âûïîëíÿåì îïåðàöèþ
loExchangeObj = oApp.CreateObject(lcObjDesc)
***
IF TYPE([loExchangeObj])==[O] AND !ISNULL(loExchangeObj)
	IF llAll
		llExchangeResult = loExchangeObj.doall(lcTmpAl,lcExchangeDir)
	ELSE
		llExchangeResult = loExchangeObj.Do(tcRequestedOperation,tnFrmID,lcExchangeDir)
	ENDIF
ENDIF
*------------------------------------------------------------------------------
		
*05.04.2004 20:05 -&gt;Âåðíåì ðåçóëüòàò îïåðàöèè
RETURN llExchangeResult
*------------------------------------------------------------------------------

************************************************************************************
**********************************  END OF METHOD **********************************
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1>Class</reserved1>
		<reserved2>1</reserved2>
		<reserved3>*operate &lt;public&gt; Èíòåðôåéñ
*form_view &lt;protected&gt; Çàïóñê ôîðìû äëÿ ïðîñìîòðà äîêóìåíòîâ
*form_add &lt;protected&gt; Ñîçäàíèå äîêóìåíòà
*form_edit &lt;protected&gt; Ðåäàêòèðîâàíèå äîêóìåíòà
*form_prndoc &lt;protected&gt; Ïå÷àòü äîêóìåíòà
*partfrm_add &lt;protected&gt; Ñîçäàíèå ñóììîâîé ïîçèöèè äîêóìåíòà
*partfrm_edit &lt;protected&gt; Ðåäàêòèðîâàíèå/ïðîñìîòð/óäàëåíèå ñóììîâîé ïîçèöèè äîêóìåíòà
*paydoc_exchange &lt;protected&gt; Îáìåí ñ ñèñòåìàìè êëèåíò-áàíê
</reserved3>
		<reserved4/>
		<reserved5/>
		<reserved6>Pixels</reserved6>
		<reserved7>Ìåíåäæåð áèáëèîòåêè PrimaryDoc_v1</reserved7>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>COMMENT</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>0</timestamp>
		<class/>
		<classloc/>
		<baseclass/>
		<objname>interface</objname>
		<parent/>
		<properties/>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1EA0UUAUQ</uniqueid>
		<timestamp>960912023</timestamp>
		<class>grd</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>grid</baseclass>
		<objname>grdformview</objname>
		<parent/>
		<properties>ColumnCount = 11
Height = 210
RecordSource = "PrimaryDocView"
SplitBar = .F.
Width = 690
AllowCellSelection = .F.
_activerowhighlightexcludecolumnlist = ;1;2;
_activerowhighlight = .T.
_handledstandartmsglist = FIRST;PREV;NEXT;LAST;;ADD;EDIT;INFO;DELE;;COPY;;PRNDOC;PRNREP;MARK
_handledstandartmsgpromptlist = ;;;;;Äîáàâèòü;Ðåäàêòèðîâàòü;Ïðîñìîòð;Óäàëèòü;\-;Ñêîïèðîâàòü;\-;Ïîäãîòîâèòü äîêóìåíò;Ïîäãîòîâèòü îò÷¸ò;Ïîìåòèòü
Name = "grdformview"
Column1.ControlSource = "[]"
Column1.Enabled = .F.
Column1.Width = 5
Column1.Movable = .F.
Column1.Resizable = .F.
Column1.ReadOnly = .T.
Column1.DynamicBackColor = "IIF(PrimaryDocView.FrmIsPayed,RGB(255,0,0),RGB(255,0,0)"
Column1.DynamicForeColor = "IIF(PrimaryDocView.FrmIsPayed,RGB(255,0,0),RGB(255,0,0))"
Column1.Name = "Column1"
Column2.ControlSource = "[]"
Column2.Enabled = .F.
Column2.Width = 16
Column2.Movable = .F.
Column2.Resizable = .F.
Column2.ReadOnly = .T.
Column2.DynamicBackColor = "IIF(PrimaryDocView.StatusID=1,RGB(0,255,255),IIF(PrimaryDocView.StatusID=2,RGB(0,255,0),IIF(PrimaryDocView.StatusID=3,RGB(255,255,0),IIF(PrimaryDocView.StatusID=4,RGB(255,0,0),RGB(255,255,255)))))"
Column2.DynamicForeColor = "IIF(PrimaryDocView.StatusID=1,RGB(0,255,255),IIF(PrimaryDocView.StatusID=2,RGB(0,255,0),IIF(PrimaryDocView.StatusID=3,RGB(255,255,0),IIF(PrimaryDocView.StatusID=4,RGB(255,0,0),RGB(255,255,255)))))"
Column2.Name = "Column2"
Column3.ControlSource = "PrimaryDocView.FTShortNM"
Column3.Width = 31
Column3.ReadOnly = .T.
Column3.DynamicBackColor = "IIF(PrimaryDocView._mark,RGB(255,125,125),RGB(255,255,255))"
Column3.Name = "Column3"
Column4.ControlSource = "PrimaryDocView.FrmDate"
Column4.ReadOnly = .T.
Column4.Name = "Column4"
Column5.ControlSource = "PrimaryDocView.FrmNum"
Column5.ReadOnly = .T.
Column5.Name = "Column5"
Column6.ControlSource = "PrimaryDocView.PemiNM"
Column6.ReadOnly = .T.
Column6.Name = "Column6"
Column7.ControlSource = "PrimaryDocView.PIspNM"
Column7.ReadOnly = .T.
Column7.Name = "Column7"
Column8.ControlSource = "PrimaryDocView.FrmSum"
Column8.ReadOnly = .T.
Column8.Name = "Column8"
Column9.ControlSource = "PrimaryDocView.FrmVatSum"
Column9.ReadOnly = .T.
Column9.Name = "Column9"
Column10.ControlSource = "PrimaryDocView.FrmNote"
Column10.ReadOnly = .T.
Column10.Name = "Column10"
Column11.ControlSource = "PrimaryDocView.FrmReason"
Column11.Name = "Column11"
</properties>
		<protected/>
		<methods>PROCEDURE _add
*-------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: GRDDOCSVIEW._ADD
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Äîáàâëåíèå äîêóìåíòà.
*-------------------------------------------------------

*12.05.2004 03:25 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	luResAdding
*------------------------------------------------------------------------------

*12.05.2004 03:26 -&gt;Âûïîëíÿåì îïåðàöèþ äîáàâëåíèÿ äîêóìåíòà
luResAdding = oMgrPD.Operate([FORM],[ADD],ThisForm.nScrFrmID)
*------------------------------------------------------------------------------
*12.05.2004 03:26 -&gt;Îáðàáàòûâàåì ðåçóëüòàò äîáàâëåíèÿ
IF TYPE([luResAdding])==[N] AND !EMPTY(luResAdding)
		LOCAL luResultAdding
		*express_add = .t.
		DO WHILE TYPE('luResAdding')=[N] AND luResAdding&lt;&gt;0
luResultAdding = oMgrPD.Operate([PARTTVR],[ADD],luResAdding )
IF TYPE('luResultAdding')&lt;&gt;[N] OR luResultAdding =0
EXIT
ENDIF
		ENDDO


	*22.12.2004 15:16 -&gt;Îáíîâëÿåì çàïèñü
	This._RSRequeryOne(luResAdding)
	*------------------------------------------------------------------------------

ENDIF
*------------------------------------------------------------------------------

************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************
ENDPROC
PROCEDURE _copy
*-------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: GRDDOCSVIEW._COPY
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Êîïèðîâàíèå äîêóìåíòà
*-------------------------------------------------------

*12.05.2004 03:25 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	luResCopying
*------------------------------------------------------------------------------
SELECT FrmId FROM PrimaryDocView WHERE PrimaryDocView._Mark INTO TABLE TMP\listadd
USE IN listadd
*12.05.2004 03:26 -&gt;Âûïîëíÿåì îïåðàöèþ êîïèðîâàíèÿ äîêóìåíòà
luResCopying = oMgrPD.Operate([FORM],[COPY],PrimaryDocView.FrmID)
*------------------------------------------------------------------------------

*12.05.2004 03:26 -&gt;Îáðàáàòûâàåì ðåçóëüòàò êîïèðîâàíèÿ
IF TYPE([luResCopying])==[N] AND !EMPTY(luResCopying)
	
	*22.12.2004 15:16 -&gt;Îáíîâëÿåì çàïèñü
	This._RSRequeryOne(luResCopying)
	*------------------------------------------------------------------------------

ENDIF
*------------------------------------------------------------------------------

*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE _dele
*-------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: grdDocsView._Dele
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Óäàëåíèå äîêóìåíòà
*-------------------------------------------------------

*12.05.2004 03:25 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	lnFrmID, ;
		luResDeleting
***
lnFrmID = PrimaryDocView.FrmID
*------------------------------------------------------------------------------

*12.05.2004 03:26 -&gt;Âûïîëíÿåì îïåðàöèþ óäàëåíèÿ äîêóìåíòà
luResDeleting = oMgrPD.Operate([FORM],[DELE],lnFrmID)
*------------------------------------------------------------------------------

*12.05.2004 03:26 -&gt;Îáðàáàòûâàåì ðåçóëüòàò óäàëåíèÿ
IF TYPE([luResDeleting])==[L] AND luResDeleting
	
	*22.12.2004 15:16 -&gt;Îáíîâëÿåì çàïèñü
	This._RSRequeryOne(lnFrmID)
	*------------------------------------------------------------------------------

ENDIF
*------------------------------------------------------------------------------

************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************
ENDPROC
PROCEDURE _devicedriverfunc
*------------------------------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: grdFormView._DeviceDriverFunc
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Âûïîëíåíèå ôóíêöèè äðàéâåðà
*------------------------------------------------------------------------------
LPARAMETERS tcMessage

*23.01.2006 17:45 -&gt; Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	_PARAM, ;
		lcOldPath, ;
		lcOldOnError, ;
		lcDriverPath, ;
		loDriver
PRIVATE llError
***
lcOldPath    = SET([PATH])
lcOldOnError = ON([ERROR])
*------------------------------------------------------------------------------

*23.01.2006 17:44 -&gt; Ïîëó÷àåì èíôîðìàöèþ î ôóíêöèè
USE IN IIF(USED([lvDeviceDriverFuncByCustomMSG]),[lvDeviceDriverFuncByCustomMSG],0)
***
_PARAM = tcMessage
USE lvDeviceDriverFuncByCustomMSG IN 0
***
IF RECCOUNT([lvDeviceDriverFuncByCustomMSG]) # 1
	RETURN .F.
ENDIF
*------------------------------------------------------------------------------

*23.01.2006 18:06 -&gt; Îïðåäåëÿåì ïàïêó â êîòîðîé ëåæèò äðàéâåð óñòðîéñòâà
lcDriverPath = FULLPATH(CURDIR(SET([DEFAULT]))) + ;
			   [Drivers\] + ;
			   ALLTRIM(lvDeviceDriverFuncByCustomMSG.DeviceTypeDescriptor) + [\] + ;
			   ALLTRIM(lvDeviceDriverFuncByCustomMSG.DeviceModelDescriptor) + [\] + ;
			   ALLTRIM(lvDeviceDriverFuncByCustomMSG.DeviceDriverVersion) + [\]
*------------------------------------------------------------------------------

*23.01.2006 18:06 -&gt; Ïðîâåðÿåì íàëè÷èå äèðåêòîðèè
IF !DIRECTORY(lcDriverPath)
	MESSAGEBOX([Äðàéâåð äëÿ äàííîãî óñòðîéñòâà íå óñòàíîâëåí íà äàííîì êîìïüþòåðå],16,[Íå âûïîëíåíî])
	RETURN .F.
ENDIF
*------------------------------------------------------------------------------

*23.01.2006 17:46 -&gt; Äîáàâëÿåì ê ïóòÿì
SET PATH TO (lcOldPath+[;]+lcDriverPath)
*------------------------------------------------------------------------------

*23.01.2006 17:46 -&gt; Âûãðóæàåì ini ôàéë äëÿ äðàéâåðà
IF !EMPTY(lvDeviceDriverFuncByCustomMSG.DeviceDriverINI)
	COPY MEMO lvDeviceDriverFuncByCustomMSG.DeviceDriverINI TO (lcDriverPath+[driver.ini])
ENDIF
*------------------------------------------------------------------------------

*23.01.2006 17:46 -&gt; Ñîçäàåì îáúåêò äðàéâåðà
ON ERROR llError=.T.
***
loDriver = oApp.CreateObject(ALLTRIM(lvDeviceDriverFuncByCustomMSG.DeviceDriverAppDescriptor))
***
IF TYPE([loDriver])#[O] OR ISNULL(loDriver)
	MESSAGEBOX([Äðàéâåð äëÿ äàííîãî óñòðîéñòâà íå óñòàíîâëåí íà äàííîì êîìïüþòåðå ëèáî óñòàíîâëåí íåêîððåêòíî],16,[Íå âûïîëíåíî])
	RETURN .F.
ENDIF
***
ON ERROR &amp;lcOldOnError
*------------------------------------------------------------------------------

*23.01.2006 17:45 -&gt; Âûïîëíèì ôóíêöèþ äðàéâåðà
loDriver.Do(ALLTRIM(lvDeviceDriverFuncByCustomMSG.DeviceDriverFuncMsg),lcDriverPath)
*------------------------------------------------------------------------------

*23.01.2006 17:45 -&gt; Âîññòàíîâèì ïóòè
SET PATH TO (lcOldPath)
*------------------------------------------------------------------------------

*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE _docfromxml
*02.04.2007 14:26 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL lcLoadFromDir, ;
	  lnLastID, ;
	  tmpNaklHead, ;
	  tmpNaklFoot, ;
	  tmpExistKam, ;
	  tmpRegisteredIDs_, ;
	  tmpNewKam, ; &amp;&amp; êóðñîð äëÿ òîâàðîâ, êîòðûå åñòü â ÊÂ, íî îòñóòñòâóþò â ãëàâíîì ñïðàâî÷íèêå
	  lnFrmID, ;
	  lnTvrID, ;
	  llResult
*------------------------------------------------------------------------------

*02.04.2007 14:27 -&gt;Ïîëó÷èì êàòàëîã äëÿ çàãðóçêè
lcLoadFromDir = GETDIR()
IF EMPTY(lcLoadFromDir)
	MESSAGEBOX([Óêàæèòå êàòàëîã äëÿ çàãðóçêè äîêóìåíòà!],48,[Çàãðóçêà äîêóìåíòà])
	RETURN
ELSE
	lcLoadFromDir = ADDBS(lcLoadFromDir)
	IF NOT FILE(lcLoadFromDir + [NaklHead.xml])
		MESSAGEBOX([Îòñóòñòâóåò äîêóìåíò äëÿ çàãðóçêè!],48,[Çàãðóçêà äîêóìåíòà])
		RETURN
	ENDIF
ENDIF
*------------------------------------------------------------------------------

*02.04.2007 14:29 -&gt;çàãðóæàåì ãîëîâó...
XMLTOCURSOR(lcLoadFromDir + [NaklHead.xml], [tmpNaklHead], 512)
REPLACE FrmStatusId WITH 1 IN tmpNaklHead
***
USE IN SELECT([lvFrmEdit])
USE lvFrmEdit IN 0 NODATA
INSERT INTO lvFrmEdit ( ;
	FrmTypeID, FrmDate, FrmDateAcc, FrmNum, FrmNote, FrmReason, FrmStatusID, FrmIsPayed, ;
	PointEmiOuID, PointEmiCltID, PointIspOuID, PointIspCltID, DevCltID, ExecEmiCltID, ;
	ExecIspCltID, ContrCltID, PointEmiCltSAccID, PointIspCltSAccID, FrmCurTypeID, FrmPrcTypeID, ;
	FrmAttribute ;
) VALUES ( ;
	1, tmpNaklHead.FrmDate, tmpNaklHead.FrmDateAcc, tmpNaklHead.FrmNum, ;
	tmpNaklHead.FrmNote, tmpNaklHead.FrmReason, tmpNaklHead.FrmStatusID, tmpNaklHead.FrmIsPayed, ;
	tmpNaklHead.PointEmiOuID, tmpNaklHead.PointEmiCltID, tmpNaklHead.PointIspOuID, tmpNaklHead.PointIspCltID, ;
	tmpNaklHead.DevCltID, tmpNaklHead.ExecEmiCltID, tmpNaklHead.ExecIspCltID, tmpNaklHead.ContrCltID, ;
	tmpNaklHead.PointEmiCltSAccID, tmpNaklHead.PointIspCltSAccID, 1, tmpNaklHead.FrmPrcTypeID, ;
	tmpNaklHead.FrmAttribute ;
)
llResult = TABLEUPDATE(1,.T.,[lvFrmEdit])
IF NOT llResult
	TABLEREVERT(.T.,[lvFrmEdit])
	USE IN SELECT([lvFrmEdit])
	MESSAGEBOX([Äîêóìåíò íå çàãðóæåí!],48,[Çàãðóçêà äîêóìåíòà])
	RETURN
ENDIF
*------------------------------------------------------------------------------

*02.04.2007 14:39 -&gt;Ïîëó÷èì ID íîâîãî äîêóìåíòà
lnFrmID = spGetLastIncrementedId([lvFrmEdit])
USE IN SELECT([lvFrmEdit])
*------------------------------------------------------------------------------

*02.04.2007 14:39 -&gt;çàãðóæàåì íîãè...
XMLTOCURSOR(lcLoadFromDir + [NaklFoot.xml], [tmpNaklFoot], 512)

*02.04.2007 14:55 -&gt;ÑÓÙÅÑÒÂÓÞÙÈÅ ÒÎÂÀÐÛ
USE lvFrmPartTvrEdit IN 0 NODATA
***
INSERT INTO lvFrmPartTvrEdit ( ;
	FrmID,TvrId,MsuId,TvrQnt,TvrQntNetto,TvrPrcBuy,TvrPrcSale,TvrIDCalc,User_) ;
SELECT  lnFrmID, ; &amp;&amp; ïðîñòàâèì èäåíòôèôêàòîð äîêóìåíòà
		Tovar.TvrId, ;
		tmpNaklFoot.MsuId, ;
		tmpNaklFoot.TvrQnt, ;
		tmpNaklFoot.TvrQntNetto, ;
		tmpNaklFoot.TvrPrcBuy, ;
		tmpNaklFoot.TvrPrcSale, ;
		tmpNaklFoot.TvrIdCalc, ;
		-1 ;
FROM tmpNaklFoot ;
INNER JOIN Tovar ON Tovar.ID_= tmpNaklFoot.TvrId
***
llResult = .T. &amp;&amp;llResult = TABLEUPDATE(1,.T.,[lvFrmPartTvrEdit])
IF NOT llResult
	TABLEREVERT(.T.,[lvFrmPartTvrEdit])
	USE IN SELECT([lvFrmPartTvrEdit])
	MESSAGEBOX([Äîêóìåíò íå çàãðóæåí!],48,[Çàãðóçêà äîêóìåíòà])
	RETURN
ELSE
	USE IN SELECT([lvFrmPartTvrEdit])
ENDIF
*------------------------------------------------------------------------------

*02.04.2007 14:56 -&gt;ÍÎÂÛÅ ÒÎÂÀÐÛ
** çàïèñü â òàáëèöó Tovar
USE lvTvrEdit IN 0 NODATA
***
INSERT INTO lvTvrEdit (TvrTypeID,TvrNM,TvrIsActiv,MsuID,ID_,User_) ;
SELECT ;
		2, ;
		ALLTRIM(tmpNaklFoot.TvrNM)+[_], ;
		1, ;
		tmpNaklFoot.MsuId, ;
		tmpNaklFoot.TvrID, ;
		-1 ;
FROM tmpNaklFoot ;
WHERE tmpNaklFoot.TvrId NOT IN (SELECT ID_ FROM Tovar WHERE ID_ &lt;&gt; 0 )
***
llResult = TABLEUPDATE(1,.T.,[lvTvrEdit])
IF NOT llResult
	TABLEREVERT(.T.,[lvTvrEdit])
	USE IN SELECT([lvTvrEdit])
	MESSAGEBOX([Äîêóìåíò íå çàãðóæåí!],48,[Çàãðóçêà äîêóìåíòà])
	RETURN
ELSE
	USE IN SELECT([lvTvrEdit])
ENDIF
*------------------------------------------------------------------------------

USE lvFrmPartTvrEdit IN 0 NODATA
***
INSERT INTO lvFrmPartTvrEdit ( ;
	FrmID,TvrId,MsuId,TvrQnt,TvrQntNetto,TvrPrcBuy,TvrPrcSale,TvrIDCalc,User_) ;
SELECT  lnFrmID, ; &amp;&amp; ïðîñòàâèì èäåíòôèôêàòîð äîêóìåíòà
		Tovar.TvrId, ;
		tmpNaklFoot.MsuId, ;
		tmpNaklFoot.TvrQnt, ;
		tmpNaklFoot.TvrQntNetto, ;
		tmpNaklFoot.TvrPrcBuy, ;
		tmpNaklFoot.TvrPrcSale, ;
		tmpNaklFoot.TvrIdCalc, ;
		-1 ;
FROM tmpNaklFoot ;
WHERE tmpNaklFoot.TvrId NOT IN (SELECT ID_ FROM Tovar WHERE ID_ &lt;&gt; 0 )
***
llResult = llResult = TABLEUPDATE(1,.T.,[lvFrmPartTvrEdit])
IF NOT llResult
	TABLEREVERT(.T.,[lvFrmPartTvrEdit])
	USE IN SELECT([lvFrmPartTvrEdit])
	MESSAGEBOX([Äîêóìåíò íå çàãðóæåí!],48,[Çàãðóçêà äîêóìåíòà])
	RETURN
ELSE
	USE IN SELECT([lvFrmPartTvrEdit])
ENDIF
*------------------------------------------------------------------------------

*22.12.2004 15:16 -&gt;Îáíîâëÿåì çàïèñü
This._RSRequeryOne(lnFrmID)
*------------------------------------------------------------------------------

*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE _doctoxml
*02.04.2007 14:03 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL   lcSaveToDir, ;
		_PARAM
*------------------------------------------------------------------------------


*02.04.2007 14:03 -&gt;Ïîëó÷èì êàòàëîã äëÿ âûãðóçêè
lcSaveToDir = GETDIR()
IF EMPTY(lcSaveToDir)
	MESSAGEBOX([Óêàæèòå êàòàëîã äëÿ âûãðóçêè äîêóìåíòà!],48,[Âûãðóçêà äîêóìåíòà])
	RETURN
ELSE
	lcSaveToDir = ADDBS(lcSaveToDir)
ENDIF
*------------------------------------------------------------------------------

_PARAM = PrimaryDocView.FrmID

*02.04.2007 14:05 -&gt;Âûãðóæàåì ãîëîâó äîêóìåíòà
USE IN SELECT([lvFrmView])
USE lvFrmView IN 0
CURSORTOXML([lvFrmView], lcSaveToDir + [NaklHead.xml], 1, 512 + 16, 0, [1])
*------------------------------------------------------------------------------

*02.04.2007 14:15 -&gt;Âûãðóæàåì íîãè äîêóìåíòà
USE IN SELECT([lvFrmPartTvrViewExt])
USE lvFrmPartTvrViewExt IN 0
CURSORTOXML([lvFrmPartTvrViewExt], lcSaveToDir + [NaklFoot.xml], 1, 512 + 16, 0, [1])
USE IN SELECT([lvFrmPartTvrViewExt])
*------------------------------------------------------------------------------

*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE _edit
*-------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: grdDocsView._Edit
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Ðåäàêòèðîâàíèå äîêóìåíòà
*-------------------------------------------------------

*12.05.2004 03:25 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	lnFrmID, ;
		luResEditing
***
lnFrmID = PrimaryDocView.FrmID
*------------------------------------------------------------------------------

*12.05.2004 03:26 -&gt;Âûïîëíÿåì îïåðàöèþ ðåäàêòèðîâàíèÿ äîêóìåíòà
luResEditing = oMgrPD.Operate([FORM],[EDIT],lnFrmID)
*------------------------------------------------------------------------------

*12.05.2004 03:26 -&gt;Îáðàáàòûâàåì ðåçóëüòàò ðåäàêòèðîâàíèÿ
IF TYPE([luResEditing])==[L] AND luResEditing
	
	*22.12.2004 15:16 -&gt;Îáíîâëÿåì çàïèñü
	This._RSRequeryOne(lnFrmID)
	*------------------------------------------------------------------------------

ENDIF
*------------------------------------------------------------------------------

************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************
ENDPROC
PROCEDURE _find
		luOperateResult = oApp.ExecuteScrFormByObjDescRetVal([frmCltFindCode;Client_v1.vcx;Client.app])
		IF  luOperateResult #0
		SELECT PrimaryDocView
		LOCATE ALL FOR PrimaryDocView.PointIspCl = luOperateResult
	    	IF !FOUND()
		    WAIT WINDOW 'Ðàñøèðÿåì ïîèñê ...' nowait
			this._RSRequery()
			SELECT PrimaryDocView
			LOCATE ALL FOR PrimaryDocView.PointIspCl = luOperateResult
			  		IF !FOUND()
			  			MESSAGEBOX('Ïðîâåðòå ïåðèîä äàò è îñòàëüíûå îãðàíè÷åíèÿ.';
			  		   +CHR(13)+'Êëèåíòà ñ òàêèì êîäîì â óêàçàííîì ïåðèîäå íåò.',0+32+4096,'Ïðåäóïðåæäåíèå',5000)
			  		ENDIF
		    ENDIF
		ELSE
			  			MESSAGEBOX('Ïðîâåðòå ïåðèîä äàò è îñòàëüíûå îãðàíè÷åíèÿ.';
			  		   +CHR(13)+'Êëèåíòà ñ òàêèì êîäîì â óêàçàííîì ïåðèîäå íåò.',0+32+4096,'Ïðåäóïðåæäåíèå',5000)
		ENDIF
		RETURN luOperateResult

ENDPROC
PROCEDURE _frmact
oMgrPD.Operate([FRMACT],[VIEW])
ENDPROC
PROCEDURE _gethandledcustommsglist
*-------------------------------------------------------
* Project.........:	BASIS.PJX
* Library.........: BASE_V1.VCX
* Class.Module....: GRD._GETHANDLEDCUSTOMMSGLIST
* Called by.......: &lt;.RefreshHandledCustomMsgList();.RightClick()&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;lcHandledCustomMsgList&gt;
* Notes...........: &lt;public/user/nodefault&gt; Ôîðìèðîâàíèå ñïèñêà ïîëüçîâàòåëüñêèõ ñîîáùåíèé íà îñíîâàíèè
*					ñïèñêà ñîîáùåíèé, óêàçàííûõ â ñâîéñòâå ._HandledCustomMsgList, ïóòåì óäàëåíèÿ ñîîáùåíèé,
*					êîòîðûå íå ìîãóò áûòü îáðàáîòàíû â äàííîì êîíòåêñòå.
*-------------------------------------------------------
WITH This

*09.12.2004 14:12 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	lcHandledCustomMsgList, ;
		lnCounter
*------------------------------------------------------------------------------

*******************************************************************************
* Âûïîëíèì ìåòîä ðîäèòåëüñêîãî êëàññà                                         *
*******************************************************************************

*09.12.2004 14:30 -&gt;Ïîëó÷èì ñïèñîê ñîîáùåíèé, êîòîðûå ìîãóò áûòü îáðàáîòàíû ðîäèòåëüñêèì êëàññîì
lcHandledCustomMsgList = DODEFAULT()
*------------------------------------------------------------------------------
*09.12.2004 14:29 -&gt;Åñëè ñïèñîê ñîîáùåíèé ïóñòîé - âûéäåì èç ìåòîäà
IF EMPTY(lcHandledCustomMsgList)
	RETURN lcHandledCustomMsgList
ENDIF
*------------------------------------------------------------------------------

*******************************************************************************
* Èíèöèèðóåì ìàññèâ ñâîéñòâ CustomFuct                                        *
*******************************************************************************
*09.12.2004 14:07 -&gt;Èíèöèèðóåì ìàññèâ ñâîéñòâ CustomFunct
IF !.lCstFuncPropInitiated
	*07.12.2004 14:37 -&gt;Âûïîëíÿåì çàïðîñ èíôîðìàöèè î CustomFunc äëÿ äàííîé ôîðìû
	SELECT lvCstFuncAllByScrFrm
	SCAN ALL
		IF ISNULL(.aCstFuncProp)
			lnNewSref = 1
		ELSE
			lnNewSref = ALEN(.aCstFuncProp,1) + 1
		ENDIF
		DIMENSION .aCstFuncProp[lnNewSref,cnCSTFUNC_ARRAY_COLS]
		.aCstFuncProp[lnNewSref,cnCSTFUNC_MSG] = UPPER(ALLTRIM(lvCstFuncAllByScrFrm.CstFuncMsg))
		.aCstFuncProp[lnNewSref,cnCSTFUNC_FRMTYPE] = lvCstFuncAllByScrFrm.FrmTypeID
	ENDSCAN
	*------------------------------------------------------------------------------
	
	*07.12.2004 14:57 -&gt;Âûñòàâèì ôëàã
	.lCstFuncPropInitiated = .T.
	*------------------------------------------------------------------------------
ENDIF
*------------------------------------------------------------------------------

*******************************************************************************
* Óäàëèì ôóíêöèè, êîòîðûå íå ìîãóò áûòü âûïîëíåíû íàä äàííûì òèïîì äîêóìåíòà  *                                        *
*******************************************************************************

*31.10.2003 17:20 -&gt;Äîáàâëÿåì ñëåâà è ñïðàâà ïî ; ÷òîáû êîððåêòíî îáðàáûòûâàòü "êðàéíèå" ñîîáùåíèÿ
lcHandledCustomMsgList = [;]+UPPER(ALLTRIM(lcHandledCustomMsgList))+[;]
*------------------------------------------------------------------------------

*09.12.2004 14:11 -&gt;Ïðîâåðÿåì ôóíêöèè ïðèâÿçàííûå ê òèïó äîêóìåíòà
IF !ISNULL(.aCstFuncProp)
	FOR lnCounter = 1 TO ALEN(.aCstFuncProp,1)
		IF 	!EMPTY(.aCstFuncProp[lnCounter,cnCSTFUNC_FRMTYPE]) AND ;				&amp;&amp;ôóíêöèÿ ïðèâÿçàíà â òèïó äîêóìåíòà
			.aCstFuncProp[lnCounter,cnCSTFUNC_FRMTYPE] # PrimaryDocView.FrmTypeID	&amp;&amp;è ýòîò òèï íå òèï òåêóùåãî äîêóìåíòà
			*{
			lcHandledCustomMsgList = STRTRAN(lcHandledCustomMsgList,[;]+.aCstFuncProp[lnCounter,cnCSTFUNC_MSG]+[;],[;])
			*}
		ENDIF
	ENDFOR
ENDIF
*------------------------------------------------------------------------------
			
*09.12.2004 14:34 -&gt;Óäàëÿåì ñëåâà è ñïðàâà ; äîáàâëåííûå ðàíåå
IF !(lcHandledCustomMsgList==[;])
	lcHandledCustomMsgList = SUBSTR(lcHandledCustomMsgList,2,LEN(lcHandledCustomMsgList)-2)
ELSE
	lcHandledCustomMsgList = [NAKLOUT]
ENDIF	
*------------------------------------------------------------------------------
			
*05.04.2004 15:30 -&gt;Âåðíåì ñïèñîê ñîîáùåíèé
RETURN lcHandledCustomMsgList
*------------------------------------------------------------------------------

ENDWITH
************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************
ENDPROC
PROCEDURE _gethandledstandartmsglist
*------------------------------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: grdFormView._GETHANDLEDSTANDARTMSGLIST
* Called by.......: &lt;.RefreshHandledStandartMsgList();.RightClick()&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;lcResult&gt;
* Notes...........: Çàïðåòèì óäàëåíèå, åñëè òåêóùèé äîêóìåíò àêöåïòîâàí
*------------------------------------------------------------------------------

*15.09.2005 15:23 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	lnFrmID, ;
		lcResult
***
lnFrmID = PrimaryDocView.FrmID
*------------------------------------------------------------------------------

*15.09.2005 15:24 -&gt; Îïðåäåëèì ðàçðåø¸ííûå îïåðàöèè
IF lnFrmID = 0

	*21.12.2005 10:33 -&gt; Âûïîëíèì ìåòîä ðîäèòåëüñêîãî êëàññà
	lcResult = DODEFAULT()
	*------------------------------------------------------------------------------

ELSE
	
	*15.09.2005 15:27 -&gt; Ïîëó÷èì èíôîðìàöèþ î ñòàòóñå äîêóìåíòà
	LOCAL _PARAM
	_PARAM = lnFrmID
	***
	USE IN IIF(USED([lvFrmStatusInfoByFrmID]),[lvFrmStatusInfoByFrmID],0)
	USE lvFrmStatusInfoByFrmID IN 0
	*------------------------------------------------------------------------------

	*15.09.2005 15:28 -&gt; Ïðîâåðèì ó÷àñòâóåò ëè äîêóìåíò â ó÷åòå
	IF	!lvFrmStatusInfoByFrmID.FrmStatIsInvAcc AND ;
		!lvFrmStatusInfoByFrmID.FrmStatIsCostAcc

		*27.03.2006 10:50 -&gt; Ðàçðåøèì âñå îïåðàöèè
		lcResult = DODEFAULT()
		*------------------------------------------------------------------------------

	ELSE

		*27.03.2006 10:54 -&gt; Èñêëþ÷èì óäàëåíèå äîêóìåíòà èç ñïèñêà âîçìîæíûõ îïåðàöèé
		lcResult = STRTRAN([;] + DODEFAULT() + [;],[;DELE;],[;])
		*------------------------------------------------------------------------------

		*15.12.2005 17:49 -&gt; Óäàëÿåì ñëåâà è ñïðàâà ; äîáàâëåííûå ðàíåå
		IF !(lcResult == [;])
			lcResult = SUBSTR(lcResult,2,LEN(lcResult)-2)
		ELSE
			lcResult = []
		ENDIF	
		*------------------------------------------------------------------------------

	ENDIF
	*------------------------------------------------------------------------------

ENDIF
*------------------------------------------------------------------------------

*15.09.2005 15:23 -&gt; Âîçâðàùàåì ðåçóëüòàò
RETURN lcResult
*------------------------------------------------------------------------------

*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE _handlecustommsg
*------------------------------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: grdFormView._HandleCustomMsg
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Îáðàáîòêà CustomMsg
*------------------------------------------------------------------------------
LPARAMETERS tcMsg

*14.10.2005 15:04 -&gt; Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL   luResult
*------------------------------------------------------------------------------

*06.12.2005 13:58 -&gt;Âûïîëíèì êîìàíäó
DO CASE

	CASE tcMsg == [REQSALE]

		*09.12.2004 18:10 -&gt; Ïåðåîïðåäåëÿåì öåíû ïðîäàæè
	    spReqPriceSale(PrimaryDocView.FrmID,PrimaryDocView.FrmPrcTypeID)
	    *------------------------------------------------------------------------------

		*22.12.2004 15:16 -&gt; Îáíîâëÿåì çàïèñü
		This._RSRequeryOne(PrimaryDocView.FrmID)
		*------------------------------------------------------------------------------

	    *20.06.2006 12:12 -&gt; Îáíîâëÿåì ñâÿçàííûå äàííûå
	    This._RefreshRelatedObjects()
		*------------------------------------------------------------------------------

	CASE tcMsg == [REQPRICE]

		*09.12.2004 18:10 -&gt; Ïåðåîïðåäåëÿåì öåíû ïîñòóïëåíèÿ
	    spReqPriceBay(PrimaryDocView.FrmID,.T.)
	    *------------------------------------------------------------------------------

		*22.12.2004 15:16 -&gt; Îáíîâëÿåì çàïèñü
		This._RSRequeryOne(PrimaryDocView.FrmID)
		*------------------------------------------------------------------------------

	    *20.06.2006 12:12 -&gt; Îáíîâëÿåì ñâÿçàííûå äàííûå
	    This._RefreshRelatedObjects()
		*------------------------------------------------------------------------------

	CASE tcMsg == [REQACTBAY]

		*09.12.2004 18:10 -&gt; Ïåðåîïðåäåëÿåì öåíû ïîñòóïëåíèÿ íà ãîòîâûå áëþäà
	    spReqActBay(PrimaryDocView.FrmID,.T.)
	    *------------------------------------------------------------------------------

		*22.12.2004 15:16 -&gt; Îáíîâëÿåì çàïèñü
		This._RSRequeryOne(PrimaryDocView.FrmID)
		*------------------------------------------------------------------------------

	    *20.06.2006 12:12 -&gt; Îáíîâëÿåì ñâÿçàííûå äàííûå
	    This._RefreshRelatedObjects()
		*------------------------------------------------------------------------------

	CASE tcMsg == [MAKEACTPRO]

		*09.12.2004 18:10 -&gt; Ôîðìèðîâàíèå àêòà ïðîèçâîäñòâà ïî íàáîðó áëþä
		spMakeActPro(PrimaryDocView.FrmID,.T.)
		*------------------------------------------------------------------------------

		*22.12.2004 15:16 -&gt; Îáíîâëÿåì çàïèñü
		This._RSRequeryOne(PrimaryDocView.FrmID)
		*------------------------------------------------------------------------------

	    *20.06.2006 12:12 -&gt; Îáíîâëÿåì ñâÿçàííûå äàííûå
	    This._RefreshRelatedObjects()
		*------------------------------------------------------------------------------

	CASE tcMsg == [PAYDOCEXP]

		*09.12.2004 18:10 -&gt;Ýêñïîðò ïëàòåæíûõ ïîðó÷åíèé
		*** Ïðîâåðÿåì íà íàëè÷èå ïîìå÷åíûõ çàïèñåé
		LOCAL lcUniqueName
		PUBLIC lcTmpAl, llAll
		llAll = .f.
		lcTmpAl      = [_d] + SYS(2015)
		lcUniqueNameId = [tmp\] + lcTmpAl + [.DBF]
		SELECT FrmId AS Id FROM PrimaryDocView WHERE _Mark INTO TABLE (lcUniqueNameId)

		IF _tally &gt;0 AND MESSAGEBOX('Ðàáîòàòü ñ òåêóùèì äîêóìåíòîì (ÄÀ) èëè'+CHR(13)+;
									'c ïîìå÷åíûìè (ÍÅÒ)?',4+64+256,'C êàêèìè äîêóìåíòàìè ðàáîòàòü ...')&lt;&gt;6
			llAll = .t.
		ENDIF

		USE IN (lcTmpAl)
		oMgrPD.Operate([PAYDOC],[EXPORT],PrimaryDocView.FrmID)
		RELEASE lcTmpAl, llAll
		*------------------------------------------------------------------------------
	CASE tcMsg == [EMPLWK]
		*01.10.2007 18:10 -&gt;Ðåãèñòðàöèÿ ñîòðóäíèêà íà ðàáîòå
loLoginForm = oApp.DoFormObj([loginempl;pos.vcx])

	CASE tcMsg == [PAYORD]
LOCAL nPayVarNum
nPayVarNum = ALLT(oRes.GetParam([RST],[PAYTYPE]))
		*16.09.2007 18:10 -&gt;Îïëàòà ñ÷åòà êëèåíòà
		LOCAL lnFrmID
		lnFrmID = PrimaryDocView.FrmID
		lRetVal = oApp.DoModalFormRetValObj([FrmPayment;rst_v1.vcx],lnFrmID  ,nPayVarNum,1 ,0)
		*------------------------------------------------------------------------------
	    This._RSRequeryOne(lnFrmID)

	CASE tcMsg == [PAYDOCIMP]

		*09.12.2004 18:10 -&gt;Èìïîðò ïëàòåæíûõ äîêóìåíòîâ
		oMgrPD.Operate([PAYDOC],[IMPORT])
		*------------------------------------------------------------------------------

	CASE tcMsg == [PAYDOCMAKE]

		*15.01.2006 18:10 -&gt;ôîðìèðîâàíèå ïëàòåæíûõ äîêóìåíòîâ
* ïðîâåðÿåì íàëè÷èå ðåæèìà ðàáîòû ñ äîêóìåíòàìè íà îïëàòó
		IF oQryParMgr.ParamGet(thisForm.oFlt.cntQueryParam.cQryParSID,[qplQueue])
		       this._PAYDOCMAKE
		      ELSE
		      =MESSAGEBOX('Ïåðåéäèòå â ðåæèì ðàáîòû "Î÷åðåäü äîêóìåíòîâ íà îïëàòó"',16)
		ENDIF
		*------------------------------------------------------------------------------

	*CASE tcMsg == [MAKETOVOTCH]

		*15.01.2006 18:10 -&gt;ôîðìèðîâàíèå òîâàðíîãî îò÷åòà
		*oMgrPD.Operate([FORM],[MAKETOVOTCH])
	*	WAIT WINDOW "ïîêà íå  ñäåëàíî ..."
		*------------------------------------------------------------------------------

	CASE tcMsg == [INHERIT]
	
		*09.12.2004 18:10 -&gt; Íàñëåäîâàíèå äîêóìåíòà
		This._Inherit()
		*------------------------------------------------------------------------------
		
	CASE tcMsg == [NAKLOUT]
	
		*06.12.2005 13:57 -&gt;Ôîðìèðîâàíèå íàêëàäíîé ïî ðåçóëüòàòàì ïðîäàæ
		This._NaklOut()
		*------------------------------------------------------------------------------
		
	CASE tcMsg == [READDATAIN]
	
		*23.01.2006 17:42 -&gt; Âûïîëíÿåì îïåðàöèþ
		This._ReadDataIn()
		*------------------------------------------------------------------------------

	CASE tcMsg == [READDATAOUT]
	
		*23.01.2006 17:42 -&gt; Âûïîëíÿåì îïåðàöèþ
		This._ReadDataOut()
		*------------------------------------------------------------------------------

	CASE tcMsg == [READDATAINV]
	
		*23.01.2006 17:42 -&gt; Âûïîëíÿåì îïåðàöèþ
		This._ReadDataInv()
		*------------------------------------------------------------------------------

	CASE tcMsg == [INVBLUDO]

		*19.07.2006 10:47 -&gt; Ðàçâîðà÷èâàåì áëþäà ïî èíãðåäèåíòàì
		spInventoryBludo(PrimaryDocView.FrmID)
		*------------------------------------------------------------------------------

		*22.12.2004 15:16 -&gt; Îáíîâëÿåì çàïèñü
		This._RSRequeryOne(PrimaryDocView.FrmID)
		*------------------------------------------------------------------------------

	    *20.06.2006 12:12 -&gt; Îáíîâëÿåì ñâÿçàííûå äàííûå
	    This._RefreshRelatedObjects()
		*------------------------------------------------------------------------------

	CASE tcMsg == [FILLCORR]

		*08.09.2006 10:38 -&gt;Çàïîëíåíèå êîððåêòèðóþùåãî äîêóìåíòà
		oMgrPD.Operate([FORM],[FILLCORR],PrimaryDocView.FrmID)
		*------------------------------------------------------------------------------

	    *08.09.2006 15:18 -&gt;Îáíîâëÿåì ñâÿçàííûå äàííûå
	    This._RefreshRelatedObjects()
		*------------------------------------------------------------------------------

	CASE tcMsg == [TRANCORR]

		*08.09.2006 10:38 -&gt;Çàïîëíåíèå êîððåêòèðóþùåãî äîêóìåíòà
		oMgrPD.Operate([FORM],[TRANCORR],PrimaryDocView.FrmID)
		*------------------------------------------------------------------------------

	    *08.09.2006 15:18 -&gt;Îáíîâëÿåì ñâÿçàííûå äàííûå
	    This._RefreshRelatedObjects()
		*------------------------------------------------------------------------------

	CASE tcMsg == [FRMACT]
	
		*06.12.2005 13:57 -&gt;Ôîðìèðîâàíèå íàêëàäíîé ïî ðåçóëüòàòàì ïðîäàæ
		This._FrmAct()
		*------------------------------------------------------------------------------
		
	CASE tcMsg == [DOCTOXML]
		
		*02.04.2007 13:51 -&gt;Âûãðóçêà äîêóìåíòà â XML
		This._DocToXML()
		*------------------------------------------------------------------------------
		
	CASE tcMsg == [DOCFROMXML]
		
		*02.04.2007 13:57 -&gt;Çàãðóçêà äîêóìåíòà èç XML
		This._DocFromXML()
		*------------------------------------------------------------------------------

ENDCASE
*------------------------------------------------------------------------------

*10.12.2004 13:58 -&gt;Âûïîëíèì ìåòîä ðîäèòåëüñêîãî êëàññà
DODEFAULT(tcMsg)
*------------------------------------------------------------------------------

*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE _info
oMgrPD.Operate([FORM],[INFO],PrimaryDocView.FrmID)
ENDPROC
PROCEDURE _inherit
*------------------------------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: GRDDOCSVIEW._Inherit
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Íàñëåäîâàíèå äîêóìåíòà
*------------------------------------------------------------------------------

*12.05.2004 03:25 -&gt; Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	luResInheriting
*------------------------------------------------------------------------------
SELECT FrmId FROM PrimaryDocView WHERE PrimaryDocView._Mark INTO TABLE TMP\listadd
USE IN listadd
*12.05.2004 03:26 -&gt; Âûïîëíÿåì îïåðàöèþ íàñëåäîâàíèÿ äîêóìåíòà
luResInheriting = oMgrPD.Operate([FORM],[INHERIT],PrimaryDocView.FrmID)
*------------------------------------------------------------------------------

*12.05.2004 03:26 -&gt; Îáðàáàòûâàåì ðåçóëüòàò êîïèðîâàíèÿ
IF TYPE([luResInheriting])==[N] AND !EMPTY(luResInheriting)
	
	*22.12.2004 15:16 -&gt; Îáíîâëÿåì çàïèñü
	This._RSRequeryOne(luResInheriting)
	*------------------------------------------------------------------------------

ENDIF
*------------------------------------------------------------------------------

*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE _mark
REPLACE PrimaryDocView._mark WITH !PrimaryDocView._mark
IF !EOF()
	SKIP 1
ENDIF
ThisForm.TotalInfo()

ENDPROC
PROCEDURE _naklout
*------------------------------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: primarydoc_v1.vcx
* Class.Module....: grdFormView._NaklOut
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Ôîðìèðîâàíèå ðàñõîäíîé íàêëàäíîé ïî ðåçóëüòàòàì ïðîäàæ
*------------------------------------------------------------------------------

*06.12.2005 12:03 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	luResAddingNaklOut
*------------------------------------------------------------------------------

*06.12.2005 12:04 -&gt;Âûïîëíÿåì îïåðàöèþ íàñëåäîâàíèÿ äîêóìåíòà
luResAddingNaklOut = oMgrPD.Operate([FORM],[NAKLOUT])
*------------------------------------------------------------------------------

*12.05.2004 03:26 -&gt; Îáðàáàòûâàåì ðåçóëüòàò êîïèðîâàíèÿ
IF TYPE([luResAddingNaklOut])==[N] AND luResAddingNaklOut&gt;0
	
	*22.12.2004 15:16 -&gt; Îáíîâëÿåì çàïèñè
	This._RSRequery()
	*------------------------------------------------------------------------------

ELSE
	MESSAGEBOX([Íàêëàäíûå íå ñôîðìèðîâàíû],48,[Ïðåäóïðåæäåíèå])
ENDIF
*------------------------------------------------------------------------------

*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE _paydocmake
*12.05.2004 03:25 -&gt; Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	luResInheriting,lnthisFrm
*------------------------------------------------------------------------------
lnthisFrm = PrimaryDocView.FrmID
SELECT distinct PrimaryDocView.FrmID as cntFrmID ,;
PrimaryDocView.FrmSum as FrmIncSum ,;
PrimaryDocView.FrmVatSum AS PartSumVat ,;
PrimaryDocView.PointEmiOu as PIspOuID ,;
PrimaryDocView.PointIspOu as PEmiOuID ,;
PrimaryDocView.PointEmiCl as PIspCltID ,;
PrimaryDocView.PointIspCl as PEmiCltID ,;
PrimaryDocView.PEmiAccID as PIspSaccID ,;
PrimaryDocView.PIspAccID as PEmiSaccID ,;
FrmTypePay.FrmTypeID ;
FROM PrimaryDocView ;
INNER JOIN Basis!FrmTypePay ON PrimaryDocView.FrmTypeID = FrmTypePay.IncludeFrmTypeID AND FrmTypePay.IsDefault ;
WHERE PrimaryDocView._Mark OR PrimaryDocView.FrmID =  lnthisFrm ;
ORDER BY 4,5,6,7,8,9,10 ;
INTO TABLE TMP\listadd

USE IN listadd
*12.05.2004 03:26 -&gt; Âûïîëíÿåì îïåðàöèþ íàñëåäîâàíèÿ äîêóìåíòà
luResInheriting = oMgrPD.Operate([FORM],[TOPAY],PrimaryDocView.FrmID)
*------------------------------------------------------------------------------
USE IN SELECT('listadd')
ERASE TMP\listadd.dbf

*12.05.2004 03:26 -&gt; Îáðàáàòûâàåì ðåçóëüòàò êîïèðîâàíèÿ
IF TYPE([luResInheriting])==[N] AND !EMPTY(luResInheriting)
	
	*22.12.2004 15:16 -&gt; Îáíîâëÿåì çàïèñü
	This._RSRequeryOne(luResInheriting)
	*------------------------------------------------------------------------------

ENDIF
*------------------------------------------------------------------------------

RETURN






LOCAL lnrecord,lcwhere, controlSumm,lnFrmId,lcntDoc
lcwhere  = ''
lnrecord = RECNO('PrimaryDocView')
lcntDoc = 0
WAIT WINDOW "ôîðìèðóåì ïëàòåæíûå äîêóìåíòû" NOWAIT
* îïðåäåëÿåì: ðàáîòàåì ñ òåêóùèì èëè ñ ïîìå÷åíûìè
SELECT _mark FROM PrimaryDocView INTO CURSOR MakePay WHERE _mark
USE IN MakePay
IF _tally&gt;0 AND MESSAGEBOX('Ðàáîòàåì ñ òåêóùåé çàïèñüþ (äà) èëè ñ î÷åðåäüþ (íåò)?',4+32+256)=7
lcwhere = ' WHERE PrimaryDocView._mark '
ELSE
LOCAL lnFrmID
lnFrmID = PrimaryDocView.FrmID
lcwhere = ' WHERE PrimaryDocView.FrmID = lnFrmID '
ENDIF

*îïðåäåëÿåì ñóììó äîêóìåíòà
*îïðåäåëÿåì íäñ äîêóìåíòà
*îïðåäåëÿåì êëèåíòà
*îïðåäåëÿåì êëèåíòà
*îïðåäåëÿåì îòäåë
*îïðåäåëÿåì îòäåë
*îïðåäåëÿåì òèï äîêóìåíòà
*îïðåäåëÿåì ñòàòóñ äîêóìåíòà
*îïðåäåëÿåì ðàññ÷åòíûé ñ÷åò
SELECT PrimaryDocView.FrmID as cntFrmID ,;
PrimaryDocView.FrmSum as cntFrmincludeSum ,;
PrimaryDocView.FrmVatSum AS FrmpartFrmSumVatRate ,;
PrimaryDocView.PointEmiOu as PointIspOuID ,;
PrimaryDocView.PointIspOu as PointEmiOuID ,;
PrimaryDocView.PointEmiCl as PointIspCltID ,;
PrimaryDocView.PointIspCl as PointEmiCltID ,;
PrimaryDocView.PEmiAccID as PointIspCltsaccID ,;
PrimaryDocView.PIspAccID as PointEmiCltsaccID ,;
FrmTypePay.FrmTypeID ;
FROM PrimaryDocView ;
INNER JOIN Basis!FrmTypePay ON PrimaryDocView.FrmTypeID = FrmTypePay.IncludeFrmTypeID AND FrmTypePay.IsDefault ;
&amp;lcwhere  ;
ORDER BY 4,5,6,7,8,9,10 ;
INTO CURSOR TmpPay

USE IN SELECT([lvFrmEdit])
USE lvFrmEdit IN 0 NODATA
USE IN SELECT([lvFrmPartFrmEdit])
USE lvFrmPartFrmEdit IN 0 NODATA
SELECT TmpPay
controllSumm = - 100
SCAN &amp;&amp;FOR .f.
IF !controllSumm = NVL(TmpPay.PointIspOuID,0)+ NVL(TmpPay.PointEmiOuID,0)+ NVL(TmpPay.PointIspCltID,0)+ NVL(TmpPay.PointEmiCltID,0)+ NVL(TmpPay.PointIspCltsaccID,0)+ NVL(TmpPay.PointEmiCltsaccID,0)
	controllSumm = NVL(TmpPay.PointIspOuID,0)+ NVL(TmpPay.PointEmiOuID,0)+ NVL(TmpPay.PointIspCltID,0)+ NVL(TmpPay.PointEmiCltID,0)+ NVL(TmpPay.PointIspCltsaccID,0)+ NVL(TmpPay.PointEmiCltsaccID,0)
INSERT INTO lvFrmEdit ;
(FrmTypeID,;
PointIspOuID,;
PointEmiOuID,;
PointIspCltID,;
PointEmiCltID,;
PointIspCltsaccID ,;
PointEmiCltsaccID ,;
FrmDate,;
FrmDateAcc,;
FrmStatusId,;
FrmCurTypeId) ;
VALUES ;
(TmpPay.FrmTypeID,;
TmpPay.PointIspOuID,;
TmpPay.PointEmiOuID,;
TmpPay.PointIspCltID,;
TmpPay.PointEmiCltID,;
TmpPay.PointIspCltsaccID ,;
TmpPay.PointEmiCltsaccID ,;
DATETIME(),;
DATETIME(),;
1,;
1)
	llResult = TABLEUPDATE(1,.T.,[lvFrmEdit])
	lnFrmId = spGetLastIncrementedID('lvFrmEdit')
	lcntDoc = lcntDoc +1
ENDIF
INSERT INTO lvFrmPartFrmEdit ;
(FrmId,;
cntFrmID,;
cntFrmincludeSum,;
CntFrmIncludeSumVAT,;
cntfrmsumsplitprocid) ;
VALUES ;
(lnFrmId,;
TmpPay.cntFrmID,;
TmpPay.cntFrmincludeSum,;
TmpPay.FrmpartFrmSumVatRate ,;
1 )
	llResult = TABLEUPDATE(1,.T.,[lvFrmPartFrmEdit])
	SELECT TmpPay
ENDS

USE IN SELECT([lvFrmEdit])
USE IN SELECT([lvFrmPartFrmEdit])

USE IN TmpPay
WAIT WINDOW "Ñôîðìèðîâàíî äîêóìåíòîâ: "+ STR(lcntDoc ,5)
GO lnrecord IN PrimaryDocView
* ôîðìèðóåì ïëàòåæíûå äîêóìåíòû
* âîçâðàùàåì ðåçóëüòàò
RETURN .t.
ENDPROC
PROCEDURE _print1doc
this._prndoc()
ENDPROC
PROCEDURE _prndoc
*-------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: GRDDOCSVIEW._PRNDOC
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Ïå÷àòü äîêóìåíòà.
*-------------------------------------------------------

*21.05.2004 22:39 -&gt;Âûïîëíèì ìåòîä ìåíåäæåðà äëÿ ïå÷àòè òåêóùåãî äîêóìåíòà
oMgrPD.Operate([FORM],[PRNDOC],PrimaryDocView.FrmID)
*------------------------------------------------------------------------------

************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************

ENDPROC
PROCEDURE _prnrep
*21.05.2004 22:39 -&gt;Âûïîëíèì ìåòîä ìåíåäæåðà äëÿ ïå÷àòè îò÷¸òà
* oApp.ExecuteScrFormReportByID(ThisForm.nScrFrmID)
*------------------------------------------------------------------------------

*-------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: grdFormView._PrnRep
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Ïå÷àòü îò÷¸òà
*-------------------------------------------------------
*21.05.2004 22:39 -&gt;Âûïîëíèì ìåòîä ìåíåäæåðà äëÿ ïå÷àòè îò÷¸òà
PUBLIC tmpPrimDoc
tmpPrimDoc = DBF('PrimaryDocView')
oApp.ExecuteScrFormReportByID(ThisForm.nScrFrmID, [FrmID], PrimaryDocView.FrmID)
RELEASE tmpPrimDoc
*------------------------------------------------------------------------------

************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************
ENDPROC
PROCEDURE _readdatain
This._DeviceDriverFunc([READDATAIN])
ENDPROC
PROCEDURE _readdatainv
This._DeviceDriverFunc([READDATAINV])
ENDPROC
PROCEDURE _readdataout
This._DeviceDriverFunc([READDATAOUT])
ENDPROC
PROCEDURE _rsrequery
*-------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: GRDDOCSVIEW._RSREQUERY
* Called by.......:
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Ïåð÷èòûâàíèå Alias-à Grid-à
*-------------------------------------------------------
WITH This

*21.04.2004 14:37 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	lcUniqueName, ;
		lcUniqueFilePath
*------------------------------------------------------------------------------

*21.04.2004 14:33 -&gt;Ñîõðàíèì äàííûå î RecordSource
.SourceKeep()
*------------------------------------------------------------------------------

*21.04.2004 14:33 -&gt;Îòêëþ÷èì RecordSource
.SourceReset()
*------------------------------------------------------------------------------

*21.04.2004 14:34 -&gt;Çàêðîåì Alias è óäàëèì âðåìåííóþ òàáëèöó
lcUniqueFilePath = DBF([PrimaryDocView])
***
USE IN PrimaryDocView
***
IF FILE(lcUniqueFilePath)
	ERASE (lcUniqueFilePath)
ENDIF
*------------------------------------------------------------------------------

*21.04.2004 14:05 -&gt;Âûïîëíèì õðàíèìóþ ïðîöåäóðó äëÿ ïîëó÷åíèÿ ïóñòîé òàáëèöû
*lcUniqueName = spPrimaryDocView([BYFILTER],ThisForm.nScrFrmID,ThisForm.cntQueryParam.cQryParSID)
*------------------------------------------------------------------------------
*21.04.2008 14:05 -&gt;Âûïîëíèì õðàíèìóþ ïðîöåäóðó äëÿ ïîëó÷åíèÿ ïóñòîé òàáëèöû
lcUniqueName = spPrimaryDocView([BYFILTER],ThisForm.nScrFrmID,ThisForm.cQryParSID)
*------------------------------------------------------------------------------

*21.04.2004 14:08 -&gt;Òåïåðü îòêðîåì äàííûé Alias
USE (lcUniqueName) IN 0 ALIAS PrimaryDocView
CURSORSETPROP([BUFFERING],3,[PrimaryDocView])
*------------------------------------------------------------------------------

*21.04.2004 14:33 -&gt;Âîññòàíàâëèâàåì RecordSource
.SourceRecall()
*------------------------------------------------------------------------------
.sortclear()

ENDWITH
************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************

ENDPROC
PROCEDURE _rsrequeryone
*------------------------------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: grdFormView._RSRequeryOne
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;tnFrmID,tlNoRefreshRelatedObjects&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Ïåðå÷èòûâàíèå îäíîé çàïèñè
*------------------------------------------------------------------------------
LPARAMETERS tnFrmID,tlNoRefreshRelatedObjects

*22.12.2004 15:10 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	lcOldAlias, ;
		lcUniqueFileName, ;
		llOldRefreshRelatedObjectsOnRSRecNoChange
LOCAL ARRAY laReplaceArray[1]
***
lcOldAlias = ALIAS()
*------------------------------------------------------------------------------

*12.05.2004 03:27 -&gt;Âûïîëíÿåì çàïðîñ ñòðîêè
lcUniqueFileName = spPrimaryDocView([BYFRMID],ThisForm.nScrFrmID,tnFrmID)
*------------------------------------------------------------------------------

*22.12.2004 15:47 -&gt;Åñëè óêàçàí ôëàã "Íå îáíîâëÿòü ñâÿçàííûå îáúåêòû" - çàáëîêèðóåì îáíîâëåíèå
IF tlNoRefreshRelatedObjects
	llOldRefreshRelatedObjectsOnRSRecNoChange = This._RefreshRelatedObjectsOnRSRecNoChange
	This._RefreshRelatedObjectsOnRSRecNoChange = .F.
ENDIF
*------------------------------------------------------------------------------

*12.05.2004 03:35 -&gt;Îòêëþ÷àåì èñòî÷íèê äàííûõ
This.SourceKeep()
This.SourceReset()
*------------------------------------------------------------------------------

*22.12.2004 15:05 -&gt;Äîáàâëÿåì/îáíîâëÿåì/óäàëÿåì çàïèñü
USE (lcUniqueFileName) IN 0 ALIAS PrimaryDocViewReq
SELECT PrimaryDocViewReq
***
IF RECCOUNT([PrimaryDocViewReq]) == 1

	*22.12.2004 15:10 -&gt;Îáíîâëÿåì çàïèñü
	SCATTER TO laReplaceArray
	SELECT PrimaryDocView
	LOCATE FOR PrimaryDocView.FrmID = tnFrmID
	IF !FOUND()
		APPEND BLANK IN PrimaryDocView
	ENDIF
	GATHER FROM laReplaceArray
	TABLEUPDATE(.T.)
	*------------------------------------------------------------------------------
	
ELSE

	SELECT PrimaryDocView
	LOCATE FOR PrimaryDocView.FrmID = tnFrmID
	IF FOUND()
		*22.12.2004 15:11 -&gt;Óäàëÿåì çàïèñü
		DELETE IN PrimaryDocView
		TABLEUPDATE(.T.)
		*------------------------------------------------------------------------------
	ENDIF
	
ENDIF
*------------------------------------------------------------------------------

*12.05.2004 03:37 -&gt;Âîññòàíàâëèâàåì èñòî÷íèê äàííûõ
This.SourceRecall()
*------------------------------------------------------------------------------

*22.12.2004 15:09 -&gt;Óäàëÿåì ðåçóëüòàò çàïðîñà
USE IN PrimaryDocViewReq
ERASE ([tmp\]+lcUniqueFileName+[.dbf])
*------------------------------------------------------------------------------

*22.12.2004 15:35 -&gt;Âîññòàíîâèì òåêóùèé Alias
IF !EMPTY(lcOldAlias) AND USED(lcOldAlias) AND lcOldAlias#ALIAS()
	SELECT(lcOldAlias)
ENDIF
*------------------------------------------------------------------------------

*22.12.2004 15:47 -&gt;Åñëè óêàçàí ôëàã "Íå îáíîâëÿòü ñâÿçàííûå îáúåêòû" - ðàçáëîêèðóåì îáíîâëåíèå
IF tlNoRefreshRelatedObjects
	This._RefreshRelatedObjectsOnRSRecNoChange = llOldRefreshRelatedObjectsOnRSRecNoChange
ENDIF
*------------------------------------------------------------------------------

*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE DblClick
IF RECNO(this.RecordSource)&gt;RECCOUNT(this.RecordSource)
DODEFAULT()
ELSE
This.HandleMsg([EDIT])

ENDIF

ENDPROC
PROCEDURE handlekey
*-------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: BASE_V1.VCX
* Class.Module....: GRD.HANDLEKEY
* Called by.......:
* Parameters......: &lt;tnKeyCode, tnShiftAltCtrl&gt;
* Returns.........: &lt;none&gt;
* Notes...........: &lt;public/nouser/default&gt; Îáðàáîòêà íàæàòèÿ ïîëüçîâàòåëåì êëàâèøè.
*-------------------------------------------------------
LPARAMETERS	tnKeyCode, tnShiftAltCtrl

WITH This

*12.04.2004 11:24 -&gt;Îáðàáîòàåì ãîðÿ÷èå êëàâèøè
DO CASE
	CASE (tnKeyCode = 32 AND tnShiftAltCtrl = 2) 		&amp;&amp; Ctrl + Space
	
		*05.05.2004 16:47 -&gt;Ïîìåòèì/ñíèìåì ïîìåòêó ñ òåêóùåé çàïèñè
		This.HandleMsg([MARK])
		RETURN.T.
		*------------------------------------------------------------------------------
		
	OTHERWISE
		
		*04.05.2004 17:00 -&gt;Âûïîëíèì ìåòîä áàçîâîãî êëàññà äëÿ âñåõ äðóãèõ ñî÷åòàíèé êëàâèø	
		RETURN DODEFAULT(tnKeyCode,tnShiftAltCtrl)
		*------------------------------------------------------------------------------
		
ENDCASE
*------------------------------------------------------------------------------

ENDWITH
************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************
ENDPROC
PROCEDURE Init
*07.12.2004 14:31 -&gt;Âûïîëíèì ìåòîä ðîäèòåëüñêîãî êëàññà
DODEFAULT()
*------------------------------------------------------------------------------

*22.04.2004 16:30 -&gt;"Îáíóëèì" ìàññèâ ôóíêöèé
This.aCstFuncProp = .NULL.
*------------------------------------------------------------------------------
ENDPROC
PROCEDURE Refresh
LPARAMETERS	tuForceHandling,tuNoCallRefreshRunTimeProps
*SET COVERAGE TO D:\Develop\Work\Basis\test_refr.log ADDITIVE
**SET STEP ON
DODEFAULT(tuForceHandling,tuNoCallRefreshRunTimeProps)
*SET COVERAGE TO

ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1>Class</reserved1>
		<reserved2>21</reserved2>
		<reserved3>lcstfuncpropinitiated
^acstfuncprop[1,0] 
*_inherit Íàñëåäîâàíèå äîêóìåíòà
*_naklout Ôîðìèðîâàíèå íàêëàäíîé ïî ðåçóëüòàòàì ïðîäàæ
*_mark ïîìåòêà çàïèñè
*_paydocmake ôîðìèðîâàíèå ïëàòåæíîãî äîêóìåíòà
*_devicedriverfunc Âûïîëíåíèå ôóíêöèè äðàéâåðà
*_readdatain 
*_readdataout 
*_readdatainv 
*_frmact 
*_doctoxml âûãðóçêà äîêóìåíòà â XML
*_docfromxml çàãðóçêà äîêóìåíòà èç XML
*_print1doc Ïå÷àòü îäíîãî äîêóìåíòà áåç âûâîäà îêíà íàñòðîåê
</reserved3>
		<reserved4/>
		<reserved5/>
		<reserved6>Pixels</reserved6>
		<reserved7/>
		<reserved8>..\include\primarydoc_v1_grdformview.h</reserved8>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1EA0UUAUR</uniqueid>
		<timestamp>960912023</timestamp>
		<class>header</class>
		<classloc/>
		<baseclass>header</baseclass>
		<objname>Header1</objname>
		<parent>grdformview.Column1</parent>
		<properties>Caption = " "
Name = "Header1"
</properties>
		<protected/>
		<methods>PROCEDURE DblClick
This.Parent.Parent.Sort(This.Parent.Name)
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1EA0UUAUS</uniqueid>
		<timestamp>960912023</timestamp>
		<class>header</class>
		<classloc/>
		<baseclass>header</baseclass>
		<objname>Header1</objname>
		<parent>grdformview.Column2</parent>
		<properties>Caption = " "
Name = "Header1"
</properties>
		<protected/>
		<methods>PROCEDURE DblClick
This.Parent.Parent.Sort(This.Parent.Name)
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1EA0UUAV6</uniqueid>
		<timestamp>960912023</timestamp>
		<class>header</class>
		<classloc/>
		<baseclass>header</baseclass>
		<objname>Header1</objname>
		<parent>grdformview.Column3</parent>
		<properties>Alignment = 2
Caption = "Äîê."
Name = "Header1"
</properties>
		<protected/>
		<methods>PROCEDURE DblClick
This.Parent.Parent.Sort(This.Parent.Name)
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1EA0UUAV7</uniqueid>
		<timestamp>0</timestamp>
		<class>txtgrd</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>Text1</objname>
		<parent>grdformview.Column3</parent>
		<properties>BorderStyle = 0
Margin = 0
ReadOnly = .T.
ForeColor = 0,0,0
BackColor = 255,255,255
Name = "Text1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1EA0UUAV8</uniqueid>
		<timestamp>960912023</timestamp>
		<class>header</class>
		<classloc/>
		<baseclass>header</baseclass>
		<objname>Header1</objname>
		<parent>grdformview.Column4</parent>
		<properties>Alignment = 2
Caption = "Äàòà"
Name = "Header1"
</properties>
		<protected/>
		<methods>PROCEDURE DblClick
This.Parent.Parent.Sort(This.Parent.Name)
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1EA0UUAV9</uniqueid>
		<timestamp>0</timestamp>
		<class>txtgrd</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>Text1</objname>
		<parent>grdformview.Column4</parent>
		<properties>BorderStyle = 0
Margin = 0
ReadOnly = .T.
ForeColor = 0,0,0
BackColor = 255,255,255
Name = "Text1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1EA0UUAVA</uniqueid>
		<timestamp>960912023</timestamp>
		<class>header</class>
		<classloc/>
		<baseclass>header</baseclass>
		<objname>Header1</objname>
		<parent>grdformview.Column5</parent>
		<properties>Alignment = 2
Caption = "Íîìåð"
Name = "Header1"
</properties>
		<protected/>
		<methods>PROCEDURE DblClick
This.Parent.Parent.Sort(This.Parent.Name)
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1EA0UUAVB</uniqueid>
		<timestamp>0</timestamp>
		<class>txtgrd</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>Text1</objname>
		<parent>grdformview.Column5</parent>
		<properties>BorderStyle = 0
Margin = 0
ReadOnly = .T.
ForeColor = 0,0,0
BackColor = 255,255,255
Name = "Text1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1EA0UUAVC</uniqueid>
		<timestamp>960912023</timestamp>
		<class>header</class>
		<classloc/>
		<baseclass>header</baseclass>
		<objname>Header1</objname>
		<parent>grdformview.Column6</parent>
		<properties>Alignment = 2
Caption = "???"
Name = "Header1"
</properties>
		<protected/>
		<methods>PROCEDURE DblClick
This.Parent.Parent.Sort(This.Parent.Name)
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1EA0UUAVD</uniqueid>
		<timestamp>0</timestamp>
		<class>txtgrd</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>Text1</objname>
		<parent>grdformview.Column6</parent>
		<properties>BorderStyle = 0
Margin = 0
ReadOnly = .T.
ForeColor = 0,0,0
BackColor = 255,255,255
Name = "Text1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1EA0UUAVE</uniqueid>
		<timestamp>960912023</timestamp>
		<class>header</class>
		<classloc/>
		<baseclass>header</baseclass>
		<objname>Header1</objname>
		<parent>grdformview.Column7</parent>
		<properties>Alignment = 2
Caption = "???"
Name = "Header1"
</properties>
		<protected/>
		<methods>PROCEDURE DblClick
This.Parent.Parent.Sort(This.Parent.Name)
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1EA0UUAVF</uniqueid>
		<timestamp>0</timestamp>
		<class>txtgrd</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>Text1</objname>
		<parent>grdformview.Column7</parent>
		<properties>BorderStyle = 0
Margin = 0
ReadOnly = .T.
ForeColor = 0,0,0
BackColor = 255,255,255
Name = "Text1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1EA0UUAVG</uniqueid>
		<timestamp>960912023</timestamp>
		<class>header</class>
		<classloc/>
		<baseclass>header</baseclass>
		<objname>Header1</objname>
		<parent>grdformview.Column8</parent>
		<properties>Alignment = 2
Caption = "Ñóììà"
Name = "Header1"
</properties>
		<protected/>
		<methods>PROCEDURE DblClick
This.Parent.Parent.Sort(This.Parent.Name)
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1EA0UUAVH</uniqueid>
		<timestamp>0</timestamp>
		<class>txtgrd</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>Text1</objname>
		<parent>grdformview.Column8</parent>
		<properties>BorderStyle = 0
Margin = 0
ReadOnly = .T.
ForeColor = 0,0,0
BackColor = 255,255,255
Name = "Text1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1EA0UUAVI</uniqueid>
		<timestamp>960912023</timestamp>
		<class>header</class>
		<classloc/>
		<baseclass>header</baseclass>
		<objname>Header1</objname>
		<parent>grdformview.Column9</parent>
		<properties>Alignment = 2
Caption = "ÍÄÑ"
Name = "Header1"
</properties>
		<protected/>
		<methods>PROCEDURE DblClick
This.Parent.Parent.Sort(This.Parent.Name)
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1EA0UUAVL</uniqueid>
		<timestamp>0</timestamp>
		<class>txtgrd</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>Text1</objname>
		<parent>grdformview.Column9</parent>
		<properties>BorderStyle = 0
Margin = 0
ReadOnly = .T.
ForeColor = 0,0,0
BackColor = 255,255,255
Name = "Text1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1EA0UUAVM</uniqueid>
		<timestamp>960912023</timestamp>
		<class>header</class>
		<classloc/>
		<baseclass>header</baseclass>
		<objname>Header1</objname>
		<parent>grdformview.Column10</parent>
		<properties>Alignment = 2
Caption = "Ïðèìå÷àíèå"
Name = "Header1"
</properties>
		<protected/>
		<methods>PROCEDURE DblClick
This.Parent.Parent.Sort(This.Parent.Name)
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1EA0UUAVN</uniqueid>
		<timestamp>0</timestamp>
		<class>txtgrd</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>Text1</objname>
		<parent>grdformview.Column10</parent>
		<properties>BorderStyle = 0
ControlSource = "PrimaryDocView.FrmNote"
Margin = 0
ReadOnly = .T.
ForeColor = 0,0,0
BackColor = 255,255,255
Name = "Text1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2EH0W6A6G</uniqueid>
		<timestamp>953776149</timestamp>
		<class>header</class>
		<classloc/>
		<baseclass>header</baseclass>
		<objname>Header1</objname>
		<parent>grdformview.Column11</parent>
		<properties>Caption = "Îñíîâàíèå"
Name = "Header1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2EH0W6A6H</uniqueid>
		<timestamp>953776283</timestamp>
		<class>txtgrd</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>Text1</objname>
		<parent>grdformview.Column11</parent>
		<properties>BorderStyle = 0
ControlSource = "PrimaryDocView.FrmReason"
Margin = 0
ForeColor = 0,0,0
BackColor = 255,255,255
Name = "Text1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>COMMENT</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>0</timestamp>
		<class/>
		<classloc/>
		<baseclass/>
		<objname>grdformview</objname>
		<parent/>
		<properties>Arial, 0, 9, 5, 15, 12, 32, 3, 0
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1></reserved1>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18L1B4NYC</uniqueid>
		<timestamp>960912486</timestamp>
		<class>frmedit</class>
		<classloc>baseform_v1.vcx</classloc>
		<baseclass>form</baseclass>
		<objname>frmpdcopyas</objname>
		<parent/>
		<properties>Height = 63
Width = 434
DoCreate = .T.
Caption = "Ñêîïèðîâàòü äîêóìåíò â ..."
Icon = ..\graphic\frmprimarydocselect.ico
nfrmid = 0
crequestedoperation = 
lnrecord = 0
lcwhere =  
Name = "frmpdcopyas"
cstmsghandler.Name = "cstmsghandler"
cstresizable.Name = "cstresizable"
Img1.Name = "Img1"
cstdatawork.Name = "cstdatawork"
</properties>
		<protected/>
		<methods>PROCEDURE _handlecntcancelsaveevent
*-------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: FRMPRIMARYDOCTYPESELECT._HANDLECNTCANCELSAVEEVENT
* Called by.......: &lt;.cmdCancel.Click();.cmdOk.Click()&gt;
* Parameters......: &lt;tcMessage&gt;
* Returns.........: &lt;none&gt;
* Notes...........:
*-------------------------------------------------------
LPARAMETERS tcMessage

WITH This

*16.05.2004 22:19 -&gt;Îáðàáîòàåì äåéñòâèÿ ïîëüçîâàòåëÿ
IF tcMessage == [OK] AND !EMPTY(.cntIdCtlGridFrmType.Value)
	
	*20.05.2004 20:59 -&gt;Âûïîëíÿåì ïðîöåäóðó êîïèðîâàíèÿ
	DO CASE

		CASE This.cRequestedOperation == [TOPAY]
			this._payDocMake(.cntIdCtlGridFrmType.Value)
			
		CASE INLIST(lvFrmTypeList.CopyOperProcType,1,2) AND This.cRequestedOperation &lt;&gt; [TOPAY]	&amp;&amp;Procedure(Function) || Stored Procedure
			
			*20.05.2004 21:04 -&gt;Åñëè êîä âûáîðêè õðàíèòñÿ â SP áàçû äàííûõ
			IF lvFrmTypeList.CopyOperProcType = 2 AND [!]$lvFrmTypeList.CopyOperProcNM
				lcDataBaseName = ALLTRIM(SUBSTR(lvFrmTypeList.CopyOperProcNM,1,AT([!],lvFrmTypeList.CopyOperProcNM)-1))
				IF !DBUSED(lcDataBaseName)
					OPEN DATABASE (lcDataBaseName)
				ENDIF
				***
				SET DATABASE TO (lcDataBaseName)
				***
				lcProcedureNM = ALLTRIM(SUBSTR(lvFrmTypeList.CopyOperProcNM,AT([!],lvFrmTypeList.CopyOperProcNM)+1))
			ELSE
				lcProcedureNM = ALLTRIM(lvFrmTypeList.CopyOperProcNM)
			ENDIF
			*------------------------------------------------------------------------------

			*20.05.2004 21:53 -&gt;Âûïîëíÿåì âûáîðêó
			WAIT WINDOW [Âûïîëíÿåòñÿ êîïèðîâàíèå...] NOWAIT NOCLEAR
			SET MESSAGE TO [Âûïîëíÿåòñÿ êîïèðîâàíèå...]
			***
			.uRetVal = &amp;lcProcedureNM (.nFrmID,.cntIdCtlGridFrmType.Value, .cRequestedOperation)
			***
			WAIT CLEAR
			SET MESSAGE TO []
			*------------------------------------------------------------------------------
			
		CASE lvFrmTypeListCopyAsByFrm.CopyOperProcType = 3 AND This.cRequestedOperation &lt;&gt; [TOPAY]			&amp;&amp;MS SQL Server Stored Procedure
			
			*16.12.2004 16:59 -&gt;Íåäîñòóïíî
			ASSERT .F. MESSAGE [FRMPDCOPYAS._HANDLECNTCANCELSAVEEVENT: Not Avaible]
			.uRetVal = .F.
			*------------------------------------------------------------------------------
	ENDCASE
	*------------------------------------------------------------------------------
	
ELSE
	.uRetVal = .F.
ENDIF
***
.Hide()
*------------------------------------------------------------------------------

ENDWITH
************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************
ENDPROC
PROCEDURE _paydocmake
LPARAMETERS lFrmTypeID
LOCAL controlSumm,lnFrmId,lcntDoc,lcwhere
lcntDoc = 0
*îïðåäåëÿåì ñóììó äîêóìåíòà
*îïðåäåëÿåì íäñ äîêóìåíòà
*îïðåäåëÿåì êëèåíòà
*îïðåäåëÿåì êëèåíòà
*îïðåäåëÿåì îòäåë
*îïðåäåëÿåì îòäåë
*îïðåäåëÿåì òèï äîêóìåíòà
*îïðåäåëÿåì ñòàòóñ äîêóìåíòà
*îïðåäåëÿåì ðàññ÷åòíûé ñ÷åò
lcwhere = this.lcwhere

SELECT * FROM TMP\listadd ;
&amp;lcwhere ;
INTO CURSOR TmpPay
SET DATABASE TO BASIS
USE IN SELECT([lvFrmEdit])
USE lvFrmEdit IN 0 NODATA
USE IN SELECT([lvFrmPartFrmEdit])
USE lvFrmPartFrmEdit IN 0 NODATA
SELECT TmpPay
controllSumm = - 100
SCAN &amp;&amp;FOR .f.
IF !controllSumm = NVL(TmpPay.PIspOuID,0)+ NVL(TmpPay.PEmiOuID,0)+ NVL(TmpPay.PIspCltID,0)+ NVL(TmpPay.PEmiCltID,0)+ NVL(TmpPay.PIspSaccID,0)+ NVL(TmpPay.PEmiSaccID,0)
	controllSumm = NVL(TmpPay.PIspOuID,0)+ NVL(TmpPay.PEmiOuID,0)+ NVL(TmpPay.PIspCltID,0)+ NVL(TmpPay.PEmiCltID,0)+ NVL(TmpPay.PIspSaccID,0)+ NVL(TmpPay.PEmiSaccID,0)
INSERT INTO lvFrmEdit ;
(FrmTypeID,;
PointIspOuID,;
PointEmiOuID,;
PointIspCltID,;
PointEmiCltID,;
PointIspCltsaccID ,;
PointEmiCltsaccID ,;
FrmDate,;
FrmDateAcc,;
FrmStatusId,;
FrmCurTypeId) ;
VALUES ;
(lFrmTypeID,;
TmpPay.PIspOuID,;
TmpPay.PEmiOuID,;
TmpPay.PIspCltID,;
TmpPay.PEmiCltID,;
TmpPay.PIspSaccID ,;
TmpPay.PEmiSaccID ,;
DATETIME(),;
DATETIME(),;
1,;
1)
	llResult = TABLEUPDATE(1,.T.,[lvFrmEdit])
	lnFrmId = spGetLastIncrementedID('lvFrmEdit')
	lcntDoc = lcntDoc +1
ENDIF
INSERT INTO lvFrmPartFrmEdit ;
(FrmId,;
cntFrmID,;
cntFrmincludeSum,;
CntFrmIncludeSumVAT,;
cntfrmsumsplitprocid) ;
VALUES ;
(lnFrmId,;
TmpPay.cntFrmID,;
TmpPay.FrmIncSum ,;
TmpPay.PartSumVat ,;
1 )
	llResult = TABLEUPDATE(1,.T.,[lvFrmPartFrmEdit])
	SELECT TmpPay
ENDS

USE IN SELECT([lvFrmEdit])
USE IN SELECT([lvFrmPartFrmEdit])

USE IN TmpPay
MESSAGEBOX("Ñôîðìèðîâàíî äîêóìåíòîâ: "+ STR(lcntDoc ,5),0+64+4096,'Ïëàòåæíûå äîêóìåíòû ïîäãîòîâëåíû ...',900)
**WAIT WINDOW "Ñôîðìèðîâàíî äîêóìåíòîâ: "+ STR(lcntDoc ,5) NOWAIT TIMEOUT 3
* ôîðìèðóåì ïëàòåæíûå äîêóìåíòû
* âîçâðàùàåì ðåçóëüòàò
RETURN .t.
ENDPROC
PROCEDURE Init
*-------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: frmPDCopyAs.Init
* Called by.......: &lt;Sys Event&gt;
* Parameters......: &lt;tcRequestedOperation, tnFrmID&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Èíèöèàëèçàöèÿ
*-------------------------------------------------------
LPARAMETERS tcRequestedOperation, tnFrmID
*16.05.2004 22:12 -&gt; Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	_PARAM
*------------------------------------------------------------------------------

*16.12.2004 16:57 -&gt; Ñîõðàíèì èäåíòèôèêàòîð èñõîäíîãî äîêóìåíòà è òèï çàïðàøèâàåìîé îïåðàöèè â ñâîéñòâàõ îáúåêòà
This.nFrmID = tnFrmID
This.cRequestedOperation = tcRequestedOperation
*------------------------------------------------------------------------------

*16.05.2004 22:12 -&gt; Ïåðå÷èòàåì ñïèñîê äîêóìåíòîâ â çàâèñèìîñòè îò òèïà çàïðîøåííîé îïåðàöèè
_PARAM = tnFrmID
***
DO CASE

	CASE This.cRequestedOperation == [COPY]

		*15.12.2004 18:12 -&gt; Ïðîâåðèì âîçìîæíîñòü êîïèðîâàíèÿ
		USE IN IIF(USED([lvFrmTypeList]),[lvFrmTypeList],0)
		***
		_PARAM = tnFrmID
		USE Basis!lvFrmTypeListCopyAsByFrm IN 0 ALIAS lvFrmTypeList
		***
		IF RECCOUNT([lvFrmTypeList]) = 0
			=MESSAGEBOX([Îïåðàöèÿ êîïèðîâàíèÿ íåäîñòóïíà äëÿ äàííîãî òèïà äîêóìåíòà],16,[Íå âûïîëíåíî])
			RETURN .F.
		ENDIF
		*------------------------------------------------------------------------------
	
	CASE This.cRequestedOperation == [INHERIT]

		*15.12.2004 18:12 -&gt; Ïðîâåðèì âîçìîæíîñòü íàñëåäîâàíèÿ
		USE IN IIF(USED([lvFrmTypeList]),[lvFrmTypeList],0)
		***
		_PARAM = tnFrmID
		USE Basis!lvFrmTypeListInheritByFrm IN 0 ALIAS lvFrmTypeList
		***
		IF RECCOUNT([lvFrmTypeList]) = 0
			=MESSAGEBOX([Îïåðàöèÿ íåäîñòóïíà äëÿ äàííîãî òèïà äîêóìåíòà],16,[Íå âûïîëíåíî])
			RETURN .F.
		ENDIF
		*------------------------------------------------------------------------------

	CASE This.cRequestedOperation == [TOPAY]
		thisform.Caption='Îïëàòèòü äîêóìåíò ñëåäóþùèì ñïîñîáîì ...'
		WAIT WINDOW "ôîðìèðóåì ïëàòåæíûå äîêóìåíòû" NOWAIT
		* îïðåäåëÿåì: ðàáîòàåì ñ òåêóùèì èëè ñ ïîìå÷åíûìè
		USE TMP\listadd IN 0
		IF !(RECCOUNT('listadd')=1 AND listadd.cntFrmID = THIS.nFrmID) AND MESSAGEBOX('Ðàáîòàåì ñ òåêóùåé çàïèñüþ (äà) èëè ñ îòìå÷åíûìè (íåò)?',4+32+256)=7
		    this.lcwhere = ' '
		  ELSE
		    this.lcwhere = ' WHERE listadd.cntFrmID = THIS.nFrmID '
		ENDIF

		*15.12.2008 18:12 -&gt; Ïðîâåðèì âîçìîæíîñòü îïëàòû
		USE IN IIF(USED([lvFrmTypeList]),[lvFrmTypeList],0)
		***
		_PARAM = tnFrmID
		USE Basis!lvFrmTypeListPayByFrm IN 0 ALIAS lvFrmTypeList
		***
		IF RECCOUNT([lvFrmTypeList]) = 0
			=MESSAGEBOX([Îïåðàöèÿ íåäîñòóïíà äëÿ äàííîãî òèïà äîêóìåíòà],16,[Íå âûïîëíåíî])
			RETURN .F.
		ENDIF
		*------------------------------------------------------------------------------

ENDCASE
*------------------------------------------------------------------------------

*16.05.2004 22:13 -&gt; Óñòàíîâèì òèï ïî óìîë÷àíèþ (äëÿ îáû÷íîãî êîïèðîâàíèÿ)
SELECT lvFrmTypeList
***
ThisForm.cntIdCtlGridFrmType.SetValue(lvFrmTypeList.FrmTypeID)
*------------------------------------------------------------------------------

*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1>Class</reserved1>
		<reserved2>3</reserved2>
		<reserved3>nfrmid &lt;protected/runtime&gt; Èäåíòèôèêàòîð èñõîäíîãî äîêóìåíòà
crequestedoperation
lnrecord íîìåð çàïèñè, ñ êîòîðîé íà÷àëè ðàáîòàòü
lcwhere Çíà÷åíèå ôèëüòðà äëÿ îòáîðà çàïèñåé
*_paydocmake ôîðìèðîâàíèå ïëàòåæíîãî äîêóìåíòà
</reserved3>
		<reserved4/>
		<reserved5/>
		<reserved6>Pixels</reserved6>
		<reserved7>Âûáîð äîêóìåíòà, â êîòîðûé êîïèðîâàòü</reserved7>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18L1BE4FO</uniqueid>
		<timestamp>960912486</timestamp>
		<class>cntcancelsavehandled</class>
		<classloc>baseform_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>Cntcancelsavehandled1</objname>
		<parent>frmpdcopyas</parent>
		<properties>Top = 33
Left = 114
Name = "Cntcancelsavehandled1"
cmdCancel.Name = "cmdCancel"
cmdOk.Name = "cmdOk"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18L1BJ9IB</uniqueid>
		<timestamp>960912486</timestamp>
		<class>cntidctlgrid</class>
		<classloc>comidctl_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>cntIdCtlGridFrmType</objname>
		<parent>frmpdcopyas</parent>
		<properties>Top = 5
Left = 5
Width = 423
Height = 24
_rsaliasname = lvFrmTypeList
_rsfieldnameid = FrmTypeID
_rsfieldnametext = FrmTypeNM 
Name = "cntIdCtlGridFrmType"
txtText.Height = 23
txtText.Left = 0
txtText.Top = 0
txtText.Width = 376
txtText.Name = "txtText"
cmdShow.Top = 0
cmdShow.Left = 378
cmdShow.Name = "cmdShow"
cmdClear.Top = 0
cmdClear.Left = 401
cmdClear.Visible = .F.
cmdClear.Name = "cmdClear"
CmdTree.Name = "CmdTree"
Olecommprox1.Top = 0
Olecommprox1.Left = 36
Olecommprox1.Height = 16
Olecommprox1.Width = 38
Olecommprox1.Name = "Olecommprox1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>COMMENT</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>0</timestamp>
		<class/>
		<classloc/>
		<baseclass/>
		<objname>frmpdcopyas</objname>
		<parent/>
		<properties>Arial, 0, 9, 5, 15, 12, 32, 3, 0
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18A02DMUV</uniqueid>
		<timestamp>961303728</timestamp>
		<class>grd</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>grid</baseclass>
		<objname>grdpartres</objname>
		<parent/>
		<properties>ColumnCount = 10
Height = 215
RecordSource = "FrmPartResView"
SplitBar = .T.
Width = 510
HighlightStyle = 2
AllowCellSelection = .F.
nfrmid = 0
_handledstandartmsglist = FIRST;PREV;NEXT;LAST;;ADD;EDIT;INFO;DELE
_handledstandartmsgpromptlist = ;;;;;Äîáàâèòü;Ðåäàêòèðîâàòü;Ïðîñìîòð;Óäàëèòü
_handledcustommsglist = TVRACC
_handledcustommsgpromptlist = Äâèæåíèå òîâàðà
Name = "grdpartres"
Column1.ControlSource = "FrmPartResView.ResNM"
Column1.Name = "Column1"
Column2.ColumnOrder = 3
Column2.ControlSource = "FrmPartResView.TvrQnt"
Column2.Name = "Column2"
Column3.ColumnOrder = 4
Column3.ControlSource = "FrmPartResView.MsuShortNM"
Column3.Name = "Column3"
Column4.ColumnOrder = 10
Column4.ControlSource = "FrmPartResView.TvrPrcBuy"
Column4.Name = "Column4"
Column5.ColumnOrder = 5
Column5.ControlSource = "FrmPartResView.TvrPrcSale"
Column5.Name = "Column5"
Column6.ColumnOrder = 9
Column6.ControlSource = "FrmPartResView.TvrSumBuy"
Column6.Name = "Column6"
Column7.ColumnOrder = 6
Column7.ControlSource = "FrmPartResView.TvrSumSale"
Column7.Name = "Column7"
Column8.ColumnOrder = 2
Column8.ControlSource = "FrmPartResView.TvrNM"
Column8.Name = "Column8"
Column9.ColumnOrder = 7
Column9.ControlSource = "FrmPartResView.UseStart"
Column9.Name = "Column9"
Column10.ColumnOrder = 8
Column10.ControlSource = "FrmPartResView.UseEnd"
Column10.Name = "Column10"
</properties>
		<protected/>
		<methods>PROCEDURE _add
*-------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: grdPartTvr._Add
* Called by.......: &lt;ToolBar or Context Menu Action -&gt; .HandleMsg() -&gt; .Add()&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Äîáàâëåíèå ñîäåðæàíèÿ òîâàðíîãî äîêóìåíòà
*-------------------------------------------------------

*15.07.2004 02:57 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	luResultAdding
*------------------------------------------------------------------------------

*15.07.2004 02:57 -&gt;Âûïîëíÿåì îïåðàöèþ äîáàâëåíèÿ
luResultAdding = oMgrPD.Operate([PARTTVRRES],[ADD],This.nFrmID)
*------------------------------------------------------------------------------

*24.09.2004 16:17 -&gt;Åñëè çàïèñü äîáàâëåíà
IF TYPE([luResultAdding])==[N] AND !EMPTY(luResultAdding)

	*24.09.2004 16:15 -&gt;Ïåðå÷èòûâàåì Alias äëÿ ïðîñìîòðà
	This._RSRequeryOne(luResultAdding)
	*------------------------------------------------------------------------------
	
ENDIF
*------------------------------------------------------------------------------

****************************************************************************************************************
***********************************************  END OF METHOD *************************************************
****************************************************************************************************************
ENDPROC
PROCEDURE _dele
*-------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: grdPartFrm._Dele
* Called by.......: &lt;ToolBar or Context Menu Action -&gt; .HandleMsg() -&gt; .Dele()&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Óäàëåíèå ñîäåðæàíèÿ òîâàðíîãî äîêóìåíòà
*-------------------------------------------------------

*15.07.2004 02:57 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	lnFrmPartTvrID, ;
		luDeleRes
***
lnFrmPartTvrID = FrmPartResView.FrmPartTvr
*------------------------------------------------------------------------------

*15.07.2004 02:57 -&gt;Âûïîëíÿåì îïåðàöèþ óäàëåíèÿ
luDeleRes = oMgrPD.Operate([PARTTVRRES],[DELE],lnFrmPartTvrID)
*------------------------------------------------------------------------------

*24.09.2004 16:17 -&gt;Åñëè çàïèñü óäàëåíà
IF TYPE([luDeleRes])==[L] AND luDeleRes

	*24.09.2004 16:15 -&gt;Ïåðå÷èòûâàåì Alias äëÿ ïðîñìîòðà
	This._RSRequeryOne(lnFrmPartTvrID)
	*------------------------------------------------------------------------------

ENDIF
*------------------------------------------------------------------------------

****************************************************************************************************************
***********************************************  END OF METHOD *************************************************
****************************************************************************************************************
ENDPROC
PROCEDURE _edit
*-------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: grdPartTvr._Edit
* Called by.......: &lt;ToolBar or Context Menu Action -&gt; .HandleMsg() -&gt; .Edit()&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Ðåäàêòèðîâàíèå ñîäåðæàíèÿ òîâàðíîãî äîêóìåíòà
*-------------------------------------------------------

*19.10.2004 13:44 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	lnFrmPartTvrID, ;
		luEditRes
***
lnFrmPartTvrID = FrmPartResView.FrmPartTvr
*------------------------------------------------------------------------------

*15.07.2004 02:57 -&gt;Âûïîëíÿåì îïåðàöèþ ðåàäêòèðîâàíèÿ
luEditRes = oMgrPD.Operate([PARTTVRRES],[EDIT],lnFrmPartTvrID)
*------------------------------------------------------------------------------

*19.10.2004 13:45 -&gt;Åñëè çàïèñü îòðåäàêòèðîâàëè
IF TYPE([luEditRes])==[L] AND luEditRes

	*24.09.2004 16:15 -&gt;Ïåðå÷èòûâàåì Alias äëÿ ïðîñìîòðà
	This._RSRequeryOne(lnFrmPartTvrID)
	*------------------------------------------------------------------------------
	
ENDIF
*------------------------------------------------------------------------------

****************************************************************************************************************
***********************************************  END OF METHOD *************************************************
****************************************************************************************************************
ENDPROC
PROCEDURE _gethandledstandartmsglist
*------------------------------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: grdPartTvr._GetHandledStandartMsgList
* Called by.......: &lt;.RefreshHandledStandartMsgList();.RightClick()&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;lcHandledStandartMsgList&gt;
* Notes...........: Çàïðåòèì âñå ñòàíäàðòíûå îïåðàöèè, åñëè òåêóùèé äîêóìåíò íå îïðåäåëåí
*------------------------------------------------------------------------------

*15.09.2005 15:23 -&gt; Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	lnFrmID, ;
		lcResult
***
lnFrmID = This.nFrmID
*------------------------------------------------------------------------------

*15.09.2005 15:24 -&gt; Îïðåäåëèì ðàçðåø¸ííûå îïåðàöèè
IF lnFrmID = 0

	lcResult = []

ELSE
	
	*15.09.2005 15:27 -&gt; Ïîëó÷èì èíôîðìàöèþ î ñòàòóñå äîêóìåíòà
	LOCAL _PARAM
	_PARAM = lnFrmID
	***
	USE IN IIF(USED([lvFrmStatusInfoByFrmID]),[lvFrmStatusInfoByFrmID],0)
	USE lvFrmStatusInfoByFrmID IN 0
	*------------------------------------------------------------------------------

	*------------------------------------------------------------------------------
	*15.09.2005 15:28 -&gt; Ïðîâåðèì ó÷àñòâóåò ëè äîêóìåíò â ó÷åòå
	IF	!lvFrmStatusInfoByFrmID.FrmStatIsInvAcc AND ;
		!lvFrmStatusInfoByFrmID.FrmStatIsCostAcc

		*27.03.2006 10:50 -&gt; Ðàçðåøèì âñå îïåðàöèè
		lcResult = DODEFAULT()
		*------------------------------------------------------------------------------

	ELSE

		*27.03.2006 10:54 -&gt; Èñêëþ÷èì óäàëåíèå/äîáàâëåíèå/ðåäàêòèðîâàíèå èç ñïèñêà âîçìîæíûõ îïåðàöèé
		lcResult = [;] + DODEFAULT() + [;]
		lcResult = STRTRAN(lcResult,[;ADD;],[;])
		lcResult = STRTRAN(lcResult,[;DELE;],[;])
		lcResult = STRTRAN(lcResult,[;EDIT;],[;])
		*------------------------------------------------------------------------------

		*27.03.2006 10:58 -&gt; Óäàëÿåì ñëåâà è ñïðàâà ; äîáàâëåííûå ðàíåå
		IF !(lcResult == [;])
			lcResult = SUBSTR(lcResult,2,LEN(lcResult)-2)
		ELSE
			lcResult = []
		ENDIF	
		*------------------------------------------------------------------------------

	ENDIF
	*------------------------------------------------------------------------------

ENDIF
*------------------------------------------------------------------------------

*15.09.2005 15:23 -&gt; Âîçâðàùàåì ðåçóëüòàò
RETURN lcResult
*------------------------------------------------------------------------------

*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE _handlecustommsg
LPARAMETERS	tcMessage

DO CASE

	*19.09.2005 12:20 -&gt;Âûçîâ êàðòî÷êè êîëè÷åñòâåííî-ñòîèìîñòíîãî ó÷åòà
	CASE tcMessage=[TVRACC]


		*19.09.2005 12:23 -&gt;Âûïîëíèì îïåðàöèþ
		oMgrTovar.Do([TVR],[TVRACC],FrmPartResView.TvrId)
		*------------------------------------------------------------------------------

ENDCASE		

*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE _info
*-------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: GRDPARTTVR._INFO
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Ïðîñìîòð èíôîðìàöèè î òîâàðíîé ñòðîêå
*-------------------------------------------------------

*19.05.2004 22:37 -&gt;Âûïîëíèì ñîîòâåòñòâóþùóþ îïåðàöèþ ìåíåäæåðà
oMgrPD.Operate([PARTTVRRES],[INFO],FrmPartResView.FrmPartTvr)
*------------------------------------------------------------------------------

************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************
ENDPROC
PROCEDURE _rsrequery
*-------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: grdPartTvr._RSRequery
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;tnFrmID&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Ïåðå÷èòûâàíèå ñîäåðæèìîãî äîêóìåíòà
*-------------------------------------------------------
LPARAMETERS	tnFrmID

*21.04.2004 14:37 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	lcUniqueName, ;
		lcUniqueFilePath
*------------------------------------------------------------------------------

WITH THIS

*21.04.2004 14:33 -&gt;Ñîõðàíèì äàííûå î RecordSource
.SourceKeep()
*------------------------------------------------------------------------------

*21.04.2004 14:33 -&gt;Îòêëþ÷èì RecordSource
.SourceReset()
*------------------------------------------------------------------------------

*21.04.2004 14:34 -&gt;Çàêðîåì Alias è óäàëèì âðåìåííóþ òàáëèöó
lcUniqueFilePath = DBF([FrmPartResView])
***
USE IN FrmPartResView
***
IF FILE(lcUniqueFilePath)
	ERASE (lcUniqueFilePath)
ENDIF
*------------------------------------------------------------------------------

*05.05.2004 01:35 -&gt;Ïåðå÷èòàåì Alias
IF TYPE([tnFrmID])==[N] AND !EMPTY(tnFrmID)
	
	*02.12.2004 16:48 -&gt;Ñîõðàíèì èäåíòèôèêàòîð äîêóìåíòà â ñâîéñòâå Grid-à
	.nFrmID = tnFrmID
	*------------------------------------------------------------------------------

	*21.04.2004 14:05 -&gt;Âûïîëíèì õðàíèìóþ ïðîöåäóðó äëÿ ïîëó÷åíèÿ äàííûõ
	lcUniqueName = spFrmPartTvrJrnView([BYFRMID],tnFrmID)
	*------------------------------------------------------------------------------

ELSE
	
	*02.12.2004 16:48 -&gt;Ñîõðàíèì èäåíòèôèêàòîð äîêóìåíòà â ñâîéñòâå Grid-à
	.nFrmID = 0
	*------------------------------------------------------------------------------

	*21.04.2004 14:05 -&gt;Âûïîëíèì õðàíèìóþ ïðîöåäóðó äëÿ ïîëó÷åíèÿ òàáëèöû
	lcUniqueName = spFrmPartTvrJrnView([NODATA])
	*------------------------------------------------------------------------------
	
ENDIF	
*------------------------------------------------------------------------------

*21.04.2004 14:08 -&gt;Òåïåðü îòêðîåì äàííûé Alias
USE (lcUniqueName) IN 0 ALIAS FrmPartResView
CURSORSETPROP([BUFFERING],3,[FrmPartResView])
*------------------------------------------------------------------------------
*05.05.2004 01:36 -&gt;Âîññòàíàâëèâàåì Alias
.SourceRecall()
*------------------------------------------------------------------------------

ENDWITH
************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************
ENDPROC
PROCEDURE _rsrequeryone
*------------------------------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: grdPartTvr._RSRequeryOne
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;tnFrmPartTvrID&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Ïåðå÷èòûâàíèå îäíîé çàïèñè (òîâàðíîé ïîçèöèè äîêóìåíòà)
*------------------------------------------------------------------------------
LPARAMETERS tnFrmPartTvrID

*22.12.2004 15:10 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	lcOldAlias, ;
		lcUniqueFileName, ;
		laReplaceArray[1]
***
lcOldAlias = ALIAS()
*------------------------------------------------------------------------------

*12.05.2004 03:27 -&gt;Âûïîëíÿåì çàïðîñ ñòðîêè
lcUniqueFileName = spFrmPartTvrJrnView([BYFRMPARTTVRID],This.nFrmID,tnFrmPartTvrID)
*------------------------------------------------------------------------------

*12.05.2004 03:35 -&gt;Îòêëþ÷àåì èñòî÷íèê äàííûõ
This.SourceKeep()
This.SourceReset()
*------------------------------------------------------------------------------

*22.12.2004 15:05 -&gt;Äîáàâëÿåì/îáíîâëÿåì/óäàëÿåì çàïèñü
USE (lcUniqueFileName) IN 0 ALIAS FrmPartTvrViewReq
SELECT FrmPartTvrViewReq
***
IF RECCOUNT([FrmPartTvrViewReq]) == 1
	*22.12.2004 15:10 -&gt;Îáíîâëÿåì çàïèñü
	SCATTER TO laReplaceArray
	SELECT FrmPartResView
	LOCATE FOR FrmPartResView.FrmPartTvr = tnFrmPartTvrID
	IF !FOUND()
		APPEND BLANK IN FrmPartResView
	ENDIF
	GATHER FROM laReplaceArray
	TABLEUPDATE(.T.)
	*------------------------------------------------------------------------------
ELSE
	SELECT FrmPartResView
	LOCATE FOR FrmPartResView.FrmPartTvr = tnFrmPartTvrID
	IF FOUND()
		*22.12.2004 15:11 -&gt;Óäàëÿåì çàïèñü
		DELETE IN FrmPartResView
		TABLEUPDATE(.T.)
		LOCATE REST
		*------------------------------------------------------------------------------
	ENDIF
ENDIF
*------------------------------------------------------------------------------

*12.05.2004 03:37 -&gt;Âîññòàíàâëèâàåì èñòî÷íèê äàííûõ
This.SourceRecall()
*------------------------------------------------------------------------------

*22.12.2004 15:09 -&gt;Óäàëÿåì ðåçóëüòàò çàïðîñà
USE IN FrmPartTvrViewReq
ERASE ([tmp\]+lcUniqueFileName+[.dbf])
*------------------------------------------------------------------------------

*22.12.2004 15:35 -&gt;Âîññòàíîâèì òåêóùèé Alias
IF !EMPTY(lcOldAlias) AND USED(lcOldAlias) AND lcOldAlias#ALIAS()
	SELECT(lcOldAlias)
ENDIF
*------------------------------------------------------------------------------

*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE Init
DODEFAULT()
This.SetAll([DynamicBackColor],[IIF(ISNULL(FrmPartResView.UseEnd),RGB(116,181,245),RGB(255,255,255))],[COLUMN])
*This.Column4.DynamicBackColor = [IIF(FrmPartTvrView.TvrPrcBuy = 0,RGB(116,181,245),RGB(255,255,255))]
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1>Class</reserved1>
		<reserved2>21</reserved2>
		<reserved3>nfrmid &lt;public/runtime&gt; Èäåíòèôèêàòîð äîêóìåíòà, äëÿ êîòîðîãî îòîáðàæàþòñÿ òîâàðíûå ñòðîêè.
</reserved3>
		<reserved4/>
		<reserved5/>
		<reserved6>Pixels</reserved6>
		<reserved7>òàáëè÷êà äëÿ îòîáðàæåíèÿ èñïîëüçîâàíèÿ ðåñóðñîâ</reserved7>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18A02PAKD</uniqueid>
		<timestamp>926772534</timestamp>
		<class>header</class>
		<classloc/>
		<baseclass>header</baseclass>
		<objname>Header1</objname>
		<parent>grdpartres.Column1</parent>
		<properties>Alignment = 2
Caption = "Îáîðóäîâàíèå"
Name = "Header1"
</properties>
		<protected/>
		<methods>PROCEDURE DblClick
This.Parent.Parent.Sort(This.Parent.Name)
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18A02PAKE</uniqueid>
		<timestamp>926769465</timestamp>
		<class>txtgrd</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>Text1</objname>
		<parent>grdpartres.Column1</parent>
		<properties>BorderStyle = 0
ControlSource = "FrmPartResView.ResNM"
Margin = 0
ForeColor = 0,0,0
BackColor = 255,255,255
Name = "Text1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18A02PAKF</uniqueid>
		<timestamp>0</timestamp>
		<class>header</class>
		<classloc/>
		<baseclass>header</baseclass>
		<objname>Header1</objname>
		<parent>grdpartres.Column2</parent>
		<properties>Alignment = 2
Caption = "Êîë-âî"
Name = "Header1"
</properties>
		<protected/>
		<methods>PROCEDURE DblClick
This.Parent.Parent.Sort(This.Parent.Name)
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18A02PAKN</uniqueid>
		<timestamp>926769465</timestamp>
		<class>txtgrd</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>Text1</objname>
		<parent>grdpartres.Column2</parent>
		<properties>BorderStyle = 0
ControlSource = "FrmPartResView.TvrQnt"
Margin = 0
ForeColor = 0,0,0
BackColor = 255,255,255
Name = "Text1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18A02PAKO</uniqueid>
		<timestamp>0</timestamp>
		<class>header</class>
		<classloc/>
		<baseclass>header</baseclass>
		<objname>Header1</objname>
		<parent>grdpartres.Column3</parent>
		<properties>Alignment = 2
Caption = "Åä. èçì."
Name = "Header1"
</properties>
		<protected/>
		<methods>PROCEDURE DblClick
This.Parent.Parent.Sort(This.Parent.Name)
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18A02PAKP</uniqueid>
		<timestamp>926769465</timestamp>
		<class>txtgrd</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>Text1</objname>
		<parent>grdpartres.Column3</parent>
		<properties>BorderStyle = 0
ControlSource = "FrmPartResView.MsuShortNM"
Margin = 0
ForeColor = 0,0,0
Name = "Text1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18A02PAKX</uniqueid>
		<timestamp>0</timestamp>
		<class>header</class>
		<classloc/>
		<baseclass>header</baseclass>
		<objname>Header1</objname>
		<parent>grdpartres.Column4</parent>
		<properties>Alignment = 2
Caption = "Ö. ïîñò."
Name = "Header1"
</properties>
		<protected/>
		<methods>PROCEDURE DblClick
This.Parent.Parent.Sort(This.Parent.Name)
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18A02PAKY</uniqueid>
		<timestamp>926769465</timestamp>
		<class>txtgrd</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>Text1</objname>
		<parent>grdpartres.Column4</parent>
		<properties>BorderStyle = 0
ControlSource = "FrmPartResView.TvrPrcBuy"
Margin = 0
ForeColor = 0,0,0
BackColor = (iif(this.value=0,'255,0,0,255','255,255'))
Name = "Text1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18A02PAKZ</uniqueid>
		<timestamp>0</timestamp>
		<class>header</class>
		<classloc/>
		<baseclass>header</baseclass>
		<objname>Header1</objname>
		<parent>grdpartres.Column5</parent>
		<properties>Alignment = 2
Caption = "Ö. ïðîä."
Name = "Header1"
</properties>
		<protected/>
		<methods>PROCEDURE DblClick
This.Parent.Parent.Sort(This.Parent.Name)
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18A02PAL0</uniqueid>
		<timestamp>926769465</timestamp>
		<class>txtgrd</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>Text1</objname>
		<parent>grdpartres.Column5</parent>
		<properties>BorderStyle = 0
ControlSource = "FrmPartResView.TvrPrcSale"
Margin = 0
ForeColor = 0,0,0
BackColor = 255,255,255
Name = "Text1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18A02PAL1</uniqueid>
		<timestamp>0</timestamp>
		<class>header</class>
		<classloc/>
		<baseclass>header</baseclass>
		<objname>Header1</objname>
		<parent>grdpartres.Column6</parent>
		<properties>Alignment = 2
Caption = "Ñóììà ïîñò."
Name = "Header1"
</properties>
		<protected/>
		<methods>PROCEDURE DblClick
This.Parent.Parent.Sort(This.Parent.Name)
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18A02PAL2</uniqueid>
		<timestamp>926769465</timestamp>
		<class>txtgrd</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>Text1</objname>
		<parent>grdpartres.Column6</parent>
		<properties>BorderStyle = 0
ControlSource = "FrmPartResView.TvrSumBuy"
Margin = 0
ForeColor = 0,0,0
BackColor = 255,255,255
Name = "Text1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18A02PAL7</uniqueid>
		<timestamp>0</timestamp>
		<class>header</class>
		<classloc/>
		<baseclass>header</baseclass>
		<objname>Header1</objname>
		<parent>grdpartres.Column7</parent>
		<properties>Alignment = 2
Caption = "Ñóììà ïðîä."
Name = "Header1"
</properties>
		<protected/>
		<methods>PROCEDURE DblClick
This.Parent.Parent.Sort(This.Parent.Name)
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18A02PAL8</uniqueid>
		<timestamp>926769465</timestamp>
		<class>txtgrd</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>Text1</objname>
		<parent>grdpartres.Column7</parent>
		<properties>BorderStyle = 0
ControlSource = "FrmPartResView.TvrSumSale"
Margin = 0
ForeColor = 0,0,0
BackColor = 255,255,255
Name = "Text1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_25J0Q9QH6</uniqueid>
		<timestamp>926772534</timestamp>
		<class>header</class>
		<classloc/>
		<baseclass>header</baseclass>
		<objname>Header1</objname>
		<parent>grdpartres.Column8</parent>
		<properties>Alignment = 2
Caption = "Óñëóãà"
Name = "Header1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_25J0Q9QH7</uniqueid>
		<timestamp>926769465</timestamp>
		<class>txtgrd</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>Text1</objname>
		<parent>grdpartres.Column8</parent>
		<properties>BorderStyle = 0
ControlSource = "FrmPartResView.TvrNM"
Margin = 0
ForeColor = 0,0,0
BackColor = 255,255,255
Name = "Text1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_25J0Q9QH8</uniqueid>
		<timestamp>923427309</timestamp>
		<class>header</class>
		<classloc/>
		<baseclass>header</baseclass>
		<objname>Header1</objname>
		<parent>grdpartres.Column9</parent>
		<properties>Caption = "Íà÷àëî èñï"
Name = "Header1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_25J0Q9QH9</uniqueid>
		<timestamp>926769465</timestamp>
		<class>txtgrd</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>Text1</objname>
		<parent>grdpartres.Column9</parent>
		<properties>BorderStyle = 0
ControlSource = "FrmPartResView.UseStart"
Margin = 0
ForeColor = 0,0,0
BackColor = 255,255,255
Name = "Text1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_25J0Q9QHA</uniqueid>
		<timestamp>923427309</timestamp>
		<class>header</class>
		<classloc/>
		<baseclass>header</baseclass>
		<objname>Header1</objname>
		<parent>grdpartres.Column10</parent>
		<properties>Caption = "Îêîí÷àíèå"
Name = "Header1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_25J0Q9QHB</uniqueid>
		<timestamp>926769465</timestamp>
		<class>txtgrd</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>Text1</objname>
		<parent>grdpartres.Column10</parent>
		<properties>BorderStyle = 0
ControlSource = "FrmPartResView.UseEnd"
Margin = 0
ForeColor = 0,0,0
BackColor = 255,255,255
Name = "Text1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>COMMENT</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>0</timestamp>
		<class/>
		<classloc/>
		<baseclass/>
		<objname>grdpartres</objname>
		<parent/>
		<properties>Arial, 0, 9, 5, 15, 12, 32, 3, 0
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18A02DMUV</uniqueid>
		<timestamp>961303734</timestamp>
		<class>grd</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>grid</baseclass>
		<objname>grdparttvrz</objname>
		<parent/>
		<properties>ColumnCount = 7
Height = 215
RecordSource = "FrmPartTvrView"
Width = 793
Partition = 0
HighlightStyle = 2
nfrmid = 0
_handledstandartmsglist = FIRST;PREV;NEXT;LAST;;ADD;EDIT;INFO;DELE
_handledstandartmsgpromptlist = ;;;;;Äîáàâèòü;Ðåäàêòèðîâàòü;Ïðîñìîòð;Óäàëèòü
_handledcustommsglist = TVRACC
_handledcustommsgpromptlist = Äâèæåíèå òîâàðà
Name = "grdparttvrz"
Column1.ControlSource = "FrmPartTvrView.TvrNM"
Column1.Name = "Column1"
Column2.ControlSource = "FrmPartTvrView.TvrQnt"
Column2.Name = "Column2"
Column3.ControlSource = "FrmPartTvrView.MsuShortNM"
Column3.Name = "Column3"
Column4.ControlSource = "FrmPartTvrView.TvrPrcBuy"
Column4.Name = "Column4"
Column5.ControlSource = "FrmPartTvrView.TvrPrcSale"
Column5.Name = "Column5"
Column6.ControlSource = "FrmPartTvrView.TvrSumBuy"
Column6.Name = "Column6"
Column7.ControlSource = "FrmPartTvrView.TvrSumSale"
Column7.Name = "Column7"
</properties>
		<protected/>
		<methods>PROCEDURE _add
*-------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: grdPartTvr._Add
* Called by.......: &lt;ToolBar or Context Menu Action -&gt; .HandleMsg() -&gt; .Add()&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Äîáàâëåíèå ñîäåðæàíèÿ òîâàðíîãî äîêóìåíòà
*-------------------------------------------------------

*15.07.2004 02:57 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	luResultAdding
*------------------------------------------------------------------------------


USE IN IIF(USED([lvFrmTypeObjDescInfoByFrm]),[lvFrmTypeObjDescInfoByFrm],0)
***
_PARAM = This.nFrmID
USE Basis!lvFrmTypeObjDescInfoByFrm IN 0
***
*!*	IF RECCOUNT([lvFrmTypeObjDescInfoByFrm]) # 1
*!*		ASSERT .F. MESSAGE [MGRPRIMARYDOC.FORM_EDIT: íåâîçìîæíî îïðåäåëèòü èìÿ îáúåêòà, èñïîëüçóåìîãî äëÿ ðåäàêòèðîâàíèÿ]
*!*		RETURN .F.
*!*	ENDIF	
*15.07.2004 02:57 -&gt;Âûïîëíÿåì îïåðàöèþ äîáàâëåíèÿ
DO CASE
CASE !ISNULL(lvFrmTypeObjDescInfoByFrm.FrmTypeEditObjDescDet) AND ALLTRIM(lvFrmTypeObjDescInfoByFrm.FrmTypeEditObjDescDet) &lt;&gt; []
		*09.03.2008 08:57 -&gt;Âûïîëíÿåì îïåðàöèþ äîáàâëåíèÿ ïî ïîëþ - äåñêðèïòîðó
	  luResultAdding = oApp.DoModalFormRetValObj(lvFrmTypeObjDescInfoByFrm.FrmTypeEditObjDescDet,[ADD],This.nFrmID)
CASE PrimaryDocView.FrmTypeId = 21
luResultAdding = oMgrPD.Operate([PARTMNU],[ADD],This.nFrmID)
CASE PrimaryDocView.FrmTypeId = 19
luResultAdding = oMgrPD.Operate([PARTCLC],[ADD],This.nFrmID)
CASE PrimaryDocView.FrmTypeId = 0
luResultAdding = oMgrPD.Operate([PARTTVR],[ADD],This.nFrmID)
OTHERWISE
luResultAdding = oMgrPD.Operate([PARTTVR],[ADD],This.nFrmID)
ENDCASE
*------------------------------------------------------------------------------
USE IN IIF(USED([lvFrmTypeObjDescInfoByFrm]),[lvFrmTypeObjDescInfoByFrm],0)

*24.09.2004 16:17 -&gt;Åñëè çàïèñü äîáàâëåíà
IF TYPE([luResultAdding])==[N] AND !EMPTY(luResultAdding)

	*24.09.2004 16:15 -&gt;Ïåðå÷èòûâàåì Alias äëÿ ïðîñìîòðà
	This._RSRequeryOne(luResultAdding)
	*------------------------------------------------------------------------------
	
ENDIF
*------------------------------------------------------------------------------

****************************************************************************************************************
***********************************************  END OF METHOD *************************************************
****************************************************************************************************************
ENDPROC
PROCEDURE _dele
*-------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: grdPartFrm._Dele
* Called by.......: &lt;ToolBar or Context Menu Action -&gt; .HandleMsg() -&gt; .Dele()&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Óäàëåíèå ñîäåðæàíèÿ òîâàðíîãî äîêóìåíòà
*-------------------------------------------------------

*15.07.2004 02:57 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	lnFrmPartTvrID, ;
		luDeleRes
***
lnFrmPartTvrID = FrmPartTvrView.PartTvrID
*------------------------------------------------------------------------------

USE IN IIF(USED([lvFrmTypeObjDescInfoByFrm]),[lvFrmTypeObjDescInfoByFrm],0)
***
_PARAM = This.nFrmID
USE Basis!lvFrmTypeObjDescInfoByFrm IN 0
***
IF RECCOUNT([lvFrmTypeObjDescInfoByFrm]) # 1
	ASSERT .F. MESSAGE [MGRPRIMARYDOC.FORM_EDIT: íåâîçìîæíî îïðåäåëèòü èìÿ îáúåêòà, èñïîëüçóåìîãî äëÿ ðåäàêòèðîâàíèÿ]
	RETURN .F.
ENDIF	

*15.07.2004 02:57 -&gt;Âûïîëíÿåì îïåðàöèþ äîáàâëåíèÿ
DO CASE
CASE !ISNULL(lvFrmTypeObjDescInfoByFrm.FrmTypeEditObjDescDet) AND ALLTRIM(lvFrmTypeObjDescInfoByFrm.FrmTypeEditObjDescDet) &lt;&gt; []
		*09.03.2008 08:57 -&gt;Âûïîëíÿåì îïåðàöèþ óäàëåíèÿ ïî ïîëþ - äåñêðèïòîðó
	luDeleRes = oApp.DoModalFormRetValObj(lvFrmTypeObjDescInfoByFrm.FrmTypeEditObjDescDet,[DELE],lnFrmPartTvrID)
	OTHERWISE
		*15.07.2004 02:57 -&gt;Âûïîëíÿåì îïåðàöèþ óäàëåíèÿ
		luDeleRes = oMgrPD.Operate([PARTTVR],[DELE],lnFrmPartTvrID)
ENDCASE luDeleRes
*------------------------------------------------------------------------------
USE IN IIF(USED([lvFrmTypeObjDescInfoByFrm]),[lvFrmTypeObjDescInfoByFrm],0)

*24.09.2004 16:17 -&gt;Åñëè çàïèñü óäàëåíà
IF TYPE([luDeleRes])==[L] AND luDeleRes

	*24.09.2004 16:15 -&gt;Ïåðå÷èòûâàåì Alias äëÿ ïðîñìîòðà
	This._RSRequeryOne(lnFrmPartTvrID)
	*------------------------------------------------------------------------------

ENDIF
*------------------------------------------------------------------------------

****************************************************************************************************************
***********************************************  END OF METHOD *************************************************
****************************************************************************************************************
ENDPROC
PROCEDURE _edit
*-------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: grdPartTvr._Edit
* Called by.......: &lt;ToolBar or Context Menu Action -&gt; .HandleMsg() -&gt; .Edit()&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Ðåäàêòèðîâàíèå ñîäåðæàíèÿ òîâàðíîãî äîêóìåíòà
*-------------------------------------------------------

*19.10.2004 13:44 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	lnFrmPartTvrID, ;
		luEditRes
***
lnFrmPartTvrID = FrmPartTvrView.PartTvrID
*------------------------------------------------------------------------------
USE IN IIF(USED([lvFrmTypeObjDescInfoByFrm]),[lvFrmTypeObjDescInfoByFrm],0)
***
_PARAM = This.nFrmID
USE Basis!lvFrmTypeObjDescInfoByFrm IN 0
***
IF RECCOUNT([lvFrmTypeObjDescInfoByFrm]) # 1
	ASSERT .F. MESSAGE [MGRPRIMARYDOC.FORM_EDIT: íåâîçìîæíî îïðåäåëèòü èìÿ îáúåêòà, èñïîëüçóåìîãî äëÿ ðåäàêòèðîâàíèÿ]
	RETURN .F.
ENDIF	
*15.07.2004 02:57 -&gt;Âûïîëíÿåì îïåðàöèþ ðåàäêòèðîâàíèÿ
DO CASE
CASE !ISNULL(lvFrmTypeObjDescInfoByFrm.FrmTypeEditObjDescDet) AND ALLTRIM(lvFrmTypeObjDescInfoByFrm.FrmTypeEditObjDescDet) &lt;&gt; []
		*09.03.2008 08:57 -&gt;Âûïîëíÿåì îïåðàöèþ ðåàäêòèðîâàíèÿ ïî ïîëþ - äåñêðèïòîðó
	luEditRes = oApp.DoModalFormRetValObj(lvFrmTypeObjDescInfoByFrm.FrmTypeEditObjDescDet,[EDIT],lnFrmPartTvrID)
CASE PrimaryDocView.FrmTypeId = 21
luEditRes = oMgrPD.Operate([PARTMNU],[EDIT],lnFrmPartTvrID)
CASE PrimaryDocView.FrmTypeId = 19
luEditRes = oMgrPD.Operate([PARTCLC],[EDIT],lnFrmPartTvrID)
CASE PrimaryDocView.FrmTypeId = 0
luEditRes = oMgrPD.Operate([PARTTVR],[EDIT],lnFrmPartTvrID)
OTHERWISE
luEditRes = oMgrPD.Operate([PARTTVR],[EDIT],lnFrmPartTvrID)
ENDCASE
*------------------------------------------------------------------------------
USE IN IIF(USED([lvFrmTypeObjDescInfoByFrm]),[lvFrmTypeObjDescInfoByFrm],0)

*19.10.2004 13:45 -&gt;Åñëè çàïèñü îòðåäàêòèðîâàëè
IF TYPE([luEditRes])==[L] AND luEditRes

	*24.09.2004 16:15 -&gt;Ïåðå÷èòûâàåì Alias äëÿ ïðîñìîòðà
	This._RSRequeryOne(lnFrmPartTvrID)
	*------------------------------------------------------------------------------
	
ENDIF
*------------------------------------------------------------------------------

****************************************************************************************************************
***********************************************  END OF METHOD *************************************************
****************************************************************************************************************
ENDPROC
PROCEDURE _gethandledstandartmsglist
*------------------------------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: grdPartTvr._GetHandledStandartMsgList
* Called by.......: &lt;.RefreshHandledStandartMsgList();.RightClick()&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;lcHandledStandartMsgList&gt;
* Notes...........: Çàïðåòèì âñå ñòàíäàðòíûå îïåðàöèè, åñëè òåêóùèé äîêóìåíò íå îïðåäåëåí
*------------------------------------------------------------------------------

*15.09.2005 15:23 -&gt; Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	lnFrmID, ;
		lcResult
***
lnFrmID = This.nFrmID
*------------------------------------------------------------------------------

*15.09.2005 15:24 -&gt; Îïðåäåëèì ðàçðåø¸ííûå îïåðàöèè
IF lnFrmID = 0

	lcResult = []

ELSE
	
	*15.09.2005 15:27 -&gt; Ïîëó÷èì èíôîðìàöèþ î ñòàòóñå äîêóìåíòà
	LOCAL _PARAM
	_PARAM = lnFrmID
	***
	USE IN IIF(USED([lvFrmStatusInfoByFrmID]),[lvFrmStatusInfoByFrmID],0)
	USE lvFrmStatusInfoByFrmID IN 0
	*------------------------------------------------------------------------------

	*------------------------------------------------------------------------------
	*15.09.2005 15:28 -&gt; Ïðîâåðèì ó÷àñòâóåò ëè äîêóìåíò â ó÷åòå
	IF	!lvFrmStatusInfoByFrmID.FrmStatIsInvAcc AND ;
		!lvFrmStatusInfoByFrmID.FrmStatIsCostAcc

		*27.03.2006 10:50 -&gt; Ðàçðåøèì âñå îïåðàöèè
		lcResult = DODEFAULT()
		*------------------------------------------------------------------------------

	ELSE

		*27.03.2006 10:54 -&gt; Èñêëþ÷èì óäàëåíèå/äîáàâëåíèå/ðåäàêòèðîâàíèå èç ñïèñêà âîçìîæíûõ îïåðàöèé
		lcResult = [;] + DODEFAULT() + [;]
		lcResult = STRTRAN(lcResult,[;ADD;],[;])
		lcResult = STRTRAN(lcResult,[;DELE;],[;])
		lcResult = STRTRAN(lcResult,[;EDIT;],[;])
		*------------------------------------------------------------------------------

		*27.03.2006 10:58 -&gt; Óäàëÿåì ñëåâà è ñïðàâà ; äîáàâëåííûå ðàíåå
		IF !(lcResult == [;])
			lcResult = SUBSTR(lcResult,2,LEN(lcResult)-2)
		ELSE
			lcResult = []
		ENDIF	
		*------------------------------------------------------------------------------

	ENDIF
	*------------------------------------------------------------------------------

ENDIF
*------------------------------------------------------------------------------

*15.09.2005 15:23 -&gt; Âîçâðàùàåì ðåçóëüòàò
RETURN lcResult
*------------------------------------------------------------------------------

*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE _handlecustommsg
LPARAMETERS	tcMessage

DO CASE

	*19.09.2005 12:20 -&gt;Âûçîâ êàðòî÷êè êîëè÷åñòâåííî-ñòîèìîñòíîãî ó÷åòà
	CASE tcMessage=[TVRACC]


		*19.09.2005 12:23 -&gt;Âûïîëíèì îïåðàöèþ
		oMgrTovar.Do([TVR],[TVRACC],FrmPartTvrView.TvrId)
		*------------------------------------------------------------------------------

ENDCASE		

*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE _info
*-------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: GRDPARTTVR._INFO
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Ïðîñìîòð èíôîðìàöèè î òîâàðíîé ñòðîêå
*-------------------------------------------------------

USE IN IIF(USED([lvFrmTypeObjDescInfoByFrm]),[lvFrmTypeObjDescInfoByFrm],0)
***
_PARAM = This.nFrmID
USE Basis!lvFrmTypeObjDescInfoByFrm IN 0
***
IF RECCOUNT([lvFrmTypeObjDescInfoByFrm]) # 1
	ASSERT .F. MESSAGE [MGRPRIMARYDOC.FORM_EDIT: íåâîçìîæíî îïðåäåëèòü èìÿ îáúåêòà, èñïîëüçóåìîãî äëÿ ðåäàêòèðîâàíèÿ]
	RETURN .F.
ENDIF	

*15.07.2004 02:57 -&gt;Âûïîëíÿåì îïåðàöèþ ïðîñìîòðà
DO CASE
CASE !ISNULL(lvFrmTypeObjDescInfoByFrm.FrmTypeEditObjDescDet) AND ALLTRIM(lvFrmTypeObjDescInfoByFrm.FrmTypeEditObjDescDet) &lt;&gt; []
		*09.03.2008 08:57 -&gt;Âûïîëíÿåì îïåðàöèþ ïðîñìîòðà ïî ïîëþ - äåñêðèïòîðó
	luEditRes = oApp.DoModalFormRetValObj(lvFrmTypeObjDescInfoByFrm.FrmTypeEditObjDescDet,[INFO],FrmPartTvrView.PartTvrID)
CASE PrimaryDocView.FrmTypeId = 21
oMgrPD.Operate([PARTMNU],[INFO],FrmPartTvrView.PartTvrID)
CASE PrimaryDocView.FrmTypeId = 19
oMgrPD.Operate([PARTCLC],[INFO],FrmPartTvrView.PartTvrID)
CASE PrimaryDocView.FrmTypeId = 0
oMgrPD.Operate([PARTTVR],[INFO],FrmPartTvrView.PartTvrID)
OTHERWISE
oMgrPD.Operate([PARTTVR],[INFO],FrmPartTvrView.PartTvrID)
ENDCASE
*------------------------------------------------------------------------------

************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************
ENDPROC
PROCEDURE _rsrequery
*-------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: grdPartTvr._RSRequery
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;tnFrmID&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Ïåðå÷èòûâàíèå ñîäåðæèìîãî äîêóìåíòà
*-------------------------------------------------------
LPARAMETERS	tnFrmID

*21.04.2004 14:37 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	lcUniqueName, ;
		lcUniqueFilePath
*------------------------------------------------------------------------------

WITH THIS

*21.04.2004 14:33 -&gt;Ñîõðàíèì äàííûå î RecordSource
.SourceKeep()
*------------------------------------------------------------------------------

*21.04.2004 14:33 -&gt;Îòêëþ÷èì RecordSource
.SourceReset()
*------------------------------------------------------------------------------

*21.04.2004 14:34 -&gt;Çàêðîåì Alias è óäàëèì âðåìåííóþ òàáëèöó
lcUniqueFilePath = DBF([FrmPartTvrView])
***
USE IN FrmPartTvrView
***
IF FILE(lcUniqueFilePath)
	ERASE (lcUniqueFilePath)
ENDIF
*------------------------------------------------------------------------------

*05.05.2004 01:35 -&gt;Ïåðå÷èòàåì Alias
IF TYPE([tnFrmID])==[N] AND !EMPTY(tnFrmID)
	
	*02.12.2004 16:48 -&gt;Ñîõðàíèì èäåíòèôèêàòîð äîêóìåíòà â ñâîéñòâå Grid-à
	.nFrmID = tnFrmID
	*------------------------------------------------------------------------------

	*21.04.2004 14:05 -&gt;Âûïîëíèì õðàíèìóþ ïðîöåäóðó äëÿ ïîëó÷åíèÿ äàííûõ
	lcUniqueName = spFrmPartTvrView([BYFRMID],tnFrmID)
	*------------------------------------------------------------------------------

ELSE
	
	*02.12.2004 16:48 -&gt;Ñîõðàíèì èäåíòèôèêàòîð äîêóìåíòà â ñâîéñòâå Grid-à
	.nFrmID = 0
	*------------------------------------------------------------------------------

	*21.04.2004 14:05 -&gt;Âûïîëíèì õðàíèìóþ ïðîöåäóðó äëÿ ïîëó÷åíèÿ òàáëèöû
	lcUniqueName = spFrmPartTvrView([NODATA])
	*------------------------------------------------------------------------------
	
ENDIF	
*------------------------------------------------------------------------------

*21.04.2004 14:08 -&gt;Òåïåðü îòêðîåì äàííûé Alias
USE (lcUniqueName) IN 0 ALIAS FrmPartTvrView
CURSORSETPROP([BUFFERING],3,[FrmPartTvrView])
*------------------------------------------------------------------------------
*05.05.2004 01:36 -&gt;Âîññòàíàâëèâàåì Alias
.SourceRecall()
*------------------------------------------------------------------------------

ENDWITH
************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************
ENDPROC
PROCEDURE _rsrequeryone
*------------------------------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: grdPartTvr._RSRequeryOne
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;tnFrmPartTvrID&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Ïåðå÷èòûâàíèå îäíîé çàïèñè (òîâàðíîé ïîçèöèè äîêóìåíòà)
*------------------------------------------------------------------------------
LPARAMETERS tnFrmPartTvrID

*22.12.2004 15:10 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	lcOldAlias, ;
		lcUniqueFileName, ;
		laReplaceArray[1]
***
lcOldAlias = ALIAS()
*------------------------------------------------------------------------------

*12.05.2004 03:27 -&gt;Âûïîëíÿåì çàïðîñ ñòðîêè
lcUniqueFileName = spFrmPartTvrView([BYFRMPARTTVRID],This.nFrmID,tnFrmPartTvrID)
*------------------------------------------------------------------------------

*12.05.2004 03:35 -&gt;Îòêëþ÷àåì èñòî÷íèê äàííûõ
This.SourceKeep()
This.SourceReset()
*------------------------------------------------------------------------------

*22.12.2004 15:05 -&gt;Äîáàâëÿåì/îáíîâëÿåì/óäàëÿåì çàïèñü
USE (lcUniqueFileName) IN 0 ALIAS FrmPartTvrViewReq
SELECT FrmPartTvrViewReq
***
IF RECCOUNT([FrmPartTvrViewReq]) == 1
	*22.12.2004 15:10 -&gt;Îáíîâëÿåì çàïèñü
	SCATTER TO laReplaceArray
	SELECT FrmPartTvrView
	LOCATE FOR FrmPartTvrView.PartTvrID = tnFrmPartTvrID
	IF !FOUND()
		APPEND BLANK IN FrmPartTvrView
	ENDIF
	GATHER FROM laReplaceArray
	TABLEUPDATE(.T.)
	*------------------------------------------------------------------------------
ELSE
	SELECT FrmPartTvrView
	LOCATE FOR FrmPartTvrView.PartTvrID = tnFrmPartTvrID
	IF FOUND()
		*22.12.2004 15:11 -&gt;Óäàëÿåì çàïèñü
		DELETE IN FrmPartTvrView
		TABLEUPDATE(.T.)
		LOCATE REST
		*------------------------------------------------------------------------------
	ENDIF
ENDIF
*------------------------------------------------------------------------------

*12.05.2004 03:37 -&gt;Âîññòàíàâëèâàåì èñòî÷íèê äàííûõ
This.SourceRecall()
*------------------------------------------------------------------------------

*22.12.2004 15:09 -&gt;Óäàëÿåì ðåçóëüòàò çàïðîñà
USE IN FrmPartTvrViewReq
ERASE ([tmp\]+lcUniqueFileName+[.dbf])
*------------------------------------------------------------------------------

*22.12.2004 15:35 -&gt;Âîññòàíîâèì òåêóùèé Alias
IF !EMPTY(lcOldAlias) AND USED(lcOldAlias) AND lcOldAlias#ALIAS()
	SELECT(lcOldAlias)
ENDIF
*------------------------------------------------------------------------------

*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE Init
DODEFAULT()
This.SetAll([DynamicBackColor],[IIF(FrmPartTvrView.TvrPrcBuy = 0,RGB(116,181,245),RGB(255,255,255))],[COLUMN])
*This.Column4.DynamicBackColor = [IIF(FrmPartTvrView.TvrPrcBuy = 0,RGB(116,181,245),RGB(255,255,255))]
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1>Class</reserved1>
		<reserved2>15</reserved2>
		<reserved3>nfrmid &lt;public/runtime&gt; Èäåíòèôèêàòîð äîêóìåíòà, äëÿ êîòîðîãî îòîáðàæàþòñÿ òîâàðíûå ñòðîêè.
</reserved3>
		<reserved4/>
		<reserved5/>
		<reserved6>Pixels</reserved6>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18A02PAKD</uniqueid>
		<timestamp>946423943</timestamp>
		<class>header</class>
		<classloc/>
		<baseclass>header</baseclass>
		<objname>Header1</objname>
		<parent>grdparttvrz.Column1</parent>
		<properties>Alignment = 2
Caption = "Òîâàð"
Name = "Header1"
</properties>
		<protected/>
		<methods>PROCEDURE DblClick
This.Parent.Parent.Sort(This.Parent.Name)
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18A02PAKE</uniqueid>
		<timestamp>0</timestamp>
		<class>txtgrd</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>Text1</objname>
		<parent>grdparttvrz.Column1</parent>
		<properties>BorderStyle = 0
Margin = 0
ForeColor = 0,0,0
BackColor = 255,255,255
Name = "Text1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18A02PAKF</uniqueid>
		<timestamp>946423943</timestamp>
		<class>header</class>
		<classloc/>
		<baseclass>header</baseclass>
		<objname>Header1</objname>
		<parent>grdparttvrz.Column2</parent>
		<properties>Alignment = 2
Caption = "Êîë-âî"
Name = "Header1"
</properties>
		<protected/>
		<methods>PROCEDURE DblClick
This.Parent.Parent.Sort(This.Parent.Name)
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18A02PAKN</uniqueid>
		<timestamp>0</timestamp>
		<class>txtgrd</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>Text1</objname>
		<parent>grdparttvrz.Column2</parent>
		<properties>BorderStyle = 0
Margin = 0
ForeColor = 0,0,0
BackColor = 255,255,255
Name = "Text1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18A02PAKO</uniqueid>
		<timestamp>946423943</timestamp>
		<class>header</class>
		<classloc/>
		<baseclass>header</baseclass>
		<objname>Header1</objname>
		<parent>grdparttvrz.Column3</parent>
		<properties>Alignment = 2
Caption = "Åä. èçì."
Name = "Header1"
</properties>
		<protected/>
		<methods>PROCEDURE DblClick
This.Parent.Parent.Sort(This.Parent.Name)
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18A02PAKP</uniqueid>
		<timestamp>0</timestamp>
		<class>txtgrd</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>Text1</objname>
		<parent>grdparttvrz.Column3</parent>
		<properties>BorderStyle = 0
Margin = 0
ForeColor = 0,0,0
Name = "Text1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18A02PAKX</uniqueid>
		<timestamp>946423943</timestamp>
		<class>header</class>
		<classloc/>
		<baseclass>header</baseclass>
		<objname>Header1</objname>
		<parent>grdparttvrz.Column4</parent>
		<properties>Alignment = 2
Caption = "Ö. ïîñò."
Name = "Header1"
</properties>
		<protected/>
		<methods>PROCEDURE DblClick
This.Parent.Parent.Sort(This.Parent.Name)
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18A02PAKY</uniqueid>
		<timestamp>0</timestamp>
		<class>txtgrd</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>Text1</objname>
		<parent>grdparttvrz.Column4</parent>
		<properties>BorderStyle = 0
Margin = 0
ForeColor = 0,0,0
BackColor = (iif(this.value=0,'255,0,0,255','255,255'))
Name = "Text1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18A02PAKZ</uniqueid>
		<timestamp>946423943</timestamp>
		<class>header</class>
		<classloc/>
		<baseclass>header</baseclass>
		<objname>Header1</objname>
		<parent>grdparttvrz.Column5</parent>
		<properties>Alignment = 2
Caption = "Ö. ïðîä."
Name = "Header1"
</properties>
		<protected/>
		<methods>PROCEDURE DblClick
This.Parent.Parent.Sort(This.Parent.Name)
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18A02PAL0</uniqueid>
		<timestamp>0</timestamp>
		<class>txtgrd</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>Text1</objname>
		<parent>grdparttvrz.Column5</parent>
		<properties>BorderStyle = 0
Margin = 0
ForeColor = 0,0,0
BackColor = 255,255,255
Name = "Text1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18A02PAL1</uniqueid>
		<timestamp>946423943</timestamp>
		<class>header</class>
		<classloc/>
		<baseclass>header</baseclass>
		<objname>Header1</objname>
		<parent>grdparttvrz.Column6</parent>
		<properties>Alignment = 2
Caption = "Ñóììà ïîñò."
Name = "Header1"
</properties>
		<protected/>
		<methods>PROCEDURE DblClick
This.Parent.Parent.Sort(This.Parent.Name)
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18A02PAL2</uniqueid>
		<timestamp>0</timestamp>
		<class>txtgrd</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>Text1</objname>
		<parent>grdparttvrz.Column6</parent>
		<properties>BorderStyle = 0
Margin = 0
ForeColor = 0,0,0
BackColor = 255,255,255
Name = "Text1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18A02PAL7</uniqueid>
		<timestamp>946423943</timestamp>
		<class>header</class>
		<classloc/>
		<baseclass>header</baseclass>
		<objname>Header1</objname>
		<parent>grdparttvrz.Column7</parent>
		<properties>Alignment = 2
Caption = "Ñóììà ïðîä."
Name = "Header1"
</properties>
		<protected/>
		<methods>PROCEDURE DblClick
This.Parent.Parent.Sort(This.Parent.Name)
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18A02PAL8</uniqueid>
		<timestamp>0</timestamp>
		<class>txtgrd</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>Text1</objname>
		<parent>grdparttvrz.Column7</parent>
		<properties>BorderStyle = 0
Margin = 0
ForeColor = 0,0,0
BackColor = 255,255,255
Name = "Text1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>COMMENT</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>0</timestamp>
		<class/>
		<classloc/>
		<baseclass/>
		<objname>grdparttvrz</objname>
		<parent/>
		<properties>Arial, 0, 9, 5, 15, 12, 32, 3, 0
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18A02DMUV</uniqueid>
		<timestamp>961303738</timestamp>
		<class>grd</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>grid</baseclass>
		<objname>grdparttvr</objname>
		<parent/>
		<properties>ColumnCount = 9
Height = 215
RecordSource = "FrmPartTvrView"
Width = 345
Partition = 0
HighlightStyle = 2
nfrmid = 0
_handledstandartmsglist = FIRST;PREV;NEXT;LAST;;ADD;EDIT;INFO;DELE
_handledstandartmsgpromptlist = ;;;;;Äîáàâèòü;Ðåäàêòèðîâàòü;Ïðîñìîòð;Óäàëèòü
_handledcustommsglist = TVRACC
_handledcustommsgpromptlist = Äâèæåíèå òîâàðà
Name = "grdparttvr"
Column1.ControlSource = "FrmPartTvrView.TvrNM"
Column1.Name = "Column1"
Column2.ControlSource = "FrmPartTvrView.TvrQnt"
Column2.Name = "Column2"
Column3.ControlSource = "FrmPartTvrView.MsuShortNM"
Column3.Name = "Column3"
Column4.ControlSource = "FrmPartTvrView.TvrPrcBuy"
Column4.Name = "Column4"
Column5.ControlSource = "FrmPartTvrView.TvrPrcSale"
Column5.Name = "Column5"
Column6.ControlSource = "FrmPartTvrView.TvrSumBuy"
Column6.Name = "Column6"
Column7.ControlSource = "FrmPartTvrView.TvrSumSale"
Column7.Name = "Column7"
Column8.ControlSource = "FrmPartTvrView.TvrSumSale-FrmPartTvrView.TvrSumBuy"
Column8.Name = "Column8"
Column9.ControlSource = "IIF(FrmPartTvrView.TvrSumBuy&lt;&gt;0,(FrmPartTvrView.TvrSumSale-FrmPartTvrView.TvrSumBuy)/FrmPartTvrView.TvrSumBuy*100,0)"
Column9.Name = "Column9"
</properties>
		<protected/>
		<methods>PROCEDURE _add
*-------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: grdPartTvr._Add
* Called by.......: &lt;ToolBar or Context Menu Action -&gt; .HandleMsg() -&gt; .Add()&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Äîáàâëåíèå ñîäåðæàíèÿ òîâàðíîãî äîêóìåíòà
*-------------------------------------------------------

*15.07.2004 02:57 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	luResultAdding
*------------------------------------------------------------------------------


USE IN IIF(USED([lvFrmTypeObjDescInfoByFrm]),[lvFrmTypeObjDescInfoByFrm],0)
***
_PARAM = This.nFrmID
USE Basis!lvFrmTypeObjDescInfoByFrm IN 0
***
*!*	IF RECCOUNT([lvFrmTypeObjDescInfoByFrm]) # 1
*!*		ASSERT .F. MESSAGE [MGRPRIMARYDOC.FORM_EDIT: íåâîçìîæíî îïðåäåëèòü èìÿ îáúåêòà, èñïîëüçóåìîãî äëÿ ðåäàêòèðîâàíèÿ]
*!*		RETURN .F.
*!*	ENDIF	
*15.07.2004 02:57 -&gt;Âûïîëíÿåì îïåðàöèþ äîáàâëåíèÿ
DO CASE
CASE !ISNULL(lvFrmTypeObjDescInfoByFrm.FrmTypeEditObjDescDet) AND ALLTRIM(lvFrmTypeObjDescInfoByFrm.FrmTypeEditObjDescDet) &lt;&gt; []
		*09.03.2008 08:57 -&gt;Âûïîëíÿåì îïåðàöèþ äîáàâëåíèÿ ïî ïîëþ - äåñêðèïòîðó
	  luResultAdding = oApp.DoModalFormRetValObj(lvFrmTypeObjDescInfoByFrm.FrmTypeEditObjDescDet,[ADD],This.nFrmID)
CASE PrimaryDocView.FrmTypeId = 21
luResultAdding = oMgrPD.Operate([PARTMNU],[ADD],This.nFrmID)
CASE PrimaryDocView.FrmTypeId = 19
luResultAdding = oMgrPD.Operate([PARTCLC],[ADD],This.nFrmID)
CASE PrimaryDocView.FrmTypeId = 0
luResultAdding = oMgrPD.Operate([PARTTVR],[ADD],This.nFrmID)
OTHERWISE
luResultAdding = oMgrPD.Operate([PARTTVR],[ADD],This.nFrmID)
ENDCASE
*------------------------------------------------------------------------------
USE IN IIF(USED([lvFrmTypeObjDescInfoByFrm]),[lvFrmTypeObjDescInfoByFrm],0)

*24.09.2004 16:17 -&gt;Åñëè çàïèñü äîáàâëåíà
IF TYPE([luResultAdding])==[N] AND !EMPTY(luResultAdding)

	*24.09.2004 16:15 -&gt;Ïåðå÷èòûâàåì Alias äëÿ ïðîñìîòðà
	This._RSRequeryOne(luResultAdding)
	*------------------------------------------------------------------------------
	
ENDIF
*------------------------------------------------------------------------------

****************************************************************************************************************
***********************************************  END OF METHOD *************************************************
****************************************************************************************************************
ENDPROC
PROCEDURE _dele
*-------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: grdPartFrm._Dele
* Called by.......: &lt;ToolBar or Context Menu Action -&gt; .HandleMsg() -&gt; .Dele()&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Óäàëåíèå ñîäåðæàíèÿ òîâàðíîãî äîêóìåíòà
*-------------------------------------------------------

*15.07.2004 02:57 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	lnFrmPartTvrID, ;
		luDeleRes
***
lnFrmPartTvrID = FrmPartTvrView.PartTvrID
*------------------------------------------------------------------------------

USE IN IIF(USED([lvFrmTypeObjDescInfoByFrm]),[lvFrmTypeObjDescInfoByFrm],0)
***
_PARAM = This.nFrmID
USE Basis!lvFrmTypeObjDescInfoByFrm IN 0
***
IF RECCOUNT([lvFrmTypeObjDescInfoByFrm]) # 1
	ASSERT .F. MESSAGE [MGRPRIMARYDOC.FORM_EDIT: íåâîçìîæíî îïðåäåëèòü èìÿ îáúåêòà, èñïîëüçóåìîãî äëÿ ðåäàêòèðîâàíèÿ]
	RETURN .F.
ENDIF	

*15.07.2004 02:57 -&gt;Âûïîëíÿåì îïåðàöèþ äîáàâëåíèÿ
DO CASE
CASE !ISNULL(lvFrmTypeObjDescInfoByFrm.FrmTypeEditObjDescDet) AND ALLTRIM(lvFrmTypeObjDescInfoByFrm.FrmTypeEditObjDescDet) &lt;&gt; []
		*09.03.2008 08:57 -&gt;Âûïîëíÿåì îïåðàöèþ óäàëåíèÿ ïî ïîëþ - äåñêðèïòîðó
	luDeleRes = oApp.DoModalFormRetValObj(lvFrmTypeObjDescInfoByFrm.FrmTypeEditObjDescDet,[DELE],lnFrmPartTvrID)
	OTHERWISE
		*15.07.2004 02:57 -&gt;Âûïîëíÿåì îïåðàöèþ óäàëåíèÿ
		luDeleRes = oMgrPD.Operate([PARTTVR],[DELE],lnFrmPartTvrID)
ENDCASE luDeleRes
*------------------------------------------------------------------------------
USE IN IIF(USED([lvFrmTypeObjDescInfoByFrm]),[lvFrmTypeObjDescInfoByFrm],0)

*24.09.2004 16:17 -&gt;Åñëè çàïèñü óäàëåíà
IF TYPE([luDeleRes])==[L] AND luDeleRes

	*24.09.2004 16:15 -&gt;Ïåðå÷èòûâàåì Alias äëÿ ïðîñìîòðà
	This._RSRequeryOne(lnFrmPartTvrID)
	*------------------------------------------------------------------------------

ENDIF
*------------------------------------------------------------------------------

****************************************************************************************************************
***********************************************  END OF METHOD *************************************************
****************************************************************************************************************
ENDPROC
PROCEDURE _edit
*-------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: grdPartTvr._Edit
* Called by.......: &lt;ToolBar or Context Menu Action -&gt; .HandleMsg() -&gt; .Edit()&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Ðåäàêòèðîâàíèå ñîäåðæàíèÿ òîâàðíîãî äîêóìåíòà
*-------------------------------------------------------

*19.10.2004 13:44 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	lnFrmPartTvrID, ;
		luEditRes
***
lnFrmPartTvrID = FrmPartTvrView.PartTvrID
*------------------------------------------------------------------------------
USE IN IIF(USED([lvFrmTypeObjDescInfoByFrm]),[lvFrmTypeObjDescInfoByFrm],0)
***
_PARAM = This.nFrmID
USE Basis!lvFrmTypeObjDescInfoByFrm IN 0
***
IF RECCOUNT([lvFrmTypeObjDescInfoByFrm]) # 1
	ASSERT .F. MESSAGE [MGRPRIMARYDOC.FORM_EDIT: íåâîçìîæíî îïðåäåëèòü èìÿ îáúåêòà, èñïîëüçóåìîãî äëÿ ðåäàêòèðîâàíèÿ]
	RETURN .F.
ENDIF	
*15.07.2004 02:57 -&gt;Âûïîëíÿåì îïåðàöèþ ðåàäêòèðîâàíèÿ
DO CASE
CASE !ISNULL(lvFrmTypeObjDescInfoByFrm.FrmTypeEditObjDescDet) AND ALLTRIM(lvFrmTypeObjDescInfoByFrm.FrmTypeEditObjDescDet) &lt;&gt; []
		*09.03.2008 08:57 -&gt;Âûïîëíÿåì îïåðàöèþ ðåàäêòèðîâàíèÿ ïî ïîëþ - äåñêðèïòîðó
	luEditRes = oApp.DoModalFormRetValObj(lvFrmTypeObjDescInfoByFrm.FrmTypeEditObjDescDet,[EDIT],lnFrmPartTvrID)
CASE PrimaryDocView.FrmTypeId = 21
luEditRes = oMgrPD.Operate([PARTMNU],[EDIT],lnFrmPartTvrID)
CASE PrimaryDocView.FrmTypeId = 19
luEditRes = oMgrPD.Operate([PARTCLC],[EDIT],lnFrmPartTvrID)
CASE PrimaryDocView.FrmTypeId = 0
luEditRes = oMgrPD.Operate([PARTTVR],[EDIT],lnFrmPartTvrID)
OTHERWISE
luEditRes = oMgrPD.Operate([PARTTVR],[EDIT],lnFrmPartTvrID)
ENDCASE
*------------------------------------------------------------------------------
USE IN IIF(USED([lvFrmTypeObjDescInfoByFrm]),[lvFrmTypeObjDescInfoByFrm],0)

*19.10.2004 13:45 -&gt;Åñëè çàïèñü îòðåäàêòèðîâàëè
IF TYPE([luEditRes])==[L] AND luEditRes

	*24.09.2004 16:15 -&gt;Ïåðå÷èòûâàåì Alias äëÿ ïðîñìîòðà
	This._RSRequeryOne(lnFrmPartTvrID)
	*------------------------------------------------------------------------------
	
ENDIF
*------------------------------------------------------------------------------

****************************************************************************************************************
***********************************************  END OF METHOD *************************************************
****************************************************************************************************************
ENDPROC
PROCEDURE _gethandledstandartmsglist
*------------------------------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: grdPartTvr._GetHandledStandartMsgList
* Called by.......: &lt;.RefreshHandledStandartMsgList();.RightClick()&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;lcHandledStandartMsgList&gt;
* Notes...........: Çàïðåòèì âñå ñòàíäàðòíûå îïåðàöèè, åñëè òåêóùèé äîêóìåíò íå îïðåäåëåí
*------------------------------------------------------------------------------

*15.09.2005 15:23 -&gt; Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	lnFrmID, ;
		lcResult
***
lnFrmID = This.nFrmID
*------------------------------------------------------------------------------

*15.09.2005 15:24 -&gt; Îïðåäåëèì ðàçðåø¸ííûå îïåðàöèè
IF lnFrmID = 0

	lcResult = []

ELSE
	
	*15.09.2005 15:27 -&gt; Ïîëó÷èì èíôîðìàöèþ î ñòàòóñå äîêóìåíòà
	LOCAL _PARAM
	_PARAM = lnFrmID
	***
	USE IN IIF(USED([lvFrmStatusInfoByFrmID]),[lvFrmStatusInfoByFrmID],0)
	USE lvFrmStatusInfoByFrmID IN 0
	*------------------------------------------------------------------------------

	*------------------------------------------------------------------------------
	*15.09.2005 15:28 -&gt; Ïðîâåðèì ó÷àñòâóåò ëè äîêóìåíò â ó÷åòå
	IF	!lvFrmStatusInfoByFrmID.FrmStatIsInvAcc AND ;
		!lvFrmStatusInfoByFrmID.FrmStatIsCostAcc

		*27.03.2006 10:50 -&gt; Ðàçðåøèì âñå îïåðàöèè
		lcResult = DODEFAULT()
		*------------------------------------------------------------------------------

	ELSE

		*27.03.2006 10:54 -&gt; Èñêëþ÷èì óäàëåíèå/äîáàâëåíèå/ðåäàêòèðîâàíèå èç ñïèñêà âîçìîæíûõ îïåðàöèé
		lcResult = [;] + DODEFAULT() + [;]
		lcResult = STRTRAN(lcResult,[;ADD;],[;])
		lcResult = STRTRAN(lcResult,[;DELE;],[;])
		lcResult = STRTRAN(lcResult,[;EDIT;],[;])
		*------------------------------------------------------------------------------

		*27.03.2006 10:58 -&gt; Óäàëÿåì ñëåâà è ñïðàâà ; äîáàâëåííûå ðàíåå
		IF !(lcResult == [;])
			lcResult = SUBSTR(lcResult,2,LEN(lcResult)-2)
		ELSE
			lcResult = []
		ENDIF	
		*------------------------------------------------------------------------------

	ENDIF
	*------------------------------------------------------------------------------

ENDIF
*------------------------------------------------------------------------------

*15.09.2005 15:23 -&gt; Âîçâðàùàåì ðåçóëüòàò
RETURN lcResult
*------------------------------------------------------------------------------

*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE _handlecustommsg
LPARAMETERS	tcMessage

DO CASE

	*19.09.2005 12:20 -&gt;Âûçîâ êàðòî÷êè êîëè÷åñòâåííî-ñòîèìîñòíîãî ó÷åòà
	CASE tcMessage=[TVRACC]


		*19.09.2005 12:23 -&gt;Âûïîëíèì îïåðàöèþ
		oMgrTovar.Do([TVR],[TVRACC],FrmPartTvrView.TvrId)
		*------------------------------------------------------------------------------

ENDCASE		

*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE _info
*-------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: GRDPARTTVR._INFO
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Ïðîñìîòð èíôîðìàöèè î òîâàðíîé ñòðîêå
*-------------------------------------------------------

USE IN IIF(USED([lvFrmTypeObjDescInfoByFrm]),[lvFrmTypeObjDescInfoByFrm],0)
***
_PARAM = This.nFrmID
USE Basis!lvFrmTypeObjDescInfoByFrm IN 0
***
IF RECCOUNT([lvFrmTypeObjDescInfoByFrm]) # 1
	ASSERT .F. MESSAGE [MGRPRIMARYDOC.FORM_EDIT: íåâîçìîæíî îïðåäåëèòü èìÿ îáúåêòà, èñïîëüçóåìîãî äëÿ ðåäàêòèðîâàíèÿ]
	RETURN .F.
ENDIF	

*15.07.2004 02:57 -&gt;Âûïîëíÿåì îïåðàöèþ ïðîñìîòðà
DO CASE
CASE !ISNULL(lvFrmTypeObjDescInfoByFrm.FrmTypeEditObjDescDet) AND ALLTRIM(lvFrmTypeObjDescInfoByFrm.FrmTypeEditObjDescDet) &lt;&gt; []
		*09.03.2008 08:57 -&gt;Âûïîëíÿåì îïåðàöèþ ïðîñìîòðà ïî ïîëþ - äåñêðèïòîðó
	luEditRes = oApp.DoModalFormRetValObj(lvFrmTypeObjDescInfoByFrm.FrmTypeEditObjDescDet,[INFO],FrmPartTvrView.PartTvrID)
CASE PrimaryDocView.FrmTypeId = 21
oMgrPD.Operate([PARTMNU],[INFO],FrmPartTvrView.PartTvrID)
CASE PrimaryDocView.FrmTypeId = 19
oMgrPD.Operate([PARTCLC],[INFO],FrmPartTvrView.PartTvrID)
CASE PrimaryDocView.FrmTypeId = 0
oMgrPD.Operate([PARTTVR],[INFO],FrmPartTvrView.PartTvrID)
OTHERWISE
oMgrPD.Operate([PARTTVR],[INFO],FrmPartTvrView.PartTvrID)
ENDCASE
*------------------------------------------------------------------------------

************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************
ENDPROC
PROCEDURE _rsrequery
*-------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: grdPartTvr._RSRequery
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;tnFrmID&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Ïåðå÷èòûâàíèå ñîäåðæèìîãî äîêóìåíòà
*-------------------------------------------------------
LPARAMETERS	tnFrmID

*21.04.2004 14:37 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	lcUniqueName, ;
		lcUniqueFilePath
*------------------------------------------------------------------------------

WITH THIS

*21.04.2004 14:33 -&gt;Ñîõðàíèì äàííûå î RecordSource
.SourceKeep()
*------------------------------------------------------------------------------

*21.04.2004 14:33 -&gt;Îòêëþ÷èì RecordSource
.SourceReset()
*------------------------------------------------------------------------------

*21.04.2004 14:34 -&gt;Çàêðîåì Alias è óäàëèì âðåìåííóþ òàáëèöó
lcUniqueFilePath = DBF([FrmPartTvrView])
***
USE IN FrmPartTvrView
***
IF FILE(lcUniqueFilePath)
	ERASE (lcUniqueFilePath)
ENDIF
*------------------------------------------------------------------------------

*05.05.2004 01:35 -&gt;Ïåðå÷èòàåì Alias
IF TYPE([tnFrmID])==[N] AND !EMPTY(tnFrmID)
	
	*02.12.2004 16:48 -&gt;Ñîõðàíèì èäåíòèôèêàòîð äîêóìåíòà â ñâîéñòâå Grid-à
	.nFrmID = tnFrmID
	*------------------------------------------------------------------------------

	*21.04.2004 14:05 -&gt;Âûïîëíèì õðàíèìóþ ïðîöåäóðó äëÿ ïîëó÷åíèÿ äàííûõ
	lcUniqueName = spFrmPartTvrView([BYFRMID],tnFrmID)
	*------------------------------------------------------------------------------

ELSE
	
	*02.12.2004 16:48 -&gt;Ñîõðàíèì èäåíòèôèêàòîð äîêóìåíòà â ñâîéñòâå Grid-à
	.nFrmID = 0
	*------------------------------------------------------------------------------

	*21.04.2004 14:05 -&gt;Âûïîëíèì õðàíèìóþ ïðîöåäóðó äëÿ ïîëó÷åíèÿ òàáëèöû
	lcUniqueName = spFrmPartTvrView([NODATA])
	*------------------------------------------------------------------------------
	
ENDIF	
*------------------------------------------------------------------------------

*21.04.2004 14:08 -&gt;Òåïåðü îòêðîåì äàííûé Alias
USE (lcUniqueName) IN 0 ALIAS FrmPartTvrView
CURSORSETPROP([BUFFERING],3,[FrmPartTvrView])
*------------------------------------------------------------------------------
*05.05.2004 01:36 -&gt;Âîññòàíàâëèâàåì Alias
.SourceRecall()
*------------------------------------------------------------------------------
.SortClear()
ENDWITH
************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************
ENDPROC
PROCEDURE _rsrequeryone
*------------------------------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: grdPartTvr._RSRequeryOne
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;tnFrmPartTvrID&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Ïåðå÷èòûâàíèå îäíîé çàïèñè (òîâàðíîé ïîçèöèè äîêóìåíòà)
*------------------------------------------------------------------------------
LPARAMETERS tnFrmPartTvrID

*22.12.2004 15:10 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	lcOldAlias, ;
		lcUniqueFileName, ;
		laReplaceArray[1]
***
lcOldAlias = ALIAS()
*------------------------------------------------------------------------------

*12.05.2004 03:27 -&gt;Âûïîëíÿåì çàïðîñ ñòðîêè
lcUniqueFileName = spFrmPartTvrView([BYFRMPARTTVRID],This.nFrmID,tnFrmPartTvrID)
*------------------------------------------------------------------------------

*12.05.2004 03:35 -&gt;Îòêëþ÷àåì èñòî÷íèê äàííûõ
This.SourceKeep()
This.SourceReset()
*------------------------------------------------------------------------------

*22.12.2004 15:05 -&gt;Äîáàâëÿåì/îáíîâëÿåì/óäàëÿåì çàïèñü
USE (lcUniqueFileName) IN 0 ALIAS FrmPartTvrViewReq
SELECT FrmPartTvrViewReq
***
IF RECCOUNT([FrmPartTvrViewReq]) == 1
	*22.12.2004 15:10 -&gt;Îáíîâëÿåì çàïèñü
	SCATTER TO laReplaceArray
	SELECT FrmPartTvrView
	LOCATE FOR FrmPartTvrView.PartTvrID = tnFrmPartTvrID
	IF !FOUND()
		APPEND BLANK IN FrmPartTvrView
	ENDIF
	GATHER FROM laReplaceArray
	TABLEUPDATE(.T.)
	*------------------------------------------------------------------------------
ELSE
	SELECT FrmPartTvrView
	LOCATE FOR FrmPartTvrView.PartTvrID = tnFrmPartTvrID
	IF FOUND()
		*22.12.2004 15:11 -&gt;Óäàëÿåì çàïèñü
		DELETE IN FrmPartTvrView
		TABLEUPDATE(.T.)
		LOCATE REST
		*------------------------------------------------------------------------------
	ENDIF
ENDIF
*------------------------------------------------------------------------------

*12.05.2004 03:37 -&gt;Âîññòàíàâëèâàåì èñòî÷íèê äàííûõ
This.SourceRecall()
*------------------------------------------------------------------------------

*22.12.2004 15:09 -&gt;Óäàëÿåì ðåçóëüòàò çàïðîñà
USE IN FrmPartTvrViewReq
ERASE ([tmp\]+lcUniqueFileName+[.dbf])
*------------------------------------------------------------------------------

*22.12.2004 15:35 -&gt;Âîññòàíîâèì òåêóùèé Alias
IF !EMPTY(lcOldAlias) AND USED(lcOldAlias) AND lcOldAlias#ALIAS()
	SELECT(lcOldAlias)
ENDIF
*------------------------------------------------------------------------------

*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE Init
DODEFAULT()
This.SetAll([DynamicBackColor],[IIF(FrmPartTvrView.TvrPrcBuy = 0,RGB(116,181,245),RGB(255,255,255))],[COLUMN])
*This.Column4.DynamicBackColor = [IIF(FrmPartTvrView.TvrPrcBuy = 0,RGB(116,181,245),RGB(255,255,255))]
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1>Class</reserved1>
		<reserved2>19</reserved2>
		<reserved3>nfrmid &lt;public/runtime&gt; Èäåíòèôèêàòîð äîêóìåíòà, äëÿ êîòîðîãî îòîáðàæàþòñÿ òîâàðíûå ñòðîêè.
</reserved3>
		<reserved4/>
		<reserved5/>
		<reserved6>Pixels</reserved6>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18A02PAKD</uniqueid>
		<timestamp>946423943</timestamp>
		<class>header</class>
		<classloc/>
		<baseclass>header</baseclass>
		<objname>Header1</objname>
		<parent>grdparttvr.Column1</parent>
		<properties>Alignment = 2
Caption = "Òîâàð"
Name = "Header1"
</properties>
		<protected/>
		<methods>PROCEDURE DblClick
This.Parent.Parent.Sort(This.Parent.Name)
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18A02PAKE</uniqueid>
		<timestamp>0</timestamp>
		<class>txtgrd</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>Text1</objname>
		<parent>grdparttvr.Column1</parent>
		<properties>BorderStyle = 0
Margin = 0
ForeColor = 0,0,0
BackColor = 255,255,255
Name = "Text1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18A02PAKF</uniqueid>
		<timestamp>946423943</timestamp>
		<class>header</class>
		<classloc/>
		<baseclass>header</baseclass>
		<objname>Header1</objname>
		<parent>grdparttvr.Column2</parent>
		<properties>Alignment = 2
Caption = "Êîë-âî"
Name = "Header1"
</properties>
		<protected/>
		<methods>PROCEDURE DblClick
This.Parent.Parent.Sort(This.Parent.Name)
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18A02PAKN</uniqueid>
		<timestamp>0</timestamp>
		<class>txtgrd</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>Text1</objname>
		<parent>grdparttvr.Column2</parent>
		<properties>BorderStyle = 0
Margin = 0
ForeColor = 0,0,0
BackColor = 255,255,255
Name = "Text1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18A02PAKO</uniqueid>
		<timestamp>946423943</timestamp>
		<class>header</class>
		<classloc/>
		<baseclass>header</baseclass>
		<objname>Header1</objname>
		<parent>grdparttvr.Column3</parent>
		<properties>Alignment = 2
Caption = "Åä. èçì."
Name = "Header1"
</properties>
		<protected/>
		<methods>PROCEDURE DblClick
This.Parent.Parent.Sort(This.Parent.Name)
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18A02PAKP</uniqueid>
		<timestamp>0</timestamp>
		<class>txtgrd</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>Text1</objname>
		<parent>grdparttvr.Column3</parent>
		<properties>BorderStyle = 0
Margin = 0
ForeColor = 0,0,0
Name = "Text1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18A02PAKX</uniqueid>
		<timestamp>946423943</timestamp>
		<class>header</class>
		<classloc/>
		<baseclass>header</baseclass>
		<objname>Header1</objname>
		<parent>grdparttvr.Column4</parent>
		<properties>Alignment = 2
Caption = "Ö. ïîñò."
Name = "Header1"
</properties>
		<protected/>
		<methods>PROCEDURE DblClick
This.Parent.Parent.Sort(This.Parent.Name)
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18A02PAKY</uniqueid>
		<timestamp>0</timestamp>
		<class>txtgrd</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>Text1</objname>
		<parent>grdparttvr.Column4</parent>
		<properties>BorderStyle = 0
Margin = 0
ForeColor = 0,0,0
BackColor = (iif(this.value=0,'255,0,0,255','255,255'))
Name = "Text1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18A02PAKZ</uniqueid>
		<timestamp>946423943</timestamp>
		<class>header</class>
		<classloc/>
		<baseclass>header</baseclass>
		<objname>Header1</objname>
		<parent>grdparttvr.Column5</parent>
		<properties>Alignment = 2
Caption = "Ö. ïðîä."
Name = "Header1"
</properties>
		<protected/>
		<methods>PROCEDURE DblClick
This.Parent.Parent.Sort(This.Parent.Name)
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18A02PAL0</uniqueid>
		<timestamp>0</timestamp>
		<class>txtgrd</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>Text1</objname>
		<parent>grdparttvr.Column5</parent>
		<properties>BorderStyle = 0
Margin = 0
ForeColor = 0,0,0
BackColor = 255,255,255
Name = "Text1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18A02PAL1</uniqueid>
		<timestamp>946423943</timestamp>
		<class>header</class>
		<classloc/>
		<baseclass>header</baseclass>
		<objname>Header1</objname>
		<parent>grdparttvr.Column6</parent>
		<properties>Alignment = 2
Caption = "Ñóììà ïîñò."
Name = "Header1"
</properties>
		<protected/>
		<methods>PROCEDURE DblClick
This.Parent.Parent.Sort(This.Parent.Name)
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18A02PAL2</uniqueid>
		<timestamp>0</timestamp>
		<class>txtgrd</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>Text1</objname>
		<parent>grdparttvr.Column6</parent>
		<properties>BorderStyle = 0
Margin = 0
ForeColor = 0,0,0
BackColor = 255,255,255
Name = "Text1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18A02PAL7</uniqueid>
		<timestamp>946423943</timestamp>
		<class>header</class>
		<classloc/>
		<baseclass>header</baseclass>
		<objname>Header1</objname>
		<parent>grdparttvr.Column7</parent>
		<properties>Alignment = 2
Caption = "Ñóììà ïðîä."
Name = "Header1"
</properties>
		<protected/>
		<methods>PROCEDURE DblClick
This.Parent.Parent.Sort(This.Parent.Name)
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18A02PAL8</uniqueid>
		<timestamp>0</timestamp>
		<class>txtgrd</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>Text1</objname>
		<parent>grdparttvr.Column7</parent>
		<properties>BorderStyle = 0
Margin = 0
ForeColor = 0,0,0
BackColor = 255,255,255
Name = "Text1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2790R20S1</uniqueid>
		<timestamp>927687852</timestamp>
		<class>header</class>
		<classloc/>
		<baseclass>header</baseclass>
		<objname>Header1</objname>
		<parent>grdparttvr.Column8</parent>
		<properties>Alignment = 2
Caption = "Íàöåíêà"
Name = "Header1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2790R20S2</uniqueid>
		<timestamp>927687852</timestamp>
		<class>textbox</class>
		<classloc/>
		<baseclass>textbox</baseclass>
		<objname>Text1</objname>
		<parent>grdparttvr.Column8</parent>
		<properties>BorderStyle = 0
Margin = 0
ForeColor = 0,0,0
BackColor = 255,255,255
Name = "Text1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2790R20S3</uniqueid>
		<timestamp>927687852</timestamp>
		<class>header</class>
		<classloc/>
		<baseclass>header</baseclass>
		<objname>Header1</objname>
		<parent>grdparttvr.Column9</parent>
		<properties>Alignment = 2
Caption = "% íàöåíêè"
Name = "Header1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2790R20S4</uniqueid>
		<timestamp>927687852</timestamp>
		<class>textbox</class>
		<classloc/>
		<baseclass>textbox</baseclass>
		<objname>Text1</objname>
		<parent>grdparttvr.Column9</parent>
		<properties>BorderStyle = 0
Margin = 0
ForeColor = 0,0,0
BackColor = 255,255,255
Name = "Text1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>COMMENT</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>0</timestamp>
		<class/>
		<classloc/>
		<baseclass/>
		<objname>grdparttvr</objname>
		<parent/>
		<properties>Arial, 0, 9, 5, 15, 12, 32, 3, 0
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1YN0WTRV5</uniqueid>
		<timestamp>961303751</timestamp>
		<class>grdparttvr</class>
		<classloc>primarydoc_v1.vcx</classloc>
		<baseclass>grid</baseclass>
		<objname>grdpartord</objname>
		<parent/>
		<properties>Height = 215
Width = 850
Name = "grdpartord"
Column1.Header1.Name = "Header1"
Column1.Text1.Name = "Text1"
Column1.Name = "Column1"
Column2.Header1.Name = "Header1"
Column2.Text1.Name = "Text1"
Column2.Name = "Column2"
Column3.Header1.Name = "Header1"
Column3.Text1.Name = "Text1"
Column3.Name = "Column3"
Column4.Header1.Name = "Header1"
Column4.Text1.Name = "Text1"
Column4.Name = "Column4"
COLUMN5.Header1.Name = "Header1"
COLUMN5.Text1.Name = "Text1"
COLUMN5.Name = "COLUMN5"
COLUMN6.Header1.Name = "Header1"
COLUMN6.Text1.Name = "Text1"
COLUMN6.Name = "COLUMN6"
COLUMN7.Header1.Name = "Header1"
COLUMN7.Text1.Name = "Text1"
COLUMN7.Name = "COLUMN7"
COLUMN8.Header1.Name = "Header1"
COLUMN8.Text1.Name = "Text1"
COLUMN8.Name = "COLUMN8"
COLUMN9.Header1.Name = "Header1"
COLUMN9.Text1.Name = "Text1"
COLUMN9.Name = "COLUMN9"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1>Class</reserved1>
		<reserved2>1</reserved2>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6>Pixels</reserved6>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>COMMENT</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>0</timestamp>
		<class/>
		<classloc/>
		<baseclass/>
		<objname>grdpartord</objname>
		<parent/>
		<properties>Arial, 0, 9, 5, 15, 12, 32, 3, 0
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1YN0WTRV5</uniqueid>
		<timestamp>961303755</timestamp>
		<class>grdparttvrz</class>
		<classloc>primarydoc_v1.vcx</classloc>
		<baseclass>grid</baseclass>
		<objname>grdpartordz</objname>
		<parent/>
		<properties>Height = 215
Width = 853
Name = "grdpartordz"
Column1.Header1.Name = "Header1"
Column1.Text1.Name = "Text1"
Column1.Name = "Column1"
Column2.Header1.Name = "Header1"
Column2.Text1.Name = "Text1"
Column2.Name = "Column2"
Column3.Header1.Name = "Header1"
Column3.Text1.Name = "Text1"
Column3.Name = "Column3"
Column4.Header1.Name = "Header1"
Column4.Text1.Name = "Text1"
Column4.Name = "Column4"
COLUMN5.Header1.Name = "Header1"
COLUMN5.Text1.Name = "Text1"
COLUMN5.Name = "COLUMN5"
COLUMN6.Header1.Name = "Header1"
COLUMN6.Text1.Name = "Text1"
COLUMN6.Name = "COLUMN6"
COLUMN7.Header1.Name = "Header1"
COLUMN7.Text1.Name = "Text1"
COLUMN7.Name = "COLUMN7"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1>Class</reserved1>
		<reserved2>1</reserved2>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6>Pixels</reserved6>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>COMMENT</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>0</timestamp>
		<class/>
		<classloc/>
		<baseclass/>
		<objname>grdpartordz</objname>
		<parent/>
		<properties>Arial, 0, 9, 5, 15, 12, 32, 3, 0
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_17W0TTK68</uniqueid>
		<timestamp>961303779</timestamp>
		<class>frmview</class>
		<classloc>baseform_v1.vcx</classloc>
		<baseclass>form</baseclass>
		<objname>frmprimarydocview_rez20080422</objname>
		<parent/>
		<properties>Top = 0
Left = 0
Height = 472
Width = 700
DoCreate = .T.
_standarttoolbar = tlbstandart;basetoolbar_v1.vcx
_allowmultiple = .T.
_allowsaveandrestorelayout = .T.
Name = "frmprimarydocview_rez20080422"
cstmsghandler.Name = "cstmsghandler"
cstresizable.Name = "cstresizable"
Img1.Name = "Img1"
</properties>
		<protected/>
		<methods>PROCEDURE Activate
DODEFAULT()
WITH This
IF .lBeforeFirstShowExecuted
	.GrdDocsView.SetFocus()
	.lBeforeFirstShowExecuted = .f.
ENDIF
ENDWITH
ENDPROC
PROCEDURE Init
*-------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: PRIMARYDOC_VIEW.INIT
* Called by.......: &lt;Sys Event&gt;
* Parameters......: &lt;tnScrFrmID&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Èíèöèàëèçàöèÿ ôîðìû.
*-------------------------------------------------------
LPARAMETERS	tnScrFrmID

*05.05.2004 01:57 -&gt;Ìîäèôèöèðóåì èìÿ ôîðìû ñ ó÷åòîì åå èäåíòèôèêàòîðà
This.Name = This.Name + [_] + ALLTRIM(STR(tnScrFrmID))
*------------------------------------------------------------------------------

*04.05.2004 23:30 -&gt;Âûïîëíèì ìåòîä ðîäèòåëüñêîãî êëàññà
DODEFAULT()
*------------------------------------------------------------------------------

WITH This

*27.12.2004 17:13 -&gt;Âîññòàíîâèì ïàðàìåòðû Grid-îâ
.GrdDocsView.GridLayoutRestore()
*.GrdPart.GridLayoutRestore()
*------------------------------------------------------------------------------

*04.05.2004 23:16 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
PRIVATE	_PARAM	
*------------------------------------------------------------------------------

*04.05.2004 23:13 -&gt;Ñîõðàíèì èäåíòèôèêàòîð ôîðìû â ñâîéñòâå ôîðìû
.nScrFrmID = tnScrFrmID
*------------------------------------------------------------------------------

*******************************************************************************
*Ïîëó÷èì èíôîðìàöèþ î äîêóìåíòàõ, îòîáðàæàåìûõ íà äàííîé ôîðìå.
*******************************************************************************

*04.05.2004 23:17 -&gt;Îòêðîåì Alias ñ èíôîðìàöèåé î äîêóìåíòàõ, îòîáðàæàåìûõ íà äàííîé ôîðìå
_PARAM = .nScrFrmID
***
USE lvFrmTypeInfoByScrFrm IN 0
USE lvScrFrmInfo IN 0
*------------------------------------------------------------------------------

*07.05.2004 17:19 -&gt;Ïðèöåïèì èêîíêó è Caption
IF !ISNULL(lvScrFrmInfo.IcoFileNM) AND !EMPTY(lvScrFrmInfo.IcoFileNM) AND FILE(lvScrFrmInfo.IcoFileNM)
	.Icon = FULLPATH(lvScrFrmInfo.IcoFileNM)
ENDIF
***
.Caption = lvScrFrmInfo.ScrFrmNM
*------------------------------------------------------------------------------

*04.05.2004 23:18 -&gt;Çàïîëíèì çàãîëîâêè êîëîíîê òî÷åê èñïîëíåíèÿ
.GrdDocsView.Column6.Header1.Caption = ALLTRIM(lvFrmTypeInfoByScrFrm.PointEmiRoleNM)
.GrdDocsView.Column7.Header1.Caption = ALLTRIM(lvFrmTypeInfoByScrFrm.PointIspRoleNM)
*------------------------------------------------------------------------------

*04.05.2004 23:17 -&gt;Îòêðîåì Alias ñ èíôîðìàöèåé î äîêóìåíòàõ, îòîáðàæàåìûõ íà äàííîé ôîðìå
USE lvCstFuncAllByScrFrm IN 0
SELECT lvCstFuncAllByScrFrm

*25.05.2004 23:11 -&gt;Çàãðóçèì ôèëüòðû äëÿ òåêóùåé ôîðìû
.cntQueryParam.ParamObjectCreate(__QPOTYPE_SCRFRM,.nScrFrmID)
*------------------------------------------------------------------------------

*******************************************************************************
*
*******************************************************************************

SELECT lvCstFuncAllByScrFrm
***
IF RECCOUNT([lvCstFuncAllByScrFrm])&gt;0
	*06.12.2004 16:09 -&gt;Óêàçûâàåì ïàíåëü èíñòðóìåíòîâ äëÿ CustomFunction's
	._CustomToolBar = [tlbCustomFunc;PrimaryDoc_v1;PrimaryDoc.app]
	._CustomToolBarInstanceNM = [tlbCustomFunc_] + ALLTRIM(STR(.nScrFrmID))
	._CustomToolBarParamString = ALLTRIM(STR(.nScrFrmID))
	*------------------------------------------------------------------------------
	
	*06.12.2004 16:14 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
	LOCAL	lcLastGrpID
	***
	lcLastGrpID = [NONE]
	*------------------------------------------------------------------------------
	*06.12.2004 16:13 -&gt;Äîáàâëÿåì _HandledCustomMsg
	SCAN
		IF (lcLastGrpID # [NONE]) AND lcLastGrpID # ALLTRIM(lvCstFuncAllByScrFrm.CstFuncGrp)
			.GrdDocsView._HandledCustomMsgList = .GrdDocsView._HandledCustomMsgList + [;]
			.GrdDocsView._HandledCustomMsgPromptList = .GrdDocsView._HandledCustomMsgPromptList + [;\-]
		ENDIF
		***	
		.GrdDocsView._HandledCustomMsgList = .GrdDocsView._HandledCustomMsgList + IIF(EMPTY(.GrdDocsView._HandledCustomMsgList),ALLTRIM(lvCstFuncAllByScrFrm.CstFuncMsg),[;]+ALLTRIM(lvCstFuncAllByScrFrm.CstFuncMsg))
		.GrdDocsView._HandledCustomMsgPromptList = .GrdDocsView._HandledCustomMsgPromptList + IIF(EMPTY(.GrdDocsView._HandledCustomMsgPromptList),ALLTRIM(lvCstFuncAllByScrFrm.CstFuncNM),[;]+ALLTRIM(lvCstFuncAllByScrFrm.CstFuncNM))
		***
		lcLastGrpID = ALLTRIM(CstFuncGrp)
	ENDSCAN
	*------------------------------------------------------------------------------
ENDIF
*------------------------------------------------------------------------------
ENDWITH

************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************
ENDPROC
PROCEDURE Load
*-------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: FRMPRIMARYDOCVIEW.LOAD
* Called by.......: &lt;Sys Event&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Îòêðûòèå ôîðìû (çàãðóçêà äàííûõ)
*-------------------------------------------------------
*04.05.2004 19:46 -&gt;Âûïîëíèì ìåòîä ðîäèòåëüñêîãî êëàññà
DODEFAULT()
*----------------------------------------------------------------------------

*21.04.2004 14:06 -&gt;Îòêðîåì ÁÄ
IF !DBUSED([BASIS])
	OPEN DATABASE BASIS
ENDIF
SET DATABASE TO BASIS	
*------------------------------------------------------------------------------

*******************************************************************************
* Çàãðóçèì ïóñòîé Alias äëÿ ïðîñìîòðà äîêóìåíòîâ                              *
*******************************************************************************

*02.12.2004 16:59 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	lcUniqueName
*------------------------------------------------------------------------------

*21.04.2004 14:05 -&gt;Âûïîëíèì õðàíèìóþ ïðîöåäóðó äëÿ ïîëó÷åíèÿ ïóñòîé òàáëèöû
lcUniqueName = spPrimaryDocView([NODATA])
*------------------------------------------------------------------------------

*21.04.2004 14:08 -&gt;Òåïåðü îòêðîåì äàííûé Alias
USE (lcUniqueName) IN 0 ALIAS PrimaryDocView
CURSORSETPROP([BUFFERING],3,[PrimaryDocView])
*------------------------------------------------------------------------------

************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************
ENDPROC
PROCEDURE setstatus
LPARAMETERS lSetStatus
LOCAL	llResult, oldRecNo, _PARAM
***
*------------------------------------------------------------------------------
IF RECCOUNT('PrimaryDocView')&lt;1
RETU
ENDIF
SELECT PrimaryDocView
oldRecNo = RECNO([PrimaryDocView])

*12.05.2004 01:18 -&gt; Îòêðîåì ñïðàâî÷íèêè
IF USED('lvFrmStatusList')
USE IN lvFrmStatusList
ENDIF
_PARAM = oApp.nUserKod
USE lvFrmStatusList IN 0
SELECT lvFrmStatusList
LOCATE ALL FOR lvFrmStatusList.FrmStatId = lSetStatus AND lvFrmStatusList.IsEnabled

IF !FOUND()
MESSAGEBOX([Âû íå ìîæåòå ðàáîòàòü ñ ýòèì ñòàòóñîì],0+16,[Ðàáîòà çàïðåùåíà])
USE IN lvFrmStatusList
RETU
ENDIF
USE IN lvFrmStatusList
USE lvFrmEdit IN 0 NODATA
CURSORSETPROP([BUFFERING],3,[lvFrmEdit])
SELECT PrimaryDocView
LOCATE ALL FOR PrimaryDocView._Mark

IF FOUND() AND ;
MESSAGEBOX([Ìåíÿòü ñòàòóñ ïîìå÷åíûõ äîêóìåíòîâ?],4+16+256,[Âû óâåðåíû?])=6
	GO top
	SCAN ALL FOR PrimaryDocView._Mark
		_PARAM = PrimaryDocView.FrmId
		REQUERY([lvFrmEdit])
		*20.01.2004 20:24 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
		*------------------------------------------------------------------------------
REPLACE lvFrmEdit.FrmStatusId WITH lSetStatus
		*20.01.2004 20:26 -&gt; Ñîõðàíèì ïåðåäàííûé alias
		IF _spUpdateStampAndUser([lvFrmEdit],oApp.nUserKod)
			llResult = TABLEUPDATE(1,.T.,[lvFrmEdit])
		ELSE
			llResult = .F.
		ENDIF
		SELECT PrimaryDocView
*------------------------------------------------------------------------------
	ENDSCAN
		            ThisForm.GrdDocsView._RSRequery()
ELSE

		SELECT PrimaryDocView
		GO oldRecNo IN PrimaryDocView

		IF PrimaryDocView.StatusID&lt;&gt;lSetStatus  AND  ;
		           MESSAGEBOX([Ìåíÿòü ñòàòóñ äîêóìåíòà?],4+16+256,[Âû óâåðåíû?])=6
		
				_PARAM = PrimaryDocView.FrmId
				REQUERY([lvFrmEdit])
				*20.01.2004 20:24 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
				*------------------------------------------------------------------------------
		        REPLACE lvFrmEdit.FrmStatusId WITH lSetStatus
				*20.01.2004 20:26 -&gt; Ñîõðàíèì ïåðåäàííûé alias
				IF _spUpdateStampAndUser([lvFrmEdit],oApp.nUserKod)
					llResult = TABLEUPDATE(1,.T.,[lvFrmEdit])
		            ThisForm.GrdDocsView._RSRequeryOne(_PARAM ,.T.)
				ELSE
					llResult = .F.
				ENDIF
				*------------------------------------------------------------------------------

		ENDIF

ENDIF

USE IN lvFrmEdit

SELECT PrimaryDocView
GO oldRecNo IN PrimaryDocView
ENDPROC
PROCEDURE totalinfo
*------------------------------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: PrimaryDoc_v1.vcx
* Class.Module....: FRMPRIMARYDOCVIEW.TOTALINFO
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Ðàñ÷åò ñóìì ïî äîêóìåíòàì
*------------------------------------------------------------------------------

*10.10.2005 16:16 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL   lnCount, ;
		lnSum, ;
		lnVatSum,;
		lnMCount, ;
		lnMSum, ;
		lnMVatSum,;
		lnOldRecno,;
		lcDispStr
		
lnOldRecno = RECNO('PrimaryDocView')
*------------------------------------------------------------------------------

*19.08.2005 17:18 -&gt;Ïîäñ÷èòàåì ñóììû âñåõ äîêóìåíòîâ â âûáîðêå
SELECT ;
	COUNT(FrmSum)	AS Count,;
	SUM(FrmSum*FrmSign)		AS Sum,;
	SUM(FrmVATSum*FrmSign)	AS VatSum ;
FROM PrimaryDocView ;
INTO CURSOR curTotalInfo
***
lnCount		= curTotalInfo.Count
lnSum		= curTotalInfo.Sum
lnVatSum	= curTotalInfo.VatSum
***
USE IN IIF(USED([curTotalInfo]),[curTotalInfo],0)
*------------------------------------------------------------------------------
*03.09.2005 09:17 -&gt;Îáíîâèì ñ÷¸ò÷èêè
*!*	ThisForm.cntSum.txtDocumentCount.Value  = lnCount
*!*	ThisForm.cntSum.txtDocumentSum.Value	= lnSum
*!*	ThisForm.cntSum.txtDocumentVatSum.Value	= lnVatSum
lcDispStr =   'Âûáðàíî Äîêóìåíòîâ:     '+ALLTRIM(STR(lnCount,14,0))+;
'    íà Ñóììó:     '+ ALLTRIM(STR(lnSum,14,2))+;
'    â ò.÷. ÍÄÑ:     '+ALLTRIM(STR(lnVatSum,14,2))
*------------------------------------------------------------------------------
*15.01.2006 17:18 -&gt;Ïîäñ÷èòàåì ñóììû ïîìå÷åíûõ äîêóìåíòîâ â âûáîðêå
SELECT PrimaryDocView
LOCATE FOR _mark
IF FOUND()
	SELECT ;
		COUNT(FrmSum)	AS Count,;
		SUM(FrmSum*FrmSign)		AS Sum,;
		SUM(FrmVATSum*FrmSign)	AS VatSum ;
	FROM PrimaryDocView WHERE _mark ;
	INTO CURSOR curTotalInfo
	***
	lnMCount		= curTotalInfo.Count
	lnMSum		= curTotalInfo.Sum
	lnMVatSum	= curTotalInfo.VatSum
	***
lcDispStr ='Âûáðàíî Äîêóìåíòîâ (ïîìå÷åíî):     '+ALLTRIM(STR(lnCount,14,0))+'  ('+ALLTRIM(STR(lnMCount,14,0))+;
')    íà Ñóììó:     '+ ALLTRIM(STR(lnSum,14,2))+'  ('+ALLTRIM(STR(lnMSum,14,2))+;
')    â ò.÷. ÍÄÑ:     '+ALLTRIM(STR(lnVatSum,14,2))+'  ('+ALLTRIM(STR(lnMVatSum,14,2))+')'
	USE IN IIF(USED([curTotalInfo]),[curTotalInfo],0)
	*------------------------------------------------------------------------------
*!*		ThisForm.cntSum.txtDocumentCountMark.Value  = lnMCount
*!*		ThisForm.cntSum.txtDocumentSumMark.Value	= lnMSum
*!*		ThisForm.cntSum.txtDocumentVatSumMark.Value	= lnMVatSum
*!*		*------------------------------------------------------------------------------
*!*		ThisForm.cntSum.txtDocumentCountMark.Visible  = .t.
*!*		ThisForm.cntSum.txtDocumentSumMark.Visible    = .t.
*!*		ThisForm.cntSum.txtDocumentVatSumMark.Visible = .t.
	*------------------------------------------------------------------------------
ELSE
*!*		ThisForm.cntSum.txtDocumentCountMark.Visible  = .f.
*!*		ThisForm.cntSum.txtDocumentSumMark.Visible    = .f.
*!*		ThisForm.cntSum.txtDocumentVatSumMark.Visible = .f.
	*------------------------------------------------------------------------------
ENDIF
ThisForm.cntSum.txtDocumentCount.Value  = lcDispStr
SELECT PrimaryDocView

IF lnOldRecno&gt;RECCOUNT('PrimaryDocView')
IF RECCOUNT('PrimaryDocView')=0
RETURN
ENDIF
GO RECCOUNT('PrimaryDocView')
ELSE
GO lnOldRecno
ENDIF
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE Unload
*-------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: FRMPRIMARYDOCVIEW.UNLOAD
* Called by.......: &lt;Sys Event&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: &lt;sysevent&gt; Âûãðóçêà ôîðìû
*-------------------------------------------------------

*04.05.2004 19:46 -&gt;Âûïîëíèì ìåòîä ðîäèòåëüñêîãî êëàññà
DODEFAULT()
*----------------------------------------------------------------------------

*****************************************************************************
* Çàêðîåì Alias äëÿ ïðîñìîòðà äîêóìåíòîâ è óäàëèì âðåìåííóþ òàáëèöó         *
*****************************************************************************

*27.05.2004 17:57 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	lcUniqueFilePath
*------------------------------------------------------------------------------

*27.05.2004 17:53 -&gt;Çàêðîåì Alias è óäàëèì âðåìåííóþ òàáëèöó
lcUniqueFilePath = DBF([PrimaryDocView])
***
USE IN PrimaryDocView
***
IF FILE(lcUniqueFilePath)
	ERASE (lcUniqueFilePath)
ENDIF
*------------------------------------------------------------------------------

************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************


ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1>Class</reserved1>
		<reserved2>17</reserved2>
		<reserved3>nscrfrmid &lt;prtected/runtime&gt; Èäåíòèôèêàòîð ýêðàííîé ôîðìû.
*totalinfo 
*setstatus Óñòàíàâëèâàåì ñòàòóñ ó äîêóìåíòà èëè ó ïîìå÷åíûõ äîêóìåíòîâ
</reserved3>
		<reserved4/>
		<reserved5/>
		<reserved6>Pixels</reserved6>
		<reserved7/>
		<reserved8>..\include\qryparparobjtypes.h</reserved8>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_R020K4VL1</uniqueid>
		<timestamp>961303779</timestamp>
		<class>cmd</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd1</objname>
		<parent>frmprimarydocview_rez20080422</parent>
		<properties>Top = 441
Left = 597
Caption = "Îáíîâèòü"
ZOrderSet = 3
Name = "Cmd1"
</properties>
		<protected/>
		<methods>PROCEDURE Click
*11.08.2006 13:01 -&gt;Ïîêàæåì ñîîáùåíèå
WAIT WINDOW [Èäåò îáíîâëåíèå äàííûõ. Æäèòå...] NOWAIT NOCLEAR
SET MESSAGE TO [Èäåò îáíîâëåíèå äàííûõ. Æäèòå...]
*------------------------------------------------------------------------------

*11.08.2006 13:02 -&gt;Îáíîâèì äàííûå
ThisForm.cntQueryParam.QueryParamSet()
ThisForm.GrdDocsView._RSRequery()
*------------------------------------------------------------------------------

*11.08.2006 13:02 -&gt;Óáåðåì ñîîáùåíèå
WAIT CLEAR
SET MESSAGE TO []
*------------------------------------------------------------------------------

*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1EA0UX0GM</uniqueid>
		<timestamp>949245236</timestamp>
		<class>grdformview</class>
		<classloc>primarydoc_v1.vcx</classloc>
		<baseclass>grid</baseclass>
		<objname>GrdDocsView</objname>
		<parent>frmprimarydocview_rez20080422</parent>
		<properties>Left = 5
ReadOnly = .F.
Top = 5
ZOrderSet = 4
Name = "GrdDocsView"
Column1.Header1.Name = "Header1"
Column1.ReadOnly = .F.
Column1.Name = "Column1"
Column2.Header1.Name = "Header1"
Column2.CurrentControl = ""
Column2.ReadOnly = .F.
Column2.Name = "Column2"
Column3.Header1.Name = "Header1"
Column3.Text1.ReadOnly = .F.
Column3.Text1.Name = "Text1"
Column3.ReadOnly = .F.
Column3.Name = "Column3"
Column4.Header1.Name = "Header1"
Column4.Text1.ReadOnly = .F.
Column4.Text1.Name = "Text1"
Column4.ReadOnly = .F.
Column4.Name = "Column4"
Column5.Header1.Name = "Header1"
Column5.Text1.ReadOnly = .F.
Column5.Text1.Name = "Text1"
Column5.ReadOnly = .F.
Column5.Name = "Column5"
Column6.Header1.Name = "Header1"
Column6.Text1.ReadOnly = .F.
Column6.Text1.Name = "Text1"
Column6.ReadOnly = .F.
Column6.Name = "Column6"
Column7.Header1.Name = "Header1"
Column7.Text1.ReadOnly = .F.
Column7.Text1.Name = "Text1"
Column7.ReadOnly = .F.
Column7.Name = "Column7"
Column8.Header1.Name = "Header1"
Column8.Text1.ReadOnly = .F.
Column8.Text1.Name = "Text1"
Column8.ReadOnly = .F.
Column8.Name = "Column8"
Column9.Header1.Name = "Header1"
Column9.Text1.ReadOnly = .F.
Column9.Text1.Name = "Text1"
Column9.ReadOnly = .F.
Column9.Name = "Column9"
Column10.Header1.Name = "Header1"
Column10.Text1.ReadOnly = .F.
Column10.Text1.Name = "Text1"
Column10.ReadOnly = .F.
Column10.Name = "Column10"
COLUMN11.Header1.Name = "Header1"
COLUMN11.Text1.ReadOnly = .F.
COLUMN11.Text1.Name = "Text1"
COLUMN11.ReadOnly = .F.
COLUMN11.Name = "COLUMN11"
</properties>
		<protected/>
		<methods>PROCEDURE _rsrequery
*19.08.2005 17:17 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	lcOldAlias, ;
		lcOldTalk, ;
		lnCount, ;
		lnSum, ;
		lnVatSum
***
lcOldAlias = ALIAS()
lcOldTalk  = SET([TALK])
***
SET TALK OFF
*------------------------------------------------------------------------------

*19.08.2005 17:16 -&gt;Âûïîëíèì ìåòîä ðîäèòåëüñêîãî êëàññà
DODEFAULT()
*------------------------------------------------------------------------------

*19.08.2005 17:18 -&gt;Ïîäñ÷èòàåì ñóììû
ThisForm.TotalInfo()
*------------------------------------------------------------------------------

*19.08.2005 17:22 -&gt;Âîññòàíîâèì íàñòðîéêè
SET TALK &amp;lcOldTalk
*------------------------------------------------------------------------------

*19.08.2005 17:23 -&gt;Âîññòàíîâèì òåêóùèé Alias
*!*	IF !EMPTY(lcOldAlias) AND USED(lcOldAlias) AND lcOldAlias#ALIAS()
*!*		SELECT(lcOldAlias)
*!*	ENDIF
*------------------------------------------------------------------------------
SELECT PrimaryDocView
this.Refresh()
this.refreshruntimeprops()
this.refreshrsstate()
*this.SetFocus()
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************

ENDPROC
PROCEDURE _rsrequeryone
LPARAMETERS tnFrmID,tlNoRefreshRelatedObjects

*19.08.2005 17:16 -&gt;Âûïîëíèì ìåòîä ðîäèòåëüñêîãî êëàññà
DODEFAULT(tnFrmID,tlNoRefreshRelatedObjects)
*------------------------------------------------------------------------------

*19.08.2005 17:17 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	lcOldAlias, ;
		lcOldTalk, ;
		lnCount, ;
		lnSum, ;
		lnVatSum
***
lcOldAlias = ALIAS()
lcOldTalk  = SET([TALK])
***
SET TALK OFF
*------------------------------------------------------------------------------

*19.08.2005 17:18 -&gt;Ïîäñ÷èòàåì ñóììû
ThisForm.TotalInfo()
*------------------------------------------------------------------------------

*19.08.2005 17:22 -&gt;Âîññòàíîâèì íàñòðîéêè
SET TALK &amp;lcOldTalk
*------------------------------------------------------------------------------

*19.08.2005 17:23 -&gt;Âîññòàíîâèì òåêóùèé Alias
IF !EMPTY(lcOldAlias) AND USED(lcOldAlias) AND lcOldAlias#ALIAS()
	SELECT(lcOldAlias)
ENDIF
*------------------------------------------------------------------------------

*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************

ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1EA0UX0GN</uniqueid>
		<timestamp>0</timestamp>
		<class>txtgrd</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>Text1</objname>
		<parent>frmprimarydocview_rez20080422.GrdDocsView.Column1</parent>
		<properties>BorderStyle = 0
Margin = 0
ReadOnly = .F.
ForeColor = 0,0,0
BackColor = 255,255,255
Name = "Text1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18U1DR4A8</uniqueid>
		<timestamp>961303779</timestamp>
		<class>cntqueryparam</class>
		<classloc>queryparamio_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>cntQueryParam</objname>
		<parent>frmprimarydocview_rez20080422</parent>
		<properties>Top = 237
Left = 360
Width = 340
Height = 72
ZOrderSet = 5
Name = "cntQueryParam"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1ON0OZRBZ</uniqueid>
		<timestamp>961303779</timestamp>
		<class>cntfrmstatusinfo</class>
		<classloc>primarydoc_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>Cntfrmstatusinfo1</objname>
		<parent>frmprimarydocview_rez20080422</parent>
		<properties>Top = 440
Left = 5
ZOrderSet = 6
Name = "Cntfrmstatusinfo1"
ShpFrmStatusInfo.Name = "ShpFrmStatusInfo"
lblStatusID.Top = 5
lblStatusID.Name = "lblStatusID"
shpStatusID1.Top = 5
shpStatusID1.Left = 151
shpStatusID1.Height = 17
shpStatusID1.Width = 81
shpStatusID1.Name = "shpStatusID1"
lblStatusID1.AutoSize = .F.
lblStatusID1.FontBold = .T.
lblStatusID1.Alignment = 2
lblStatusID1.BackStyle = 0
lblStatusID1.Left = 151
lblStatusID1.Top = 5
lblStatusID1.Width = 81
lblStatusID1.Name = "lblStatusID1"
shpStatusID2.Top = 5
shpStatusID2.Left = 240
shpStatusID2.Width = 81
shpStatusID2.Name = "shpStatusID2"
lblStatusID2.AutoSize = .F.
lblStatusID2.FontBold = .T.
lblStatusID2.Alignment = 2
lblStatusID2.BackStyle = 0
lblStatusID2.Left = 240
lblStatusID2.Top = 5
lblStatusID2.Width = 81
lblStatusID2.Name = "lblStatusID2"
shpStatusID3.Top = 5
shpStatusID3.Left = 329
shpStatusID3.Width = 81
shpStatusID3.Name = "shpStatusID3"
lblStatusID3.AutoSize = .F.
lblStatusID3.FontBold = .T.
lblStatusID3.Alignment = 2
lblStatusID3.BackStyle = 0
lblStatusID3.Left = 329
lblStatusID3.Top = 5
lblStatusID3.Width = 81
lblStatusID3.Name = "lblStatusID3"
shpStatusID4.Left = 418
shpStatusID4.Width = 81
shpStatusID4.Name = "shpStatusID4"
lblStatusID4.AutoSize = .F.
lblStatusID4.FontBold = .T.
lblStatusID4.Alignment = 2
lblStatusID4.BackStyle = 0
lblStatusID4.Left = 418
lblStatusID4.Top = 5
lblStatusID4.Width = 81
lblStatusID4.Name = "lblStatusID4"
</properties>
		<protected/>
		<methods>PROCEDURE lblStatusID1.Click
thisform.setstatus(1)
ENDPROC
PROCEDURE lblStatusID2.Click
thisform.setstatus(2)
ENDPROC
PROCEDURE lblStatusID3.Click
thisform.setstatus(3)
ENDPROC
PROCEDURE lblStatusID4.Click
thisform.setstatus(4)
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1LH11FMQ9</uniqueid>
		<timestamp>0</timestamp>
		<class>math</class>
		<classloc>math_v1.vcx</classloc>
		<baseclass>custom</baseclass>
		<objname>math</objname>
		<parent>frmprimarydocview_rez20080422</parent>
		<properties>Top = 1
Left = 49
Name = "math"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18I0M4ORT</uniqueid>
		<timestamp>961303779</timestamp>
		<class>cnt</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>cntSum</objname>
		<parent>frmprimarydocview_rez20080422</parent>
		<properties>Top = 216
Left = 12
Width = 684
Height = 20
BorderWidth = 0
ZOrderSet = 7
Name = "cntSum"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_R020K4VL1</uniqueid>
		<timestamp>961303779</timestamp>
		<class>shp</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>shape</baseclass>
		<objname>Shp2</objname>
		<parent>frmprimarydocview_rez20080422.cntSum</parent>
		<properties>Top = 1
Left = 0
Height = 31
Width = 458
Enabled = .F.
Visible = .F.
SpecialEffect = 0
ZOrderSet = 0
Name = "Shp2"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>961303779</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblDocumentCountCaption</objname>
		<parent>frmprimarydocview_rez20080422.cntSum</parent>
		<properties>Caption = "Äîêóìåíòîâ:"
Enabled = .F.
Height = 17
Left = 4
Top = 11
Visible = .F.
ZOrderSet = 1
Name = "lblDocumentCountCaption"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_18I0M4ORT</uniqueid>
		<timestamp>924450866</timestamp>
		<class>txt</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>txtDocumentCount</objname>
		<parent>frmprimarydocview_rez20080422.cntSum</parent>
		<properties>FontBold = .T.
FontSize = 8
Alignment = 1
Value =  
Enabled = .F.
Height = 22
InputMask = ""
Left = 2
SpecialEffect = 0
Top = -3
Width = 682
DisabledForeColor = 0,0,0
ZOrderSet = 3
NullDisplay = "â ýòîì çàïðîñå äîêóìåíòîâ íåò"
Name = "txtDocumentCount"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1PL11LKXR</uniqueid>
		<timestamp>924433896</timestamp>
		<class>txt</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>txtDocumentVatSumMark</objname>
		<parent>frmprimarydocview_rez20080422.cntSum</parent>
		<properties>FontSize = 8
Alignment = 1
BorderStyle = 0
Value = 0.00
Enabled = .F.
Height = 17
InputMask = "999 999 999 999.99"
Left = 375
SpecialEffect = 0
Top = 14
Visible = .F.
Width = 83
DisabledForeColor = 0,0,0
ZOrderSet = 9
NullDisplay = " "
Name = "txtDocumentVatSumMark"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_R020K4VL1</uniqueid>
		<timestamp>924433896</timestamp>
		<class>txt</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>txtDocumentSum</objname>
		<parent>frmprimarydocview_rez20080422.cntSum</parent>
		<properties>FontSize = 8
Alignment = 1
BorderStyle = 0
Value = 0.00
Enabled = .F.
Height = 17
InputMask = "999 999 999 999.99"
Left = 204
SpecialEffect = 0
Top = 13
Visible = .F.
Width = 122
DisabledForeColor = 0,0,0
ZOrderSet = 5
NullDisplay = " "
Name = "txtDocumentSum"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>924433896</timestamp>
		<class>txt</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>txtDocumentVatSum</objname>
		<parent>frmprimarydocview_rez20080422.cntSum</parent>
		<properties>FontSize = 8
Alignment = 1
BorderStyle = 0
Value = 0.00
Enabled = .F.
Height = 17
InputMask = "999 999 999 999.99"
Left = 336
SpecialEffect = 0
Top = 13
Visible = .F.
Width = 122
DisabledForeColor = 0,0,0
ZOrderSet = 6
NullDisplay = " "
Name = "txtDocumentVatSum"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1PL11LKXP</uniqueid>
		<timestamp>924433896</timestamp>
		<class>txt</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>txtDocumentCountMark</objname>
		<parent>frmprimarydocview_rez20080422.cntSum</parent>
		<properties>FontSize = 8
Alignment = 1
BorderStyle = 0
Value = 0
Enabled = .F.
Height = 17
InputMask = "999 999"
Left = 124
SpecialEffect = 0
Top = 14
Visible = .F.
Width = 86
DisabledForeColor = 0,0,0
ZOrderSet = 7
NullDisplay = "â ýòîì çàïðîñå äîêóìåíòîâ íåò"
Name = "txtDocumentCountMark"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1PL12I2J8</uniqueid>
		<timestamp>961303779</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>Lbl1</objname>
		<parent>frmprimarydocview_rez20080422.cntSum</parent>
		<properties>Caption = "ïîìå÷åíî:"
Enabled = .F.
Height = 17
Left = 14
Top = 14
Visible = .F.
Width = 62
ZOrderSet = 10
Name = "Lbl1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1PL11LKXQ</uniqueid>
		<timestamp>924433896</timestamp>
		<class>txt</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>txtDocumentSumMark</objname>
		<parent>frmprimarydocview_rez20080422.cntSum</parent>
		<properties>FontSize = 8
Alignment = 1
BorderStyle = 0
Value = 0.00
Enabled = .F.
Height = 17
InputMask = "999 999 999 999.99"
Left = 224
SpecialEffect = 0
Top = 14
Visible = .F.
Width = 102
DisabledForeColor = 0,0,0
ZOrderSet = 8
NullDisplay = " "
Name = "txtDocumentSumMark"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>COMMENT</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>0</timestamp>
		<class/>
		<classloc/>
		<baseclass/>
		<objname>frmprimarydocview_rez20080422</objname>
		<parent/>
		<properties>Arial, 0, 9, 5, 15, 12, 32, 3, 0
Arial, 1, 8, 5, 14, 11, 29, 3, 0
Arial, 0, 8, 5, 14, 11, 29, 3, 0
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1></reserved1>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
</VFPData>
