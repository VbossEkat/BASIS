<?xml version = "1.0" encoding="UTF-8" standalone="yes"?>
<VFPData>
	<record>
		<platform>COMMENT</platform>
		<uniqueid>Class</uniqueid>
		<timestamp>0</timestamp>
		<class/>
		<classloc/>
		<baseclass/>
		<objname/>
		<parent/>
		<properties/>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1>VERSION =   3.00</reserved1>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1RY0N4UD0</uniqueid>
		<timestamp>882011901</timestamp>
		<class>grdmenuview</class>
		<classloc>pos_v1.vcx</classloc>
		<baseclass>grid</baseclass>
		<objname>grdmenuview</objname>
		<parent/>
		<properties>Height = 580
RowHeight = (ROUND(580/8,0))
ScrollBars = 2
Name = "grdmenuview"
Column1.Header1.Name = "Header1"
Column1.Edt1._highlightself = .F.
Column1.Edt1.Name = "Edt1"
Column1.Name = "Column1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1>Class</reserved1>
		<reserved2>1</reserved2>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6>Pixels</reserved6>
		<reserved7>êíîïêè ìåíþ áûñòðîãî äîñòóïà</reserved7>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>COMMENT</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>0</timestamp>
		<class/>
		<classloc/>
		<baseclass/>
		<objname>grdmenuview</objname>
		<parent/>
		<properties>Arial, 0, 9, 5, 15, 12, 32, 3, 0
Arial, 1, 11, 7, 18, 14, 39, 4, 0
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1RZ0ZZVSE</uniqueid>
		<timestamp>882072490</timestamp>
		<class>img</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>image</baseclass>
		<objname>imgtable</objname>
		<parent/>
		<properties>Picture = ..\graphic\t1.bmp
Stretch = 2
Height = 73
Width = 98
Name = "imgtable"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1>Class</reserved1>
		<reserved2>1</reserved2>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6>Pixels</reserved6>
		<reserved7>èçîáðàæåíèå ñòîëà</reserved7>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>COMMENT</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>0</timestamp>
		<class/>
		<classloc/>
		<baseclass/>
		<objname>imgtable</objname>
		<parent/>
		<properties/>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1SG0NUEC5</uniqueid>
		<timestamp>887319937</timestamp>
		<class>login</class>
		<classloc>pos.vcx</classloc>
		<baseclass>form</baseclass>
		<objname>login</objname>
		<parent/>
		<properties>Height = 203
Width = 379
ShowWindow = 1
DoCreate = .T.
BorderStyle = 3
Name = "login"
Shp1.Top = 120
Shp1.Left = 41
Shp1.Name = "Shp1"
cstmsghandler.Top = 115
cstmsghandler.Left = 36
cstmsghandler.Name = "cstmsghandler"
cstresizable.Top = 115
cstresizable.Left = 58
cstresizable.Name = "cstresizable"
cntcancelsavehandled.cmdCancel.Name = "cmdCancel"
cntcancelsavehandled.cmdOk.Name = "cmdOk"
cntcancelsavehandled.Top = 165
cntcancelsavehandled.Left = 146
cntcancelsavehandled.Name = "cntcancelsavehandled"
cstdatawork.Top = 115
cstdatawork.Left = 80
cstdatawork.Name = "cstdatawork"
txtPassword.Left = 146
txtPassword.Top = 125
txtPassword.Name = "txtPassword"
lblPassword.Left = 46
lblPassword.Top = 128
lblPassword.Name = "lblPassword"
Olecommprox1.Top = 152
Olecommprox1.Left = 43
Olecommprox1.Height = 38
Olecommprox1.Width = 37
Olecommprox1.Name = "Olecommprox1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1>Class</reserved1>
		<reserved2>2</reserved2>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6>Pixels</reserved6>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1U00R6MO9</uniqueid>
		<timestamp>887319937</timestamp>
		<class>img</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>image</baseclass>
		<objname>Img1</objname>
		<parent>login</parent>
		<properties>Picture = ..\graphic\login.bmp
Height = 80
Left = 8
Top = 12
Width = 350
Name = "Img1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>COMMENT</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>0</timestamp>
		<class/>
		<classloc/>
		<baseclass/>
		<objname>login</objname>
		<parent/>
		<properties>Arial, 0, 9, 5, 15, 12, 32, 3, 0
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1S802IZ6O</uniqueid>
		<timestamp>887321259</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblwaiter</objname>
		<parent/>
		<properties>AutoSize = .T.
FontBold = .T.
FontItalic = .T.
FontName = "Times New Roman"
FontSize = 14
BackStyle = 0
Caption = "ÔÈÎ îôèöèàíòà"
ForeColor = 128,128,255
Name = "lblwaiter"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1>Class</reserved1>
		<reserved2>1</reserved2>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6>Pixels</reserved6>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>COMMENT</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>0</timestamp>
		<class/>
		<classloc/>
		<baseclass/>
		<objname>lblwaiter</objname>
		<parent/>
		<properties/>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1SA0UTS7Y</uniqueid>
		<timestamp>887327567</timestamp>
		<class>txtcalctype</class>
		<classloc>comtxtctl_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>txtcalctype</objname>
		<parent/>
		<properties>InputMask = "999999.99"
MaxLength = 8
Name = "txtcalctype"
</properties>
		<protected/>
		<methods>PROCEDURE GotFocus
NODEFAULT

txt::gotfocus()

ENDPROC
PROCEDURE KeyPress
LPARAMETERS	tnKeyCode, tnShiftAltCtrl
LOCAL lselstart, lcAlias, lnRecNo, lnTmpValue

lcAlias = ALIAS()
lnRecNo = RECNO()

NODEFAULT

lselstart = this.SelStart
lnTmpValue = this.value

IF BETWEEN(tnKeyCode,48,57) AND tnShiftAltCtrl=0 &amp;&amp; Digits
	IF lselstart &lt;=LEN(ALLTRIM(STR(INT(lnTmpValue))))
		*--åñëè ðàáîòàåì ñ öåëîé ÷àñòüþ
		IF LEN(ALLTRIM(STR(INT(lnTmpValue))))&lt;6
			*--åñëè öåëàÿ ÷àñòü &lt; max ÷èñëà ñèìâîëîâ â öåëîé ÷àñòè
		 	lnTmpValue=INT(lnTmpValue)*10+VAL(CHR(tnKeyCode))+lnTmpValue-INT(lnTmpValue)

		 	*--âûäåëèì êóðñîðîì åäèíè÷íûé ðàçðÿä
			this.SelStart=0
			this.SelLength=1
		ENDIF
	ELSE
		*--ðàáîòàåì ñ äðîáíîé ÷àñòüþ
		IF LEN(ALLTRIM(STR(lnTmpValue-INT(lnTmpValue))))&lt;2
			*--åñëè äðîáíàÿ ÷àñòü &lt; max ÷èñëà ñèìâîëîâ â äðîáíîé ÷àñòè
			IF INT((lnTmpValue-INT(lnTmpValue))*10)&gt;0
				*--ââîäèì ñîòûå äîëè
				lnTmpValue=INT(lnTmpValue*10)/10+VAL(CHR(tnKeyCode))/100
			ELSE
				*--ââîäèì äåñÿòûå äîëè
				lnTmpValue=INT(lnTmpValue)+VAL(CHR(tnKeyCode))/10
			ENDIF
			this.SelStart=LEN(ALLTRIM(STR(INT(lnTmpValue))))+2
			this.SelLength=1
		ELSE
			*--çàìåíÿåì íîâûì ââîäîì ïîñëåäíèé ñèìâîë
			lnTmpValue = INT(lnTmpValue*10)/10+VAL(CHR(tnKeyCode))/100
			this.SelStart=LEN(ALLTRIM(STR(INT(lnTmpValue))))+2
			this.SelLength=1
		ENDIF
	ENDIF
ELSE
	IF tnKeyCode=7 &amp;&amp;--DELETE
		lnTmpValue = 0
		this.SelStart=0
		this.SelLength=0
	ENDIF
	
	IF tnKeyCode=46 AND tnShiftAltCtrl=0 &amp;&amp; Point
		this.SelStart=LEN(ALLTRIM(STR(INT(lnTmpValue))))+1
		this.SelLength=0
	ENDIF
ENDIF

this.value = lnTmpValue

This._HandleAnyChange()

SELECT (lcAlias)
GOTO (lnRecNo)
*-------------------------------------------------------------------
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************

ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1>Class</reserved1>
		<reserved2>1</reserved2>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6>Pixels</reserved6>
		<reserved7>ïîëå ââîäà ñ êàëüêóëÿòîðà â òàáëèöó</reserved7>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>COMMENT</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>0</timestamp>
		<class/>
		<classloc/>
		<baseclass/>
		<objname>txtcalctype</objname>
		<parent/>
		<properties>Arial, 0, 9, 5, 15, 12, 32, 3, 0
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1WW0QWPEA</uniqueid>
		<timestamp>893740843</timestamp>
		<class>txtcalctype</class>
		<classloc>comtxtctl_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>txtcalcnum</objname>
		<parent/>
		<properties>Name = "txtcalcnum"
</properties>
		<protected/>
		<methods>PROCEDURE KeyPress
LPARAMETERS	tnKeyCode, tnShiftAltCtrl


IF tnKeyCode=7 OR (!EMPTY(this.MaxLength) AND LEN(ALLTRIM(STR(this.value,99,2)))&gt;this.MaxLength)
	*--DELETE èëè ïðåâûøåíèå äëèíû
	this.value = 0
	this.SelStart=0
	this.SelLength=0
ELSE
	*--äðóãèå êëàâèøè
	DODEFAULT(tnKeyCode, tnShiftAltCtrl)
ENDIF


ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1>Class</reserved1>
		<reserved2>1</reserved2>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6>Pixels</reserved6>
		<reserved7>äðîáíîå ïîëå äëÿ ââîäà ñ êàëüêóëÿòîðà</reserved7>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>COMMENT</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>0</timestamp>
		<class/>
		<classloc/>
		<baseclass/>
		<objname>txtcalcnum</objname>
		<parent/>
		<properties>Arial, 0, 9, 5, 15, 12, 32, 3, 0
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1SA02X99M</uniqueid>
		<timestamp>894264944</timestamp>
		<class>txt</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>txtcalcint</objname>
		<parent/>
		<properties>nlength = 3
Name = "txtcalcint"
</properties>
		<protected/>
		<methods>PROCEDURE KeyPress
LPARAMETERS	tnKeyCode, tnShiftAltCtrl

IF BETWEEN(tnKeyCode,48,57) AND tnShiftAltCtrl=0 &amp;&amp; Digits
	IF LEN(ALLTRIM(STR(this.Value)))&lt;this.nlength
	 	this.Value=this.Value*10+VAL(CHR(tnKeyCode))
	ELSE
	 	this.Value=this.Value-MOD(this.Value,10)+VAL(CHR(tnKeyCode))
	ENDIF
	this.SelStart=LEN(this.InputMask)-1
	this.SelLength=1
ELSE
	IF tnKeyCode = 7 &amp;&amp;--DELETE
		this.Value = 0
	ENDIF
ENDIF
*-------------------------------------------------------------------
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1>Class</reserved1>
		<reserved2>1</reserved2>
		<reserved3>nlength
</reserved3>
		<reserved4/>
		<reserved5/>
		<reserved6>Pixels</reserved6>
		<reserved7>öåëî÷èñëåííîå ïîëå ââîäà ñ êàëüêóëÿòîðà </reserved7>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>COMMENT</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>0</timestamp>
		<class/>
		<classloc/>
		<baseclass/>
		<objname>txtcalcint</objname>
		<parent/>
		<properties>Arial, 0, 9, 5, 15, 12, 32, 3, 0
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1SC0S5FAV</uniqueid>
		<timestamp>921474020</timestamp>
		<class>edt</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>editbox</baseclass>
		<objname>edtmenu</objname>
		<parent/>
		<properties>BorderStyle = 0
ScrollBars = 0
_highlightself = .F.
Name = "edtmenu"
</properties>
		<protected/>
		<methods>PROCEDURE Click
thisform._clickmenu(this.value)
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1>Class</reserved1>
		<reserved2>1</reserved2>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6>Pixels</reserved6>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>COMMENT</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>0</timestamp>
		<class/>
		<classloc/>
		<baseclass/>
		<objname>edtmenu</objname>
		<parent/>
		<properties>Arial, 0, 9, 5, 15, 12, 32, 3, 0
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1S207614U</uniqueid>
		<timestamp>922058131</timestamp>
		<class>cnt</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>cntorder</objname>
		<parent/>
		<properties>Width = 92
Height = 85
BackStyle = 0
BorderWidth = 0
BackColor = 255,255,255
Style = 0
nfrmid = .F.
Name = "cntorder"
</properties>
		<protected/>
		<methods>PROCEDURE Click
*-------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: rst_v1.vcx
* Class.Module....: cntOrder.Click()
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Ðåäàêòèðîâàíèå çàêàçà
*-------------------------------------------------------
*--Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	luResEditing

*--çàïîìíèì íîìåð êîíòåéíåðà, íà êîòîðîì ñòîèò ôîêóñ
thisform.nFocusCount = ALLTRIM(SUBSTR(this.name,9,LEN(this.name)-8))

IF thisform.name==[frmmgrview]
	*--ìåíåäæåð ìîæåò òîëüêî ïðîñìàòðèâàòü çàêàçû
	luResEditing = oMgrOrder.Operate([FORM],[EDIT],this.nFrmID,.T.)
ELSE
	*--îôèöèàíò ìîæåò ðåäàêòèðîâàòü çàêàçû
	luResEditing = oMgrOrder.Operate([FORM],[EDIT],this.nFrmID)
ENDIF

*--Îáðàáàòûâàåì ðåçóëüòàò ðåäàêòèðîâàíèÿ
IF TYPE([luResEditing])==[L] AND luResEditing
	*--Îáíîâèì äàííûå íà ôîðìå îôèöèàíòà (ñïèñîê çàêàçîâ ïî äàííîìó ñòîëó)
	IF thisform.Name==[frmorderview]
		thisform._update(.T.)
	ENDIF
ENDIF
*------------------------------------------------------------------------------

************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************


ENDPROC
PROCEDURE GotFocus
*--ïîìåíÿåì öâåò ðàìêè
this.shp1.BorderColor = RGB(128,128,255)

DODEFAULT()
ENDPROC
PROCEDURE LostFocus
*--ïîìåíÿåì öâåò ðàìêè
this.shp1.BorderColor = RGB(228,151,22)

DODEFAULT()
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1>Class</reserved1>
		<reserved2>3</reserved2>
		<reserved3>nfrmid
</reserved3>
		<reserved4/>
		<reserved5/>
		<reserved6>Pixels</reserved6>
		<reserved7>Êîíòåéíåð äëÿ çàêàçà</reserved7>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1S70OM49B</uniqueid>
		<timestamp>922057736</timestamp>
		<class>imgtable</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>image</baseclass>
		<objname>Img1</objname>
		<parent>cntorder</parent>
		<properties>Picture = ..\graphic\ord_.gif
BackStyle = 0
Height = 56
Left = 7
Top = 5
Width = 78
Name = "Img1"
</properties>
		<protected/>
		<methods>PROCEDURE Click
this.Parent.Click()
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1S70OO7LZ</uniqueid>
		<timestamp>922058131</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>Lbl1</objname>
		<parent>cntorder</parent>
		<properties>AutoSize = .F.
FontBold = .T.
FontSize = 12
Alignment = 2
BackStyle = 0
Caption = "11.11"
Height = 19
Left = 5
Top = 62
Width = 80
ForeColor = 0,0,255
Name = "Lbl1"
</properties>
		<protected/>
		<methods>PROCEDURE Click
this.Parent.Click()
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>COMMENT</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>0</timestamp>
		<class/>
		<classloc/>
		<baseclass/>
		<objname>cntorder</objname>
		<parent/>
		<properties/>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1RZ0S1K7H</uniqueid>
		<timestamp>922977963</timestamp>
		<class>cnt</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>cnttable</objname>
		<parent/>
		<properties>Width = 116
Height = 111
BackStyle = 0
BorderWidth = 0
TabStop = .T.
ntablenum = 0
Name = "cnttable"
</properties>
		<protected/>
		<methods>PROCEDURE _add
*-------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: RST_V1.VCX
* Class.Module....: CNTTABLE._ADD
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Äîáàâëåíèå íîâîãî çàêàçà
*-------------------------------------------------------

*--Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	luResAdding, i, _PARAM, lnTableID
lnTableID = VAL(SUBSTR(this.Name,9))

*--Âûïîëíÿåì îïåðàöèþ äîáàâëåíèÿ äîêóìåíòà
luResAdding = oMgrOrder.Operate([FORM],[ADD],lnTableID)
*------------------------------------------------------------------------------

LOCAL lcexp

*12.05.2004 03:26 -&gt;Îáðàáàòûâàåì ðåçóëüòàò äîáàâëåíèÿ
IF TYPE([luResAdding])==[N] AND !EMPTY(luResAdding)
	*--Åñëè äîáàâèëàñü øàïêà çàêàçà, òî îòêðîåì ôîðìó äëÿ ðåäàêòèðîâàíèÿ çàêàçà
	oMgrOrder.Operate([FORM],[EDIT],luResAdding)
	
	*--ïîëó÷èì ID ñòîëà èç íîâîãî çàêàçà
	USE IN SELECT([lvFrmEditDop])
	_PARAM = luResAdding
	USE lvFrmEdit ALIAS lvFrmEditDop IN 0
	IF RECCOUNT([lvFrmEditDop])&gt;0
		lnTableID = lvFrmEditDop.PointEmiOUID
	ENDIF
	
	*--îáíîâèì äàííûå
	SELECT lvWaiterTableView
	LOCATE FOR lvWaiterTableView.PointEmiOUID = lnTableID
	IF !FOUND()
		*--åñëè ñòîë åùå íå áûë îòêðûò, äîáàâèì åãî
		APPEND BLANK
		
		*--ïîëó÷èì íàçâàíèå ñòîëà
		USE IN SELECT([lvOrgUnitEdit])
		_PARAM = lnTableID
		USE lvOrgUnitEdit IN 0
		
		*--äîáàâèì ñòîë
		REPLACE lvWaiterTableView.PointEmiOUID WITH lnTableID, ;
				lvWaiterTableView.TableNM WITH lvOrgUnitEdit.OUNM
				
		*--îáíîâèì ôîðìó
		thisform.refreshtable()
	ENDIF
ENDIF
*------------------------------------------------------------------------------

************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************
ENDPROC
PROCEDURE _view
*-------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: RST_V1.VCX
* Class.Module....: CNTTABLE._VIEW
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Ïðîñìîòð çàêàçîâ ïî äàííîìó ñòîëó (òåêóùåãî îôèöèàíòà)
*-------------------------------------------------------
LOCAL llupdate

*--îòêðîåì ôîðìó äëÿ ðåäàêòèðîâàíèÿ çàêàçà
oApp.DoFormObj([frmOrderView;rst_v1.vcx],this.ntablenum)

*--ïðîâåðèì, íå èçìåíèëñÿ ëè ñïèñîê ñòîëîâ äàííîãî îôèöèàíòà
_PARAM1 = VAL(oRes.GetParam([RST],[TYPEORD]))
_PARAM2 = spUserClt()
USE lvWaiterTableView IN 0 ALIAS lvWTView

llupdate = .F.

*--ïðîâåðèì ñîâïàäåíèå ñïèñêîâ ñòîëîâ
SELECT lvWaiterTableView
GO TOP
SCAN ALL
	SELECT lvWTView
	LOCATE FOR lvWTView.PointEmiOUID = lvWaiterTableView.PointEmiOUID
	IF !FOUND()
		llupdate = .T.
		EXIT
	ENDIF
	SELECT lvWaiterTableView
ENDSCAN

*--åñëè âñå õîðîøî, ïðîâåðÿåì äàëüøå
IF !llupdate
	SELECT lvWTView
	GO TOP
	SCAN ALL
		SELECT lvWaiterTableView
		LOCATE FOR lvWaiterTableView.PointEmiOUID = lvWTView.PointEmiOUID
		IF !FOUND()
			llupdate = .T.
			EXIT
		ENDIF
		SELECT lvWTView
	ENDSCAN
ENDIF

USE IN SELECT([lvWTView])

*--îáíîâèì äàííûå íà ôîðìå
IF llupdate
	REQUERY([lvWaiterTableView])
	*--thisform.DefaultTable()
	thisform.RefreshTable()
ENDIF
ENDPROC
PROCEDURE Click
*-------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: RST_V1.VCX
* Class.Module....: CNTTABLE.CLICK
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Ðàáîòà ñ çàêàçàìè ïî äàííîìó ñòîëó
*-------------------------------------------------------
IF EMPTY(this.ntablenum)
	*--Åñëè ñòîë åùå íå îòêðûò, òî ñðàçó ïîêàçûâàåì ôîðìó äëÿ çàâåäåíèÿ íîâîãî çàêàçà
	this._add()
ELSE
	*--åñëè ñòîë óæå îòêðûò, ïîêàæåì ñïèñîê çàêàçîâ ïî ýòîìó ñòîëó
	this._view()
ENDIF
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1>Class</reserved1>
		<reserved2>3</reserved2>
		<reserved3>ntablenum
*_add íîâûé çàêàç
*_edit ðåäàêòèðîâàíèå çàêàçà
*_view ïðîñìîòð ñïèñêà çàêàçîâ ïî òåêóùåìó ñòîëó
</reserved3>
		<reserved4/>
		<reserved5/>
		<reserved6>Pixels</reserved6>
		<reserved7>Êîíòåéíåð äëÿ ñòîëà</reserved7>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1RZ1031NC</uniqueid>
		<timestamp>922977963</timestamp>
		<class>imgtable</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>image</baseclass>
		<objname>Imgtable1</objname>
		<parent>cnttable</parent>
		<properties>Picture = ..\graphic\t8s.gif
BackStyle = 0
Height = 73
Left = 9
Top = 8
Width = 98
Name = "Imgtable1"
</properties>
		<protected/>
		<methods>PROCEDURE Click
this.Parent.Click()
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1RZ0S5QZH</uniqueid>
		<timestamp>922058198</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>Lbl1</objname>
		<parent>cnttable</parent>
		<properties>AutoSize = .F.
FontBold = .T.
FontItalic = .F.
FontSize = 11
Alignment = 2
BackStyle = 0
Caption = "Ñòîë ¹ 1"
Height = 20
Left = 9
Top = 84
Width = 98
ForeColor = 0,0,255
BackColor = 255,255,255
ZOrderSet = 2
Name = "Lbl1"
</properties>
		<protected/>
		<methods>PROCEDURE Click
this.Parent.Click()
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>COMMENT</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>0</timestamp>
		<class/>
		<classloc/>
		<baseclass/>
		<objname>cnttable</objname>
		<parent/>
		<properties/>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1S207614U</uniqueid>
		<timestamp>925601190</timestamp>
		<class>cnt</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>cntordernew</objname>
		<parent/>
		<properties>Width = 92
Height = 85
BackColor = 239,228,250
Name = "cntordernew"
</properties>
		<protected/>
		<methods>PROCEDURE Click
*--äîáàâèì íîâûé çàêàç
LOCAL	luResAdding

*--ñáðîñèì íîìåð êîíòåéíåðà, íà êîòîðîì ñòîèò ôîêóñ
thisform.nFocusCount = []

*--Âûïîëíÿåì îïåðàöèþ äîáàâëåíèÿ äîêóìåíòà
luResAdding = oMgrOrder.Operate([FORM],[ADD],thisform.ntablenum)

IF TYPE([luResAdding])==[N] AND !EMPTY(luResAdding)
	*--Åñëè äîáàâèëàñü øàïêà çàêàçà, òî îòêðîåì ôîðìó äëÿ ðåäàêòèðîâàíèÿ çàêàçà
	oMgrOrder.Operate([FORM],[EDIT],luResAdding)

	*--Îáíîâèì äàííûå íà ôîðìå
	thisform._update(.T.)
ENDIF
ENDPROC
PROCEDURE GotFocus
this.shp1.BorderColor = RGB(128,128,255)
DODEFAULT()
ENDPROC
PROCEDURE LostFocus
this.shp1.BorderColor = RGB(228,151,22)
DODEFAULT()
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1>Class</reserved1>
		<reserved2>3</reserved2>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6>Pixels</reserved6>
		<reserved7>Êîíòåéíåð äëÿ íîâîãî çàêàçà</reserved7>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1S20QARPV</uniqueid>
		<timestamp>882074301</timestamp>
		<class>shp</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>shape</baseclass>
		<objname>Shp1</objname>
		<parent>cntordernew</parent>
		<properties>Top = 3
Left = 3
Height = 81
Width = 86
BackStyle = 0
BorderWidth = 3
Visible = .T.
BorderColor = 228,151,22
ZOrderSet = 0
Name = "Shp1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1S2078FZK</uniqueid>
		<timestamp>925601190</timestamp>
		<class>cmd</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd1</objname>
		<parent>cntordernew</parent>
		<properties>Top = 6
Left = 6
Height = 75
Width = 80
Picture = ..\graphic\ord_.gif
Caption = ""
BackColor = 255,255,255
Name = "Cmd1"
</properties>
		<protected/>
		<methods>PROCEDURE Click
this.Parent.Click()
ENDPROC
PROCEDURE GotFocus
this.Parent.GotFocus()
ENDPROC
PROCEDURE LostFocus
this.Parent.LostFocus()
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>COMMENT</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>0</timestamp>
		<class/>
		<classloc/>
		<baseclass/>
		<objname>cntordernew</objname>
		<parent/>
		<properties>Arial, 0, 9, 5, 15, 12, 32, 3, 0
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1RX0UFZLH</uniqueid>
		<timestamp>927171635</timestamp>
		<class>interface</class>
		<classloc>primarydoc_v1.vcx</classloc>
		<baseclass>custom</baseclass>
		<objname>interface</objname>
		<parent/>
		<properties>Name = "interface"
</properties>
		<protected/>
		<methods>PROCEDURE form_add
*-------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: RST_V1.VCX
* Class.Module....: MGRORDER.FORM_ADD
* Called by.......: &lt;.Operate()&gt;
* Parameters......: tuParam1 - äîïîëíèòåëüíûé ïàðàìåòð (íàïðèìåð, íîìåð ñòîëà)
* Returns.........: &lt;luResultAdding&gt;
* Notes...........: Äîáàâëåíèå íîâîãî äîêóìåíòà.
*-------------------------------------------------------
LPARAMETERS	tuParam1

*--Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	_PARAM, ;
		luResultAdding

	*29.11.2004 17:36 -&gt;Âûïîëíèì îïåðàöèþ ñîçäàíèÿ íîâîé ôîðìû
	luResultAdding = oApp.DoModalFormRetValObj([FrmOrderAdd;rst_v1.vcx],tuParam1)
	*------------------------------------------------------------------------------
		
*--Âåðíåì ðåçóëüòàò îïåðàöèè
RETURN luResultAdding
*------------------------------------------------------------------------------

************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************

ENDPROC
PROCEDURE form_edit
*-------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: RST_V1.VCX
* Class.Module....: MGRORDER.FORM_EDIT
* Called by.......: &lt;.Operate()&gt;
* Parameters......: &lt;tcRequestedOperation,tnFrmID&gt;
* Returns.........: &lt;llResultEditing&gt;
* Notes...........: Ðåäàêòèðîâàíèå/ïðîñìîòð äîêóìåíòà.
*-------------------------------------------------------
LPARAMETERS	tnFrmID, tlReadOnly

*--Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL llResultEditing

*--Çàïóñêàåì ôîðìó äëÿ ðåäàêòèðîâàíèÿ/ïðîñìîòðà äîêóìåíòà
**llResultEditing = oApp.DoModalFormRetValObj([FrmOrderEdit_new;rst_v1.vcx],tnFrmID,tlReadOnly)

llResultEditing = oApp.DoModalFormRetValObj([FrmOrderEdit;rst_v1.vcx],tnFrmID,tlReadOnly)
		
*--Âåðíåì ðåçóëüòàò îïåðàöèè
RETURN llResultEditing
*------------------------------------------------------------------------------

************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************

ENDPROC
PROCEDURE operate
*-------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: PRIMARYDOC_V1.VCX
* Class.Module....: MGRPRIMARYDOC.OPERATE
* Called by.......: &lt;Misc External Calls&gt;
* Parameters......: &lt;see below&gt;
* Returns.........: &lt;see below&gt;
* Notes...........: Îñíîâíîé ìåòîä ìåíåäæåðà áèáëèîòåêè ïåðâè÷íûõ äîêóìåíòîâ.
*-------------------------------------------------------
LPARAMETERS	tcEntityName, ;
			tcRequestedOperation, ;
			tuParam1, ;
			tuParam2, ;
			tuParam3, ;
			tuParam4, ;			
			tuParam5, ;
			tuParam6, ;
			tuParam7, ;
			tuParam8, ;
			tuParam9, ;
			tuParam10

*19.05.2004 19:23 -&gt;Ïðîâåðÿåì ïåðâûå äâà îáÿçàòåëüíûõ ïàðàìåòðà
IF 	TYPE([tcEntityName])#[C] OR EMPTY([tcEntityName]) OR ;
	TYPE([tcRequestedOperation])#[C] OR EMPTY([tcRequestedOperation])
	*{
	ASSERT .F. MESSAGE [MGRPRIMARYDOC.DOCOMMAND: îøèáêà âûçîâà - íåïðàâèëüíûé òèï èëè çíà÷åíèå ïàðàìåòðà.]
	*}
ENDIF	
*------------------------------------------------------------------------------

*19.05.2004 19:24 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	lcEntityName, ;
		lcRequstedOperation, ;
		llOperateResult
***
lcEntityName = UPPER(ALLTRIM(tcEntityName))
lcRequstedOperation = UPPER(ALLTRIM(tcRequestedOperation))
*------------------------------------------------------------------------------

*05.04.2004 19:59 -&gt;Âûïîëíÿåì îïðåàöèþ íàä ñóùíîñòüþ
*CASE lcEntityName == [] AND lcRequstedOperation == []
DO CASE

	*******************************************************************************
	*[FORM] &amp;&amp; [VIEW] - çàïóñê ôîðìû äëÿ ïðîñìîòðà äîêóìåíòîâ					  *
	*******************************************************************************
	CASE lcEntityName == [FORM] AND lcRequstedOperation == [VIEW]
	
		*05.04.2004 20:01 -&gt;Ñïèñîê äîïîëíèòåëüíûõ ïàðàìåòðîâ
		* tuParam1 - èäåíòèôèêàòîð ôîðìû äëÿ ïðîñìîòðà ïåðâè÷íûõ äîêóìåíòîâ
		*------------------------------------------------------------------------------
		
		*19.05.2004 19:27 -&gt;Âûïîëíÿåì îïåðàöèþ
		This.Form_View(tuParam1)
		*------------------------------------------------------------------------------		

	*******************************************************************************
	*[FORM] &amp;&amp; [ADD] - äîáàâëåíèå äîêóìåíòà										  *
	*******************************************************************************
	CASE lcEntityName == [FORM] AND lcRequstedOperation == [ADD]
		
		*05.04.2004 20:01 -&gt;Ñïèñîê äîïîëíèòåëüíûõ ïàðàìåòðîâ
		llOperateResult = This.Form_Add(tuParam1)
		RETURN llOperateResult
		*------------------------------------------------------------------------------

	*******************************************************************************
	*[FORM] &amp;&amp; ([EDIT] || [INFO] || [DELE]) - ðåäàêòèðîâàíèå/ïðîñìîòð äîêóìåíòà	  *
	*******************************************************************************
	CASE lcEntityName == [FORM] AND (lcRequstedOperation == [EDIT] OR lcRequstedOperation == [INFO] OR lcRequstedOperation == [DELE])

		*05.04.2004 20:01 -&gt;Ñïèñîê äîïîëíèòåëüíûõ ïàðàìåòðîâ
		* tuParam1 - èäåíòèôèêàòîð äîêóìåíòà äëÿ ðåäàêòèðîâàíèÿ/ïðîñìîòðà
		*------------------------------------------------------------------------------
		
		*19.05.2004 19:44 -&gt;Âûïîëíèì îïåðàöèþ
		llOperateResult = This.Form_Edit(tuParam1, tuParam2)
		RETURN llOperateResult
		*------------------------------------------------------------------------------
	
	*******************************************************************************
	*[FORM] &amp;&amp; ([COPY] OR [INHERIT]) - êîïèðîâàíèå/íàñëåäîâàíèå äîêóìåíòà		  *
	*******************************************************************************
	CASE lcEntityName == [FORM] AND ( ;
			lcRequstedOperation == [COPY] OR ;
			lcRequstedOperation == [INHERIT])

		*05.04.2004 20:01 -&gt; Ñïèñîê äîïîëíèòåëüíûõ ïàðàìåòðîâ
		* tuParam1 - èäåíòèôèêàòîð äîêóìåíòà äëÿ êîïèðîâàíèÿ/íàñëåäîâàíèÿ
		*------------------------------------------------------------------------------
		
		*19.05.2004 19:44 -&gt; Âûïîëíèì îïåðàöèþ
		llOperateResult = oApp.DoModalFormRetValObj([frmPDCopyAs;PrimaryDoc_v1;PrimaryDoc.app],lcRequstedOperation,tuParam1)
		RETURN llOperateResult
		*------------------------------------------------------------------------------

	*******************************************************************************
	*[FORM] &amp;&amp; [PRNDOC] - ïå÷àòü äîêóìåíòà							  			  *
	*******************************************************************************
	CASE lcEntityName == [FORM] AND lcRequstedOperation == [PRNDOC]

		*05.04.2004 20:01 -&gt;Ñïèñîê äîïîëíèòåëüíûõ ïàðàìåòðîâ
		* tuParam1 - èäåíòèôèêàòîð äîêóìåíòà äëÿ ïå÷àòè
		*------------------------------------------------------------------------------
		
		*19.05.2004 19:44 -&gt;Âûïîëíèì îïåðàöèþ
		llOperateResult = This.Form_PrnDoc(tuParam1)
		RETURN llOperateResult
		*------------------------------------------------------------------------------

	*******************************************************************************
	*[FORM] &amp;&amp; [NAKLOUT] - Ôîðìèðîâàíèå ðàñõîäíîé íàêëàäíîé ïî ðåçóëüòàòàì ïðîäàæ  *
	*******************************************************************************
	CASE lcEntityName == [FORM] AND lcRequstedOperation == [NAKLOUT]

		*16.03.2006 16:07 -&gt; Âûïîëíèì îïåðàöèþ
		llOperateResult = oApp.ExecuteScrFormByObjDescRetVal([frmNaklOut;PrimaryDoc_v1.vcx;PrimaryDoc.app])
		***
		IF TYPE([llOperateResult])=[N]
			RETURN llOperateResult
		ENDIF
		***
		RETURN .T.
		*------------------------------------------------------------------------------

	*****************************************************************************
	*[FORM] &amp;&amp; [PAYDOCMAKE]														*
	*****************************************************************************
	CASE lcEntityName == [FORM] AND lcRequstedOperation == [PAYDOCMAKE]

		*16.03.2006 16:09 -&gt; Âûïîëíèì îïåðàöèþ		
		llOperateResult = This._PayDocMake()
		***
		IF TYPE([llOperateResult])=[N]
			RETURN llOperateResult
		ENDIF
		***
		RETURN .T.
		*------------------------------------------------------------------------------

	*******************************************************************************
	*[PARTTVR] &amp;&amp; [ADD] - äîáàâëåíèå òîâàðíîé ïîçèöèè ëîêóìåíòà					  *
	*******************************************************************************
	CASE lcEntityName == [PARTTVR] AND lcRequstedOperation == [ADD]

		*05.04.2004 20:01 -&gt;Ñïèñîê äîïîëíèòåëüíûõ ïàðàìåòðîâ
		* tuParam1 - èäåíòèôèêàòîð äîêóìåíòà äëÿ äîáàâëåíèÿ òîâàðíîé ïîçèöèè äîêóìåíòà
		*------------------------------------------------------------------------------
	
		*19.05.2004 19:44 -&gt;Âûïîëíèì îïåðàöèþ
		llOperateResult = This.PartTvr_Add(tuParam1)
		RETURN llOperateResult
		*------------------------------------------------------------------------------
		
	*********************************************************************************************************
	*[PARTTVR] &amp;&amp; ([EDIT] || [INFO] ||[DELE]) - ðåäàêòèðîâàíèå/ïðîñìîòð/óäàëåíèå òîâàðíîé ïîçèöèè äîêóìåíòà	*
	*********************************************************************************************************
	CASE lcEntityName == [PARTTVR] AND (lcRequstedOperation == [EDIT] OR lcRequstedOperation == [INFO] OR lcRequstedOperation == [DELE])

		*05.04.2004 20:01 -&gt;Ñïèñîê äîïîëíèòåëüíûõ ïàðàìåòðîâ
		* tuParam1 - èäåíòèôèêàòîð òîâàðíîé ïîçèöèè äîêóìåíòà
		*------------------------------------------------------------------------------
		
		*19.05.2004 19:44 -&gt;Âûïîëíèì îïåðàöèþ
		llOperateResult = This.PartTvr_Edit(lcRequstedOperation,tuParam1)
		RETURN llOperateResult
		*------------------------------------------------------------------------------

	*******************************************************************************
	*[PARTFRM] &amp;&amp; [ADD] - äîáàâëåíèå ñóììîâîé ïîçèöèè ëîêóìåíòà					  *
	*******************************************************************************
	CASE lcEntityName == [PARTFRM] AND lcRequstedOperation == [ADD]

		*05.04.2004 20:01 -&gt;Ñïèñîê äîïîëíèòåëüíûõ ïàðàìåòðîâ
		* tuParam1 - èäåíòèôèêàòîð äîêóìåíòà äëÿ äîáàâëåíèÿ ñóììîâîé ïîçèöèè
		*------------------------------------------------------------------------------
	
		*19.05.2004 19:44 -&gt;Âûïîëíèì îïåðàöèþ
		llOperateResult = This.PartFrm_Add(tuParam1)
		RETURN llOperateResult
		*------------------------------------------------------------------------------

	*************************************************************************************************************
	*[PARTFRM] &amp;&amp; ([EDIT] || [INFO] || [DELE]) - ðåäàêòèðîâàíèå/ïðîñìîòð/óäàëåíèå ñóììîâîé ïîçèöèè äîêóìåíòà	*
	*************************************************************************************************************
	CASE lcEntityName == [PARTFRM] AND (lcRequstedOperation == [EDIT] OR lcRequstedOperation == [INFO] OR lcRequstedOperation == [DELE])

		*05.04.2004 20:01 -&gt;Ñïèñîê äîïîëíèòåëüíûõ ïàðàìåòðîâ
		* tuParam1 - èäåíòèôèêàòîð ñóììîâîé ïîçèöèè äîêóìåíòà
		*------------------------------------------------------------------------------
	
		*19.05.2004 19:44 -&gt;Âûïîëíèì îïåðàöèþ
		llOperateResult = This.PartFrm_Edit(lcRequstedOperation,tuParam1)
		RETURN llOperateResult
		*------------------------------------------------------------------------------

	*************************************************************************************************************
	*[PAYDOC] &amp;&amp; [EXPORT] - ýêñïîðò ïëàòåæíîãî ïîðó÷åíèÿ ê êëèåíò-áàíê                                          *
	*************************************************************************************************************
	CASE lcEntityName == [PAYDOC] AND lcRequstedOperation == [EXPORT]

		*05.04.2004 20:01 -&gt;Ñïèñîê äîïîëíèòåëüíûõ ïàðàìåòðîâ
		* tuParam1 - èäåíòèôèêàòîð äîêóìåíòà
		*------------------------------------------------------------------------------
	
		*19.05.2004 19:44 -&gt;Âûïîëíèì îïåðàöèþ
		llOperateResult = This.Paydoc_Exchange(lcRequstedOperation,tuParam1)
		RETURN llOperateResult
		*------------------------------------------------------------------------------
	
	*******************************************************************************
	*[AUTONUM] &amp;&amp; [VIEW] - çàïóñê ôîðìû äëÿ ðàáîòû c àâòîíóìåðàòîðàìè			  *
	*******************************************************************************
	CASE lcEntityName == [AUTONUM] AND lcRequstedOperation == [VIEW]

		*16.03.2006 16:22 -&gt; Âûïîëíèì îïåðàöèþ
		oApp.ExecuteScrFormByObjDesc([frmAutoNumView;PrimaryDoc_v1.vcx;PrimaryDoc.app])
		***
		RETURN .T.
		*------------------------------------------------------------------------------

	*******************************************************************************
	*[AUTONUM] &amp;&amp; ([ADD] || [EDIT] || [INFO] || [DELE])							  *
	*Äîáàâëåíèå/ðåäàêòèðîâàíèå/ïðîñìîòð/óäàëåíèå èíôîðìàöèè îá àâòîíóìåðàòîðå	  *
	*******************************************************************************
	CASE lcEntityName == [AUTONUM] AND ;
		 (lcRequstedOperation == [ADD] OR ;
		  lcRequstedOperation == [EDIT] OR ;
		  lcRequstedOperation == [DELE])

		* tuParam1 - èäåíòèôèêàòîð àâòîíóìåðàòîðà äëÿ ðåäàêòèðîâàíèÿ/ïðîñìîòðà/óäàëåíèÿ
		*------------------------------------------------------------------------------

		*06.02.2006 12:39 -&gt;Âûïîëíèì îïåðàöèþ
		luOperateResult = oApp.DoModalFormRetValObj([frmAutoNumEdit;PrimaryDoc_v1;PrimaryDoc.app],lcRequstedOperation,tuParam1)
		*06.02.2006 12:39 -&gt;Âåðíåì ôëàã ðåçóëüòàòà îïåðàöèè
		RETURN luOperateResult
		*------------------------------------------------------------------------------

	OTHERWISE
	
		*19.05.2004 21:59 -&gt;Âûâåäåì ñîîáùåíèå îá îøèáêå
		MESSAGEBOX( ;
			[Ê ñîæàëåíèþ çàïðîøåííàÿ Âàìè îïåðàöèÿ íå ìîæåò áûòü âûïîëíåíà.]+CHR(13)+ ;
			[Äàííîå ñîîáùåíèå ìîæåò áûòü âûçâàíî ñëåäóþùèìè ïðè÷èíàìè:]+CHR(13)+ ;
			[1. Â äàííîé âåðñèè ïðîãðàìíîãî ïðîäóêòà äàííàÿ ôóíêöèîíàëüíîñòü íå ðåàëèçîâàíà;]+CHR(13)+ ;
			[2. Ïðîèçîøåë ïðîãðàììíûé ñáîé.],64,[Íå âûïîëíåíî...])
		*------------------------------------------------------------------------------
	
ENDCASE
*------------------------------------------------------------------------------

************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1>Class</reserved1>
		<reserved2>1</reserved2>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6>Pixels</reserved6>
		<reserved7>ìåíåäæåð áèáëèîòåêè çàêàçîâ</reserved7>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>COMMENT</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>0</timestamp>
		<class/>
		<classloc/>
		<baseclass/>
		<objname>interface</objname>
		<parent/>
		<properties/>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2CK0W60XM</uniqueid>
		<timestamp>949058200</timestamp>
		<class>container</class>
		<classloc/>
		<baseclass>container</baseclass>
		<objname>cnttuchpadmainpict</objname>
		<parent/>
		<properties>Width = 532
Height = 575
Name = "cnttuchpadmain"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1>Class</reserved1>
		<reserved2>21</reserved2>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6>Pixels</reserved6>
		<reserved7>ïàíåëü äëÿ tuchscreen Îñíîâíàÿ </reserved7>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1RY0N4UD0</uniqueid>
		<timestamp>949058101</timestamp>
		<class>imgbutton</class>
		<classloc>comctl_v1.vcx</classloc>
		<baseclass>image</baseclass>
		<objname>ImgButton11</objname>
		<parent>cnttuchpadmainpict</parent>
		<properties>Height = 115
Left = 0
Top = 0
Width = 133
Name = "ImgButton11"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>949058101</timestamp>
		<class>imgbutton</class>
		<classloc>comctl_v1.vcx</classloc>
		<baseclass>image</baseclass>
		<objname>Imgbutton12</objname>
		<parent>cnttuchpadmainpict</parent>
		<properties>Height = 115
Left = 133
Top = 0
Width = 133
Name = "Imgbutton12"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1RZ0ZZVSE</uniqueid>
		<timestamp>949058101</timestamp>
		<class>imgbutton</class>
		<classloc>comctl_v1.vcx</classloc>
		<baseclass>image</baseclass>
		<objname>Imgbutton13</objname>
		<parent>cnttuchpadmainpict</parent>
		<properties>Height = 115
Left = 266
Top = 0
Width = 133
Name = "Imgbutton13"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>949058101</timestamp>
		<class>imgbutton</class>
		<classloc>comctl_v1.vcx</classloc>
		<baseclass>image</baseclass>
		<objname>Imgbutton14</objname>
		<parent>cnttuchpadmainpict</parent>
		<properties>Height = 115
Left = 399
Top = 0
Width = 133
Name = "Imgbutton14"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1SG0NUEC5</uniqueid>
		<timestamp>949058101</timestamp>
		<class>imgbutton</class>
		<classloc>comctl_v1.vcx</classloc>
		<baseclass>image</baseclass>
		<objname>Imgbutton21</objname>
		<parent>cnttuchpadmainpict</parent>
		<properties>Height = 115
Left = 0
Top = 115
Width = 133
Name = "Imgbutton21"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1U00R6MO9</uniqueid>
		<timestamp>949058101</timestamp>
		<class>imgbutton</class>
		<classloc>comctl_v1.vcx</classloc>
		<baseclass>image</baseclass>
		<objname>Imgbutton22</objname>
		<parent>cnttuchpadmainpict</parent>
		<properties>Height = 115
Left = 133
Top = 115
Width = 133
Name = "Imgbutton22"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>949058101</timestamp>
		<class>imgbutton</class>
		<classloc>comctl_v1.vcx</classloc>
		<baseclass>image</baseclass>
		<objname>Imgbutton23</objname>
		<parent>cnttuchpadmainpict</parent>
		<properties>Height = 115
Left = 266
Top = 115
Width = 133
Name = "Imgbutton23"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1S802IZ6O</uniqueid>
		<timestamp>949058101</timestamp>
		<class>imgbutton</class>
		<classloc>comctl_v1.vcx</classloc>
		<baseclass>image</baseclass>
		<objname>Imgbutton24</objname>
		<parent>cnttuchpadmainpict</parent>
		<properties>Height = 115
Left = 399
Top = 115
Width = 133
Name = "Imgbutton24"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2CK0WS5Z7</uniqueid>
		<timestamp>949058101</timestamp>
		<class>imgbutton</class>
		<classloc>comctl_v1.vcx</classloc>
		<baseclass>image</baseclass>
		<objname>Imgbutton31</objname>
		<parent>cnttuchpadmainpict</parent>
		<properties>Height = 115
Left = 0
Top = 230
Width = 133
Name = "Imgbutton31"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2CK0WS5Z8</uniqueid>
		<timestamp>949058101</timestamp>
		<class>imgbutton</class>
		<classloc>comctl_v1.vcx</classloc>
		<baseclass>image</baseclass>
		<objname>Imgbutton32</objname>
		<parent>cnttuchpadmainpict</parent>
		<properties>Height = 115
Left = 133
Top = 230
Width = 133
Name = "Imgbutton32"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2CK0WS5Z9</uniqueid>
		<timestamp>949058101</timestamp>
		<class>imgbutton</class>
		<classloc>comctl_v1.vcx</classloc>
		<baseclass>image</baseclass>
		<objname>Imgbutton33</objname>
		<parent>cnttuchpadmainpict</parent>
		<properties>Height = 115
Left = 266
Top = 230
Width = 133
Name = "Imgbutton33"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2CK0WS5ZA</uniqueid>
		<timestamp>949058101</timestamp>
		<class>imgbutton</class>
		<classloc>comctl_v1.vcx</classloc>
		<baseclass>image</baseclass>
		<objname>Imgbutton34</objname>
		<parent>cnttuchpadmainpict</parent>
		<properties>Height = 115
Left = 399
Top = 230
Width = 133
Name = "Imgbutton34"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1RY0N4UD0</uniqueid>
		<timestamp>949058101</timestamp>
		<class>imgbutton</class>
		<classloc>comctl_v1.vcx</classloc>
		<baseclass>image</baseclass>
		<objname>Imgbutton41</objname>
		<parent>cnttuchpadmainpict</parent>
		<properties>Height = 115
Left = 0
Top = 345
Width = 133
Name = "Imgbutton41"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>949058101</timestamp>
		<class>imgbutton</class>
		<classloc>comctl_v1.vcx</classloc>
		<baseclass>image</baseclass>
		<objname>Imgbutton42</objname>
		<parent>cnttuchpadmainpict</parent>
		<properties>Height = 115
Left = 133
Top = 345
Width = 133
Name = "Imgbutton42"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1RZ0ZZVSE</uniqueid>
		<timestamp>949058101</timestamp>
		<class>imgbutton</class>
		<classloc>comctl_v1.vcx</classloc>
		<baseclass>image</baseclass>
		<objname>Imgbutton43</objname>
		<parent>cnttuchpadmainpict</parent>
		<properties>Height = 115
Left = 266
Top = 345
Width = 133
Name = "Imgbutton43"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>949058101</timestamp>
		<class>imgbutton</class>
		<classloc>comctl_v1.vcx</classloc>
		<baseclass>image</baseclass>
		<objname>Imgbutton44</objname>
		<parent>cnttuchpadmainpict</parent>
		<properties>Height = 115
Left = 399
Top = 345
Width = 133
Name = "Imgbutton44"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2CK0WS5ZF</uniqueid>
		<timestamp>949058101</timestamp>
		<class>imgbutton</class>
		<classloc>comctl_v1.vcx</classloc>
		<baseclass>image</baseclass>
		<objname>Imgbutton51</objname>
		<parent>cnttuchpadmainpict</parent>
		<properties>Height = 115
Left = 0
Top = 460
Width = 133
Name = "Imgbutton51"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2CK0WS5ZG</uniqueid>
		<timestamp>949058101</timestamp>
		<class>imgbutton</class>
		<classloc>comctl_v1.vcx</classloc>
		<baseclass>image</baseclass>
		<objname>Imgbutton52</objname>
		<parent>cnttuchpadmainpict</parent>
		<properties>Height = 115
Left = 133
Top = 460
Width = 133
Name = "Imgbutton52"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2CK0WS5ZH</uniqueid>
		<timestamp>949058101</timestamp>
		<class>imgbutton</class>
		<classloc>comctl_v1.vcx</classloc>
		<baseclass>image</baseclass>
		<objname>Imgbutton53</objname>
		<parent>cnttuchpadmainpict</parent>
		<properties>Height = 115
Left = 266
Top = 460
Width = 133
Name = "Imgbutton53"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2CK0WS5ZI</uniqueid>
		<timestamp>949058101</timestamp>
		<class>imgbutton</class>
		<classloc>comctl_v1.vcx</classloc>
		<baseclass>image</baseclass>
		<objname>Imgbutton54</objname>
		<parent>cnttuchpadmainpict</parent>
		<properties>Height = 115
Left = 399
Top = 460
Width = 133
Name = "Imgbutton54"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>COMMENT</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>0</timestamp>
		<class/>
		<classloc/>
		<baseclass/>
		<objname>cnttuchpadmainpict</objname>
		<parent/>
		<properties/>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2CK0WWO6U</uniqueid>
		<timestamp>949110327</timestamp>
		<class>container</class>
		<classloc/>
		<baseclass>container</baseclass>
		<objname>cnttuchpadmainbut</objname>
		<parent/>
		<properties>Width = 500
Height = 560
Name = "cnttuchpadmainbut"
</properties>
		<protected/>
		<methods>PROCEDURE _paintmnu
*--íàðèñóåì ìåíþ ñ êíîïêàìè
LPARAMETERS tnVar, tnIDSET
LOCAL i, lcexp, _PARAM

*--ñíà÷àëà âûáåðåì äàííûå âî âðåìåííûé êóðñîð, ïî êîòîðîìó áóäåò ñòðîèòüñÿ ìåíþ
DO CASE
	CASE tnVar = 1
		SELECT ;
			lvPOSFuncInSetView.NM AS NM, ;
			lvPOSFuncInSetView.ID AS ID ;
		FROM lvPOSFuncInSetView ;
		INTO CURSOR curBuild NOFILTER

	CASE tnVar = 2
		USE IN SELECT([lvTvrInSetView])
		_PARAM = tnIDSET
		USE lvTvrInSetView IN 0	
			
		*19.04.2006 15:23 -&gt;Ïîëó÷èì èäåíòèôèêàòîð ïðàéñà
		USE IN SELECT([lvTvrSetInfo])
		_PARAM = tnIDSET
		USE lvTvrSetInfo IN 0
		ThisForm.nPrcTypeID = lvTvrSetInfo.PrcTypeID
		*------------------------------------------------------------------------------
			
		SELECT ;
			lvTvrInSetView.TvrNM AS NM, ;
			lvTvrInSetView.TvrID AS ID ;
		FROM lvTvrInSetView ;
		INTO CURSOR curBuild NOFILTER
	
ENDCASE

*--ïîñòðîèì ïî ýòîìó êóðñîðó  òàáëèöó äëÿ ìåíþ (â çàâèñèìîñòè îò ÷èñëà êîëîíîê)
CREATE TABLE tmp\tmpmenu.dbf FREE (t1 C(80),t2 C(80),t3 C(80),t4 C(80),t5 C(80),t6 C(80),t7 C(80))

*--çàïîëíèì òàáëèöó äëÿ ìåíþ
i = 1
SELECT tmpmenu
APPEND BLANK

SELECT curBuild
GO TOP
DO WHILE !EOF([curBuild])
	IF i&lt;=thisform.GrdMenu.ColumnCount
		lcexp = [REPL tmpmenu.t]+ALLTRIM(STR(i))+[ WITH NVL(curBuild.NM,'ïóñòî')]
		&amp;lcexp
		i = i+1
		SKIP 1
	ELSE
		*--ïåðåéäåì íà çàïîëíåíèå íîâîé ñòðîêè
		i = 1
		SELECT tmpmenu
		APPEND BLANK
	ENDIF
	SELECT curBuild
ENDDO

SELECT tmpmenu
GO TOP
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1>Class</reserved1>
		<reserved2>21</reserved2>
		<reserved3>*_paintmnu Çàïîëíÿåì êíîïêè çíà÷åíèÿìè
</reserved3>
		<reserved4/>
		<reserved5/>
		<reserved6>Pixels</reserved6>
		<reserved7>êëàâèàòóðà tuch îñíîâíàÿ Ald</reserved7>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1RY0N4UD0</uniqueid>
		<timestamp>949110327</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd11</objname>
		<parent>cnttuchpadmainbut</parent>
		<properties>Top = 0
Left = 0
Height = 112
Width = 125
Caption = ""
Name = "Cmd11"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>949110327</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd12</objname>
		<parent>cnttuchpadmainbut</parent>
		<properties>Top = 0
Left = 125
Height = 112
Width = 125
Caption = ""
Name = "Cmd12"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1RZ0ZZVSE</uniqueid>
		<timestamp>949110327</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd13</objname>
		<parent>cnttuchpadmainbut</parent>
		<properties>Top = 0
Left = 250
Height = 112
Width = 125
Caption = ""
Name = "Cmd13"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>949110327</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd14</objname>
		<parent>cnttuchpadmainbut</parent>
		<properties>Top = 0
Left = 375
Height = 112
Width = 125
Caption = ""
Name = "Cmd14"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1SG0NUEC5</uniqueid>
		<timestamp>949110327</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd21</objname>
		<parent>cnttuchpadmainbut</parent>
		<properties>Top = 112
Left = 0
Height = 112
Width = 125
Caption = ""
Name = "Cmd21"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1U00R6MO9</uniqueid>
		<timestamp>949110327</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd22</objname>
		<parent>cnttuchpadmainbut</parent>
		<properties>Top = 112
Left = 125
Height = 112
Width = 125
Caption = ""
Name = "Cmd22"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>949110327</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd23</objname>
		<parent>cnttuchpadmainbut</parent>
		<properties>Top = 112
Left = 250
Height = 112
Width = 125
Caption = ""
Name = "Cmd23"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1S802IZ6O</uniqueid>
		<timestamp>949110327</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd24</objname>
		<parent>cnttuchpadmainbut</parent>
		<properties>Top = 112
Left = 375
Height = 112
Width = 125
Caption = ""
Name = "Cmd24"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2CK0XFDCV</uniqueid>
		<timestamp>949110327</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd31</objname>
		<parent>cnttuchpadmainbut</parent>
		<properties>Top = 224
Left = 0
Height = 112
Width = 125
Caption = ""
Name = "Cmd31"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2CK0XFDCW</uniqueid>
		<timestamp>949110327</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd32</objname>
		<parent>cnttuchpadmainbut</parent>
		<properties>Top = 224
Left = 125
Height = 112
Width = 125
Caption = ""
Name = "Cmd32"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2CK0XFDCX</uniqueid>
		<timestamp>949110327</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd33</objname>
		<parent>cnttuchpadmainbut</parent>
		<properties>Top = 224
Left = 250
Height = 112
Width = 125
Caption = ""
Name = "Cmd33"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2CK0XFDCY</uniqueid>
		<timestamp>949110327</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd34</objname>
		<parent>cnttuchpadmainbut</parent>
		<properties>Top = 224
Left = 375
Height = 112
Width = 125
Caption = ""
Name = "Cmd34"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1RY0N4UD0</uniqueid>
		<timestamp>949110327</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd41</objname>
		<parent>cnttuchpadmainbut</parent>
		<properties>Top = 336
Left = 0
Height = 112
Width = 125
Caption = ""
Name = "Cmd41"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>949110327</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd42</objname>
		<parent>cnttuchpadmainbut</parent>
		<properties>Top = 336
Left = 125
Height = 112
Width = 125
Caption = ""
Name = "Cmd42"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1RZ0ZZVSE</uniqueid>
		<timestamp>949110327</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd43</objname>
		<parent>cnttuchpadmainbut</parent>
		<properties>Top = 336
Left = 250
Height = 112
Width = 125
Caption = ""
Name = "Cmd43"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>949110327</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd44</objname>
		<parent>cnttuchpadmainbut</parent>
		<properties>Top = 336
Left = 375
Height = 112
Width = 125
Caption = ""
Name = "Cmd44"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2CK0XFDD3</uniqueid>
		<timestamp>949110327</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd51</objname>
		<parent>cnttuchpadmainbut</parent>
		<properties>Top = 448
Left = 0
Height = 112
Width = 125
Caption = ""
Name = "Cmd51"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2CK0XFDD4</uniqueid>
		<timestamp>949110327</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd52</objname>
		<parent>cnttuchpadmainbut</parent>
		<properties>Top = 448
Left = 125
Height = 112
Width = 125
Caption = ""
Name = "Cmd52"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2CK0XFDD5</uniqueid>
		<timestamp>949110327</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd53</objname>
		<parent>cnttuchpadmainbut</parent>
		<properties>Top = 448
Left = 250
Height = 112
Width = 125
Caption = ""
Name = "Cmd53"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2CK0XFDD6</uniqueid>
		<timestamp>949110327</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd54</objname>
		<parent>cnttuchpadmainbut</parent>
		<properties>Top = 448
Left = 375
Height = 112
Width = 125
Caption = ""
Name = "Cmd54"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>COMMENT</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>0</timestamp>
		<class/>
		<classloc/>
		<baseclass/>
		<objname>cnttuchpadmainbut</objname>
		<parent/>
		<properties>Arial, 0, 9, 5, 15, 12, 32, 3, 0
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1S60XPNMV</uniqueid>
		<timestamp>951033368</timestamp>
		<class>frmidctlgridintop</class>
		<classloc>pos_v1.vcx</classloc>
		<baseclass>form</baseclass>
		<objname>frmidctlgridintop</objname>
		<parent/>
		<properties>Height = 224
Width = 358
DoCreate = .T.
Name = "frmidctlgridintop"
grd.Column1.Header1.FontSize = 14
grd.Column1.Header1.Name = "Header1"
grd.Column1.Text1.FontSize = 14
grd.Column1.Text1.Name = "Text1"
grd.Column1.FontSize = 14
grd.Column1.Name = "Column1"
grd.FontSize = 14
grd.HeaderHeight = 0
grd.Height = 224
grd.Left = 0
grd.RowHeight = 26
grd.Top = 0
grd.Width = 360
grd.lnoextendedrefresh = .T.
grd.Name = "grd"
cstmsghandler.Name = "cstmsghandler"
cstresizable.Name = "cstresizable"
Img1.Name = "Img1"
cstdatawork.Name = "cstdatawork"
</properties>
		<protected/>
		<methods>PROCEDURE grd.Column1.Text1.Click
*-------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: BASE_V1.VCX
* Class.Module....: TXTGR.DBLCLICK
* Called by.......: &lt;Sys Event&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Ïåðåäà÷à ñîîáùåíèÿ Edit ðîäèòåëüñêîìó îáúåêòó.
*-------------------------------------------------------
This.Parent.Parent.HandleKey(13,0) &amp;&amp; Íàæàòèå Enter
************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1>Class</reserved1>
		<reserved2>1</reserved2>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6>Pixels</reserved6>
		<reserved7>âûïàäàþùèé ñïèñîê</reserved7>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>COMMENT</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>0</timestamp>
		<class/>
		<classloc/>
		<baseclass/>
		<objname>frmidctlgridintop</objname>
		<parent/>
		<properties>Arial, 0, 9, 5, 15, 12, 32, 3, 0
Arial, 0, 14, 8, 23, 18, 51, 4, 1
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2CK18FOY9</uniqueid>
		<timestamp>976320951</timestamp>
		<class>container</class>
		<classloc/>
		<baseclass>container</baseclass>
		<objname>cnttxtinfo</objname>
		<parent/>
		<properties>Width = 96
Height = 36
BorderWidth = 2
BackColor = 255,255,255
Name = "cnttxtinfo"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1>Class</reserved1>
		<reserved2>3</reserved2>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6>Pixels</reserved6>
		<reserved7>èíôîðìàöèÿ î ñóììàõ â çàêàçå â êðàñèâîì âèäå</reserved7>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2DP0TEMO5</uniqueid>
		<timestamp>976320951</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>LblName</objname>
		<parent>cnttxtinfo</parent>
		<properties>AutoSize = .F.
FontBold = .T.
FontSize = 10
Caption = "Èòîãî"
Height = 16
Left = 4
Top = 2
Width = 38
BackColor = 255,255,255
Name = "LblName"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2DP0TEMO6</uniqueid>
		<timestamp>976320951</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>LblSumm</objname>
		<parent>cnttxtinfo</parent>
		<properties>AutoSize = .F.
FontBold = .T.
FontSize = 10
Alignment = 1
Caption = "9999999.99"
Height = 15
Left = 24
Top = 18
Width = 69
BackColor = 255,255,255
Name = "LblSumm"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>COMMENT</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>0</timestamp>
		<class/>
		<classloc/>
		<baseclass/>
		<objname>cnttxtinfo</objname>
		<parent/>
		<properties/>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2CK18FOY9</uniqueid>
		<timestamp>976355857</timestamp>
		<class>cnttuch</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>cnttuchmenumain</objname>
		<parent/>
		<properties>Width = 168
Height = 468
ncountelem = 18
npagemenu = 1
nactivcmd = 11
Name = "cnttuchmenumain"
Cmd11.Name = "Cmd11"
Cmd12.Name = "Cmd12"
</properties>
		<protected/>
		<methods>PROCEDURE resetallcmd
DODEFAULT()
this.activatecmd()
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1>Class</reserved1>
		<reserved2>19</reserved2>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6>Pixels</reserved6>
		<reserved7>êëàâèàòóðà tuch îñíîâãî ìåíþ ðàáîòû ñ çàêàçîì Ald 2*9 êíîïîê </reserved7>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1RY0N4UD0</uniqueid>
		<timestamp>976325456</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd11</objname>
		<parent>cnttuchmenumain</parent>
		<properties>Top = 0
Left = 0
Height = 52
Width = 84
FontBold = .T.
FontSize = 8
WordWrap = .T.
Caption = ""
BackColor = 17,217,6
Name = "Cmd11"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>976327043</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd12</objname>
		<parent>cnttuchmenumain</parent>
		<properties>Top = 0
Left = 84
Height = 52
Width = 84
FontBold = .T.
FontSize = 8
WordWrap = .T.
Caption = ""
BackColor = 124,126,131
Name = "Cmd12"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1SA0UTS7Y</uniqueid>
		<timestamp>976325456</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd21</objname>
		<parent>cnttuchmenumain</parent>
		<properties>Top = 52
Left = 0
Height = 52
Width = 84
FontBold = .T.
FontSize = 8
WordWrap = .T.
Caption = ""
BackColor = 124,126,131
Name = "Cmd21"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>976325456</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd22</objname>
		<parent>cnttuchmenumain</parent>
		<properties>Top = 52
Left = 84
Height = 52
Width = 84
FontBold = .T.
FontSize = 8
WordWrap = .T.
Caption = ""
BackColor = 124,126,131
Name = "Cmd22"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>976325456</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd31</objname>
		<parent>cnttuchmenumain</parent>
		<properties>Top = 104
Left = 0
Height = 52
Width = 84
FontBold = .T.
FontSize = 8
WordWrap = .T.
Caption = ""
BackColor = 124,126,131
Name = "Cmd31"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1SY124ZSI</uniqueid>
		<timestamp>976325456</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd32</objname>
		<parent>cnttuchmenumain</parent>
		<properties>Top = 104
Left = 84
Height = 52
Width = 84
FontBold = .T.
FontSize = 8
WordWrap = .T.
Caption = ""
BackColor = 124,126,131
Name = "Cmd32"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1SY12O86G</uniqueid>
		<timestamp>976325456</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd41</objname>
		<parent>cnttuchmenumain</parent>
		<properties>Top = 156
Left = 0
Height = 52
Width = 84
FontBold = .T.
FontSize = 8
WordWrap = .T.
Caption = ""
BackColor = 124,126,131
Name = "Cmd41"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1SZ0NUEEZ</uniqueid>
		<timestamp>976325456</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd42</objname>
		<parent>cnttuchmenumain</parent>
		<properties>Top = 156
Left = 84
Height = 52
Width = 84
FontBold = .T.
FontSize = 8
WordWrap = .T.
Caption = ""
BackColor = 124,126,131
Name = "Cmd42"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2CK197070</uniqueid>
		<timestamp>976325456</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd51</objname>
		<parent>cnttuchmenumain</parent>
		<properties>Top = 208
Left = 0
Height = 52
Width = 84
FontBold = .T.
FontSize = 8
WordWrap = .T.
Caption = ""
BackColor = 124,126,131
Name = "Cmd51"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2CK197071</uniqueid>
		<timestamp>976325456</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd52</objname>
		<parent>cnttuchmenumain</parent>
		<properties>Top = 208
Left = 84
Height = 52
Width = 84
FontBold = .T.
FontSize = 8
WordWrap = .T.
Caption = ""
BackColor = 124,126,131
Name = "Cmd52"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2CK197079</uniqueid>
		<timestamp>976325456</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd61</objname>
		<parent>cnttuchmenumain</parent>
		<properties>Top = 260
Left = 0
Height = 52
Width = 84
FontBold = .T.
FontSize = 8
WordWrap = .T.
Caption = ""
BackColor = 124,126,131
Name = "Cmd61"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2CK19707A</uniqueid>
		<timestamp>976325456</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd62</objname>
		<parent>cnttuchmenumain</parent>
		<properties>Top = 260
Left = 84
Height = 52
Width = 84
FontBold = .T.
FontSize = 8
WordWrap = .T.
Caption = ""
BackColor = 124,126,131
Name = "Cmd62"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2CK19707I</uniqueid>
		<timestamp>976325456</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd71</objname>
		<parent>cnttuchmenumain</parent>
		<properties>Top = 312
Left = 0
Height = 52
Width = 84
FontBold = .T.
FontSize = 8
WordWrap = .T.
Caption = ""
BackColor = 124,126,131
Name = "Cmd71"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2CK19707J</uniqueid>
		<timestamp>976325456</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd72</objname>
		<parent>cnttuchmenumain</parent>
		<properties>Top = 312
Left = 84
Height = 52
Width = 84
FontBold = .T.
FontSize = 8
WordWrap = .T.
Caption = ""
BackColor = 124,126,131
Name = "Cmd72"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1RY0N4UD0</uniqueid>
		<timestamp>976325456</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd81</objname>
		<parent>cnttuchmenumain</parent>
		<properties>Top = 364
Left = 0
Height = 52
Width = 84
FontBold = .T.
FontSize = 8
WordWrap = .T.
Caption = ""
BackColor = 124,126,131
Name = "Cmd81"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>976325456</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd82</objname>
		<parent>cnttuchmenumain</parent>
		<properties>Top = 364
Left = 84
Height = 52
Width = 84
FontBold = .T.
FontSize = 8
WordWrap = .T.
Caption = ""
BackColor = 124,126,131
Name = "Cmd82"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2DP0P7YB4</uniqueid>
		<timestamp>976325456</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd91</objname>
		<parent>cnttuchmenumain</parent>
		<properties>Top = 416
Left = 0
Height = 52
Width = 84
FontBold = .T.
FontSize = 8
WordWrap = .T.
Caption = ""
BackColor = 124,126,131
Name = "Cmd91"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2DP0P7YB5</uniqueid>
		<timestamp>976325456</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd92</objname>
		<parent>cnttuchmenumain</parent>
		<properties>Top = 416
Left = 84
Height = 52
Width = 84
FontBold = .T.
FontSize = 8
WordWrap = .T.
Caption = ""
BackColor = 124,126,131
Name = "Cmd92"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>COMMENT</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>0</timestamp>
		<class/>
		<classloc/>
		<baseclass/>
		<objname>cnttuchmenumain</objname>
		<parent/>
		<properties>Arial, 1, 8, 5, 14, 11, 29, 3, 0
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1SY124ZSI</uniqueid>
		<timestamp>976388723</timestamp>
		<class>frmedit</class>
		<classloc>baseform_v1.vcx</classloc>
		<baseclass>form</baseclass>
		<objname>frmmodlist</objname>
		<parent/>
		<properties>DataSession = 1
Height = 339
Width = 370
ShowWindow = 1
DoCreate = .T.
BorderStyle = 1
Caption = "                              Ìîäèôèêàòîðû"
ControlBox = .F.
BackColor = 241,239,241
Name = "frmmodlist"
cstmsghandler.Top = 185
cstmsghandler.Left = 40
cstmsghandler.Name = "cstmsghandler"
cstresizable.Top = 185
cstresizable.Left = 12
cstresizable.Name = "cstresizable"
Img1.Name = "Img1"
cstdatawork.Top = 186
cstdatawork.Left = 68
cstdatawork.Name = "cstdatawork"
</properties>
		<protected/>
		<methods>PROCEDURE _handlecntcancelsaveevent
*-------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: RST_V1.VCX
* Class.Module....: FRMMODLIST._HANDLECNTCANCELSAVEEVENT
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;tcMessage&gt;
* Returns.........: &lt;none&gt;
* Notes...........: &lt;~&gt;
*-------------------------------------------------------
LPARAMETERS tcMessage

WITH This
	IF tcMessage = [OK]
		*--Ñîõðàíÿåì ðåçóëüòàòû âûáîðà â ñâîéñòâå .uRetVal
		.uRetVal = []
		
		SELECT lvModList
		SCAN FOR lvModList.Mark
			.uRetVal = .uRetVal+ALLTRIM(STR(lvModList.ID))+[,]
			SELECT lvModList
		ENDSCAN

		*--Ïðîâåðèì, âûáðàí ëè ìîäèôèêàòîð (õîòÿ áû îäèí)
		IF EMPTY(.uRetVal)
			MESSAGEBOX([Äëÿ âûáîðà ìîäèôèêàòîðîâ íåîáõîäèìî èõ ïîìåòèòü!],48,[Îêíî ñîîáùåíèé])
			RETURN .F.
		ENDIF
	ELSE
		*--tcMessage = [ESC]
		.uRetVal = .F.
	ENDIF
		
	*--Ñêðûâåì ôîðìó
	.Hide()
	*------------------------------------------------------------------------------
ENDWITH
************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************
ENDPROC
PROCEDURE Init
*------------------------------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: RST_V1.VCX
* Class.Module....: FRMMODLIST.INIT
* Called by.......: &lt;Sys Event&gt;
* Parameters......: tnTvrID - êîä áëþäà
* Returns.........: &lt;none&gt;
* Notes...........:
*------------------------------------------------------------------------------
LPARAMETERS tnTvrID
LOCAL _PARAM

*--Âûïîëíèì ìåòîä ðîäèòåëüñêîãî êëàññà
DODEFAULT()
*------------------------------------------------------------------------------

_PARAM = tnTvrID
REQUERY([lvModList])

ENDPROC
PROCEDURE Load
*------------------------------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: RST_V1.VCX
* Class.Module....: FRMMODLIST.LOAD
* Called by.......: &lt;Sys Event&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Çàãðóçêà äàííûõ äëÿ ôîðìû.
*------------------------------------------------------------------------------

*--Âûïîëíèì ìåòîä ðîäèòåëüñêîãî êëàññà
DODEFAULT()
*------------------------------------------------------------------------------

*--Îòêðûâàåì è óñòàíàâëèâàåì òåêóùóþ ÁÄ
IF !DBUSED([BASIS])
	OPEN DATABASE BASIS
ENDIF
***
SET DATABASE TO BASIS	
*------------------------------------------------------------------------------

*--Îòêðûâàåì ñïèñîê ìîäèôèêàòîðîâ (ïóñòîé)
USE lvModList IN 0 NODATA
CURSORSETPROP([BUFFERING],3,[lvModList])
*------------------------------------------------------------------------------

*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1>Class</reserved1>
		<reserved2>7</reserved2>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6>Pixels</reserved6>
		<reserved7>ñïèñîê ïðè÷èí îòêàçà îò áëþäà</reserved7>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1SY12O86G</uniqueid>
		<timestamp>976388723</timestamp>
		<class>cntcancelsavehandled</class>
		<classloc>baseform_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>Cntcancelsavehandled1</objname>
		<parent>frmmodlist</parent>
		<properties>Top = 305
Left = 34
Width = 303
Height = 32
TabIndex = 2
TabStop = .F.
BackColor = 241,239,241
ZOrderSet = 12
Name = "Cntcancelsavehandled1"
cmdCancel.Top = 0
cmdCancel.Left = 0
cmdCancel.Height = 32
cmdCancel.Width = 140
cmdCancel.FontBold = .T.
cmdCancel.FontSize = 12
cmdCancel.ForeColor = 0,0,255
cmdCancel.BackColor = 241,239,241
cmdCancel.Name = "cmdCancel"
cmdOk.Top = 0
cmdOk.Left = 164
cmdOk.Height = 32
cmdOk.Width = 140
cmdOk.FontBold = .T.
cmdOk.FontSize = 12
cmdOk.ForeColor = 0,0,255
cmdOk.BackColor = 241,239,241
cmdOk.Name = "cmdOk"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1T00T6BME</uniqueid>
		<timestamp>976388723</timestamp>
		<class>grd</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>grid</baseclass>
		<objname>GrdMod</objname>
		<parent>frmmodlist</parent>
		<properties>ColumnCount = 2
FontSize = 20
HeaderHeight = 0
Height = 302
Left = 0
Panel = 1
ReadOnly = .F.
RecordSource = "lvModList"
RowHeight = 36
ScrollBars = 2
Top = 0
Width = 370
AllowAutoColumnFit = 2
_activerowhighlight = .F.
Name = "GrdMod"
Column1.FontSize = 20
Column1.ColumnOrder = 1
Column1.ControlSource = "lvModList.mark"
Column1.Width = 30
Column1.ReadOnly = .F.
Column1.Sparse = .F.
Column1.ForeColor = 0,0,0
Column1.Name = "Column1"
Column2.FontSize = 10
Column2.ColumnOrder = 2
Column2.ControlSource = "lvModList.NM"
Column2.Width = 308
Column2.ReadOnly = .T.
Column2.ForeColor = 0,0,0
Column2.Name = "Column2"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1T00T6BMF</uniqueid>
		<timestamp>884108438</timestamp>
		<class>header</class>
		<classloc/>
		<baseclass>header</baseclass>
		<objname>Header1</objname>
		<parent>frmmodlist.GrdMod.Column1</parent>
		<properties>FontSize = 20
Caption = "Header1"
Name = "Header1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1T00T6BMG</uniqueid>
		<timestamp>976388723</timestamp>
		<class>chk</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>checkbox</baseclass>
		<objname>CHK1</objname>
		<parent>frmmodlist.GrdMod.Column1</parent>
		<properties>Top = 23
Left = 13
FontSize = 20
Alignment = 0
Caption = " "
ForeColor = 0,0,0
ReadOnly = .F.
Name = "CHK1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1T00T6BMU</uniqueid>
		<timestamp>884108438</timestamp>
		<class>header</class>
		<classloc/>
		<baseclass>header</baseclass>
		<objname>Header1</objname>
		<parent>frmmodlist.GrdMod.Column2</parent>
		<properties>FontSize = 20
Caption = "Header1"
Name = "Header1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1T00T6BMV</uniqueid>
		<timestamp>884108438</timestamp>
		<class>textbox</class>
		<classloc/>
		<baseclass>textbox</baseclass>
		<objname>Text1</objname>
		<parent>frmmodlist.GrdMod.Column2</parent>
		<properties>FontSize = 10
BorderStyle = 0
Margin = 0
ReadOnly = .T.
Name = "Text1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>COMMENT</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>0</timestamp>
		<class/>
		<classloc/>
		<baseclass/>
		<objname>frmmodlist</objname>
		<parent/>
		<properties>Arial, 0, 9, 5, 15, 12, 32, 3, 0
Arial, 1, 12, 8, 20, 15, 42, 4, 1
Arial, 0, 20, 12, 33, 26, 72, 6, 1
Arial, 0, 10, 6, 16, 13, 35, 3, 0
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1S90QTAKE</uniqueid>
		<timestamp>976462609</timestamp>
		<class>cntnumericpad</class>
		<classloc>comctl_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>cntnumericpad</objname>
		<parent/>
		<properties>lfirstclick = .T.
Name = "cntnumericpad"
ImgButton0.Picture = ..\graphic\0_.gif
ImgButton0.Stretch = 2
ImgButton0.Height = 50
ImgButton0.Left = 0
ImgButton0.Top = 150
ImgButton0.Width = 50
ImgButton0.downpicture = 0_pr.gif
ImgButton0.Name = "ImgButton0"
ImgButtonPoint.Picture = ..\graphic\point_.gif
ImgButtonPoint.Height = 50
ImgButtonPoint.Width = 50
ImgButtonPoint.downpicture = point_pr.gif
ImgButtonPoint.Name = "ImgButtonPoint"
ImgButton1.Picture = ..\graphic\1_.gif
ImgButton1.BackStyle = 1
ImgButton1.Height = 50
ImgButton1.Width = 50
ImgButton1.ColorSource = 0
ImgButton1.downpicture = 1_pr.gif
ImgButton1.Name = "ImgButton1"
ImgButton2.Picture = ..\graphic\2_.gif
ImgButton2.Height = 50
ImgButton2.Width = 50
ImgButton2.downpicture = 2_pr.gif
ImgButton2.Name = "ImgButton2"
ImgButton3.Picture = ..\graphic\3_1.gif
ImgButton3.Height = 50
ImgButton3.Width = 50
ImgButton3.downpicture = 3_pr.gif
ImgButton3.Name = "ImgButton3"
ImgButton4.Picture = ..\graphic\4_.gif
ImgButton4.Height = 50
ImgButton4.Width = 50
ImgButton4.downpicture = 4_pr.gif
ImgButton4.Name = "ImgButton4"
ImgButton5.Picture = ..\graphic\5_.gif
ImgButton5.Height = 50
ImgButton5.Width = 50
ImgButton5.downpicture = 5_pr.gif
ImgButton5.Name = "ImgButton5"
ImgButton6.Picture = ..\graphic\6_.gif
ImgButton6.Height = 50
ImgButton6.Width = 50
ImgButton6.downpicture = 6_pr.gif
ImgButton6.Name = "ImgButton6"
ImgButton7.Picture = ..\graphic\7_.gif
ImgButton7.Height = 50
ImgButton7.Width = 50
ImgButton7.downpicture = 7_pr.gif
ImgButton7.Name = "ImgButton7"
ImgButton8.Picture = ..\graphic\8_.gif
ImgButton8.Height = 50
ImgButton8.Width = 50
ImgButton8.downpicture = 8_pr.gif
ImgButton8.Name = "ImgButton8"
ImgButton9.Picture = ..\graphic\9_.gif
ImgButton9.Height = 50
ImgButton9.Width = 50
ImgButton9.downpicture = 9_pr.gif
ImgButton9.Name = "ImgButton9"
IMGBUTTONDELETE.Picture = ..\graphic\del_.gif
IMGBUTTONDELETE.Height = 50
IMGBUTTONDELETE.Width = 50
IMGBUTTONDELETE.downpicture = del_pr.gif
IMGBUTTONDELETE.Name = "IMGBUTTONDELETE"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1>Class</reserved1>
		<reserved2>1</reserved2>
		<reserved3>lfirstclick ïåðâîå íàæàòèå êíîïêè
</reserved3>
		<reserved4/>
		<reserved5/>
		<reserved6>Pixels</reserved6>
		<reserved7>Êîíòåéíåð äëÿ êàëüêóëÿòîðà</reserved7>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>COMMENT</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>0</timestamp>
		<class/>
		<classloc/>
		<baseclass/>
		<objname>cntnumericpad</objname>
		<parent/>
		<properties/>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2CK18FOY9</uniqueid>
		<timestamp>976574785</timestamp>
		<class>cnttuch</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>cnttuchordinfo</objname>
		<parent/>
		<properties>Width = 440
Height = 52
ncountx = 6
ncountelem = 6
Name = "cnttuchordinfo"
Cmd11.Left = 0
Cmd11.Width = 73
Cmd11.FontSize = 9
Cmd11.Caption = "Íîâûé çàêàç"
Cmd11.Enabled = .T.
Cmd11.Visible = .T.
Cmd11.BackColor = 228,224,201
Cmd11.Name = "Cmd11"
Cmd12.Left = 74
Cmd12.Width = 73
Cmd12.FontSize = 9
Cmd12.Caption = "Êàðòà ãîñòÿ"
Cmd12.BackColor = 228,224,201
Cmd12.Name = "Cmd12"
LBL1.Name = "LBL1"
</properties>
		<protected/>
		<methods>PROCEDURE activatecmd
LPARAMETERS lnCmdNo
NODEFAULT
ENDPROC
PROCEDURE nextpage
NODEFAULT
ENDPROC
PROCEDURE onclickcmd
LPARAMETERS lnStarting, lnCmd
NODEFAULT
ENDPROC
PROCEDURE paint
LPARAMETER	lnPageNo
NODEFAULT
ENDPROC
PROCEDURE resetallcmd
NODEFAULT
ENDPROC
PROCEDURE selectelement
NODEFAULT
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1>Class</reserved1>
		<reserved2>5</reserved2>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6>Pixels</reserved6>
		<reserved7>êëàâèàòóðà tuch èçìåíåíèÿ äàííûõ î çàêàçå Ald 6 êíîïîê </reserved7>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1RZ0ZZVSE</uniqueid>
		<timestamp>976572436</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd13</objname>
		<parent>cnttuchordinfo</parent>
		<properties>Top = 0
Left = 147
Height = 52
Width = 73
FontBold = .T.
Caption = "Ñîîáùåíèå"
BackColor = 228,224,201
Name = "Cmd13"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>976572436</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd14</objname>
		<parent>cnttuchordinfo</parent>
		<properties>Top = 0
Left = 220
Height = 52
Width = 73
FontBold = .T.
Caption = "Êîëè- ÷åñòâî ãîñòåé"
BackColor = 228,224,201
Name = "Cmd14"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1SG0NUEC5</uniqueid>
		<timestamp>976572436</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd15</objname>
		<parent>cnttuchordinfo</parent>
		<properties>Top = 0
Left = 293
Height = 52
Width = 73
FontBold = .T.
Caption = "Âûáðàòü ñòîëèê"
BackColor = 228,224,201
Name = "Cmd15"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1U00R6MO9</uniqueid>
		<timestamp>976572436</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd16</objname>
		<parent>cnttuchordinfo</parent>
		<properties>Top = 0
Left = 366
Height = 52
Width = 73
FontBold = .T.
Caption = "Äðóãèå çàêàçû"
BackColor = 228,224,201
Name = "Cmd16"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>COMMENT</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>0</timestamp>
		<class/>
		<classloc/>
		<baseclass/>
		<objname>cnttuchordinfo</objname>
		<parent/>
		<properties>Arial, 1, 9, 6, 15, 12, 32, 3, 0
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_QYW0ZV9O9</uniqueid>
		<timestamp>976581002</timestamp>
		<class>commandbutton</class>
		<classloc/>
		<baseclass>commandbutton</baseclass>
		<objname>cmd</objname>
		<parent/>
		<properties>Height = 25
Width = 100
WordWrap = .T.
Caption = ""
starting = 
lskip = .F.
Name = "cmd"
</properties>
		<protected/>
		<methods>PROCEDURE Click
this.Parent.onclickcmd(this.starting, VAL(SUBSTR(this.Name,4)))

ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1>Class</reserved1>
		<reserved2>1</reserved2>
		<reserved3>starting Íàçâàíèå îïåðàöèè, êîòîðóþ çàïóñêàåò äàííàÿ êíîïî÷êà
lskip ïðîïóñêàòü ïðè îáíîâëåíèè Enable
</reserved3>
		<reserved4>..\bitmaps\pushb.bmp</reserved4>
		<reserved5>..\bitmaps\pushb.bmp</reserved5>
		<reserved6>Pixels</reserved6>
		<reserved7>Áàçîâûé êëàññ CommandButton äëÿ TuchPad</reserved7>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>COMMENT</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>0</timestamp>
		<class/>
		<classloc/>
		<baseclass/>
		<objname>cmd</objname>
		<parent/>
		<properties>Arial, 0, 9, 5, 15, 12, 32, 3, 0
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2CK18FOY9</uniqueid>
		<timestamp>976581019</timestamp>
		<class>cnttuch</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>cnttuchordpay</objname>
		<parent/>
		<properties>Width = 192
Height = 92
ncountelem = 8
ncountx = 4
Name = "cnttuchordpay"
Cmd11.Name = "Cmd11"
Cmd12.Name = "Cmd12"
Lbl1.Name = "Lbl1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1>Class</reserved1>
		<reserved2>5</reserved2>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6>Pixels</reserved6>
		<reserved7>êëàâèàòóðà tuch îïëàòû çàêàçà Ald 1*2+1*2 êíîïîê </reserved7>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1RY0N4UD0</uniqueid>
		<timestamp>976574884</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd24</objname>
		<parent>cnttuchordpay</parent>
		<properties>Top = 46
Left = 96
Height = 46
Width = 96
FontBold = .T.
Picture = ..\graphic\bank_.gif
DownPicture = ..\graphic\bank_pr.gif
Caption = "íàëè÷íûìè"
BackColor = 0,255,0
Name = "Cmd24"
</properties>
		<protected/>
		<methods>PROCEDURE Click
thisform._payOrder
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>976581019</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd14</objname>
		<parent>cnttuchordpay</parent>
		<properties>Top = 0
Left = 96
Height = 46
Width = 96
FontBold = .T.
Caption = "äðóãèå ñïîñîáû îïëàòû"
Enabled = .F.
BackColor = 0,255,0
lskip = .T.
Name = "Cmd14"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1SA0UTS7Y</uniqueid>
		<timestamp>976574884</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd23</objname>
		<parent>cnttuchordpay</parent>
		<properties>Top = 46
Left = 0
Height = 46
Width = 96
FontBold = .T.
Picture = ..\graphic\servis_printer2007.gif
Caption = "ìàðêà"
BackColor = 0,255,0
Name = "Cmd23"
</properties>
		<protected/>
		<methods>PROCEDURE Click
thisform._printmarka
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>976574884</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd13</objname>
		<parent>cnttuchordpay</parent>
		<properties>Top = 0
Left = 0
Height = 46
Width = 96
FontBold = .T.
Picture = ..\graphic\prdcheck_new_.gif
DownPicture = ..\graphic\prdcheck_new_pr.gif
Caption = "ïðåä÷åê"
BackColor = 0,255,0
Name = "Cmd13"
</properties>
		<protected/>
		<methods>PROCEDURE Click
thisform._printpredcheck
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>COMMENT</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>0</timestamp>
		<class/>
		<classloc/>
		<baseclass/>
		<objname>cnttuchordpay</objname>
		<parent/>
		<properties>Arial, 1, 8, 5, 14, 11, 29, 3, 0
Arial, 1, 9, 6, 15, 12, 32, 3, 0
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1SY124ZSI</uniqueid>
		<timestamp>977426646</timestamp>
		<class>frmedit</class>
		<classloc>baseform_v1.vcx</classloc>
		<baseclass>form</baseclass>
		<objname>frmcancelreason</objname>
		<parent/>
		<properties>Height = 155
Width = 384
ShowWindow = 1
DoCreate = .T.
BorderStyle = 1
Caption = "Ïðè÷èíû îòêàçà îò áëþäà"
ControlBox = .F.
BackColor = 241,239,241
Name = "frmcancelreason"
cstmsghandler.Name = "cstmsghandler"
cstresizable.Name = "cstresizable"
Img1.Name = "Img1"
cstdatawork.Name = "cstdatawork"
</properties>
		<protected/>
		<methods>PROCEDURE _handlecntcancelsaveevent
*-------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: RST_V1.VCX
* Class.Module....: FRMCANCELREASON._HANDLECNTCANCELSAVEEVENT
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;tcMessage&gt;
* Returns.........: &lt;none&gt;
* Notes...........: &lt;~&gt;
*-------------------------------------------------------
LPARAMETERS tcMessage

WITH This
	IF tcMessage = [OK]
		*--Ïðîâåðèì, âûáðàíà ëè ïðè÷èíà îòêàçà îò áëþäà
		IF EMPTY(.cntRsn.value)
			MESSAGEBOX([Íåîáõîäèìî âûáðàòü ïðè÷èíó îòêàçà îò áëþäà!],48,[Îêíî ñîîáùåíèé])
			.cntRsn.txtText.SetFocus()
			RETURN .F.
		ENDIF
		
		*--Ñîõðàíÿåì ðåçóëüòàòû âûáîðâ â ñâîéñòâå .uRetVal
		pcReason = ALLTRIM(lvCancelReasonList.Nm)
		.uRetVal = .cntRsn.value
	ELSE
		*--tcMessage = [ESC]
		.uRetVal = .F.
	ENDIF
		
	*--Ñêðûâåì ôîðìó
	.Hide()
	*------------------------------------------------------------------------------
ENDWITH
************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************
ENDPROC
PROCEDURE Load
*------------------------------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: RST_V1.VCX
* Class.Module....: FRMCANCELREASON.LOAD
* Called by.......: &lt;Sys Event&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Çàãðóçêà äàííûõ äëÿ ôîðìû.
*------------------------------------------------------------------------------

*--Âûïîëíèì ìåòîä ðîäèòåëüñêîãî êëàññà
DODEFAULT()
*------------------------------------------------------------------------------

*--Îòêðûâàåì è óñòàíàâëèâàåì òåêóùóþ ÁÄ
IF !DBUSED([BASIS])
	OPEN DATABASE BASIS
ENDIF
***
SET DATABASE TO BASIS	
*------------------------------------------------------------------------------

*--Îòêðûâàåì Alias äëÿ âûïàäàþùåãî ñïèñêà
USE lvCancelReasonList IN 0
CURSORSETPROP([BUFFERING],3,[lvCancelReasonList])
*------------------------------------------------------------------------------

*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1>Class</reserved1>
		<reserved2>3</reserved2>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6>Pixels</reserved6>
		<reserved7>ñïèñîê ïðè÷èí îòêàçà îò áëþäà</reserved7>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1SY12O86G</uniqueid>
		<timestamp>977426646</timestamp>
		<class>cntcancelsavehandled</class>
		<classloc>baseform_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>Cntcancelsavehandled1</objname>
		<parent>frmcancelreason</parent>
		<properties>Top = 55
Left = 36
Width = 312
Height = 84
TabIndex = 2
TabStop = .F.
ZOrderSet = 12
Name = "Cntcancelsavehandled1"
cmdCancel.Top = 0
cmdCancel.Left = 0
cmdCancel.Height = 84
cmdCancel.Width = 132
cmdCancel.FontBold = .T.
cmdCancel.FontSize = 12
cmdCancel.Caption = "Îòìåíèòü"
cmdCancel.ForeColor = 0,0,255
cmdCancel.BackColor = 241,239,241
cmdCancel.DisabledForeColor = 0,0,255
cmdCancel.DisabledBackColor = 241,239,241
cmdCancel.Name = "cmdCancel"
cmdOk.Top = 0
cmdOk.Left = 181
cmdOk.Height = 84
cmdOk.Width = 132
cmdOk.FontBold = .T.
cmdOk.FontSize = 12
cmdOk.Caption = "Îê "
cmdOk.ForeColor = 0,0,255
cmdOk.BackColor = 241,239,241
cmdOk.DisabledForeColor = 0,0,255
cmdOk.DisabledBackColor = 241,239,241
cmdOk.Name = "cmdOk"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1SZ0NUEEZ</uniqueid>
		<timestamp>977426646</timestamp>
		<class>cntidctlgrid</class>
		<classloc>comidctl_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>cntRsn</objname>
		<parent>frmcancelreason</parent>
		<properties>Top = 0
Left = 0
Width = 383
Height = 43
BackStyle = 0
TabIndex = 1
ForeColor = 128,0,255
BackColor = 241,239,241
ZOrderSet = 11
_rsaliasname = lvCancelReasonList
_rsfieldnameid = ID
_rsfieldnametext = NM
_controlsourcetype = 0
_selectobject = frmidctlgridintop;rst_v1.vcx
Name = "cntRsn"
txtText.FontSize = 16
txtText.BackStyle = 0
txtText.Value = 
txtText.Format = ""
txtText.Height = 36
txtText.InputMask = ""
txtText.Left = 0
txtText.Top = 3
txtText.Width = 341
txtText.ForeColor = 128,0,255
txtText.BackColor = 241,239,241
txtText.DisabledBackColor = 252,242,218
txtText._highlightself = .F.
txtText.Name = "txtText"
cmdShow.Top = -1
cmdShow.Left = 340
cmdShow.Height = 42
cmdShow.Width = 44
cmdShow.BackColor = 241,239,241
cmdShow.Name = "cmdShow"
cmdClear.Top = 0
cmdClear.Left = 297
cmdClear.Height = 42
cmdClear.Enabled = .F.
cmdClear.Visible = .F.
cmdClear.Name = "cmdClear"
CmdTree.Name = "CmdTree"
Olecommprox1.Top = 0
Olecommprox1.Left = 36
Olecommprox1.Height = 16
Olecommprox1.Width = 38
Olecommprox1.Name = "Olecommprox1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>COMMENT</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>0</timestamp>
		<class/>
		<classloc/>
		<baseclass/>
		<objname>frmcancelreason</objname>
		<parent/>
		<properties>Arial, 0, 9, 5, 15, 12, 32, 3, 0
Arial, 1, 12, 8, 20, 15, 42, 4, 1
Arial, 0, 16, 9, 25, 19, 56, 5, 1
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2CK18FOY9</uniqueid>
		<timestamp>977821383</timestamp>
		<class>cnttuch</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>cnttablepad</objname>
		<parent/>
		<properties>Width = 800
Height = 602
ncountx = 12
ncountelem = 96
Name = "cnttablepad"
Cmd11.Top = 1
Cmd11.Left = 2
Cmd11.Height = 77
Cmd11.Width = 68
Cmd11.Visible = .F.
Cmd11.BackColor = 236,233,216
Cmd11.ZOrderSet = 1
Cmd11.Name = "Cmd11"
Cmd12.Top = 1
Cmd12.Left = 68
Cmd12.Height = 77
Cmd12.Width = 68
Cmd12.Visible = .F.
Cmd12.BackColor = 236,233,216
Cmd12.ZOrderSet = 2
Cmd12.Name = "Cmd12"
LBL1.Enabled = .F.
LBL1.Left = 92
LBL1.Top = 52
LBL1.Visible = .F.
LBL1.ZOrderSet = 3
LBL1.Name = "LBL1"
</properties>
		<protected/>
		<methods>PROCEDURE Init
LPARAMETERS nLeft
IF PCOUNT()&lt;1
	this.left = 168
ENDIF
ENDPROC
PROCEDURE paint
LPARAMETER	lnPageNo
*--îòêðîåì ñïèñîê ñòîëîâ äàííîãî îôèöèàíòà
USE IN SELECT([lvWaiterTableView])
_PARAM1 = VAL(oRes.GetParam([RST],[TYPEORD]))
_PARAM2 = spUserClt()
USE lvWaiterTableView IN 0
*-- ïîäãîòîâèì äàííûå äëÿ êàðòû ñòîëîâ
lnTblPar = VAL(oRes.GetParam([RST],[TBLPAR]))
DO spTableMap WITH lnTblPar
*------------------------------------------------------------------------------
************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1>Class</reserved1>
		<reserved2>96</reserved2>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6>Pixels</reserved6>
		<reserved7>êëàâèàòóðà ñòîëîâ Ald</reserved7>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1RY0N4UD0</uniqueid>
		<timestamp>977820755</timestamp>
		<class>img</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>image</baseclass>
		<objname>Img</objname>
		<parent>cnttablepad</parent>
		<properties>Stretch = 2
Height = 602
Left = 0
Top = 0
Width = 800
ZOrderSet = 0
Name = "Img"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1RZ0ZZVSE</uniqueid>
		<timestamp>977820755</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd13</objname>
		<parent>cnttablepad</parent>
		<properties>Top = 1
Left = 134
Height = 77
Width = 68
Visible = .F.
ZOrderSet = 4
Name = "Cmd13"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>977820755</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd14</objname>
		<parent>cnttablepad</parent>
		<properties>Top = 1
Left = 200
Height = 77
Width = 68
Visible = .F.
ZOrderSet = 5
Name = "Cmd14"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1SG0NUEC5</uniqueid>
		<timestamp>977820755</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd15</objname>
		<parent>cnttablepad</parent>
		<properties>Top = 1
Left = 266
Height = 77
Width = 68
Visible = .F.
ZOrderSet = 6
Name = "Cmd15"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1U00R6MO9</uniqueid>
		<timestamp>977820755</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd16</objname>
		<parent>cnttablepad</parent>
		<properties>Top = 1
Left = 332
Height = 77
Width = 68
Visible = .F.
ZOrderSet = 7
Name = "Cmd16"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>977820755</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd17</objname>
		<parent>cnttablepad</parent>
		<properties>Top = 1
Left = 398
Height = 77
Width = 68
Visible = .F.
ZOrderSet = 8
Name = "Cmd17"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2KU0OHMD2</uniqueid>
		<timestamp>977820755</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd110</objname>
		<parent>cnttablepad</parent>
		<properties>Top = 1
Left = 596
Height = 77
Width = 68
Visible = .F.
ZOrderSet = 9
Name = "Cmd110"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2KU0OHMDM</uniqueid>
		<timestamp>977820755</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd112</objname>
		<parent>cnttablepad</parent>
		<properties>Top = 1
Left = 728
Height = 77
Width = 68
Visible = .F.
ZOrderSet = 10
Name = "Cmd112"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1RY0N4UD0</uniqueid>
		<timestamp>977820755</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd111</objname>
		<parent>cnttablepad</parent>
		<properties>Top = 1
Left = 662
Height = 77
Width = 68
Visible = .F.
ZOrderSet = 10
Name = "Cmd111"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>977820755</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd18</objname>
		<parent>cnttablepad</parent>
		<properties>Top = 1
Left = 464
Height = 77
Width = 68
Visible = .F.
ZOrderSet = 9
Name = "Cmd18"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1RZ0ZZVSE</uniqueid>
		<timestamp>977820755</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd19</objname>
		<parent>cnttablepad</parent>
		<properties>Top = 1
Left = 530
Height = 77
Width = 68
Visible = .F.
ZOrderSet = 10
Name = "Cmd19"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1SA0UTS7Y</uniqueid>
		<timestamp>977820755</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd21</objname>
		<parent>cnttablepad</parent>
		<properties>Top = 76
Left = 2
Height = 77
Width = 68
Visible = .F.
ZOrderSet = 11
Name = "Cmd21"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>977820755</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd22</objname>
		<parent>cnttablepad</parent>
		<properties>Top = 76
Left = 68
Height = 77
Width = 68
Visible = .F.
ZOrderSet = 12
Name = "Cmd22"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1WW0QWPEA</uniqueid>
		<timestamp>977820755</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd23</objname>
		<parent>cnttablepad</parent>
		<properties>Top = 76
Left = 134
Height = 77
Width = 68
Visible = .F.
ZOrderSet = 13
Name = "Cmd23"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>977820755</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd24</objname>
		<parent>cnttablepad</parent>
		<properties>Top = 76
Left = 200
Height = 77
Width = 68
Visible = .F.
ZOrderSet = 14
Name = "Cmd24"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1SA02X99M</uniqueid>
		<timestamp>977820755</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd25</objname>
		<parent>cnttablepad</parent>
		<properties>Top = 76
Left = 266
Height = 77
Width = 68
Visible = .F.
ZOrderSet = 15
Name = "Cmd25"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2KU0OHMDN</uniqueid>
		<timestamp>977820755</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd212</objname>
		<parent>cnttablepad</parent>
		<properties>Top = 76
Left = 728
Height = 77
Width = 68
Visible = .F.
ZOrderSet = 19
Name = "Cmd212"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2KU0OHMD5</uniqueid>
		<timestamp>977820755</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd210</objname>
		<parent>cnttablepad</parent>
		<properties>Top = 76
Left = 596
Height = 77
Width = 68
Visible = .F.
ZOrderSet = 18
Name = "Cmd210"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>977820755</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd211</objname>
		<parent>cnttablepad</parent>
		<properties>Top = 76
Left = 662
Height = 77
Width = 68
Visible = .F.
ZOrderSet = 19
Name = "Cmd211"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>977820755</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd26</objname>
		<parent>cnttablepad</parent>
		<properties>Top = 76
Left = 332
Height = 77
Width = 68
Visible = .F.
ZOrderSet = 16
Name = "Cmd26"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1S60XPNMV</uniqueid>
		<timestamp>977820755</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd27</objname>
		<parent>cnttablepad</parent>
		<properties>Top = 76
Left = 398
Height = 77
Width = 68
Visible = .F.
ZOrderSet = 17
Name = "Cmd27"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>977820755</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd28</objname>
		<parent>cnttablepad</parent>
		<properties>Top = 76
Left = 464
Height = 77
Width = 68
Visible = .F.
ZOrderSet = 18
Name = "Cmd28"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1SG0NUEC5</uniqueid>
		<timestamp>977820755</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd29</objname>
		<parent>cnttablepad</parent>
		<properties>Top = 76
Left = 530
Height = 77
Width = 68
Visible = .F.
ZOrderSet = 19
Name = "Cmd29"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>977820755</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd31</objname>
		<parent>cnttablepad</parent>
		<properties>Top = 151
Left = 2
Height = 77
Width = 68
Visible = .F.
ZOrderSet = 20
Name = "Cmd31"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2KU0OHMDP</uniqueid>
		<timestamp>977820755</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd312</objname>
		<parent>cnttablepad</parent>
		<properties>Top = 151
Left = 728
Height = 77
Width = 68
Visible = .F.
ZOrderSet = 27
Name = "Cmd312"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1SY124ZSI</uniqueid>
		<timestamp>977820755</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd32</objname>
		<parent>cnttablepad</parent>
		<properties>Top = 151
Left = 68
Height = 77
Width = 68
Visible = .F.
ZOrderSet = 21
Name = "Cmd32"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2KU0OHMD6</uniqueid>
		<timestamp>977820755</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd310</objname>
		<parent>cnttablepad</parent>
		<properties>Top = 151
Left = 596
Height = 77
Width = 68
Visible = .F.
ZOrderSet = 26
Name = "Cmd310"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1RZ0ZZVSE</uniqueid>
		<timestamp>977820755</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd311</objname>
		<parent>cnttablepad</parent>
		<properties>Top = 151
Left = 662
Height = 77
Width = 68
Visible = .F.
ZOrderSet = 27
Name = "Cmd311"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1X00PAG8M</uniqueid>
		<timestamp>977820755</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd33</objname>
		<parent>cnttablepad</parent>
		<properties>Top = 151
Left = 134
Height = 77
Width = 68
Visible = .F.
ZOrderSet = 22
Name = "Cmd33"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1RY0N4UD0</uniqueid>
		<timestamp>977820755</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd35</objname>
		<parent>cnttablepad</parent>
		<properties>Top = 151
Left = 266
Height = 77
Width = 68
Visible = .F.
ZOrderSet = 23
Name = "Cmd35"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1RY0N4UD0</uniqueid>
		<timestamp>977820755</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd36</objname>
		<parent>cnttablepad</parent>
		<properties>Top = 151
Left = 332
Height = 77
Width = 68
Visible = .F.
ZOrderSet = 24
Name = "Cmd36"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1RY0N4UD0</uniqueid>
		<timestamp>977820755</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd37</objname>
		<parent>cnttablepad</parent>
		<properties>Top = 151
Left = 398
Height = 77
Width = 68
Visible = .F.
ZOrderSet = 25
Name = "Cmd37"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1U00R6MO9</uniqueid>
		<timestamp>977820755</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd38</objname>
		<parent>cnttablepad</parent>
		<properties>Top = 151
Left = 464
Height = 77
Width = 68
Visible = .F.
ZOrderSet = 26
Name = "Cmd38"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2KU0OHMDQ</uniqueid>
		<timestamp>977821383</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd412</objname>
		<parent>cnttablepad</parent>
		<properties>Top = 226
Left = 728
Height = 77
Width = 68
Visible = .F.
ZOrderSet = 36
Name = "Cmd412"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>977820755</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd39</objname>
		<parent>cnttablepad</parent>
		<properties>Top = 151
Left = 530
Height = 77
Width = 68
Visible = .F.
ZOrderSet = 27
Name = "Cmd39"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1SY12O86G</uniqueid>
		<timestamp>977820755</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd41</objname>
		<parent>cnttablepad</parent>
		<properties>Top = 226
Left = 2
Height = 77
Width = 68
Visible = .F.
ZOrderSet = 28
Name = "Cmd41"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2KU0OHMD9</uniqueid>
		<timestamp>977821383</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd410</objname>
		<parent>cnttablepad</parent>
		<properties>Top = 226
Left = 596
Height = 77
Width = 68
Visible = .F.
ZOrderSet = 35
Name = "Cmd410"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>977821383</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd411</objname>
		<parent>cnttablepad</parent>
		<properties>Top = 226
Left = 662
Height = 77
Width = 68
Visible = .F.
ZOrderSet = 36
Name = "Cmd411"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1SZ0NUEEZ</uniqueid>
		<timestamp>977820755</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd42</objname>
		<parent>cnttablepad</parent>
		<properties>Top = 226
Left = 68
Height = 77
Width = 68
Visible = .F.
ZOrderSet = 29
Name = "Cmd42"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>977820755</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd43</objname>
		<parent>cnttablepad</parent>
		<properties>Top = 226
Left = 134
Height = 77
Width = 68
Visible = .F.
ZOrderSet = 30
Name = "Cmd43"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1SY124ZSI</uniqueid>
		<timestamp>977820755</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd44</objname>
		<parent>cnttablepad</parent>
		<properties>Top = 226
Left = 200
Height = 77
Width = 68
Visible = .F.
ZOrderSet = 31
Name = "Cmd44"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1X00PAG8M</uniqueid>
		<timestamp>977820755</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd45</objname>
		<parent>cnttablepad</parent>
		<properties>Top = 226
Left = 266
Height = 77
Width = 68
Visible = .F.
ZOrderSet = 32
Name = "Cmd45"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2KU0OHMDR</uniqueid>
		<timestamp>977821383</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd512</objname>
		<parent>cnttablepad</parent>
		<properties>Top = 301
Left = 728
Height = 77
Width = 68
Visible = .F.
ZOrderSet = 45
Name = "Cmd512"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1RY0N4UD0</uniqueid>
		<timestamp>977820755</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd46</objname>
		<parent>cnttablepad</parent>
		<properties>Top = 226
Left = 332
Height = 77
Width = 68
Visible = .F.
ZOrderSet = 33
Name = "Cmd46"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1XH10E8KL</uniqueid>
		<timestamp>977820755</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd47</objname>
		<parent>cnttablepad</parent>
		<properties>Top = 226
Left = 398
Height = 77
Width = 68
Visible = .F.
ZOrderSet = 34
Name = "Cmd47"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1S802IZ6O</uniqueid>
		<timestamp>977820755</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd48</objname>
		<parent>cnttablepad</parent>
		<properties>Top = 226
Left = 464
Height = 77
Width = 68
Visible = .F.
ZOrderSet = 35
Name = "Cmd48"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2KU0OHMDA</uniqueid>
		<timestamp>977821383</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd510</objname>
		<parent>cnttablepad</parent>
		<properties>Top = 301
Left = 596
Height = 77
Width = 68
Visible = .F.
ZOrderSet = 44
Name = "Cmd510"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1SG0NUEC5</uniqueid>
		<timestamp>977821383</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd511</objname>
		<parent>cnttablepad</parent>
		<properties>Top = 301
Left = 662
Height = 77
Width = 68
Visible = .F.
ZOrderSet = 45
Name = "Cmd511"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>977820755</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd49</objname>
		<parent>cnttablepad</parent>
		<properties>Top = 226
Left = 530
Height = 77
Width = 68
Visible = .F.
ZOrderSet = 36
Name = "Cmd49"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2CK197070</uniqueid>
		<timestamp>977820755</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd51</objname>
		<parent>cnttablepad</parent>
		<properties>Top = 301
Left = 2
Height = 77
Width = 68
Visible = .F.
ZOrderSet = 37
Name = "Cmd51"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2CK197071</uniqueid>
		<timestamp>977820755</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd52</objname>
		<parent>cnttablepad</parent>
		<properties>Top = 301
Left = 68
Height = 77
Width = 68
Visible = .F.
ZOrderSet = 38
Name = "Cmd52"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2KU0OHMDT</uniqueid>
		<timestamp>977821383</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd612</objname>
		<parent>cnttablepad</parent>
		<properties>Top = 376
Left = 728
Height = 77
Width = 68
Visible = .F.
ZOrderSet = 54
Name = "Cmd612"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2CK197072</uniqueid>
		<timestamp>977820755</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd53</objname>
		<parent>cnttablepad</parent>
		<properties>Top = 301
Left = 134
Height = 77
Width = 68
Visible = .F.
ZOrderSet = 39
Name = "Cmd53"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2CK197073</uniqueid>
		<timestamp>977820755</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd54</objname>
		<parent>cnttablepad</parent>
		<properties>Top = 301
Left = 200
Height = 77
Width = 68
Visible = .F.
ZOrderSet = 40
Name = "Cmd54"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2CK197074</uniqueid>
		<timestamp>977820755</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd55</objname>
		<parent>cnttablepad</parent>
		<properties>Top = 301
Left = 266
Height = 77
Width = 68
Visible = .F.
ZOrderSet = 41
Name = "Cmd55"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2CK197075</uniqueid>
		<timestamp>977820755</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd56</objname>
		<parent>cnttablepad</parent>
		<properties>Top = 301
Left = 332
Height = 77
Width = 68
Visible = .F.
ZOrderSet = 42
Name = "Cmd56"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2KU0OHMDD</uniqueid>
		<timestamp>977821383</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd610</objname>
		<parent>cnttablepad</parent>
		<properties>Top = 376
Left = 596
Height = 77
Width = 68
Visible = .F.
ZOrderSet = 53
Name = "Cmd610"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1U00R6MO9</uniqueid>
		<timestamp>977821383</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd611</objname>
		<parent>cnttablepad</parent>
		<properties>Top = 376
Left = 662
Height = 77
Width = 68
Visible = .F.
ZOrderSet = 54
Name = "Cmd611"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2CK197076</uniqueid>
		<timestamp>977820755</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd57</objname>
		<parent>cnttablepad</parent>
		<properties>Top = 301
Left = 398
Height = 77
Width = 68
Visible = .F.
ZOrderSet = 43
Name = "Cmd57"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1SA0UTS7Y</uniqueid>
		<timestamp>977820755</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd58</objname>
		<parent>cnttablepad</parent>
		<properties>Top = 301
Left = 464
Height = 77
Width = 68
Visible = .F.
ZOrderSet = 44
Name = "Cmd58"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2KU0OHMDU</uniqueid>
		<timestamp>977821383</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd712</objname>
		<parent>cnttablepad</parent>
		<properties>Top = 451
Left = 728
Height = 77
Width = 68
Visible = .F.
ZOrderSet = 63
Name = "Cmd712"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2KU0OHMDV</uniqueid>
		<timestamp>977821383</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd812</objname>
		<parent>cnttablepad</parent>
		<properties>Top = 526
Left = 728
Height = 77
Width = 68
Visible = .F.
ZOrderSet = 64
Name = "Cmd812"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>977820755</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd59</objname>
		<parent>cnttablepad</parent>
		<properties>Top = 301
Left = 530
Height = 77
Width = 68
Visible = .F.
ZOrderSet = 45
Name = "Cmd59"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2CK197079</uniqueid>
		<timestamp>977820755</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd61</objname>
		<parent>cnttablepad</parent>
		<properties>Top = 376
Left = 2
Height = 77
Width = 68
Visible = .F.
ZOrderSet = 46
Name = "Cmd61"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2CK19707A</uniqueid>
		<timestamp>977820755</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd62</objname>
		<parent>cnttablepad</parent>
		<properties>Top = 376
Left = 68
Height = 77
Width = 68
Visible = .F.
ZOrderSet = 47
Name = "Cmd62"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2CK19707B</uniqueid>
		<timestamp>977820755</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd63</objname>
		<parent>cnttablepad</parent>
		<properties>Top = 376
Left = 134
Height = 77
Width = 68
Visible = .F.
ZOrderSet = 48
Name = "Cmd63"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2CK19707C</uniqueid>
		<timestamp>977820755</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd64</objname>
		<parent>cnttablepad</parent>
		<properties>Top = 376
Left = 200
Height = 77
Width = 68
Visible = .F.
ZOrderSet = 49
Name = "Cmd64"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2KU0OHMDH</uniqueid>
		<timestamp>977821383</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd710</objname>
		<parent>cnttablepad</parent>
		<properties>Top = 451
Left = 596
Height = 77
Width = 68
Visible = .F.
ZOrderSet = 62
Name = "Cmd710"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>977821383</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd711</objname>
		<parent>cnttablepad</parent>
		<properties>Top = 451
Left = 662
Height = 77
Width = 68
Visible = .F.
ZOrderSet = 63
Name = "Cmd711"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1S802IZ6O</uniqueid>
		<timestamp>977821383</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd811</objname>
		<parent>cnttablepad</parent>
		<properties>Top = 526
Left = 662
Height = 77
Width = 68
Visible = .F.
ZOrderSet = 64
Name = "Cmd811"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2KU0OHMDL</uniqueid>
		<timestamp>977821383</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd810</objname>
		<parent>cnttablepad</parent>
		<properties>Top = 526
Left = 596
Height = 77
Width = 68
Visible = .F.
ZOrderSet = 65
Name = "Cmd810"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2CK19707D</uniqueid>
		<timestamp>977820755</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd65</objname>
		<parent>cnttablepad</parent>
		<properties>Top = 376
Left = 266
Height = 77
Width = 68
Visible = .F.
ZOrderSet = 50
Name = "Cmd65"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2CK19707E</uniqueid>
		<timestamp>977820755</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd66</objname>
		<parent>cnttablepad</parent>
		<properties>Top = 376
Left = 332
Height = 77
Width = 68
Visible = .F.
ZOrderSet = 51
Name = "Cmd66"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2CK19707F</uniqueid>
		<timestamp>977820755</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd67</objname>
		<parent>cnttablepad</parent>
		<properties>Top = 376
Left = 398
Height = 77
Width = 68
Visible = .F.
ZOrderSet = 52
Name = "Cmd67"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1WW0QWPEA</uniqueid>
		<timestamp>977820755</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd68</objname>
		<parent>cnttablepad</parent>
		<properties>Top = 376
Left = 464
Height = 77
Width = 68
Visible = .F.
ZOrderSet = 53
Name = "Cmd68"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>977820755</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd69</objname>
		<parent>cnttablepad</parent>
		<properties>Top = 376
Left = 530
Height = 77
Width = 68
Visible = .F.
ZOrderSet = 54
Name = "Cmd69"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2CK19707I</uniqueid>
		<timestamp>977820755</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd71</objname>
		<parent>cnttablepad</parent>
		<properties>Top = 451
Left = 2
Height = 77
Width = 68
Visible = .F.
ZOrderSet = 55
Name = "Cmd71"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2CK19707J</uniqueid>
		<timestamp>977820755</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd72</objname>
		<parent>cnttablepad</parent>
		<properties>Top = 451
Left = 68
Height = 77
Width = 68
Visible = .F.
ZOrderSet = 56
Name = "Cmd72"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2CK19707K</uniqueid>
		<timestamp>977820755</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd73</objname>
		<parent>cnttablepad</parent>
		<properties>Top = 451
Left = 134
Height = 77
Width = 68
Visible = .F.
ZOrderSet = 57
Name = "Cmd73"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2CK19707L</uniqueid>
		<timestamp>977820755</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd74</objname>
		<parent>cnttablepad</parent>
		<properties>Top = 451
Left = 200
Height = 77
Width = 68
Visible = .F.
ZOrderSet = 58
Name = "Cmd74"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2CK19707M</uniqueid>
		<timestamp>977820755</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd75</objname>
		<parent>cnttablepad</parent>
		<properties>Top = 451
Left = 266
Height = 77
Width = 68
Visible = .F.
ZOrderSet = 59
Name = "Cmd75"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2CK19707N</uniqueid>
		<timestamp>977820755</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd76</objname>
		<parent>cnttablepad</parent>
		<properties>Top = 451
Left = 332
Height = 77
Width = 68
Visible = .F.
ZOrderSet = 60
Name = "Cmd76"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2CK19707O</uniqueid>
		<timestamp>977820755</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd77</objname>
		<parent>cnttablepad</parent>
		<properties>Top = 451
Left = 398
Height = 77
Width = 68
Visible = .F.
ZOrderSet = 61
Name = "Cmd77"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1SA02X99M</uniqueid>
		<timestamp>977820755</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd78</objname>
		<parent>cnttablepad</parent>
		<properties>Top = 451
Left = 464
Height = 77
Width = 68
Visible = .F.
ZOrderSet = 62
Name = "Cmd78"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>977820755</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd79</objname>
		<parent>cnttablepad</parent>
		<properties>Top = 451
Left = 530
Height = 77
Width = 68
Visible = .F.
ZOrderSet = 63
Name = "Cmd79"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1SC0S5FAV</uniqueid>
		<timestamp>977820755</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd89</objname>
		<parent>cnttablepad</parent>
		<properties>Top = 526
Left = 530
Height = 77
Width = 68
Visible = .F.
ZOrderSet = 64
Name = "Cmd89"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>977820755</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd88</objname>
		<parent>cnttablepad</parent>
		<properties>Top = 526
Left = 464
Height = 77
Width = 68
Visible = .F.
ZOrderSet = 65
Name = "Cmd88"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2CK19707X</uniqueid>
		<timestamp>977820755</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd87</objname>
		<parent>cnttablepad</parent>
		<properties>Top = 526
Left = 398
Height = 77
Width = 68
Visible = .F.
ZOrderSet = 66
Name = "Cmd87"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2CK19707W</uniqueid>
		<timestamp>977820755</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd86</objname>
		<parent>cnttablepad</parent>
		<properties>Top = 526
Left = 332
Height = 77
Width = 68
Visible = .F.
ZOrderSet = 67
Name = "Cmd86"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2CK19707V</uniqueid>
		<timestamp>977820755</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd85</objname>
		<parent>cnttablepad</parent>
		<properties>Top = 526
Left = 266
Height = 77
Width = 68
Visible = .F.
ZOrderSet = 68
Name = "Cmd85"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2CK19707U</uniqueid>
		<timestamp>977820755</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd84</objname>
		<parent>cnttablepad</parent>
		<properties>Top = 526
Left = 200
Height = 77
Width = 68
Visible = .F.
ZOrderSet = 69
Name = "Cmd84"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2CK19707T</uniqueid>
		<timestamp>977820755</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd83</objname>
		<parent>cnttablepad</parent>
		<properties>Top = 526
Left = 134
Height = 77
Width = 68
Visible = .F.
ZOrderSet = 70
Name = "Cmd83"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2CK19707S</uniqueid>
		<timestamp>977820755</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd82</objname>
		<parent>cnttablepad</parent>
		<properties>Top = 526
Left = 68
Height = 77
Width = 68
Visible = .F.
ZOrderSet = 71
Name = "Cmd82"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2CK19707R</uniqueid>
		<timestamp>977820755</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd81</objname>
		<parent>cnttablepad</parent>
		<properties>Top = 526
Left = 2
Height = 77
Width = 68
Visible = .F.
ZOrderSet = 72
Name = "Cmd81"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1RY0N4UD0</uniqueid>
		<timestamp>977820755</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd34</objname>
		<parent>cnttablepad</parent>
		<properties>Top = 151
Left = 200
Height = 77
Width = 68
Visible = .F.
ZOrderSet = 73
Name = "Cmd34"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>COMMENT</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>0</timestamp>
		<class/>
		<classloc/>
		<baseclass/>
		<objname>cnttablepad</objname>
		<parent/>
		<properties>Arial, 1, 8, 5, 14, 11, 29, 3, 0
Arial, 0, 9, 5, 15, 12, 32, 3, 0
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2KA15DMRY</uniqueid>
		<timestamp>978940961</timestamp>
		<class>frm</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>form</baseclass>
		<objname>frmcalcpad</objname>
		<parent/>
		<properties>Height = 279
Width = 147
Desktop = .T.
ShowWindow = 1
DoCreate = .T.
AutoCenter = .T.
BorderStyle = 0
Caption = "Êîëè÷åñòâî"
ControlBox = .F.
Closable = .F.
MaxButton = .F.
MinButton = .F.
Movable = .T.
TitleBar = 1
WindowType = 1
AlwaysOnTop = .T.
uretval = .F.
noldvalue = 0
_memberdata =       87&lt;VFPData&gt;&lt;memberdata name="noldvalue" type="property" display="nOldValue"/&gt;&lt;/VFPData&gt;

Name = "frmcalcpad"
cstmsghandler.Name = "cstmsghandler"
cstresizable.Name = "cstresizable"
Img1.Enabled = .F.
Img1.Name = "Img1"
</properties>
		<protected/>
		<methods>PROCEDURE _handlecntcancelsaveevent
*-------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: RST_V1.VCX
* Class.Module....: FRMORDERADD._HANDLECNTCANCELSAVEEVENT
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;tcMessage&gt;
* Returns.........: &lt;none&gt;
* Notes...........: &lt;~&gt;
*-------------------------------------------------------
LPARAMETERS tcMessage

WITH This

	*--ñîõðàíèì/îòìåíèì èçìåíåíèÿ
	IF tcMessage = [OK]
			.uRetVal = .cntNpad.txtCalc.Value
		ELSE
			.uRetVal = .nOldValue
		ENDIF
		
	.Hide()

ENDWITH
************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************

ENDPROC
PROCEDURE Init
LPARAMETERS nValue,cCaption,cFormat
IF PCOUNT()&gt;1
	this.Caption= ALLTRIM(cCaption)
ENDIF
IF PCOUNT()&gt;2
	this.cntNpad.txtcalc.InputMask = ALLTRIM(cFormat)
	this.cntNpad.txtcalc.Format    = ALLTRIM(cFormat)
ENDIF
this.cntNpad.txtcalc.Value=nValue
this.nOldValue = nValue
this.cntNpad.txtcalc.SetFocus()




ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1>Class</reserved1>
		<reserved2>2</reserved2>
		<reserved3>uretval Âîçâðàùûåìîå çíà÷åíèå
noldvalue Ñòàðîå çíà÷åíèå
_memberdata XML Metadata for customizable properties
*_handlecntcancelsaveevent 
</reserved3>
		<reserved4/>
		<reserved5/>
		<reserved6>Pixels</reserved6>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2KA15GEN3</uniqueid>
		<timestamp>978940961</timestamp>
		<class>cntnumpadext</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>CntNpad</objname>
		<parent>frmcalcpad</parent>
		<properties>Top = 0
Left = 0
Name = "CntNpad"
ImgButton0.Name = "ImgButton0"
ImgButtonPoint.Height = 50
ImgButtonPoint.Width = 50
ImgButtonPoint.Name = "ImgButtonPoint"
ImgButton1.Height = 50
ImgButton1.Width = 50
ImgButton1.Name = "ImgButton1"
ImgButton2.Height = 50
ImgButton2.Width = 50
ImgButton2.Name = "ImgButton2"
Cntcancelsavehandled1.cmdCancel.Name = "cmdCancel"
Cntcancelsavehandled1.cmdOk.Name = "cmdOk"
Cntcancelsavehandled1.Name = "Cntcancelsavehandled1"
ImgButton3.Height = 50
ImgButton3.Width = 50
ImgButton3.Name = "ImgButton3"
ImgButton4.Height = 50
ImgButton4.Width = 50
ImgButton4.Name = "ImgButton4"
ImgButton5.Height = 50
ImgButton5.Width = 50
ImgButton5.Name = "ImgButton5"
ImgButton6.Height = 50
ImgButton6.Width = 50
ImgButton6.Name = "ImgButton6"
ImgButton7.Height = 50
ImgButton7.Width = 50
ImgButton7.Name = "ImgButton7"
ImgButton8.Height = 50
ImgButton8.Width = 50
ImgButton8.Name = "ImgButton8"
ImgButton9.Height = 50
ImgButton9.Width = 50
ImgButton9.Name = "ImgButton9"
ImgbuttonDelete.Height = 50
ImgbuttonDelete.Width = 50
ImgbuttonDelete.Name = "ImgbuttonDelete"
Txtcalc.Name = "Txtcalc"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>COMMENT</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>0</timestamp>
		<class/>
		<classloc/>
		<baseclass/>
		<objname>frmcalcpad</objname>
		<parent/>
		<properties>Arial, 0, 9, 5, 15, 12, 32, 3, 0
Arial, 1, 12, 8, 20, 15, 42, 4, 1
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2D80T78OB</uniqueid>
		<timestamp>978941040</timestamp>
		<class>cntnumericpad</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>cntnumpadext</objname>
		<parent/>
		<properties>Width = 146
Height = 279
uretval = 0.00
Name = "cntnumpadext"
ImgButton0.Left = -2
ImgButton0.Top = 175
ImgButton0.Name = "ImgButton0"
ImgButtonPoint.Height = 50
ImgButtonPoint.Left = 98
ImgButtonPoint.Top = 175
ImgButtonPoint.Width = 50
ImgButtonPoint.Name = "ImgButtonPoint"
ImgButton1.Height = 50
ImgButton1.Left = -2
ImgButton1.Top = 125
ImgButton1.Width = 50
ImgButton1.Name = "ImgButton1"
ImgButton2.Height = 50
ImgButton2.Left = 48
ImgButton2.Top = 125
ImgButton2.Width = 50
ImgButton2.Name = "ImgButton2"
ImgButton3.Height = 50
ImgButton3.Left = 98
ImgButton3.Top = 125
ImgButton3.Width = 50
ImgButton3.Name = "ImgButton3"
ImgButton4.Height = 50
ImgButton4.Left = -2
ImgButton4.Top = 75
ImgButton4.Width = 50
ImgButton4.Name = "ImgButton4"
ImgButton5.Height = 50
ImgButton5.Left = 48
ImgButton5.Top = 75
ImgButton5.Width = 50
ImgButton5.Name = "ImgButton5"
ImgButton6.Height = 50
ImgButton6.Left = 98
ImgButton6.Top = 75
ImgButton6.Width = 50
ImgButton6.Name = "ImgButton6"
ImgButton7.Height = 50
ImgButton7.Left = -2
ImgButton7.Top = 25
ImgButton7.Width = 50
ImgButton7.Name = "ImgButton7"
ImgButton8.Height = 50
ImgButton8.Left = 48
ImgButton8.Top = 25
ImgButton8.Width = 50
ImgButton8.Name = "ImgButton8"
ImgButton9.Height = 50
ImgButton9.Left = 98
ImgButton9.Top = 25
ImgButton9.Width = 50
ImgButton9.Name = "ImgButton9"
ImgbuttonDelete.Height = 50
ImgbuttonDelete.Left = 48
ImgbuttonDelete.Top = 175
ImgbuttonDelete.Width = 50
ImgbuttonDelete.Name = "ImgbuttonDelete"
</properties>
		<protected/>
		<methods>PROCEDURE ImgButton0.Click
IF this.Parent.lfirstclick
this.Parent.txtcalc.Value = 0.000
this.Parent.lfirstclick = .f.
ENDIF
DODEFAULT()
ENDPROC
PROCEDURE ImgButton1.Click
IF this.Parent.lfirstclick
this.Parent.txtcalc.Value = 0.000
this.Parent.lfirstclick = .f.
ENDIF
DODEFAULT()
ENDPROC
PROCEDURE ImgButton2.Click
IF this.Parent.lfirstclick
this.Parent.txtcalc.Value = 0.000
this.Parent.lfirstclick = .f.
ENDIF
DODEFAULT()
ENDPROC
PROCEDURE ImgButton3.Click
IF this.Parent.lfirstclick
this.Parent.txtcalc.Value = 0.000
this.Parent.lfirstclick = .f.
ENDIF
DODEFAULT()
ENDPROC
PROCEDURE ImgButton4.Click
IF this.Parent.lfirstclick
this.Parent.txtcalc.Value = 0.000
this.Parent.lfirstclick = .f.
ENDIF
DODEFAULT()
ENDPROC
PROCEDURE ImgButton5.Click
IF this.Parent.lfirstclick
this.Parent.txtcalc.Value = 0.000
this.Parent.lfirstclick = .f.
ENDIF
DODEFAULT()
ENDPROC
PROCEDURE ImgButton6.Click
IF this.Parent.lfirstclick
this.Parent.txtcalc.Value = 0.000
this.Parent.lfirstclick = .f.
ENDIF
DODEFAULT()
ENDPROC
PROCEDURE ImgButton7.Click
IF this.Parent.lfirstclick
this.Parent.txtcalc.Value = 0.000
this.Parent.lfirstclick = .f.
ENDIF
DODEFAULT()
ENDPROC
PROCEDURE ImgButton8.Click
IF this.Parent.lfirstclick
this.Parent.txtcalc.Value = 0.000
this.Parent.lfirstclick = .f.
ENDIF
DODEFAULT()
ENDPROC
PROCEDURE ImgButton9.Click
IF this.Parent.lfirstclick
this.Parent.txtcalc.Value = 0.000
this.Parent.lfirstclick = .f.
ENDIF
DODEFAULT()
ENDPROC
PROCEDURE ImgbuttonDelete.Click
this.Parent.txtcalc.Value = 0.000
this.Parent.txtcalc.nDecimal = 0
DODEFAULT()
ENDPROC
PROCEDURE ImgButtonPoint.Click
IF this.Parent.lfirstclick
	this.Parent.txtcalc.Value = 0.000
	this.Parent.lfirstclick = .f.
ENDIF
DODEFAULT()
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1>Class</reserved1>
		<reserved2>3</reserved2>
		<reserved3>uretval
</reserved3>
		<reserved4/>
		<reserved5/>
		<reserved6>Pixels</reserved6>
		<reserved7>Êîíòåéíåð äëÿ êàëüêóëÿòîðà Ðàñøèðåííûé Ald</reserved7>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2D80ZFJDR</uniqueid>
		<timestamp>950764538</timestamp>
		<class>cntcancelsavehandled</class>
		<classloc>baseform_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>Cntcancelsavehandled1</objname>
		<parent>cntnumpadext</parent>
		<properties>Top = 224
Left = 0
Width = 146
Height = 55
TabIndex = 3
ZOrderSet = 4
Name = "Cntcancelsavehandled1"
cmdCancel.Top = 0
cmdCancel.Left = 0
cmdCancel.Height = 55
cmdCancel.Width = 73
cmdCancel.Caption = "Îòìåíèòü"
cmdCancel.Name = "cmdCancel"
cmdOk.Top = 0
cmdOk.Left = 72
cmdOk.Height = 55
cmdOk.Width = 73
cmdOk.Caption = "Îê"
cmdOk.Name = "cmdOk"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2D80ZAIHI</uniqueid>
		<timestamp>978940687</timestamp>
		<class>txtcalcnum</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>Txtcalc</objname>
		<parent>cntnumpadext</parent>
		<properties>FontBold = .T.
FontSize = 12
Height = 29
Left = -1
MaxLength = 12
SelectOnEntry = .T.
Top = 0
Width = 147
ForeColor = 0,0,255
BackColor = 218,214,218
SelectedForeColor = 255,128,64
SelectedBackColor = 239,228,250
_highlightself = .T.
Name = "Txtcalc"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>COMMENT</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>0</timestamp>
		<class/>
		<classloc/>
		<baseclass/>
		<objname>cntnumpadext</objname>
		<parent/>
		<properties>Arial, 0, 9, 5, 15, 12, 32, 3, 0
Arial, 1, 12, 8, 20, 15, 42, 4, 1
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2CK18FOY9</uniqueid>
		<timestamp>979651673</timestamp>
		<class>container</class>
		<classloc/>
		<baseclass>container</baseclass>
		<objname>cnttuch</objname>
		<parent/>
		<properties>Width = 168
Height = 51
ncountelem = 18
npagemenu = 1
nactivcmd = 11
nbckcolor = 8617596
nbckcoloractiv = 448785
ncountx = 2
calias = lvPOSFuncInSetView
lfirsttime = .T.
Name = "cnttuch"
</properties>
		<protected/>
		<methods>PROCEDURE activatecmd
LPARAMETERS lnCmdNo
WITH This
LOCAL lcCmdNo
lcCmdNo = ALLTRIM(STR(.nactivcmd,3,0))
		lcString = '.Cmd'+lcCmdNo
		IF TYPE(lcString)&lt;&gt;'O'
	RETURN
		ENDIF
IF VARTYPE(.nactivcmd)&lt;&gt;'N'
	.nactivcmd = 0
ENDIF
IF .nactivcmd &lt;&gt; 0
		lcString = '.Cmd'+lcCmdNo +'.BackColor = .nbckcolor '
		&amp;lcString
ENDIF
IF VARTYPE(lnCmdNo )&lt;&gt;'N'
	lnCmdNo = 0
ENDIF
IF lnCmdNo &lt;&gt; 0
		lcString = '.Cmd'+lcCmdNo+'.BackColor = .nbckcoloractiv'
		&amp;lcString
ENDIF
.nactivcmd = lnCmdNo
ENDWITH
ENDPROC
PROCEDURE blockall
LPARAMETERS llBlock

LOCAL lnCountElement, lnCmdNo,lSkip
WITH This
FOR lnCountElement=1 TO .ncountelem
		lnCmdNo = ALLTRIM(STR(CEILING(lnCountElement/.nCountX)))
		lnCmdNo = lnCmdNo + ALLTRIM(STR((lnCountElement - (VAL(lnCmdNo)-1)*(.nCountX) ),2,0))
		lcString = '.Cmd'+lnCmdNo
		IF TYPE(lcString)&lt;&gt;'O'
	LOOP
		ENDIF
		lcString = 'lSkip =.Cmd'+lnCmdNo+'.lSkip'
		&amp;lcString
		IF !lSkip
		lcString = '.Cmd'+lnCmdNo+'.Enabled = llBlock'
		&amp;lcString
		ENDIF
ENDFOR
ENDWITH

ENDPROC
PROCEDURE onclickcmd
LPARAMETERS lnStarting, lnCmd
WITH This
.Activatecmd(lnCmd)
IF VARTYPE(lnStarting)&lt;&gt;'N'
RETURN
ENDIF
IF ABS(lnStarting)&lt;1 AND ABS(lnStarting)&gt;0
	IF lnStarting &lt; 0
			.npagemenu = .npagemenu - 1
		ELSE
			.npagemenu = .npagemenu + 1
	ENDIF
		.paint(.npagemenu)
	RETURN
ENDIF
ENDWITH
*** ïåðåðèñîâûâàåì ìåíþ ñ áëþäàìè ...
ENDPROC
PROCEDURE paint
*-------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: rst_v1.vcx
* Class.Module....: grdMenu._RSRequery
* Called by.......: &lt;&gt;
* Parameters......:
* Returns.........: &lt;none&gt;
* Notes...........: Ïåðå÷èòûâàíèå Alias-à Grid-à
*-------------------------------------------------------
*11.01.2004 17:15 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LPARAMETER	lnPageNo
LOCAL lnCountElement, lnStartElrmrnt,lcString, lnCmdNo
lnStartElrmrnt = 1
WITH This
IF lnPageNo &gt;1
	lnStartElrmrnt = (.ncountelem-1)+(.ncountelem-2)*(lnPageNo-2)+1
ENDIF
lnCountElement = 1
.npagemenu = lnPageNo
.resetallcmd()

lcString = 'SELECT '+.calias
&amp;lcString
FOR lnCountElement=1 TO .ncountelem
		IF (lnCountElement + lnStartElrmrnt - 1) &gt;RECCOUNT(.calias)
	EXIT
		ENDIF
		IF lnPageNo&gt;1 AND lnCountElement = .ncountelem-.nCountX+1
			lnStartElrmrnt = lnStartElrmrnt - 1
	LOOP
		ENDIF
		lnCmdNo = ALLTRIM(STR(CEILING(lnCountElement/.nCountX)))
		lnCmdNo = lnCmdNo + ALLTRIM(STR((lnCountElement - (VAL(lnCmdNo)-1)*(.nCountX) ),2,0))
		lcString = '.Cmd'+lnCmdNo
		IF TYPE(lcString)&lt;&gt;'O'
			lnStartElrmrnt = lnStartElrmrnt - 1
	LOOP
		ENDIF
		GO lnCountElement + lnStartElrmrnt - 1 &amp;&amp;IN lvPOSFuncInSetView
		lcString = '.Cmd'+lnCmdNo+'.Caption = ALLTRIM('+ALLTRIM(.calias)+'.NM)'
		&amp;lcString
		lcString = '.Cmd'+lnCmdNo+'.Starting = '+ALLTRIM(.calias)+'.ID'
		&amp;lcString
		lcString = '.Cmd'+lnCmdNo+'.Enabled = .t.'
		&amp;lcString
		lcString = '.Cmd'+lnCmdNo+'.ForeColor = RGB(0,0,0)'
		&amp;lcString
ENDFOR
IF lnPageNo&gt;1 &amp;&amp; äåëàåì êíîïî÷êó "ïðåä"
			lnCmdNo = ALLTRIM(STR(CEILING((.ncountelem -.nCountX+1)/.nCountX)))
			lnCmdNo = lnCmdNo  + ALLTRIM(STR((.ncountelem -.nCountX +1 - (VAL(lnCmdNo)-1)*(.nCountX) ),2,0))
			lcString = '.Cmd'+lnCmdNo+'.Caption = [Ïðåäûäóùàÿ]'
			&amp;lcString
			lcString = '.Cmd'+lnCmdNo+'.Starting = -0.1'
			&amp;lcString
			lcString = '.Cmd'+lnCmdNo+'.Enabled = .t.'
			&amp;lcString
			lcString = '.Cmd'+lnCmdNo+'.BackColor = RGB(0,128,64)'
			&amp;lcString
			lcString = '.Cmd'+lnCmdNo+'.ForeColor = RGB(255,255,255)'
			&amp;lcString

ENDIF
IF RECCOUNT(.calias)&gt;.ncountelem ;
			AND RECNO(.calias)&lt;RECCOUNT(.calias)&amp;&amp; äåëàåì êíîïî÷êó "ñëåä"
			lnCmdNo = ALLTRIM(STR(CEILING(.ncountelem /.nCountX)))
			lnCmdNo = lnCmdNo  + ALLTRIM(STR((.ncountelem  - (VAL(lnCmdNo)-1)*(.nCountX) ),2,0))
			lcString = '.Cmd'+lnCmdNo+'.Caption = [Ñëåäóþùàÿ]'
			&amp;lcString
			lcString = '.Cmd'+lnCmdNo+'.Starting = 0.1'
			&amp;lcString
			lcString = '.Cmd'+lnCmdNo+'.Enabled = .t.'
			&amp;lcString
			lcString = '.Cmd'+lnCmdNo+'.BackColor = RGB(0,128,64)'
			&amp;lcString
			lcString = '.Cmd'+lnCmdNo+'.ForeColor = RGB(255,255,255)'
			&amp;lcString
ENDIF

ENDWITH
ENDPROC
PROCEDURE resetallcmd
LOCAL lnCountElement, lnCmdNo
WITH This
FOR lnCountElement=1 TO .ncountelem
		lnCmdNo = ALLTRIM(STR(CEILING(lnCountElement/.nCountX)))
		lnCmdNo = lnCmdNo + ALLTRIM(STR((lnCountElement - (VAL(lnCmdNo)-1)*(.nCountX) ),2,0))
		lcString = '.Cmd'+lnCmdNo
		IF TYPE(lcString)&lt;&gt;'O'
	LOOP
		ENDIF
		lcString = '.Cmd'+lnCmdNo+'.Caption = []'
		&amp;lcString
		lcString = '.Cmd'+lnCmdNo+'.Starting = .null.'
		&amp;lcString
		lcString = '.Cmd'+lnCmdNo+'.BackColor = .nbckcolor'
		&amp;lcString
		lcString = '.Cmd'+lnCmdNo+'.Enabled = .F.'
		&amp;lcString
ENDFOR
this.nactivcmd = 12
ENDWITH

ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1>Class</reserved1>
		<reserved2>4</reserved2>
		<reserved3>ncountelem êîëè÷åñòâî ýëåìåíòîâ-ãðóïï ìåíþ
npagemenu Òåêóùàÿ ñòðàíèöà ìåíþ
nactivcmd Íîìåð àêòèâíîé êíîïî÷êè
nbckcolor Öâåò êíîïêè â îáû÷íîì ñîñòîÿíèè
nbckcoloractiv Öâåò êíîïêè â àêòèâíîì ñîñòîÿíèè
ncountx êîëè÷åñòâî êíîïîê ïî ãîðèçîíòàëè
calias Îáëàñòü ñî ñïðàâî÷íèêîì äëÿ ìåíþ
lfirsttime Ìåíþ ðèñóåòñÿ ïåðâûé ðàç
*paint Íàðèñîâàòü ýòî ìåíþ
*nextpage Ïåðåéòè íà ñëåä ñòðàíèöó ñïèñêà NextPage
*selectelement Äåéñòâèÿ ïðè âûáîðå ýëåìåíòà 
*onclickcmd Âûïîëíÿåòñÿ ïðè íàæàòèè íà êíîïî÷êó ìåíþ
*resetallcmd Îáíóëÿåì çíà÷åíèÿ âñåõ êíîïîê
*activatecmd Ïîêàçûâàåì àêòèâíîñòü êíîïî÷êè
*blockall 
</reserved3>
		<reserved4/>
		<reserved5/>
		<reserved6>Pixels</reserved6>
		<reserved7>áàçà äëÿ tuch - ìåíþ</reserved7>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1RY0N4UD0</uniqueid>
		<timestamp>976338363</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd11</objname>
		<parent>cnttuch</parent>
		<properties>Top = 0
Left = 0
Height = 52
Width = 60
FontBold = .T.
FontSize = 8
WordWrap = .T.
Caption = ""
BackColor = 17,217,6
Name = "Cmd11"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>976327043</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd12</objname>
		<parent>cnttuch</parent>
		<properties>Top = 0
Left = 84
Height = 52
Width = 84
FontBold = .T.
FontSize = 8
WordWrap = .T.
Caption = ""
BackColor = 124,126,131
Name = "Cmd12"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2K90XU8BO</uniqueid>
		<timestamp>977822381</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>LBL11</objname>
		<parent>cnttuch</parent>
		<properties>AutoSize = .F.
FontSize = 8
Alignment = 1
Caption = "0.00"
Height = 13
Left = 123
Top = 36
Visible = .F.
Width = 42
Name = "LBL11"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>COMMENT</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>0</timestamp>
		<class/>
		<classloc/>
		<baseclass/>
		<objname>cnttuch</objname>
		<parent/>
		<properties>Arial, 1, 8, 5, 14, 11, 29, 3, 0
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2CK18FOY9</uniqueid>
		<timestamp>981041842</timestamp>
		<class>cnttuch</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>cnttuchmenu</objname>
		<parent/>
		<properties>Width = 440
Height = 416
ncountelem = 32
npagemenu = 1
ncountx = 4
nbckcoloractiv = 16777088
nbckcolor = 14215660
calias = lvTmpTvrInSet
Name = "cnttuchmenu"
Cmd11.Width = 110
Cmd11.ZOrderSet = 1
Cmd11.Name = "Cmd11"
Cmd12.Left = 110
Cmd12.Height = 52
Cmd12.Width = 110
Cmd12.ZOrderSet = 2
Cmd12.Name = "Cmd12"
LBL11.Name = "LBL11"
</properties>
		<protected/>
		<methods>PROCEDURE onclickcmd
LPARAMETERS lnStarting, lnCmd
DODEFAULT(lnStarting, lnCmd)
IF ABS(lnStarting)&lt;1 AND ABS(lnStarting)&gt;0
	RETURN
ENDIF


LOCAL _PARAM, lcModList, lnModID

**IF !thisform.lReadOnly AND !thisform.lblock
		*--äåëàåì âûáîð
		SELECT lvTmpTvrInSet
		LOCATE FOR lvTmpTvrInSet.Id = lnStarting
				
		IF FOUND()
			*--äîáàâèì áëþäî â çàêàç
			thisform.Cntorddetail._add(lvTmpTvrInSet.ID)	
			
			*--ïîëó÷èì ñïèñîê ìîäèôèêàòîðîâ äëÿ äàííîãî áëþäà
			_PARAM = lvTmpTvrInSet.ID
			REQUERY([lvModList])
			
			*--åñëè ñïèñîê ìîäèôèêàòîðîâ íåïóñò, ïîêàæåì åãî
			IF RECCOUNT([lvModList])&gt;0
				lcModList = oApp.DoModalFormRetValObj([FrmModList;rst_v1.vcx],_PARAM)
			ENDIF
			
			*--åñëè ÷òî-òî âûáðàëè, òî äîáàâèì â çàêàç
			IF TYPE([lcModList])==[C] AND !EMPTY(lcModList)
				DO WHILE !EMPTY(lcModList)
					*--âûäåëèì ID ìîäèôèêàòîðà èç ñïèñêà
					lnModID = VAL(LEFT(lcModList,AT([,],lcModList)-1))
					
					*--äîáàâèì â çàêàç
					thisform.Cntorddetail._add(lnModID)	
					
					*--îáðåæåì ñïèñîê
					lcModList = RIGHT(lcModList,LEN(lcModList)-AT([,],lcModList))
				ENDDO
			ENDIF
		ELSE
			IF VARTYPE(tcNM)='C'
				MESSAGEBOX([Íå íàéäåíî áëþäî]+ALLTRIM(NVL(tcNM,'Êíîïêà íå íàçíà÷åíà')),48,[Îêíî ñîîáùåíèé])
			ENDIF
		ENDIF		
**ENDIF
ENDPROC
PROCEDURE paint
LPARAMETER	tnIDSET
IF this.lFirstTime
		USE IN SELECT([lvTvrInSetView])
		USE IN SELECT([lvTmpTvrInSet])
		USE IN SELECT([lvTvrSetInfo])
		USE IN SELECT([lvTmpTvrInSet])
		LOCAL _PARAM , _PARAM1
		_PARAM = tnIDSET
		USE lvTvrSetInfo IN 0
		ThisForm.nPrcTypeID = lvTvrSetInfo.PrcTypeID
		*------------------------------------------------------------------------------
		_PARAM1 = ThisForm.nPrcTypeID
		USE lvTvrInSetViewExt IN 0	ALIAS lvTmpTvrInSet
		this.lFirstTime = .f.
ENDIF
DODEFAULT(this.npagemenu)

ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1>Class</reserved1>
		<reserved2>31</reserved2>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6>Pixels</reserved6>
		<reserved7>êëàâèàòóðà tuch ìåíþ ðàáîòû ñ çàêàçîì Ald 4*8 êíîïîê </reserved7>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>976337571</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd22</objname>
		<parent>cnttuchmenu</parent>
		<properties>Top = 52
Left = 110
Height = 52
Width = 110
FontBold = .T.
Caption = "Áëþäî"
BackColor = 128,255,255
ZOrderSet = 0
Name = "Cmd22"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1RZ0ZZVSE</uniqueid>
		<timestamp>976337571</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd13</objname>
		<parent>cnttuchmenu</parent>
		<properties>Top = 0
Left = 220
Height = 52
Width = 110
FontBold = .T.
Caption = "Áëþäî"
ZOrderSet = 4
Name = "Cmd13"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>976337571</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd14</objname>
		<parent>cnttuchmenu</parent>
		<properties>Top = 0
Left = 330
Height = 52
Width = 110
FontBold = .T.
Caption = "Áëþäî"
ZOrderSet = 5
Name = "Cmd14"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1SA0UTS7Y</uniqueid>
		<timestamp>976337571</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd21</objname>
		<parent>cnttuchmenu</parent>
		<properties>Top = 52
Left = 0
Height = 52
Width = 110
FontBold = .T.
Caption = "Áëþäî"
ZOrderSet = 6
Name = "Cmd21"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1WW0QWPEA</uniqueid>
		<timestamp>976337571</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd23</objname>
		<parent>cnttuchmenu</parent>
		<properties>Top = 52
Left = 220
Height = 52
Width = 110
FontBold = .T.
Caption = "Áëþäî"
ZOrderSet = 7
Name = "Cmd23"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>976337571</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd24</objname>
		<parent>cnttuchmenu</parent>
		<properties>Top = 52
Left = 330
Height = 52
Width = 110
FontBold = .T.
Caption = "Áëþäî"
ZOrderSet = 8
Name = "Cmd24"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>976337571</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd31</objname>
		<parent>cnttuchmenu</parent>
		<properties>Top = 104
Left = 0
Height = 52
Width = 110
FontBold = .T.
Caption = "Áëþäî"
ZOrderSet = 9
Name = "Cmd31"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1SY124ZSI</uniqueid>
		<timestamp>976337571</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd32</objname>
		<parent>cnttuchmenu</parent>
		<properties>Top = 104
Left = 110
Height = 52
Width = 110
FontBold = .T.
Caption = "Áëþäî"
ZOrderSet = 10
Name = "Cmd32"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1X00PAG8M</uniqueid>
		<timestamp>976337571</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd33</objname>
		<parent>cnttuchmenu</parent>
		<properties>Top = 104
Left = 220
Height = 52
Width = 110
FontBold = .T.
Caption = "Áëþäî"
ZOrderSet = 11
Name = "Cmd33"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1RY0N4UD0</uniqueid>
		<timestamp>976337571</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd34</objname>
		<parent>cnttuchmenu</parent>
		<properties>Top = 104
Left = 330
Height = 52
Width = 110
FontBold = .T.
Caption = "Áëþäî"
ZOrderSet = 12
Name = "Cmd34"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1SY12O86G</uniqueid>
		<timestamp>976337571</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd41</objname>
		<parent>cnttuchmenu</parent>
		<properties>Top = 156
Left = 0
Height = 52
Width = 110
FontBold = .T.
Caption = "Áëþäî"
ZOrderSet = 13
Name = "Cmd41"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1SZ0NUEEZ</uniqueid>
		<timestamp>976337571</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd42</objname>
		<parent>cnttuchmenu</parent>
		<properties>Top = 156
Left = 110
Height = 52
Width = 110
FontBold = .T.
Caption = "Áëþäî"
ZOrderSet = 14
Name = "Cmd42"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>976337571</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd43</objname>
		<parent>cnttuchmenu</parent>
		<properties>Top = 156
Left = 220
Height = 52
Width = 110
FontBold = .T.
Caption = "Áëþäî"
ZOrderSet = 15
Name = "Cmd43"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1SY124ZSI</uniqueid>
		<timestamp>976337571</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd44</objname>
		<parent>cnttuchmenu</parent>
		<properties>Top = 156
Left = 330
Height = 52
Width = 110
FontBold = .T.
Caption = "Áëþäî"
ZOrderSet = 16
Name = "Cmd44"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2CK197070</uniqueid>
		<timestamp>976337571</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd51</objname>
		<parent>cnttuchmenu</parent>
		<properties>Top = 208
Left = 0
Height = 52
Width = 110
FontBold = .T.
Caption = "Áëþäî"
ZOrderSet = 17
Name = "Cmd51"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2CK197071</uniqueid>
		<timestamp>976337571</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd52</objname>
		<parent>cnttuchmenu</parent>
		<properties>Top = 208
Left = 110
Height = 52
Width = 110
FontBold = .T.
Caption = "Áëþäî"
ZOrderSet = 18
Name = "Cmd52"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2CK197072</uniqueid>
		<timestamp>976337571</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd53</objname>
		<parent>cnttuchmenu</parent>
		<properties>Top = 208
Left = 220
Height = 52
Width = 110
FontBold = .T.
Caption = "Áëþäî"
ZOrderSet = 19
Name = "Cmd53"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2CK197073</uniqueid>
		<timestamp>976337571</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd54</objname>
		<parent>cnttuchmenu</parent>
		<properties>Top = 208
Left = 330
Height = 52
Width = 110
FontBold = .T.
Caption = "Áëþäî"
ZOrderSet = 20
Name = "Cmd54"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2CK197079</uniqueid>
		<timestamp>976337571</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd61</objname>
		<parent>cnttuchmenu</parent>
		<properties>Top = 260
Left = 0
Height = 52
Width = 110
FontBold = .T.
Caption = "Áëþäî"
ZOrderSet = 21
Name = "Cmd61"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2CK19707A</uniqueid>
		<timestamp>976337571</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd62</objname>
		<parent>cnttuchmenu</parent>
		<properties>Top = 260
Left = 110
Height = 52
Width = 110
FontBold = .T.
Caption = "Áëþäî"
ZOrderSet = 22
Name = "Cmd62"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2CK19707B</uniqueid>
		<timestamp>976337571</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd63</objname>
		<parent>cnttuchmenu</parent>
		<properties>Top = 260
Left = 220
Height = 52
Width = 110
FontBold = .T.
Caption = "Áëþäî"
ZOrderSet = 23
Name = "Cmd63"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2CK19707C</uniqueid>
		<timestamp>976337571</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd64</objname>
		<parent>cnttuchmenu</parent>
		<properties>Top = 260
Left = 330
Height = 52
Width = 110
FontBold = .T.
Caption = "Áëþäî"
ZOrderSet = 24
Name = "Cmd64"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2CK19707I</uniqueid>
		<timestamp>976337571</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd71</objname>
		<parent>cnttuchmenu</parent>
		<properties>Top = 312
Left = 0
Height = 52
Width = 110
FontBold = .T.
Caption = "Áëþäî"
ZOrderSet = 25
Name = "Cmd71"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2CK19707J</uniqueid>
		<timestamp>976337571</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd72</objname>
		<parent>cnttuchmenu</parent>
		<properties>Top = 312
Left = 110
Height = 52
Width = 110
FontBold = .T.
Caption = "Áëþäî"
ZOrderSet = 26
Name = "Cmd72"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2CK19707K</uniqueid>
		<timestamp>976337571</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd73</objname>
		<parent>cnttuchmenu</parent>
		<properties>Top = 312
Left = 220
Height = 52
Width = 110
FontBold = .T.
Caption = "Áëþäî"
ZOrderSet = 27
Name = "Cmd73"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2CK19707L</uniqueid>
		<timestamp>976337571</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd74</objname>
		<parent>cnttuchmenu</parent>
		<properties>Top = 312
Left = 330
Height = 52
Width = 110
FontBold = .T.
Caption = "Áëþäî"
ZOrderSet = 28
Name = "Cmd74"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2CK19707R</uniqueid>
		<timestamp>976337571</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd81</objname>
		<parent>cnttuchmenu</parent>
		<properties>Top = 364
Left = 0
Height = 52
Width = 110
FontBold = .T.
Caption = "Áëþäî"
ZOrderSet = 29
Name = "Cmd81"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2CK19707S</uniqueid>
		<timestamp>976337571</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd82</objname>
		<parent>cnttuchmenu</parent>
		<properties>Top = 364
Left = 110
Height = 52
Width = 110
FontBold = .T.
Caption = "Áëþäî"
ZOrderSet = 30
Name = "Cmd82"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2CK19707T</uniqueid>
		<timestamp>976337571</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd83</objname>
		<parent>cnttuchmenu</parent>
		<properties>Top = 364
Left = 220
Height = 52
Width = 110
FontBold = .T.
Caption = "Áëþäî"
ZOrderSet = 31
Name = "Cmd83"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2CK19707U</uniqueid>
		<timestamp>976337571</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd84</objname>
		<parent>cnttuchmenu</parent>
		<properties>Top = 364
Left = 330
Height = 52
Width = 110
FontBold = .T.
Caption = "Áëþäî"
ZOrderSet = 32
Name = "Cmd84"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>COMMENT</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>0</timestamp>
		<class/>
		<classloc/>
		<baseclass/>
		<objname>cnttuchmenu</objname>
		<parent/>
		<properties>Arial, 1, 9, 6, 15, 12, 32, 3, 0
Arial, 1, 8, 5, 14, 11, 29, 3, 0
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1SY124ZSI</uniqueid>
		<timestamp>997096658</timestamp>
		<class>frmedit</class>
		<classloc>baseform_v1.vcx</classloc>
		<baseclass>form</baseclass>
		<objname>frmpayment_old</objname>
		<parent/>
		<properties>DataSession = 1
Top = 2
Left = 1
Height = 433
Width = 667
ShowWindow = 1
DoCreate = .T.
AutoCenter = .F.
BorderStyle = 3
Caption = "Îïëàòà çàêàçà"
KeyPreview = .F.
TitleBar = 0
BackColor = 241,239,241
nordersum = 0
ncoupon = .F.
nnal = .F.
nsalesid = 0
ncashno = 0
ncheckid = 0
lorderreturn = .F.
lorderpay = .F.
nopereation = 1
ncltbalans = 0
ncltlimit = 0
nfreesumm = 0
ctparam = 
withedel = .F.
guestaccountid = 
edel_clt =  
nkeyb = 0
lckkmlib =  
cmdpay = 0
printinfprech = 0
lndisctvrid = 0
lcprinter = DEFAULT
spuserclt1 =  
spuserclt =  
lntbltype = 0
lntblpar = 0
lnfrmtypeid = 0
lndefclt = 0
lcedelpodr = 0
lcheaderfile =  
lcfooterfile =  
uretval1 = 
nfrmid = 0
_memberdata =       87&lt;VFPData&gt;&lt;memberdata name="clientrate" type="method" display="ClientRate"/&gt;&lt;/VFPData&gt;

Name = "frmpayment"
cstmsghandler.Top = 12
cstmsghandler.Left = 56
cstmsghandler.Height = 17
cstmsghandler.Width = 15
cstmsghandler.Name = "cstmsghandler"
cstresizable.Top = 12
cstresizable.Left = 24
cstresizable.Name = "cstresizable"
Img1.ZOrderSet = 0
Img1.Name = "Img1"
cstdatawork.Top = 12
cstdatawork.Left = 84
cstdatawork.Name = "cstdatawork"
</properties>
		<protected/>
		<methods>PROCEDURE _checkpostprint
*------------------------------------------------------------------------------
* Project.........: BASIS.pjx
* Library.........: RST_V1.vcx
* Class.Module....: frmPayment.CheckPostPrint
* Called by.......: &lt;cmdPay.Click()&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Ïå÷àòü ïðåä÷åêà
*------------------------------------------------------------------------------

*15.04.2006 10:41 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL   lcUniqueFileNM,  lnsumm,lcnt
*------------------------------------------------------------------------------
lnsumm = 0.00
lcnt = 0
WITH This
				*--íàïå÷àòàåì äîïîëíèòåëüíóþ èíôîðìàöèþ î ÷åêå
				.Shtrih.FeedDocument(2)
				.Shtrih.PrintString([*]+PADC([ÎÒËÎÆÅÍÛÉ ×ÅÊ],48,[ ])+[*])
				.Shtrih.FeedDocument(1)
				.Shtrih.PrintString([Äàòà ÷åêà  ]+PADR(ALLTRIM(DTOC(DATE())),24,[ ])+[Âðåìÿ      ]+PADR(ALLTRIM(TIME()),14,[ ]))
				.Shtrih.PrintString([Íîìåð ÷åêà ]+PADR(ALLTRIM(STR(.ncheckid,10)),24,[ ])+   [Íîìåð ñìåíû ]+PADR(ALLTRIM(STR(.nSalesID,10)),14,[ ]))
				.Shtrih.PrintString([Ïîäãîòîâèë ]+PADR(ALLTRIM(.spUserClt1),40,[ ]))
				.Shtrih.FeedDocument(1)
				.Shtrih.PrintString([*]+PADC([ÎÒËÎÆÅÍÛÉ ×ÅÊ],48,[ ])+[*])
				.Shtrih.FeedDocument(3)

				*--íàïå÷àòàåì òîâàðíûå ïîçèöèè
				USE TMP\lvCheckTransViewTmp IN 0 &amp;&amp;ALIAS lvCheckTransView
*!*					SELECT Lvchecktransviewtmp.checktrans as CheckTransUID,;
*!*						  Lvchecktransviewtmp.checktran2 as CheckTransID, Lvchecktransviewtmp.checktran3 as CheckTransType,;
*!*						  Lvchecktransviewtmp.checktran4 as CheckTransTypeSign, Lvchecktransviewtmp.departnm,;
*!*						  Lvchecktransviewtmp.checktran5 as CheckTransTvrID, Lvchecktransviewtmp.tvrnm,;
*!*						  Lvchecktransviewtmp.checktran6 as CheckTransPLU, Lvchecktransviewtmp.checktran7 as CheckTransQnt,;
*!*						  Lvchecktransviewtmp.checktran8 as CheckTransPrc, Lvchecktransviewtmp.mark, Lvchecktransviewtmp.MsuId;
*!*						 FROM lvchecktransviewtmp INTO CURSOR lvCheckTransView
				SELECT lvCheckTransViewTmp
				SCAN
					*--Ôèêñèðóåì òðàíçàêöèþ íà ÔÐ
					.Shtrih.PrintString(LEFT(Lvchecktransviewtmp.tvrnm,25)+PADL(ALLTRIM(STR(Lvchecktransviewtmp.checktran7,99,;
										IIF(Lvchecktransviewtmp.checktran7&lt;&gt;INT(Lvchecktransviewtmp.checktran7),3,0))),6)+[*];
										+PADL(ALLTRIM(STR(Lvchecktransviewtmp.checktran8,99,2)),8)+;
										[=]+PADL(ALLTRIM(STR(ROUND(Lvchecktransviewtmp.checktran7*Lvchecktransviewtmp.checktran8,2),99,2)),9))
				 	*------------------------------------------------------------------------------
				 	lnsumm = ROUND(Lvchecktransviewtmp.checktran7*Lvchecktransviewtmp.checktran8,2)+ lnsumm
				 	lcnt = lcnt + 1
					SELECT lvCheckTransViewTmp
				ENDSCAN

				.Shtrih.PrintString(REPLICATE([-],50))

				*--Ïå÷àòàåì èòîã ÷åêà
				.Shtrih.PrintString([ÈÒÎÃÎ ]+PADL(ALLTRIM(STR(lnsumm,99,2)),44,[ ]))

				.Shtrih.FeedDocument(3)
				.Shtrih.CutCheck()
				USE IN SELECT('lvCheckTransViewTmp')
*------------------------------------------------------------------------------
RETURN .T.
ENDWITH
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE _footerprint
*-- Íàïå÷àòàåì ïîäâàë ÷åêà èç ñïåöèàëüíîãî ôàéëà
LOCAL lnHandleFile, lcLine

WITH This
.lcFooterFile = IIF(AT([.],.lcFooterFile)=0,.lcFooterFile+[.TXT],.lcFooterFile)
IF !EMPTY(.lcFooterFile) AND FILE(.lcFooterFile)
	lnHandleFile = FOPEN(.lcFooterFile)
	IF lnHandleFile &gt; 0
		DO WHILE !FEOF(lnHandleFile)
			*--ñ÷èòûâàåì ïîñòðî÷íî
			lcLine = FGETS(lnHandleFile)
			lcLine = [*]+PADC(ALLTRIM(lcLine),48)+[*]
			*--íàïå÷àòàåì
			.Shtrih.PrintString(lcLine)
		ENDDO
		FCLOSE(lnHandleFile)
		.Shtrih.FeedDocument(2)
	ENDIF
ELSE
		.Shtrih.PrintHeader()
ENDIF
ENDWITH
ENDPROC
PROCEDURE _handlecntcancelsaveevent
*-------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: RST_V1.VCX
* Class.Module....: FRMPAYMENT._HANDLECNTCANCELSAVEEVENT
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;tcMessage&gt;
* Returns.........: &lt;none&gt;
* Notes...........: &lt;~&gt;
*-------------------------------------------------------
LPARAMETERS tcMessage
LOCAL lfullsum
lfullsum = IIF(thisform.txtcalcnum1.value&gt;thisform.nOrderSum,thisform.txtcalcnum1.value,thisform.nOrderSum)
this.olecommprox1._close()

WITH This
	IF tcMessage = [OK]
		IF .nopereation = 7
			._checkpostprint()   &amp;&amp; ïå÷àòàåì îòëîæåíûé ÷åê
			.uRetVal = .t.
			.hide()
			*------------------------------------------------------------------------------
			RELEASE pccardcode
			RETURN .t.
		ENDIF
		*--â çàâèñèìîñòè îò âûáðàííîãî òèïà äîêóìåíòà ïðîèçâåäåì ñîõðàíåíèå
		IF .CntFrmTypeID.value&lt;&gt;22
			IF MESSAGEBOX([Èçìåíèòü òèï äîêóìåíòà?],36,[Îêíî ñîîáùåíèé])=7
				.CntFrmTypeID.setvalue(22)
				.CntFrmTypeID.SetFocus()
				RELEASE pccardcode
				RETURN .F.
			ELSE
				*--ñîõðàíåíèå çàêàçà êàê äîêóìåíòà äðóãîãî òèïà (çàÿâêà, èíâåíòàðíàÿ âåäîìîñòü)
				.lorderpay = .T.
				._ok(.T.)
			ENDIF
		ENDIF
		*--Ïðîèçâåäåì ïðîâåðêó êîððåêòíîñòè äàííûõ è ñôîðìèðóåì âîçâðàùàåìîå çíà÷åíèå
		.uRetVal1 = [0.00,0,0,0)1]
		DO CASE
			CASE .CntPayTypeID.Value = 1
				*--îïëàòà íàëè÷íûìè
				.uRetVal1 = [(]+ALLTRIM(STR(lfullsum,99,2))+[,0,0,0)1]
				
			CASE .CntPayTypeID.Value = 2
				*--îïëàòà áàíêîâñêîé êàðòîé
				.uRetVal1 = [(0,]+ALLTRIM(STR(.nOrderSum,99,2))+[,0,0)2]
				
			CASE .CntPayTypeID.Value = 3
				*--îïëàòà êóïîíîì
				IF EMPTY(.cntOUID.Value) OR EMPTY(.cntCouponID.Value)
					MESSAGEBOX([Óêàæèòå âñå äàííûå äëÿ äàííîãî òèïà îïëàòû.],48,[Îêíî ñîîáùåíèé])
					RETURN .F.
				ENDIF
				
				.uRetVal1 = ALLTRIM(STR(.cntCouponID.Value))+[(]+ALLTRIM(STR(.nNal,99,2))+[,0,]+ALLTRIM(STR(.nCoupon,99,2))+[,0)3]
				
			CASE .CntPayTypeID.Value = 4
				*--îïëàòà VIP êàðòîé
				.uRetVal1 = [(0,0,0,]+ALLTRIM(STR(.nOrderSum,99,2))+[)4]
				
		ENDCASE

		**.uRetVal = .F.
	    IF .printprecheck()
			.uRetVal = .printcheckfr()
		ENDIF
	ELSE
		*--tcMessage = [ESC]
		.uRetVal = .F.
	ENDIF
	*--Ñêðûâåì ôîðìó
	IF 	VARTYPE(.uRetVal)='L' AND .uRetVal

		*03.11.2008 11:42 -&gt;Ïîêàæåì íà äèñïëåå ïîêóïàòåëÿ ðàñ÷åò
		IF VARTYPE(LnDisp)=[O]
			LnDisp.ClearText()
			LnDisp.displaytextat(0,0,[ÏÎËÓ×ÅÍÎ:]+STR(.txtcalcnum1.Value,10,2),1)
			LnDisp.displaytextat(1,0,[ÑÄÀ×À   :]+STR(VAL(.lblChange.Caption),10,2),1)
		ENDIF
		*------------------------------------------------------------------------------
		DO CASE
		  CASE .nopereation = 1 &amp;&amp; ïðîäàæà
				MESSAGEBOX('Ðåãèñòðàöèÿ îïëàòû ïðîèçâåäåíà...'+chr(13)+;
						   [ÏÎËÓ×ÅÍÎ:]+STR(.txtcalcnum1.Value,10,2)+chr(13)+;
						   [ÑÄÀ×À   :]+STR(VAL(.lblChange.Caption),10,2),0+64,'Èíôîðìàöèÿ îá îïëàòå')
		  CASE .nopereation = 2  &amp;&amp; Âîçâðàò
				MESSAGEBOX('Ðåãèñòðàöèÿ âûäà÷è äåíåã ïðîèçâåäåíà...'+chr(13)+;
						   [ÂÛÄÀÍÎ:]+STR(.txtcalcnum1.Value,10,2)+chr(13)+;
						   [ÂÇßÒÎ :]+STR(VAL(.lblChange.Caption),10,2),0+64,'Èíôîðìàöèÿ îá âûäà÷å')
		  CASE .nopereation = 8  &amp;&amp; âíåñíåíèå äåíåã
				MESSAGEBOX('Ðåãèñòðàöèÿ âíåñåíèÿ äåíåã ïðîèçâåäåíà...'+chr(13)+;
						   [ÂÍÅÑÅÍÎ:]+STR(.txtcalcnum1.Value,10,2),0+64,'Èíôîðìàöèÿ îá âíåñåíèè')
		  CASE .nopereation = 9  &amp;&amp; èçúÿòèå äåíåã
				MESSAGEBOX('Ðåãèñòðàöèÿ èçúÿòèÿ äåíåã ïðîèçâåäåíà...'+chr(13)+;
						   [ÈÇÚßÒÎ:]+STR(.txtcalcnum1.Value,10,2),0+64,'Èíôîðìàöèÿ îá èçúÿòèè')
		ENDCASE
	ENDIF
	.hide()
	*------------------------------------------------------------------------------
	RELEASE pccardcode
ENDWITH
************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************
ENDPROC
PROCEDURE _headerprint
*-- Íàïå÷àòàåì çàãîëîâîê ÷åêà èç ñïåöèàëüíîãî ôàéëà
LOCAL  lnHandleFile, lcLine

WITH This
.lcHeaderFile = IIF(AT([.],.lcHeaderFile)=0,.lcHeaderFile+[.TXT],.lcHeaderFile)
IF !EMPTY(.lcHeaderFile) AND FILE(.lcHeaderFile)
	lnHandleFile = FOPEN(.lcHeaderFile)
	IF lnHandleFile &gt; 0
		DO WHILE !FEOF(lnHandleFile)
			*--ñ÷èòûâàåì ïîñòðî÷íî
			lcLine = FGETS(lnHandleFile)
			lcLine = [*]+PADC(ALLTRIM(lcLine),48)+[*]
			*--íàïå÷àòàåì
			.Shtrih.PrintString(lcLine)
		ENDDO
		FCLOSE(lnHandleFile)
		.Shtrih.FeedDocument(2)
	ENDIF
	ELSE
		.Shtrih.PrintHeader()
ENDIF
lcLine= 'Êàññèð: '+ALLTRIM(spUserClt(1))
.Shtrih.PrintString(lcLine)

ENDWITH
ENDPROC
PROCEDURE _iscasher
*-- ïðîâåðèì, ÿâëÿåòñÿ ëè äàííûé îôèöèàíò êàññèðîì
LOCAL _PARAM

USE IN SELECT([lvcashierByCltView])
_PARAM = This.spUserClt
USE lvcashierByCltView IN 0

IF RECCOUNT([lvcashierByCltView])&lt;=0
	MESSAGEBOX([Äàííûé ñîòðóäíèê íå ÿâëÿåòñÿ êàññèðîì],48,[Îáðàòèòåñü ê àäìèíèñòðàòîðó])
	RETURN .F.
ELSE
	RETURN .T.
ENDIF
ENDPROC
PROCEDURE _ok
*-------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: RST_V1.VCX
* Class.Module....: FRMORDEREDIT._OK()
* Called by.......: frmOrderEdit.lblEdit.Click()
* Parameters......: &lt;tcMessage&gt;
* Returns.........: &lt;none&gt;
* Notes...........: &lt;~&gt;
*-------------------------------------------------------
LPARAMETER tChangeTypeOrd

LOCAL	llResSaveOrd, ;
		llDataChanged, _PARAM,lPayMode

WITH This			
	*--Îòêðîåì òðàíçàêöèþ
	BEGIN TRANSACTION
	*--Ïîäãîòîâèìñÿ ê ñîõðàíåíèþ äàííûõ

	*-- Åñëè âêëþ÷åí ôëàã îïëàòû çàêàçà, ïîìåíÿåì åãî ñòàòóñ
	IF .lorderpay
		USE IN SELECT([lvFrmEdit])
		_PARAM = .nFrmID
		USE lvFrmEdit IN 0
		SELECT lvFrmEdit
		IF lvFrmEdit.FrmTypeId = 30 &amp;&amp; Ñ÷åò çà ïðîæèâàíèå
			REPLACE FrmIsPayed WITH IIF(.nopereation=2,.f.,.T.) IN lvFrmEdit
			*** - 22.03.2009 09:30:47 Ãëóõîâ Â.Þ. (C) - Ïðàâà ïðèíàäëåæàò
			*** åñëè îïëà÷èâàåì - äåëàåì ãàðàíòèðîâàííîå áðîíèðîâàíèå
			IF lvFrmEdit.FrmStatusID &lt; 2 AND .nopereation=1
				REPLACE FrmStatusID WITH 2 IN lvFrmEdit
			ENDIF
			*** åñëè âîçâðàò - îòìåíÿåì ãàðàíòèðîâàííîå áðîíèðîâàíèå
			IF .nopereation=2
				REPLACE FrmStatusID WITH 1 IN lvFrmEdit
			ENDIF
		ELSE
			REPLACE FrmStatusID WITH 3 , FrmIsPayed WITH .T. IN lvFrmEdit
		ENDIF
		*--ïðè ñîõðàíåíèè çàêàçà êàê äîêóìåíòà äðóãîãî òèïà
		IF tChangeTypeOrd
			REPLACE FrmTypeID WITH .CntFrmTypeID.value IN lvFrmEdit
		ELSE
		 		USE lvFrmPartFrm IN 0 NODATA
				**CURSORSETPROP([BUFFERING],3,[lvFrmPartFrm])
				* Åñëè åñòü äàííûå ïî çàêàçó - äîáàâëÿåì èíôó ïî ÷åêó â çàêàç
			lPayMode = VAL(RIGHT(this.uretval1,1))
			DO CASE
				CASE lPayMode=4 OR INLIST(.nOpereation,4,5,6)
					.nOrderSum = 0
				CASE INLIST(.nOpereation,2,3)
					.nOrderSum = ABS(.nOrderSum)
				CASE .nOpereation = 1
					.nOrderSum = .nOrderSum *-1
			ENDCASE
		    	INSERT INTO lvFrmPartFrm ;
						           (FrmID        ;
						           ,CntFrmID     ;
						           ,CntFrmIncludeSum ;
						           ,CntFrmIncludeSumVAT ;
						           ,CntFrmIncludeSumVATRate ;
						           ,CntFrmSumSplitProcID ;
						           ,FrmPartFrmNote ;
						           ,FrmCheckID) ;
			     VALUES ;
						           (.nFrmID ;
						           ,.nFrmID  ;
						           ,.nOrderSum ;
						           ,0 ;
						           ,0 ;
						           ,1 ;
						           ,ALLTRIM(STR(.nCheckID))+'÷åêID' ;
						           ,.nCheckID)
				IF !TABLEUPDATE(1,.T.,[lvFrmPartFrm])
							TABLEREVERT(.T.,[lvFrmPartFrm])
							MESSAGEBOX([Îøèáêà ïðè äîáàâëåíèè â çàêàç äàííûõ îá îïëàòå.],48,[Îêíî ñîîáùåíèé])
				ENDIF
		        USE IN lvFrmPartFrm
		        *--- óäàëÿåì èç çàêàçà ñëóæåáíûå ïîçèöèè
		        SET DATABASE TO BASIS
		        LOCAL lnConnectHandle ,lnSqlExeResult
		        #DEFINE	pcvCONNECTIONNAME	'SQLBASISCONNECTION'
		        lnConnectHandle = SQLCONNECT(pcvCONNECTIONNAME)
				*------------------------------------------------------------------------------
				*** - 22.03.2009 12:34:14 Ãëóõîâ Â.Þ. (C) - Ïðàâà ïðèíàäëåæàò
				lnSqlExeResult = 0
							***
							DO WHILE (lnSqlExeResult = 0) AND (lnSqlExeResult # -1)
								lnSqlExeResult = SQLEXEC(lnConnectHandle, ;
									[SET LOCK_TIMEOUT ] + [1000] + [ ] + ;
									[DELETE FROM FrmPartTvr WHERE FrmId = ]+ ALLTRIM(STR(.nFrmID))+[ AND TvrId = -1] )
							ENDDO
							***
							IF lnSqlExeResult = -1
								*11.08.2006 14:53 -&gt;Âûçîâåì ïðîöåäóðó îáðàáîòêè îøèáîê
								spHandleODBCError()
								*------------------------------------------------------------------------------
							ENDIF
		        lnSqlExeResult = SQLDISCONNECT(lnConnectHandle)
		ENDIF
	ENDIF
	*------------------------------------------------------------------------------
	*-- Ïðîèçâîäèì ñîõðàíåíèå øàïêè çàêàçà
	llDataChanged = .cstDataWork.DataChanged([lvFrmEdit],.T.)
	IF llDataChanged
		llResSaveOrd = .cstDataWork.Save([lvFrmEdit])
	ELSE
		llResSaveOrd = .T.
	ENDIF
	*------------------------------------------------------------------------------
	this.nfrmid = 0
	this.ncheckid=0
	*-- Îáðàáîòàåì ðåçóëüòàòû ÂÑÅÕ îïåðàöèé ñîõðàíåíèÿ
	IF llResSaveOrd
		*--Ïîäòâåðæäàåì òðàíçàêöèþ

			LOCAL lRetVal , lPayMode
	        lRetVal = this.uretval1
			IF TYPE([lRetVal])==[C] &amp;&amp;
				*--òèï îïëàòû
				lPayMode = VAL(RIGHT(lRetVal,1))
			ENDIF
			IF .withedel AND TYPE('lPayMode')='N' AND lPayMode = 4
				.WriteToEdel(ALLTRIM(pccardcode))
			ENDIF
		END TRANSACTION
		.uRetVal = .T.
	ELSE
		*--Îòêàòûâàåì òðàíçàêöèþ
		ROLLBACK
		MESSAGEBOX([Â ïðîöåññå ñîõðàíåíèÿ ïðîèçîøëà îøèáêà. Èçìåíåíèÿ ñîõðàíåíû íå áóäóò.],48,[Îêíî ñîîáùåíèé])
		.uRetVal = .F.
	ENDIF
ENDWITH
*------------------------------------------------------------------------------------

************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************

ENDPROC
PROCEDURE _storechktrans
*------------------------------------------------------------------------------
* Project.........: BASIS.pjx
* Library.........: RST_V1.vcx
* Class.Module....: frmOrderEdit._StoreCheckTrans
* Called by.......: &lt;cmdPay.Click()&gt;
* Parameters......: tfsctype - òèï îïëàòû, tfscexp - ïàðàìåòðû ôèñêàëüíîãî ÷åêà
* Returns.........: &lt;none&gt;
* Notes...........: Ñîõðàíåíèå òðàíçàêöèè ÷åêà
*------ ÏÅÐÅÍÎÑÈÌ ------------------------------------------------------------------------
LPARAMETER tfsctype, tfscexp

LOCAL   lcUniqueFileNM, ;
		lnDiscount, ;
		lfsctype, ;
		ls1, ;
		ls2, ;
		ls3, ;
		ls4, ;
		lsAll,;
		lnTmpCheckID,;
		resultUp
lsAll = 0
*------------------------------------------------------------------------------
lfsctype = tfsctype
ls1 = VAL(SUBSTR(tfscexp,AT([(],tfscexp)+1,AT([,],tfscexp,1)-AT([(],tfscexp)-1))
ls2 = VAL(SUBSTR(tfscexp,AT([,],tfscexp,1)+1,AT([,],tfscexp,2)-AT([,],tfscexp,1)-1))
ls3 = VAL(SUBSTR(tfscexp,AT([,],tfscexp,2)+1,AT([,],tfscexp,3)-AT([,],tfscexp,2)-1))
ls4 = VAL(SUBSTR(tfscexp,AT([,],tfscexp,3)+1,AT([)],tfscexp)-AT([,],tfscexp,3)-1))

WITH This
*--Åñëè äåíü íå îòêðûò, òî îòêðîåì
IF .nSalesID = 0
	.nSalesID = spSaleOpenDay(.nCashNo)
	IF TYPE('.nSalesID')&lt;&gt;'N'
		MESSAGEBOX([Îøèáêà îòêðûòèÿ ñìåíû],0+64,[×åê íåëüçÿ íàïå÷àòàòü])
		RETURN .F.
	ENDIF
	IF .nSalesID &lt; 0
		MESSAGEBOX([Îøèáêà îòêðûòèÿ ñìåíû.Âîçìîæíî, ñìåíà ïðåâûñèëà 24 ÷àñà],0+64,[×åê íåëüçÿ íàïå÷àòàòü])
		RETURN .F.
	ENDIF
ENDIF
*------------------------------------------------------------------------------


*--Åñëè ÷åê íå îòêðûò - îòêðîåì åãî
IF .nCheckID = 0
	lcUniqueFileNM = spOpenCheck(.nSalesID,.nopereation *-1,.nCashNo,This.spUserClt)
	IF VARTYPE(lcUniqueFileNM)&lt;&gt;'C'
		MESSAGEBOX('Îøèáêà ïîäãîòîâêè ÷åêà.Âîçìîæíî, ñìåíà ïðåâûñèëà 24 ÷àñà.'+CHR(13)+'Ñìåíà:'+STR(.nSalesID,10,0),0+64,'×åê íåëüçÿ íàïå÷àòàòü')
		RETURN .F.
	ENDIF
	*15.04.2006 10:51 -&gt;Ñîõðàíèì ïàðàìåòðû ÷åêà
	USE ([tmp\]+lcUniqueFileNM) IN 0 ALIAS CheckParam
	lnTmpCheckID = CheckParam.CheckID
	*------------------------------------------------------------------------------
	*15.04.2006 10:51 -&gt;Óäàëèì ôàéë ñ ïàðàìåòðàìè
	USE IN SELECT([CheckParam])
	IF FILE([tmp\]+lcUniqueFileNM+[.dbf])
	   ERASE ([tmp\]+lcUniqueFileNM+[.dbf])
	ENDIF
	*------------------------------------------------------------------------------
ENDIF
*------------------------------------------------------------------------------
*--Íàïå÷àòàåì çàãîëîâîê ÷åêà èç ñïåöèàëüíîãî ôàéëà
._HeaderPrint()
WAIT WINDOW [Ïîäîæäèòå...] NOWAIT &amp;&amp;TIMEOUT 1

*--Îòêðûâàåì LV äëÿ äîáàâëåíèÿ òðàíçàêöèè
*------------------------------------------------------------------------------
DO CASE
	CASE .nCheckID=0 AND .nfrmid&lt;&gt;0
		SELECT lvOrderTvrView
		GO TOP
		SCAN FOR lvOrderTvrView.TvrID&lt;&gt;.lnDiscTvrID
			USE IN SELECT([lvCheckTransEdit])
			USE lvCheckTransEdit IN 0 NODATA
			CURSORSETPROP([BUFFERING],3,[lvCheckTransEdit])
					APPEND BLANK IN lvCheckTransEdit
					REPLACE ;
						lvCheckTransEdit.CheckTransID		WITH RECNO([lvOrderTvrView]), ;
						lvCheckTransEdit.CheckID 			WITH lnTmpCheckID , ;
						lvCheckTransEdit.CheckTransTypeID	WITH 1, ;
						lvCheckTransEdit.CheckTransTvrId	WITH lvOrderTvrView.TvrID, ;
						lvCheckTransEdit.CheckTransQnt		WITH lvOrderTvrView.TvrQnt, ;
						lvCheckTransEdit.CheckTransPrc		WITH lvOrderTvrView.TvrPrcSale ;
					IN lvCheckTransEdit
					***
					resultUp = TABLEUPDATE(0,.T.,[lvCheckTransEdit])
					*------------------------------------------------------------------------------
			*--Ôèêñèðóåì òðàíçàêöèþ íà ÔÐ
			IF !SELECT('lvCheckTransView')=0
				SELECT lvCheckTransView
				LOCATE ALL FOR lvCheckTransView.CheckTransTvrID = lvOrderTvrView.TvrId
				IF FOUND()
					SELECT lvOrderTvrView
					REPLACE lvOrderTvrView.TvrNM WITH lvCheckTransView.TvrNm
				ENDIF
			ENDIF
				DO CASE
				  CASE this.nopereation = 1 AND lvOrderTvrView.TvrQnt&lt;&gt;0&amp;&amp; ïðîäàæà
				       .Shtrih.CheckSaleTran(lvOrderTvrView.TvrNM,lvOrderTvrView.TvrQnt,lvOrderTvrView.TvrPrcSale,lvOrderTvrView.TvrVatRate)
				  CASE this.nopereation = 2  &amp;&amp; Âîçâðàò
					   .Shtrih.CheckSaleReturn(lvOrderTvrView.TvrNM,lvOrderTvrView.TvrQnt,lvOrderTvrView.TvrPrcSale,lvOrderTvrView.TvrVatRate)
				  CASE this.nopereation = 8  &amp;&amp; âíåñíåíèå äåíåã
				  CASE this.nopereation = 9  &amp;&amp; èçúÿòèå äåíåã
				ENDCASE

			WAIT WINDOW [Ïîäîæäèòå...] NOWAIT &amp;&amp; TIMEOUT .3

		 	*------------------------------------------------------------------------------
			LOCAL lnError
			.Shtrih.ErrorCode = IIF(VARTYPE(.Shtrih.ErrorCode)=[N],.Shtrih.ErrorCode,-1000)
			lnError = .Shtrih.ErrorCode
			*16.04.2006 10:10 -&gt;Çàïèøåì â Log èíôîðìàöèþ îá îøèáêå
			IF  (VARTYPE(lnError)=[N] AND lnError # 0)   &amp;&amp;OR lnError
				.KKMErrorHandler([Îøèáêà ]  + PADL(ALLTRIM(STR(.Shtrih.ErrorCode)),3) + [ ïðè ïå÷àòè òðàíçàêöèè ÷åêà. ] + ;
							  [Ñìåíà # ] + ALLTRIM(STR(.nSalesID)) + [ ] + ;
							  [×åê   # ] + ALLTRIM(STR(lnTmpCheckID)) + [ ] + ;
							  [Ïîç.  # ] + ALLTRIM(STR(RECCOUNT([lvOrderTvrView]))) + CHR(13))
				RETURN .F.

			ENDIF
			*------------------------------------------------------------------------------

			SELECT lvOrderTvrView
		ENDSCAN
	CASE .nCheckID&lt;&gt;0
		SELECT * FROM lvCheckTransView INTO CURSOR lvCheckTransViewtttm
		USE IN SELECT('lvCheckTransView')
		SELECT * FROM lvCheckTransViewtttm INTO CURSOR lvCheckTransView ORDER BY CheckTransQnt DESCENDING
		USE IN SELECT('lvCheckTransViewtttm')
		SELECT lvCheckTransView
		GO TOP
		SCAN FOR lvCheckTransView.CheckTransTvrID&lt;&gt;.lnDiscTvrID
			*--Ôèêñèðóåì òðàíçàêöèþ íà ÔÐ
				DO CASE
				  CASE this.nopereation = 1 &amp;&amp;AND lvOrderTvrView.TvrQnt&lt;&gt;0 &amp;&amp; ïðîäàæà
				       IF lvCheckTransView.CheckTransQnt&gt;0
					       .Shtrih.CheckSaleTran(lvCheckTransView.TvrNm,lvCheckTransView.CheckTransQnt,lvCheckTransView.CheckTransPrc,0)
							lsAll = lsAll +(lvCheckTransView.CheckTransQnt*lvCheckTransView.CheckTransPrc)
				       ELSE
							*--Ïå÷àòàåì èòîã ÷åêà
							WAIT WINDOW [Ïîäîæäèòå...] TIMEOUT .5
							.Shtrih.CloseCheck(ABS(lsAll),ls2,ls3,ls4)
							WAIT WINDOW [Ïîäîæäèòå...] TIMEOUT 2
					       lsAll = 0
							._HeaderPrint()
							WAIT WINDOW [Ïîäîæäèòå...] TIMEOUT 2
						   .Shtrih.CheckSaleReturn(lvCheckTransView.TvrNm,ABS(lvCheckTransView.CheckTransQnt),lvCheckTransView.CheckTransPrc,0)
							lsAll = lsAll +(lvCheckTransView.CheckTransQnt*lvCheckTransView.CheckTransPrc)
				       ENDIF
				  CASE this.nopereation = 2  &amp;&amp; Âîçâðàò
				       IF lvCheckTransView.CheckTransQnt&gt;0
						   .Shtrih.CheckSaleReturn(lvCheckTransView.TvrNm,lvCheckTransView.CheckTransQnt,lvCheckTransView.CheckTransPrc,0)
							lsAll = lsAll +(lvCheckTransView.CheckTransQnt*lvCheckTransView.CheckTransPrc)
				       ELSE
							*--Ïå÷àòàåì èòîã ÷åêà
							WAIT WINDOW [Ïîäîæäèòå...] TIMEOUT .5
							.Shtrih.CloseCheck(ABS(lsAll),ls2,ls3,ls4)
					       lsAll = 0

							WAIT WINDOW [Ïîäîæäèòå...] TIMEOUT 2

							._HeaderPrint()
							WAIT WINDOW [Ïîäîæäèòå...] TIMEOUT 2
					       .Shtrih.CheckSaleTran(lvCheckTransView.TvrNm,ABS(lvCheckTransView.CheckTransQnt),lvCheckTransView.CheckTransPrc,0)
							lsAll = lsAll +(lvCheckTransView.CheckTransQnt*lvCheckTransView.CheckTransPrc)
				       ENDIF
				  CASE this.nopereation = 8  &amp;&amp; âíåñíåíèå äåíåã
				  CASE this.nopereation = 9  &amp;&amp; èçúÿòèå äåíåã
				ENDCASE

			WAIT WINDOW [Ïîäîæäèòå...] NOWAIT TIMEOUT .3

		 	*------------------------------------------------------------------------------
			LOCAL lnError
			.Shtrih.ErrorCode = IIF(VARTYPE(.Shtrih.ErrorCode)=[N],.Shtrih.ErrorCode,-1000)
			lnError = .Shtrih.ErrorCode
			*16.04.2006 10:10 -&gt;Çàïèøåì â Log èíôîðìàöèþ îá îøèáêå
			IF  (VARTYPE(lnError)=[N] AND lnError # 0)   &amp;&amp;OR lnError
				.KKMErrorHandler([Îøèáêà ]  + PADL(ALLTRIM(STR(.Shtrih.ErrorCode)),3) + [ ïðè ïå÷àòè òðàíçàêöèè ÷åêà. ] + ;
							  [Ñìåíà # ] + ALLTRIM(STR(.nSalesID)) + [ ] + ;
							  [×åê   # ] + ALLTRIM(STR(.nCheckID)) + [ ] + ;
							  [Ïîç.  # ] + ALLTRIM(STR(RECCOUNT([lvOrderTvrView]))) + CHR(13))
				RETURN .F.

			ENDIF
			*------------------------------------------------------------------------------

			SELECT lvCheckTransView
		ENDSCAN
ENDCASE

*--Ïå÷àòàåì ñêèäêó (åñëè îíà åñòü)
SELECT lvOrderTvrView
LOCATE FOR lvOrderTvrView.TvrID=.lnDiscTvrID
IF FOUND()
	lnDiscount = (-1)*lvOrderTvrView.TvrPrcSale
	IF this.nCheckID=0 AND this.nfrmid&lt;&gt;0
		USE IN SELECT([lvCheckTransEdit])
		USE lvCheckTransEdit IN 0 NODATA
		CURSORSETPROP([BUFFERING],3,[lvCheckTransEdit])
				APPEND BLANK IN lvCheckTransEdit
				REPLACE ;
					lvCheckTransEdit.CheckTransID		WITH RECNO([lvOrderTvrView]), ;
					lvCheckTransEdit.CheckID 			WITH lnTmpCheckID , ;
					lvCheckTransEdit.CheckTransTypeID	WITH 1, ;
					lvCheckTransEdit.CheckTransTvrId	WITH lvOrderTvrView.TvrID, ;
					lvCheckTransEdit.CheckTransQnt		WITH lvOrderTvrView.TvrQnt, ;
					lvCheckTransEdit.CheckTransPrc		WITH lvOrderTvrView.TvrPrcSale ;
				IN lvCheckTransEdit
				***
				resultUp = TABLEUPDATE(0,.T.,[lvCheckTransEdit])
	*------------------------------------------------------------------------------
	ENDIF
	.Shtrih.CheckDiscount(lnDiscount)
	WAIT WINDOW [Ïîäîæäèòå...] NOWAIT TIMEOUT .5
	
	*--Ïðèâÿçûâàåì âëàäåëüöà äèñêîíòíîé êàðòû ê çàêàçó
	*IF NVL(VAL(lvFrmEdit.FrmNote),0)&lt;&gt;0
		spBindDisc(lnTmpCheckID,lvFrmEdit.PointIspCltID)
	*ENDIF

ENDIF
.nCheckID = lnTmpCheckID


*--Ïå÷àòàåì èòîã ÷åêà
IF lsAll&lt;&gt;0
	ls1 = ABS(lsAll)
ENDIF
.Shtrih.CloseCheck(ls1,ls2,ls3,ls4)
WAIT WINDOW [Ïîäîæäèòå...] NOWAIT TIMEOUT .5
	

*16.04.2006 10:10 -&gt;Çàïèøåì â Log èíôîðìàöèþ îá îøèáêå
IF .Shtrih.ErrorCode # 0

	.KKMErrorHandler([Îøèáêà ]  + PADL(ALLTRIM(STR(.Shtrih.ErrorCode)),3) + [ ïðè ïå÷àòè òðàíçàêöèè ÷åêà. ] + ;
				  [Ñìåíà # ] + ALLTRIM(STR(.nSalesID)) + [ ] + ;
				  [×åê   # ] + ALLTRIM(STR(.nCheckID)) + [ ] + CHR(13))
	RETURN .F.

ENDIF

*------------------------------------------------------------------------------

WAIT CLEAR

RETURN spCloseCheck(.nCheckID)

ENDWITH
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************






ENDPROC
PROCEDURE _storechktrans_pred
*------------------------------------------------------------------------------
* Project.........: BASIS.pjx
* Library.........: RST_V1.vcx
* Class.Module....: frmPayment._StoreCheckTrans_pred
* Called by.......: &lt;cmdPay.Click()&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Ïå÷àòü ïðåä÷åêà
*------------------------------------------------------------------------------

*15.04.2006 10:41 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL   lcUniqueFileNM,  lcnt
*------------------------------------------------------------------------------
this.printpredtoprint()


WITH This
IF .PrintinfPrech =1
				*12.04.2006 15:54 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
				LOCAL   _PARAM
				*--Íàïå÷àòàåì çàãîëîâîê ÷åêà èç ñïåöèàëüíîãî ôàéëà
				._HeaderPrint()
				*--íàïå÷àòàåì äîïîëíèòåëüíóþ èíôîðìàöèþ î çàêàçå
				.Shtrih.FeedDocument(2)
				.Shtrih.PrintString([Äàòà ]+PADR(ALLTRIM(DTOC(DATE())),24,[ ])+[Âðåìÿ ]+PADR(ALLTRIM(TIME()),14,[ ]))
				.Shtrih.PrintString(PADR(ALLTRIM(lvOUTableList.NM),29,[ ])+[Êîë-âî ãîñòåé ]+PADR(ALLTRIM(STR(lvFrmEdit.ID_)),6,[ ]))
				.Shtrih.PrintString([Íîìåð çàêàçà ]+PADR(ALLTRIM(lvFrmEdit.FrmNum),36,[ ]))
				.Shtrih.PrintString([Èñïîëíèòåëü ]+PADR(ALLTRIM(.spUserClt1),40,[ ]))
				.Shtrih.PrintString([Ãîñòü ]+PADR(ALLTRIM(lvCltRSTList.NM),42,[ ]))
				.Shtrih.FeedDocument(3)
				.Shtrih.PrintString([*]+PADC([ÇÀÊÀÇ],48,[ ])+[*])
				.Shtrih.FeedDocument(3)

				*--íàïå÷àòàåì òîâàðíûå ïîçèöèè
				lcnt = 0
				SELECT lvOrderTvrView
				GO TOP
				SCAN FOR lvOrderTvrView.TvrID&lt;&gt;.lnDiscTvrID
					lcnt = lcnt+1
					*--Ôèêñèðóåì òðàíçàêöèþ íà ÔÐ
					.Shtrih.PrintString(LEFT(lvOrderTvrView.TvrNM,25)+PADL(ALLTRIM(STR(lvOrderTvrView.TvrQnt,99,;
										IIF(lvOrderTvrView.TvrQnt&lt;&gt;INT(lvOrderTvrView.TvrQnt),1,0))),6)+[*];
										+PADL(ALLTRIM(STR(lvOrderTvrView.TvrPrcSale,99,2)),8)+;
										[=]+PADL(ALLTRIM(STR(ROUND(lvOrderTvrView.TvrQnt*lvOrderTvrView.TvrPrcSale,2),99,2)),9))
				 	*------------------------------------------------------------------------------

					*16.04.2006 10:10 -&gt;Çàïèøåì â Log èíôîðìàöèþ îá îøèáêå
					IF .Shtrih.ErrorCode # 0
						STRTOFILE(TTOC(DATETIME()) + [ -&gt; ] + ;
								  [Îøèáêà ]  + PADL(ALLTRIM(STR(.Shtrih.ErrorCode)),3) + [ ïðè ïå÷àòè òðàíçàêöèè ÷åêà. ] + ;
								  [Ñìåíà # ] + ALLTRIM(STR(.nSalesID)) + [ ] + ;
								  [×åê   # ] + ALLTRIM(STR(.nCheckID)) + [ ] + ;
								  [Ïîç.  # ] + ALLTRIM(STR(RECCOUNT([lvCheckTransView]))) + CHR(13), [KKM.LOG], 1)
								
						*16.04.2006 10:29 -&gt;Îòìåòèì â ÷åêå, ÷òî ïðè ðàáëòå ñ ÔÐ âîçíèêëà îøèáêà
						spSaleFiscError(.nCheckID)
						*------------------------------------------------------------------------------
				    RETURN .F.
					ENDIF
					*------------------------------------------------------------------------------
					SELECT lvOrderTvrView
				ENDSCAN

				.Shtrih.PrintString(REPLICATE([-],50))

				*--Ïå÷àòàåì ñêèäêó (åñëè îíà åñòü)
				SELECT lvOrderTvrView
				GO TOP
				LOCATE FOR lvOrderTvrView.TvrID=.lnDiscTvrID
				IF FOUND()
					lnDiscount = (-1)*lvOrderTvrView.TvrPrcSale
					.Shtrih.PrintString([Ñêèäêà ]+ALLTRIM(STR(lnDiscount,99,2)))
				ENDIF

				*--Ïå÷àòàåì èòîã ÷åêà
				.Shtrih.PrintString([ÈÒÎÃÎ ]+PADL(ALLTRIM(STR(.nOrderSum,99,2)),44,[ ]))

				IF lcnt&lt;10
					.Shtrih.FeedDocument(10-lcnt)
					else
					.Shtrih.FeedDocument(3)
				ENDIF

				*--Íàïå÷àòàåì çàãîëîâîê ÷åêà èç ñïåöèàëüíîãî ôàéëà
				._FooterPrint()

				.Shtrih.FeedDocument(3)
				.Shtrih.CutCheck()
				*------------------------------------------------------------------------------

				*16.04.2006 10:26 -&gt;Çàïèøåì â Log èíôîðìàöèþ îá îøèáêå
				IF .Shtrih.ErrorCode # 0
					STRTOFILE(TTOC(DATETIME()) + [ -&gt; ] + ;
							  [Îøèáêà ]  + PADL(ALLTRIM(STR(.Shtrih.ErrorCode)),3) + [ ïðè ïå÷àòè èòîãà ÷åêà. ] + ;
							  [Ñìåíà # ] + ALLTRIM(STR(.nSalesID)) + [ ] + ;
							  [×åê   # ] + ALLTRIM(STR(.nCheckID)) + CHR(13), [KKM.LOG], 1)
							
					*16.04.2006 10:30 -&gt;Îòìåòèì â ÷åêå, ÷òî ïðè ðàáîòå ñ ÔÐ âîçíèêëà îøèáêà
					spSaleFiscError(.nCheckID)
				    RETURN .F.
					*------------------------------------------------------------------------------
							
				ENDIF
				*------------------------------------------------------------------------------

ENDIF

*--óñòàíîâèì ïðèçíàê ïå÷àòè ïðåä÷åêà
SELECT lvOrderTvrView
SCAN FOR lvOrderTvrView.TvrID&lt;&gt;.lnDiscTvrID
	USE IN SELECT([lvOrderTvrEdit])
	_PARAM = lvOrderTvrView.FrmPartTvrID
	USE lvOrderTvrEdit IN 0
	SELECT lvOrderTvrEdit
	REPLACE lvOrderTvrEdit.TvrAttr WITH BITSET(lvOrderTvrEdit.TvrAttr,2) IN lvOrderTvrEdit
	TABLEUPDATE(1,.T.,[lvOrderTvrEdit])
	SELECT lvOrderTvrView
ENDSCAN
RETURN .T.
ENDWITH
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE _storechktrans_slip
*------ ÏÅÐÅÍÎÑÈÌ ------------------------------------------------------------------------
* Project.........: BASIS.pjx
* Library.........: RST_V1.vcx
* Class.Module....: frmOrderEdit._StoreCheckTrans_Slim
* Called by.......: &lt;cmdPredChk.Click()&gt;
* Parameters......: tCardID
* Returns.........: &lt;none&gt;
* Notes...........: Ïå÷àòü ÑËÈÏ (ïðè îïëàòå êàðòîé)
*------------------------------------------------------------------------------
LPARAMETERS tCardID
LOCAL   lcUniqueFileNM, ;
		lcnt, ;
		lCardID, ;
		lCardNo, ;
		lFIO, ;
		_PARAM
SET STEP ON
*--ïîëó÷èì èíôîðìàöèþ ïî êàðòå
lCardID = tCardID
lCardNo = []

USE IN SELECT([lvCardViewByCardID])
_PARAM1 = tCardID
USE lvCardViewByCardID IN 0

IF RECCOUNT([lvCardViewByCardID])&gt;0
	lFIO = lvCardViewByCardID.CltNM
	lCardNo = lvCardViewByCardID.CardNo
ENDIF


WITH This
*--Íàïå÷àòàåì çàãîëîâîê ÷åêà èç ñïåöèàëüíîãî ôàéëà
._HeaderPrint()

*--íàïå÷àòàåì äîïîëíèòåëüíóþ èíôîðìàöèþ î çàêàçå
.Shtrih.FeedDocument(2)
.Shtrih.PrintString([Äàòà ]+PADR(ALLTRIM(DTOC(DATE())),24,[ ])+[Âðåìÿ ]+PADR(ALLTRIM(TIME()),14,[ ]))
.Shtrih.PrintString(PADR(ALLTRIM(lvOUTableList.NM),29,[ ])+[Êîë-âî ãîñòåé ]+PADR(ALLTRIM(STR(lvFrmEdit.ID_)),6,[ ]))
.Shtrih.PrintString([Íîìåð çàêàçà ]+PADR(ALLTRIM(lvFrmEdit.FrmNum),36,[ ]))
.Shtrih.PrintString([Îôèöèàíò ]+PADR(ALLTRIM(.spUserClt1),40,[ ]))
.Shtrih.PrintString([Êëèåíò ]+PADR(ALLTRIM(lvCltRSTList.NM),42,[ ]))
.Shtrih.FeedDocument(3)
.Shtrih.PrintString([*]+PADC([ÑËÈÏ],48,[ ])+[*])
.Shtrih.FeedDocument(3)

*--íàïå÷àòàåì òîâàðíûå ïîçèöèè
lcnt = 0
SELECT lvOrderTvrView
GO TOP
SCAN FOR lvOrderTvrView.TvrID&lt;&gt;this.lnDiscTvrID
	lcnt = lcnt+1
	*12.04.2006 17:22 -&gt;Ôèêñèðóåì òðàíçàêöèþ íà ÔÐ
	.Shtrih.PrintString(LEFT(lvOrderTvrView.TvrNM,30)+PADL(ALLTRIM(STR(lvOrderTvrView.TvrQnt,99,3)),10)+[*]+ALLTRIM(STR(lvOrderTvrView.TvrPrcSale,99,2)))
	*------------------------------------------------------------------------------

	*16.04.2006 10:10 -&gt;Çàïèøåì â Log èíôîðìàöèþ îá îøèáêå
	IF .Shtrih.ErrorCode # 0
		STRTOFILE(TTOC(DATETIME()) + [ -&gt; ] + ;
				  [Îøèáêà ]  + PADL(ALLTRIM(STR(.Shtrih.ErrorCode)),3) + [ ïðè ïå÷àòè òðàíçàêöèè ÷åêà. ] + ;
				  [Ñìåíà # ] + ALLTRIM(STR(.nSalesID)) + [ ] + ;
				  [×åê   # ] + ALLTRIM(STR(.nCheckID)) + [ ] + ;
				  [Ïîç.  # ] + ALLTRIM(STR(RECCOUNT([lvCheckTransView]))) + CHR(13), [KKM.LOG], 1)
				
		*16.04.2006 10:29 -&gt;Îòìåòèì â ÷åêå, ÷òî ïðè ðàáëòå ñ ÔÐ âîçíèêëà îøèáêà
		spSaleFiscError(.nCheckID)
		*------------------------------------------------------------------------------

	ENDIF
	*------------------------------------------------------------------------------
	SELECT lvOrderTvrView
ENDSCAN

*--Ïå÷àòàåì ñêèäêó (åñëè îíà åñòü)
SELECT lvOrderTvrView
LOCATE FOR lvOrderTvrView.TvrID=.lnDiscTvrID
IF FOUND()
	lnDiscount = (-1)*lvOrderTvrView.TvrPrcSale
	.Shtrih.PrintString([Ñêèäêà ]+ALLTRIM(STR(lnDiscount,99,2)))
ENDIF

*--Ïå÷àòàåì èòîã ÷åêà
.Shtrih.PrintString([ÈÒÎÃÎ ]+PADL(ALLTRIM(STR(.nOrderSum,99,2)),40,[ ]))
.Shtrih.PrintString([Ñïîñîá îïëàòû – Áåçíàëè÷íûé ðàñ÷åò])
.Shtrih.PrintString([Ñòàòóñ - îäîáðåíî])
IF lcnt&lt;15
	.Shtrih.FeedDocument(12-lcnt)
ELSE
	.Shtrih.FeedDocument(3)
ENDIF

IF !EMPTY(lCardID)
	*--Ðàñïå÷àòàåì èíôîðìàöèþ ïî  VIP êàðòå
	.Shtrih.PrintString([¹ êàðòû ]+ALLTRIM(lCardNo))

	IF !EMPTY(lFIO)
		.Shtrih.PrintString(ALLTRIM(lFIO))
	ENDIF
ENDIF

.Shtrih.FeedDocument(1)
.Shtrih.PrintString([Ïîäïèñü êëèåíòà]+PADL([_______________________],35,[ ]))
.Shtrih.FeedDocument(1)
.Shtrih.FeedDocument(1)
.Shtrih.PrintString([Ïîäïèñü êàññèðà]+PADL([_______________________],35,[ ]))
.Shtrih.FeedDocument(1)
.Shtrih.PrintString(REPLICATE([=],50))
**.Shtrih.PrintString([ÎÎÎ «Ñåäüìàÿ ïîëÿíà»])
.Shtrih.FeedDocument(3)
.Shtrih.CutCheck()
*------------------------------------------------------------------------------
.Shtrih.FeedDocument(2)

*--Çàïèøåì â Log èíôîðìàöèþ îá îøèáêå
IF .Shtrih.ErrorCode # 0
	STRTOFILE(TTOC(DATETIME()) + [ -&gt; ] + ;
			  [Îøèáêà ]  + PADL(ALLTRIM(STR(.Shtrih.ErrorCode)),3) + [ ïðè ïå÷àòè èòîãà ÷åêà. ] + ;
			  [Ñìåíà # ] + ALLTRIM(STR(.nSalesID)) + [ ] + ;
			  [×åê   # ] + ALLTRIM(STR(.nCheckID)) + CHR(13), [KKM.LOG], 1)
			
	*--Îòìåòèì â ÷åêå, ÷òî ïðè ðàáîòå ñ ÔÐ âîçíèêëà îøèáêà
	spSaleFiscError(.nCheckID)
	*------------------------------------------------------------------------------
			
ENDIF
*------------------------------------------------------------------------------
.Shtrih.PrintHeader()

ENDWITH
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE _storechktransback
*------------------------------------------------------------------------------
* Project.........: BASIS.pjx
* Library.........: RST_V1.vcx
* Class.Module....: frmOrderEdit._StoreCheckTransBACK
* Called by.......: &lt;cmdCHKBACK.Click()&gt;
* Parameters......:
* Returns.........: &lt;none&gt;
* Notes...........: Ôèñêàëüíûé ÷åê íà âîçâðàò
*------------------------------------------------------------------------------
LPARAMETER tfsctype

LOCAL   lcUniqueFileNM, ;
		lfsctype, ;
		ls1, ;
		ls2, ;
		ls3, ;
		ls4
*------------------------------------------------------------------------------

WITH This

*--ñôîðìèðóåì âûðàæåíèå äëÿ ñóìì â çàâèñèìîñòè îò òèïà îïëàòû
lfsctype = tfsctype
ls1 = IIF(lfsctype=1,.nordersum,0) &amp;&amp;--îïëàòà íàëè÷íûìè
ls2 = IIF(lfsctype=2,.nordersum,0) &amp;&amp;--îïëàòà áàíêîâñêîé êàðòîé
ls3 = IIF(lfsctype=3,.nordersum,0) &amp;&amp;--îïëàòà êóïîíîì
ls4 = IIF(lfsctype=4,.nordersum,0) &amp;&amp;--îïëàòà VIP êàðòîé

*--Åñëè äåíü íå îòêðûò, òî îòêðîåì
IF .nSalesID = 0
	.nSalesID = spSaleOpenDay(.nCashNo)
	IF .nSalesID &lt; 0
		MESSAGEBOX([Îøèáêà îòêðûòèÿ äíÿ],16,[×åê])
		RETURN .F.
	ENDIF
ENDIF
*------------------------------------------------------------------------------


*--Åñëè ÷åê íå îòêðûò - îòêðîåì åãî
IF .nCheckID = 0
	lcUniqueFileNM = spOpenCheck(.nSalesID,2*-1,.nCashNo,This.spUserClt)
	
	*15.04.2006 10:51 -&gt;Ñîõðàíèì ïàðàìåòðû ÷åêà
	USE ([tmp\]+lcUniqueFileNM) IN 0 ALIAS CheckParam
	.nCheckID = CheckParam.CheckID
	*------------------------------------------------------------------------------
	
	*15.04.2006 10:51 -&gt;Óäàëèì ôàéë ñ ïàðàìåòðàìè
	USE IN SELECT([CheckParam])
	IF FILE([tmp\]+lcUniqueFileNM+[.dbf])
	   ERASE ([tmp\]+lcUniqueFileNM+[.dbf])
	ENDIF
	*------------------------------------------------------------------------------
	
ENDIF
*------------------------------------------------------------------------------


*--Íàïå÷àòàåì çàãîëîâîê ÷åêà èç ñïåöèàëüíîãî ôàéëà
thisform._HeaderPrint()

*--Îòêðûâàåì ÄÌ äëÿ äîáàâëåíèÿ òðàíçàêöèè
*------------------------------------------------------------------------------

SELECT lvOrderTvrView
GO TOP
SCAN ALL
	USE IN SELECT([lvCheckTransEdit])
	USE lvCheckTransEdit IN 0 NODATA
	CURSORSETPROP([BUFFERING],3,[lvCheckTransEdit])

	APPEND BLANK IN lvCheckTransEdit
	REPLACE ;
		lvCheckTransEdit.CheckTransID		WITH RECNO([lvOrderTvrView]), ;
		lvCheckTransEdit.CheckID 			WITH .nCheckID, ;
		lvCheckTransEdit.CheckTransTypeID	WITH 1, ;
		lvCheckTransEdit.CheckTransTvrId	WITH lvOrderTvrView.TvrID, ;
		lvCheckTransEdit.CheckTransQnt		WITH lvOrderTvrView.TvrQnt, ;
		lvCheckTransEdit.CheckTransPrc		WITH lvOrderTvrView.TvrPrcSale ;
	IN lvCheckTransEdit
	***
	TABLEUPDATE(0,.T.,[lvCheckTransEdit])
	*------------------------------------------------------------------------------

	*--Ôèêñèðóåì òðàíçàêöèþ íà ÔÐ
	.Shtrih.CheckSaleReturn(lvOrderTvrView.TvrNM,lvOrderTvrView.TvrQnt,lvOrderTvrView.TvrPrcSale)
	
	*------------------------------------------------------------------------------

	*16.04.2006 10:10 -&gt;Çàïèøåì â Log èíôîðìàöèþ îá îøèáêå
	IF .Shtrih.ErrorCode # 0

		.KKMErrorHandler([Îøèáêà ]  + PADL(ALLTRIM(STR(.Shtrih.ErrorCode)),3) + [ ïðè ïå÷àòè òðàíçàêöèè ÷åêà. ] + ;
					  [Ñìåíà # ] + ALLTRIM(STR(.nSalesID)) + [ ] + ;
					  [×åê   # ] + ALLTRIM(STR(.nCheckID)) + [ ] + ;
					  [Ïîç.  # ] + ALLTRIM(STR(RECCOUNT([lvOrderTvrView]))) + CHR(13))
		RETURN .F.

	ENDIF
	*------------------------------------------------------------------------------
	SELECT lvOrderTvrView
ENDSCAN

*--Ïå÷àòàåì èòîã ÷åêà
.Shtrih.CloseCheck(ls1,ls2,ls3,ls4)
	

*--Çàïèøåì â Log èíôîðìàöèþ îá îøèáêå
IF .Shtrih.ErrorCode # 0

	.KKMErrorHandler([Îøèáêà ]  + PADL(ALLTRIM(STR(.Shtrih.ErrorCode)),3) + [ ïðè ïå÷àòè òðàíçàêöèè ÷åêà. ] + ;
				  [Ñìåíà # ] + ALLTRIM(STR(.nSalesID)) + [ ] + ;
				  [×åê   # ] + ALLTRIM(STR(.nCheckID)) + [ ] + CHR(13))
	RETURN .F.

ENDIF
*------------------------------------------------------------------------------

RETURN .T.

ENDWITH
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************






ENDPROC
PROCEDURE calcbalansedel
LPARAMETERS lcCodeCard
LOCAL _PARAM,bad_edel
PUBLIC edel_ord
WAIT WINDOW 'Çàïðàøèâàåì áàëàíñ â Åäåëâåéñ ...' NOWAIT
bad_edel =.f.
USE IN SELECT('edel_tillypad_guests')
USE IN SELECT('tmp')
_PARAM = lcCodeCard    &amp;&amp;'742B4B7B'

TRY
		USE edel_tillypad_guests IN 0 ALIAS edel_tmp
	CATCH
		 WAIT CLEAR
		MESSAGEBOX('Îòñóòñòâóåò ñâÿçü ñ ñåðâåðîì Åäåëüâåéñ.'+CHR(13)+;
		  			'Îïëàòà òîëüêî çà íàëè÷íûé ðàññ÷åò.',0+64,'Áåçíàëè÷íàÿ îïëàòà íåâîçìîæíà')
		 bad_edel = .t.
	EXIT
ENDTRY

IF lcCodeCard='742B4B7B1'
bad_edel = .f.
	WITH This
		.edel_clt='Íîìåð: ÏÐÎÁÀ Ãîñòü: ÏÐÎÁÀ ÏÐÎÁÀ. äî: 12.12.2012'
		.GuestAccountID  = 0
		.ncltlimit =  150
		.nfreesumm =  .ncltlimit &amp;&amp;+ .ncltbalans
		.txtBalans.Value = .ncltbalans
		.txtLimit.Value = .ncltlimit
		.txtFree.Value = .nfreesumm
		.lbledel.Caption = .edel_clt
	ENDWITH
	RETURN
endif

IF bad_edel
	RETURN
ENDIF
IF !RECCOUNT('edel_tmp')&gt;0
USE IN SELECT('edel_tmp')
WAIT CLEAR
RETURN
ENDIF
edel_ord = edel_tmp.GuestAccountID
	WITH This
		.edel_clt='Íîìåð:'+ALLT(edel_tmp.RoomNumber)+'. Ãîñòü:'+ ALLTRIM(edel_tmp.GuestName)+'. äî:'+DTOC(edel_tmp.EndDate)
		.GuestAccountID  = edel_tmp.GuestAccountID
		.ncltlimit =  edel_tmp.y &amp;&amp;+ .ncltlimit
		.nfreesumm =  .ncltlimit &amp;&amp;+ .ncltbalans
		.txtBalans.Value = .ncltbalans
		.txtLimit.Value = .ncltlimit
		.txtFree.Value = .nfreesumm
		.lbledel.Caption = .edel_clt
	ENDWITH
USE IN SELECT('edel_tmp')
WAIT CLEAR


ENDPROC
PROCEDURE calcbalanslimitfree
*-- Îïðåäåëÿåì ëèìèò è áàëàíñ êëèåíòà
LOCAL lnConnectHandle ,lnSqlExeResult , lnCltId, pcvLOCKTIMEOUT
		lnCltId = NVL(lvFrmEdit.PointIspCltID,0)

	WITH This
		.ncltbalans = 0
		.ncltlimit =  0
		.nfreesumm =  0

		IF .withedel AND TYPE('pccardcode') = 'C'
			.calcBalansEdel(ALLTRIM(pccardcode))
		ENDIF
	ENDWITH
		IF NOT .lndefclt = lnCltId

		        lnConnectHandle = SQLCONNECT(pcvCONNECTIONNAME)
				lnSqlExeResult = 0
		        pcvLOCKTIMEOUT	=	[1000]
				DO WHILE (lnSqlExeResult = 0) AND (lnSqlExeResult # -1)
					lnSqlExeResult = SQLEXEC(lnConnectHandle , ;
						[SET LOCK_TIMEOUT ] + pcvLOCKTIMEOUT + [ ] + ;
						[SELECT dbo.GetBalansClt(]+ ALLTRIM(STR(lnCltId,10))+[,71]+[ ) AS  X ,dbo.GetLimitClt(]+ ALLTRIM(STR(lnCltId,10))+[) AS  Y],[tmp])
				ENDDO
				***
				IF lnSqlExeResult = -1
					spHandleODBCError()
					RETURN 0
				ENDIF


	WITH This
		.ncltbalans = .ncltbalans+tmp.x
		.ncltlimit =  .ncltlimit+tmp.y
		.nfreesumm =  .nfreesumm+.ncltlimit+.ncltbalans
*		.nfreesumm =  .nfreesumm+tmp.y+tmp.x
		.txtBalans.Value = tmp.x
		.txtLimit.Value = tmp.y
*		.txtFree.Value = tmp.y+tmp.x
		.txtFree.Value = .nfreesumm
		*.lblBalans.Caption=[Áàëàíñ:]+STR(.ncltbalans,10,4)+[ ïðè Ëèìèòå:]+STR(.ncltlimit,10,4)+ [ îñòàòîê:]+STR(.nfreesumm,10,4)+ IIF(tmp.y+tmp.x&lt;0,[],[ÏÐÅÂÛØÅÍ])
	ENDWITH
		USE IN tmp
	ELSE
	IF !This.withedel
	WITH This
		.ncltbalans = 0
		.ncltlimit =  0
		.nfreesumm =  0
		.txtBalans.Value = 0
		.txtLimit.Value = 0
		.txtFree.Value = 0
	ENDWITH
	ENDIF
ENDIF
	WITH This
		IF .nfreesumm - .nordersum =&gt;0 AND .nordersum&gt;0 AND .nopereation=1
		*--Äîáàâèì âîçìîæíîñòü âûáðàòü òèï îïëàòû VIP êàðòîé
		 .ctparam = .ctparam +[,5]
		ENDIF
		*--òèïû îïëàòû
		USE IN SELECT([lvPayTypeView])
		_PARAM = .ctparam
		USE lvPayTypeView IN 0

		SELECT lvPayTypeView

		DO CASE
			CASE .nopereation = 7
			CASE [5]$ .ctparam
				.cntPayTypeID.SetValue(4)
				thisform.cntcancelsavehandled1.cmdOk.Enabled=.t.
			CASE [1]$ .ctparam
				.cntPayTypeID.SetValue(1)
			CASE [2]$ .ctparam
				.cntPayTypeID.SetValue(2)
			CASE [3]$ .ctparam
				.cntPayTypeID.SetValue(3)
				OTHERWISE
				.cntPayTypeID.enabled   = .F.
				.Cntnumericpad1.Enabled = .F.
				.Cntnumericpad1.visible = .F.
		ENDCASE
	ENDWITH


ENDPROC
PROCEDURE clientrate
RETURN
			*--ïåðåñ÷èòàåì íàêîïèòåëüíóþ ñóììó è ñêèäêó ïî äèñêîíòíîé êàðòå (åñëè îíà áûëà)
*********** ïåðåäåëàòü íà êëèåíòà
			IF !EMPTY(lvFrmEdit.FrmNote)  &amp;&amp;
				*--îòêðîåì RV äëÿ ðåäàêòèðîâàíèÿ ñâåäåíèé ïî äàííîé êàðòå
				USE IN SELECT([lvDiscCardEdit])
				_PARAM = VAL(lvFrmEdit.FrmNote)
				USE IN SELECT([lvDiscCardEdit])
				_PARAM = VAL(lvFrmEdit.FrmNote)
				USE lvDiscCardEdit IN 0
				CURSORSETPROP([BUFFERING],3,[lvDiscCardEdit])
				
				SELECT lvDiscCardEdit
				*--ïîñ÷èòàåì ñóììó íàêîïëåíèÿ
				lSumAccount = lvDiscCardEdit.DiscCardSumAccount+.nOrderSum
				lDiscID = lvDiscCardEdit.DiscID

				*--ïðèñâîèì äèñêîíòíîé êàðòå òèï ñêèäêè â ñîîòâåòñòâèè
				*--ñ íàêîïëåííîé ñóììîé (åñëè ðàçðåøåí ïåðåñ÷åò)
				IF EMPTY(lvDiscCardEdit.DiscCardRestrictUp) &amp;&amp;
					USE IN SELECT([lvDiscountList])
					USE lvDiscountList IN 0
					
					IF RECCOUNT([lvDiscountList])&gt;0 &amp;&amp;
						lflag = .f.
						SELECT lvDiscountList
						GO TOP
						SCAN ALL
							IF !lflag AND lSumAccount&lt;lvDiscountList.DiscRK
								SELECT lvDiscountList
								SKIP -1
								lDiscID = lvDiscountList.DiscID
								lflag = .T.
								EXIT
							ENDIF
							SELECT lvDiscountList
						ENDSCAN	
						IF !lflag &amp;&amp;
							SELECT lvDiscountList
							GO BOTTOM
							lDiscID = lvDiscountList.DiscID
						ENDIF    &amp;&amp; IF !lflag
					  ELSE &amp;&amp; IF RECCOUNT([lvDiscountList])&gt;0
						MESSAGEBOX([Íåò äàííûõ â ñïðàâî÷íèêå ñêèäîê DISCOUNT.]+CHR(13)+;
									[Îáðàòèòåñü ê àäìèíèñòðàòîðó.],48,[Îêíî ñîîáùåíèé])						
					ENDIF  &amp;&amp; IF RECCOUNT([lvDiscountList])&gt;0
				ENDIF &amp;&amp; IF EMPTY(lvDiscCardEdit.DiscCardRestrictUp)
				*--ñîõðàíèì èçìåíåíèÿ
				SELECT lvDiscCardEdit
				REPL lvDiscCardEdit.DiscCardSumAccount WITH lSumAccount,;
					lvDiscCardEdit.DiscID WITH lDiscID
					
				IF !TABLEUPDATE(1,.T.,[lvDiscCardEdit]) &amp;&amp;
					TABLEREVERT(.T.,[lvDiscCardEdit])
					MESSAGEBOX([Îøèáêà ïðè îáíîâëåíèè íàêîïèòåëüíîé ñóììû.],48,[Îêíî ñîîáùåíèé])
				ENDIF &amp;&amp;
			ENDIF &amp;&amp; IF !EMPTY(lvFrmEdit.FrmNote)

ENDPROC
PROCEDURE getcardinfo
*------------------------------------------------------------------------------
* Project.........: BASIS_RST.pjx
* Library.........: rst_v1.vcx
* Class.Module....: frmOrderEdit.GetCardInfo
* Called by.......: &lt;This.OleCommProx&gt;
* Parameters......: &lt;tccardcode&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Ïîëó÷åíèå èíôîðìàöèè î êàðòå
*------------------------------------------------------------------------------
LPARAMETERS tccardcode
LOCAL   _PARAM,lcIniFileName
pccardcode = tccardcode
*--ïðîâåðèì, íå çàáëîêèðîâàí ëè ââîä
*!*	IF thisform.lReadOnly
*!*		MESSAGEBOX([Èçìåíåíèå äàííûõ ìåíåäæåðîì íå ïðåäóñìîòðåíî.],48,[Îêíî ñîîáùåíèé])
*!*		RETURN .F.
*!*	ENDIF

_PARAM1 = tccardcode
_PARAM2 = VAL([0x]+SUBSTR(tccardcode,4,8))

WITH This
	*--Ïîëó÷èì äàííûå î êàðòå
	USE IN SELECT([lvCardViewByCardCode])
	.cntcancelsavehandled1.cmdOk.enabled = .f.

	IF !DBUSED([BASIS])
		OPEN DATABASE BASIS SHARED
	ENDIF

	SET DATABASE TO BASIS

	USE lvCardViewByCardCode IN 0
	IF RECCOUNT([lvCardViewByCardCode])&gt;0
		*--Ïîêàæåì äàííûå ïî êàðòå
		.cntclTID.Enabled= .T.
		.cntCLTID.Visible= .T.
		.cntCltID.SetValue(lvCardViewByCardCode.CltID)
		*.txtCardNo.Value   = lvCardViewByCardCode.CardNo

		*--Ñîõðàíèì íîìåð VIP êàðòû
		SELECT lvFrmEdit
		REPLACE lvFrmEdit.PointIspCltID WITH lvCardViewByCardCode.CardOwnerID, ;
				lvFrmEdit.PointIspCltSAccID WITH lvCardViewByCardCode.CardID
		.calcbalanslimitfree()
		IF .nfreesumm - .nordersum =&gt;0 AND  .nordersum &gt; 0 AND MESSAGEBOX('Ïðîèçâåñòè îïëàòó ñ áàëàíñà?',4+48,'Îïëàòà ñ áàëàíñà')=6
			.cntcancelsavehandled1.cmdOk.Click()
		ENDIF
			ELSE
			.cntclTID.Enabled= .F.
			.cntCLTID.Visible= .F.
ENDIF
ENDWITH
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
RETURN
LOCAL lresult
** îïðåäåëÿåì ðåçóëüòàò ïî íîìåðó êàðòû
lresult = spDiscRecount(this.nfrmid , null ,null,ALLTRIM(STR(luResultAdding,20,0)))
IF lresult
	this.cntORDDETAIL.cntDisc.lblSumm.Caption = ALLTRIM(STR(lvTmpDiscTvr.TvrPrcSale,10,2))
	this.cntORDDETAIL.cntGuest.lblInfo.Caption= ALLTRIM(lvTmpDiscTvr.FrmPartTvrNote)
ELSE
	this.cntORDDETAIL.cntDisc.lblSumm.Caption = '0.00'
	this.cntORDDETAIL.cntGuest.lblInfo.Caption= ''
ENDIF


ENDPROC
PROCEDURE Init
*------------------------------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: RST_V1.VCX
* Class.Module....: FRMPAYMENT.INIT
* Called by.......: &lt;Sys Event&gt;
* Parameters......: tnOrderSum - ñóììà çàêàçà
* Returns.........: &lt;none&gt;
* Notes...........:
*------------------------------------------------------------------------------
LPARAMETERS lnFrmId, tparam,lnOpereation, lnIdCheck
* Ïàðàìåòðû: lnFrmId - èä ôîðìû çàêàçà
* tparam - íîìåðà äîñòóïíûõ îïëàò íà ýòîì ðàáî÷åì ìåñòå
* lnOpereation - âèä îïåðàöèè ñ äåíüãàìè: 1 - ïðîäàæà; 2 - âîçâðàò; 3-ñòîðíî ÷åêà;
* 								    		4 - ïðîäàæà (ñáðîøåíûé); 5 - âîçâðàò(ñáðîøåíûé); 6-ñòîðíî ÷åêà(ñáðîøåíûé);
*									        7 - îòëîæåíûé;8 - âíåñåíèå; 9 - èçúÿòèå;
*									        10 - èíâåíòàðèçàöèÿ ;11 - ðåçåðâ; 12 - ðåçåðâ;
* lnIdCheck - èä ãîòîâîãî ÷åêà
*** Áûëî tnOrderSum - îïðåäåëÿåì ïî Lv

LOCAL _PARAM
LOCAL lcIniFileName ,lcKkmLib
PUBLIC pccardcode
lcIniFileName = FULLPATH([KKM.INI])
lnFrmId = NVL(lnFrmId,0)
IF VARTYPE(lnFrmId)='L'
	lnFrmId = 0
ENDIF
WITH This
.nKeyb = VAL(oRes.GetParam([SET],[KEYBOARD]))
.lcKkmLib = ALLTRIM(oRes.GetParam([KKM],[KKMLIB],lcIniFileName)) &amp;&amp; Êëàññ ñ êàññîâûì àïïàðàòîì
*--Ïîëó÷àåì íîìåð êàññîâîãî àïïàðàòà
.nCashNo = VAL(oRes.GetParam([RST],[CASH]))
* Äîïóñòèìîñòü îïëàòû íà ýòîì ðàá.ìåñòå
.CmdPay = VAL(oRes.GetParam([RST],[CMDPAY]))
* Äîïóñòèìîñòü ïå÷àòè ïðå-÷åêà íà ýòîì ðàá.ìåñòå (0 - ðàáîòà áåç ïðå-÷åêîâ, 1- ïå÷àòü íà ôèñêàëüíèêå, 2 - íà ñåòåâîì ïðèíòåðå, -1 - íàäî ïå÷àòàòü íà äðóãîì ìåñòå)
.PrintinfPrech = VAL(oRes.GetParam([RST],[PRINTPRE]))
* Íàçâàíèå â ñåòè ïðèíòåðà ïðå-÷åêîâ
.lcPrinter = ALLTRIM(oRes.GetParam([RST],[SERVPRINT],[],[DEFAULT]))
.lnDiscTvrID = VAL(oRes.GetParam([RST],[DISCTVRID]))
.spUserClt1 = spUserClt(1)
.spUserClt = spUserClt()
	*--ïîëó÷èì òèï ïîäðàçäåëåíèÿ "ñòîë"
.lnTblType = VAL(oRes.GetParam([RST],[TBLTYPE]))
*--ïîëó÷èì êîä òèïà äîêóìåíòà "çàêàç"
.lnFrmTypeID = VAL(oRes.GetParam([RST],[TYPEORD]))
*--ïîëó÷èì êîä ïîäðàçäåëåíèÿ, ñîäåðæàùåãî ñòîëû
.lnTblPar = VAL(oRes.GetParam([RST],[TBLPAR]))
*--ïîëó÷èì êîä êëèåíòà ïî óìîë÷àíèþ ("ãîñòü")
.lnDefClt = VAL(oRes.GetParam([RST],[DEFCLT]))
.withedel = (VAL(oRes.GetParam([BASIS],[EDELV],lcIniFileName)) &gt;0)
.lcEdelPodr = ALLTRIM(oRes.GetParam([BASIS],[EDELPDR],lcIniFileName,'1'))
.lcHeaderFile = ALLT(oRes.GetParam([RST],[CHKHDRFL]))
.lcFooterFile = ALLT(oRes.GetParam([RST],[CHKFTRFL]))
**this.cntcancelsavehandled1.cmdOk.enabled = .f.

.NewObject('Shtrih',.lcKkmLib,'kkms.vcx')
.nfrmid = lnFrmId
.nCheckID = lnIdCheck
.nOpereation = lnOpereation
.lblfrmId.Caption =ALLTRIM(STR(lnFrmId,10))
.ctparam = tparam
DODEFAULT()
lnSalesID = spGetOpenDay(.nCashNo)  &amp;&amp; !!!!!!!!!!!!! Ãäå åãî áðàòü??????

IF lnSalesID &lt;0
.cntcancelsavehandled1.cmdOk.Enabled= .F.
.txtcalcnum1.Enabled= .F.
.txtcalcnum1.ReadOnly= .T.
ENDIF
	*--Ïðîâåðèì êîððåêòíîñòü äàííûõ î ïðîäàæàõ
	DO CASE
		CASE lnSalesID = -1
			MESSAGEBOX([Äåíü óæå çàêðûò.]+CHR(13)+[Îáðàòèòåñü ê àäìèíèñòðàòîðó.],64,[×åê íåëüçÿ íàïå÷àòàòü])
			oApp.lUserChange = .T.
			*RETURN .F.

		CASE INLIST(lnSalesID,-2,-3)
			MESSAGEBOX([Îñòàëèñü íå çàêðûòûìè áîëåå îäíîãî äíÿ.]+CHR(13)+[Îáðàòèòåñü ê àäìèíèñòðàòîðó.],64,[×åê íåëüçÿ íàïå÷àòàòü])
			oApp.lUserChange = .T.
			*RETURN .F.

		CASE lnSalesID = -5
			MESSAGEBOX([Íåèçâåcòíàÿ îøèáêà],16,[×åê íåëüçÿ íàïå÷àòàòü])
			*RETURN .F.
			
		CASE lnSalesID &lt;0

			*--Åñëè ñìåíà îòêðûòà áîëåå ñóòîê, òðåáóåì çàêðûòü åå
			*IF
			*MESSAGEBOX([C ìîìåíòà íà÷àëà ïîñëåäíåé ñìåíû ïðîøëî] + CHR(13) + ;
			*			  [áîëåå 24 ÷àñîâ.Çàêðûòü ñìåíó?],4+32,[Ñìåíà]) = 6
			MESSAGEBOX([C ìîìåíòà íà÷àëà ïîñëåäíåé ñìåíû ïðîøëî] + CHR(13) + ;
						  [áîëåå 24 ÷àñîâ.]+CHR(13)+[Îáðàòèòåñü ê àäìèíèñòðàòîðó.],64,[×åê íåëüçÿ íàïå÷àòàòü])
				***
			    *This._CloseDay()
				***
			*ENDIF
			
***			RETURN .F.
			
		OTHERWISE
			.nsalesid = lnSalesID
	ENDCASE
	*------------------------------------------------------------------------------


IF This.nCashNo&lt;1
MESSAGEBOX('Ïðîâåðòå íàñòðîéêè íîìåðà êàññû CASH',0+16,'×åê íåëüçÿ íàïå÷àòàòü')
.cntcancelsavehandled1.cmdOk.Enabled= .F.
.txtcalcnum1.Enabled= .F.
.txtcalcnum1.ReadOnly= .T.
ENDIF
IF .nCheckID&lt;&gt;0 AND INLIST(this.nopereation,1,2,3,10)
	*.nCheckID = this.nchkid
	*!*	   ñîçäàåì çàêàç - äîêóìåíò ïî ÷åêó
	.makeorderoncheck()
*!*		this.cntcancelsavehandled1.cmdCancel.Enabled= .F.
*!*		this.cntcancelsavehandled1.cmdCancel.Visible= .F.
ENDIF


DO CASE
CASE .nopereation = 1 &amp;&amp; ïðîäàæà
CASE .nopereation = 2  &amp;&amp; Âîçâðàò
.lbl3.Caption ='Âåðíóëè'
.lblSum.Caption='Íàäî âåðíóòü'
.cntcancelsavehandled1.cmdOk.Caption='Âûäàòü'
CASE .nopereation = 8  &amp;&amp; âíåñíåíèå äåíåã
.lbl3.Caption ='Âíåñåíî'
.cntcancelsavehandled1.cmdOk.Caption='Ïîëó÷èòü'
CASE .nopereation = 7  &amp;&amp; ÷åê îòëîæåí
.lbl3.Caption ='Îòëîæåí'
.cntcancelsavehandled1.cmdOk.Caption='Îòëîæèòü ÷åê'
.cntcancelsavehandled1.cmdOk.Enabled = .T.
.lblCash.caption = ALLTRIM(STR(ABS(pnSummCheck),99,2))
CASE .nopereation = 9  &amp;&amp; èçúÿòèå äåíåã
.lbl3.Caption ='Èçúÿòî'
.cntcancelsavehandled1.cmdOk.Caption='Âûäàòü'
ENDCASE
		.cntclTID.Enabled= .F.
		.cntCLTID.Visible= .F.

*** Îïðåäåëÿåì ñóììó çàêàçà
_PARAM  = .nfrmid
_PARAM1  = iif(.nopereation=1,1,0)
USE IN SELECT([lvFrmSumView])
USE lvFrmSumView IN 0
SELECT SUM(lvFrmSumView.FrmSum) AS FrmSum FROM lvFrmSumView INTO CURSOR tmplvFrmSumView
.nOrderSum = tmplvFrmSumView.FrmSum
USE IN SELECT('tmplvFrmSumView')
USE IN SELECT('lvFrmSumView')
IF .nopereation &lt;&gt; 7
	.lblCash.caption = ALLTRIM(STR(ABS(thisform.nOrderSum) ,99,2))
ENDIF
*03.11.2008 12:16 -&gt;Ïîêàæåì íà äèñïëåå èòîãî ïî ÷åêó

IF VARTYPE(LnDisp)=[O]
	LnDisp.ClearText()
	LnDisp.displaytextat(0,0,[ÈÒÎÃÎ   :]+STR(thisform.nOrderSum,10,2),1)
ENDIF

.txtcalcnum1.SetFocus()

****** Îòêðûâåì ïîçèöèè çàêàçà, ñàì çàêàç
USE IN SELECT([lvOrderTvrView])
USE lvOrderTvrView IN 0
USE IN SELECT([lvFrmEdit])
USE lvFrmEdit IN 0
SELECT lvFrmEdit
IF lvFrmEdit.FrmStatusId &gt;2 AND lvFrmEdit.FrmIsPayed AND .nOrderSum=0 &amp;&amp; AND .nopereation=1
*!*	   MESSAGEBOX('Îòñóòñòâóåò ôèñêàëüíûé ðåãèñòðàòîð.',0+48,'Ïðåäóïðåæäåíèå')
	  MESSAGEBOX('Ñ÷åò óæå îïëà÷åí.',0+48,'Ïðåäóïðåæäåíèå')
.cntcancelsavehandled1.cmdOk.Enabled= .F.
.txtcalcnum1.Enabled= .F.
.txtcalcnum1.ReadOnly= .T.
ENDIF


	*--Îáíîâèì ñïðàâî÷íèê ñòîëîâ
	_PARAM1 = .lnTblType
	_PARAM2 = .lnTblPar
USE IN SELECT([lvOUTableList])
USE lvOUTableList IN 0


*--Îòêðîåì ñïðàâî÷íèê êëèåíòîâ ðåñòîðàíà
USE IN SELECT([lvCltRSTList])
USE lvCltRSTList IN 0
*!*	SELECT lvCltRSTList
*!*	LOCATE ALL FOR lvCltRSTList.Id = lvFrmEdit.PointIspCltID

.calcbalanslimitfree()

ENDWITH

ENDPROC
PROCEDURE KeyPress
*-------------------------------------------------------
* Project.........: GLOBAL.PJX
* Library.........: BASEFORM_V1.VCX
* Class.Module....: FRMEDIT.KEYPRESS
* Called by.......: &lt;Sys Event&gt;
* Parameters......: &lt;tnKeyCode, tnShiftAltCtrl&gt;
* Returns.........: &lt;none&gt;
* Notes...........: &lt;sysevent&gt; Îáðàáîòêà íàæàòèÿ êëàâèø Ctrl+Enter, ESC
*-------------------------------------------------------
LPARAMETERS tnKeyCode, tnShiftAltCtrl
*21.12.2003 20:42 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	loControl
*------------------------------------------------------------------------------

*21.12.2003 20:52 -&gt;Åñëè áûëî íàæàòèå ESÑ ëèáî Ctrl+Enter
IF tnKeyCode=10 OR tnKeyCode=24 OR tnKeyCode=27
			IF tnKeyCode=10	OR tnKeyCode=24 &amp;&amp;Ctrl+Enter èëè Enter
				IF  thisform.cntcancelsavehandled1.cmdOk.Enabled
					thisform.cntcancelsavehandled1.cmdOk.Click()
				ENDIF	
			ELSE			&amp;&amp;ESC
				IF this.nCheckID=0
					thisform.cntcancelsavehandled1.cmdCancel.Click()
				ENDIF
			ENDIF	
			***
			NODEFAULT
			*}
ENDIF
*------------------------------------------------------------------------------
************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************	
ENDPROC
PROCEDURE kkmerrorhandler
LPARAMETERS tcErrorMsg, ;
			tlNoReset
*11.10.2006 17:06 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	lnECRAdvancedMode, ;
		lnCheckID, ;
		loStatus
***
lnCheckID = This.nCheckID
*------------------------------------------------------------------------------

WITH This

*11.10.2006 16:53 -&gt;Ñîõðàíèì ñîîáùåíèå â ëîãå
IF VARTYPE(tcErrorMsg) == [C]
	STRTOFILE(TTOC(DATETIME()) + [ -&gt; ] + tcErrorMsg,[KKM.LOG],1)
ENDIF
*------------------------------------------------------------------------------

*!*	*16.10.2006 15:38 -&gt;
*!*	loStatus = oApp.CreateObject([frmKKMStatus;kkms.vcx],.Shtrih)

*!*	loStatus.Show(1)

*!*	IF loStatus.uRetVal
*!*		IF NOT tlNoReset
*!*			.CheckReset()
*!*		ELSE
		.Shtrih.CancelCheck()
*!*		ENDIF
*!*	ELSE
*!*		.Shutdown(.T.)
*!*	ENDIF
*------------------------------------------------------------------------------
*********** ÎÑÒÀÂÈÌ
*16.04.2006 10:29 -&gt;Îòìåòèì â ÷åêå, ÷òî ïðè ðàáîòå ñ ÔÐ âîçíèêëà îøèáêà
spSaleFiscError(lnCheckID)
*------------------------------------------------------------------------------

ENDWITH
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************

ENDPROC
PROCEDURE Load
DODEFAULT()

IF !DBUSED([BASIS])
	OPEN DATABASE BASIS
ENDIF
***
SET DATABASE TO BASIS	

USE IN SELECT([lvOUCouponList])
USE lvOUCouponList IN 0

USE IN SELECT([lvOUCouponList])
USE lvOUCouponList IN 0


CREATE TABLE TMP\lvFrmTypeSaveOrdView FREE ( ID_ int, NM char(20))
INSERT INTO lvFrmTypeSaveOrdView (ID_ , NM ) VALUES (22,'Ñ÷åò Ãîñòÿ')
INSERT INTO lvFrmTypeSaveOrdView (ID_ , NM ) VALUES (17,'Çàÿâêà Ïîñòàâùèêó')
INSERT INTO lvFrmTypeSaveOrdView (ID_ , NM ) VALUES (18,'Èíâåíòàðèçà.âåäîìîñòü')

ENDPROC
PROCEDURE makeorderoncheck
LOCAL lnDefEmiClt,nPayVarNum ,lnNewFrmID
	*** Äîáàâëÿåì çàêàç (øàïêó)
	
	*--ïîëó÷èì êîä êëèåíòà - îïåðàòîðà
	lnDefEmiClt = This.spUserClt
	*lnTblPar = 71
	USE IN SELECT([lvFrmEdit])
	IF THIS.nFrmId &lt;&gt;0 AND This.nCheckId &lt;&gt; 0
		USE lvFrmEdit IN 0
		CURSORSETPROP([BUFFERING],3,[lvFrmEdit])
	ELSE
		USE lvFrmEdit IN 0 NODATA
		CURSORSETPROP([BUFFERING],3,[lvFrmEdit])
		SELECT lvFrmEdit
		APPEND BLANK
		*------------------------------------------------------------------------------
		REPL lvFrmEdit.PointIspCltID WITH this.lnDefClt, ;
			 lvFrmEdit.PointEmiCltID WITH lnDefEmiClt, ;
			 lvFrmEdit.DevCltId WITH lnDefEmiClt, ;
			 lvFrmEdit.PointEmiOUID WITH this.lnTblPar, ;
			 lvFrmEdit.FrmTypeID WITH this.lnFrmTypeID , ;
			 lvFrmEdit.FrmDate WITH DATETIME(), ;
			 lvFrmEdit.ID_ WITH 1, ;
			 lvFrmEdit.FrmCurTypeID WITH 1
			IF TABLEUPDATE(1,.T.,[lvFrmEdit])
		     	lnNewFrmID = spGetLastIncrementedID([lvFrmEdit])
				this.nfrmid= lnNewFrmID
		      ELSE
			    MESSAGEBOX('Âî âðåìÿ ñîõðàíåíèÿ çàãîëîâêà çàêàçà ïðîèçîøëà îøèáêà',0+16,'Ïðåäóïðåæäåíèå')
			ENDIF
	ENDIF
					*** Äîáàâëÿåì ïîçèöèè
					USE IN SELECT('lvCheckTransView')
					IF FILE('TMP\lvCheckTransViewTmp.dbf')
							USE TMP\lvCheckTransViewTmp IN 0 &amp;&amp;ALIAS lvCheckTransView
							SELECT Lvchecktransviewtmp.checktrans as CheckTransUID,;
								  Lvchecktransviewtmp.checktran2 as CheckTransID, Lvchecktransviewtmp.checktran3 as CheckTransType,;
								  Lvchecktransviewtmp.checktran4 as CheckTransTypeSign, Lvchecktransviewtmp.departnm,;
								  Lvchecktransviewtmp.checktran5 as CheckTransTvrID, Lvchecktransviewtmp.tvrnm,;
								  Lvchecktransviewtmp.checktran6 as CheckTransPLU, Lvchecktransviewtmp.checktran7 as CheckTransQnt,;
								  Lvchecktransviewtmp.checktran8 as CheckTransPrc, Lvchecktransviewtmp.mark, Lvchecktransviewtmp.MsuId;
								 FROM lvchecktransviewtmp INTO CURSOR lvCheckTransView
							USE IN lvCheckTransViewTmp
						ELSE
							_PARAM = this.nCheckID
							USE lvCheckTransView IN 0
					ENDIF
					USE IN SELECT([lvOrderTvrEdit])
					USE lvOrderTvrEdit IN 0 NODATA
					CURSORSETPROP([BUFFERING],5,[lvOrderTvrEdit])

					INSERT INTO lvOrderTvrEdit (FrmID, TvrId, MsuId, TvrQnt, TvrPrcSale) ;
					SELECT this.nfrmid AS FrmID, CheckTransTvrID AS TvrId, NVL(MsuId,1), ;
					        IIF(this.nopereation=2,-1*CheckTransQnt,CheckTransQnt)* IIF(CheckTransPrc&lt;0,-1,1) AS TvrQnt, ;
					        ABS(CheckTransPrc) AS TvrPrcSale ;
					FROM lvCheckTransView

					IF !TABLEUPDATE(1,.T.,[lvOrderTvrEdit])
					    MESSAGEBOX('Âî âðåìÿ ñîõðàíåíèÿ ïîçèöèé çàêàçà ïðîèçîøëà îøèáêà',0+16,'Ïðåäóïðåæäåíèå')
					    *RETURN .f.
					ENDIF
		IF TYPE('lnNewFrmID')='N' AND lnNewFrmID&gt;0
			*nPayVarNum = ALLT(oRes.GetParam([RST],[PAYTYPE]))
			*16.09.2007 18:10 -&gt;Îïëàòà ñ÷åòà êëèåíòà
			*lRetVal = oApp.DoModalFormRetValObj([FrmPayment;rst_v1.vcx],lnNewFrmID ,nPayVarNum,1,0 )
		ENDIF

ENDPROC
PROCEDURE printcheckfr
LOCAL lnNoPredchk, ;
	  lPayMode, ;
	  llRes, ;
	  lRetVal, ;
	  lCouponID, ;
	  lPANNo, ;
	  lSum, ;
	  lSumAccount, ;
	  lDiscID, ;
	  lflag, ;
	  lCouponQnt, ;
	  lCouponPrc, ;
	  _PARAM
*--  ïðîâåðèì, äîñòóïíà ëè îïëàòà çàêàçîâ íà äàííîì ðàáî÷åì ìåñòå
WITH This
IF .CmdPay = 0
	MESSAGEBOX([Íà äàííîì ðàáî÷åì ìåñòå îïëàòà çàêàçîâ íåäîñòóïíà.],48,[Îêíî ñîîáùåíèé])
	RETURN .F.
ENDIF
*-- ïðîâåðèì, ÿâëÿåòñÿ ëè îôèöèàíò êàññèðîì
IF !._iscasher()
	RETURN .F.
ENDIF
	_PARAM = .nfrmid
	_PARAM1 = .lndisctvrid
	REQUERY('lvOrderTvrView')
*-- îïðåäåëèì ID òîâàðà "ñêèäêà"
*-- îïëàòà çàêàçà (èçìåíèì ñòàòóñ çàêàçà, íàïå÷àòàåì ôèñêàëüíûé ÷åê)
IF RECCOUNT([lvOrderTvrView])&gt;0
	IF ThisForm.nCheckID=0  and MESSAGEBOX([Íàïå÷àòàòü Ôèñêàëüíûé ÷åê?],36,[Îêíî ñîîáùåíèé]) = 7
		RETURN .F.
	ENDIF

IF ThisForm.nCheckID&lt;&gt;0   OR .t. &amp;&amp;MESSAGEBOX('Îïëàòèòü ñ÷åò, ïîäãîòîâèòü ÷åê?' ,4+48+256+4096, 'Ðàáîòà ñ äåíüãàìè', 60000)=6
		lSum = .nOrderSum
lRetVal = .uretval1
.uretval = .t.
		IF TYPE([lRetVal])==[C] &amp;&amp;
			*--òèï îïëàòû
			lPayMode = VAL(RIGHT(lRetVal,1))
			lRetVal = LEFT(lRetVal,AT([)],lRetVal))
			
			IF lPayMode = 3
				*--ïðè îïëàòå êóïîíîì ïîëó÷èì ID êóïîíà
				lCouponID = VAL(LEFT(lRetVal,AT([(],lRetVal)-1))
				lRetVal = SUBSTR(lRetVal,AT([(],lRetVal),LEN(lRetVal)-AT([(],lRetVal)+1)
				
				*--ïîëó÷èì ñóììó êóïîíà è êîëè÷åñòâî êóïîíîâ
				USE IN SELECT([lvCouponByIDView])
				_PARAM = lCouponID
				USE lvCouponByIDView IN 0
				
				IF RECCOUNT([lvCouponByIDView])&gt;0
					lCouponPrc = lvCouponByIDView.CouponPrc
				ENDIF
				
				lSum = VAL(SUBSTR(lRetVal,AT([,],lRetVal,2)+1,AT([,],lRetVal,3)-AT([,],lRetVal,2)-1))
				lCouponQnt = INT(lSum/lCouponPrc)+IIF(lSum/lCouponPrc&gt;INT(lSum/lCouponPrc),1,0)
			ENDIF	
				
			
			IF lPayMode=4 OR lPayMode=3
				*--ïå÷àòü ÑËÈÏ â ñëó÷àå îïëàòû VIP êàðòîé
				FOR i = 1 TO 2
					WAIT WINDOW [Ïîäîæäèòå. Ñëèïû ïå÷àòàþòñÿ ...] NOWAIT TIMEOUT 1
					._storechktrans_slip(IIF(lPayMode=4,lvFrmEdit.PointIspCltSAccID,0))
				ENDFOR
			ENDIF
*--ïå÷àòü ôèñêàëüíîãî ÷åêà

DO CASE
CASE .nopereation = 1 AND lPayMode&lt; 4 &amp;&amp; ïðîäàæà

		 			IF !._storechktrans(lPayMode,lRetVal) &amp;&amp;

						*--îòìåíà îïëàòû çàêàçà
						.lorderpay = .F.
						RETURN .F.
					ENDIF  &amp;&amp;
CASE .nopereation = 2  &amp;&amp; Âîçâðàò
**  IF !._storechktransBACK(lPayMode)
IF !._storechktrans(lPayMode,lRetVal)
						*--îòìåíà âîçâðàòà çàêàçà
						.lorderpay = .F.
						RETURN .F.
ENDIF
		.lOrderReturn = .T.
CASE .nopereation = 8 &amp;&amp; âíåñíåíèå äåíåã
CASE .nopereation = 9 &amp;&amp; èçúÿòèå äåíåã
ENDCASE

			*--äëÿ ñîõðàíåíèÿ çàêàçà ñî ñòàòóñîì "îïëà÷åí"
			.lorderpay = .T.
			*--ïåðåñ÷èòàåì íàêîïèòåëüíóþ ñóììó è ñêèäêó ïî äèñêîíòíîé êàðòå (åñëè îíà áûëà)
			.ClientRate()
			
		ENDIF &amp;&amp; IF TYPE([lRetVal])==[C]
	
			*--â ñëó÷àå îïëàòû êàðòî÷êîé èëè êóïîíîì ñîõðàíèì èíôîðìàöèþ î òèïå îïëàòû
			IF lPayMode&lt;&gt;1 &amp;&amp;
				DO CASE
					CASE lPayMode=2
						lPANNo = [Áàíê.êàðòà]
						
					CASE lPayMode=3
						lPANNo = ALLTRIM(STR(lCouponID))
						
					CASE lPayMode=4
						lPANNo = [Îïëà÷åíî ñ áàëàíñà êëèåíòà]
				ENDCASE
				
				IF .nCheckID&lt;&gt;0
						USE IN SELECT([lvCheckPaymentEdit])
						USE lvCheckPaymentEdit IN 0
						CURSORSETPROP([BUFFERING],3,[lvCheckPaymentEdit])
					
						APPEND BLANK IN lvCheckPaymentEdit
						REPLACE ;
							lvCheckPaymentEdit.CheckPaymentTypeID WITH lPayMode, ;
							lvCheckPaymentEdit.CheckID 			  WITH .nCheckID, ;
							lvCheckPaymentEdit.CheckPaymentPANNo  WITH lPANNo, ;
							lvCheckPaymentEdit.CouponID WITH IIF(lPayMode=3,lCouponID,.NULL.), ;
		                    lvCheckPaymentEdit.CheckPaymentQnt    WITH IIF(lPayMode=3,lCouponQnt,1), ;
							lvCheckPaymentEdit.CheckPaymentPrcSum WITH NTOM(lSum) ;
						IN lvCheckPaymentEdit
			 			
						llRes = TABLEUPDATE(0,.T.,[lvCheckPaymentEdit])
				ENDIF
			ENDIF &amp;&amp; IF lPayMode&lt;&gt;1
	ELSE
	    RETURN .F.
	ENDIF  &amp;&amp; IF lnNoPredchk &gt;0
	._ok()
	
		*--Ñêðûâàåì ôîðìó
		*.Hide()
ENDIF
RETURN .uretval
ENDWITH


ENDPROC
PROCEDURE printprecheck
*--ïå÷àòü ïðåä÷åêà
LOCAL lnPredchk, ;
		lmaxid

*--ïðîâåðèì, äîñòóïíà ëè ïå÷àòü ïðå-÷åêîâ íà ýòîì ìåñòå
IF .PrintinfPrech =0
	***MESSAGEBOX([Íà äàííîì ðàáî÷åì ìåñòå ïå÷àòü ïðåä÷åêà íåäîñòóïíà.],48,[Îêíî ñîîáùåíèé])
	RETURN .T.
ENDIF



SELECT lvOrderTvrView
LOCATE ALL FOR (!BITTEST(lvOrderTvrView.TvrAttr,2))
IF !FOUND()
RETURN .t.
ENDIF

IF MESSAGEBOX([Íàïå÷àòàòü ïðåä÷åê?],36,[Îêíî ñîîáùåíèé]) = 7
	RETURN .F.
ENDIF

*--ïðîâåðêà íà íåïóñòîé çàêàç
IF RECCOUNT([lvOrderTvrView])&lt;=0
	MESSAGEBOX([Çàêàç íå ñîäåðæèò íè îäíîé ïîçèöèè!],48,[Îêíî ñîîáùåíèé])
	RETURN .F.
ENDIF

*--ïðîâåðêà íà íóëåâîå êîëè÷åñòâî
SELECT lvOrderTvrView
GO TOP
SCAN ALL
	IF lvOrderTvrView.TvrQnt = 0
		IF TYPE('thisform.grdOrder')=[O]
			MESSAGEBOX([Çàêàç ñîäåðæèò íóëåâîå êîëè÷åñòâî!],48,[Îêíî ñîîáùåíèé])
			thisform.grdOrder.SetFocus()
			RETURN .F.
		ENDIF
	ENDIF
	SELECT lvOrderTvrView
ENDSCAN

*--åñëè ïðåä÷åê óæå áûë íàïå÷àòàí, òî äëÿ ïîâòîðíîé ïå÷àòè ïðåä÷åêà íóæíà îòìåíèòü ïåðâûé ïðåä÷åê
SELECT lvOrderTvrView
COUNT FOR BITTEST(lvOrderTvrView.TvrAttr,2) TO lnPredchk

IF lnPredchk = 0
	*--ïðîèçâåäåì ïðîâåðêó ñêèäêè (ñêèäêà äîëæíà ñòîÿòü ïîñëåäíåé ïîçèöèåé â çàêàçå)

	CALCULATE MAX(lvOrderTvrView.FrmPartTvrID) TO lmaxid
	
	SELECT lvOrderTvrView
	LOCATE FOR lvOrderTvrView.TvrID = this.lnDiscTvrID
	
	IF (FOUND() AND lvOrderTvrView.FrmPartTvrID&lt;&gt;lmaxid)
		MESSAGEBOX([Íåîáõîäèìî ïåðåñ÷èòàòü ñêèäêó.],48,[Îêíî ñîîáùåíèé])
		RETURN .F.
	ENDIF	
	
	*--âûïîëíèì ïå÷àòü ïðåä÷åêà è óñòàíîâèì ïðèçíàê ïðîèçâåäåííîé ïå÷àòè ïðåä÷åêà
	RETURN thisform._storechktrans_pred()
	
*!*		*--ïîñëå ïå÷àòè ïðåä÷åêà ââîä äàííûõ áóäåò çàáëîêèðîâàí
*!*		thisform._block_in(.T.)
ELSE
	*MESSAGEBOX([Ïðåä÷åê óæå áûë íàïå÷àòàí.]+CHR(13)+;
	*			[Äëÿ ïîâòîðíîé ïå÷àòè ïðåä÷åêà îáðàòèòåñü ê ìåíåäæåðó.],64,[Îêíî ñîîáùåíèé])
	RETURN .t.
ENDIF


ENDPROC
PROCEDURE printpredtoprint
IF this.PrintinfPrech =2

PUBLIC pcName
pcName = This.spuserclt1

	IF this.lcPrinter = [MODIFY]
		MODIFY REPORT REPORTS\pred_print.frx
		RELEASE pcName
		RETURN
	ENDIF
	IF this.lcPrinter = [DEFAULT]
				SET PRINTER TO DEFAULT
		ELSE
				SET PRINTER TO NAME ALLTRIM(this.lcPrinter)
	ENDIF
	PRINTJOB
	SELECT * FROM lvOrderTvrView INTO TABLE TMP\lvOrderTvrView1
	USE IN lvOrderTvrView1
	IF llDebugModeFlg
		MODIFY REPORT REPORTS\pred_print.frx
	ENDIF
	REPORT FORM REPORTS\pred_print.frx TO PRINTER &amp;&amp;PREVIEW
	ENDPRINTJOB
	USE IN SELECT('lvOrderTvrView1')
	ERASE TMP\lvOrderTvrView1.dbf
	RELEASE pcName
ENDIF

RETURN
ENDPROC
PROCEDURE writetoedel
LPARAMETERS lcCodeCard
LOCAL _PARAM, lnDefEmiClt , lnGuest,lcspUserClt
WAIT WINDOW 'Ðåãèñòðèðóåì ïðîäàæó â Åäåëâåéñ ...' NOWAIT
lcIniFileName = FULLPATH([BASIS.INI])
**** Íàõîäèì ïî êàðòå ïàðàìåòðû ãîñòÿ â edel
_PARAM = lcCodeCard &amp;&amp; '742B4B7B'
lnGuest = edel_ord
	*--ïîëó÷èì êîä êëèåíòà - îïåðàòîðà
	lnDefEmiClt = This.spUserClt
	lcspUserClt = This.spUserClt1
*** Îòêðûâàåì òàáëèöó äëÿ âíåñåíèÿ ïîòðà÷åíûõ äåíåã
	USE IN SELECT([edel_tillypad_import_edit])
	USE edel_tillypad_import_edit IN 0 NODATA
	*CURSORSETPROP([BUFFERING],3,[edel_tillypad_import_edit])

	APPEND BLANK IN edel_tillypad_import_edit
	REPLACE ;
		edel_tillypad_import_edit.AccountID		WITH lnGuest  , ;
		edel_tillypad_import_edit.OrderTime		WITH DATETIME(), ;
		edel_tillypad_import_edit.OrderSum		WITH thisform.nOrderSum, ;
		edel_tillypad_import_edit.Note			WITH [Id ]+ALLTRIM(lvFrmEdit.FrmNum)+;
													 [(]+ALLTRIM(STR(lvFrmEdit.FrmID,10,0))+[)]+ ;
													 [ Îôèöèàíò ]+ALLTRIM(lcspUserClt) + ;
													 [ Âðåìÿ :]+SUBSTR(TTOC(DATETIME()),11), ;
		edel_tillypad_import_edit.WaiterName		WITH ALLTRIM(lcspUserClt), ;
		edel_tillypad_import_edit.DepartCode		WITH this.lcEdelPodr, ;
		edel_tillypad_import_edit.ResCode		WITH 0 ;
	IN edel_tillypad_import_edit


*!*	, ;
*!*			Edel_accountcontent.OrigOrderSum		WITH lvOrderTvrView.TvrQnt, ;
*!*			Edel_accountcontent.TPadGUID		WITH lvOrderTvrView.TvrPrcSale
		
	TABLEUPDATE(1,.T.,[edel_tillypad_import_edit])
WAIT CLEAR
* thisform.nOrderSum - ñóììà ïî îïëàòå
USE IN SELECT('tmp')
USE IN SELECT('edel_tillypad_import_edit')

ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1>Class</reserved1>
		<reserved2>30</reserved2>
		<reserved3>nordersum Ñóììà ê îïëàòå ïî ñ÷åòà
ncoupon
nnal
nsalesid Èäåíòèôôèêàòîð äîñòóïíîé äëÿ ðàáîòû ñìåíû. &gt; 0
ncashno Íîìåð ìåñòà ðåãèñòðàöèè
ncheckid Íîìåð ôèñêàëüíîãî ÷åêà â ñèñòåìå
lorderreturn Åñëè ÷åê âîçâðàòà
lorderpay Ôëàã îïëàòû çàêàçà
nopereation âèä îïåðàöèè ñ äåíüãàìè: 1 - ïðîäàæà; 2 - âîçâðàò; 3-ñòîðíî ÷åêà; 4 - ïðîäàæà (ñáðîøåíûé); 5 - âîçâðàò(ñáðîøåíûé); 6-ñòîðíî ÷åêà(ñáðîøåíûé); 7 - îòëîæåíûé;8 - âíåñåíèå; 9 - èçúÿòèå;
ncltbalans Áàëàíñ ïî êëèåíòó áåç ó÷åòà ëèìèòà
ncltlimit Ëèìèò ïî êëèåíòó
nfreesumm Ñóììà , äîñòóïíàÿ êëèåíòó
ctparam Ïàðàìåòð âèäîâ îïëàòû
withedel Ðàáîòàåì ñ Edelv
guestaccountid Íîìåð ëèöåâîãî ñ÷åòà ãîñòÿ â Åäåëüâåéñå
edel_clt Ñâåäåíèÿ î êëèåíòå ãîñòèííèöû
nkeyb Íîìåð ðàñêëàäêè
lckkmlib Íàçâàíèå áèáëèîòåêè äëÿ ôèñêàëüíèêà
cmdpay Ìîæíî ëè ïðîâîäèòü îïëàòó ñ ýòîãî ìåñòà
printinfprech Íàäî ëè  ïå÷àòàòü ïðå÷åê íà ýòîì ÐÌ
lndisctvrid Êîä òîâàðà - Ñêèäêà
lcprinter Íàçâàíèå ïðèíòåðà ïðåä÷åêà
spuserclt1 Îôèöàíò
spuserclt Êëèåíò ñ ïàðàìåòðîì
lntbltype Òèï ïîäðàçäåëåíèÿ ñòîë
lntblpar Êîä ïîäðàçäåëåíèÿ, ñîäåðæàùåãî ñòîëû( ïî íåìó áóäåò ñ÷åò)
lnfrmtypeid êîä òèïà äîêóìåíòà
lndefclt êîä êëèåíòà ïî óìîë÷àíèþ Ãîñòü
lcedelpodr êîä îòäåëà â åäåëüâåéñå
lcheaderfile íàçâàíèå ôàéëà - çàãîëîâêà ÷åêîâ
lcfooterfile Íàçâàíèå ôàéëà ñ ïîäâàëîì
uretval1 ñïîñîáû îïëàòû
*printcheckfr Ïå÷àòü äîêóìåíòà - ôèñêàëüíîãî ÷åêà ïîäòâåðæäåíèÿ îïëàòû
*_storechktrans_slip ïå÷àòü ÑËÈÏÀ ïðè áåçíàëè÷íîé îïëàòå
*_headerprint Ïå÷àòü çàãîëîâêà ÷åêà èç ñïåöèàëüíîãî ôàéëà
*_storechktrans ïå÷àòü ôèñêàëüíîãî ÷åêà
*_footerprint Ïå÷àòü ïîäâàëà ÷åêà
*kkmerrorhandler çàïèñü â Log èíôîðìàöèè îá îøèáêàõ ÊÊÌ
*printprecheck Ïðîèçâîäèòü ïå÷àòü ïðåä÷åêà
*_storechktrans_pred Ïå÷àòü ïðåä÷åêà è ðåãèñòðàöèÿ ýòîãî ñîáûòèÿ
*_storechktransback ïå÷àòü ôèñêàëüíîãî ÷åêà íà âîçâðàò
*_iscasher ïðîâåðÿåì: ÿâëÿåòñÿ ëè äàííûé îôèöàíò êàññèðîì
*_ok ñîõðàíåíè èçìåíåíèé
*calcbalanslimitfree Ðàññ÷åò áàëàíñà, ëèìèòà è äîñòóïíîé ýòîìó êëèåíòó ñóììû
*getcardinfo ïîëó÷èòü èíôîðìàöèþ ïî êàðòå
*makeorderoncheck ñîçäàåì çàêàç ïî  ñóùåñòâóþùåìó ÷åêó
*printpredtoprint Íà êàêîé òèï óñòðîéñòâà ïðîèçâîäèòü ïå÷àòü ïðåä÷åêà
*calcbalansedel Çàïðîñ áàëàíñà èç Edelv
*writetoedel Çàïèñü äàííûõ â Edelv
*_checkpostprint Ïå÷àòü êîðåøêà îòëîæåííîãî ÷åêà
*clientrate Ïåðåñ÷èòàòü ðåéòèíã êëèåíòà
</reserved3>
		<reserved4/>
		<reserved5/>
		<reserved6>Pixels</reserved6>
		<reserved7>îïëàòà çàêàçà, ëþáûì ñïîñîáî, ïå÷àòü ÷åêà, ñëèïà, îïðåäåëåíèå ñêèäêè</reserved7>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1UB10JMQW</uniqueid>
		<timestamp>995795986</timestamp>
		<class>shp</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>shape</baseclass>
		<objname>Shp1</objname>
		<parent>frmpayment_old</parent>
		<properties>Top = 0
Left = 0
Height = 432
Width = 667
BackStyle = 0
BorderWidth = 6
BorderColor = 0,0,255
ZOrderSet = 1
Name = "Shp1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1WV0WZW6S</uniqueid>
		<timestamp>995795986</timestamp>
		<class>shp</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>shape</baseclass>
		<objname>Shp3</objname>
		<parent>frmpayment_old</parent>
		<properties>Top = 2
Left = 6
Height = 213
Width = 655
BackColor = 218,214,218
ZOrderSet = 2
Name = "Shp3"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1RY0N4UD0</uniqueid>
		<timestamp>995795986</timestamp>
		<class>shp</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>shape</baseclass>
		<objname>Shp2</objname>
		<parent>frmpayment_old</parent>
		<properties>Top = 380
Left = 6
Height = 46
Width = 655
BackColor = 218,214,218
ZOrderSet = 4
Name = "Shp2"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1RY0N4UD0</uniqueid>
		<timestamp>995795986</timestamp>
		<class>cntcancelsavehandled</class>
		<classloc>baseform_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>Cntcancelsavehandled1</objname>
		<parent>frmpayment_old</parent>
		<properties>Top = 385
Left = 153
Width = 360
Height = 34
TabIndex = 5
TabStop = .F.
ZOrderSet = 6
Name = "Cntcancelsavehandled1"
cmdCancel.Top = 2
cmdCancel.Left = 0
cmdCancel.Height = 34
cmdCancel.Width = 162
cmdCancel.FontBold = .T.
cmdCancel.FontSize = 12
cmdCancel.ForeColor = 0,0,255
cmdCancel.BackColor = 241,239,241
cmdCancel.DisabledForeColor = 0,0,255
cmdCancel.Name = "cmdCancel"
cmdOk.Top = 0
cmdOk.Left = 198
cmdOk.Height = 34
cmdOk.Width = 162
cmdOk.FontBold = .T.
cmdOk.FontSize = 12
cmdOk.Caption = "Îïëàòèòü "
cmdOk.ForeColor = 0,0,255
cmdOk.BackColor = 241,239,241
cmdOk.DisabledForeColor = 0,0,255
cmdOk.DisabledBackColor = 252,242,218
cmdOk.Name = "cmdOk"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1RY0N4UD0</uniqueid>
		<timestamp>995795986</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>LblSum</objname>
		<parent>frmpayment_old</parent>
		<properties>FontBold = .F.
FontSize = 24
BackStyle = 0
Caption = "Ñóììà "
Left = 28
Top = 14
TabIndex = 6
ForeColor = 0,0,255
ZOrderSet = 7
Name = "LblSum"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1RY0N4UD0</uniqueid>
		<timestamp>995795986</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>LblCash</objname>
		<parent>frmpayment_old</parent>
		<properties>FontBold = .F.
FontSize = 36
Alignment = 1
BackStyle = 0
Caption = "1234567.89"
Left = 185
Top = 5
TabIndex = 7
ForeColor = 0,0,255
ZOrderSet = 8
Name = "LblCash"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1UP12UGWV</uniqueid>
		<timestamp>995795986</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>LblCoupon</objname>
		<parent>frmpayment_old</parent>
		<properties>FontBold = .T.
FontName = "Times New Roman"
FontSize = 20
BackStyle = 0
Caption = "Òàëîí"
Left = 22
Top = 349
Visible = .F.
TabIndex = 8
ForeColor = 0,0,255
ZOrderSet = 9
Name = "LblCoupon"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1UP0WV2SO</uniqueid>
		<timestamp>995795986</timestamp>
		<class>cntidctlgrid</class>
		<classloc>comidctl_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>CntOUID</objname>
		<parent>frmpayment_old</parent>
		<properties>Top = 264
Left = 21
Width = 297
Height = 43
BackStyle = 0
Enabled = .F.
Visible = .F.
TabIndex = 3
ForeColor = 228,151,22
BackColor = 252,242,218
ZOrderSet = 10
_allowresizecontent = .T.
_rsaliasname = lvOUCouponList
_rsfieldnametext = NM
_rsfieldnameid = ID
_controlsourcetype = 0
_selectobject = frmidctlgridintop;rst_v1.vcx
Name = "CntOUID"
txtText.FontSize = 16
txtText.BackStyle = 0
txtText.Height = 42
txtText.Left = 0
txtText.Top = 0
txtText.Width = 256
txtText.ForeColor = 0,0,255
txtText.BackColor = 241,239,241
txtText.DisabledBackColor = 241,239,241
txtText.SelectedForeColor = 128,128,255
txtText.DisabledForeColor = 0,0,255
txtText.SelectedBackColor = 252,242,218
txtText._highlightself = .F.
txtText.Name = "txtText"
cmdShow.Top = 0
cmdShow.Left = 256
cmdShow.Height = 42
cmdShow.Width = 42
cmdShow.BackColor = 241,239,241
cmdShow.Name = "cmdShow"
cmdClear.Top = 0
cmdClear.Left = 296
cmdClear.Height = 42
cmdClear.Width = 23
cmdClear.Enabled = .F.
cmdClear.Visible = .F.
cmdClear.Name = "cmdClear"
CmdTree.Name = "CmdTree"
Olecommprox1.Top = 0
Olecommprox1.Left = 36
Olecommprox1.Height = 16
Olecommprox1.Width = 38
Olecommprox1.Name = "Olecommprox1"
</properties>
		<protected/>
		<methods>PROCEDURE _handleanychange
USE IN SELECT([lvCouponByOUView])
_PARAM = this.value
USE lvCouponByOUView IN 0

thisform.cntCouponID.Visible = .T.
thisform.cntCouponID.Enabled = .T.
thisform.cntCouponID.SetValue(0)

thisform.SpnQntCoupon.Visible = .T.
thisform.SpnQntCoupon.Enabled = .T.
thisform.SpnQntCoupon.Value = 0

WITH thisform
	.nCoupon = 0
	.nNal = 0
	.lblCoupon.Caption = []
	.lblNal.Caption = []
	.lblCoupon.Visible = .F.
	.lblNal.Visible = .F.
ENDWITH
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1UP0WV2T4</uniqueid>
		<timestamp>995795986</timestamp>
		<class>cntidctlgrid</class>
		<classloc>comidctl_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>CntCouponID</objname>
		<parent>frmpayment_old</parent>
		<properties>Top = 307
Left = 21
Width = 297
Height = 43
BackStyle = 0
Enabled = .F.
Visible = .F.
TabIndex = 4
ForeColor = 228,151,22
BackColor = 252,242,218
ZOrderSet = 11
_allowresizecontent = .T.
_rsaliasname = lvCouponByOUView
_rsfieldnametext = NM
_rsfieldnameid = ID
_controlsourcetype = 0
_selectobject = frmidctlgridintop;rst_v1.vcx
Name = "CntCouponID"
txtText.FontSize = 16
txtText.BackStyle = 0
txtText.Height = 42
txtText.Left = 0
txtText.Top = 0
txtText.Width = 256
txtText.ForeColor = 0,0,255
txtText.BackColor = 252,242,218
txtText.DisabledBackColor = 241,239,241
txtText.SelectedForeColor = 128,128,255
txtText.SelectedBackColor = 252,242,218
txtText._highlightself = .F.
txtText.Name = "txtText"
cmdShow.Top = 0
cmdShow.Left = 256
cmdShow.Height = 42
cmdShow.Width = 42
cmdShow.BackColor = 241,239,241
cmdShow.DisabledForeColor = 241,239,241
cmdShow.DisabledBackColor = 241,239,241
cmdShow.Name = "cmdShow"
cmdClear.Top = 0
cmdClear.Left = 296
cmdClear.Height = 42
cmdClear.Width = 23
cmdClear.Enabled = .F.
cmdClear.Visible = .F.
cmdClear.Name = "cmdClear"
CmdTree.Name = "CmdTree"
Olecommprox1.Top = 0
Olecommprox1.Left = 36
Olecommprox1.Height = 16
Olecommprox1.Width = 38
Olecommprox1.Name = "Olecommprox1"
</properties>
		<protected/>
		<methods>PROCEDURE _handleanychange
WITH thisform
	*--êîëè÷åñòâî òàëîíîâ
	thisform.SpnQntCoupon.Value = 1

	*--îïëàòà òàëîíîì
	.nCoupon = MIN((lvCouponByOUView.CouponPrc*thisform.SpnQntCoupon.Value),.nordersum)
	
	*--äîáàâëåíèå íàëè÷íûìè
	.nNal = MAX((.nordersum - .nCoupon),0)
	
	.lblCoupon.Caption = [Êóïîí  ]+ALLTRIM(STR(lvCouponByOUView.CouponPrc,99,2))
	.lblNal.Caption = [Íàëè÷íûå  ]+ALLTRIM(STR(.nNal,99,2))
	.lblCoupon.Visible = .T.
	.lblNal.Visible = .T.
ENDWITH
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1RY0N4UD0</uniqueid>
		<timestamp>995795986</timestamp>
		<class>cntidctlgrid</class>
		<classloc>comidctl_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>cntPayTypeID</objname>
		<parent>frmpayment_old</parent>
		<properties>Top = 218
Left = 21
Width = 297
Height = 43
BackStyle = 0
TabIndex = 2
ColorSource = 0
ForeColor = 0,0,255
BackColor = 241,239,241
ZOrderSet = 12
_allowresizecontent = .T.
_rsaliasname = lvPayTypeView
_rsfieldnametext = NM
_rsfieldnameid = ID_
_controlsourcetype = 0
_selectobject = frmidctlgridintop;rst_v1.vcx
Name = "cntPayTypeID"
txtText.FontSize = 16
txtText.BackStyle = 0
txtText.Height = 42
txtText.Left = 0
txtText.Top = 0
txtText.Width = 257
txtText.ForeColor = 0,0,255
txtText.BackColor = 241,239,241
txtText.DisabledBackColor = 241,239,241
txtText.SelectedForeColor = 128,128,255
txtText.DisabledForeColor = 0,0,255
txtText.SelectedBackColor = 252,242,218
txtText._highlightself = .F.
txtText.Name = "txtText"
cmdShow.Top = 0
cmdShow.Left = 257
cmdShow.Height = 42
cmdShow.Width = 42
cmdShow.BackColor = 241,239,241
cmdShow.DisabledForeColor = 0,0,255
cmdShow.DisabledBackColor = 241,239,241
cmdShow.Name = "cmdShow"
cmdClear.Top = 0
cmdClear.Left = 297
cmdClear.Height = 42
cmdClear.Width = 23
cmdClear.Enabled = .F.
cmdClear.Visible = .F.
cmdClear.Name = "cmdClear"
CmdTree.Name = "CmdTree"
Olecommprox1.Top = 0
Olecommprox1.Left = 36
Olecommprox1.Height = 16
Olecommprox1.Width = 38
Olecommprox1.Name = "Olecommprox1"
</properties>
		<protected/>
		<methods>PROCEDURE _handleanychange
*!*	IF this.value = 3
*!*		*--îïëàòà êóïîíîì
*!*		thisform.cntOUID.Visible = .T.
*!*		thisform.cntOUID.Enabled = .T.
*!*	ELSE	
	thisform.cntOUID.Visible = .F.
	thisform.cntOUID.Enabled = .F.
*!*	ENDIF
	IF this.value = 1 OR thisform.nopereation &lt;&gt; 7 &amp;&amp; îïëàòà íàëè÷íûìè
		thisform.cntcancelsavehandled1.cmdOk.Enabled=.f.
	ENDIF

thisform.cntCouponID.Visible = .F.
thisform.cntCouponID.Enabled = .F.

thisform.spnQntCoupon.Visible = .F.
thisform.spnQntCoupon.Enabled = .F.

WITH thisform
	.nCoupon = 0
	.nNal = 0
	.lblCoupon.Caption = []
	.lblNal.Caption = []
	.lblCoupon.Visible = .F.
	.lblNal.Visible = .F.
ENDWITH
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1UP12UGWW</uniqueid>
		<timestamp>995795986</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>LblNal</objname>
		<parent>frmpayment_old</parent>
		<properties>FontBold = .T.
FontName = "Times New Roman"
FontSize = 20
BackStyle = 0
Caption = "Íàëè÷íûå"
Left = 359
Top = 349
Visible = .F.
TabIndex = 9
ForeColor = 0,0,255
ZOrderSet = 13
Name = "LblNal"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1US0VK8MN</uniqueid>
		<timestamp>980181302</timestamp>
		<class>spn</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>spinner</baseclass>
		<objname>SpnQntCoupon</objname>
		<parent>frmpayment_old</parent>
		<properties>FontSize = 20
Enabled = .F.
Height = 43
Left = 359
TabIndex = 13
Top = 307
Visible = .F.
Width = 72
BackColor = 241,239,241
ForeColor = 0,0,255
DisabledBackColor = 241,239,241
DisabledForeColor = 0,0,255
ZOrderSet = 14
Name = "SpnQntCoupon"
</properties>
		<protected/>
		<methods>PROCEDURE _handleanychange
WITH thisform
	*--îïëàòà òàëîíîì
	.nCoupon = MIN((lvCouponByOUView.CouponPrc*this.Value),.nordersum)
	
	*--äîáàâëåíèå íàëè÷íûìè
	.nNal = MAX((.nordersum - .nCoupon),0)
	
	.lblCoupon.Caption = [Êóïîí  ]+ALLTRIM(STR(lvCouponByOUView.CouponPrc,99,2))+[ * ]+;
						ALLTRIM(STR(this.Value))+[ = ]+ALLTRIM(STR((lvCouponByOUView.CouponPrc*this.Value)))
	.lblNal.Caption = [Íàëè÷íûå  ]+ALLTRIM(STR(.nNal,99,2))
	.lblCoupon.Visible = .T.
	.lblNal.Visible = .T.
ENDWITH
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_29214ZD3T</uniqueid>
		<timestamp>995795986</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>LblEdel</objname>
		<parent>frmpayment_old</parent>
		<properties>AutoSize = .F.
FontBold = .F.
FontSize = 12
WordWrap = .F.
BackStyle = 0
Caption = " "
Height = 24
Left = 94
Top = 108
Width = 399
TabIndex = 10
ForeColor = 0,0,255
ZOrderSet = 15
Name = "LblEdel"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_26W0XO9S6</uniqueid>
		<timestamp>995795986</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>Lbl4</objname>
		<parent>frmpayment_old</parent>
		<properties>AutoSize = .T.
FontBold = .F.
FontSize = 12
WordWrap = .T.
BackStyle = 0
Caption = "Äîñòóïíûå ñðåäñòâà êëèåíòà:"
Height = 38
Left = 28
Top = 133
Width = 153
TabIndex = 10
ForeColor = 0,0,255
ZOrderSet = 16
Name = "Lbl4"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1RY0N4UD0</uniqueid>
		<timestamp>995795986</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>LblFrmId</objname>
		<parent>frmpayment_old</parent>
		<properties>AutoSize = .T.
FontBold = .F.
FontSize = 12
WordWrap = .T.
BackStyle = 0
Caption = "Ëèìèò êëèåíòà:"
Height = 21
Left = 12
Top = 396
Width = 109
TabIndex = 10
ForeColor = 0,0,255
ZOrderSet = 17
Name = "LblFrmId"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1RY0N4UD0</uniqueid>
		<timestamp>995795986</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>LblBalans</objname>
		<parent>frmpayment_old</parent>
		<properties>AutoSize = .T.
FontBold = .F.
FontSize = 12
WordWrap = .T.
BackStyle = 0
Caption = "Áàëàíñ êëèåíòà:"
Enabled = .F.
Height = 21
Left = 28
Top = 97
Visible = .F.
Width = 117
TabIndex = 10
ForeColor = 0,0,255
ZOrderSet = 18
Name = "LblBalans"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1RY0N4UD0</uniqueid>
		<timestamp>995795986</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>Lbl1</objname>
		<parent>frmpayment_old</parent>
		<properties>FontBold = .F.
FontSize = 24
BackStyle = 0
Caption = "Ñäà÷à"
Left = 28
Top = 177
TabIndex = 10
ForeColor = 0,0,255
ZOrderSet = 19
Name = "Lbl1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1WV0WAZZD</uniqueid>
		<timestamp>995795986</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>Lbl3</objname>
		<parent>frmpayment_old</parent>
		<properties>FontBold = .F.
FontSize = 24
BackStyle = 0
Caption = "Ïîëó÷åíî"
Left = 28
Top = 62
TabIndex = 11
ForeColor = 0,0,255
ZOrderSet = 20
Name = "Lbl3"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1WV0WFMZ2</uniqueid>
		<timestamp>995795986</timestamp>
		<class>cntnumericpad</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>Cntnumericpad1</objname>
		<parent>frmpayment_old</parent>
		<properties>Top = 12
Left = 493
TabIndex = 14
ZOrderSet = 21
Name = "Cntnumericpad1"
ImgButton0.Name = "ImgButton0"
ImgButtonPoint.Height = 50
ImgButtonPoint.Width = 50
ImgButtonPoint.Name = "ImgButtonPoint"
ImgButton1.Height = 50
ImgButton1.Width = 50
ImgButton1.Name = "ImgButton1"
ImgButton2.Height = 50
ImgButton2.Width = 50
ImgButton2.Name = "ImgButton2"
ImgButton3.Height = 50
ImgButton3.Width = 50
ImgButton3.Name = "ImgButton3"
ImgButton4.Height = 50
ImgButton4.Width = 50
ImgButton4.Name = "ImgButton4"
ImgButton5.Height = 50
ImgButton5.Width = 50
ImgButton5.Name = "ImgButton5"
ImgButton6.Height = 50
ImgButton6.Width = 50
ImgButton6.Name = "ImgButton6"
ImgButton7.Height = 50
ImgButton7.Width = 50
ImgButton7.Name = "ImgButton7"
ImgButton8.Height = 50
ImgButton8.Width = 50
ImgButton8.Name = "ImgButton8"
ImgButton9.Height = 50
ImgButton9.Width = 50
ImgButton9.Name = "ImgButton9"
ImgbuttonDelete.Height = 50
ImgbuttonDelete.Width = 50
ImgbuttonDelete.Name = "ImgbuttonDelete"
</properties>
		<protected/>
		<methods>PROCEDURE ImgbuttonDelete.Click
DODEFAULT()
thisform.txtcalcnum1.nDecimal= 0

ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1RY0N4UD0</uniqueid>
		<timestamp>995795986</timestamp>
		<class>cntidctlgrid</class>
		<classloc>comidctl_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>CntFrmTypeID</objname>
		<parent>frmpayment_old</parent>
		<properties>Top = 218
Left = 353
Width = 297
Height = 43
BackStyle = 0
TabIndex = 2
ColorSource = 0
ForeColor = 0,0,255
BackColor = 241,239,241
ZOrderSet = 22
_allowresizecontent = .T.
_rsaliasname = lvFrmTypeSaveOrdView
_rsfieldnametext = NM
_rsfieldnameid = ID_
_controlsourcetype = 0
_selectobject = frmidctlgridintop;rst_v1.vcx
value = 22
Name = "CntFrmTypeID"
txtText.FontSize = 16
txtText.BackStyle = 0
txtText.Height = 42
txtText.Left = 0
txtText.Top = 0
txtText.Width = 257
txtText.ForeColor = 0,0,255
txtText.BackColor = 241,239,241
txtText.DisabledBackColor = 241,239,241
txtText.SelectedForeColor = 128,128,255
txtText.DisabledForeColor = 0,0,255
txtText.SelectedBackColor = 252,242,218
txtText._highlightself = .F.
txtText.Name = "txtText"
cmdShow.Top = 0
cmdShow.Left = 257
cmdShow.Height = 42
cmdShow.Width = 42
cmdShow.BackColor = 241,239,241
cmdShow.DisabledForeColor = 0,0,255
cmdShow.DisabledBackColor = 241,239,241
cmdShow.Name = "cmdShow"
cmdClear.Top = 0
cmdClear.Left = 297
cmdClear.Height = 42
cmdClear.Width = 23
cmdClear.Enabled = .F.
cmdClear.Visible = .F.
cmdClear.Name = "cmdClear"
CmdTree.Name = "CmdTree"
Olecommprox1.Top = 0
Olecommprox1.Left = 36
Olecommprox1.Height = 16
Olecommprox1.Width = 38
Olecommprox1.Name = "Olecommprox1"
</properties>
		<protected/>
		<methods>PROCEDURE _handleanychange
IF this.value = 3
	*--îïëàòà êóïîíîì
	thisform.cntOUID.Visible = .T.
	thisform.cntOUID.Enabled = .T.
ELSE	
	thisform.cntOUID.Visible = .F.
	thisform.cntOUID.Enabled = .F.
ENDIF

thisform.cntCouponID.Visible = .F.
thisform.cntCouponID.Enabled = .F.

thisform.spnQntCoupon.Visible = .F.
thisform.spnQntCoupon.Enabled = .F.

WITH thisform
	.nCoupon = 0
	.nNal = 0
	.lblCoupon.Caption = []
	.lblNal.Caption = []
	.lblCoupon.Visible = .F.
	.lblNal.Visible = .F.
ENDWITH
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1WV0WFN2K</uniqueid>
		<timestamp>995795986</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>LblChange</objname>
		<parent>frmpayment_old</parent>
		<properties>FontBold = .F.
FontSize = 36
Alignment = 1
BackStyle = 0
Caption = "0.00"
Height = 59
Left = 360
Top = 167
Width = 96
TabIndex = 12
ForeColor = 0,0,255
ZOrderSet = 23
Name = "LblChange"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2700OB70E</uniqueid>
		<timestamp>995795986</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>Lbl5</objname>
		<parent>frmpayment_old</parent>
		<properties>AutoSize = .T.
FontBold = .F.
FontSize = 12
WordWrap = .T.
BackStyle = 0
Caption = "Ëèìèò êëèåíòà:"
Enabled = .F.
Height = 21
Left = 28
Top = 122
Visible = .F.
Width = 109
TabIndex = 10
ForeColor = 0,0,255
ZOrderSet = 24
Name = "Lbl5"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_28T0P51OK</uniqueid>
		<timestamp>995795986</timestamp>
		<class>cntidctlgrid</class>
		<classloc>comidctl_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>CntCltId</objname>
		<parent>frmpayment_old</parent>
		<properties>Top = 100
Left = 25
Width = 464
Height = 34
BackStyle = 0
TabIndex = 2
ColorSource = 0
ForeColor = 0,0,255
BackColor = 241,239,241
ZOrderSet = 25
_allowresizecontent = .T.
_rsaliasname = lvCltRSTList
_rsfieldnametext = NM
_rsfieldnameid = ID
_controlsourcetype = 0
_selectobject = frmidctlgridintop;rst_v1.vcx
value = 22
_controlsource = lvFrmEdit.PointIspCltID
_showtextnotfound = ... çà íàëè÷íûå
Name = "CntCltId"
txtText.FontSize = 16
txtText.BackStyle = 0
txtText.Height = 33
txtText.Left = 0
txtText.Top = 2
txtText.Width = 463
txtText.ForeColor = 0,0,255
txtText.BackColor = 241,239,241
txtText.DisabledBackColor = 241,239,241
txtText.SelectedForeColor = 128,128,255
txtText.DisabledForeColor = 0,0,255
txtText.SelectedBackColor = 252,242,218
txtText._highlightself = .F.
txtText.Name = "txtText"
cmdShow.Top = 0
cmdShow.Left = 257
cmdShow.Height = 42
cmdShow.Width = 42
cmdShow.Enabled = .F.
cmdShow.Visible = .F.
cmdShow.BackColor = 241,239,241
cmdShow.DisabledForeColor = 0,0,255
cmdShow.DisabledBackColor = 241,239,241
cmdShow.Name = "cmdShow"
cmdClear.Top = 0
cmdClear.Left = 297
cmdClear.Height = 42
cmdClear.Width = 23
cmdClear.Enabled = .F.
cmdClear.Visible = .F.
cmdClear.Name = "cmdClear"
CmdTree.Name = "CmdTree"
Olecommprox1.Top = 0
Olecommprox1.Left = 36
Olecommprox1.Height = 16
Olecommprox1.Width = 38
Olecommprox1.Name = "Olecommprox1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1RY0N4UD0</uniqueid>
		<timestamp>980181302</timestamp>
		<class>txtcalcnum</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>Txtcalcnum1</objname>
		<parent>frmpayment_old</parent>
		<properties>FontBold = .T.
FontSize = 14
Height = 29
Left = 202
MaxLength = 12
Top = 64
Width = 239
ForeColor = 0,0,255
BackColor = 218,214,218
SelectedForeColor = 255,128,64
SelectedBackColor = 239,228,250
ZOrderSet = 27
_highlightself = .F.
Name = "Txtcalcnum1"
</properties>
		<protected/>
		<methods>PROCEDURE _handleanychange
IF thisform.nopereation = 7
	RETURN
ENDIF
IF this.Value&gt;=ABS(thisform.nOrderSum)
	**thisform.lblChange.Caption = ALLTRIM(STR((this.Value-thisform.nOrderSum*2+thisform.ncltbalans+thisform.ncltlimit),99,2))
	thisform.lblChange.Caption = ALLTRIM(STR((this.Value-ABS(thisform.nOrderSum)),99,2))
	thisform.cntcancelsavehandled1.cmdOk.Enabled=.t.
ELSE
	thisform.lblChange.Caption = [0.00]
	thisform.cntcancelsavehandled1.cmdOk.Enabled=.f.
ENDIF
thisform.txtFree.Value = ALLTRIM(STR((this.Value+thisform.ncltbalans+thisform.ncltlimit),99,2))

ENDPROC
PROCEDURE KeyPress
LPARAMETERS	tnKeyCode, tnShiftAltCtrl
		LOCAL _PARAM,lcPOSFuncMsg
		IF NOT USED('lvPOSKeyMap')
				*19.05.2008 18:20 -&gt;Çàãðóçèì ðàñêëàäêó êëàâèàòóðû
				LOCAL _PARAM
				***
				_PARAM = ThisForm.nKeyb
				SET DATABASE TO BASIS
				USE lvPOSKeyMap IN 0
		ENDIF
		SELECT lvPOSKeyMap
		LOCATE FOR PosKeyCode = tnKeyCode
				lcPOSFuncMsg	 = ALLTRIM(lvPOSKeyMap.POSFuncMsg)
				lcPOSEnabledMode = ICASE(EMPTY(lvPOSKeyMap.POSEnabledMode),[0],ISNULL(lvPOSKeyMap.POSEnabledMode),[0],ALLTRIM(lvPOSKeyMap.POSEnabledMode))
				*------------------------------------------------------------------------------
		IF FOUND() AND INLIST(lcPOSFuncMsg,[CLEAR],[ESC],[ERROR])  &amp;&amp;,[ONEUP],[ONEDOWN])
				*22.04.2006 12:32 -&gt;Åñëè ñêèäêà ïðåäîñòàâëåíà, òî ÷åê ìîæíî ëèáî çàâåðøèòü, ëèáî ñáðîñèòü
				DO CASE
					CASE  INLIST(lcPOSFuncMsg,[CLEAR],[ESC],[ERROR])
						  thisform.cntcancelsavehandled1.cmdCancel.Click()
					CASE  lcPOSFuncMsg = [SELECT]
						  KEYBOARD '{ENTER}'
					CASE  lcPOSFuncMsg = [ONEUP]
						  KEYBOARD '{UPARROW}'
					CASE  lcPOSFuncMsg = [ONEDOWN]
						  KEYBOARD '{DNARROW}'
				ENDCASE
			 	RETURN
		ENDIF

		*04.05.2006 13:44 -&gt;Âûïîëíèì ìåòîä ðîäèòåëüñêîãî êëàññà
		DODEFAULT(tnKeyCode, tnShiftAltCtrl)
		*------------------------------------------------------------------------------

ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_26W0XO9S7</uniqueid>
		<timestamp>953840434</timestamp>
		<class>txtcalcnum</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>TxtBalans</objname>
		<parent>frmpayment_old</parent>
		<properties>FontBold = .T.
FontSize = 11
Value = (thisform.ncltbalans)
Enabled = .F.
Height = 25
Left = 202
MaxLength = 12
Top = 93
Visible = .F.
Width = 239
ForeColor = 0,0,255
BackColor = 218,214,218
SelectedForeColor = 255,128,64
SelectedBackColor = 239,228,250
ZOrderSet = 28
_highlightself = .F.
Name = "TxtBalans"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_26W0XO9S9</uniqueid>
		<timestamp>953840434</timestamp>
		<class>txtcalcnum</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>TxtLimit</objname>
		<parent>frmpayment_old</parent>
		<properties>FontBold = .T.
FontSize = 11
Value = (thisform.ncltlimit)
Enabled = .F.
Height = 25
Left = 202
MaxLength = 12
Top = 118
Visible = .F.
Width = 239
ForeColor = 0,0,255
BackColor = 218,214,218
SelectedForeColor = 255,128,64
SelectedBackColor = 239,228,250
ZOrderSet = 29
_highlightself = .F.
Name = "TxtLimit"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_26W0XO9SA</uniqueid>
		<timestamp>953840434</timestamp>
		<class>txtcalcnum</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>TxtFree</objname>
		<parent>frmpayment_old</parent>
		<properties>FontBold = .T.
FontSize = 14
Value = (thisform.nfreesumm)
Height = 33
Left = 202
MaxLength = 12
ReadOnly = .T.
Top = 137
Width = 239
ForeColor = 0,0,255
BackColor = 218,214,218
SelectedForeColor = 255,128,64
SelectedBackColor = 239,228,250
ZOrderSet = 30
_highlightself = .F.
Name = "TxtFree"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2700ZNVFU</uniqueid>
		<timestamp>995795986</timestamp>
		<class>olecommprox</class>
		<classloc>olecomm.vcx</classloc>
		<baseclass>olecontrol</baseclass>
		<objname>Olecommprox1</objname>
		<parent>frmpayment_old</parent>
		<properties>Top = 294
Left = 540
Height = 48
Width = 58
ZOrderSet = 31
lautosave = .F.
cbindobj = ThisForm.txtCardNo
Name = "Olecommprox1"
</properties>
		<protected/>
		<methods>PROCEDURE OnComm
*** ActiveX Control Event ***

*12.05.2006 11:08 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	lcMsg
*------------------------------------------------------------------------------
WITH This
	*12.05.2006 11:08 -&gt;×èòàåì êîä
	lcMsg = ._Read()
	IF EMPTY(lcMsg)
		RETURN
	ENDIF
	*------------------------------------------------------------------------------
	*12.05.2006 11:10 -&gt;Ïîêàçûâàåì äàííûå ïî êàðòà
	.Parent.GetCardInfo(lcMsg)
	*------------------------------------------------------------------------------

ENDWITH
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
</methods>
		<objcode/>
		<ole>0M8R4KGxGuEAAAAAAAAAAAAAAAAAAAAAPgADAP7/CQAGAAAAAAAAAAAAAAABAAAAAQAAAAAAAAAAEAAAAgAAAAEAAAD+////AAAAAAAAAAD////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////9/////v////7////+/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////1IAbwBvAHQAIABFAG4AdAByAHkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAWAAUA//////////8BAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADDK3p0WZcoBAwAAAIABAAAAAAAAAwBPAGwAZQBPAGIAagBlAGMAdABEAGEAdABhAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB4AAgEDAAAAAgAAAP////8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAAAAAADAEEAYwBjAGUAcwBzAE8AYgBqAFMAaQB0AGUARABhAHQAYQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJgACAP///////////////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAABLAAAAAAAAAAMAQwBoAGEAbgBnAGUAZABQAHIAbwBwAHMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcAAIA////////////////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAGAAAAAAAAAABAAAAAIAAAD+////BQAAAP7////+//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8AVopkbiwbEIK2AAAAAAAUIUM0EggAAADtAwAA7QMAAAFWimQAAAYAAAABAAAEAAAAAgEAgCUAAAAACAAAAAAASwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABMAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAABDb3B5cmlnaHQgKGMpIDE5OTQgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAACACwAAAFJUaHJlc2hvbGQACQAAAEkKAAAAAQAAAAkAAABTZXR0aW5ncwATAAAASAAAAAAKAAAAOTYwMCxuAAAAAD8AAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACw4LDELAAAAU1RocmVzaG9sZAAJAAAASQoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA==</ole>
		<ole2>OLEObject = C:\Windows\system32\mscomm32.ocx
</ole2>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_29F0VSXC0</uniqueid>
		<timestamp>980181302</timestamp>
		<class>cmd</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd1</objname>
		<parent>frmpayment_old</parent>
		<properties>Top = 324
Left = 684
Height = 84
Width = 72
Enabled = .F.
ZOrderSet = 32
Name = "Cmd1"
</properties>
		<protected/>
		<methods>PROCEDURE Click
thisform.getcardinfo('742B4B7B1')
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>COMMENT</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>0</timestamp>
		<class/>
		<classloc/>
		<baseclass/>
		<objname>frmpayment_old</objname>
		<parent/>
		<properties>Arial, 0, 9, 5, 15, 12, 32, 3, 0
Arial, 1, 12, 8, 20, 15, 42, 4, 1
Arial, 0, 16, 9, 25, 19, 56, 5, 1
Arial, 0, 20, 12, 33, 26, 72, 6, 1
Arial, 1, 14, 9, 23, 18, 50, 4, 1
Arial, 1, 11, 7, 18, 14, 39, 4, 0
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2KA15DMRY</uniqueid>
		<timestamp>997231215</timestamp>
		<class>frm</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>form</baseclass>
		<objname>frmorddeliv</objname>
		<parent/>
		<properties>DataSession = 1
Height = 628
Width = 639
Desktop = .T.
ShowWindow = 1
DoCreate = .T.
AutoCenter = .T.
BorderStyle = 0
Caption = "Äåëåíèå çàêàçà íà 2"
ControlBox = .F.
Closable = .F.
MaxButton = .F.
MinButton = .F.
Movable = .T.
TitleBar = 1
WindowType = 1
AlwaysOnTop = .T.
uretval = .F.
noldvalue = 0
_memberdata =      221&lt;VFPData&gt;&lt;memberdata name="noldvalue" type="property" display="nOldValue"/&gt;&lt;memberdata name="lndisctvrid" type="property" display="lnDiscTvrID"/&gt;&lt;memberdata name="totalinfo" type="method" display="TotalInfo"/&gt;&lt;/VFPData&gt;

lndisctvrid = êîä òîâàðà - ñêèäêè
Name = "frmorddeliv"
cstmsghandler.Name = "cstmsghandler"
cstresizable.Name = "cstresizable"
Img1.Enabled = .F.
Img1.Name = "Img1"
</properties>
		<protected/>
		<methods>PROCEDURE _deliv
LOCAL lnQnt, ;
	  luResAdding, ;
	  lnFrmTypeID, ;
	  llResSaveOrd, ;
	  llResSavePos, ;
	  lNewFrmID, ;
	  lnDefClt,;
	  _PARAM 	

lnQnt = 0
lnDefClt = VAL(oRes.GetParam([RST],[DEFCLT]))

*--ïîñ÷èòàåì ïîçèöèè, ïîìå÷åííûå äëÿ ïåðåíîñà
SELECT lvOrderTvrView
COUNT ALL FOR lvOrderTvrView.mark TO lnQnt

IF lnQnt&lt;=0
	MESSAGEBOX([Íå ïîìå÷åíî íè îäíîé ïîçèöèè äëÿ ïåðåíîñà.],48,[Îêíî ñîîáùåíèé])
	RETURN .F.
ENDIF

IF MESSAGEBOX([Ïîìå÷åíî ]+STR(lnQnt,10,0)+[ ïîç.]+CHR(13)+[Ïåðåíåñòè ïîìå÷åííûå ïîçèöèè â íîâûé çàêàç?],36,[Îêíî ñîîáùåíèé]) = 7
	RETURN .F.
ENDIF
WAIT WINDOW [Ïåðåíîñèì ïîìå÷åííûå ïîçèöèè â íîâûé çàêàç ...] NOWAIT

*--ïåðåíåñåì ïîìå÷åííûå ïîçèöèè â íîâûé çàêàç
USE IN SELECT([lvFrmEdit1])
USE lvFrmEdit IN 0 ALIAS lvFrmEdit1 NODATA
CURSORSETPROP([BUFFERING],3,[lvFrmEdit1])

BEGIN TRANSACTION	
	*--ñôîðìèðóåì øàïêó íîâîãî çàêàçà	
	SELECT lvFrmEdit1
	APPEND BLANK
	REPL lvFrmEdit1.PointIspCltID WITH lnDefClt, ;
		 lvFrmEdit1.PointEmiCltID WITH lvFrmEdit.PointEmiCltID, ;
		 lvFrmEdit1.PointEmiOUID WITH lvFrmEdit.PointEmiOUID, ;
		 lvFrmEdit1.FrmTypeID WITH lvFrmEdit.FrmTypeID, ;
		 lvFrmEdit1.FrmDate WITH DATETIME(), ;
		 lvFrmEdit1.ID_ WITH 1, ;
		 lvFrmEdit1.FrmCurTypeID WITH 1, ;
		 lvFrmEdit1.FrmNum WITH spFrmAutoNum(lvFrmEdit.FrmTypeID,DATETIME(),lvFrmEdit.PointEmiOUID)
	
	*--ñîõðàíèì øàïêó	
	llResSaveOrd = thisform.cstDataWork.Save([lvFrmEdit1]) 		
	IF !llResSaveOrd
		*--Îòêàòûâàåì òðàíçàêöèþ
		ROLLBACK
		MESSAGEBOX([Â ïðîöåññå ñîõðàíåíèÿ ïðîèçîøëà îøèáêà. Èçìåíåíèÿ ñîõðàíåíû íå áóäóò.],48,[Îêíî ñîîáùåíèé])
		RETURN .F.
	ENDIF
	*--ïîëó÷èì FrmID íîâîãî çàêàçà
	lNewFrmID = spGetLastIncrementedID([lvFrmEdit1])
	
	*--ñôîðìèðóåì ïîçèöèè íîâîãî çàêàçà
	SELECT lvOrderTvrView
	SCAN FOR lvOrderTvrView.mark
	    _PARAM = lvOrderTvrView.FrmPartTvrID
		USE IN SELECT([lvOrderTvrEdit])
		USE lvOrderTvrEdit IN 0
		SELECT lvOrderTvrEdit
		REPLACE lvOrderTvrEdit.FrmID WITH lNewFrmID IN lvOrderTvrEdit
			
		llResSavePos = TABLEUPDATE(.T.)
		
		IF !llResSavePos
			*--Îòêàòûâàåì òðàíçàêöèþ
			ROLLBACK
			MESSAGEBOX([Â ïðîöåññå ñîõðàíåíèÿ ïðîèçîøëà îøèáêà. Èçìåíåíèÿ ñîõðàíåíû íå áóäóò.],48,[Îêíî ñîîáùåíèé])
			RETURN .F.
		ENDIF
		SELECT lvOrderTvrView
	ENDSCAN
	
*--Ïîäòâåðæäàåì òðàíçàêöèþ
END TRANSACTION
WAIT CLEAR
MESSAGEBOX([Ïîìå÷åííûå ïîçèöèè ïåðåíåñåíû â íîâûé çàêàç.],64,[Îêíî ñîîáùåíèé])

ENDPROC
PROCEDURE _handlecntcancelsaveevent
*-------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: RST_V1.VCX
* Class.Module....: FRMORDERADD._HANDLECNTCANCELSAVEEVENT
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;tcMessage&gt;
* Returns.........: &lt;none&gt;
* Notes...........: &lt;~&gt;
*-------------------------------------------------------
LPARAMETERS tcMessage

WITH This
	*--ñîõðàíèì/îòìåíèì èçìåíåíèÿ
	IF tcMessage = [OK]
			.uRetVal = ._deliv()
		ELSE
			.uRetVal = .f.
		ENDIF
		
	.Hide()

ENDWITH
************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************

ENDPROC
PROCEDURE _mark
IF !RECNO()&gt;RECCOUNT()
	REPLACE lvOrderTvrView.mark WITH !lvOrderTvrView.mark
	IF RECNO()=RECCOUNT()
		SKIP -1
		SKIP 1
	   ELSE
		SKIP 1
		SKIP -1
	ENDIF
	ThisForm.TotalInfo()
ENDIF

ENDPROC
PROCEDURE Activate
DODEFAULT()
**this.grdOrder.Refresh()
ENDPROC
PROCEDURE Init
LPARAMETERS nDiscTvrID
thisform.lnDiscTvrID = nDiscTvrID
this.grdOrder.column2.DynamicBackColor = 'IIF(lvOrderTvrView.mark,RGB(255,125,125),RGB(255,255,255))'
this.grdOrder.column3.DynamicBackColor = 'IIF(lvOrderTvrView.mark,RGB(255,125,125),RGB(255,255,255))'
this.grdOrder.column4.DynamicBackColor = 'IIF(lvOrderTvrView.mark,RGB(255,125,125),RGB(255,255,255))'
this.grdOrder.column5.DynamicBackColor = 'IIF(lvOrderTvrView.mark,RGB(255,125,125),RGB(255,255,255))'
SELECT lvOrderTvrView
GO TOP

ENDPROC
PROCEDURE totalinfo
SELECT lvOrderTvrView
LOCAL nOrderSumMark,nOrderSum,cTotal,nCountMark,nCount
STORE 0.00 TO nOrderSumMark,nOrderSum
STORE 0 TO nCountMark,nCount
SET DELETED ON
SELECT COUNT(*) as Qnt,SUM(ROUND(lvOrderTvrView.TvrQnt*lvOrderTvrView.TvrPrcSale,2)) as SumOrd ;
FROM lvOrderTvrView WHERE !BITTEST(lvOrderTvrView.TvrAttr,4) AND lvOrderTvrView.TvrId &lt;&gt; this.lnDiscTvrID ;
			AND lvOrderTvrView.Mark INTO CURSOR tmpOrder
nOrderSumMark = tmpOrder.SumOrd
nCountMark  =  tmpOrder.Qnt
USE IN tmpOrder
SELECT COUNT(*) as Qnt,SUM(ROUND(lvOrderTvrView.TvrQnt*lvOrderTvrView.TvrPrcSale,2)) as SumOrd ;
FROM lvOrderTvrView WHERE !BITTEST(lvOrderTvrView.TvrAttr,4) AND lvOrderTvrView.TvrId &lt;&gt; this.lnDiscTvrID ;
INTO CURSOR tmpOrder
nOrderSum = tmpOrder.SumOrd
nCount  =  tmpOrder.Qnt
cTotal = 	'Ïîìå÷åíî '+ALLTRIM(STR(nCountMark,10,0))+' çàïèñåé èç '+ALLTRIM(STR(nCount,10,0))+'.'+CHR(13)+;
			'Íà ñóììó '+ALLTRIM(STR(nOrderSumMark,10,2))+' èç '+ALLTRIM(STR(nOrderSum,10,2))+'.'
USE IN tmpOrder
SELECT lvOrderTvrView
this.lblTotalQnt.Caption = 'Ïîìå÷åíî '+ALLTRIM(STR(nCountMark,10,0))+' çàïèñåé èç '+ALLTRIM(STR(nCount,10,0))+'.'
this.lblTotalSum.Caption = 'Íà ñóììó '+ALLTRIM(STR(nOrderSumMark,10,2))+' èç '+ALLTRIM(STR(nOrderSum,10,2))+'.'

ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1>Class</reserved1>
		<reserved2>19</reserved2>
		<reserved3>uretval Âîçâðàùûåìîå çíà÷åíèå
noldvalue Ñòàðîå çíà÷åíèå
_memberdata XML Metadata for customizable properties
lndisctvrid
*_handlecntcancelsaveevent 
*_deliv Äåëèì çàêàç íà äâà
*totalinfo Èòîãè ïî ïîìå÷åíûì çàïèñÿì
*_mark 
</reserved3>
		<reserved4/>
		<reserved5/>
		<reserved6>Pixels</reserved6>
		<reserved7>Äåëåíèå çàêàçà íà 2</reserved7>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2SI10UZNV</uniqueid>
		<timestamp>997089129</timestamp>
		<class>grd</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>grid</baseclass>
		<objname>GrdOrder</objname>
		<parent>frmorddeliv</parent>
		<properties>ColumnCount = 4
FontSize = 8
Anchor = 0
HeaderHeight = 17
Height = 576
Left = 0
Panel = 1
PanelLink = .F.
RecordMark = .F.
RecordSource = "lvOrderTvrView"
RowHeight = 35
ScrollBars = 0
Top = 0
Width = 640
ForeColor = 0,0,160
GridLineColor = 0,0,160
ZOrderSet = 11
AllowAutoColumnFit = 2
_activerowhighlight = .T.
_activerowhighlightcoloractive = RGB(239,228,250)
_activerowhighlightcolorunactive = RGB(255,255,255)
Name = "GrdOrder"
Column1.FontSize = 24
Column1.ColumnOrder = 1
Column1.ControlSource = "lvOrderTvrView.TvrNM"
Column1.Width = 345
Column1.ReadOnly = .T.
Column1.DynamicBackColor = "IIF(!lvOrderTvrView.mark,RGB(255,125,125),RGB(255,255,255))"
Column1.ForeColor = 0,0,160
Column1.Name = "Column2"
Column2.FontBold = .T.
Column2.FontSize = 24
Column2.ColumnOrder = 2
Column2.ControlSource = "lvOrderTvrView.TvrQnt"
Column2.Width = 73
Column2.ReadOnly = .T.
Column2.Sparse = .F.
Column2.DynamicBackColor = "IIF(lvOrderTvrView.mark,RGB(255,125,125),RGB(255,255,255))"
Column2.ForeColor = 0,0,160
Column2.Name = "Column3"
Column3.FontSize = 24
Column3.ColumnOrder = 4
Column3.ControlSource = "lvOrderTvrView.TvrPrcSale"
Column3.Width = 118
Column3.ReadOnly = .T.
Column3.DynamicBackColor = "IIF(lvOrderTvrView.mark,RGB(255,125,125),RGB(255,255,255))"
Column3.Format = "R"
Column3.InputMask = "999999.99"
Column3.ForeColor = 0,0,160
Column3.Name = "Column4"
Column4.FontSize = 24
Column4.ColumnOrder = 3
Column4.ControlSource = "lvOrderTvrView.TvrSum"
Column4.Width = 103
Column4.ReadOnly = .T.
Column4.DynamicBackColor = "IIF(lvOrderTvrView.mark,RGB(255,125,125),RGB(255,255,255))"
Column4.Format = "R"
Column4.InputMask = "999999.99"
Column4.ForeColor = 0,0,160
Column4.Name = "Column5"
</properties>
		<protected/>
		<methods>PROCEDURE _refreshrelatedobjects
SET FILTER TO TvrId&lt;&gt;thisform.lnDiscTvrID IN lvOrderTvrView

ENDPROC
PROCEDURE AfterRowColChange
LPARAMETERS tnColIndex
NODEFAULT
ENDPROC
PROCEDURE Init
DODEFAULT()
RETURN
*this.column2.DynamicBackColor = [IIF(BITTEST(lvOrderTvrView.TvrAttr,0),RGB(252,174,12),IIF(BITTEST(lvOrderTvrView.TvrAttr,1),RGB(252,242,218),RGB(255,255,255)))]
This.SetAll([DynamicBackColor],[IIF(BITTEST(lvOrderTvrView.TvrAttr,0),RGB(252,174,12),IIF(BITTEST(lvOrderTvrView.TvrAttr,1),RGB(252,242,218),RGB(255,255,255)))],[COLUMN])
								

ENDPROC
PROCEDURE refreshhandledhotkey
NODEFAULT
ENDPROC
PROCEDURE refreshrsstate
NODEFAULT
ENDPROC
PROCEDURE refreshruntimeprops
LPARAMETERS tlForceRefresh
NODEFAULT
ENDPROC
PROCEDURE RightClick
NODEFAULT
ENDPROC
PROCEDURE SetFocus
DODEFAULT()
**SET FILTER TO TvrId&lt;&gt;thisform.lnDiscTvrID IN lvOrderTvrView

ENDPROC
PROCEDURE sourcekeep
NODEFAULT
ENDPROC
PROCEDURE sourcerecall
NODEFAULT
ENDPROC
PROCEDURE sourcereset
NODEFAULT
ENDPROC
PROCEDURE When
NODEFAULT
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2SI10UZO8</uniqueid>
		<timestamp>996903397</timestamp>
		<class>header</class>
		<classloc/>
		<baseclass>header</baseclass>
		<objname>Header1</objname>
		<parent>frmorddeliv.GrdOrder.Column2</parent>
		<properties>FontSize = 8
Caption = "Íàçâàíèå"
Name = "Header1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2SI10UZO9</uniqueid>
		<timestamp>997089129</timestamp>
		<class>textbox</class>
		<classloc/>
		<baseclass>textbox</baseclass>
		<objname>Text1</objname>
		<parent>frmorddeliv.GrdOrder.Column2</parent>
		<properties>FontSize = 24
BorderStyle = 0
Margin = 0
ReadOnly = .T.
ForeColor = 0,0,160
BackColor = 255,255,255
Name = "Text1"
</properties>
		<protected/>
		<methods>PROCEDURE Click
thisform._mark()
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2SI10UZOB</uniqueid>
		<timestamp>996903397</timestamp>
		<class>header</class>
		<classloc/>
		<baseclass>header</baseclass>
		<objname>Header1</objname>
		<parent>frmorddeliv.GrdOrder.Column3</parent>
		<properties>FontSize = 8
Caption = "Êîëè÷åñòâî"
Name = "Header1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2SI10UZOC</uniqueid>
		<timestamp>997089129</timestamp>
		<class>txtcalctype</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>Txt1</objname>
		<parent>frmorddeliv.GrdOrder.Column3</parent>
		<properties>FontBold = .T.
FontSize = 24
Format = "R"
InputMask = "999999.99"
Left = 22
ReadOnly = .T.
Top = 10
ForeColor = 0,0,160
_highlightself = .F.
Name = "Txt1"
</properties>
		<protected/>
		<methods>PROCEDURE _handleanychange
DODEFAULT()
RETURN
USE IN SELECT([lvOrderTvrEdit])
_PARAM = lvOrderTvrView.FrmPartTvrID
USE lvOrderTvrEdit IN 0

REPLACE lvOrderTvrEdit.TvrQnt WITH this.value IN lvOrderTvrEdit
TABLEUPDATE(1,.T.,[lvOrderTvrEdit])

REPLACE lvOrderTvrView.TvrSum WITH ROUND(lvOrderTvrView.TvrPrcSale*this.value,2)
ThisForm.grdOrder._RefreshRelatedObjects()
ENDPROC
PROCEDURE Click
thisform._mark()
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2SI10UZOH</uniqueid>
		<timestamp>996903397</timestamp>
		<class>header</class>
		<classloc/>
		<baseclass>header</baseclass>
		<objname>Header1</objname>
		<parent>frmorddeliv.GrdOrder.Column4</parent>
		<properties>FontSize = 8
Caption = "Öåíà"
Name = "Header1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2SI10UZOI</uniqueid>
		<timestamp>997089129</timestamp>
		<class>textbox</class>
		<classloc/>
		<baseclass>textbox</baseclass>
		<objname>Text1</objname>
		<parent>frmorddeliv.GrdOrder.Column4</parent>
		<properties>FontSize = 24
BorderStyle = 0
Margin = 0
ReadOnly = .T.
ForeColor = 0,0,160
BackColor = 255,255,255
Name = "Text1"
</properties>
		<protected/>
		<methods>PROCEDURE Click
thisform._mark()
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2SI10UZOJ</uniqueid>
		<timestamp>996903397</timestamp>
		<class>header</class>
		<classloc/>
		<baseclass>header</baseclass>
		<objname>Header1</objname>
		<parent>frmorddeliv.GrdOrder.Column5</parent>
		<properties>FontSize = 8
Caption = "Ñóììà"
Name = "Header1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2SI10UZOK</uniqueid>
		<timestamp>997089129</timestamp>
		<class>textbox</class>
		<classloc/>
		<baseclass>textbox</baseclass>
		<objname>Text1</objname>
		<parent>frmorddeliv.GrdOrder.Column5</parent>
		<properties>FontSize = 24
BorderStyle = 0
Margin = 0
ReadOnly = .T.
ForeColor = 0,0,160
BackColor = 255,255,255
Name = "Text1"
</properties>
		<protected/>
		<methods>PROCEDURE Click
thisform._mark()
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2SK138SS6</uniqueid>
		<timestamp>997231215</timestamp>
		<class>cntcancelsavehandled</class>
		<classloc>baseform_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>Cntcancelsavehandled1</objname>
		<parent>frmorddeliv</parent>
		<properties>Top = 576
Left = 542
Width = 98
Height = 53
Name = "Cntcancelsavehandled1"
cmdCancel.Top = 0
cmdCancel.Left = 0
cmdCancel.Height = 52
cmdCancel.Width = 48
cmdCancel.PicturePosition = 10
cmdCancel.PictureMargin = 0
cmdCancel.PictureSpacing = 0
cmdCancel.Name = "cmdCancel"
cmdOk.Left = 49
cmdOk.Height = 52
cmdOk.Width = 48
cmdOk.PicturePosition = 10
cmdOk.PictureMargin = 0
cmdOk.PictureSpacing = 0
cmdOk.Name = "cmdOk"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2SL0K4FJ6</uniqueid>
		<timestamp>997231215</timestamp>
		<class>grd</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>grid</baseclass>
		<objname>Grd1</objname>
		<parent>frmorddeliv</parent>
		<properties>ColumnCount = 1
Enabled = .F.
Height = 36
Left = 96
Top = 590
Visible = .F.
Width = 48
Name = "Grd1"
Column1.ControlSource = ""
Column1.Enabled = .F.
Column1.Visible = .F.
Column1.Name = "Column1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2SL0K4FJC</uniqueid>
		<timestamp>997083882</timestamp>
		<class>header</class>
		<classloc/>
		<baseclass>header</baseclass>
		<objname>Header1</objname>
		<parent>frmorddeliv.Grd1.Column1</parent>
		<properties>Caption = "Header1"
Name = "Header1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2SL0K4FJD</uniqueid>
		<timestamp>997231215</timestamp>
		<class>textbox</class>
		<classloc/>
		<baseclass>textbox</baseclass>
		<objname>Text1</objname>
		<parent>frmorddeliv.Grd1.Column1</parent>
		<properties>BorderStyle = 0
Enabled = .F.
Margin = 0
Visible = .F.
ForeColor = 0,0,0
BackColor = 255,255,255
Name = "Text1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2SI10Z7F4</uniqueid>
		<timestamp>997103017</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd22</objname>
		<parent>frmorddeliv</parent>
		<properties>Top = 576
Left = 0
Height = 52
Width = 48
Picture = ..\imgico\aw\ico\403-up.ico
PicturePosition = 12
BackColor = 162,162,162
ZOrderSet = 7
Name = "Cmd22"
</properties>
		<protected/>
		<methods>PROCEDURE Click
*this.parent.grdOrder.DoScroll(2)
this.parent.grdOrder.SetFocus()
KEYBOARD '{PGUP}'


ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2SL0MGNB5</uniqueid>
		<timestamp>997086105</timestamp>
		<class>cstdatawork</class>
		<classloc>datawork_v1.vcx</classloc>
		<baseclass>custom</baseclass>
		<objname>Cstdatawork</objname>
		<parent>frmorddeliv</parent>
		<properties>Top = 576
Left = 120
Name = "Cstdatawork"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2SI10Z7F6</uniqueid>
		<timestamp>997103017</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd23</objname>
		<parent>frmorddeliv</parent>
		<properties>Top = 576
Left = 48
Height = 52
Width = 48
Picture = ..\imgico\aw\ico\401-down.ico
BackColor = 162,162,162
ZOrderSet = 8
Themes = .F.
Name = "Cmd23"
</properties>
		<protected/>
		<methods>PROCEDURE Click
*this.parent.grdOrder.DoScroll(3)
this.parent.grdOrder.SetFocus()
KEYBOARD '{PGDN}'


ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1RY0N4UD0</uniqueid>
		<timestamp>997231215</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblTotalQnt</objname>
		<parent>frmorddeliv</parent>
		<properties>AutoSize = .F.
FontBold = .T.
FontSize = 14
Caption = ""
Height = 25
Left = 148
Top = 577
Width = 380
Name = "lblTotalQnt"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2SL0ONBQ4</uniqueid>
		<timestamp>997231215</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblTotalSum</objname>
		<parent>frmorddeliv</parent>
		<properties>AutoSize = .F.
FontBold = .T.
FontSize = 14
Caption = ""
Height = 25
Left = 148
Top = 604
Width = 380
Name = "lblTotalSum"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>COMMENT</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>0</timestamp>
		<class/>
		<classloc/>
		<baseclass/>
		<objname>frmorddeliv</objname>
		<parent/>
		<properties>Arial, 0, 9, 5, 15, 12, 32, 3, 0
Arial, 0, 8, 5, 14, 11, 29, 3, 0
Arial, 0, 24, 14, 37, 29, 85, 7, 1
Arial, 1, 24, 15, 38, 30, 84, 7, 1
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2CK18FOY9</uniqueid>
		<timestamp>997487357</timestamp>
		<class>cnttuch</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>cntorddetail</objname>
		<parent/>
		<properties>Width = 192
Height = 468
_memberdata =       83&lt;VFPData&gt;&lt;memberdata name="_freeprc" type="method" display="_FreePrc"/&gt;&lt;/VFPData&gt;

Name = "cntorddetail"
Cmd11.Enabled = .F.
Cmd11.Visible = .F.
Cmd11.ZOrderSet = 0
Cmd11.Name = "Cmd11"
Cmd12.Enabled = .F.
Cmd12.Visible = .F.
Cmd12.ZOrderSet = 1
Cmd12.Name = "Cmd12"
LBL11.Name = "LBL11"
</properties>
		<protected/>
		<methods>PROCEDURE _add
*-------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: rst_v1.vcx
* Class.Module....: grdOrder._Add
* Called by.......: &lt;&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Äîáàâëåíèå áëþäà â çàêàç
*-------------------------------------------------------
LPARAMETERS tnTvrID, tnPrice, tnQnt
*09.08.2005 16:46 -&gt; Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	luAddRes, ;
		laAddRec[1], ;
		_PARAM, ;
		lnMsuID, ;
		lnPrice, ;
		lnRes, ;
		lCountScroll,;
		nQnt
*------------------------------------------------------------------------------

*09.08.2005 16:47 -&gt; Îáðàáîòàåì ðåçóëüòàòû äîáàâëåíèÿ
IF TYPE([tnTvrID])==[N] AND !EMPTY(tnTvrID)
	
	WITH This
			*09.08.2005 16:47 -&gt; Çàáëîêèðóåì îáíîâëåíèå RunTime ñâîéñòâ Grid-à
		*------------------------------------------------------------------------------
		*** - 09.04.2009 09:20:20 Ãëóõîâ Â.Þ. (C) - &gt;
		*--íàéäåì öåíó áëþäà, êîëè÷åñòâî
		IF INLIST(TYPE([tnPrice]),[N],[Y])
			lnPrice = tnPrice
		ELSE
				lnPrice = lvTmpTvrInSet.Price	
		ENDIF

		IF INLIST(TYPE([tnQnt]),[N],[Y])
			nQnt = tnQnt
		ELSE
			nQnt = 1
		ENDIF
		
		*--Ïîëó÷èì èíôîðìàöèþ î åäèíèöàõ èçìåðåíèÿ
			lnMsuID = lvTmpTvrInSet.MsuID
		***
		*--Äîáàâèì ïîçèöèþ
		USE IN SELECT([lvOrderTvrEdit])
		USE lvOrderTvrEdit IN 0 NODATA
		APPEND BLANK IN lvOrderTvrEdit
		REPLACE ;
			FrmID WITH ThisForm.nFrmID, ;
			TvrId WITH tnTvrID, ;
			MsuId WITH lnMsuID, ;
			TvrQnt WITH nQnt, ;
			TvrPrcSale WITH lnPrice ;
		IN lvOrderTvrEdit
		llResult = TABLEUPDATE(1,.T.,[lvOrderTvrEdit])
		*------------------------------------------------------------------------------
		
		IF llResult
			.grdOrder._RSRequeryOne(spGetLastIncrementedID([lvOrderTvrEdit]),[ADD])
		ENDIF
		*-------------------------------------------------------------------------------


		*09.08.2009 16:48 -&gt; Âûçîâåì ìåòîä ïðèíóäèòåëüíîãî îáíîâëåíèÿ RunTime ñâîéñòâ
		GO BOTTOM in lvOrderTvrView
		.grdOrder.nrsrecno = RECNO('lvOrderTvrView')
		.grdOrder._refreshrelatedobjects()
		IF RECCOUNT()&lt;17
		.grdOrder.DoScroll(2)
		else
		.grdOrder.DoScroll(0)
		ENDIF
	ENDWITH
		
ENDIF
*------------------------------------------------------------------------------

************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************

ENDPROC
PROCEDURE _dele
LOCAL _PARAM , ofrmRsn,lresult , lnDiscRate
	*--îïðåäåëèì ïðè÷èíó îòêàçà îò áëþäà
	lnDiscRate = ThisForm.nDiscRate
WITH This
	.grdOrder.nrsrecno = RECNO('lvOrderTvrView')
	USE IN SELECT([lvOrderTvrEdit])
	_PARAM = lvOrderTvrView.FrmPartTvrID
	USE lvOrderTvrEdit IN 0
	IF (BITTEST(lvOrderTvrView.TvrAttr,0) OR BITTEST(lvOrderTvrView.TvrAttr,1)) &amp;&amp; åñëè óæå ïå÷àòàëè ìàðêó èëè ïðåä÷åê
		IF 	!thisform.lDelPosition
			MESSAGEBOX([Ó Âàñ íåò ïðàâ äëÿ óäàëåíèÿ ýòîé ïîçèöèè.],48,[Ïðèãëàñèòå àäìèíèñòðàòîðà])
		ENDIF
		ofrmRsn= NewObject([FrmCancelReason],[rst_v1.vcx])
		PUBLIC pcReason
		ofrmRsn.Show(1)
		lnRsn = ofrmRsn.uretval
		ofrmRsn= .null.
		IF VARTYPE(lnRsn)&lt;&gt;'N'
			RETURN
		ENDIF
		USE IN SELECT([lvTvrCncRsnEdit])
		_PARAM = lvOrderTvrView.FrmPartTvrID
		USE lvTvrCncRsnEdit IN 0
			IF RECCOUNT([lvTvrCncRsnEdit]) = 0
				SELECT lvTvrCncRsnEdit
				APPEND BLANK
			ENDIF
			REPL lvTvrCncRsnEdit.FrmPartTvrCncRsnID WITH _PARAM, ;
				 lvTvrCncRsnEdit.CancelReasonID WITH lnRsn
			IF !TABLEUPDATE(1,.T.,[lvTvrCncRsnEdit])		
				MESSAGEBOX([Îøèáêà ïðè îáíîâëåíèè â òàáëèöå FrmPartTvrCncRsn.],48,[Îêíî ñîîáùåíèé])
				TABLEREVERT(.T.)
				RETURN .F.
			ENDIF
			*--óñòàíîâèì ïðèçíàê óäàëåíèÿ ìåíåäæåðîì ïîìå÷åííûõ çàïèñåé
			REPLACE lvOrderTvrEdit.TvrAttr WITH BITSET(lvOrderTvrEdit.TvrAttr,4) IN lvOrderTvrEdit
			REPLACE lvOrderTvrEdit.FrmPartTvrNote WITH pcReason IN lvOrderTvrEdit
			lresult = TABLEUPDATE(1,.T.,[lvOrderTvrEdit])
			*** - 21.04.2009 13:31:18 Ãëóõîâ Â.Þ. (C) - &gt;
			thisform._printmarka(lvOrderTvrView.FrmPartTvrID)
			**._print_dele(lvOrderTvrView.FrmPartTvrID)
			DELETE NEXT 1 IN lvOrderTvrView
			RELEASE pcReason
		ELSE
			IF MESSAGEBOX('Óäàëèòü ýòó ïîçèöèþ èç ñ÷åòà?',4+64+256,'Óäàëåíèå ïîçèöèè')&lt;&gt;6
				RETURN
			ENDIF
			DELETE NEXT 1 IN lvOrderTvrEdit
			TABLEUPDATE(1,.T.,[lvOrderTvrEdit])
			DELETE NEXT 1 IN lvOrderTvrView
	ENDIF
	.grdOrder._refreshrelatedobjects()
	lresult = spDiscRecount(ThisForm.nfrmid , ThisForm.nDiscRate ,null,null)
	IF lresult
		ThisForm.cntORDDETAIL.cntDisc.lblSumm.Caption = ALLTRIM(STR(ABS(lvTmpDiscTvr.TvrPrcSale),10,2))
		ThisForm.cntORDDETAIL.cntGuest.lblInfo.Caption= ALLTRIM(lvTmpDiscTvr.FrmPartTvrNote)
		thisform.nDiscRate = lvTmpDiscTvr.nOwnerID    &amp;&amp;TvrAttr
	ELSE
		ThisForm.nDiscRate = 0
		ThisForm.cntORDDETAIL.cntDisc.lblSumm.Caption = '0.00'
		ThisForm.cntORDDETAIL.cntGuest.lblInfo.Caption= 'êëèåíò:Ãîñòü'
	ENDIF
	ThisForm.nDiscRate  = lnDiscRate
ENDWITH

ENDPROC
PROCEDURE _dele_order
	IF MESSAGEBOX('Óäàëèòü âåñü çàêàç Ãîñòÿ?',4+64+256,'Óäàëåíèå âñåãî çàêàçà')&lt;&gt;6
		RETURN
	ENDIF
REPLACE FrmAttribute WITH BITSET(FrmAttribute,30) IN lvFrmEdit
lRes = TABLEUPDATE(1,.T.,[lvFrmEdit])
IF lRes
thisform._closeThis()
ENDIF

ENDPROC
PROCEDURE _deliv
LOCAL	luResultAdding, _PARAM ,nTvrQnt,ofrmcalcpad ,lRec
SELECT lvOrderTvrView
lRec = RECNO()
*!*	LOCATE ALL FOR BITTEST(lvOrderTvrView.TvrAttr,0) OR BITTEST(lvOrderTvrView.TvrAttr,1) &amp;&amp; åñëè óæå ïå÷àòàëè ìàðêó èëè ïðåä÷åê
*!*	IF FOUND()
*!*	GO lRec
*!*	RETURN
*!*	ENDIF
*!*	GO lRec
*29.11.2004 17:36 -&gt;Âûïîëíèì îïåðàöèþ ñîçäàíèÿ íîâîé ôîðìû
***luResultAdding = oApp.DoModalFormRetValObj([frmcalcpad;rst_v1.vcx],nTvrQnt)
ofrmDeliv = NewObject([frmorddeliv],[rst_v1.vcx],null,thisform.lnDiscTvrID)
ofrmDeliv.grdOrder.SetFocus()
ofrmDeliv.Show(1)
luResultAdding = ofrmDeliv.uretval
ofrmDeliv = .null.
*------------------------------------------------------------------------------
	IF ISNULL(luResultAdding)
		this.grdOrder.SetFocus()
		RETURN
	ENDIF
This.grdOrder._RSRequery()
this.grdOrder._refreshrelatedobjects()

RETURN

	

ENDPROC
PROCEDURE _freeprc
LOCAL	luResultAdding, _PARAM ,nNewPrc,ofrmcalcpad
IF BITTEST(lvOrderTvrView.TvrAttr,1) &amp;&amp; åñëè óæå ïå÷àòàëè ìàðêó èëè ïðåä÷åê
RETURN
ENDIF
nNewPrc = lvOrderTvrView.TvrPrcSale
*29.11.2004 17:36 -&gt;Âûïîëíèì îïåðàöèþ ñîçäàíèÿ íîâîé ôîðìû
***luResultAdding = oApp.DoModalFormRetValObj([frmcalcpad;rst_v1.vcx],nTvrQnt)
ofrmcalcpad = NewObject([frmcalcpad],[rst_v1.vcx],.null.,nNewPrc,'Íîâàÿ öåíà')
ofrmcalcpad.Show(1)
luResultAdding = ofrmcalcpad.uretval
ofrmcalcpad = .null.
*------------------------------------------------------------------------------
	IF ISNULL(luResultAdding)
		this.grdOrder.SetFocus()
		RETURN
	ENDIF

REPLACE ;
			TvrPrcSale WITH luResultAdding , TvrSum WITH luResultAdding * TvrQnt;
		IN lvOrderTvrView
_PARAM = lvOrderTvrView.FrmPartTvrID
this.grdOrder.nrsrecno = RECNO('lvOrderTvrView')

USE IN SELECT([lvOrderTvrEdit])
USE lvOrderTvrEdit IN 0
REPLACE ;
	TvrPrcSale WITH luResultAdding ;
IN lvOrderTvrEdit
llResult = TABLEUPDATE(1,.T.,[lvOrderTvrEdit])
USE IN SELECT([lvOrderTvrEdit])
this.grdOrder._refreshrelatedobjects()

ENDPROC
PROCEDURE _half
LOCAL _PARAM ,nTvrQnt,  nMsuId,  nTvrQntNetto,  nTvrAttr,  nTvrPrcSale
IF (BITTEST(lvOrderTvrView.TvrAttr,0) OR BITTEST(lvOrderTvrView.TvrAttr,1)) &amp;&amp; åñëè óæå ïå÷àòàëè ìàðêó èëè ïðåä÷åê
RETURN
ENDIF
	IF MESSAGEBOX('Ðàçäåëèòü êîëè÷åñòâî ïîïîëàì?',4+64+256,'Äåëåíèå êîëè÷åñòâà')&lt;&gt;6
		RETURN
	ENDIF
nTvrQnt 		= lvOrderTvrView.TvrQnt
nMsuId 			= lvOrderTvrView.MsuId
nTvrQntNetto 	= lvOrderTvrView.TvrQntNetto
nTvrAttr 		= lvOrderTvrView.TvrAttr
nTvrPrcSale 	= lvOrderTvrView.TvrPrcSale
REPLACE ;
			TvrQnt WITH  nTvrQnt/2 , TvrSum WITH TvrPrcSale *  nTvrQnt/2 ;
		IN lvOrderTvrView

_PARAM = lvOrderTvrView.FrmPartTvrID
this.grdOrder.nrsrecno = RECNO('lvOrderTvrView')

USE IN SELECT([lvOrderTvrEdit])
USE lvOrderTvrEdit IN 0
REPLACE ;
	TvrQnt WITH nTvrQnt/2 ;
IN lvOrderTvrEdit
llResult = TABLEUPDATE(1,.T.,[lvOrderTvrEdit])
USE IN SELECT([lvOrderTvrEdit])
this.grdOrder._refreshrelatedobjects()


ENDPROC
PROCEDURE _print_dele
LPARAMETERS lFrmPartTvrID
*** - 22.03.2009 13:38:14 Ãëóõîâ Â.Þ. (C) - Ïðàâà ïðèíàäëåæàò
IF MESSAGEBOX([Îòïðàâèòü ñïèñîê îòìåíû íà ñåðâèñ-ïðèíòåð?],36,[Îêíî ñîîáùåíèé]) = 7
	RETURN .F.
ENDIF
	*--ñôîðìèðóåì äàííûå äëÿ ñïèñêà îòìåíû íà ñåðâèñíûé ïðèíòåð
	USE IN SELECT([lvCancelPrintView])
	_PARAM1 = lvFrmEdit.FrmID
	_PARAM2 = thisform.nCashNo
	**USE lvSPrintView IN 0 ALIAS lvCancelPrintView
	USE lvCancelPrintView IN 0
	SELECT * ;
	FROM lvCancelPrintView ;
	WHERE lvCancelPrintView.FrmPartTvrID = lFrmPartTvrID;
	INTO CURSOR curcancel NOFILTER

	*--ðàñïå÷àòàåì íà ñåðâèñ-ïðèíòåðå
	USE IN SELECT([curPrint])
	SELECT curcancel.DeviceID, ;
			curcancel.DeviceINI ;
		FROM curcancel ;
		GROUP BY DeviceID ;
		INTO CURSOR curPrint NOFILTER
		
	SELECT curPrint
	SCAN ALL
		LOCAL lcPrinter
	 	lcPrinter = ALLTRIM(curPrint.DeviceINI)
	 	IF lcPrinter = [DEFAULT]
					SET PRINTER TO DEFAULT
			ELSE
					SET PRINTER TO NAME ALLTRIM(lcPrinter)
	 	ENDIF
		SELECT curcancel
		PRINTJOB
			REPORT FORM REPORTS\serv_print_cancel.frx FOR curcancel.DeviceID = curPrint.DeviceID TO PRINTER
		ENDPRINTJOB
		SELECT curPrint
	ENDSCAN	
	USE IN SELECT([lvCancelPrintView])
	USE IN SELECT([curPrint])
	**USE IN SELECT([lvSPrintView])

	*-- Ïðîâåðÿåì âûêëþ÷åíèå áèëüÿðäíûõ ñòîëîâ
**	thisForm.tblOff()

ENDPROC
PROCEDURE _qnt
LOCAL	luResultAdding, _PARAM ,nTvrQnt,ofrmcalcpad
IF (BITTEST(lvOrderTvrView.TvrAttr,0) OR BITTEST(lvOrderTvrView.TvrAttr,1)) &amp;&amp; åñëè óæå ïå÷àòàëè ìàðêó èëè ïðåä÷åê
RETURN
ENDIF
nTvrQnt = lvOrderTvrView.TvrQnt
*29.11.2004 17:36 -&gt;Âûïîëíèì îïåðàöèþ ñîçäàíèÿ íîâîé ôîðìû
***luResultAdding = oApp.DoModalFormRetValObj([frmcalcpad;rst_v1.vcx],nTvrQnt)
ofrmcalcpad = NewObject([frmcalcpad],[rst_v1.vcx],null,nTvrQnt,'Íîâîå êîëè÷åñòâî','99999999.999')
ofrmcalcpad.Show(1)
luResultAdding = ofrmcalcpad.uretval
ofrmcalcpad = .null.
*------------------------------------------------------------------------------
	IF ISNULL(luResultAdding)
		this.grdOrder.SetFocus()
		RETURN
	ENDIF

REPLACE ;
			TvrQnt WITH luResultAdding  , TvrSum WITH TvrPrcSale * luResultAdding  ;
		IN lvOrderTvrView
_PARAM = lvOrderTvrView.FrmPartTvrID
this.grdOrder.nrsrecno = RECNO('lvOrderTvrView')

USE IN SELECT([lvOrderTvrEdit])
USE lvOrderTvrEdit IN 0
REPLACE ;
	TvrQnt WITH luResultAdding ;
IN lvOrderTvrEdit
llResult = TABLEUPDATE(1,.T.,[lvOrderTvrEdit])
USE IN SELECT([lvOrderTvrEdit])
this.grdOrder._refreshrelatedobjects()

ENDPROC
PROCEDURE _qnt_gst
LOCAL	luResultAdding, nGstQnt, lRes
nGstQnt = lvFrmEdit.Id_
*29.11.2004 17:36 -&gt;Âûïîëíèì îïåðàöèþ ñîçäàíèÿ íîâîé ôîðìû
***luResultAdding = oApp.DoModalFormRetValObj([frmcalcpad;rst_v1.vcx],nTvrQnt)
ofrmcalcpad = NewObject([frmcalcpad],[rst_v1.vcx],.null.,nGstQnt,'Êîëè÷åñòâî Ãîñòåé','999999999999')
ofrmcalcpad.Show(1)
luResultAdding = ofrmcalcpad.uretval
ofrmcalcpad = .null.
*------------------------------------------------------------------------------
	IF ISNULL(luResultAdding)
		this.grdOrder.SetFocus()
		RETURN
	ENDIF

REPLACE ;
			Id_ WITH luResultAdding ;
		IN lvFrmEdit
lRes = TABLEUPDATE(1,.T.,[lvFrmEdit])
IF lRes
this.cntGuest.lblSumm.Caption= ALLTRIM(STR(lvFrmEdit.Id_,10,0))
ENDIF

ENDPROC
PROCEDURE _repe
LOCAL _PARAM ,nTvrQnt,  nMsuId,  nTvrQntNetto,  nTvrAttr,  nTvrPrcSale
	IF MESSAGEBOX('Ïîâòîðèòü ýòó ïîçèöèþ â ñ÷åòå?',4+64+256,'Äîáàâëåíèå ïîõîæåé ïîçèöèè')&lt;&gt;6
		RETURN
	ENDIF
*this.grdOrder.SetFocus()
nTvrQnt 		= lvOrderTvrView.TvrQnt
nMsuId 			= lvOrderTvrView.MsuId
nTvrQntNetto 	= lvOrderTvrView.TvrQntNetto
nTvrAttr 		= lvOrderTvrView.TvrAttr
nTvrPrcSale 	= lvOrderTvrView.TvrPrcSale

this._add(lvOrderTvrView.TvrId,nTvrPrcSale,nTvrQnt)
*SELECT lvOrderTvrView
GO BOTTOM in lvOrderTvrView
		REPLACE ;
			MsuId WITH nMsuId , ;
			TvrQnt WITH nTvrQnt , ;
			TvrPrcSale WITH nTvrPrcSale ;
		IN lvOrderTvrView

	*!*		_PARAM = lvOrderTvrView.FrmPartTvrID
	*!*		USE IN SELECT([lvOrderTvrEdit])
	*!*		USE lvOrderTvrEdit IN 0
	*!*		REPLACE ;
	*!*			MsuId WITH nMsuId , ;
	*!*			TvrQnt WITH nTvrQnt , ;
	*!*			TvrPrcSale WITH nTvrPrcSale ;
	*!*		IN lvOrderTvrEdit
	*!*		llResult = TABLEUPDATE(1,.T.,[lvOrderTvrEdit])
	*!*		USE IN SELECT([lvOrderTvrEdit])

GO BOTTOM in lvOrderTvrView
this.grdOrder.nrsrecno = RECNO('lvOrderTvrView')
this.grdOrder._refreshrelatedobjects()


ENDPROC
PROCEDURE activatecmd
LPARAMETERS lnCmdNo
NODEFAULT
ENDPROC
PROCEDURE nextpage
NODEFAULT
ENDPROC
PROCEDURE onclickcmd
LPARAMETERS lnStarting, lnCmd
NODEFAULT
ENDPROC
PROCEDURE paint
LPARAMETER	lnPageNo
NODEFAULT
ENDPROC
PROCEDURE resetallcmd
NODEFAULT
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1>Class</reserved1>
		<reserved2>20</reserved2>
		<reserved3>_memberdata XML Metadata for customizable properties
*_add Äîáàâëÿåì ïîçèöèþ â çàêàç
*_dele óäàëÿåì òåêóùóþ çàïèñü
*_half ïîëîâèíà áëþäà
*_repe ïîâòîðèòü ïîçèöèþ
*_qnt ñìåíèòü êîëè÷åñòâî
*_qnt_gst ñìåíèòü Êîëè÷åñòâî ãîñòåé
*_dele_order Óäàëÿåì âåñü çàêàç
*_freeprc ñâîáîäíàÿ öåíà íà áëþäî
*_print_dele Ïå÷àòàåì îìåíó ïðèãîòîâëåíèÿ áëþäà
*_deliv Äåëåíèå çàêàçà íà 2
</reserved3>
		<reserved4/>
		<reserved5/>
		<reserved6>Pixels</reserved6>
		<reserved7>Ald Ðàçâåðíóòà èíô î çàêàçå  ñ èçì êîëè÷åñòâà è ñêèäêàìè</reserved7>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2DP0TI3HY</uniqueid>
		<timestamp>976453014</timestamp>
		<class>cnttxtinfo</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>CntTotal</objname>
		<parent>cntorddetail</parent>
		<properties>Top = 432
Left = 96
ZOrderSet = 3
Name = "CntTotal"
LblName.Name = "LblName"
LblSumm.Name = "LblSumm"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1RY0N4UD0</uniqueid>
		<timestamp>976453014</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>CmdGstPlus</objname>
		<parent>cntorddetail</parent>
		<properties>Top = 0
Left = 0
Height = 52
Width = 64
Caption = ""
Enabled = .F.
Visible = .F.
ZOrderSet = 4
Name = "CmdGstPlus"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1RZ0ZZVSE</uniqueid>
		<timestamp>976453014</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>CmdGstMinus</objname>
		<parent>cntorddetail</parent>
		<properties>Top = 0
Left = 129
Height = 52
Width = 64
Caption = ""
Enabled = .F.
Visible = .F.
ZOrderSet = 5
Name = "CmdGstMinus"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1SA0UTS7Y</uniqueid>
		<timestamp>976453014</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd21</objname>
		<parent>cntorddetail</parent>
		<properties>Top = 364
Left = 0
Height = 52
Width = 96
FontBold = .T.
Caption = "Ñêèäêà íà çàêàç"
ZOrderSet = 6
Name = "Cmd21"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>997103127</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd22</objname>
		<parent>cntorddetail</parent>
		<properties>Top = 416
Left = 0
Height = 52
Width = 48
Picture = ..\imgico\aw\ico\403-up.ico
BackColor = 162,162,162
ZOrderSet = 7
Name = "Cmd22"
</properties>
		<protected/>
		<methods>PROCEDURE Click
*this.parent.grdOrder.DoScroll(2)
this.parent.grdOrder.SetFocus()
KEYBOARD '{PGUP}'


ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1WW0QWPEA</uniqueid>
		<timestamp>997103127</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd23</objname>
		<parent>cntorddetail</parent>
		<properties>Top = 416
Left = 48
Height = 52
Width = 48
Picture = ..\imgico\aw\ico\401-down.ico
BackColor = 162,162,162
ZOrderSet = 8
Themes = .F.
Name = "Cmd23"
</properties>
		<protected/>
		<methods>PROCEDURE Click
*this.parent.grdOrder.DoScroll(3)
this.parent.grdOrder.SetFocus()
KEYBOARD '{PGDN}'


ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1RY0N4UD0</uniqueid>
		<timestamp>976453014</timestamp>
		<class>cnttxtinfo</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>CntSubTotal</objname>
		<parent>cntorddetail</parent>
		<properties>Top = 364
Left = 96
ZOrderSet = 9
Name = "CntSubTotal"
LblName.Caption = "Ïîäûòîã"
LblName.Height = 16
LblName.Left = 4
LblName.Top = 2
LblName.Width = 68
LblName.Name = "LblName"
LblSumm.Name = "LblSumm"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2DP0TI3HU</uniqueid>
		<timestamp>976453014</timestamp>
		<class>cnttxtinfo</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>CntDisc</objname>
		<parent>cntorddetail</parent>
		<properties>Top = 398
Left = 96
ZOrderSet = 10
Name = "CntDisc"
LblName.Caption = "Ñêèäêà"
LblName.Height = 16
LblName.Left = 4
LblName.Top = 2
LblName.Width = 68
LblName.Name = "LblName"
LblSumm.Name = "LblSumm"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2DP0U39KN</uniqueid>
		<timestamp>997093003</timestamp>
		<class>grd</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>grid</baseclass>
		<objname>GrdOrder</objname>
		<parent>cntorddetail</parent>
		<properties>ColumnCount = 4
FontSize = 8
Anchor = 0
HeaderHeight = 15
Height = 312
Highlight = .F.
Left = 0
Panel = 1
PanelLink = .F.
RecordMark = .F.
RecordSource = "lvOrderTvrView"
RowHeight = 17
ScrollBars = 0
Top = 51
Width = 192
ForeColor = 0,0,160
GridLineColor = 0,0,160
ZOrderSet = 11
AllowAutoColumnFit = 2
AllowCellSelection = .F.
_activerowhighlight = .T.
_activerowhighlightcoloractive = RGB(239,228,250)
_activerowhighlightcolorunactive = RGB(255,255,255)
Name = "GrdOrder"
Column1.FontSize = 8
Column1.ColumnOrder = 1
Column1.ControlSource = "lvOrderTvrView.TvrNM"
Column1.Width = 102
Column1.ReadOnly = .T.
Column1.ForeColor = 0,0,160
Column1.Name = "Column2"
Column2.FontBold = .T.
Column2.FontSize = 8
Column2.ColumnOrder = 2
Column2.ControlSource = "lvOrderTvrView.TvrQnt"
Column2.Width = 38
Column2.ReadOnly = .T.
Column2.Sparse = .F.
Column2.ForeColor = 0,0,160
Column2.Name = "Column3"
Column3.FontSize = 8
Column3.ColumnOrder = 4
Column3.ControlSource = "lvOrderTvrView.TvrPrcSale"
Column3.Width = 20
Column3.ReadOnly = .T.
Column3.Format = "R"
Column3.InputMask = "999999.99"
Column3.ForeColor = 0,0,160
Column3.Name = "Column4"
Column4.FontSize = 8
Column4.ColumnOrder = 3
Column4.ControlSource = "lvOrderTvrView.TvrSum"
Column4.Width = 58
Column4.ReadOnly = .T.
Column4.Format = "R"
Column4.InputMask = "999999.99"
Column4.ForeColor = 0,0,160
Column4.Name = "Column5"
</properties>
		<protected/>
		<methods>PROCEDURE _refreshrelatedobjects
*--ïîêàæåì îáíîâëåííóþ ñóììó çàêàçà íà ôîðìå
LOCAL lcTableNM
IF this.nrsrecno = 0
	this.nrsrecno = RECNO('lvOrderTvrView')
ENDIF
WITH ThisForm
SELECT lvOrderTvrView
SET FILTER TO
SET DELETED ON
LOCATE ALL FOR TvrId = .lnDiscTvrID
IF FOUND()
		.nDiscSumm = ABS(ROUND(lvOrderTvrView.TvrQnt*lvOrderTvrView.TvrPrcSale,2))*-1
		this.Parent.cntGuest.lblInfo.Caption= ':'+ALLTRIM(NVL(lvOrderTvrView.FrmPartTvrNote,''))
	ELSE
		.nDiscSumm = 0
		this.Parent.cntGuest.lblInfo.Caption= 'êëèåíò:Ãîñòü'
ENDIF
CALCULATE SUM(ROUND(lvOrderTvrView.TvrQnt*lvOrderTvrView.TvrPrcSale,2)) ;
	FOR !BITTEST(lvOrderTvrView.TvrAttr,4) AND lvOrderTvrView.TvrId &lt;&gt; .lnDiscTvrID TO .nOrderSum IN lvOrderTvrView
SELECT lvOrderTvrView
COUNT FOR BITTEST(lvOrderTvrView.TvrAttr,2) AND lvOrderTvrView.TvrId &lt;&gt; .lnDiscTvrID TO .nPredchk
*--ñîõðàíèì èòîã ïî çàêàçó
*ThisForm.nOrderSum = lvFrmSumView.FrmSum
this.Parent.cntSubTotal.lblSumm.Caption=STR(.nOrderSum,10,2)
this.Parent.cntDisc.lblSumm.Caption=STR(ABS(.nDiscSumm),10,2)
this.Parent.cntTotal.lblSumm.Caption=STR(.nOrderSum+.nDiscSumm,10,2)
*--îïðåäåëèì íîìåð ñòîëà (èç íàçâàíèÿ ñòîëà)
USE IN SELECT([lvOrgUnitEdit])
_PARAM = lvFrmEdit.PointEmiOUID
USE lvOrgUnitEdit IN 0

IF RECCOUNT([lvOrgUnitEdit])&gt;0
	lcTableNM = lvOrgUnitEdit.OUNM
ELSE
	lcTableNM = []
ENDIF
*-------------------------------------------------------------------------------
this.Parent.cntGuest.lblSumm.Caption= ALLTRIM(STR(lvFrmEdit.Id_,10,0))
.lblStat.Caption =  ALLTRIM(STR(.nFrmID,10))+[    Çàêàç ¹ ]+;
					ALLTRIM(SUBSTR(lcTableNM,AT([¹],lcTableNM)+1,LEN(lcTableNM)-AT([¹],lcTableNM)))+[.]+;
					ALLTRIM(lvFrmEdit.FrmNum)+ [     íà ñóììó: ]+ALLTRIM(STR(.nOrderSum,15,2))
		this.SetFocus()
			IF RECCOUNT('lvOrderTvrView') &gt;0
		IF this.nrsrecno &gt;= RECCOUNT('lvOrderTvrView')
				GO BOTTOM  in lvOrderTvrView
			ELSE
				GO this.nrsrecno IN lvOrderTvrView
		ENDIF 		
	ENDIF
SET FILTER TO TvrId&lt;&gt;thisform.lnDiscTvrID IN lvOrderTvrView
ENDWITH
RETURN

ENDPROC
PROCEDURE _rsrequery
*-------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: rst_v1.vcx
* Class.Module....: grdOrder._RSRequery
* Called by.......: &lt;&gt;
* Parameters......:
* Returns.........: &lt;none&gt;
* Notes...........: Ïåðå÷èòûâàíèå Alias-à Grid-à
*-------------------------------------------------------
*11.01.2004 17:15 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	_PARAM, lnRecno	
*------------------------------------------------------------------------------

WITH This

*11.01.2004 17:44 -&gt;Ñîõðàíèì äàííûå î RecordSource
.SourceKeep()
*------------------------------------------------------------------------------

*11.01.2004 17:46 -&gt;Îòêëþ÷èì RecordSource
.SourceReset()
*------------------------------------------------------------------------------
lnRecno = RECNO('lvOrderTvrView')
*11.01.2004 17:46 -&gt;Ïåðå÷èòàåì Local View
_PARAM = thisform.nFrmID
_PARAM1 = thisform.lndisctvrid
REQUERY([lvOrderTvrView])
*------------------------------------------------------------------------------
._refreshrelatedobjects()

*11.01.2004 17:46 -&gt;Âîññòàíàâëèâàåì RecordSource
.SourceRecall()
*------------------------------------------------------------------------------
*!*	IF lnRecno &gt; 0 AND !lnRecno &gt; RECCOUNT('lvOrderTvrView')
*!*	   GO lnRecno IN lvOrderTvrView
*!*	  ELSE
*!*	  	GO TOP IN lvOrderTvrView
*!*	ENDIF
ENDWITH
************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************

ENDPROC
PROCEDURE _rsrequeryone
LPARAMETERS tnFrmPartTvrID, tcMode

*17.01.2005 15:30 -&gt; Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL 	lcOldAlias, ;
		lnId, ;
		laReplaceArray[1]
***
PRIVATE	_PARAM
***
lcOldAlias = ALIAS()
lnId = tnFrmPartTvrID
laReplaceArray = .NULL.
*------------------------------------------------------------------------------

*12.05.2004 03:35 -&gt;Îòêëþ÷àåì èñòî÷íèê äàííûõ
This.SourceKeep()
This.SourceReset()
*------------------------------------------------------------------------------

WITH ThisForm
	IF 	.nDiscRate &lt;&gt; 0 AND .nDiscRate &lt;&gt; thisform.lndefclt
		lresult = spDiscRecount(.nfrmid , .nDiscRate ,null,null)
		IF lresult
			.cntORDDETAIL.cntDisc.lblSumm.Caption = ALLTRIM(STR(lvTmpDiscTvr.TvrPrcSale,10,2))
			.cntORDDETAIL.cntGuest.lblInfo.Caption= ALLTRIM(lvTmpDiscTvr.FrmPartTvrNote)
			.nDiscRate = lvTmpDiscTvr.nOwnerID    &amp;&amp;TvrAttr
		ELSE
			.nDiscRate = 0
			.cntORDDETAIL.cntDisc.lblSumm.Caption = '0.00'
			.cntORDDETAIL.cntGuest.lblInfo.Caption= 'êëèåíò:Ãîñòü'
		ENDIF
	ENDIF
ENDWITH

* Â çàâèñèìîñòè îò ðåæèìà âûïîëíèì äåéñòâèÿ
DO CASE
	CASE UPPER(tcMode) == [DELETE]

		*22.12.2004 15:11 -&gt;Óäàëÿåì çàïèñü
		SELECT lvOrderTvrView
		LOCATE FOR lvOrderTvrView.FrmPartTvrID = lnId
		IF FOUND()
			DELETE IN lvOrderTvrView
			IF CURSORGETPROP([Buffering],[lvOrderTvrView])#1
				TABLEUPDATE(.T.)
			ENDIF
		ENDIF
		*------------------------------------------------------------------------------

		GO TOP IN lvOrderTvrView
		*17.01.2005 15:33 -&gt; Ïåðåõîäèì íà îòðåäàêòèðîâàííûé ýëåìåíò

	CASE UPPER(tcMode) == [ADD] OR UPPER(tcMode) == [EDIT]
		_PARAM = thisform.nFrmID
		_PARAM1 = thisform.lndisctvrid
		REQUERY([lvOrderTvrView])
		This.SetFocus
	ENDCASE
		*-------------------------------------------------------------------------------
*12.05.2004 03:37 -&gt;Âîññòàíàâëèâàåì èñòî÷íèê äàííûõ
This.SourceRecall()
*------------------------------------------------------------------------------

*22.12.2004 15:35 -&gt;Âîññòàíîâèì òåêóùèé Alias
IF !EMPTY(lcOldAlias) AND USED(lcOldAlias) AND lcOldAlias#ALIAS()
	SELECT(lcOldAlias)
ENDIF
*------------------------------------------------------------------------------



ENDPROC
PROCEDURE AfterRowColChange
LPARAMETERS tnColIndex
NODEFAULT
ENDPROC
PROCEDURE Init
DODEFAULT()

*this.column2.DynamicBackColor = [IIF(BITTEST(lvOrderTvrView.TvrAttr,0),RGB(252,174,12),IIF(BITTEST(lvOrderTvrView.TvrAttr,1),RGB(252,242,218),RGB(255,255,255)))]
This.SetAll([DynamicBackColor],[IIF(BITTEST(lvOrderTvrView.TvrAttr,0),RGB(252,174,12),IIF(BITTEST(lvOrderTvrView.TvrAttr,1),RGB(252,242,218),RGB(255,255,255)))],[COLUMN])
								

ENDPROC
PROCEDURE refreshhandledhotkey
NODEFAULT
ENDPROC
PROCEDURE refreshrsstate
NODEFAULT
ENDPROC
PROCEDURE refreshruntimeprops
LPARAMETERS tlForceRefresh
NODEFAULT
ENDPROC
PROCEDURE RightClick
NODEFAULT
ENDPROC
PROCEDURE SetFocus
DODEFAULT()
SET FILTER TO TvrId&lt;&gt;thisform.lnDiscTvrID IN lvOrderTvrView

ENDPROC
PROCEDURE When
NODEFAULT
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2DP0U39KY</uniqueid>
		<timestamp>951873652</timestamp>
		<class>header</class>
		<classloc/>
		<baseclass>header</baseclass>
		<objname>Header1</objname>
		<parent>cntorddetail.GrdOrder.Column2</parent>
		<properties>FontSize = 8
Caption = "Íàçâàíèå"
Name = "Header1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2DP0U39KZ</uniqueid>
		<timestamp>980839676</timestamp>
		<class>textbox</class>
		<classloc/>
		<baseclass>textbox</baseclass>
		<objname>Text1</objname>
		<parent>cntorddetail.GrdOrder.Column2</parent>
		<properties>FontSize = 8
BorderStyle = 0
Margin = 0
ReadOnly = .T.
ForeColor = 0,0,160
BackColor = 255,255,255
Name = "Text1"
</properties>
		<protected/>
		<methods>PROCEDURE GotFocus
thisform._qntintable = .T.
DODEFAULT()
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2DP0U39L2</uniqueid>
		<timestamp>951873652</timestamp>
		<class>header</class>
		<classloc/>
		<baseclass>header</baseclass>
		<objname>Header1</objname>
		<parent>cntorddetail.GrdOrder.Column3</parent>
		<properties>FontSize = 8
Caption = "Êîëè÷åñòâî"
Name = "Header1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2DP0U39L3</uniqueid>
		<timestamp>980839676</timestamp>
		<class>txtcalctype</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>textbox</baseclass>
		<objname>Txt1</objname>
		<parent>cntorddetail.GrdOrder.Column3</parent>
		<properties>FontBold = .T.
FontSize = 8
Format = "R"
InputMask = "999999.99"
Left = 22
ReadOnly = .T.
Top = 10
ForeColor = 0,0,160
_highlightself = .F.
Name = "Txt1"
</properties>
		<protected/>
		<methods>PROCEDURE _handleanychange
USE IN SELECT([lvOrderTvrEdit])
_PARAM = lvOrderTvrView.FrmPartTvrID
USE lvOrderTvrEdit IN 0

REPLACE lvOrderTvrEdit.TvrQnt WITH this.value IN lvOrderTvrEdit
TABLEUPDATE(1,.T.,[lvOrderTvrEdit])

REPLACE lvOrderTvrView.TvrSum WITH ROUND(lvOrderTvrView.TvrPrcSale*this.value,2)
ThisForm.grdOrder._RefreshRelatedObjects()
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2DP0U39XF</uniqueid>
		<timestamp>951873652</timestamp>
		<class>header</class>
		<classloc/>
		<baseclass>header</baseclass>
		<objname>Header1</objname>
		<parent>cntorddetail.GrdOrder.Column4</parent>
		<properties>FontSize = 8
Caption = "Öåíà"
Name = "Header1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2DP0U39XJ</uniqueid>
		<timestamp>980839676</timestamp>
		<class>textbox</class>
		<classloc/>
		<baseclass>textbox</baseclass>
		<objname>Text1</objname>
		<parent>cntorddetail.GrdOrder.Column4</parent>
		<properties>FontSize = 8
BorderStyle = 0
Margin = 0
ReadOnly = .T.
ForeColor = 0,0,160
BackColor = 255,255,255
Name = "Text1"
</properties>
		<protected/>
		<methods>PROCEDURE GotFocus
thisform._qntintable = .T.
DODEFAULT()
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2DP0U39XK</uniqueid>
		<timestamp>951873652</timestamp>
		<class>header</class>
		<classloc/>
		<baseclass>header</baseclass>
		<objname>Header1</objname>
		<parent>cntorddetail.GrdOrder.Column5</parent>
		<properties>FontSize = 8
Caption = "Ñóììà"
Name = "Header1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2DP0U39XN</uniqueid>
		<timestamp>977438875</timestamp>
		<class>textbox</class>
		<classloc/>
		<baseclass>textbox</baseclass>
		<objname>Text1</objname>
		<parent>cntorddetail.GrdOrder.Column5</parent>
		<properties>FontSize = 8
BorderStyle = 0
Margin = 0
ReadOnly = .T.
ForeColor = 0,0,160
BackColor = 255,255,255
Name = "Text1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2DP0VE8IJ</uniqueid>
		<timestamp>976453015</timestamp>
		<class>cnttxtinfo</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>CntGuest</objname>
		<parent>cntorddetail</parent>
		<properties>Top = 0
Left = 0
Width = 192
Height = 52
ZOrderSet = 12
Name = "CntGuest"
LblName.AutoSize = .F.
LblName.WordWrap = .T.
LblName.Alignment = 2
LblName.Caption = "ãîñòåé"
LblName.Height = 22
LblName.Left = 3
LblName.Top = 18
LblName.Width = 186
LblName.Name = "LblName"
LblSumm.Alignment = 2
LblSumm.Caption = "10"
LblSumm.Height = 15
LblSumm.Left = 3
LblSumm.Top = 34
LblSumm.Width = 186
LblSumm.Name = "LblSumm"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2K90YSGPJ</uniqueid>
		<timestamp>976388540</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblInfo</objname>
		<parent>cntorddetail.CntGuest</parent>
		<properties>AutoSize = .F.
FontBold = .T.
Alignment = 2
Caption = "êëèåíò:Ãîñòü"
Left = 3
Top = 3
Width = 186
BackColor = 255,255,255
Name = "lblInfo"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>COMMENT</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>0</timestamp>
		<class/>
		<classloc/>
		<baseclass/>
		<objname>cntorddetail</objname>
		<parent/>
		<properties>Arial, 1, 8, 5, 14, 11, 29, 3, 0
Arial, 0, 9, 5, 15, 12, 32, 3, 0
Arial, 1, 9, 6, 15, 12, 32, 3, 0
Arial, 0, 8, 5, 14, 11, 29, 3, 0
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2CK18FOY9</uniqueid>
		<timestamp>997761334</timestamp>
		<class>cnttuch</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>cnttuchordmanag</objname>
		<parent/>
		<properties>Width = 608
Height = 92
ncountx = 8
ncountelem = 16
Name = "cnttuchordmanag"
Cmd11.Top = 0
Cmd11.Left = 0
Cmd11.Height = 92
Cmd11.Width = 84
Cmd11.FontSize = 11
Cmd11.Caption = "ÇÀÊÐÛÒÜ"
Cmd11.ForeColor = 255,255,255
Cmd11.BackColor = 255,0,0
Cmd11.ZOrderSet = 16
Cmd11.Name = "Cmd11"
Cmd12.Top = 0
Cmd12.Left = 84
Cmd12.Height = 46
Cmd12.Width = 84
Cmd12.Caption = "Ìîäèô- ôèêàòîðû"
Cmd12.ForeColor = 255,255,255
Cmd12.BackColor = 0,0,255
Cmd12.ZOrderSet = 0
Cmd12.Name = "Cmd12"
LBL11.Name = "LBL11"
</properties>
		<protected/>
		<methods>PROCEDURE activatecmd
LPARAMETERS lnCmdNo
NODEFAULT
ENDPROC
PROCEDURE Cmd11.Click
thisform._closeThis
ENDPROC
PROCEDURE nextpage
NODEFAULT
ENDPROC
PROCEDURE onclickcmd
LPARAMETERS lnStarting, lnCmd
NODEFAULT
ENDPROC
PROCEDURE paint
LPARAMETER	lnPageNo
NODEFAULT
ENDPROC
PROCEDURE resetallcmd
NODEFAULT
ENDPROC
PROCEDURE selectelement
NODEFAULT
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1>Class</reserved1>
		<reserved2>14</reserved2>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6>Pixels</reserved6>
		<reserved7>êëàâèàòóðà tuch óïðàâëåíèÿ çàêàçîì Ald 7*2+1 êíîïîê </reserved7>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1RY0N4UD0</uniqueid>
		<timestamp>976573385</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd13</objname>
		<parent>cnttuchordmanag</parent>
		<properties>Top = 0
Left = 169
Height = 46
Width = 73
FontBold = .T.
Caption = "îòìåíèòü ïîçèöèþ"
ForeColor = 255,255,255
BackColor = 0,0,255
ZOrderSet = 3
Name = "Cmd13"
</properties>
		<protected/>
		<methods>PROCEDURE Click
NODEFAULT
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>976573385</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd14</objname>
		<parent>cnttuchordmanag</parent>
		<properties>Top = 0
Left = 242
Height = 46
Width = 73
FontBold = .T.
Caption = "ïîâòîðèòü ïîçèöèþ"
ForeColor = 255,255,255
BackColor = 0,0,255
ZOrderSet = 4
Name = "Cmd14"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1RZ0ZZVSE</uniqueid>
		<timestamp>995792387</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd15</objname>
		<parent>cnttuchordmanag</parent>
		<properties>Top = 0
Left = 315
Height = 46
Width = 73
FontBold = .T.
Caption = "îòëîæèòü ïîäà÷ó"
Enabled = .F.
Visible = .F.
ForeColor = 255,255,255
BackColor = 0,0,255
ZOrderSet = 5
Name = "Cmd15"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1RY0N4UD0</uniqueid>
		<timestamp>996903168</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd16</objname>
		<parent>cnttuchordmanag</parent>
		<properties>Top = 0
Left = 388
Height = 46
Width = 73
FontBold = .T.
Caption = "ðàçäåëèòü çàêàç"
ForeColor = 255,255,255
BackColor = 0,0,255
ZOrderSet = 6
Name = "Cmd16"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>995792387</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd17</objname>
		<parent>cnttuchordmanag</parent>
		<properties>Top = 0
Left = 461
Height = 46
Width = 73
FontBold = .T.
Caption = "ñëîæèòü çàêàçû"
Enabled = .F.
Visible = .F.
ForeColor = 255,255,255
BackColor = 0,0,255
ZOrderSet = 7
Name = "Cmd17"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1RZ0ZZVSE</uniqueid>
		<timestamp>995792711</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd18</objname>
		<parent>cnttuchordmanag</parent>
		<properties>Top = 0
Left = 534
Height = 46
Width = 73
FontBold = .T.
Caption = "ïðî÷èå äåéñòâèÿ"
ForeColor = 255,255,255
BackColor = 0,0,255
ZOrderSet = 8
Name = "Cmd18"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>997761334</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd22</objname>
		<parent>cnttuchordmanag</parent>
		<properties>Top = 46
Left = 84
Height = 46
Width = 84
FontBold = .T.
Caption = "ïîëîâèíà áëþäà"
ForeColor = 255,255,255
BackColor = 0,0,255
ZOrderSet = 9
Name = "Cmd22"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1WW0QWPEA</uniqueid>
		<timestamp>976573385</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd23</objname>
		<parent>cnttuchordmanag</parent>
		<properties>Top = 46
Left = 169
Height = 46
Width = 73
FontBold = .T.
Caption = "îòìåíèòü çàêàç"
ForeColor = 255,255,255
BackColor = 0,0,255
ZOrderSet = 10
Name = "Cmd23"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>976573385</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd24</objname>
		<parent>cnttuchordmanag</parent>
		<properties>Top = 46
Left = 242
Height = 46
Width = 73
FontBold = .T.
Caption = "êîëè- ÷åñòâî"
ForeColor = 255,255,255
BackColor = 0,0,255
ZOrderSet = 11
Name = "Cmd24"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1SA02X99M</uniqueid>
		<timestamp>995792387</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd25</objname>
		<parent>cnttuchordmanag</parent>
		<properties>Top = 46
Left = 315
Height = 46
Width = 73
FontBold = .T.
Caption = "íîâàÿ Öåíà"
Enabled = .F.
Visible = .F.
ForeColor = 255,255,255
BackColor = 0,0,255
ZOrderSet = 12
Name = "Cmd25"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1RY0N4UD0</uniqueid>
		<timestamp>995792387</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd26</objname>
		<parent>cnttuchordmanag</parent>
		<properties>Top = 46
Left = 388
Height = 46
Width = 73
FontBold = .T.
Caption = "íàäáàâêè"
Enabled = .F.
Visible = .F.
ForeColor = 255,255,255
BackColor = 0,0,255
ZOrderSet = 13
Name = "Cmd26"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1S60XPNMV</uniqueid>
		<timestamp>995792387</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd27</objname>
		<parent>cnttuchordmanag</parent>
		<properties>Top = 46
Left = 461
Height = 46
Width = 73
FontBold = .T.
Caption = "â äîëã"
Enabled = .F.
Visible = .F.
ForeColor = 255,255,255
BackColor = 0,0,255
ZOrderSet = 14
Name = "Cmd27"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>995792387</timestamp>
		<class>cmd</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>commandbutton</baseclass>
		<objname>Cmd28</objname>
		<parent>cnttuchordmanag</parent>
		<properties>Top = 46
Left = 534
Height = 46
Width = 73
FontBold = .T.
Caption = "îïèñàíèå áëþäà"
Enabled = .F.
Visible = .F.
ForeColor = 255,255,255
BackColor = 0,0,255
ZOrderSet = 15
Name = "Cmd28"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>COMMENT</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>0</timestamp>
		<class/>
		<classloc/>
		<baseclass/>
		<objname>cnttuchordmanag</objname>
		<parent/>
		<properties>Arial, 1, 8, 5, 14, 11, 29, 3, 0
Arial, 1, 11, 7, 18, 14, 39, 4, 0
Arial, 1, 9, 6, 15, 12, 32, 3, 0
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1RU10F0GH</uniqueid>
		<timestamp>1010394549</timestamp>
		<class>scrfrmview</class>
		<classloc>basis.vcx</classloc>
		<baseclass>form</baseclass>
		<objname>frmorderedit</objname>
		<parent/>
		<properties>Height = 600
Width = 800
ShowWindow = 2
DoCreate = .T.
AutoCenter = .T.
BorderStyle = 1
Caption = ""
ControlBox = .F.
MaxButton = .F.
MinButton = .F.
Movable = .T.
MaxHeight = 600
MaxWidth = 800
MinHeight = 600
MinWidth = 800
TitleBar = 0
WindowType = 0
WindowState = 0
AlwaysOnTop = .T.
BackColor = 241,239,241
nfrmid = 0
lorderpay = .F.
_qntintable = .T.
ncashno = 0
nsalesid = 0
ncheckid = 0
nordersum = 0
lmanagerwork = .F.
_menusel = .F.
lreadonly = .F.
nprctypeid = 0
lorderdelm = .F.
lblock = .F.
npayvarnum = 0
lorderreturn = .F.
lndisctvrid = 0
lnmodedisc = 0
lnwaiterid = 0
lntblpar = 0
lntbltype = 0
lndefclt = 0
lvip = 0
lfrmautonum = .F.
npredchk = 0
lcmdpay = .F.
nprintinfprech = 0
cprinter = 
ndiscrate = 0
ndiscsumm = 0
nfrmtypeid = 0
ndeftableid = 0
uretval = .F.
lckkmlib =  
cbiltableids =  
lismanager = .F.
lchkback = .F.
lzrep = .F.
lxreport = .F.
lorderdel = .F.
lpredchkcancel = .F.
ldelposition = .F.
lmarkcancel = .F.
lmodyservprint = .F.
lmodyservprintñancel = .F.
lmodypredprint = .F.
_memberdata =     2267&lt;VFPData&gt;&lt;memberdata name="lcmdpay" type="property" display="lCmdPay"/&gt;&lt;memberdata name="nprintinfprech" type="property" display="nPrintinfPrech"/&gt;&lt;memberdata name="cprinter" type="property" display="cPrinter"/&gt;&lt;memberdata name="_printpretoprinter" type="method" display="_printPreToPrinter"/&gt;&lt;memberdata name="_guestcard" type="method" display="_GuestCard"/&gt;&lt;memberdata name="_disccalc" type="method" display="_DiscCalc"/&gt;&lt;memberdata name="ndiscrate" type="property" display="nDiscRate"/&gt;&lt;memberdata name="ndiscsumm" type="property" display="nDiscSumm"/&gt;&lt;memberdata name="_tablemap" type="method" display="_TableMap"/&gt;&lt;memberdata name="nfrmtypeid" type="property" display="nFrmTypeID"/&gt;&lt;memberdata name="_showorders" type="method" display="_ShowOrders"/&gt;&lt;memberdata name="ndeftableid" type="property" display="nDefTableId"/&gt;&lt;memberdata name="uretval" type="property" display="UretVal"/&gt;&lt;memberdata name="lckkmlib" type="property" display="lcKkmLib"/&gt;&lt;memberdata name="closeday" type="method" display="CloseDay"/&gt;&lt;memberdata name="cashincome" type="method" display="CashINcome"/&gt;&lt;memberdata name="cashoutcome" type="method" display="CashOUTcome"/&gt;&lt;memberdata name="createfrt" type="method" display="CreateFrt"/&gt;&lt;memberdata name="cbiltableids" type="property" display="cBilTableIDs"/&gt;&lt;memberdata name="_checkmaneg" type="method" display="_checkManeg"/&gt;&lt;memberdata name="lismanager" type="property" display="lisManager"/&gt;&lt;memberdata name="lchkback" type="property" display="lCHKBACK"/&gt;&lt;memberdata name="lzrep" type="property" display="lZrep"/&gt;&lt;memberdata name="lxreport" type="property" display="lXReport"/&gt;&lt;memberdata name="lorderdel" type="property" display="lOrderDel"/&gt;&lt;memberdata name="lpredchkcancel" type="property" display="lPredChkCancel"/&gt;&lt;memberdata name="ldelposition" type="property" display="lDelPosition"/&gt;&lt;memberdata name="lmarkcancel" type="property" display="lMarkCancel"/&gt;&lt;memberdata name="opendrawer" type="method" display="OpenDrawer"/&gt;&lt;memberdata name="reportx" type="method" display="ReportX"/&gt;&lt;memberdata name="lmodyservprint" type="property" display="lModyServPrint"/&gt;&lt;memberdata name="lmodyservprintñancel" type="property" display="lModyServPrintÑancel"/&gt;&lt;memberdata name="lmodypredprint" type="property" display="lModyPredPrint"/&gt;&lt;/VFPData&gt;

Name = "frmorderedit"
cstmsghandler.Top = 32
cstmsghandler.Left = 0
cstmsghandler.Name = "cstmsghandler"
cstresizable.Top = 32
cstresizable.Left = 22
cstresizable.Name = "cstresizable"
Img1.Enabled = .F.
Img1.Left = -36
Img1.Top = 36
Img1.ZOrderSet = 8
Img1.Name = "Img1"
</properties>
		<protected/>
		<methods>PROCEDURE _activate_ord
LPARAMETERS nFrmId
WITH This
*** Ñîõðàíÿåì òåêóùèé çàêàç
	.grdOrderList.Enabled= .F.
	.grdOrderList.Visible= .F.
	IF nFrmId = -2 &amp;&amp; Âûõîäèì èç ïðîãðàììû
		._closethis()
		RETURN
	ENDIF
	IF .nfrmid&lt;&gt;0
		**._printmarka()
		._OK()
	ENDIF
	.lnmodedisc = 0
	*.nDiscRate =  .lnDefClt
	.cntORDDETAIL.cntDisc.lblSumm.Caption = '0.00'
	.cntORDDETAIL.cntGuest.lblInfo.Caption= 'êëèåíò:Ãîñòü'
	IF nFrmId = -1 &amp;&amp; Äîáàâëÿåì íîâûé ñ÷åò
			IF !._add_order(.nDefTableId)
				.grdOrderList.Enabled= .t.
				.grdOrderList.Visible= .t.
			ENDIF
		RETURN
	ENDIF
	.nFrmId = nFrmId
	*09.04.2006 14:54 -&gt;îáíîâèì Alias-û äëÿ ðåäàêòèðîâàíèÿ çàêàçà (øàïêà è ïîçèöèè)
	_PARAM = .nFrmID
	REQUERY([lvFrmEdit])
	_PARAM1 = .lndisctvrid
	REQUERY([lvOrderTvrView])
	*--åñëè åñòü íîìåð êàðòî÷êè, ïîêàæåì åãî
	IF !ISNULL(lvFrmEdit.PointIspCltID) AND lvFrmEdit.PointIspCltID &lt;&gt; this.lndefclt
		.nDiscRate = lvFrmEdit.PointIspCltID
		*--äîáàâèì âàðèàíò îïëàòû ïî VIP êàðòå, åñëè ýòî âîçìîæíî
		.addVIP()
	ELSE
			.cntORDDETAIL.cntDisc.lblSumm.Caption = '0.00'
			.nDiscRate = .lnDefClt	
	ENDIF
	
	*.lisManager
	*--íàðèñóåì êíîïî÷íîå ìåíþ
	.cnttuchmenumain.Visible = .t.
	.cnttuchmenumain.paint(1)
	.cntorddetail.Visible = .T.
	.cnttuchmenu.Visible = .T.
	.cnttuchordinfo.Visible = .T.
	.cnttuchordpay.Visible = .T.
	.cnttuchordmanag.Visible = .t.
.cntORDDETAIL.grdOrder._refreshrelatedobjects()
.cntORDDETAIL.grdOrder.SetFocus()
ENDWITH
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************

ENDPROC
PROCEDURE _add_order
* Notes...........: Äîáàâëåíèå íîâîãî çàêàçà
*-------------------------------------------------------
LPARAMETERS lnTableId
IF PCOUNT()&lt;1 OR VARTYPE(lnTableId)&lt;&gt;'N'
	MESSAGEBOX('Îøèáêà ïðè âûçîâå _add_order')
ENDIF
IF MESSAGEBOX([Äîáàâèòü íîâûé çàêàç?],4+64,[Òåêóùèé çàêàç áóäåò ñîõðàíåí]) = 7
RETURN .f.
ENDIF
*--Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	luResAdding, i, _PARAM, lnTableID

WITH This
*** Ñîõðàíÿåì òåêóùèé çàêàç
IF .nfrmid&lt;&gt;0
	SELECT lvOrderTvrView
	GO TOP
	SCAN ALL
		IF lvOrderTvrView.TvrQnt = 0
			MESSAGEBOX([Çàêàç ñîäåðæèò íóëåâîå êîëè÷åñòâî!],64,[Èñïðàâòå])
			.cntorddetail.grdOrder.SetFocus()
			RETURN .F.
		ENDIF
		SELECT lvOrderTvrView
	ENDSCAN
	._printmarka()
	._OK()
ENDIF
*** Îáíóëÿåì ïàðàìåòðû è äîáàâëÿåì íîâûé çàêàç
	*--îòêðîåì ñ÷åò  è óñòàíîâèì çíà÷åíèÿ ïî óìîë÷àíèþ
	.nDiscRate = .lnDefClt
	.cntORDDETAIL.cntDisc.lblSumm.Caption = '0.00'
	.cntORDDETAIL.cntGuest.lblInfo.Caption= 'êëèåíò:Ãîñòü'
	USE IN SELECT([lvFrmEdit])
	USE lvFrmEdit IN 0 NODATA
	CURSORSETPROP([BUFFERING],3,[lvFrmEdit])
	SELECT lvFrmEdit
	APPEND BLANK
	*------------------------------------------------------------------------------
	REPL lvFrmEdit.PointIspCltID WITH .lnDefClt, ;
		 lvFrmEdit.PointEmiCltID WITH .lnWaiterID, ;  &amp;&amp; ýòî îñòàâèì âðåììåíî - ïîòîì óáåðåì
		 lvFrmEdit.DevCltId WITH .lnWaiterID, ;
		 lvFrmEdit.FrmTypeID WITH .nFrmTypeID, ;
		 lvFrmEdit.FrmDate WITH DATETIME(), ;
		 lvFrmEdit.ID_ WITH 1, ;
		 lvFrmEdit.FrmCurTypeID WITH 1,;
		 lvFrmEdit.PointEmiOUID WITH lnTableId
	IF TABLEUPDATE(1,.T.,[lvFrmEdit])
.nFrmID = spGetLastIncrementedID([lvFrmEdit])
ELSE
MESSAGEBOX('Âî âðåìÿ ñîõðàíåíèÿ äàííûõ ïðîèçîøëà îøèáêà',0+16,'Ïåðäóïðåæäåíèå')
RETURN .f.
	ENDIF


	*09.04.2006 14:54 -&gt;îáíîâèì Alias-û äëÿ ðåäàêòèðîâàíèÿ çàêàçà (øàïêà è ïîçèöèè)
	_PARAM = .nFrmID
	REQUERY([lvFrmEdit])
	_PARAM1 = .lndisctvrid
	REQUERY([lvOrderTvrView])
	*USE lvFrmSumView IN 0
	
	*--íàðèñóåì êíîïî÷íîå ìåíþ
	.cnttuchmenumain.paint(1)
	.cnttuchmenumain.Visible = .t.
	.cntorddetail.Visible = .T.
	.cnttuchmenu.Visible = .T.
	.cnttuchordinfo.Visible = .T.
	.cnttuchordpay.Visible = .T.
	.cnttuchordmanag.Visible = .t.
.cntORDDETAIL.grdOrder._refreshrelatedobjects()
.cntORDDETAIL.grdOrder.SetFocus()
ENDWITH


************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************


ENDPROC
PROCEDURE _block_in
*--áëîêèðîâêà/ðàçáëîêèðîâêà ââîäà äàííûõ
LPARAMETERS tblock

LOCAL ldiscount, ;
	  lpredchk, ;
	  lkol

		
SELECT lvOrderTvrView
LOCATE FOR lvOrderTvrView.TvrID = thisform.lnDiscTvrID
IF FOUND()
	ldiscount = .T.
ENDIF

*--îïðåäåëèì, áûë ëè íàïå÷àòàí ïðåä÷åê ïî çàêàçó
SELECT lvOrderTvrView
COUNT FOR BITTEST(lvOrderTvrView.TvrAttr,2) TO lkol

IF lkol &gt; 0
	lpredchk = .T.
ENDIF

*--îïðåäåëèì ðåæèì ñêèäêè
ThisForm.lnMODEDISC = VAL(oRes.GetParam([RST],[MODEDISC]))
WITH this
		*--çàáëîêèðóåì ââîä
		.block_input(tblock)
	IF tblock
*!*			IF ThisForm.lnMODEDISC&lt;&gt;1
*!*				.CntDiscID.Enabled = IIF(lpredchk,.F.,IIF(ldiscount,.T.,.F.))
*!*			ELSE
*!*				.cmdDisc.Enabled = IIF(lpredchk,.F.,IIF(ldiscount,.T.,.F.))
*!*				.cmdNoDisc.Enabled = IIF(lpredchk,.F.,IIF(ldiscount,.T.,.F.))
*!*			ENDIF
*!*	*		.CmdPredchk.Enabled = IIF(lpredchk,.F.,IIF(ldiscount,.T.,.F.))
	ELSE
		IF ldiscount
*!*				*--ðàçáëîêèðóåì òîëüêî äâå êíîïêè (åñëè ñíÿëè ïðåä÷åê, íî åñòü ñêèäêà)
*!*				IF ThisForm.lnMODEDISC&lt;&gt;1
*!*					.CntDiscID.Enabled = .T.
*!*				ELSE
*!*					.cmdDisc.Enabled = .T.
*!*					.cmdNoDisc.Enabled = .T.
*!*				ENDIF
*!*				
*!*				.CmdPredchk.Enabled = .T.
		ELSE
*!*				*--ðàçáëîêèðóåì ââîä
*!*				.lblock = .F.
*!*				.GrdOrder.ReadOnly = .F.
*!*				.GrdMenu.ReadOnly = .F.
*!*				.TxtAttr.ReadOnly = .F.
*!*				.cntOUTableID.Enabled = .T.
*!*				
*!*				IF ThisForm.lnMODEDISC&lt;&gt;1
*!*					.CntDiscID.Enabled = .T.
*!*				ELSE
*!*					.cmdDisc.Enabled = .T.
*!*					.cmdNoDisc.Enabled = .T.
*!*				ENDIF
			
		ENDIF
	ENDIF
	.cnttuchordmanag.cmd11.Enabled= .T.
ENDWITH
ENDPROC
PROCEDURE _checkmaneg
lnUserKod = oApp.nUserKod
WITH This
	_PARAM = .lnwaiterid
	USE lvCltEdit ALIAS lvCltEditMgr IN 0
	IF RECCOUNT([lvCltEditMgr])&gt;0
			*-- ïîëüçîâàòåëü ÿâëÿåòñÿ ìåíåäæåðîì lisManager
			this.lisManager =  (BITTEST(lvCltEditMgr.CltRole,5) AND MESSAGEBOX([Ðàáîòàòü ñ ïðàâàìè ÌÅÍÅÄÆÅÐÀ?],4+64,[Âûáîð ïðàâ ìåíåäæåðà èëè îôèöàíòà]) = 6)
	ENDIF
	
	* äîñòóïíîñòü âîçâðàòà lCHKBACK
	.lCHKBACK = _spVerifyUserGrant(lnUserKod,[CustomFunc],[RETACC])
	*äîñòóïíîñòü çàêðûòèÿ ñìåíû (Z-îò÷åò) lZrep
	.lZrep = _spVerifyUserGrant(lnUserKod,[CustomFunc],[ZACC])
	*äîñòóïíîñòü X-îò÷åòà lXReport
	.lXReport = _spVerifyUserGrant(lnUserKod,[CustomFunc],[XACC])
	*äîñòóïíîñòü óäàëåíèÿ çàêàçà lOrderDel
	.lOrderDel = _spVerifyUserGrant(lnUserKod,[CustomFunc],[DELORDACC])
	*äîñòóïíîñòü îòìåíû ïðåä÷åêà lPredChkCancel
	.lPredChkCancel = _spVerifyUserGrant(lnUserKod,[CustomFunc],[PRCHKACC])
	*äîñòóïíîñòü îòìåíû ñåðâèñ-ïå÷àòè lMarkCancel
	.lMarkCancel = _spVerifyUserGrant(lnUserKod,[CustomFunc],[SPRINTACC])
	*äîñòóïíîñòü óäàëåíèÿ ïîçèöèé lDelPosition
	.lDelPosition = _spVerifyUserGrant(lnUserKod,[CustomFunc],[DELPOSACC])
ENDWITH


ENDPROC
PROCEDURE _clickmenu
*--ïðè íàæàòèè êíîïêè ìåíþ ðàñêðîåì äåðåâî äëÿ äàëüíåéøåãî âûáîðà èëè ñäåëàåì âûáîð
LPARAMETERS tcNM
LOCAL _PARAM, lcModList, lnModID

IF !thisform.lReadOnly AND !thisform.lblock
	IF !thisform._menusel
		IF !EMPTY(tcNM) AND tcNM&lt;&gt;[ïóñòî]
			*--ðàñêðûâàåì äàëüøå
			thisform.grdmenu._rsrequery(2,tcNM)
			thisform._menusel = .T.
			thisform.lblPar.Visible = .T.
			thisform.lblPar.caption = ALLTRIM(tcNM)
		ENDIF
	ELSE
		*--äåëàåì âûáîð
		SELECT curBuild
		LOCATE FOR ALLTRIM(curBuild.NM)==ALLTRIM(tcNM)
				
		IF FOUND()
			*--äîáàâèì áëþäî â çàêàç
			thisform.grdOrder._add(curBuild.ID)	
			
			*--ïîëó÷èì ñïèñîê ìîäèôèêàòîðîâ äëÿ äàííîãî áëþäà
			_PARAM = curBuild.ID
			REQUERY([lvModList])
			
			*--åñëè ñïèñîê ìîäèôèêàòîðîâ íåïóñò, ïîêàæåì åãî
			IF RECCOUNT([lvModList])&gt;0
				lcModList = oApp.DoModalFormRetValObj([FrmModList;rst_v1.vcx],_PARAM)
			ENDIF
			
			*--åñëè ÷òî-òî âûáðàëè, òî äîáàâèì â çàêàç
			IF TYPE([lcModList])==[C] AND !EMPTY(lcModList)
				DO WHILE !EMPTY(lcModList)
					*--âûäåëèì ID ìîäèôèêàòîðà èç ñïèñêà
					lnModID = VAL(LEFT(lcModList,AT([,],lcModList)-1))
					
					*--äîáàâèì â çàêàç
					thisform.grdOrder._add(lnModID)	
					
					*--îáðåæåì ñïèñîê
					lcModList = RIGHT(lcModList,LEN(lcModList)-AT([,],lcModList))
				ENDDO
			ENDIF
		ELSE
			IF !EMPTY(tcNM)
				MESSAGEBOX([Íå íàéäåí òîâàð ]+ALLTRIM(tcNM),48,[Îêíî ñîîáùåíèé])
			ENDIF
		ENDIF		
	ENDIF
ENDIF
ENDPROC
PROCEDURE _closeday
*------------------------------------------------------------------------------
* Project.........: Basis.pjx
* Library.........: RST_V1.vcx
* Class.Module....: frmorderedit.CloseDay
* Called by.......: &lt;NA&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Çàêðûòèå ñìåíû
*------------------------------------------------------------------------------

*--Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL   _PARAM, ;
	    _PARAM_DOP

WITH This
*--Ïðîâåðèì íåîáõîäèìîñòü çàêðûòèÿ ñìåíû
IF .nSalesID = 0
	.nSalesID = spGetOpenDay(.nCashNo,.T.)
	DO CASE
		CASE .nSalesID &gt; 0
			.nSalesID = .nSalesID
		CASE .nSalesID = 0
			MESSAGEBOX([Ñìåíà íå îòêðûòà.],64,[Îêíî ñîîáùåíèé])
			RETURN .F.
		OTHERWISE
			MESSAGEBOX([Ëîêàëüíàÿ ñìåíà óæå çàêðûòà]+CHR(13)+;
					[Äëÿ çàêðûòèÿ îáùåé ñìåíû îáðàòèòåñü ê àäìèíèñòðàòîðó.],64,[Îêíî ñîîáùåíèé])
			RETURN .F.
	ENDCASE
ENDIF

*--äëÿ Ëèäåðà ïðîâåðèì íàëè÷èå íåîïëà÷åííûõ çàêàçîâ
IF VAL(oRes.GetParam([RST],[CLOSEDAY]))=1 &amp;&amp;--ìîæíî îòêëþ÷èòü ýòó ïðîâåðêó
	*--îòêðîåì ñïèñîê âñåõ íåîïëà÷åííûõ çàêàçîâ
	_PARAM = .nFrmTypeID
	_PARAM_DOP = VAL(oRes.GetParam([RST],[TBLPAR]))
	USE IN SELECT([lvMgrView])
	USE lvMgrView IN 0
	IF RECCOUNT([lvMgrView])&gt;0
		MESSAGEBOX([Íåëüçÿ çàêðûòü ñìåíó ïðè íàëè÷èè íåîïëà÷åííûõ çàêàçîâ.]+CHR(13)+;
					[Äëÿ ïðîñìîòðà âñåõ íåîïëà÷åííûõ çàêàçîâ âîñïîëüçóéòåñü êàðòî÷êîé ìåíåäæåðà.],48,[Îêíî ñîîáùåíèé])
		RETURN .F.
	ENDIF
ENDIF

*------------------------------------------------------------------------------

*12.04.2006 14:01 -&gt;Çàêðûâàåì ëîêàëüíûé äåíü
spSaleCloseDay(.nSalesID,.nCashNo)
*------------------------------------------------------------------------------

*--Ïå÷àòàåì Z-îò÷åò
	*13.04.2006 16:22 -&gt;Ïå÷àòàåì Z-îò÷åò
	LOCAL lcIniFileName ,lcKkmLib
	lcIniFileName = FULLPATH([KKM.INI])
	lcKkmLib = ALLTRIM(oRes.GetParam([KKM],[KKMLIB],lcIniFileName)) &amp;&amp; Êëàññ ñ êàññîâûì àïïàðàòîì
	this.NewObject('Shtrih',lcKkmLib,'kkms.vcx')

	this.Shtrih.CloseShift()
	This.Shtrih.Release()
	*------------------------------------------------------------------------------
*------------------------------------------------------------------------------

*--Ñáðîñèì íîìåð ñìåíû(ïðîäàæ)
.nSalesID = 0
*------------------------------------------------------------------------------

*--ñáðîñèì àâòîíóìåðàòîð
spResetAutoNum(.nFrmTypeID)

MESSAGEBOX([Ëîêàëüíàÿ ñìåíà çàêðûòà.]+CHR(13)+[Îáðàòèòåñü ê àäìèíèñòðàòîðó äëÿ çàêðûòèÿ îáùåé ñìåíû.],64,[Îêíî ñîîáùåíèé])
*------------------------------------------------------------------------------

ENDWITH
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************



ENDPROC
PROCEDURE _closethis
*--ïðîâåðêà íà íóëåâîå êîëè÷åñòâî
WITH this
	IF .cnttablepad.Visible
		oApp.lUserChange = .T.
		.Hide()
		CLEAR EVENTS
		RETURN
	ENDIF
	IF VARTYPE(this.grdOrderList)='O' AND .grdOrderList.Visible
		.cnttablepad.Visible = .F.
		.cnttablepad.Enabled = .F.
		.grdOrderList.Visible = .F.
		.grdOrderList.Enabled = .F.
		.cntorddetail.Visible= .t.
		.cnttuchmenu.Visible= .t.
		.cnttuchmenumain.blockall(.t.)
		.cnttuchordinfo.Visible= .t.
		.cnttuchordpay.Visible = .t.
		RETURN
	ENDIF
	IF VARTYPE(ThisForm.nFrmId)&lt;&gt;'N' OR ThisForm.nFrmId = 0
		oApp.lUserChange = .T.
		.Hide()
		CLEAR EVENTS
		RETURN
	ENDIF

	SELECT lvOrderTvrView
	LOCATE ALL FOR lvOrderTvrView.TvrQnt = 0
	IF FOUND()
		MESSAGEBOX([Çàêàç ñîäåðæèò íóëåâîå êîëè÷åñòâî!],64,[Èñïðàâòå])
		.cntorddetail.grdOrder.SetFocus()
		RETURN
	ENDIF
	._printmarka()
	._OK()
	oApp.lUserChange = .T.
	.Hide()
	CLEAR EVENTS
ENDWITH
*--âûéäåì ïîëíîñòüþ èç ïðîãðàììû

ENDPROC
PROCEDURE _deleallorder
*--óäàëåíèå çàêàçà ìåíåäæåðîì (èçìåíèì àòðèáóò çàêàçà )
WITH This
IF MESSAGEBOX([Óäàëèòü âåñü çàêàç?],36,[Îêíî ñîîáùåíèé]) = 6
	*--äëÿ ñîõðàíåíèÿ çàêàçà ñ àòðèáóòîì óäàëåíèÿ ìåíåäæåðîì
	.lorderDelM = .T.

	*--ñîõðàíèì âñå äàííûå
	._OK()

	*--Ñêðûâåì ôîðìó
	.Hide()
ELSE
	.lorderDelM = .F.
	RETURN .F.
ENDIF
ENDWITH


ENDPROC
PROCEDURE _disccalc
LPARAMETERS _PARAM1
IF EMPTY(_PARAM1) AND VARTYPE(_PARAM1) &lt;&gt; 'L'
	RETURN
ENDIF
*------------------------------------------------------------------------------
LOCAL lresult
lresult = spDiscRecount(this.nfrmid , null ,_PARAM1)
_PARAM = this.nfrmid
_PARAM1 = this.lndisctvrid
REQUERY([lvOrderTvrView])
IF lresult
	this.cntORDDETAIL.cntDisc.lblSumm.Caption = ALLTRIM(STR(NVL(lvTmpDiscTvr.TvrPrcSale*-1,0),10,2))
	this.cntORDDETAIL.cntGuest.lblInfo.Caption= ALLTRIM(NVL(lvTmpDiscTvr.FrmPartTvrNote,0))
	this.nDiscRate = lvTmpDiscTvr.nOwnerID    &amp;&amp;TvrAttr
ELSE
	this.nDiscRate = this.lnDefClt
	this.cntORDDETAIL.cntDisc.lblSumm.Caption = '0.00'
	this.cntORDDETAIL.cntGuest.lblInfo.Caption= 'êëèåíò:Ãîñòü'
ENDIF

RETURN


ENDPROC
PROCEDURE _guestcard
LOCAL	luResultAdding, _PARAM1
*29.11.2008 17:36 -&gt;Âûïîëíèì îïåðàöèþ ñîçäàíèÿ íîâîé ôîðìû
***luResultAdding = oApp.DoModalFormRetValObj([frmcalcpad;rst_v1.vcx],nTvrQnt)
ofrmcalcpad = NewObject([frmcalcpad],[rst_v1.vcx],.null.,0,'Êàðòà Ãîñòÿ','99999999999.')
ofrmcalcpad.Show(1)
luResultAdding = ofrmcalcpad.uretval
ofrmcalcpad = .null.
*------------------------------------------------------------------------------
	IF ISNULL(luResultAdding)
		this.cntORDDETAIL.grdOrder.SetFocus()
		RETURN
	ENDIF

LOCAL lresult
** îïðåäåëÿåì ðåçóëüòàò ïî íîìåðó êàðòû
lresult = spDiscRecount(this.nfrmid , null ,null,ALLTRIM(STR(luResultAdding,20,0)))
IF lresult
	this.nDiscRate = lvTmpDiscTvr.nOwnerID    &amp;&amp;TvrAttr
	this.cntORDDETAIL.cntDisc.lblSumm.Caption = ALLTRIM(STR(NVL(lvTmpDiscTvr.TvrPrcSale*-1,0),10,2))
	this.cntORDDETAIL.cntGuest.lblInfo.Caption= ALLTRIM(NVL(lvTmpDiscTvr.FrmPartTvrNote,''))
ELSE
	this.nDiscRate = this.lnDefClt
	this.cntORDDETAIL.cntDisc.lblSumm.Caption = '0.00'
	this.cntORDDETAIL.cntGuest.lblInfo.Caption= 'êëèåíò:Ãîñòü'
ENDIF
this.cntORDDETAIL.grdOrder._rsrequery()
*!*	_PARAM = thisform.nFrmID
*!*	REQUERY([lvOrderTvrView])
*thisform.cntorddetail.grdOrder._refreshrelatedobjects()


ENDPROC
PROCEDURE _ok
*-------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: RST_V1.VCX
* Class.Module....: FRMORDEREDIT._OK()
* Called by.......: frmOrderEdit.lblEdit.Click()
* Parameters......: &lt;tcMessage&gt;
* Returns.........: &lt;none&gt;
* Notes...........: &lt;~&gt;
*-------------------------------------------------------

LOCAL	llResSaveOrd, ;
		llDataChanged

WITH This			
	*._printmarka()
	
	*--Îòêðîåì òðàíçàêöèþ
	BEGIN TRANSACTION
	*--Ïîäãîòîâèìñÿ ê ñîõðàíåíèþ äàííûõ
	*-- ÎÑÒÀÅÒÑß Åñëè âêëþ÷åíà àâòîíóìåðàöèÿ, ïðîèçâîäèì àâòîìàòè÷åñêóþ âñòàâêó íîìåðà çàêàçà
	IF .lFrmAutoNum
		REPLACE FrmNum WITH spFrmAutoNum(lvFrmEdit.FrmTypeID,lvFrmEdit.FrmDate,lvFrmEdit.PointEmiOUID) IN lvFrmEdit
	ENDIF
	*-- Îòìå÷àåì äàòó ïîñëåäíåãî èçìåíåíèÿ
	REPLACE FrmDateAcc WITH DATETIME() IN lvFrmEdit
	
	*-- ÎÑÒÀÅÒÑß Åñëè âêëþ÷åí ôëàã óäàëåíèÿ çàêàçà ìåíåäæåðîì, ïîìåíÿåì åãî àòðèáóòû
	IF .lorderDelM
		REPLACE FrmAttribute WITH BITSET(FrmAttribute,30) IN lvFrmEdit
	ENDIF
	*------------------------------------------------------------------------------

	*-- ÎÑÒÀÅÒÑß Åñëè âêëþ÷åí ôëàã âîçâðàòà, óêàæåì ýòî â àòðèáóòàõ çàêàçà
	IF .lOrderReturn
		REPLACE FrmAttribute WITH BITSET(FrmAttribute,0) IN lvFrmEdit
	ENDIF
	*------------------------------------------------------------------------------
	
	*-- ÎÑÒÀÅÒÑß Ïðîèçâîäèì ñîõðàíåíèå øàïêè çàêàçà
	llDataChanged = .cstDataWork.DataChanged([lvFrmEdit],.T.)
	IF llDataChanged
		llResSaveOrd = .cstDataWork.Save([lvFrmEdit])
	ELSE
		llResSaveOrd = .T.
	ENDIF
	*------------------------------------------------------------------------------

	*-- ÎÑÒÀÅÒÑß Îáðàáîòàåì ðåçóëüòàòû ÂÑÅÕ îïåðàöèé ñîõðàíåíèÿ
	IF llResSaveOrd
		*--Ïîäòâåðæäàåì òðàíçàêöèþ
		END TRANSACTION
		.uRetVal = .T.
	ELSE
		*--Îòêàòûâàåì òðàíçàêöèþ
		ROLLBACK
		MESSAGEBOX([Â ïðîöåññå ñîõðàíåíèÿ ïðîèçîøëà îøèáêà. Èçìåíåíèÿ ñîõðàíåíû íå áóäóò.],48,[Îêíî ñîîáùåíèé])
		.uRetVal = .F.
	ENDIF
ENDWITH
*------------------------------------------------------------------------------------

************************************************************************************
**********************************  END OF METHOD **********************************
************************************************************************************

ENDPROC
PROCEDURE _paintmenu
*--íàðèñóåì ìåíþ ñ êíîïêàìè
LPARAMETERS tnVar, tnIDSET
LOCAL i, lcexp, _PARAM

*--ñíà÷àëà âûáåðåì äàííûå âî âðåìåííûé êóðñîð, ïî êîòîðîìó áóäåò ñòðîèòüñÿ ìåíþ
DO CASE
	CASE tnVar = 1
		SELECT ;
			lvPOSFuncInSetView.NM AS NM, ;
			lvPOSFuncInSetView.ID AS ID ;
		FROM lvPOSFuncInSetView ;
		INTO CURSOR curBuild NOFILTER

	CASE tnVar = 2
		USE IN SELECT([lvTvrInSetView])
		_PARAM = tnIDSET
		USE lvTvrInSetView IN 0	
			
		*19.04.2006 15:23 -&gt;Ïîëó÷èì èäåíòèôèêàòîð ïðàéñà
		USE IN SELECT([lvTvrSetInfo])
		_PARAM = tnIDSET
		USE lvTvrSetInfo IN 0
		ThisForm.nPrcTypeID = lvTvrSetInfo.PrcTypeID
		*------------------------------------------------------------------------------
			
		SELECT ;
			lvTvrInSetView.TvrNM AS NM, ;
			lvTvrInSetView.TvrID AS ID ;
		FROM lvTvrInSetView ;
		INTO CURSOR curBuild NOFILTER
	
ENDCASE

*--ïîñòðîèì ïî ýòîìó êóðñîðó  òàáëèöó äëÿ ìåíþ (â çàâèñèìîñòè îò ÷èñëà êîëîíîê)
CREATE TABLE tmp\tmpmenu.dbf FREE (t1 C(80),t2 C(80),t3 C(80),t4 C(80),t5 C(80),t6 C(80),t7 C(80))

*--çàïîëíèì òàáëèöó äëÿ ìåíþ
i = 1
SELECT tmpmenu
APPEND BLANK

SELECT curBuild
GO TOP
DO WHILE !EOF([curBuild])
	IF i&lt;=thisform.GrdMenu.ColumnCount
		lcexp = [REPL tmpmenu.t]+ALLTRIM(STR(i))+[ WITH NVL(curBuild.NM,'ïóñòî')]
		&amp;lcexp
		i = i+1
		SKIP 1
	ELSE
		*--ïåðåéäåì íà çàïîëíåíèå íîâîé ñòðîêè
		i = 1
		SELECT tmpmenu
		APPEND BLANK
	ENDIF
	SELECT curBuild
ENDDO

SELECT tmpmenu
GO TOP
ENDPROC
PROCEDURE _payorder
LOCAL lRetVal
WITH this
		*--çàáëîêèðóåì ñ÷èòûâàíèå êàðòî÷åê êëèåíòîâ
		.olecommprox1._close()
		._printmarka()
		IF .nPredchk = 0
		    ._printpredcheck()
		ENDIF
		._ok()

		lRetVal = oApp.DoModalFormRetValObj([FrmPayment;payment.vcx],.nfrmid ,.nPayVarNum, 1,0)

*.cntorddetail.grdOrder._RSRequery()
		*--ðàçáëîêèðóåì ñ÷èòûâàíèå êàðòî÷åê êëèåíòîâ
		.olecommprox1._open()
		IF TYPE([lRetVal])==[L] AND !lRetVal
		RETURN lRetVal
	    ENDIF
**	    ._TableMap()
		._ShowOrders()

		*.Hide()
	*RETURN lRetVal
ENDWITH


ENDPROC
PROCEDURE _printmarka
LPARAMETER nTvrDele &amp;&amp;--ôëàã ïðîâåðêè ïðè çàêðûòèè ôîðìû
IF !PCOUNT()&gt;0
	nTvrDele = null
ENDIF
SET TALK OFF
LOCAL	lnDiscPrice, ;
		_PARAM, ;
		_PARAM1, ;
		_PARAM2, ;
		lcBilTableIDs ,;
		llErr,;
		lPreview
llErr = .f.
lPreview = [ TO PRINTER ]
SELECT lvOrderTvrView	&amp;&amp; ìàðêà									óäàëåííàÿ ïîçèöèÿ
IF isnull(nTvrDele)
		LOCATE ALL FOR (!BITTEST(lvOrderTvrView.TvrAttr,0) AND !BITTEST(lvOrderTvrView.TvrAttr,4)) AND TvrId&lt;&gt;this.lnDiscTvrID
		IF !FOUND('lvOrderTvrView') &amp;&amp; íåò ïîçèöèé äëÿ ïå÷àòè
			RETURN .F.
		ENDIF
		IF MESSAGEBOX([Ïðîèçâåñòè ïå÷àòü íà ñåðâèñ-ïðèíòåð?],4+64,[Îêíî ñîîáùåíèé]) = 7
			RETURN .F.
		ENDIF
ENDIF


*-- Ïðîâåðÿåì âêëþ÷åíèå áèëüÿðäíûõ ñòîëîâ
thisForm.tblOn()
*--ñôîðìèðóåì äàííûå äëÿ ïå÷àòè íà ñåðâèñíûé ïðèíòåð
USE IN SELECT([lvSPrintView])
_PARAM1 = lvFrmEdit.FrmID
_PARAM2 = thisform.nCashNo

USE lvSPrintView IN 0
*--ïå÷àòü íà ñåðâèñíûé ïðèíòåð
IF isnull(nTvrDele)
		SELECT lvSPrintView.DeviceID, ;
				lvSPrintView.DeviceINI ;
			FROM lvSPrintView WHERE !BITTEST(lvSPrintView.TvrAttr,0) AND !BITTEST(lvSPrintView.TvrAttr,4) ;
			GROUP BY DeviceID ;
			INTO CURSOR curPrint NOFILTER
	ELSE
		SELECT lvSPrintView.DeviceID, ;
				lvSPrintView.DeviceINI ;
			FROM lvSPrintView WHERE lvSPrintView.FrmPartTvrID = nTvrDele;
			INTO CURSOR curPrint
ENDIF
SELECT curPrint

SCAN ALL
	SELECT lvSPrintView
	LOCAL lcPrinter
	lcPrinter = ALLTRIM(curPrint.DeviceINI)
	IF llDebugModeFlg
			WAIT WINDOW 'Ïå÷àòàåì íà ïðèíòåð '+ lcPrinter+' êàññà:' + STR(_PARAM2 ,10,0)
	ENDIF
	WAIT WINDOW 'Ïå÷àòàåì íà ïðèíòåð '+ lcPrinter+' êàññà:' + STR(_PARAM2 ,10,0) NOWAIT
	IF lcPrinter = [DEFAULT]
				SET PRINTER TO DEFAULT
		ELSE
				TRY
						SET PRINTER TO NAME ALLTRIM(lcPrinter)
					CATCH
						MESSAGEBOX( [Íåäîñòóïåí ñåðâèñ-ïðèíòåð:]+CHR(13)+;
									NVL(lcPrinter,'') + CHR(13)+;
									[Ñîîáùèòå î áëþäå íà ïðîèçâîäñòâî äðóãèì ñïîñîáîì.],64,[Ñîîáùèòå àäìèíèñòðàòîðó])
						llErr = .t.
				ENDTRY
				IF llErr
					lPreview = [ PREVIEW ]
					llErr = .f.
*!*						IF !llDebugModeFlg
*!*								RETURN .f.
*!*							ELSE
*!*								SET STEP ON
*!*						ENDIF
				ENDIF
	ENDIF
	SELECT lvSPrintView
	PRINTJOB
						IF isnull(nTvrDele) AND this.lModyServPrint
							MODIFY REPORT REPORTS\serv_print.frx
						ENDIF
						IF !isnull(nTvrDele) AND this.lModyServPrintCancel
							MODIFY REPORT REPORTS\serv_print_cancel.frx
						ENDIF
						WAIT WINDOW 'Ïå÷àòàåì íà ïðèíòåð '+ this.cPrinter NOWAIT
						TRY
						IF isnull(nTvrDele)
							REPORT FORM REPORTS\serv_print.frx FOR lvSPrintView.DeviceID = curPrint.DeviceID AND (!BITTEST(lvSPrintView.TvrAttr,0) AND !BITTEST(lvSPrintView.TvrAttr,4)) &amp;lPreview
						ELSE
							REPORT FORM REPORTS\serv_print_cancel.frx ;
								FOR lvSPrintView.DeviceID= curPrint.DeviceID AND lvSPrintView.FrmPartTvrID = nTvrDele &amp;lPreview
						ENDIF
					CATCH
						MESSAGEBOX( [Ìàðêà íå ðàñïå÷àòàëàñü.]+CHR(13)+;
									[Ñîîáùèòå î áëþäå íà ïðîèçâîäñòâî äðóãèì ñïîñîáîì.],64,[Ñîîáùèòå àäìèíèñòðàòîðó])
						llErr = .t.
				ENDTRY
				IF llErr
					IF !llDebugModeFlg
							RETURN .f.
					ENDIF
				ENDIF
	ENDPRINTJOB
	SELECT curPrint
ENDSCAN

*--óñòàíîâèì ïðèçíàê ïå÷àòè íà ñåðâèñ-ïðèíòåð
IF isnull(nTvrDele)
	SELECT lvOrderTvrView
	SCAN FOR lvOrderTvrView.TvrID&lt;&gt;thisform.lnDiscTvrID AND !BITTEST(lvOrderTvrView.TvrAttr,0) AND !BITTEST(lvOrderTvrView.TvrAttr,4)
		USE IN SELECT([lvOrderTvrEdit])
		_PARAM = lvOrderTvrView.FrmPartTvrID
		USE lvOrderTvrEdit IN 0
		REPLACE lvOrderTvrEdit.TvrAttr WITH BITSET(lvOrderTvrEdit.TvrAttr,0) IN lvOrderTvrEdit
		TABLEUPDATE(1,.T.,[lvOrderTvrEdit])
		SELECT lvOrderTvrView
	ENDSCAN
	ThisForm.cntorddetail.grdOrder._RSRequery()
ENDIF

WAIT CLEAR
RETURN .T.
ENDPROC
PROCEDURE _printpredcheck
*--ïå÷àòü ïðåä÷åêà
LOCAL lnPredchk, ;
lmaxid
WITH This
IF .nPrintinfPrech = 0 &amp;&amp; ðàáîòàåì áåç ïðåä÷åêîâ
RETURN
ENDIF
*** - 23.04.2009 17:09:15 Ãëóõîâ Â.Þ. (C) - &gt;
*!*	IF .nPredchk &lt;&gt; 0
*!*	    MESSAGEBOX([Ïðåä÷åê óæå áûë íàïå÷àòàí.]+CHR(13)+;
*!*	                [Äëÿ ïîâòîðíîé ïå÷àòè ïðåä÷åêà îáðàòèòåñü ê ìåíåäæåðó.],64,[Îêíî ñîîáùåíèé])
*!*	    RETURN .F.
*!*	ENDIF
*--ïðîâåðêà íà íåïóñòîé çàêàç
IF RECCOUNT([lvOrderTvrView])&lt;=0
MESSAGEBOX([Çàêàç íå ñîäåðæèò íè îäíîãî áëþäà!],64,[Îêíî ñîîáùåíèé])
RETURN .F.
ENDIF

*--ïðîâåðêà íà íóëåâîå êîëè÷åñòâî
SELECT lvOrderTvrView
GO TOP
SCAN ALL
IF lvOrderTvrView.TvrQnt = 0
IF TYPE('.cntorddetail.grdOrder')=[O]
MESSAGEBOX([Çàêàç ñîäåðæèò íóëåâîå êîëè÷åñòâî!],64,[Îêíî ñîîáùåíèé])
.cntorddetail.grdOrder.SetFocus()
RETURN .F.
ENDIF
ENDIF
SELECT lvOrderTvrView
ENDSCAN

	

IF ._printmarka() AND MESSAGEBOX([Íàïå÷àòàòü ïðåä÷åê?],36,[Îêíî ñîîáùåíèé]) = 7
RETURN .F.
ENDIF
PUBLIC pcGuestName
pcGuestName = ALLTRIM(.cntORDDETAIL.cntGuest.lblInfo.Caption)
*--ïðîèçâåäåì ïðîâåðêó ñêèäêè (ñêèäêà äîëæíà ñòîÿòü ïîñëåäíåé ïîçèöèåé â çàêàçå)
*!*	    CALCULATE MAX(lvOrderTvrView.FrmPartTvrID) TO lmaxid
*!*	
*!*	    SELECT lvOrderTvrView
*!*	    LOCATE FOR lvOrderTvrView.TvrID = .lnDiscTvrID
*!*	
*!*	    IF (FOUND() AND lvOrderTvrView.FrmPartTvrID&lt;&gt;lmaxid)
*!*	        MESSAGEBOX([Íåîáõîäèìî ïåðåñ÷èòàòü ñêèäêó.],64,[Îêíî ñîîáùåíèé])
*!*	        RETURN .F.
*!*	    ENDIF
*--âûïîëíèì ïå÷àòü ïðåä÷åêà è óñòàíîâèì ïðèçíàê ïðîèçâåäåííîé ïå÷àòè ïðåä÷åêà
IF .nPrintinfPrech = 1
._storechecktrans_pred()
ELSE
._printPreToPrinter()
	ENDIF
	*-- Ïðîâåðÿåì âûêëþ÷åíèå áèëüÿðäíûõ ñòîëîâ
	.tblOff()
RELEASE pcGuestName
*--ïîñëå ïå÷àòè ïðåä÷åêà ââîä äàííûõ áóäåò çàáëîêèðîâàí
*    ._block_in(.T.)
*   .block_input(.T.)
	._ShowOrders()
ENDWITH
ENDPROC
PROCEDURE _printpretoprinter
WITH This
IF .nPrintinfPrech = 2
	SET TALK OFF
	LOCAL llErr,_PARAM ,lPreview
	llErr = .f.
	lPreview = [ TO PRINTER ]
	_PARAM = thisform.nFrmID
SELECT * FROM lvOrderTvrView INTO TABLE tmp\lvOrderTvrView1
	PUBLIC pcName
	pcName = spuserclt(1)
	IF .cPrinter = [MODIFY]
		MODIFY REPORT REPORTS\pred_print.frx
		RELEASE pcName
		RETURN
	ENDIF
	IF .cPrinter = [DEFAULT]
				SET PRINTER TO DEFAULT
		ELSE
				TRY
						SET PRINTER TO NAME ALLTRIM(.cPrinter)
					CATCH
						MESSAGEBOX( [Íåäîñòóïåí ñåðâèñ-ïðèíòåð:]+CHR(13)+;
									NVL(.cPrinter,'') + CHR(13)+;
									[Ñîîáùèòå î áëþäå íà ïðîèçâîäñòâî äðóãèì ñïîñîáîì.],64,[Ñîîáùèòå àäìèíèñòðàòîðó])
						llErr = .t.
				ENDTRY
				IF llErr
					lPreview = [ PREVIEW ]
					llErr = .f.
				ENDIF
	ENDIF
	SELECT lvOrderTvrView1
	PRINTJOB
		IF this.lModyPredPrint &amp;&amp; llDebugModeFlg OR
			MODIFY REPORT REPORTS\pred_print.frx
			WAIT WINDOW 'Ïå÷àòàåì íà ïðèíòåð '+ this.cPrinter
		ENDIF
		WAIT WINDOW 'Ïå÷àòàåì íà ïðèíòåð '+ this.cPrinter NOWAIT
		TRY
				REPORT FORM REPORTS\pred_print.frx &amp;lPreview
			CATCH
				MESSAGEBOX( [Ïðåä÷åê íå ðàñïå÷àòàëñÿ.],64,[Ñîîáùèòå àäìèíèñòðàòîðó])
				llErr = .t.
		ENDTRY
	ENDPRINTJOB
	USE IN SELECT('lvOrderTvrView1')
	RELEASE pcName

	*--óñòàíîâèì ïðèçíàê ïå÷àòè ïðåä÷åêà
	SELECT lvOrderTvrView
	SCAN FOR lvOrderTvrView.TvrID&lt;&gt;thisform.lnDiscTvrID
		USE IN SELECT([lvOrderTvrEdit])
		_PARAM = lvOrderTvrView.FrmPartTvrID
		USE lvOrderTvrEdit IN 0
		SELECT lvOrderTvrEdit
		REPLACE lvOrderTvrEdit.TvrAttr WITH BITSET(lvOrderTvrEdit.TvrAttr,2) IN lvOrderTvrEdit
		TABLEUPDATE(1,.T.,[lvOrderTvrEdit])
		SELECT lvOrderTvrView
		REPLACE lvOrderTvrView.TvrAttr WITH BITSET(lvOrderTvrView.TvrAttr,2) IN lvOrderTvrView
	ENDSCAN
	this.cntorddetail.grdOrder._refreshrelatedobjects()


ENDIF
ENDWITH
RETURN
ENDPROC
PROCEDURE _showorders
LPARAMETERS lcCommand, lnTableNo
*** - 22.04.2009 19:24:50 Ãëóõîâ Â.Þ. (C) - &gt;
WITH This
IF PCOUNT()&lt;2
	lnTableNo = .nDefTableId
ENDIF
IF .nfrmid&lt;&gt;0
	._printmarka()
	._OK()
ENDIF
.nDefTableId= ABS(lnTableNo)
LOCAL _PARAM1 ,_PARAM2 ,_PARAM3 ,_PARAM, _PARAM_DOP
_PARAM_DOP = null
_PARAM2 = null
_PARAM3 = .nFrmTypeID
*--Îáíîâèì äàííûå íà ôîðìå
**.lisManager = .t.
IF .lisManager
	*** ïîêàçàòü çàêàçû âñåõ îôèöàíòîâ
	_PARAM = .nFrmTypeID
	_PARAM_DOP = .lnTblPar
	REQUERY([lvOrderView])
ELSE
	_PARAM1 = .lnwaiterid
	_PARAM2 = .nDefTableId
	REQUERY([lvOrderView])
	IF RECCOUNT('lvOrderView')=0
		this._add_order(lnTableNo)
		RETURN
	ENDIF
ENDIF
	SELECT lvOrderView
	APPEND BLANK
	REPLACE lvOrderView.OrderNote WITH '**********     Äîáàâèòü íîâûé ñ÷åò     **********', FrmId WITH -1
	APPEND BLANK
	REPLACE lvOrderView.OrderNote WITH '**********     Âûõîä     **********', FrmId WITH -2
	.cntorddetail.Visible= .F.
	.cnttuchmenu.Visible= .f.
	.cnttuchmenumain.Visible = .f.
	.cnttuchordmanag.Visible = .f.
	.cnttuchordinfo.Visible= .F.
	.cnttuchordpay.Visible = .F.
	.cnttablepad.Visible = .f.
	.cnttablepad.Enabled = .f.
	.grdOrderList.Visible = .t.
	.grdOrderList.Enabled = .t.
	.grdOrderList.SetFocus()
ENDWITH

ENDPROC
PROCEDURE _storechecktrans_pred
*------------------------------------------------------------------------------
* Project.........: BASIS.pjx
* Library.........: RST_V1.vcx
* Class.Module....: frmPayment._StoreCheckTrans_pred
* Called by.......: &lt;cmdPay.Click()&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Ïå÷àòü ïðåä÷åêà
*------------------------------------------------------------------------------

*15.04.2006 10:41 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL   lcUniqueFileNM,  lcnt
*------------------------------------------------------------------------------

*--ïðîâåðèì, äîñòóïíà ëè îïëàòà çàêàçîâ íà äàííîì ðàáî÷åì ìåñòå
LOCAL lcIniFileName ,lcKkmLib
lcIniFileName = FULLPATH([KKM.INI])
lcKkmLib = UPPER(ALLTRIM(oRes.GetParam([KKM],[KKMLIB],lcIniFileName))) &amp;&amp; Êëàññ ñ êàññîâûì àïïàðàòîì

WITH This


IF !lcKkmLib  = [SPARK]

				.NewObject('Shtrih',lcKkmLib,'kkms.vcx')

				*12.04.2006 15:54 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
				LOCAL   _PARAM

				*--Íàïå÷àòàåì çàãîëîâîê ÷åêà èç ñïåöèàëüíîãî ôàéëà
				*._HeaderPrint()

				*--íàïå÷àòàåì äîïîëíèòåëüíóþ èíôîðìàöèþ î çàêàçå
				.Shtrih.FeedDocument(2)
				.Shtrih.PrintString([Äàòà ]+PADR(ALLTRIM(DTOC(DATE())),24,[ ])+[Âðåìÿ ]+PADR(ALLTRIM(TIME()),14,[ ]))
				.Shtrih.PrintString(PADR(ALLTRIM(lvOUTableList.NM),29,[ ])+[Êîë-âî ãîñòåé ]+PADR(ALLTRIM(STR(lvFrmEdit.ID_)),6,[ ]))
				*-* 20080410 äîáàëåíî âðåìÿ îòêðûòèÿ çàêàçà
				.Shtrih.PrintString([Íîìåð çàêàçà:]+PADR(ALLTRIM(lvFrmEdit.FrmNum),10,[ ])+[Îòêðûò:]+ TTOC(lvFrmEdit.FrmDate))
				.Shtrih.PrintString([Îôèöèàíò ]+PADR(ALLTRIM(spUserClt(1)),40,[ ]))
				.Shtrih.PrintString([Êëèåíò ]+PADR(ALLTRIM(lvCltRSTList.NM),42,[ ]))
				.Shtrih.FeedDocument(3)
				.Shtrih.PrintString([*]+PADC([ÇÀÊÀÇ],48,[ ])+[*])
				.Shtrih.FeedDocument(3)

				*--íàïå÷àòàåì òîâàðíûå ïîçèöèè
				lcnt = 0
				SELECT lvOrderTvrView
				GO TOP
				SCAN FOR lvOrderTvrView.TvrID&lt;&gt;thisform.lnDiscTvrID
					lcnt = lcnt+1
					*--Ôèêñèðóåì òðàíçàêöèþ íà ÔÐ
					.Shtrih.PrintString(LEFT(lvOrderTvrView.TvrNM,25)+PADL(ALLTRIM(STR(lvOrderTvrView.TvrQnt,99,;
										IIF(lvOrderTvrView.TvrQnt&lt;&gt;INT(lvOrderTvrView.TvrQnt),1,0))),6)+[*];
										+PADL(ALLTRIM(STR(lvOrderTvrView.TvrPrcSale,99,2)),8)+;
										[=]+PADL(ALLTRIM(STR(ROUND(lvOrderTvrView.TvrQnt*lvOrderTvrView.TvrPrcSale,2),99,2)),9))
				 	*------------------------------------------------------------------------------

					*16.04.2006 10:10 -&gt;Çàïèøåì â Log èíôîðìàöèþ îá îøèáêå
					IF .Shtrih.ErrorCode # 0
						STRTOFILE(TTOC(DATETIME()) + [ -&gt; ] + ;
								  [Îøèáêà ]  + PADL(ALLTRIM(STR(.Shtrih.ErrorCode)),3) + [ ïðè ïå÷àòè òðàíçàêöèè ÷åêà. ] + ;
								  [Ñìåíà # ] + ALLTRIM(STR(.nSalesID)) + [ ] + ;
								  [×åê   # ] + ALLTRIM(STR(.nCheckID)) + [ ] + ;
								  [Ïîç.  # ] + ALLTRIM(STR(RECCOUNT([lvCheckTransView]))) + CHR(13), [KKM.LOG], 1)
								
						*16.04.2006 10:29 -&gt;Îòìåòèì â ÷åêå, ÷òî ïðè ðàáëòå ñ ÔÐ âîçíèêëà îøèáêà
						spSaleFiscError(.nCheckID)
						*------------------------------------------------------------------------------
				    RETURN .F.
					ENDIF
					*------------------------------------------------------------------------------
					SELECT lvOrderTvrView
				ENDSCAN

				.Shtrih.PrintString(REPLICATE([-],50))

				*--Ïå÷àòàåì ñêèäêó (åñëè îíà åñòü)
				SELECT lvOrderTvrView
				SET FILTER TO
				GO TOP
				
				LOCATE FOR lvOrderTvrView.TvrID=thisform.lnDiscTvrID
				IF FOUND()
					lnDiscount = (-1)*lvOrderTvrView.TvrPrcSale
					.Shtrih.PrintString([Ñêèäêà ]+ALLTRIM(STR(lnDiscount,99,2)))
					.nOrderSum = .nOrderSum - lnDiscount
				ENDIF

				*--Ïå÷àòàåì èòîã ÷åêà
				.Shtrih.PrintString([ÈÒÎÃÎ ]+PADL(ALLTRIM(STR(.nOrderSum,99,2)),44,[ ]))

				IF lcnt&lt;10
					.Shtrih.FeedDocument(10-lcnt)
					else
					.Shtrih.FeedDocument(3)
				ENDIF

				*--Íàïå÷àòàåì ïîäâàë ÷åêà èç ñïåöèàëüíîãî ôàéëà
				*._FooterPrint()

				.Shtrih.FeedDocument(3)
				.Shtrih.CutCheck()
				*------------------------------------------------------------------------------

				*16.04.2006 10:26 -&gt;Çàïèøåì â Log èíôîðìàöèþ îá îøèáêå
				IF .Shtrih.ErrorCode # 0
					STRTOFILE(TTOC(DATETIME()) + [ -&gt; ] + ;
							  [Îøèáêà ]  + PADL(ALLTRIM(STR(.Shtrih.ErrorCode)),3) + [ ïðè ïå÷àòè èòîãà ÷åêà. ] + ;
							  [Ñìåíà # ] + ALLTRIM(STR(.nSalesID)) + [ ] + ;
							  [×åê   # ] + ALLTRIM(STR(.nCheckID)) + CHR(13), [KKM.LOG], 1)
							
					*16.04.2006 10:30 -&gt;Îòìåòèì â ÷åêå, ÷òî ïðè ðàáîòå ñ ÔÐ âîçíèêëà îøèáêà
					spSaleFiscError(.nCheckID)
				    RETURN .F.
					*------------------------------------------------------------------------------
							
				ENDIF
				*------------------------------------------------------------------------------
				This.Shtrih.Release()

	ELSE
	this._printPreToPrinter()
ENDIF

*--óñòàíîâèì ïðèçíàê ïå÷àòè ïðåä÷åêà
SELECT lvOrderTvrView
SCAN FOR lvOrderTvrView.TvrID&lt;&gt;thisform.lnDiscTvrID
	USE IN SELECT([lvOrderTvrEdit])
	_PARAM = lvOrderTvrView.FrmPartTvrID
	USE lvOrderTvrEdit IN 0
	SELECT lvOrderTvrEdit
	REPLACE lvOrderTvrEdit.TvrAttr WITH BITSET(lvOrderTvrEdit.TvrAttr,2) IN lvOrderTvrEdit
	TABLEUPDATE(1,.T.,[lvOrderTvrEdit])
	SELECT lvOrderTvrView
	REPLACE lvOrderTvrView.TvrAttr WITH BITSET(lvOrderTvrView.TvrAttr,2) IN lvOrderTvrView
ENDSCAN
this.cntorddetail.grdOrder._refreshrelatedobjects()
RETURN .T.
ENDWITH
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE _tablemap
WITH This
	.cntorddetail.Visible= .F.
	.cnttuchmenu.Visible= .f.
	.cnttuchmenumain.Visible =.f.
	.cnttuchordinfo.Visible= .F.
	.cnttuchordmanag.Visible = .F.
	.cnttuchordpay.Visible = .F.
	.cnttablepad.paint()
	.cnttablepad.Visible = .t.
	.cnttablepad.Enabled = .t.
	.lnmodedisc = 0
	.nDiscRate =  .lnDefClt
ENDWITH

ENDPROC
PROCEDURE addvip
LOCAL _PARAM

WITH thisform
	IF !ISNULL(lvFrmEdit.PointIspOUID) AND !EMPTY(lvFrmEdit.PointIspOUID)
		*--Ïðîâåðèì, ÿâëÿåòñÿ ëè ýòà êàðòà ïëàòèíîâîé èëè çîëîòîé
		USE IN SELECT([lvCardViewByCardID])
		_PARAM = lvFrmEdit.PointIspOUID
		USE lvCardViewByCardID IN 0

		IF RECCOUNT([lvCardViewByCardID])&gt;0 AND ;
			(lvCardViewByCardID.CardTypeID = 1 OR lvCardViewByCardID.CardTypeID = 2) AND;
			!([5]$.nPayVarNum)
			
			.nPayVarNum = .nPayVarNum + [,5]
		ENDIF
	ENDIF
ENDWITH
ENDPROC
PROCEDURE block_input
LPARAMETERS tblock
WITH This
		.cnttuchmenu.blockall(!tblock)
		.cnttuchmenumain.blockall(!tblock)
		.cnttuchordmanag.blockall(!tblock)
		.cnttuchordmanag.cmd11.Enabled= .T.
		.cnttuchordpay.blockall(!tblock)
		.cnttuchordinfo.blockall(!tblock)
		.cntorddetail.cmd21.Enabled = !tblock
ENDWITH
ENDPROC
PROCEDURE cashincome

*18.10.2006 12:29 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL   lnSumm,ofrmcalcpad
*------------------------------------------------------------------------------
WITH This


*18.10.2006 12:30 -&gt;Ïîëó÷èì ñóììó âíåñåíèÿ
ofrmcalcpad = NewObject([frmcalcpad],[rst_v1.vcx],.null.,0000000.00,'Âíîñèìàÿ ñóììà')
ofrmcalcpad.Show(1)
lnSumm = ofrmcalcpad.uretval
ofrmcalcpad = .null.
*------------------------------------------------------------------------------

*18.10.2006 14:00 -&gt;Ïðîâåðèì ñóììó
IF lnSumm &lt;= 0 THEN
	MESSAGEBOX('Íóëåâàÿ äåíåæíàÿ ñóììà. Äåíüãè âíåñòè íåëüçÿ',0+64+4096,'Âíåçåíèå\èçúÿòèå äåíåã íåâîçìîæíî',4500)
	RETURN
ENDIF
*------------------------------------------------------------------------------

*18.10.2006 12:31 -&gt;Ðåãèñòðèðóåì âíåñåíèå
.NewObject('Shtrih',.lcKkmLib,'kkms.vcx')
.Shtrih.CashIncome(lnSumm)
*------------------------------------------------------------------------------

*16.04.2006 10:26 -&gt;
IF .Shtrih.ErrorCode # 0
	
	*16.04.2006 10:27 -&gt;Çàïèøåì â Log èíôîðìàöèþ îá îøèáêå]
	*.KKMErrorHandler([Îøèáêà ]  + PADL(ALLTRIM(STR(.Shtrih.ErrorCode)),3) + [ âíåñåíèè äåíåã â êàññó.])
	MESSAGEBOX([Îøèáêà ]  + PADL(ALLTRIM(STR(.Shtrih.ErrorCode)),3) + [êàññû ïðè âíåñåíèè äåíåã.],0+64+4096,'Âíåçåíèå\èçúÿòèå äåíåã íåâîçìîæíî',4500)
	*------------------------------------------------------------------------------
		
ENDIF
*------------------------------------------------------------------------------
.Shtrih.Release()
ENDWITH
*******************************************************************************
********************************* END METHOD **********************************
*************************************************************************

ENDPROC
PROCEDURE cashoutcome
*18.10.2006 12:29 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL   lnSumm
*------------------------------------------------------------------------------

WITH This

*18.10.2006 12:35 -&gt;Ïîëó÷èì ñóììó âûïëàòà
ofrmcalcpad = NewObject([frmcalcpad],[rst_v1.vcx],.null.,0000000.00,'Èçûìàåìàÿ ñóììà')
ofrmcalcpad.Show(1)
lnSumm = ofrmcalcpad.uretval
ofrmcalcpad = .null.

*18.10.2006 14:00 -&gt;Ïðîâåðèì ñóììó
IF lnSumm &lt;= 0 THEN
	MESSAGEBOX('Íóëåâàÿ äåíåæíàÿ ñóììà. Äåíüãè èçúÿòü íåëüçÿ',0+64+4096,'Âíåçåíèå\èçúÿòèå äåíåã íåâîçìîæíî',4500)
	RETURN
ENDIF
*------------------------------------------------------------------------------

*18.10.2006 12:35 -&gt;Ðåãèñòðèðóåì âíåñåíèå
.NewObject('Shtrih',.lcKkmLib,'kkms.vcx')
.Shtrih.CashOutcome(lnSumm)
*------------------------------------------------------------------------------

*18.06.2008 12:35 -&gt;
IF .Shtrih.ErrorCode # 0
	
	*16.04.2006 10:27 -&gt;Çàïèøåì â Log èíôîðìàöèþ îá îøèáêå]
*	.KKMErrorHandler([Îøèáêà ]  + PADL(ALLTRIM(STR(.Shtrih.ErrorCode)),3) + [ âûïëàòà äåíåã èç êàññû.])
	MESSAGEBOX([Îøèáêà ]  + PADL(ALLTRIM(STR(.Shtrih.ErrorCode)),3) + [êàññû ïðè èçúÿòèè äåíåã.],0+64+4096,'Âíåçåíèå\èçúÿòèå äåíåã íåâîçìîæíî',4500)
	*------------------------------------------------------------------------------
		
ENDIF
*------------------------------------------------------------------------------
.Shtrih.Release()
ENDWITH
*******************************************************************************
********************************* END METHOD **********************************
*************************************************************************ÓÙÓÙÜ
ENDPROC
PROCEDURE closeday
IF !_spVerifyUserGrant(oApp.nUserKod,[CustomFunc],[ZACC])
	MESSAGEBOX('Ó Âàñ íåò ïðàâ íà ñíÿòèå Z-îò÷åòà è çàêðûòèå äíÿ.', 0+64,'Îáðàòèòåñü ê àäìèíèñòðàòîðó')
	RETURN .f.
ENDIF

*29.04.2006 16:47 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL   lnSalesID, ;
		lnStartSeconds, ;
		lnCurrSeconds, ;
		llErrorOnClose
*------------------------------------------------------------------------------
llErrorOnClose = .f.
WITH This

*12.04.2006 13:59 -&gt;Ïðîâåðèì íåîáõîäèìîñòü çàêðûòèÿ ñìåíû
IF .nSalesID = 0
	lnSalesID = spGetOpenDay(.nCashNo,.T.)
	IF lnSalesID &gt; 0
		.nSalesID = lnSalesID
	ELSE
		MESSAGEBOX([Ëîêàëüíàÿ ñìåíà áûëà çàêðûòà ðàíåå.],64,[Çàêðûòèå ñìåíû])
		RETURN
	ENDIF
ENDIF
*------------------------------------------------------------------------------
	.NewObject('Shtrih',.lcKkmLib,'kkms.vcx')
	.Shtrih.CloseShift()
	*18.06.2008 12:35 -&gt;
	IF .Shtrih.ErrorCode # 0
		llErrorOnClose = .t.
		MESSAGEBOX([Îøèáêà ]  + PADL(ALLTRIM(STR(.Shtrih.ErrorCode)),3) + [êàññû ïðè ïå÷àòè Z-îò÷åòà.],0+64+4096,'Ïå÷àòàòü îò÷åò íåâîçìîæíî',4500)
		*------------------------------------------------------------------------------
	ENDIF
	.Shtrih.Release()
	*------------------------------------------------------------------------------
	IF llErrorOnClose
		MESSAGEBOX([Ñìåíó ýòîé êàññû ìîæåò çàêðûòü àäìèíèñòðàòîð ñî ñâîåãî ðàáî÷åãî ìåñòà]+CHR(13)+;
				   [èëè Ïðîâåðüòå ôèñêàëüíûé ïðèíòåð è ïî-ïðîáóéòå ñíîâà.],0+64+4096,'Ïå÷àòàòü îò÷åò íåâîçìîæíî')
		RETURN .f.
	ENDIF
IF .nSalesID &gt; 0 AND spSaleCloseDay(.nSalesID,.nCashNo)

*16.04.2006 10:16 -&gt;Ñáðîñèì íîìåð ñìåíû(ïðîäàæ)
.nSalesID = 0
*------------------------------------------------------------------------------

*!*	*29.04.2006 16:52 -&gt;Âûõîäèì
*!*	.ChangeUser()
*!*	*------------------------------------------------------------------------------
ENDIF
ENDWITH

*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE createfrt
LOCAL nFrtId,cFrtNM
nFrtId = VAL(ALLT(oRes.GetParam([RST],[pred_printFRT],'','196','Êîä îò÷åòà ñ ïðåä÷åêîì')))
cFrtNM = 'Reports\pred_print'
*** - 16.04.2009 11:57:08 Ãëóõîâ Â.Þ. (C) - &gt; Îòêðîåì LV ñ èíôîðìàöèåé îá îò÷åòå (ñ MEMO)
_PARAM = nFrtId
USE lvRptFormInfo IN 0
IF !FILE(cFrtNM+'pred_print.FRT')
	COPY MEMO lvRptFormInfo.RptFrmFRX TO (cFrtNM+[.FRX])
	COPY MEMO lvRptFormInfo.RptFrmFRT TO (cFrtNM+[.FRT])
ENDIF
this.lModyPredPrint = lvRptFormInfo.RptFrmIsModify
USE IN lvRptFormInfo

nFrtId = VAL(ALLT(oRes.GetParam([RST],[serv_printFRT],'','197','Êîä îò÷åòà ñ ìàðêîé')))
cFrtNM = 'Reports\serv_print'
*** - 16.04.2009 11:57:08 Ãëóõîâ Â.Þ. (C) - &gt; Îòêðîåì LV ñ èíôîðìàöèåé îá îò÷åòå (ñ MEMO)
_PARAM = nFrtId
USE lvRptFormInfo IN 0
IF !FILE(cFrtNM+'serv_print.FRT')
COPY MEMO lvRptFormInfo.RptFrmFRX TO (cFrtNM+[.FRX])
COPY MEMO lvRptFormInfo.RptFrmFRT TO (cFrtNM+[.FRT])
ENDIF
this.lModyServPrint = lvRptFormInfo.RptFrmIsModify
USE IN lvRptFormInfo

nFrtId = VAL(ALLT(oRes.GetParam([RST],[serv_print_cancelFRT],'','198','Êîä îò÷åòà ñ ìàðêîé îòêàçà')))
cFrtNM = 'Reports\serv_print_cancel'
*** - 16.04.2009 11:57:08 Ãëóõîâ Â.Þ. (C) - &gt; Îòêðîåì LV ñ èíôîðìàöèåé îá îò÷åòå (ñ MEMO)
_PARAM = nFrtId
USE lvRptFormInfo IN 0
IF !FILE(cFrtNM+'serv_print_cancel.FRT')
	COPY MEMO lvRptFormInfo.RptFrmFRX TO (cFrtNM+[.FRX])
	COPY MEMO lvRptFormInfo.RptFrmFRT TO (cFrtNM+[.FRT])
ENDIF
this.lModyServPrintÑancel = lvRptFormInfo.RptFrmIsModify
USE IN lvRptFormInfo


ENDPROC
PROCEDURE getcardinfo
*------------------------------------------------------------------------------
* Project.........: BASIS_RST.pjx
* Library.........: rst_v1.vcx
* Class.Module....: frmOrderEdit.GetCardInfo
* Called by.......: &lt;This.OleCommProx&gt;
* Parameters......: &lt;tccardcode&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Ïîëó÷åíèå èíôîðìàöèè î êàðòå
*------------------------------------------------------------------------------
LPARAMETERS tccardcode

LOCAL   _PARAM,lRes
*--ïðîâåðèì, íå çàáëîêèðîâàí ëè ââîä
IF !thisform.cnttuchordpay.cmd13.Enabled OR MESSAGEBOX('Ïîìåíÿòü Ãîñòÿ ïî ñ÷åòó?',4+64+256,'Èçìåíåíèå èíôîðìàöèè î Ãîñòå')=7
	RETURN .F.
ENDIF

_PARAM1 = tccardcode
_PARAM2 = VAL([0x]+SUBSTR(tccardcode,4,8))
** îïðåäåëÿåì ðåçóëüòàò ïî ñ÷èòàíîìó êîäó êàðòû
lresult = spDiscRecount(this.nfrmid , null ,_PARAM1,null)
IF lresult
	this.cntORDDETAIL.cntDisc.lblSumm.Caption = ALLTRIM(STR(NVL(lvTmpDiscTvr.TvrPrcSale*-1,0),10,2))
	this.cntORDDETAIL.cntGuest.lblInfo.Caption= ALLTRIM(NVL(lvTmpDiscTvr.FrmPartTvrNote,''))
	this.nDiscRate = lvTmpDiscTvr.nOwnerID    &amp;&amp;TvrAttr
ELSE
	this.nDiscRate = this.lnDefClt
	this.cntORDDETAIL.cntDisc.lblSumm.Caption = '0.00'
	this.cntORDDETAIL.cntGuest.lblInfo.Caption= 'êëèåíò:Ãîñòü'
ENDIF
this.cntORDDETAIL.grdOrder._rsrequery()
*!*	_PARAM = thisform.nFrmID
*!*	REQUERY([lvOrderTvrView])
*!*	thisform.cntorddetail.grdOrder._refreshrelatedobjects()

*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE GotFocus
DODEFAULT()
		thisform.olecommprox1._open()

ENDPROC
PROCEDURE Init
*------------------------------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: RST_V1.VCX
* Class.Module....: FRMORDERADD.INIT
* Called by.......: &lt;Sys Event&gt;
* Parameters......: tnFrmTypeID - òèï äîêóìåíòà
* Returns.........: &lt;none&gt;
* LastEditDate....: 26 October 2006
* Notes...........: &lt;~&gt;
*------------------------------------------------------------------------------
LPARAMETERS tnScrFrmID,tnFrmID, tlReadOnly
_screen.TitleBar= 0

LOCAL	lnDefClt, ;
		lnTblType, ;
		lnTblPar, ;
		_PARAM1, ;
	_PARAM2, ;
	_PARAM, ;
	lcTableNM, ;
	lnPredchk, ;
	llblock, ;
	lnSalesID, ;
	lnMODEDISC


*--Âûïîëíèì ìåòîä ðîäèòåëüñêîãî êëàññà
DODEFAULT(tnScrFrmID)
*----------------------------------------------------------------------------
WITH this
	.cnttablepad.Left = 0
	*--ID çàêàçà
	.nFrmID = tnFrmID
	
	*--Íîìåð ìàøèíû (êàññû)nCashNo
	.nCashNo = VAL(oRes.GetParam([RST],[CASH]))
	*-- Êëàññ ñ êàññîâûì àïïàðàòîì
	.lcKkmLib = ALLTRIM(oRes.GetParam([KKM],[KKMLIB],FULLPATH([KKM.INI])))
	*--lnDefClt ïîëó÷èì êîä êëèåíòà ïî óìîë÷àíèþ ("ãîñòü")
	.lnDefClt = VAL(oRes.GetParam([RST],[DEFCLT]))

	*--lnTblType ïîëó÷èì òèï ïîäðàçäåëåíèÿ "ñòîë"
	.lnTblType = VAL(oRes.GetParam([RST],[TBLTYPE]))

	*--lnTblPar ïîëó÷èì êîä ïîäðàçäåëåíèÿ, ñîäåðæàùåãî ñòîëû
	.lnTblPar = VAL(oRes.GetParam([RST],[TBLPAR]))

	*--ðàçðåøåíèå íà ðàáîòó ñ Vip êàðòàìè
	.lVip = VAL(oRes.GetParam([RST],[WKVIP]))&gt;0

	*--lnWaiterID ïîëó÷èì êîä òåêóùåãî îôèöèàíòà
	.lnWaiterID = spUserClt()
	
	*--lnMODEDISC ïîëó÷èì ðåæèì ñêèäêè
	.lnMODEDISC = VAL(oRes.GetParam([RST],[MODEDISC]))	
	*------------------------------------------------------------------------------
	*--lnDiscTvrID îïðåäåëèì ID òîâàðà "ñêèäêà" lnDiscTvrID
	.lnDiscTvrID = VAL(oRes.GetParam([RST],[DISCTVRID]))

	*--ïîëó÷èì êîä òèïà äîêóìåíòà "çàêàç"
	.nFrmTypeID = VAL(oRes.GetParam([RST],[TYPEORD]))
	*--------------------------------------------------------------------------------
	*--Ïîëó÷àåì èäåíòèôèêàòîð íåçàêðûòîé ñìåíû
	lnSalesID = spGetOpenDay(This.nCashNo)
	*--îïðåäåëèì âîçìîæíûå âàðèàíòû îïëàòû (â çàâèñèìîñòè îò íàñòðîéêè è êàðòî÷êè)
	.nPayVarNum = ALLT(oRes.GetParam([RST],[PAYTYPE]))
	
	* Äîïóñòèìîñòü îïëàòû íà ýòîì ðàá.ìåñòå
	.lCmdPay = (VAL(oRes.GetParam([RST],[CMDPAY],0))=1)
	* Äîïóñòèìîñòü ïå÷àòè ïðå-÷åêà íà ýòîì ðàá.ìåñòå (0 - ðàáîòà áåç ïðå-÷åêîâ, 1- ïå÷àòü íà ôèñêàëüíèêå, 2 - íà ñåòåâîì ïðèíòåðå, -1 - íàäî ïå÷àòàòü íà äðóãîì ìåñòå)
	.nPrintinfPrech = VAL(oRes.GetParam([RST],[PRINTPRE],0))
	* Íàçâàíèå â ñåòè ïðèíòåðà ïðå-÷åêîâ
	.cPrinter = ALLTRIM(oRes.GetParam([RST],[SERVPRINT],[],[DEFAULT]))
	*--îïðåäåëèì ID òîâàðîâ áèëüÿðäíûå ñòîëû, êîòîðûå íàäî âûêëþ÷èòü
	.cBilTableIDs = ALLT(oRes.GetParam([RST],[BIL_TABLE]))
	*--Ïðîâåðèì êîððåêòíîñòü äàííûõ î ïðîäàæàõ
	DO CASE
		CASE lnSalesID = -1
			MESSAGEBOX([Äåíü óæå çàêðûò.]+CHR(13)+[Îáðàòèòåñü ê àäìèíèñòðàòîðó.],16,[Îøèáêà])
			oApp.lUserChange = .T.
			RETURN .F.

		CASE INLIST(lnSalesID,-2,-3)
			MESSAGEBOX([Îñòàëèñü íå çàêðûòûìè áîëåå îäíîãî äíÿ.]+CHR(13)+[Îáðàòèòåñü ê àäìèíèñòðàòîðó.],16,[Îøèáêà])
			oApp.lUserChange = .T.
			RETURN .F.

		CASE lnSalesID = -4

			*--Åñëè ñìåíà îòêðûòà áîëåå ñóòîê, òðåáóåì çàêðûòü åå
			IF MESSAGEBOX([C ìîìåíòà íà÷àëà ïîñëåäíåé ñìåíû ïðîøëî] + CHR(13) + ;
						  [áîëåå 24 ÷àñîâ.Çàêðûòü ñìåíó?],4+32,[Ñìåíà]) = 6
				***
			    This._CloseDay()
				***
			ENDIF
			
			RETURN .F.
			
		CASE lnSalesID = -5
			MESSAGEBOX([Íåèçâåcòíàÿ îøèáêà],16,[Îøèáêà])
			RETURN .F.
			
		OTHERWISE
			thisform.nsalesid = lnSalesID
	ENDCASE
	*------------------------------------------------------------------------------

	*--Îáíîâèì ñïðàâî÷íèê ñòîëîâ
	_PARAM1 = .lnTblType
	_PARAM2 = .lnTblPar
	REQUERY([lvOUTableList])
	*-------------------------------------------------------------------------------
	* íîìåð ñòîëèêà ïî-óìîë÷àíèþ
	.nDefTableId = lvOUTableList.Id
	.CreateFrt()
	._checkManeg()
	*.cnttuchmenumain.paint(1)
IF VARTYPE(tnFrmID)&lt;&gt;'N' OR tnFrmID = 0 &amp;&amp; Áûñòðîå äîáàâëåíèå çàêàçà
	.nfrmid=0
	._TableMap()
	RETURN
	*--îòêðîåì ñ÷åò  è óñòàíîâèì çíà÷åíèÿ ïî óìîë÷àíèþ
	USE IN SELECT([lvFrmEdit])
	USE lvFrmEdit IN 0 NODATA
	CURSORSETPROP([BUFFERING],3,[lvFrmEdit])
	SELECT lvFrmEdit
	APPEND BLANK
	*------------------------------------------------------------------------------
	REPL lvFrmEdit.PointIspCltID WITH .lnDefClt, ;
		 lvFrmEdit.PointEmiCltID WITH .lnWaiterID, ;  &amp;&amp; ýòî îñòàâèì âðåììåíî - ïîòîì óáåðåì
		 lvFrmEdit.DevCltId WITH .lnWaiterID, ;
		 lvFrmEdit.FrmTypeID WITH .nFrmTypeID, ;
		 lvFrmEdit.FrmDate WITH DATETIME(), ;
		 lvFrmEdit.ID_ WITH 1, ;
		 lvFrmEdit.FrmCurTypeID WITH 1
	IF TABLEUPDATE(1,.T.,[lvFrmEdit])
.nFrmID = spGetLastIncrementedID([lvFrmEdit])
ELSE
MESSAGEBOX('Âî âðåìÿ ñîõðàíåíèÿ äàííûõ ïðîèçîøëà îøèáêà',0+16,'Ïåðäóïðåæäåíèå')
RETURN .f.
	ENDIF
ENDIF

	*09.04.2006 14:54 -&gt;îáíîâèì Alias-û äëÿ ðåäàêòèðîâàíèÿ çàêàçà (øàïêà è ïîçèöèè)
	_PARAM = .nFrmID
	REQUERY([lvFrmEdit])
	_PARAM1 = .lndisctvrid
	REQUERY([lvOrderTvrView])
	*USE lvFrmSumView IN 0

	*--åñëè åñòü íîìåð êàðòî÷êè, ïîêàæåì åãî
	IF !ISNULL(lvFrmEdit.PointIspOUID) AND !EMPTY(lvFrmEdit.PointIspOUID)
		USE IN SELECT([lvCardViewByCardID])
		_PARAM = lvFrmEdit.PointIspOUID
		USE lvCardViewByCardID IN 0
		
		IF RECCOUNT([lvCardViewByCardID])&gt;0
*			.txtCardNo.value = ALLTRIM(lvCardViewByCardID.CardNo)
		ENDIF
	ENDIF
	




	*--äîáàâèì âàðèàíò îïëàòû ïî VIP êàðòå, åñëè ýòî âîçìîæíî
	.addVIP()
	
	*--íàðèñóåì êíîïî÷íîå ìåíþ
*	.grdmenu._rsrequery(1)
	*--åñëè ðàáîòàåò ìåíåäæåð, òî çàïðåòèì ðåäàêòèðîâàíèå äàííûõ, äîñòóïíî òîëüêî çàêðûòèå ñìåíû
	IF tlReadOnly
		.lReadOnly = .T.
*		.GrdOrder.ReadOnly = .T.
*		.GrdMenu.ReadOnly = .T.
*		this.TxtAttr.ReadOnly = .T.
		.cntOUTableID.Enabled = .F.
		
		IF .lnMODEDISC&lt;&gt;1
*			.CntDiscID.Enabled = .F.
		ELSE
*			.cmdDisc.Enabled = .F.
*			.cmdNoDisc.Enabled = .F.
		ENDIF
		.block_input(tlReadOnly)

		*!*			.CmdUp.Enabled = .F.
		*!*			.CmdPlus.Enabled = .F.
		*!*			.CmdMinus.Enabled = .F.
		*!*			.CmdDel.Enabled = .F.
		*!*			.CmdDevOrder.Enabled = .F.
		*!*			.txtbarcod.Enabled = .F.
		*!*			.cmdEnter.Enabled = .F.
		*!*			.CmdPrint.Enabled = .F.
		*!*			.CmdOrderDel.Enabled = .F.
		*!*			.CmdCHKBACK.Enabled = .F.
		*!*			.CmdPredchk.Enabled = .F.
		*!*			.CmdPay.Enabled = .F.
		*!*			.CmdManager.Enabled = .F.
		*!*			.cntCltID.Enabled = .F.
	ELSE
		*--åñëè â çàêàçå óæå åñòü ñêèäêà, òî çàïðåòèì ðåäàêòèðîâàíèå çàêàçà
		SELECT lvOrderTvrView
		LOCATE FOR lvOrderTvrView.TvrID = .lnDiscTvrID
		IF FOUND()
			llblock = .T.
		ENDIF
		
		*--åñëè áûë íàïå÷àòàí ïðåä÷åê, òî çàïðåòèì ââîä äàííûõ
		SELECT lvOrderTvrView
		COUNT FOR BITTEST(lvOrderTvrView.TvrAttr,2) TO lnPredchk

		IF lnPredchk &gt; 0
			llblock = .T.
		ENDIF	
		
		IF llblock
			.block_input(llblock)
		ENDIF
	ENDIF

	
	.cnttuchordpay.blockall(.t.)

	*--âîçìîæíû ðàçëè÷íûå âàðèàíòû ïðåäîñòàâëåíèÿ ñêèäêè
	DO CASE
		CASE .lnMODEDISC=1
			*--äëÿ Ëèäåðà
*			.cntDiscID.Width = .cntDiscID.txtText.Width-1
*			.cmdDisc.Left = .cntDiscID.Left+.cntDiscID.Width+1
*			.cmdNoDisc.Left = .cmdDisc.Left+.cmdDisc.Width+1
			
		OTHERWISE
			*--äëÿ Êîëüöîâî
*			.cmdDisc.Enabled = .F.
*			.cmdDisc.Visible = .F.
*			.cmdNoDisc.Enabled = .F.
*			.cmdNoDisc.Visible = .F.
	ENDCASE
.cntORDDETAIL.grdOrder._refreshrelatedobjects()
.cntORDDETAIL.grdOrder.SetFocus()
ENDWITH
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE Load
*------------------------------------------------------------------------------
* Project.........: BASIS.PJX
* Library.........: RST_V1.VCX
* Class.Module....: FRORDEREDIT.LOAD
* Called by.......: &lt;Sys Event&gt;
* Parameters......: &lt;none&gt;
* Returns.........: &lt;none&gt;
* Notes...........: Çàãðóçêà äàííûõ äëÿ ôîðìû.
*------------------------------------------------------------------------------
*--Âûïîëíèì ìåòîä ðîäèòåëüñêîãî êëàññà
DODEFAULT()
*------------------------------------------------------------------------------

*--Îòêðûâàåì è óñòàíàâëèâàåì òåêóùóþ ÁÄ
IF !DBUSED([BASIS])
	OPEN DATABASE BASIS
ENDIF
***
SET DATABASE TO BASIS	
*------------------------------------------------------------------------------

*--Îòêðûâàåì lv äëÿ ðåäàêòèðîâàíèÿ äîêóìåíòîâ (ïóñòîé)
USE lvFrmEdit IN 0 NODATA
CURSORSETPROP([BUFFERING],3,[lvFrmEdit])
*------------------------------------------------------------------------------

*--Îòêðîåì ñïðàâî÷íèê ñòîëîâ
USE lvOUTableList IN 0 NODATA

*--Îòêðîåì ñïðàâî÷íèê êëèåíòîâ ðåñòîðàíà
USE lvCltRSTList IN 0

*--Îòêðîåì ñïðàâî÷íèê ñêèäîê
USE lvDiscList IN 0

*--îòêðîåì ñïðàâî÷íèê áûñòðîãî âûáîðà áëþä
_PARAM =  VAL(oRes.GetParam([RST],[SETNUM]))
USE lvPOSFuncInSetView IN 0
*--Îòêðîåì ñîäåðæèìîå çàêàçà
USE lvOrderTvrView IN 0 NODATA
USE lvOrderView IN 0 NODATA
*--îòêðîåì lv äëÿ ïðèâÿçîê ïðè÷èí îòêàçà ê áëþäàì (ïðè óäàëåíèè ìåíåäæåðîì) - ïóñòîé
USE lvTvrCncRsnEdit IN 0 NODATA
CURSORSETPROP([BUFFERING],3,[lvTvrCncRsnEdit])

*--îòêðîåì ñïèñîê ìîäèôèêàòîðîâ (ïóñòîé)
USE lvModList IN 0 NODATA
CURSORSETPROP([BUFFERING],3,[lvModList])

*--ñîçäàäèì ïóñòóþ òàáëèöó äëÿ ãðóïï ìåíþ (â çàâèñèìîñòè îò ÷èñëà êîëîíîê)
*CREATE TABLE tmp\tmpmenugrp.dbf FREE (t1 C(40),t2 C(40))

*--ñîçäàäèì ïóñòóþ òàáëèöó äëÿ ìåíþ (â çàâèñèìîñòè îò ÷èñëà êîëîíîê)
*CREATE TABLE tmp\tmpmenu.dbf FREE (t1 C(40),t2 C(40),t3 C(40),t4 C(40))

*------------------------------------------------------------------------------

*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
PROCEDURE LostFocus
DODEFAULT()
		thisform.olecommprox1._close()

ENDPROC
PROCEDURE reportx
IF ! _spVerifyUserGrant(oApp.nUserKod,[CustomFunc],[XACC])
	MESSAGEBOX('Ó Âàñ íåò ïðàâ íà ñíÿòèå Õ-îò÷åòà.', 0+64,'Îáðàòèòåñü ê àäìèíèñòðàòîðó')
	RETURN
ENDIF

WITH This
.NewObject('Shtrih',.lcKkmLib,'kkms.vcx')

.Shtrih.ReportX()
*18.06.2008 12:35 -&gt;
IF .Shtrih.ErrorCode # 0
	MESSAGEBOX([Îøèáêà ]  + PADL(ALLTRIM(STR(.Shtrih.ErrorCode)),3) + [êàññû ïðè ïå÷àòè X-îò÷åòà.],0+64+4096,'Ïå÷àòàòü îò÷åò íåâîçìîæíî',4500)
	*------------------------------------------------------------------------------
ENDIF
.Shtrih.RELEASE
ENDWITH



ENDPROC
PROCEDURE tbloff
LOCAL lcBilTableIDs, lnTableNum
*--îïðåäåëèì ID òîâàðîâ "áèëüÿðäíûå ñòîëû, êîòîðûå íàäî âûêëþ÷èòü"
lcBilTableIDs = this.cBilTableIDs
IF NOT EMPTY(lcBilTableIDs )
	SELECT VAL(SUBSTR(TvrNM,1,3)) AS TableNum FROM lvOrderTvrView WHERE TvrID IN (&amp;lcBilTableIDs) INTO CURSOR BilTbl
	IF _tally&gt;0
		IF !VARTYPE(thisform.MPOS)='O'
			thisform.NewObject('MPOS','MPOS','MPOS.vcx')
		ENDIF
		SELECT BilTbl
		SCAN
			thisform.MPOS.ChannelOff(BilTbl.TableNum)
		ENDSCAN
	ENDIF
	USE IN BilTbl
	*thisform.MPOS.Destroy
ENDIF

ENDPROC
PROCEDURE tblon
LOCAL lcBilTableIDs, lnTableNum
*--îïðåäåëèì ID òîâàðîâ "áèëüÿðäíûå ñòîëû, êîòîðûå íàäî âêëþ÷èòü"
lcBilTableIDs = this.cBilTableIDs
IF NOT EMPTY(lcBilTableIDs )
	SELECT VAL(SUBSTR(TvrNM,1,3)) AS TableNum FROM lvOrderTvrView WHERE TvrID IN (&amp;lcBilTableIDs) INTO CURSOR BilTbl
	IF _tally&gt;0
		IF !VARTYPE(thisform.MPOS)='O'
			thisform.NewObject('MPOS','MPOS','MPOS.vcx')
		ENDIF
		SELECT BilTbl
		SCAN
			thisform.MPOS.ChannelOn(BilTbl.TableNum)
		ENDSCAN
	ENDIF
	USE IN BilTbl
ENDIF

ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1>Class</reserved1>
		<reserved2>17</reserved2>
		<reserved3>nfrmid
lorderpay
_qntintable
ncashno Íîìåð êàññû (óíèêàëüíûé)
nsalesid
ncheckid
nordersum èòîã ïî çàêàçó
lmanagerwork
_menusel îêîí÷àòåëüíûé âûáîð áëþäà èç ìåíþ
lreadonly
nprctypeid èäåíòèôèêàòîð ïðàéñà
lorderdelm ïðèçíàê óäàëåíèÿ âñåãî çàêàçà ìåíåäæåðîì
lblock ôëàã áëîêèðîâêè ââîäà
npayvarnum ÷èñëî âàðèàíòîâ îïëàòû
lorderreturn ôëàã âîçâðàòà
lndisctvrid îïðåäåëèì ID òîâàðà "ñêèäêà" 
lnmodedisc ïîëó÷èì ðåæèì ñêèäêè
lnwaiterid ïîëó÷èì êîä òåêóùåãî îôèöèàíòà
lntblpar ïîëó÷èì êîä ïîäðàçäåëåíèÿ, ñîäåðæàùåãî ñòîëû
lntbltype ïîëó÷èì òèï ïîäðàçäåëåíèÿ "ñòîë"
lndefclt ïîëó÷èì êîä êëèåíòà ïî óìîë÷àíèþ ("ãîñòü")
lvip ðàçðåøåíèå íà ðàáîòó ñ Vip êàðòàìè
lfrmautonum àâòîíóìåðàöèÿ çàêàçîâ
npredchk êîëè÷åñòâî òîâàðîâ ñ ïå÷àòüþ ïðåä÷åêà
lcmdpay Äîïóñòèìîñòü îïëàòû íà ýòîì ðàá.ìåñòå
nprintinfprech Äîïóñòèìîñòü ïå÷àòè ïðå-÷åêà íà ýòîì ðàá.ìåñòå (0 - ðàáîòà áåç ïðå-÷åêîâ, 1- ïå÷àòü íà ôèñêàëüíèêå, 2 - íà ñåòåâîì ïðèíòåðå, -1 - íàäî ïå÷àòàòü íà äðóãîì ìåñòå)
cprinter Íàçâàíèå â ñåòè ïðèíòåðà ïðå-÷åêîâ
ndiscrate Ïðîöåíò èëè íàòóðàëüíîå çíà÷åíèå ñêèäêè
ndiscsumm Ñóììà ñêèäêè íàòóðàëüíàÿ
nfrmtypeid ïîëó÷èì êîä òèïà äîêóìåíòà "çàêàç"
ndeftableid íîìåð ñòîëèêà ïî-óìîë÷àíèþ
uretval âîçâðàò çíà÷åíèÿ
lckkmlib Êëàññ ñ êàññîâûì àïïàðàòîì
cbiltableids ID òîâàðîâ "áèëüÿðäíûå ñòîëû, êîòîðûå íàäî âûêëþ÷èòü"
lismanager ïîëüçîâàòåëü ÿâëÿåòñÿ ìåíåäæåðîì
lchkback äîñòóïíîñòü âîçâðàòà
lzrep äîñòóïíîñòü çàêðûòèÿ ñìåíû (Z-îò÷åò)
lxreport äîñòóïíîñòü X-îò÷åòà
lorderdel äîñòóïíîñòü óäàëåíèÿ çàêàçà
lpredchkcancel äîñòóïíîñòü îòìåíû ïðåä÷åêà
ldelposition äîñòóïíîñòü óäàëåíèÿ ïîçèöèé
lmarkcancel äîñòóïíîñòü îòìåíû ñåðâèñ-ïå÷àòè
lmodyservprint Ìîäèôèöèðîâàòü îò÷åò äëÿ ñåðâèñà?
lmodyservprintñancel Ìîäèôèöèðîâàòü îò÷åò äëÿ ïå÷àòè?
lmodypredprint Ìîäèôèöèðîâàòü ïðåä÷åê?
*_ok âûõîä èç ôîðìû ñ ñîõðàíåíèåì
*_paintmenu 
*_clickmenu 
*_closeday çàêðûòèå äíÿ (ñìåíû)
*_block_in áëîêèðîâêà/ðàçáëîêèðîâêà ââîäà äàííûõ
*getcardinfo 
*addvip 
*_storechecktrans_pred ïå÷àòü ïðåä÷åêà
*tblon Âêëþ÷åíèå áèëüÿðäíîãî ñòîëà
*tbloff Îòêëþ÷åíèå áèëüÿðäíîãî ñòîëà
*_printpredcheck ïå÷àòü ïðåä÷åêà
*_printmarka ïå÷àòü ìàðêè
*_payorder Îïëàòà ñ÷åòà
*_closethis çàêðûòèå ýòîé ôîðìû
*_deleallorder óäàëåíèå âñåãî çàêàçà
*block_input çàáëîêèðîâàòü êíîïêè èçìåíåíèÿ çàêàçà
*_printpretoprinter Ïå÷àòü ïðåä÷åêà íà wind- ïðèíòåð
*_guestcard Âûáðàòü êàðòó ãîñòÿ áåç ñ÷èòûâàòåëÿ
*_disccalc Ðàññ÷åò ñêèäêè ïî êàðòå Ãîñòÿ
*_tablemap Âûâîäèì íà ýêðàí êàîòó çàâåäåíèÿ
*_showorders Ïîêàçàòü îñòàëüíûå çàêàçû (ïî ñòîëó TABLE, ïî îôèöàíòó SERV, âñå ALL)
*_add_order Äîáàâëåíèå íîâîãî çàêàçà íà ýòîì ñòîëå
*_activate_ord àêòèâèçèðóåò çàêàç ñ íóæíûì id
*closeday Çàêðûòèå äíÿ ñ ïå÷àòüþ z îò÷åòà
*cashincome Âíåñåíèå äåíåã â êàññó
*cashoutcome Èçúÿòèå äåíåã èç êàññû
*createfrt Ñîçäàåò ëîêàëüíûå êîïèè ôàéëîâ îò÷åòîâ: ìàðêà, ïðåä÷åê, ïðåä÷åê îòìåíû
*_checkmaneg ïðîâåðêà ïîëíîìî÷èé ñîòðóäíèêà
*opendrawer îòêðûòü äåí ÿùèê
*reportx Ïîäãîòîâêà X-îò÷åòà
</reserved3>
		<reserved4/>
		<reserved5/>
		<reserved6>Pixels</reserved6>
		<reserved7>ôîðìà äëÿ ðåäàêòèðîâàíèÿ çàêàçà ïî Ald</reserved7>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2KU0UZC2V</uniqueid>
		<timestamp>1010394549</timestamp>
		<class>cnttuchordmanag</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>Cnttuchmanag</objname>
		<parent>frmorderedit</parent>
		<properties>Top = 468
Left = 0
Enabled = .F.
Visible = .F.
ZOrderSet = 0
ncountx = 8
Name = "Cnttuchmanag"
Cmd12.Caption = "Õ - îò÷åò"
Cmd12.Name = "Cmd12"
LBL11.Name = "LBL11"
Cmd13.Caption = "ïîñìîòðåòü âñå çàêàçû"
Cmd13.Enabled = .F.
Cmd13.Name = "Cmd13"
Cmd14.Caption = "èçúÿòü äåíüãè"
Cmd14.Name = "Cmd14"
Cmd15.Caption = "îòêðûòü äåí. ÿùèê"
Cmd15.Name = "Cmd15"
Cmd16.Caption = ""
Cmd16.Enabled = .F.
Cmd16.Name = "Cmd16"
Cmd17.Caption = ""
Cmd17.Enabled = .F.
Cmd17.Name = "Cmd17"
Cmd18.Caption = ""
Cmd18.Enabled = .F.
Cmd18.Name = "Cmd18"
Cmd22.Caption = "Z - îò÷åò"
Cmd22.Name = "Cmd22"
Cmd23.Caption = "çàêðûòü ñìåíó"
Cmd23.Enabled = .F.
Cmd23.Name = "Cmd23"
Cmd24.Caption = "âíåñòè äåíüãè"
Cmd24.Name = "Cmd24"
Cmd25.Caption = "èíâåíòàðí. âåäîìîñòü"
Cmd25.Enabled = .F.
Cmd25.Name = "Cmd25"
Cmd26.Caption = ""
Cmd26.Enabled = .F.
Cmd26.Name = "Cmd26"
Cmd27.Caption = ""
Cmd27.Enabled = .F.
Cmd27.Name = "Cmd27"
Cmd11.Caption = "ÇÀÊÐÛÒÜ äåéñòâèÿ"
Cmd11.BackColor = 0,128,64
Cmd11.Name = "Cmd11"
Cmd28.Caption = ""
Cmd28.Enabled = .F.
Cmd28.Name = "Cmd28"
</properties>
		<protected/>
		<methods>PROCEDURE Cmd11.Click
this.parent.Enabled = .f.
this.parent.Visible = .f.
thisform.cnttuchordmanag.Enabled = .t.
thisform.cnttuchordmanag.Visible = .t.
ENDPROC
PROCEDURE Cmd12.Click
thisform.reportX()
ENDPROC
PROCEDURE Cmd13.Click
LPARAMETERS tcarry
thisform.cntORDDETAIL._dele()

ENDPROC
PROCEDURE Cmd14.Click
LPARAMETERS tcarry
thisform.CashOUTcome()

ENDPROC
PROCEDURE Cmd15.Click
thisform.OpenDrawer()

ENDPROC
PROCEDURE Cmd16.Click
RETURN
ENDPROC
PROCEDURE Cmd17.Click
RETURN
ENDPROC
PROCEDURE Cmd18.Click
RETURN
ENDPROC
PROCEDURE Cmd22.Click
LPARAMETERS tcarry
thisform.CloseDay()

ENDPROC
PROCEDURE Cmd23.Click
LPARAMETERS tcarry
thisform.CloseDay()

ENDPROC
PROCEDURE Cmd24.Click
LPARAMETERS tcarry
thisform.CashINcome()

ENDPROC
PROCEDURE Cmd25.Click
RETURN
ENDPROC
PROCEDURE Cmd26.Click
RETURN
ENDPROC
PROCEDURE Cmd27.Click
RETURN
ENDPROC
PROCEDURE Cmd28.Click
RETURN
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2KB14IY6Y</uniqueid>
		<timestamp>1010394549</timestamp>
		<class>lbl</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>label</baseclass>
		<objname>lblStat</objname>
		<parent>frmorderedit</parent>
		<properties>AutoSize = .F.
FontBold = .T.
FontSize = 10
WordWrap = .T.
Caption = ""
Height = 40
Left = 0
Top = 560
Width = 800
ZOrderSet = 1
Name = "lblStat"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2KT18N49F</uniqueid>
		<timestamp>1010394249</timestamp>
		<class>grd</class>
		<classloc>base_v1.vcx</classloc>
		<baseclass>grid</baseclass>
		<objname>GrdOrderList</objname>
		<parent>frmorderedit</parent>
		<properties>ColumnCount = 2
FontBold = .T.
Enabled = .F.
Height = 562
Panel = 1
RecordMark = .F.
RecordSource = "lvOrderView"
RowHeight = 36
ScrollBars = 2
Visible = .F.
Width = 800
ZOrderSet = 2
Name = "GrdOrderList"
Column1.FontBold = .T.
Column1.ControlSource = "lvOrderView.OrderNote"
Column1.Enabled = .F.
Column1.Width = 723
Column1.Visible = .T.
Column1.Name = "Column1"
Column2.FontBold = .T.
Column2.ControlSource = "lvOrderView.FrmId"
Column2.Enabled = .F.
Column2.Width = 59
Column2.Visible = .T.
Column2.Name = "Column2"
</properties>
		<protected/>
		<methods>PROCEDURE AfterRowColChange
LPARAMETERS tnColIndex
NODEFAULT
ENDPROC
PROCEDURE DblClick
NODEFAULT
ENDPROC
PROCEDURE refreshhandledhotkey
NODEFAULT
ENDPROC
PROCEDURE refreshrsstate
NODEFAULT
ENDPROC
PROCEDURE refreshruntimeprops
LPARAMETERS tlForceRefresh
NODEFAULT
ENDPROC
PROCEDURE When
NODEFAULT
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2KT18N49R</uniqueid>
		<timestamp>978426121</timestamp>
		<class>header</class>
		<classloc/>
		<baseclass>header</baseclass>
		<objname>Header1</objname>
		<parent>frmorderedit.GrdOrderList.Column1</parent>
		<properties>FontBold = .T.
Alignment = 2
Caption = "ÇÀÊÀÇÛ"
Name = "Header1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2KT18N49S</uniqueid>
		<timestamp>1010394249</timestamp>
		<class>textbox</class>
		<classloc/>
		<baseclass>textbox</baseclass>
		<objname>Text1</objname>
		<parent>frmorderedit.GrdOrderList.Column1</parent>
		<properties>FontBold = .T.
FontSize = 10
BorderStyle = 0
Enabled = .F.
Margin = 0
Visible = .T.
ForeColor = 0,0,0
BackColor = 255,255,255
Name = "Text1"
</properties>
		<protected/>
		<methods>PROCEDURE Click
thisform._activate_ord(lvOrderView.FrmId)
ENDPROC
PROCEDURE DblClick
NODEFAULT
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2KT18N49V</uniqueid>
		<timestamp>978426121</timestamp>
		<class>header</class>
		<classloc/>
		<baseclass>header</baseclass>
		<objname>Header1</objname>
		<parent>frmorderedit.GrdOrderList.Column2</parent>
		<properties>FontBold = .T.
Alignment = 2
Caption = "Id"
Name = "Header1"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2KT18N49W</uniqueid>
		<timestamp>1010394249</timestamp>
		<class>textbox</class>
		<classloc/>
		<baseclass>textbox</baseclass>
		<objname>Text1</objname>
		<parent>frmorderedit.GrdOrderList.Column2</parent>
		<properties>FontBold = .T.
BorderStyle = 0
Enabled = .F.
Margin = 0
Visible = .T.
ForeColor = 0,0,0
BackColor = 255,255,255
Name = "Text1"
</properties>
		<protected/>
		<methods>PROCEDURE Click
thisform._activate_ord(lvOrderView.FrmId)
ENDPROC
PROCEDURE DblClick
NODEFAULT
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2KS0OSLKU</uniqueid>
		<timestamp>1010394549</timestamp>
		<class>cnttablepad</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>Cnttablepad</objname>
		<parent>frmorderedit</parent>
		<properties>Top = -3
Left = 0
Enabled = .F.
Visible = .F.
ZOrderSet = 3
Name = "Cnttablepad"
img.ZOrderSet = 0
img.Name = "img"
Cmd11.ZOrderSet = 1
Cmd11.Name = "Cmd11"
LBL11.ZOrderSet = 2
LBL11.Name = "LBL11"
Cmd12.ZOrderSet = 3
Cmd12.Name = "Cmd12"
Cmd13.ZOrderSet = 4
Cmd13.Name = "Cmd13"
Cmd14.ZOrderSet = 5
Cmd14.Name = "Cmd14"
Cmd15.ZOrderSet = 6
Cmd15.Name = "Cmd15"
Cmd16.ZOrderSet = 7
Cmd16.Name = "Cmd16"
Cmd17.ZOrderSet = 8
Cmd17.Name = "Cmd17"
Cmd18.ZOrderSet = 9
Cmd18.Name = "Cmd18"
Cmd19.ZOrderSet = 10
Cmd19.Name = "Cmd19"
Cmd21.ZOrderSet = 11
Cmd21.Name = "Cmd21"
Cmd22.ZOrderSet = 12
Cmd22.Name = "Cmd22"
Cmd23.ZOrderSet = 13
Cmd23.Name = "Cmd23"
Cmd24.ZOrderSet = 14
Cmd24.Name = "Cmd24"
Cmd25.ZOrderSet = 15
Cmd25.Name = "Cmd25"
Cmd26.ZOrderSet = 16
Cmd26.Name = "Cmd26"
Cmd27.ZOrderSet = 17
Cmd27.Name = "Cmd27"
Cmd28.ZOrderSet = 18
Cmd28.Name = "Cmd28"
Cmd29.ZOrderSet = 19
Cmd29.Name = "Cmd29"
Cmd31.ZOrderSet = 20
Cmd31.Name = "Cmd31"
Cmd32.ZOrderSet = 21
Cmd32.Name = "Cmd32"
Cmd33.ZOrderSet = 22
Cmd33.Name = "Cmd33"
Cmd35.ZOrderSet = 23
Cmd35.Name = "Cmd35"
Cmd36.ZOrderSet = 24
Cmd36.Name = "Cmd36"
Cmd37.ZOrderSet = 25
Cmd37.Name = "Cmd37"
Cmd38.ZOrderSet = 26
Cmd38.Name = "Cmd38"
Cmd39.ZOrderSet = 27
Cmd39.Name = "Cmd39"
Cmd41.ZOrderSet = 28
Cmd41.Name = "Cmd41"
Cmd42.ZOrderSet = 29
Cmd42.Name = "Cmd42"
Cmd43.ZOrderSet = 30
Cmd43.Name = "Cmd43"
Cmd44.ZOrderSet = 31
Cmd44.Name = "Cmd44"
Cmd45.ZOrderSet = 32
Cmd45.Name = "Cmd45"
Cmd46.ZOrderSet = 33
Cmd46.Name = "Cmd46"
Cmd47.ZOrderSet = 34
Cmd47.Name = "Cmd47"
Cmd48.ZOrderSet = 35
Cmd48.Name = "Cmd48"
Cmd49.ZOrderSet = 36
Cmd49.Name = "Cmd49"
Cmd51.ZOrderSet = 37
Cmd51.Name = "Cmd51"
Cmd52.ZOrderSet = 38
Cmd52.Name = "Cmd52"
Cmd53.ZOrderSet = 39
Cmd53.Name = "Cmd53"
Cmd54.ZOrderSet = 40
Cmd54.Name = "Cmd54"
Cmd55.ZOrderSet = 41
Cmd55.Name = "Cmd55"
Cmd56.ZOrderSet = 42
Cmd56.Name = "Cmd56"
Cmd57.ZOrderSet = 43
Cmd57.Name = "Cmd57"
Cmd58.ZOrderSet = 44
Cmd58.Name = "Cmd58"
Cmd59.ZOrderSet = 45
Cmd59.Name = "Cmd59"
Cmd61.ZOrderSet = 46
Cmd61.Name = "Cmd61"
Cmd62.ZOrderSet = 47
Cmd62.Name = "Cmd62"
Cmd63.ZOrderSet = 48
Cmd63.Name = "Cmd63"
Cmd64.ZOrderSet = 49
Cmd64.Name = "Cmd64"
Cmd65.ZOrderSet = 50
Cmd65.Name = "Cmd65"
Cmd66.ZOrderSet = 51
Cmd66.Name = "Cmd66"
Cmd67.ZOrderSet = 52
Cmd67.Name = "Cmd67"
Cmd68.ZOrderSet = 53
Cmd68.Name = "Cmd68"
Cmd69.ZOrderSet = 54
Cmd69.Name = "Cmd69"
Cmd71.ZOrderSet = 55
Cmd71.Name = "Cmd71"
Cmd72.ZOrderSet = 56
Cmd72.Name = "Cmd72"
Cmd73.ZOrderSet = 57
Cmd73.Name = "Cmd73"
Cmd74.ZOrderSet = 58
Cmd74.Name = "Cmd74"
Cmd75.ZOrderSet = 59
Cmd75.Name = "Cmd75"
Cmd76.ZOrderSet = 60
Cmd76.Name = "Cmd76"
Cmd77.ZOrderSet = 61
Cmd77.Name = "Cmd77"
Cmd78.ZOrderSet = 62
Cmd78.Name = "Cmd78"
Cmd79.ZOrderSet = 63
Cmd79.Name = "Cmd79"
Cmd89.ZOrderSet = 64
Cmd89.Name = "Cmd89"
Cmd88.ZOrderSet = 65
Cmd88.Name = "Cmd88"
Cmd87.ZOrderSet = 66
Cmd87.Name = "Cmd87"
Cmd86.ZOrderSet = 67
Cmd86.Name = "Cmd86"
Cmd85.ZOrderSet = 68
Cmd85.Name = "Cmd85"
Cmd84.ZOrderSet = 69
Cmd84.Name = "Cmd84"
Cmd83.ZOrderSet = 70
Cmd83.Name = "Cmd83"
Cmd82.ZOrderSet = 71
Cmd82.Name = "Cmd82"
Cmd81.FontBold = .T.
Cmd81.Caption = "ÇÀÊÐÛÒÜ"
Cmd81.Visible = .T.
Cmd81.ForeColor = 255,255,255
Cmd81.BackColor = 255,0,0
Cmd81.ZOrderSet = 97
Cmd81.Name = "Cmd81"
Cmd34.ZOrderSet = 72
Cmd34.Name = "Cmd34"
Cmd110.ZOrderSet = 73
Cmd110.Name = "Cmd110"
Cmd111.ZOrderSet = 74
Cmd111.Name = "Cmd111"
Cmd210.ZOrderSet = 75
Cmd210.Name = "Cmd210"
Cmd211.ZOrderSet = 76
Cmd211.Name = "Cmd211"
Cmd310.ZOrderSet = 77
Cmd310.Name = "Cmd310"
Cmd311.ZOrderSet = 78
Cmd311.Name = "Cmd311"
Cmd410.ZOrderSet = 79
Cmd410.Name = "Cmd410"
Cmd411.ZOrderSet = 80
Cmd411.Name = "Cmd411"
Cmd510.ZOrderSet = 81
Cmd510.Name = "Cmd510"
Cmd511.ZOrderSet = 82
Cmd511.Name = "Cmd511"
Cmd610.ZOrderSet = 83
Cmd610.Name = "Cmd610"
Cmd611.ZOrderSet = 84
Cmd611.Name = "Cmd611"
Cmd710.ZOrderSet = 85
Cmd710.Name = "Cmd710"
Cmd711.ZOrderSet = 86
Cmd711.Name = "Cmd711"
Cmd811.ZOrderSet = 87
Cmd811.Name = "Cmd811"
Cmd810.ZOrderSet = 88
Cmd810.Name = "Cmd810"
Cmd112.ZOrderSet = 89
Cmd112.Name = "Cmd112"
Cmd212.ZOrderSet = 90
Cmd212.Name = "Cmd212"
Cmd312.ZOrderSet = 91
Cmd312.Name = "Cmd312"
Cmd412.ZOrderSet = 92
Cmd412.Name = "Cmd412"
Cmd512.ZOrderSet = 93
Cmd512.Name = "Cmd512"
Cmd612.ZOrderSet = 94
Cmd612.Name = "Cmd612"
Cmd712.ZOrderSet = 95
Cmd712.Name = "Cmd712"
Cmd812.ZOrderSet = 96
Cmd812.Name = "Cmd812"
</properties>
		<protected/>
		<methods>PROCEDURE Cmd81.Click
thisform._closeThis
ENDPROC
PROCEDURE onclickcmd
LPARAMETERS lnStarting, lnCmd
LOCAL lRes
thisform.nDefTableId = ABS(lnStarting)
DO CASE
	CASE lnStarting &gt;0 &amp;&amp; ðàáîòà ñî ñïèñêîì çàêàçîâ
		thisform._ShowOrders([TABLE],lnStarting)
	CASE lnStarting &lt;0 &amp;&amp; äîáàâëåíèå çàêàçà
		IF !ThisForm._add_order(ABS(lnStarting))
			thisform._ShowOrders()
		ENDIF
ENDCASE

ENDPROC
PROCEDURE paint
LPARAMETER	lnPageNo
IF PCOUNT()&gt;0
ENDIF
*--îòêðîåì ñïèñîê ñòîëîâ äàííîãî îôèöèàíòà
USE IN SELECT([lvWaiterTableView])
_PARAM1 = thisform.nFrmTypeID
_PARAM2 = spUserClt()
USE lvWaiterTableView IN 0
*-- ïîäãîòîâèì äàííûå äëÿ êàðòû ñòîëîâ
DO spTableMap WITH thisform.lntblpar
*------------------------------------------------------------------------------


LOCAL nX,nY,cPict,cPictW, lcexp
SELECT tmpTableMap
LOCATE ALL FOR tmpTableMap.IsPar=1
IF used('tmpTableMap')
IF EMPTY(ALLTRIM(tmpTableMap.PictureNM)) OR ISNULL(tmpTableMap.PictureNM)
	  this.img.Picture = 'd:\develop\work\basis\graphic\ôîí5.bmp'
ELSE
	  this.img.Picture = ALLTRIM(tmpTableMap.PictureNM)
	ENDIF
this.img.visible = .t.
this.img.Stretch = 2
ENDIF
SCAN ALL FOR !tmpTableMap.IsPar=1
		   *--ðèñóåì ñòîëû
			nY = ALLTRIM(STR(IIF(INT((tmpTableMap.CoordX/800)*12)+1&lt;1,1,INT((tmpTableMap.CoordX/800)*12))+1,10,0))
			nX = ALLTRIM(STR(IIF(INT((tmpTableMap.CoordY/600)*8)+1&lt;1,1,INT((tmpTableMap.CoordY/600)*8))+1,10,0))
			lcexp = [this.cmd]+nX+nY
			IF TYPE(lcexp)&lt;&gt;'O' OR lcexp = [this.cmd81]
			SET STEP ON
		LOOP
			ENDIF
	    	WITH &amp;lcexp
			*--íàïèøåì çàãîëîâîê îáúåêòà (íîìåð ñòîëà)
			.caption = ALLTRIM(tmpTableMap.OUNM)
			.Enabled = .t.
			.Visible = .t.
			
	SELECT lvWaiterTableView
			LOCATE ALL FOR lvWaiterTableView.PointEmiOUID = tmpTableMap.OuId
*!*				IF TYPE('.parent.img'+nY+nX)&lt;&gt;'O'
*!*				.parent.NewObject('img'+nY+nX,'img','base_v1.vcx')
*!*				ENDIF
*!*				cPict = [.parent.img]+nY+nX
*!*	            cPictW = cPict+[.Top = .Top]
*!*	            &amp;cPictW
*!*	            cPictW = cPict+[.Left = .Left]
*!*	            &amp;cPictW
*!*	            cPictW = cPict+[.Height = .Height]
*!*	            &amp;cPictW
*!*	            cPictW = cPict+[.Width = .Width]
*!*	            &amp;cPictW
*!*	            cPictW = cPict+[.Stretch = 2]
*!*	            &amp;cPictW
			IF FOUND()
.Starting = lvWaiterTableView.PointEmiOUID	
.Picture = ALLTRIM('a1.ico')
*!*	                cPictW = cPict+[.Picture = ALLTRIM('t6.gif')]
*!*	                &amp;cPictW
ELSE		
.Starting = tmpTableMap.OuId * -1
				.Picture = ALLTRIM('a6.ico')
*!*					cPictW = cPict +[.Picture = ALLTRIM(tmpTableMap.PictureNM)]
*!*					&amp;cPictW
			ENDIF
*!*	            cPictW = cPict+[.visible = .t.]
*!*	            &amp;cPictW
			ENDWITH
		SELECT tmpTableMap
ENDSCAN
SELECT lvWaiterTableView

retu

ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_1RY0N4UD0</uniqueid>
		<timestamp>1010394549</timestamp>
		<class>cnttuchordmanag</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>Cnttuchordmanag</objname>
		<parent>frmorderedit</parent>
		<properties>Top = 468
Left = 0
ZOrderSet = 4
ncountx = 8
Name = "Cnttuchordmanag"
Cmd12.ZOrderSet = 0
Cmd12.Name = "Cmd12"
LBL11.ZOrderSet = 1
LBL11.Name = "LBL11"
Cmd13.ZOrderSet = 2
Cmd13.Name = "Cmd13"
Cmd14.ZOrderSet = 3
Cmd14.Name = "Cmd14"
Cmd15.Enabled = .F.
Cmd15.ZOrderSet = 4
Cmd15.Name = "Cmd15"
Cmd16.ZOrderSet = 5
Cmd16.Name = "Cmd16"
Cmd17.Enabled = .F.
Cmd17.ZOrderSet = 6
Cmd17.Name = "Cmd17"
Cmd18.BackColor = 0,128,64
Cmd18.ZOrderSet = 7
Cmd18.Name = "Cmd18"
Cmd22.ZOrderSet = 8
Cmd22.Name = "Cmd22"
Cmd23.ZOrderSet = 9
Cmd23.Name = "Cmd23"
Cmd24.ZOrderSet = 10
Cmd24.Name = "Cmd24"
Cmd25.Enabled = .F.
Cmd25.ZOrderSet = 11
Cmd25.Name = "Cmd25"
Cmd26.Enabled = .F.
Cmd26.ZOrderSet = 12
Cmd26.Name = "Cmd26"
Cmd27.Enabled = .F.
Cmd27.ZOrderSet = 13
Cmd27.Name = "Cmd27"
Cmd11.ZOrderSet = 15
Cmd11.Name = "Cmd11"
Cmd28.Enabled = .F.
Cmd28.ZOrderSet = 14
Cmd28.Name = "Cmd28"
</properties>
		<protected/>
		<methods>PROCEDURE Cmd13.Click
LPARAMETERS tcarry
thisform.cntORDDETAIL._dele()

ENDPROC
PROCEDURE Cmd14.Click
LPARAMETERS tcarry
DODEFAULT()
thisform.cntORDDETAIL._repe()

ENDPROC
PROCEDURE Cmd16.Click
LPARAMETERS tcarry
thisform.cntORDDETAIL._deliv()

ENDPROC
PROCEDURE Cmd18.Click
this.parent.Enabled = .f.
this.parent.Visible = .f.
thisform.cnttuchmanag.Enabled = .t.
thisform.cnttuchmanag.Visible = .t.

ENDPROC
PROCEDURE Cmd22.Click
LPARAMETERS tcarry
thisform.cntORDDETAIL._half()

ENDPROC
PROCEDURE Cmd23.Click
LPARAMETERS tcarry
thisform.cntorddetail._dele_order()


ENDPROC
PROCEDURE Cmd24.Click
LPARAMETERS tcarry
thisform.cntORDDETAIL._qnt()

ENDPROC
PROCEDURE Cmd25.Click
LPARAMETERS tcarry
thisform.cntORDDETAIL._FreePrc()

ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2DP0RG7ZC</uniqueid>
		<timestamp>1010394549</timestamp>
		<class>cnttuchordinfo</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>Cnttuchordinfo</objname>
		<parent>frmorderedit</parent>
		<properties>Top = 0
Left = 168
ZOrderSet = 5
Name = "Cnttuchordinfo"
Cmd11.Top = 0
Cmd11.Left = 1
Cmd11.BackColor = 201,217,237
Cmd11.Name = "Cmd11"
Cmd12.BackColor = 201,217,237
Cmd12.Name = "Cmd12"
LBL11.Name = "LBL11"
Cmd13.Enabled = .F.
Cmd13.BackColor = 201,217,237
Cmd13.Name = "Cmd13"
Cmd14.BackColor = 201,217,237
Cmd14.Name = "Cmd14"
Cmd15.BackColor = 201,217,237
Cmd15.Name = "Cmd15"
Cmd16.BackColor = 201,217,237
Cmd16.Name = "Cmd16"
</properties>
		<protected/>
		<methods>PROCEDURE Cmd11.Click
ThisForm._add_order(thisform.nDefTableId)

ENDPROC
PROCEDURE Cmd12.Click
thisform._GuestCard()
ENDPROC
PROCEDURE Cmd14.Click
thisform.cntorddetail._qnt_gst()

ENDPROC
PROCEDURE Cmd15.Click
thisform._TableMap()
ENDPROC
PROCEDURE Cmd16.Click
thisform._ShowOrders()  &amp;&amp; ._TableMap()
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2DP0RG7Z8</uniqueid>
		<timestamp>1010394549</timestamp>
		<class>cnttuchmenumain</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>Cnttuchmenumain</objname>
		<parent>frmorderedit</parent>
		<properties>Top = 0
Left = 0
ZOrderSet = 9
Name = "Cnttuchmenumain"
Cmd11.Name = "Cmd11"
Cmd12.Name = "Cmd12"
LBL11.Name = "LBL11"
Cmd11.Name = "Cmd11"
Cmd12.Name = "Cmd12"
Cmd21.Name = "Cmd21"
Cmd22.Name = "Cmd22"
Cmd31.Name = "Cmd31"
Cmd32.Name = "Cmd32"
Cmd41.Name = "Cmd41"
Cmd42.Name = "Cmd42"
Cmd51.Name = "Cmd51"
Cmd52.Name = "Cmd52"
Cmd61.Name = "Cmd61"
Cmd62.Name = "Cmd62"
Cmd71.Name = "Cmd71"
Cmd72.Name = "Cmd72"
Cmd81.Name = "Cmd81"
Cmd82.Name = "Cmd82"
Cmd91.Name = "Cmd91"
Cmd92.Name = "Cmd92"
</properties>
		<protected/>
		<methods>PROCEDURE activatecmd
LPARAMETERS lnCmdNo
DODEFAULT(lnCmdNo)
LOCAL lcString, nSet
IF VARTYPE(lnCmdNo)='N' AND lnCmdNo&lt;&gt;0
lcString = 'nSet = this.Cmd'+ALLTRIM(STR(lnCmdNo,3,0)) +'.starting '
&amp;lcString
WITH thisform.cntTUCHMENU
	.npagemenu = 1
	.lFirstTime = .t.
	.paint(nSet)
ENDWITH
ENDIF

ENDPROC
PROCEDURE onclickcmd
LPARAMETERS lnStarting, lnCmd
DODEFAULT(lnStarting, lnCmd)
thisform.cntORDDETAIL.grdOrder.SetFocus()
ENDPROC
PROCEDURE paint
LPARAMETER	lnPageNo
DODEFAULT(lnPageNo)
this.activatecmd(11)


ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2DP0RG7ZG</uniqueid>
		<timestamp>1010394549</timestamp>
		<class>cnttuchmenu</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>Cnttuchmenu</objname>
		<parent>frmorderedit</parent>
		<properties>Top = 52
Left = 168
ZOrderSet = 10
Name = "Cnttuchmenu"
Cmd22.Name = "Cmd22"
Cmd11.Name = "Cmd11"
LBL11.Name = "LBL11"
Cmd12.Name = "Cmd12"
Cmd13.Name = "Cmd13"
Cmd14.Name = "Cmd14"
Cmd21.Name = "Cmd21"
Cmd23.Name = "Cmd23"
Cmd24.Name = "Cmd24"
Cmd31.Name = "Cmd31"
Cmd32.Name = "Cmd32"
Cmd33.Name = "Cmd33"
Cmd34.Name = "Cmd34"
Cmd41.Name = "Cmd41"
Cmd42.Name = "Cmd42"
Cmd43.Name = "Cmd43"
Cmd44.Name = "Cmd44"
Cmd51.Name = "Cmd51"
Cmd52.Name = "Cmd52"
Cmd53.Name = "Cmd53"
Cmd54.Name = "Cmd54"
Cmd61.Name = "Cmd61"
Cmd62.Name = "Cmd62"
Cmd63.Name = "Cmd63"
Cmd64.Name = "Cmd64"
Cmd71.Name = "Cmd71"
Cmd72.Name = "Cmd72"
Cmd73.Name = "Cmd73"
Cmd74.Name = "Cmd74"
Cmd81.Name = "Cmd81"
Cmd82.Name = "Cmd82"
Cmd83.Name = "Cmd83"
Cmd84.Name = "Cmd84"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2DP0SUJFS</uniqueid>
		<timestamp>1010394549</timestamp>
		<class>cntorddetail</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>Cntorddetail</objname>
		<parent>frmorderedit</parent>
		<properties>Top = 0
Left = 609
ZOrderSet = 11
Name = "Cntorddetail"
Cmd11.Name = "Cmd11"
Cmd12.Name = "Cmd12"
LBL11.Name = "LBL11"
CntTotal.LblName.Name = "LblName"
CntTotal.LblSumm.Name = "LblSumm"
CntTotal.Name = "CntTotal"
CmdGstPlus.Name = "CmdGstPlus"
CmdGstMinus.Name = "CmdGstMinus"
Cmd21.Name = "Cmd21"
Cmd22.Name = "Cmd22"
Cmd23.Name = "Cmd23"
CntSubTotal.LblName.Name = "LblName"
CntSubTotal.LblSumm.Name = "LblSumm"
CntSubTotal.Name = "CntSubTotal"
CntDisc.LblName.Name = "LblName"
CntDisc.LblSumm.Name = "LblSumm"
CntDisc.Name = "CntDisc"
GRDORDER.COLUMN2.Header1.Name = "Header1"
GRDORDER.COLUMN2.Text1.Name = "Text1"
GRDORDER.COLUMN2.Name = "COLUMN2"
GRDORDER.COLUMN3.Header1.Name = "Header1"
GRDORDER.COLUMN3.Txt1.Name = "Txt1"
GRDORDER.COLUMN3.Name = "COLUMN3"
GRDORDER.COLUMN4.Header1.Name = "Header1"
GRDORDER.COLUMN4.Text1.Name = "Text1"
GRDORDER.COLUMN4.ControlSource = "lvOrderTvrView.TvrPrcSale"
GRDORDER.COLUMN4.Name = "COLUMN4"
GRDORDER.COLUMN5.Header1.Name = "Header1"
GRDORDER.COLUMN5.Text1.Name = "Text1"
GRDORDER.COLUMN5.Name = "COLUMN5"
GRDORDER.Name = "GRDORDER"
CntGuest.LblName.Name = "LblName"
CntGuest.LblSumm.Name = "LblSumm"
CntGuest.lblInfo.Name = "lblInfo"
CntGuest.Name = "CntGuest"
</properties>
		<protected/>
		<methods>PROCEDURE GRDORDER._refreshrelatedobjects
LOCAL lRec
DODEFAULT()
lRec = RECNO('lvOrderTvrView')
WITH ThisForm
	SELECT lvOrderTvrView	&amp;&amp; ìàðêà									óäàëåííàÿ ïîçèöèÿ
	LOCATE ALL FOR (!BITTEST(lvOrderTvrView.TvrAttr,0) AND !BITTEST(lvOrderTvrView.TvrAttr,4)) AND lvOrderTvrView.TvrId &lt;&gt; .lnDiscTvrID
	.cnttuchordpay.cmd23.Enabled=FOUND()	&amp;&amp; êíîïêà Ìàðêè
	LOCATE ALL FOR BITTEST(lvOrderTvrView.TvrAttr,0) AND lvOrderTvrView.TvrId &lt;&gt; .lnDiscTvrID	&amp;&amp; èùåì ðàñïå÷àòàíûå ìàðêè
	.cnttuchordmanag.cmd23.Enabled=!FOUND()		&amp;&amp; êíîïêà Óäàëèòü âåñü çàêàç
	.cnttuchordmanag.blockall(.nPredchk = 0)	&amp;&amp; ìåíþ óïðàâëåíèÿ çàêàçîì
	.cnttuchordmanag.cmd11.Enabled=.t.	&amp;&amp; êíîïêà Çàêðûòü
	.cnttuchordmanag.cmd18.Enabled=.t.	&amp;&amp; êíîïêà Ïðî÷èå äåéñòâèÿ
	.cnttuchordpay.cmd13.Enabled=(.nPredchk = 0) or .lisManager	&amp;&amp; êíîïêà Ïðåä÷åêè
	.cnttuchmenu.blockall(.nPredchk = 0)
	.cnttuchmenumain.blockall(.nPredchk = 0)
	.Cnttuchordinfo.cmd12.Enabled=(.nPredchk = 0) &amp;&amp; êíîïêà Êàðòà ãîñòÿ

	.cnttuchordmanag.cmd23.Enabled=IIF(.cnttuchordmanag.cmd23.Enabled,thisform.lOrderDel, .f.) or .lisManager	&amp;&amp; êíîïêà îòìåíèòü âåñü çàêàç
	.cnttuchordmanag.cmd13.Enabled=IIF(!.cnttuchordmanag.cmd13.Enabled,.lisManager,.t.)		&amp;&amp; êíîïêà Óäàëèòü ïîçèöèþ

	IF lRec&lt;=RECCOUNT('lvOrderTvrView')
		GO lRec
	ENDIF
ENDWITH
ENDPROC
PROCEDURE GRDORDER.DblClick
NODEFAULT
ENDPROC
PROCEDURE GRDORDER.Valid
NODEFAULT
ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2DP0SWIKV</uniqueid>
		<timestamp>1010394549</timestamp>
		<class>cnttuchordpay</class>
		<classloc>rst_v1.vcx</classloc>
		<baseclass>container</baseclass>
		<objname>Cnttuchordpay</objname>
		<parent>frmorderedit</parent>
		<properties>Top = 468
Left = 609
ZOrderSet = 12
Name = "Cnttuchordpay"
Cmd11.Name = "Cmd11"
Cmd12.Name = "Cmd12"
LBL11.Name = "LBL11"
Cmd24.Name = "Cmd24"
Cmd14.Name = "Cmd14"
Cmd23.Name = "Cmd23"
Cmd13.Name = "Cmd13"
</properties>
		<protected/>
		<methods>PROCEDURE blockall
LPARAMETERS llBlock
DODEFAULT(llBlock)
*--ïðîâåðèì, äîñòóïíà ëè îïëàòà çàêàçîâ íà äàííîì ðàáî÷åì ìåñòå
this.cmd24.Enabled = thisform.lCmdPay 	
this.cmd13.Enabled = (thisform.nPrintinfPrech &lt;&gt; 0)	&amp;&amp; ðàáîòàåì áåç ïðåä÷åêîâ

ENDPROC
</methods>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2K711N8DC</uniqueid>
		<timestamp>1010394549</timestamp>
		<class>olecommprox</class>
		<classloc>olecomm.vcx</classloc>
		<baseclass>olecontrol</baseclass>
		<objname>Olecommprox1</objname>
		<parent>frmorderedit</parent>
		<properties>Top = 552
Left = 180
Height = 48
Width = 58
ZOrderSet = 13
lautosave = .F.
cbindobj = ThisForm.txtCardNo
Name = "Olecommprox1"
</properties>
		<protected/>
		<methods>PROCEDURE OnComm
*** ActiveX Control Event ***

*12.05.2006 11:08 -&gt;Îáúÿâëåíèå è èíèöèàëèçàöèÿ ïåðåìåííûõ
LOCAL	lcMsg
*------------------------------------------------------------------------------

WITH This

	*12.05.2006 11:08 -&gt;×èòàåì êîä
	lcMsg = ._Read()
	*------------------------------------------------------------------------------

	*12.05.2006 11:10 -&gt;Ïîêàçûâàåì äàííûå ïî êàðòà
	This.Parent.GetCardInfo(lcMsg)
	*------------------------------------------------------------------------------

ENDWITH
*******************************************************************************
********************************* END METHOD **********************************
*******************************************************************************
ENDPROC
</methods>
		<objcode/>
		<ole>0M8R4KGxGuEAAAAAAAAAAAAAAAAAAAAAPgADAP7/CQAGAAAAAAAAAAAAAAABAAAAAQAAAAAAAAAAEAAAAgAAAAEAAAD+////AAAAAAAAAAD////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////9/////v////7////+/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////1IAbwBvAHQAIABFAG4AdAByAHkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAWAAUA//////////8BAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAaVGSSncoBAwAAAIABAAAAAAAAAwBPAGwAZQBPAGIAagBlAGMAdABEAGEAdABhAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB4AAgEDAAAAAgAAAP////8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAAAAAADAEEAYwBjAGUAcwBzAE8AYgBqAFMAaQB0AGUARABhAHQAYQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJgACAP///////////////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAABLAAAAAAAAAAMAQwBoAGEAbgBnAGUAZABQAHIAbwBwAHMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcAAIA////////////////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAHcAAAAAAAAABAAAAAIAAAD+////BQAAAP7////+//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8AVopkbiwbEIK2AAAAAAAUIUM0EggAAADtAwAA7QMAAAFWimQAAAYAAAABAAAEAAAAAgEAgCUAAAAACAAAAAAASwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABMAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAABDb3B5cmlnaHQgKGMpIDE5OTQgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAACACwAAAFJUaHJlc2hvbGQACQAAAEkKAAAAAQAAAAoAAABSVFNFbmFibGUABQAAAEwAAAAACQAAAFNldHRpAAAAAD8AAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAG5ncwATAAAASAAAAAAKAAAAOTYwMCxuLDgsMQsAAABTVGhyZXNob2xkAAkAAABJCgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA==</ole>
		<ole2>OLEObject = C:\Windows\system32\mscomm32.ocx
</ole2>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>WINDOWS</platform>
		<uniqueid>_2KU0N1VV1</uniqueid>
		<timestamp>977819050</timestamp>
		<class>cstdatawork</class>
		<classloc>datawork_v1.vcx</classloc>
		<baseclass>custom</baseclass>
		<objname>Cstdatawork</objname>
		<parent>frmorderedit</parent>
		<properties>Top = 612
Left = 0
Name = "Cstdatawork"
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
	<record>
		<platform>COMMENT</platform>
		<uniqueid>RESERVED</uniqueid>
		<timestamp>0</timestamp>
		<class/>
		<classloc/>
		<baseclass/>
		<objname>frmorderedit</objname>
		<parent/>
		<properties>Arial, 0, 9, 5, 15, 12, 32, 3, 0
Arial, 1, 8, 5, 14, 11, 29, 3, 0
Arial, 1, 9, 6, 15, 12, 32, 3, 0
Arial, 1, 11, 7, 18, 14, 39, 4, 0
Arial, 1, 10, 6, 16, 13, 34, 3, 0
Arial, 0, 8, 5, 14, 11, 29, 3, 0
</properties>
		<protected/>
		<methods/>
		<objcode/>
		<ole/>
		<ole2/>
		<reserved1/>
		<reserved2/>
		<reserved3/>
		<reserved4/>
		<reserved5/>
		<reserved6/>
		<reserved7/>
		<reserved8/>
		<user/>
	</record>
</VFPData>
